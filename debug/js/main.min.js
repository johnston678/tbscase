function getClassName(t) {
    return egret.getQualifiedClassName(t)
}

function getClass(t) {
    return egret.getDefinitionByName(t)
}

function getClassByInstance(t) {
    return t ? t.prototype ? t : t.__proto__.constructor : null
}

function isExtends(t, e) {
    var i = getClassName(t);
    return e != i && t.prototype.__types__.indexOf(e) >= 0
}

function toObject(t) {
    if (!t) return null;
    var e = {};
    for (var i in t) e[i] = t[i];
    return e
}

function fromObject(t, e) {
    for (var i in e) t[i] = e[i]
}

function copyTextToClipboard(t) {
    var e = document.createElement("textarea");
    e.style.width = "0", e.style.height = "0", e.style.opacity = "0", e.value = t, document.body.appendChild(e), e.select();
    var i = !1;
    try {
        i = document.execCommand("copy")
    } catch (o) {
        console.log("不能使用这种方法复制内容")
    } finally {
        return document.body.removeChild(e), i
    }
}

function testSort(t) {
    for (var e = [], i = [], o = t; o >= 0; o--) e.push(o), i.push(o);
    console.log("数组排序前：" + e);
    var n = egret.getTimer();
    e = quickSort(e, function (t, e) {
        return t - e
    });
    var a = egret.getTimer() - n;
    console.log("将" + t + "个元素用自己的方法排序耗时: " + a + " ms"), console.log("自己的数组排序后：" + e);
    var s = egret.getTimer();
    i.sort(function (t, e) {
        return t - e
    });
    var r = egret.getTimer() - s;
    console.log("将" + t + "个元素用原生的方法排序耗时: " + r + " ms"), console.log("原生的数组排序后：" + i)
}

function quickSort(t, e) {
    if (t.length <= 1) return t;
    for (var i, o, n = Math.floor(t.length >> 1), a = t[n], s = [], r = [], l = [], h = 0; h < t.length; h++) o = t[h], i = e(t[h], a), 0 > i ? s.push(o) : 0 == i ? r.push(o) : i > 0 && l.push(o);
    return quickSort(s, e).concat(r, quickSort(l, e))
}

function ColorSet(t, e) {
    return "<font color='" + e + "'>" + t + "</font>"
}

function createFabao(t, e, i) {
    return t || (t = UIRole.create()), t.setFaBao(e), t.setWay(1), t.validParts(), i.addChild(t), t
}

function hex_md5(t) {
    return binl2hex(core_md5(str2binl(t), t.length * chrsz))
}

function b64_md5(t) {
    return binl2b64(core_md5(str2binl(t), t.length * chrsz))
}

function str_md5(t) {
    return binl2str(core_md5(str2binl(t), t.length * chrsz))
}

function hex_hmac_md5(t, e) {
    return binl2hex(core_hmac_md5(t, e))
}

function b64_hmac_md5(t, e) {
    return binl2b64(core_hmac_md5(t, e))
}

function str_hmac_md5(t, e) {
    return binl2str(core_hmac_md5(t, e))
}

function md5_vm_test() {
    return "900150983cd24fb0d6963f7d28e17f72" == hex_md5("abc")
}

function core_md5(t, e) {
    t[e >> 5] |= 128 << e % 32, t[(e + 64 >>> 9 << 4) + 14] = e;
    for (var i = 1732584193, o = -271733879, n = -1732584194, a = 271733878, s = 0; s < t.length; s += 16) {
        var r = i,
            l = o,
            h = n,
            c = a;
        i = md5_ff(i, o, n, a, t[s + 0], 7, -680876936), a = md5_ff(a, i, o, n, t[s + 1], 12, -389564586), n = md5_ff(n, a, i, o, t[s + 2], 17, 606105819), o = md5_ff(o, n, a, i, t[s + 3], 22, -1044525330), i = md5_ff(i, o, n, a, t[s + 4], 7, -176418897), a = md5_ff(a, i, o, n, t[s + 5], 12, 1200080426), n = md5_ff(n, a, i, o, t[s + 6], 17, -1473231341), o = md5_ff(o, n, a, i, t[s + 7], 22, -45705983), i = md5_ff(i, o, n, a, t[s + 8], 7, 1770035416), a = md5_ff(a, i, o, n, t[s + 9], 12, -1958414417), n = md5_ff(n, a, i, o, t[s + 10], 17, -42063), o = md5_ff(o, n, a, i, t[s + 11], 22, -1990404162), i = md5_ff(i, o, n, a, t[s + 12], 7, 1804603682), a = md5_ff(a, i, o, n, t[s + 13], 12, -40341101), n = md5_ff(n, a, i, o, t[s + 14], 17, -1502002290), o = md5_ff(o, n, a, i, t[s + 15], 22, 1236535329), i = md5_gg(i, o, n, a, t[s + 1], 5, -165796510), a = md5_gg(a, i, o, n, t[s + 6], 9, -1069501632), n = md5_gg(n, a, i, o, t[s + 11], 14, 643717713), o = md5_gg(o, n, a, i, t[s + 0], 20, -373897302), i = md5_gg(i, o, n, a, t[s + 5], 5, -701558691), a = md5_gg(a, i, o, n, t[s + 10], 9, 38016083), n = md5_gg(n, a, i, o, t[s + 15], 14, -660478335), o = md5_gg(o, n, a, i, t[s + 4], 20, -405537848), i = md5_gg(i, o, n, a, t[s + 9], 5, 568446438), a = md5_gg(a, i, o, n, t[s + 14], 9, -1019803690), n = md5_gg(n, a, i, o, t[s + 3], 14, -187363961), o = md5_gg(o, n, a, i, t[s + 8], 20, 1163531501), i = md5_gg(i, o, n, a, t[s + 13], 5, -1444681467), a = md5_gg(a, i, o, n, t[s + 2], 9, -51403784), n = md5_gg(n, a, i, o, t[s + 7], 14, 1735328473), o = md5_gg(o, n, a, i, t[s + 12], 20, -1926607734), i = md5_hh(i, o, n, a, t[s + 5], 4, -378558), a = md5_hh(a, i, o, n, t[s + 8], 11, -2022574463), n = md5_hh(n, a, i, o, t[s + 11], 16, 1839030562), o = md5_hh(o, n, a, i, t[s + 14], 23, -35309556), i = md5_hh(i, o, n, a, t[s + 1], 4, -1530992060), a = md5_hh(a, i, o, n, t[s + 4], 11, 1272893353), n = md5_hh(n, a, i, o, t[s + 7], 16, -155497632), o = md5_hh(o, n, a, i, t[s + 10], 23, -1094730640), i = md5_hh(i, o, n, a, t[s + 13], 4, 681279174), a = md5_hh(a, i, o, n, t[s + 0], 11, -358537222), n = md5_hh(n, a, i, o, t[s + 3], 16, -722521979), o = md5_hh(o, n, a, i, t[s + 6], 23, 76029189), i = md5_hh(i, o, n, a, t[s + 9], 4, -640364487), a = md5_hh(a, i, o, n, t[s + 12], 11, -421815835), n = md5_hh(n, a, i, o, t[s + 15], 16, 530742520), o = md5_hh(o, n, a, i, t[s + 2], 23, -995338651), i = md5_ii(i, o, n, a, t[s + 0], 6, -198630844), a = md5_ii(a, i, o, n, t[s + 7], 10, 1126891415), n = md5_ii(n, a, i, o, t[s + 14], 15, -1416354905), o = md5_ii(o, n, a, i, t[s + 5], 21, -57434055), i = md5_ii(i, o, n, a, t[s + 12], 6, 1700485571), a = md5_ii(a, i, o, n, t[s + 3], 10, -1894986606), n = md5_ii(n, a, i, o, t[s + 10], 15, -1051523), o = md5_ii(o, n, a, i, t[s + 1], 21, -2054922799), i = md5_ii(i, o, n, a, t[s + 8], 6, 1873313359), a = md5_ii(a, i, o, n, t[s + 15], 10, -30611744), n = md5_ii(n, a, i, o, t[s + 6], 15, -1560198380), o = md5_ii(o, n, a, i, t[s + 13], 21, 1309151649), i = md5_ii(i, o, n, a, t[s + 4], 6, -145523070), a = md5_ii(a, i, o, n, t[s + 11], 10, -1120210379), n = md5_ii(n, a, i, o, t[s + 2], 15, 718787259), o = md5_ii(o, n, a, i, t[s + 9], 21, -343485551), i = safe_add(i, r), o = safe_add(o, l), n = safe_add(n, h), a = safe_add(a, c)
    }
    return Array(i, o, n, a)
}

function md5_cmn(t, e, i, o, n, a) {
    return safe_add(bit_rol(safe_add(safe_add(e, t), safe_add(o, a)), n), i)
}

function md5_ff(t, e, i, o, n, a, s) {
    return md5_cmn(e & i | ~e & o, t, e, n, a, s)
}

function md5_gg(t, e, i, o, n, a, s) {
    return md5_cmn(e & o | i & ~o, t, e, n, a, s)
}

function md5_hh(t, e, i, o, n, a, s) {
    return md5_cmn(e ^ i ^ o, t, e, n, a, s)
}

function md5_ii(t, e, i, o, n, a, s) {
    return md5_cmn(i ^ (e | ~o), t, e, n, a, s)
}

function core_hmac_md5(t, e) {
    var i = str2binl(t);
    i.length > 16 && (i = core_md5(i, t.length * chrsz));
    for (var o = Array(16), n = Array(16), a = 0; 16 > a; a++) o[a] = 909522486 ^ i[a], n[a] = 1549556828 ^ i[a];
    var s = core_md5(o.concat(str2binl(e)), 512 + e.length * chrsz);
    return core_md5(n.concat(s), 640)
}

function safe_add(t, e) {
    var i = (65535 & t) + (65535 & e),
        o = (t >> 16) + (e >> 16) + (i >> 16);
    return o << 16 | 65535 & i
}

function bit_rol(t, e) {
    return t << e | t >>> 32 - e
}

function str2binl(t) {
    for (var e = Array(), i = (1 << chrsz) - 1, o = 0; o < t.length * chrsz; o += chrsz) e[o >> 5] |= (t.charCodeAt(o / chrsz) & i) << o % 32;
    return e
}

function binl2str(t) {
    for (var e = "", i = (1 << chrsz) - 1, o = 0; o < 32 * t.length; o += chrsz) e += String.fromCharCode(t[o >> 5] >>> o % 32 & i);
    return e
}

function binl2hex(t) {
    for (var e = hexcase ? "0123456789ABCDEF" : "0123456789abcdef", i = "", o = 0; o < 4 * t.length; o++) i += e.charAt(t[o >> 2] >> o % 4 * 8 + 4 & 15) + e.charAt(t[o >> 2] >> o % 4 * 8 & 15);
    return i
}

function binl2b64(t) {
    for (var e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", i = "", o = 0; o < 4 * t.length; o += 3)
        for (var n = (t[o >> 2] >> 8 * (o % 4) & 255) << 16 | (t[o + 1 >> 2] >> 8 * ((o + 1) % 4) & 255) << 8 | t[o + 2 >> 2] >> 8 * ((o + 2) % 4) & 255, a = 0; 4 > a; a++) i += 8 * o + 6 * a > 32 * t.length ? b64pad : e.charAt(n >> 6 * (3 - a) & 63);
    return i
}

function encodeUTF8(t) {
    var e, i, o, n = [];
    for (e = 0; e < t.length; e++)(i = t.charCodeAt(e)) < 128 ? n.push(i) : 2048 > i ? n.push(192 + (i >> 6 & 31), 128 + (63 & i)) : ((o = 55296 ^ i) >> 10 == 0 ? (i = (o << 10) + (56320 ^ t.charCodeAt(++e)) + 65536, n.push(240 + (i >> 18 & 7), 128 + (i >> 12 & 63))) : n.push(224 + (i >> 12 & 15)), n.push(128 + (i >> 6 & 63), 128 + (63 & i)));
    return n
}

function sha1(t) {
    var e, i, o, n = new Uint8Array(encodeUTF8(t)),
        a = (n.length + 8 >>> 6 << 4) + 16;
    for (t = new Uint8Array(a << 2), t.set(new Uint8Array(n.buffer)), t = new Uint32Array(t.buffer), o = new DataView(t.buffer), e = 0; a > e; e++) t[e] = o.getUint32(e << 2);
    t[n.length >> 2] |= 128 << 24 - 8 * (3 & n.length), t[a - 1] = n.length << 3;
    var s = [],
        r = [function () {
            return c[1] & c[2] | ~c[1] & c[3]
        }, function () {
            return c[1] ^ c[2] ^ c[3]
        }, function () {
            return c[1] & c[2] | c[1] & c[3] | c[2] & c[3]
        }, function () {
            return c[1] ^ c[2] ^ c[3]
        }],
        l = function (t, e) {
            return t << e | t >>> 32 - e
        },
        h = [1518500249, 1859775393, -1894007588, -899497514],
        c = [1732584193, -271733879, null, null, -1009589776];
    for (c[2] = ~c[0], c[3] = ~c[1], e = 0; e < t.length; e += 16) {
        var p = c.slice(0);
        for (i = 0; 80 > i; i++) s[i] = 16 > i ? t[e + i] : l(s[i - 3] ^ s[i - 8] ^ s[i - 14] ^ s[i - 16], 1), o = l(c[0], 5) + r[i / 20 | 0]() + c[4] + s[i] + h[i / 20 | 0] | 0, c[1] = l(c[1], 30), c.pop(), c.unshift(o);
        for (i = 0; 5 > i; i++) c[i] = c[i] + p[i] | 0
    }
    for (o = new DataView(new Uint32Array(c).buffer), e = 0; 5 > e; e++) c[e] = o.getUint32(e << 2);
    var u = Array.prototype.map.call(new Uint8Array(new Uint32Array(c).buffer), function (t) {
        return (16 > t ? "0" : "") + t.toString(16)
    }).join("");
    return u
}

function urlEncode(t) {
    var e = encodeURIComponent(t);
    return e = e.replace(/[^0-9a-zA-Z\-_\.%]/g, function (t) {
        return "%" + t.charCodeAt(0).toString(16).toUpperCase()
    })
}

function buildString() {
    var t = [],
        e = {
            appid: "1107422619",
            openid: "E9E8D54F0E666FEB4C352BEDF2001037",
            openkey: "BA0C66A3890448BA8B9742B79DA06408",
            pf: "wanba_ts.9",
            format: "json"
        };
    for (var i in e) "sig" != i && t.push(i + "=" + e[i]);
    var o = "/v3/user/get_vip_level",
        n = "uUsYRed5AXRqiG9U";
    t.sort(function (t, e) {
        return t > e ? 1 : e > t ? -1 : 0
    });
    var a = ["GET", urlEncode(o), urlEncode(t.join("&"))],
        s = a.join("&");
    s = n + "&" + s;
    var r = sha1(s);
    return r
}
var __reflect = this && this.__reflect || function (t, e, i) {
        t.__class__ = e, i ? i.push(e) : i = [e], t.__types__ = t.__types__ ? i.concat(t.__types__) : i
    },
    __extends = this && this.__extends || function () {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function (t, e) {
            t.__proto__ = e
        } || function (t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function (e, i) {
            function o() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (o.prototype = i.prototype, new o)
        }
    }(),
    __awaiter = this && this.__awaiter || function (t, e, i, o) {
        return new(i || (i = Promise))(function (n, a) {
            function s(t) {
                try {
                    l(o.next(t))
                } catch (e) {
                    a(e)
                }
            }

            function r(t) {
                try {
                    l(o["throw"](t))
                } catch (e) {
                    a(e)
                }
            }

            function l(t) {
                t.done ? n(t.value) : new i(function (e) {
                    e(t.value)
                }).then(s, r)
            }
            l((o = o.apply(t, e || [])).next())
        })
    },
    __generator = this && this.__generator || function (t, e) {
        function i(t) {
            return function (e) {
                return o([t, e])
            }
        }

        function o(i) {
            if (n) throw new TypeError("Generator is already executing.");
            for (; l;) try {
                if (n = 1, a && (s = a[2 & i[0] ? "return" : i[0] ? "throw" : "next"]) && !(s = s.call(a, i[1])).done) return s;
                switch (a = 0, s && (i = [0, s.value]), i[0]) {
                    case 0:
                    case 1:
                        s = i;
                        break;
                    case 4:
                        return l.label++, {
                            value: i[1],
                            done: !1
                        };
                    case 5:
                        l.label++, a = i[1], i = [0];
                        continue;
                    case 7:
                        i = l.ops.pop(), l.trys.pop();
                        continue;
                    default:
                        if (s = l.trys, !(s = s.length > 0 && s[s.length - 1]) && (6 === i[0] || 2 === i[0])) {
                            l = 0;
                            continue
                        }
                        if (3 === i[0] && (!s || i[1] > s[0] && i[1] < s[3])) {
                            l.label = i[1];
                            break
                        }
                        if (6 === i[0] && l.label < s[1]) {
                            l.label = s[1], s = i;
                            break
                        }
                        if (s && l.label < s[2]) {
                            l.label = s[2], l.ops.push(i);
                            break
                        }
                        s[2] && l.ops.pop(), l.trys.pop();
                        continue
                }
                i = e.call(t, l)
            } catch (o) {
                i = [6, o], a = 0
            } finally {
                n = s = 0
            }
            if (5 & i[0]) throw i[1];
            return {
                value: i[0] ? i[1] : void 0,
                done: !0
            }
        }
        var n, a, s, r, l = {
            label: 0,
            sent: function () {
                if (1 & s[0]) throw s[1];
                return s[1]
            },
            trys: [],
            ops: []
        };
        return r = {
            next: i(0),
            "throw": i(1),
            "return": i(2)
        }, "function" == typeof Symbol && (r[Symbol.iterator] = function () {
            return this
        }), r
    },
    MsgCenter = function () {
        function t() {
            this.msgMap = {}, this.invalidMap = {}, this.invalid = 0
        }
        return t.prototype.notify = function (t, e) {
            void 0 === e && (e = null);
            var i = this.msgMap[t];
            if (i)
                for (var o = i.length - 1; o >= 0; o--) {
                    var n = i[o];
                    if (n) {
                        var a = n[3];
                        n[0] = e, n[1].apply(n[2], n), a && this.off(t, n[1], n[2])
                    }
                }
        }, t.prototype.off = function (e, i, o) {
            void 0 === o && (o = null);
            var n = this.msgMap[e];
            if (n) {
                var a = this.getIndex(i, n, o); - 1 != a && (n[a] = null, this.invalidMap[e] = !0, this.invalid || egret.callLater(t.cleannull, this), this.invalid++)
            }
        }, t.prototype.on = function (t, e, i) {
            void 0 === i && (i = null);
            var o = this.msgMap[t];
            o || (o = this.msgMap[t] = []);
            var n = this.getIndex(e, o, i);
            n >= 0 || o.unshift([null, e, i])
        }, t.cleannull = function () {
            var t = this,
                e = ArrayUtil;
            if (t.invalid) {
                t.invalid = 0;
                for (var i in t.invalidMap) {
                    var o = t.msgMap[i];
                    e.cleannull(o), delete t.invalidMap[i]
                }
            }
        }, t.prototype.once = function (t, e, i) {
            void 0 === i && (i = null);
            var o = this.msgMap[t];
            o || (o = this.msgMap[t] = []);
            var n = this.getIndex(e, o, i);
            n >= 0 || o.unshift([null, e, i, !0])
        }, t.prototype.getIndex = function (t, e, i) {
            for (var o = e.length - 1; o >= 0; o--) {
                var n = e[o];
                if (n && t == n[1] && (!i || n[2] == i)) return o
            }
            return -1
        }, t.prototype.offAll = function (t) {
            var e = this.msgMap[t];
            e && (e.length = 0), delete this.msgMap[t]
        }, t
    }();
__reflect(MsgCenter.prototype, "MsgCenter");
var ObjectPool = function () {
    function t() {
        this._content = {}, this._objs = []
    }
    return t.prototype.getObj = function (t) {
        for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
        var o = getClassName(t);
        if (o || egret.warn(t.__proto__.__class__ + "需要加到window里面~~~~~~~~~~"), t.prototype.__types__.indexOf("ICacheable") < 0) throw new Error(o + "未实现ICacheable接口，只有实现ICacheable接口的类才能使用对象池");
        var n, a = this._content[o];
        return n = a && a.length ? a.pop() : new t, n.init.apply(n, e), n
    }, t.prototype.push = function (t) {
        if (null == t) return !1;
        var e = getClassName(t);
        return this._content[e] = this._content[e] || [], this._content[e].push(t), !0
    }, t.prototype.clear = function () {
        this._content = {}, this._objs.length = 0
    }, t.prototype.clearClass = function (t, e) {
        void 0 === e && (e = null);
        for (var i = this._content[t]; i && i.length;) {
            var o = i.pop();
            e && o[e](), o = null
        }
        this._content[t] = null, delete this._content[t]
    }, t.prototype.dealFunc = function (t, e) {
        var i = this._content[t];
        if (null != i) {
            var o = 0,
                n = i.length;
            for (o; n > o; o++) i[o][e]()
        }
    }, t
}();
__reflect(ObjectPool.prototype, "ObjectPool");
var BaseView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gameCtr = GameCtrlBase.instance, e
    }
    return __extends(e, t), e.prototype.getModel = function (t) {
        return this.gameCtr.getModel(t)
    }, e.prototype.getProxy = function (t) {
        return this.gameCtr.getProxy(t)
    }, e.prototype.openView = function (t, e) {
        this.gameCtr.openView(t, e)
    }, e.prototype.closeView = function (t) {
        this.gameCtr.closeView(t)
    }, e.prototype.getView = function (t) {
        return GameGlobal.layerMgr.getView(t)
    }, e
}(eui.Component);
__reflect(BaseView.prototype, "BaseView");
var lwm;
! function (t) {
    var e;
    ! function (t) {
        var e = function () {
            function t() {
                this.configSelf()
            }
            return t.prototype.configSelf = function () {
                null == this.singletonMap && (this.singletonMap = t.globalSingletonMap), null == this.dispatcher && (this.dispatcher = t.globalDispatcher), null == this.proxyMap && (this.proxyMap = t.globalProxyMap)
            }, t.prototype.initialize = function () {}, t.prototype.dispose = function () {
                this.singletonMap = null, this.dispatcher = null
            }, t.prototype.addMsgListeners = function () {}, t.prototype.removeMsgListeners = function () {}, t.prototype.on = function (t, e, i, o) {
                this.dispatcher.on(t, e, i)
            }, t.prototype.off = function (t, e, i) {
                this.dispatcher.off(t, e, i)
            }, t.prototype.notify = function (t, e) {
                this.dispatcher.notify(t, e)
            }, t.prototype.once = function (t, e, i) {
                this.dispatcher.once(t, e, i)
            }, t.prototype.offAll = function (t) {
                this.dispatcher.offAll(t)
            }, t.prototype.getProxy = function (t) {
                var e = getClassName(t),
                    i = this.proxyMap[e];
                return null == i ? this.addProxy(new t) : i
            }, t.prototype.addProxy = function (t) {
                var e = getClassName(t),
                    i = this.proxyMap[e];
                if (null != i) throw new Error("[" + e + "]在MVC中已经存在该单例对象！");
                return i = t, this.proxyMap[e] = i, i
            }, t.prototype.registSingleProxy = function (t, e) {
                var i = this.getProxy(t);
                i.listenServ(e)
            }, t.prototype.addSingleton = function (t) {
                var e = getClassName(t),
                    i = this.singletonMap[e];
                if (null != i) throw new Error("[" + e + "]在MVC中已经存在该单例对象！");
                return i = t, this.singletonMap[e] = i, i
            }, t.prototype.removeSingleton = function (t) {
                var e = getClassName(t),
                    i = this.singletonMap[e];
                return this.singletonMap[e] = null, delete this.singletonMap[e], i
            }, t.prototype.removeSingletonBy = function (t) {
                var e = getClassName(t),
                    i = this.singletonMap[e];
                return this.singletonMap[e] = null, delete this.singletonMap[e], i
            }, t.prototype.getSingleton = function (t) {
                var e = getClassName(t),
                    i = this.singletonMap[e];
                return null == i ? this.addSingleton(new t) : i
            }, t.prototype.hasSingleton = function (t) {
                var e = getClassName(t),
                    i = this.singletonMap[e];
                return null != i
            }, t.globalSingletonMap = {}, t.globalDispatcher = new MsgCenter, t.globalProxyMap = {}, t
        }();
        t.Controller = e, __reflect(e.prototype, "lwm.mvc.Controller", ["lwm.mvc.IController", "IDispose"])
    }(e = t.mvc || (t.mvc = {}))
}(lwm || (lwm = {}));
var ItemBase = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.$isAdd = !1, e.setSkinName(), e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this.$itemIndex
        },
        set: function (t) {
            this.$itemIndex = t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this.$selected
        },
        set: function (t) {
            this.$selected = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onData = function () {
        this.$isAdd || this.onAdd()
    }, e.prototype.$onRemoveFromStage = function () {
        t.prototype.$onRemoveFromStage.call(this), this.onRemove()
    }, e.prototype.$onAddToStage = function (e, i) {
        t.prototype.$onAddToStage.call(this, e, i), this.onAdd()
    }, e.prototype.onAdd = function () {
        this.$isAdd = !0
    }, e.prototype.onRemove = function () {
        this.$isAdd = !1
    }, e
}(eui.Component);
__reflect(ItemBase.prototype, "ItemBase", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var CacheableClass = function () {
    function t() {}
    return t.create = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        return this._cachePool.getObj(getClassByInstance(this), t)
    }, t.prototype.restore = function () {
        this.clear();
        var t = getClassByInstance(this);
        t || (egret.warn("這個類要放到window~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"), egret.warn(this.__proto__.__class__)), t._cachePool.push(this)
    }, t._cachePool = new ObjectPool, t
}();
__reflect(CacheableClass.prototype, "CacheableClass", ["ICacheable"]), window.CacheableClass = CacheableClass;
var PlatformBase = function () {
    function t() {
        this.deviceTopPX = 0, this.canRechage = !0
    }
    return Object.defineProperty(t.prototype, "isCanShare", {
        get: function () {
            return egret.error("is can share: false"), !1
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t.prototype, "isCanAddShortcut", {
        get: function () {
            return egret.error("is can add shortcut: false"), !1
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t.prototype, "isIOS", {
        get: function () {
            return "iOS" == egret.Capabilities.os
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t.prototype, "isAndroid", {
        get: function () {
            return "Android" == egret.Capabilities.os
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t.prototype, "inviter", {
        get: function () {
            return egret.log("have no inviter"), ""
        },
        enumerable: !0,
        configurable: !0
    }), t.prototype.initSDK = function () {
        this.adaptDisplay()
    }, t.prototype.addShortcut = function () {}, t.prototype.recharge = function (t, e) {
        var i = CFG_Recharge.LIB[t],
            o = 10 * i.money;
        CommonHttp.recharge(t, o, i.name, this.onRecharge, this, t)
    }, t.prototype.onRecharge = function (t, e) {
        egret.error("this is something in my work")
    }, t.prototype.sendToPlatform = function () {}, t.prototype.openRecharge = function () {
        GameGlobal.layerMgr.open(UIConst.RECHARGE)
    }, t.prototype.askOpenRecharge = function (t) {}, t.prototype.isScene = function (t) {}, t.prototype.createRewardedVideoAd = function (t) {}, t.prototype.share = function (t, e, i) {}, t.prototype.reportMsgToSelf = function (t, e) {
        egret.log("提交信息到后台")
    }, t.prototype.reportLogin = function () {
        egret.log("提交登陆信息")
    }, t.prototype.reportRegister = function () {
        egret.log("提交注册信息")
    }, t.prototype.adaptDisplay = function () {
        var t = GameGlobal.stage.stageHeight / GameGlobal.stage.stageWidth;
        t >= 17.5 / 9 ? this.deviceTopPX = 70 : this.deviceTopPX = 0
    }, t
}();
__reflect(PlatformBase.prototype, "PlatformBase", ["Platform"]);
var BaseEUIView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isInit = !1, e.openLv = 0, e._skinLoaded = !0, e._childCreated = !1, e.regVisBatScene = !1, e._isHideWhenBattle = !1, e.once(eui.UIEvent.COMPLETE, e.onSkinLoaded, e), e
    }
    return __extends(e, t), e.prototype.onSkinLoaded = function (t) {}, e.prototype.childrenCreated = function () {
        this._childCreated = !0, this._skinLoaded && this._childCreated && (this.isInit || (this.initView(), this.isInit = !0))
    }, e.prototype.initView = function () {}, e.prototype.onOpen = function (t) {
        this.onSize(), this.openAni && (this.openAni.stop(), this.openAni.play())
    }, e.prototype.onClose = function () {
        this.removeHideWhenBattle()
    }, e.prototype.destoryView = function () {}, e.prototype.destory = function () {}, e.prototype.openCheck = function () {
        return !1
    }, e.prototype.addCloseListen = function (t) {
        return t.touchEnabled = !0, t.addEventListener(egret.TouchEvent.TOUCH_TAP, this.closeHandler, this), this
    }, e.prototype.removeCloseListen = function (t) {
        t.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.closeHandler, this)
    }, e.prototype.closeHandler = function () {
        GameGlobal.layerMgr.close(this.id)
    }, e.prototype.drawBG = function (t, e, i, o, n) {
        void 0 === t && (t = -1), void 0 === e && (e = -1), void 0 === i && (i = 0), void 0 === o && (o = 0), void 0 === n && (n = 1);
        var a = GameGlobal.stage; - 1 == t && (t = a.stageWidth, e = a.stageHeight), null == this.bgSprite && (this.bgSprite = new egret.Sprite, this.addChildAt(this.bgSprite, 0)), this.bgSprite.graphics.clear(), this.bgSprite.graphics.beginFill(0, n), this.bgSprite.graphics.drawRect(i, o, t, e), this.bgSprite.graphics.endFill(), this.addCloseListen(this.bgSprite)
    }, e.prototype.setTouched = function (t) {
        this.touchEnabled = this.touchChildren = t
    }, e.prototype.onSize = function () {}, e.prototype.fullStageH = function () {
        var t = GameGlobal.stage;
        this.$setHeight(t.$stageHeight)
    }, e.prototype.customPanelResize = function () {
        var t = GameGlobal.stage,
            e = 44 + platform.deviceTopPX,
            i = 85;
        this.$setHeight(1020);
        var o = t.stageHeight - i - e,
            n = e + (o - this.$getHeight() >> 1);
        e > n && (n = e), this.$setY(n)
    }, e.prototype.customPanelResizeOld = function () {
        var t = GameGlobal.stage,
            e = 42,
            i = 75;
        this.y = e, this.$setHeight(t.stageHeight - i - e)
    }, e.prototype.customPageResize = function () {
        var t = GameGlobal.stage,
            e = 42,
            i = 75;
        this.$setHeight(t.$stageHeight - i - e)
    }, e.prototype.fullStage = function () {
        var t = GameGlobal.stage;
        this.$setWidth(t.$stageWidth), this.$setHeight(t.$stageHeight)
    }, e.prototype.fullStageWXWithPX = function () {
        var t = GameGlobal.stage,
            e = platform.deviceTopPX;
        this.$setY(e), this.$setWidth(t.$stageWidth), this.$setHeight(t.$stageHeight - e)
    }, e.prototype.callLater = function (t, e, i) {
        void 0 === e && (e = 50), void 0 === i && (i = null), GameGlobal.tick.addInterv(t, e, this, !0, i)
    }, e.prototype.hideWhenBattle = function () {
        this._isHideWhenBattle = !0, GameGlobal.modelBattle.isInbattle ? GameGlobal.layerMgr.addUIHideF(this.id, "battle") : GameGlobal.layerMgr.delUIHideF(this.id, "battle"), GameGlobal.modelBattle.on(ModelBattle.MSG_BATTLE_BEGIN, this.onBattleBegin, this), GameGlobal.modelBattle.on(ModelBattle.MSG_BATTLEENDED, this.onBattleEnd, this)
    }, e.prototype.removeHideWhenBattle = function () {
        this._isHideWhenBattle && (GameGlobal.modelBattle.off(ModelBattle.MSG_BATTLE_BEGIN, this.onBattleBegin, this), GameGlobal.modelBattle.off(ModelBattle.MSG_BATTLEENDED, this.onBattleEnd, this), this._isHideWhenBattle = !1)
    }, e.prototype.onBattleBegin = function () {
        GameGlobal.layerMgr.addUIHideF(this.id, "battle")
    }, e.prototype.onBattleEnd = function () {
        GameGlobal.layerMgr.delUIHideF(this.id, "battle")
    }, e.loadedRes = {}, e
}(BaseView);
__reflect(BaseEUIView.prototype, "BaseEUIView", ["IUIView"]);
var GameCtrlBase = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), Object.defineProperty(e, "instance", {
        get: function () {
            return this._instance || (this._instance = new e), this._instance
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.configSelf = function () {
        t.prototype.configSelf.call(this), this.modelMap || (this.modelMap = e.globalModelMap)
    }, e.prototype.dispose = function () {
        this.modelMap = null
    }, e.prototype.openView = function (t, e) {
        this.notify(ViewEvent.OPEN_VIEW, {
            viewClass: t,
            data: e
        })
    }, e.prototype.closeView = function (t) {
        this.notify(ViewEvent.CLOSE_VIEW, {
            viewClass: t
        })
    }, e.prototype.addModel = function (t) {
        var e = getClassName(t),
            i = this.modelMap[e];
        if (null != i) throw new Error("[" + e + "]在MVC中已经存在该单例对象！");
        return i = t, this.modelMap[e] = i, i
    }, e.prototype.removeModel = function (t) {
        var e = getClassName(t),
            i = this.modelMap[e];
        return this.modelMap[e] = null, delete this.modelMap[e], i
    }, e.prototype.removeModelBy = function (t) {
        var e = getClassName(t),
            i = this.modelMap[e];
        return this.modelMap[e] = null, delete this.modelMap[e], i
    }, e.prototype.getModel = function (t) {
        var e = getClassName(t),
            i = this.modelMap[e];
        return null == i ? this.addModel(new t) : i
    }, e.prototype.hasModel = function (t) {
        var e = getClassName(t),
            i = this.modelMap[e];
        return null != i
    }, e.globalModelMap = {}, e
}(lwm.mvc.Controller);
__reflect(GameCtrlBase.prototype, "GameCtrlBase");
var ItemJJCStore = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemJJCStoreSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.setBGSource(), this.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onDown, this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.setBGSource = function () {
        this.background.source = "JJCAtlas_json.bg7"
    }, e.prototype.onHand = function () {
        if (!this.data.conditionNotFit() && !this.data.priceNotEnough()) {
            var t = this.data.getLimit();
            t > 0 && this.data.boughtNum >= t ? this.data.cfg.dayxg > 0 ? ViewText.text("超过每日限购次数") : ViewText.text("超过限购次数") : GameGlobal.layerMgr.open(UIConst.JJCSTORETIPS, this.data)
        }
    }, e.prototype.onDown = function () {
        this.background.source = "JJCAtlas_json.chosen", GameGlobal.stage.once(egret.TouchEvent.TOUCH_END, this.onUp, this)
    }, e.prototype.onUp = function () {
        this.background.source = "JJCAtlas_json.bg7"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.validateDisplay()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.validateDisplay = function () {
        var t = this.data,
            e = ConfigHelp.makeVoList(t.getOnSellData())[0];
        this.onSellItem.data = e, this.txtName.text = e.name;
        var i = Color.getColorInt(e.quality);
        this.txtName.strokeColor = i, e.quality <= 1 ? this.txtName.textColor = 7495453 : this.txtName.textColor = i, this.txtCost.text = t.getPrice() + "", this.iconCost.source = IconUtil.getIconUrl(ConfigHelp.makeVoList(t.getCost())[0].icon);
        var o = t.getLimit();
        o > 0 ? (this.txtLimit.text = "限购(" + t.boughtNum + "/" + o + ")", t.boughtNum >= o ? this.txtLimit.textColor = 15532032 : this.txtLimit.textColor = 27922) : this.txtLimit.text = "", t.conditionDisplay(this.txtLockCondition)
    }, e
}(ItemBase);
__reflect(ItemJJCStore.prototype, "ItemJJCStore");
var PopItem = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        var e = this.cont.width,
            i = this.cont.height,
            o = e / 2,
            n = i / 2;
        this.cont.$setAnchorOffsetX(o), this.cont.$setAnchorOffsetY(n), this.cont.x = o, this.cont.y = n
    }, e.prototype.setSize = function (t) {
        var e = t.x,
            i = t.y;
        this.cont.width = e, this.cont.height = i;
        var o = e / 2,
            n = i / 2;
        this.cont.$setAnchorOffsetX(o), this.cont.$setAnchorOffsetY(n), this.cont.x = o, this.cont.y = n
    }, e.prototype.setMove = function (t) {
        GameGlobal.tick.addInterv(this.effShow, t, this, !0)
    }, e.prototype.effShow = function (t) {
        t || (t = this), t.visible = !0
    }, e.prototype.effHide = function () {
        var t = this;
        egret.Tween.get(t.cont).to({
            scaleX: .5,
            scaleY: .5
        }, 300, egret.Ease.backIn).call(t.dispose, t)
    }, e.prototype.dispose = function () {
        this.parent && this.parent.removeChild(this)
    }, e
}(eui.Component);
__reflect(PopItem.prototype, "PopItem");
var PopUpUI = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isInit = !1, e.openLv = 0, e.openType = 0, e.addEventListener(eui.UIEvent.COMPLETE, e.onSkinLoaded, e), e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this,
            e = t.cont.width / 2,
            i = t.cont.height / 2;
        t.cont.$setAnchorOffsetX(e), t.cont.$setAnchorOffsetY(e), t.cont.x += e, t.cont.y += i
    }, e.prototype.closeHandler = function () {
        var t = this;
        egret.Tween.get(t.cont).to({
            scaleX: .5,
            scaleY: .5
        }, 300, egret.Ease.backIn).call(t.onClose, t)
    }, e.prototype.onOpen = function (t) {
        this.onSize(), this.openAni && (this.openAni.stop(), this.openAni.play());
        var e = this;
        e.cont.scaleX = e.cont.scaleY = .5, egret.Tween.get(e.cont).to({
            scaleX: 1,
            scaleY: 1
        }, 300, egret.Ease.backOut)
    }, e.prototype.onClose = function () {
        GameGlobal.layerMgr.close(this.id)
    }, e.prototype.onSkinLoaded = function (t) {
        this.initView(), this.isInit = !0
    }, e.prototype.destoryView = function () {}, e.prototype.destory = function () {}, e.prototype.openCheck = function () {
        return !1
    }, e.prototype.addCloseListen = function (t) {
        t.touchEnabled = !0, t.addEventListener(egret.TouchEvent.TOUCH_TAP, this.closeHandler, this)
    }, e.prototype.removeCloseListen = function (t) {
        t.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.closeHandler, this)
    }, e.prototype.drawBG = function (t, e, i, o, n) {
        void 0 === t && (t = -1), void 0 === e && (e = -1), void 0 === i && (i = 0), void 0 === o && (o = 0), void 0 === n && (n = 1);
        var a = GameGlobal.stage; - 1 == t && (t = a.stageWidth, e = a.stageHeight), null == this.bgSprite && (this.bgSprite = new egret.Sprite, this.addChildAt(this.bgSprite, 0)), this.bgSprite.graphics.clear(), this.bgSprite.graphics.beginFill(0, n), this.bgSprite.graphics.drawRect(i, o, t, e), this.bgSprite.graphics.endFill(), this.addCloseListen(this.bgSprite)
    }, e.prototype.setTouched = function (t) {
        this.touchEnabled = this.touchChildren = t
    }, e.prototype.onSize = function () {}, e.prototype.fullStageH = function () {
        var t = GameGlobal.stage;
        this.$setHeight(t.stageHeight)
    }, e.prototype.customPanelResize = function () {
        var t = GameGlobal.stage,
            e = 46,
            i = 75;
        this.y = e, this.$setHeight(t.stageHeight - i - e)
    }, e.prototype.customPageResize = function () {
        var t = GameGlobal.stage,
            e = 46,
            i = 75;
        this.$setHeight(t.stageHeight - i - e)
    }, e.prototype.fullStage = function () {
        var t = GameGlobal.stage;
        this.$setWidth(t.stageWidth), this.$setHeight(t.stageHeight)
    }, e.prototype.callLater = function (t, e, i) {
        void 0 === e && (e = 50), void 0 === i && (i = null), GameGlobal.tick.addInterv(t, e, this, !0, i)
    }, e.loadedRes = {}, e
}(BaseView);
__reflect(PopUpUI.prototype, "PopUpUI", ["IUIView"]);
var GameObjectPlug = function () {
    function t() {
        this.locker = 0
    }
    return t.prototype.advanceTime = function (t) {}, t.prototype.onEvent = function (t, e) {}, t.prototype.onAdd = function () {}, t.prototype.onRemove = function (t) {}, t
}();
__reflect(GameObjectPlug.prototype, "GameObjectPlug", ["IGameObjectPlug"]);
var SceneObject = function (t) {
    function e() {
        var i = t.call(this) || this;
        return i.ci = 0, i.depadd = 0, i.deadFlag = 0, i.type = 0, i.hp = 20, i.x = 0, i.y = 0, i.name = "", i.force = 0, i.scale = 1, i.ci = ++e.ci, i
    }
    return __extends(e, t), e.getUniqueID = function () {
        return "client:" + ++this.ci
    }, e.prototype.advanceTime = function (t) {
        return !0
    }, e.prototype.onAdd = function () {}, e.prototype.onRemove = function () {}, e.prototype.interact = function (t) {}, e.ci = 0, e
}(MsgCenter);
__reflect(SceneObject.prototype, "SceneObject");
var VCZJiJin = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "VCZJiJinSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnGroup), this.btnGroup.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.initListData()
    }, e.prototype.onHand = function () {
        if (1 != VoCZJiJin.isTouZi) {
            var t = 2e3,
                e = GameGlobal.modelRole.voMine.yuanbao;
            return t > e ? void platform.askOpenRecharge() : void GameGlobal.modelczjj.CG2625()
        }
    }, e.prototype.setBtnEnable = function (t) {
        t ? (this.btnBg.source = "SCAtlas_json.btnTz", this.btnLabel.textColor = 11023619) : (this.btnBg.source = "CM1_json.disabled", this.btnLabel.textColor = 16777215)
    }, e.prototype.initListData = function () {
        this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemCZJiJin, 0 == VoCZJiJin.map.getLength() && VoCZJiJin.init()
    }, e.prototype.addTick = function () {
        this.timeLabel.text = "倒计时: ";
        var t = GameGlobal.modelAct.actData.getChildByID(3);
        if (t) {
            var e = t.getRemainSec();
            this.txtTime.text = DateUtil.getHMSBySecond2(e), GameGlobal.tick.addInterv(this.onTick, 1e3, this)
        } else this.removeTick()
    }, e.prototype.removeTick = function () {
        this.timeLabel.text = "", this.txtTime.text = "", GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onTick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(3);
        if (e) {
            var i = e.getRemainSec();
            this.txtTime.text = DateUtil.getHMSBySecond2(i)
        } else t.removeTick()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onServ(), this.removeTick()
    }, e.prototype.onServ = function () {
        GameGlobal.modelczjj.on(ModelCZJiJin.msg_data, this.onUpdate, this), GameGlobal.modelczjj.CG2621()
    }, e.prototype.offServ = function () {
        GameGlobal.modelczjj.off(ModelCZJiJin.msg_data, this.onUpdate, this)
    }, e.prototype.onUpdate = function () {
        this.updateState(), DisplayUtil.fillDataAC(this.sourceData, VoCZJiJin.map.getList())
    }, e.prototype.updateState = function () {
        switch (VoCZJiJin.isTouZi) {
            case 0:
                this.btnLabel.text = "投资2000元宝", this.setBtnEnable(!0);
                break;
            case 1:
                this.btnLabel.text = "已购买", this.setBtnEnable(!1)
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeTick(), this.offServ()
    }, e
}(BaseEUIView);
__reflect(VCZJiJin.prototype, "VCZJiJin");
var CommondMap = function () {
    function t() {
        this.list = new Array, this.map = {}
    }
    return t.prototype.add = function (t, e) {
        if (this.map[e]) {
            var i = this.map[e],
                o = this.list.indexOf(i);
            return this.map[e] = t, this.list[o] = t, t
        }
        return this.map[e] = t, this.list.push(t), t
    }, t.prototype.remove = function (t) {
        var e = this.map[t],
            i = this.list.indexOf(e);
        return -1 != i && (this.list.splice(i, 1), delete this.map[t]), e
    }, t.prototype.clear = function () {
        for (var t in this.map) delete this.map[t];
        this.list.length = 0
    }, t.prototype.update = function (t, e, i) {
        var o = this.map[t];
        delete this.map[t], this.map[e] = i;
        var n = this.list.indexOf(o);
        n >= 0 && (this.list[n] = i)
    }, t.prototype.getByKey = function (t) {
        return this.map[t]
    }, t.prototype.getByIndex = function (t) {
        return this.list[t]
    }, t.prototype.getMap = function () {
        return this.map
    }, t.prototype.getList = function () {
        return this.list
    }, t.prototype.getLength = function () {
        return this.list.length
    }, t
}();
__reflect(CommondMap.prototype, "CommondMap");
var MoveItem2 = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.effShow = function (e) {
        t.prototype.effShow.call(this, e), e.cont.scaleX = e.cont.scaleY = .5, egret.Tween.get(e.cont).to({
            scaleX: 1,
            scaleY: 1
        }, 300, egret.Ease.backOut)
    }, e
}(PopItem);
__reflect(MoveItem2.prototype, "MoveItem2");
var HttpBase = function () {
    function t() {
        this.reqHeader = null
    }
    return t.prototype.initServer = function (t) {
        this._serverUrl = t
    }, t.prototype.send = function (t, e, i, o) {
        return void 0 === e && (e = null), void 0 === i && (i = !0), void 0 === o && (o = {
            callBack: null,
            thisObj: null,
            tryAgainCount: 3
        }), this.ensurePackData(t), this.httpTransactionSend(t, e, i, o)
    }, t.prototype.httpTransactionSend = function (t, e, i, o) {
        void 0 === e && (e = null), void 0 === i && (i = !0), void 0 === o && (o = {
            callBack: null,
            thisObj: null,
            tryAgainCount: 3
        });
        var n = HttpTransaction.create();
        return this.timeOutSet(n, t, e, i, o), n.send(this._serverUrl, t, e, i, this.reqHeader)
    }, t.prototype.timeOutSet = function (t, e, i, o, n) {
        void 0 === i && (i = null), void 0 === o && (o = !0), void 0 === n && (n = {
            callBack: null,
            thisObj: null,
            tryAgainCount: 3
        }), t.clear_onTimeOut(), t.reg_onTimeOut(function () {
            n && n.callBack && n.callBack.call(n.thisObj), n.tryAgainCount-- > 0 ? t.send(this._serverUrl, e, i, o, this.reqHeader) : (t.restore(), egret.log("", "网络异常，请尝试重新连接"))
        }, this)
    }, t
}();
__reflect(HttpBase.prototype, "HttpBase");
var MessageVo = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.init = function (t, e) {
        for (var i = [], o = 2; o < arguments.length; o++) i[o - 2] = arguments[o];
        this._key = t, this._data = e
    }, e.prototype.clear = function () {
        this._key = null, this._data = null
    }, e
}(CacheableClass);
__reflect(MessageVo.prototype, "MessageVo");
var HuiHeSkillBase = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        var t = this.getMainRole();
        t && (this.isCombo() && t.addTextEff(4), t.removeBuffByEvt(2)), this.showSkillName()
    }, e.prototype.getMainRole = function () {
        return this.scene.unitMgr.getUnitById(this.mainRoleID)
    }, e.prototype.showSkillName = function () {
        if (this.skillcfg && this.skillcfg.en) {
            var t = this.getMainRole();
            if (t) {
                var e = this.skillcfg.n;
                t.showSkillText(e)
            }
        }
    }, e.prototype.dealAllRecord = function () {
        for (var t = this.recordData[EnumBattleKey.EFFECT], e = 0; e < t.length; e++) this.dealIndex(e)
    }, e.prototype.dealIndex = function (t) {
        var e = this.recordData[EnumBattleKey.EFFECT][t];
        e._deal_ || (this.dealtarget(e), e._deal_ = !0)
    }, e.prototype.dealtarget = function (t) {
        switch (t[EnumBattleKey.EFFECT_TYPE]) {
            case EnumBattleKey.VAL_DMG:
                this.dealDmg(t[EnumBattleKey.P_TARGETID], t);
                break;
            case EnumBattleKey.P_BUFF:
                this.dealBuffTriggle(t);
                break;
            case EnumBattleKey.VAL_CURE:
                this.dealCure(t[EnumBattleKey.P_TARGETID], t);
                break;
            case EnumBattleKey.VAL_JS:
                this.dealDmg(t[EnumBattleKey.P_TARGETID], t);
                break;
            case EnumBattleKey.VAL_DELBUF:
                this.delBuff(t);
                break;
            case EnumBattleKey.VAL_DELTBUF:
                this.delTypeBuff(t);
                break;
            case EnumBattleKey.k_VAMPIRE:
                this.dealVampireOp(t);
                break;
            case EnumBattleKey.REBIRTH:
                this.dealRebirth(t[EnumBattleKey.P_TARGETID], t);
                break;
            default:
                t[EnumBattleKey.P_BUFF] ? this.dealBuffTriggle(t) : console.log(1)
        }
    }, e.prototype.delBuff = function (t) {
        var e = t[EnumBattleKey.P_TARGETID],
            i = t[EnumBattleKey.P_BUFID],
            o = this.scene.unitMgr.getUnitById(e);
        o && o.removeBufView && o.removeBufView(i)
    }, e.prototype.delTypeBuff = function (t) {
        var e = t[EnumBattleKey.P_TARGETID],
            i = this.scene.unitMgr.getUnitById(e);
        if (i && i.removeBufView)
            for (var o in i.buffIDMap) {
                var n = CFG_Buff.LIB[o],
                    a = t[EnumBattleKey.BUFFTYPE];
                n && n.zengyijianyi == a && i.removeBufView(o)
            }
    }, e.prototype.dealBuffTriggle = function (t) {
        var e = t[EnumBattleKey.P_BUFIDXXXX],
            i = CFG_Buff.LIB[e];
        if (i) {
            var o = this.scene.unitMgr.getUnitById(t[EnumBattleKey.P_TARGETID]);
            if (o) {
                var n = i.text;
                if (n && "0" != n) {
                    var a = HuiHeHurtText.create();
                    1 == i.zengyijianyi ? a.setZhengYiText(o, n) : a.setJianYiText(o, n), this.scene.addPlug(a)
                }
                o.addBuffView(e, 0, o.hpOffset, 600, 600, 1, -1, !0)
            } else console.log("cant find buffTarget:" + t[EnumBattleKey.P_TARGETID])
        } else console.log("cant find buff:" + e)
    }, e.prototype.dealop1 = function (t, e) {}, e.prototype.dealRebirth = function (t, e) {
        var i = this.scene.unitMgr.getUnitById(t);
        i && i.rebirth(e)
    }, e.prototype.dealDmg = function (t, e, i) {
        void 0 === i && (i = !0);
        var o = this.scene.unitMgr.getUnitById(t);
        if (o) {
            if (o.takeDmg(e, this.skillcfg), e[EnumBattleKey.P_BUFF]) {
                var n = (HuiHeHurtText.create(), e[EnumBattleKey.P_BUFF]),
                    a = (CFG_Buff.LIB[n], TakeBuffText.create());
                a.target = o, a.initLib(n), this.scene.addPlug(a)
            }
            var s = this.getMainRole();
            if (this.dealAntiHurt(s, e), this.dealVampire(s, e), this.dealAbs(o, e), this.skillcfg && this.skillcfg.heff) {
                var r = o.addBodyEffet("battleeff/" + this.skillcfg.heff, 0, 0, 300, 300, 1, 300, !1);
                1 == o.dir && (r.scaleX = -1)
            }
        }
    }, e.prototype.dealCure = function (t, e) {
        var i = this.scene.unitMgr.getUnitById(t);
        if (i) {
            if (i.takeCure(e, this.skillcfg), e[EnumBattleKey.P_BUFF]) {
                var o = (HuiHeHurtText.create(), e[EnumBattleKey.P_BUFF]),
                    n = (CFG_Buff.LIB[o], TakeBuffText.create());
                n.target = i, n.initLib(o), this.scene.addPlug(n)
            }
            i.addBodyEffet("battleeff/addValue", 0, 0, 500, 500, 1, 500, !1)
        }
    }, e.prototype.getRecordTar = function (t) {
        return this.scene.unitMgr.getUnitById(this.recordData[EnumBattleKey.EFFECT][t][EnumBattleKey.P_TARGETID])
    }, e.prototype.getAnyTarget = function (t) {
        var e = t[EnumBattleKey.EFFECT];
        0 == e.length && console.log("effect长度为0 data:" + e);
        for (var i = 0; i < e.length; i++) {
            var o = e[i];
            if (o[EnumBattleKey.EFFECT_TYPE] == EnumBattleKey.VAL_DMG) {
                var n = this.scene.unitMgr.getUnitById(o[EnumBattleKey.P_TARGETID]);
                if (n) return n
            }
        }
        return null
    }, e.prototype.getEnemyDmgData = function (t, e) {
        for (var i = 0, o = [], n = 0; n < this.scene.unitMgr.units.length; n++) {
            var a = this.scene.unitMgr.units[n];
            if (a && a.force && a.hp && a.force != t.force && a != t) {
                var s = Formula.caculateRBattleDmg(t, a, null);
                if (o.push(s), i++, i >= e) break
            }
        }
        var r = {
            type: "use_skill",
            effect: o
        };
        return r
    }, e.prototype.getMiddleLineFront = function (t) {
        t = t || new egret.Point;
        var e = 0,
            i = 1,
            o = 0;
        if (this.recordData)
            for (var n = 0; n < this.recordData[EnumBattleKey.EFFECT].length; n++) {
                var a = this.recordData[EnumBattleKey.EFFECT][n];
                if (a[EnumBattleKey.EFFECT_TYPE] == EnumBattleKey.VAL_DMG) {
                    var s = this.scene.unitMgr.getUnitById(a[EnumBattleKey.P_TARGETID]);
                    s && (e += s.col, o++, s.row < i && (i = s.row))
                }
            }
        return t.x = e / o, t.y = i, t
    }, e.prototype.textErrorTargetNull = function () {
        console.error("找不到目标")
    }, e.prototype.getForceTransfrom = function (t) {
        return 1 == t ? RoundBattleScene.posMatrix1 : RoundBattleScene.posMatrix2
    }, e.prototype.getForceTranspoint = function (t, e, i) {
        var o = this.getForceTransfrom(t),
            n = o.transformPoint(e, i, MoveUtil.nextPointRet);
        return n
    }, e.prototype.dead = function () {
        this.scene && this.scene.removePlug(this, -1)
    }, e.prototype.delayTWCall = function (t, e, i, o) {
        void 0 === i && (i = null), void 0 === o && (o = null), i || (i = this);
        var n = MTweenThread.create(i).wait(e).call(t, i);
        this.scene.tween.add(n)
    }, e.prototype.backToPos = function () {
        var t = this.getMainRole();
        if (t) {
            this.locker++;
            var e = MTweenThread.create(t).to({
                x: t.initx,
                y: t.inity
            }, 150).call(this.onMoveEnd, this);
            this.scene.tween.add(e)
        }
    }, e.prototype.onMoveEnd = function () {
        this.locker--
    }, e.prototype.getStyleCFGArg = function (t, e) {
        return this.skillcfg.scfg && this.skillcfg.scfg[t] ? this.skillcfg.scfg[t] : e
    }, e.prototype.dealAnti = function () {}, e.prototype.dealAntiHurt = function (t, e) {
        if (t && e[EnumBattleKey.antiHurt]) {
            var i = e[EnumBattleKey.antiHurt],
                o = t.hp - i,
                n = Util.getTempObj();
            n.dmgValue = o, n.newHp = i, t.takeDmg2(n), this.skillcfg && this.skillcfg.heff ? t.addBodyEffet("battleeff/" + this.skillcfg.heff, 0, 0, 300, 300, 1, 300, !1) : t.addBodyEffet("battleeff/101", 0, 0, 300, 300, 1, 300, !1)
        }
    }, e.prototype.dealVampire = function (t, e) {
        if (t && e[EnumBattleKey.k_VAMPIRE]) {
            var i = e[EnumBattleKey.k_VAMPIRE],
                o = i - t.hp;
            if (o > 0) {
                var n = Util.getTempObj();
                n[EnumBattleKey.DAMGVALUE] = o, n[EnumBattleKey.P_CURHP] = i, t.takeCure(n, null)
            } else 0 > o && console.log("ErrorVampireHp:" + o)
        }
    }, e.prototype.dealVampireOp = function (t) {
        this.dealCure(t[EnumBattleKey.P_TARGETID], t)
    }, e.prototype.dealAbs = function (t, e) {
        e[EnumBattleKey.P_ABSDEF] && t.showSkillText("物免"), e[EnumBattleKey.P_ABSRES] && t.showSkillText("魔免"), e[EnumBattleKey.P_MISS] && t.showSkillText("Miss"), e[EnumBattleKey.p_ABS_HALF] && t.showSkillText("神兵护甲"), e[EnumBattleKey.p_ABS_XTQ] && t.showSkillText("护主")
    }, e.prototype.dealChain = function (t) {
        var e = t[EnumBattleKey.CHAIN];
        if (e && e.length)
            for (var i = 0, o = e.length; o > i; i++) {
                var n = e[i];
                switch (n[EnumBattleKey.EFFECT_TYPE]) {
                    case EnumBattleKey.VAL_DMG:
                        var a = n[EnumBattleKey.P_TARGETID],
                            s = this.scene.unitMgr.getUnitById(a);
                        s && s.addBodyEffet("battleeff/bombm", 0, 0, 500, 500, 1, 500, !1), this.dealDmg(n[EnumBattleKey.P_TARGETID], n, !1)
                }
            }
    }, e.prototype.isCombo = function () {
        var t = this.recordData;
        return t && ("combo" == t.type || t.combo) ? !0 : !1
    }, e.prototype.hasNextCombo = function () {
        var t = this.scene.runningPlug,
            e = t.data.data.send[t.stepIndex];
        return e && ("combo" == e.type || e.combo) ? !0 : !1
    }, e
}(GameObjectPlug);
__reflect(HuiHeSkillBase.prototype, "HuiHeSkillBase");
var ActivityView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Shuang11Skin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this,
            e = this.base;
        e.btnReturn.visible = !1;
        var i = GameGlobal.layerMgr;
        this.addCloseListen(e.btnClose).addCloseListen(e.btnReturn), this.btnWenhao.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onWenHao, this), e.createTabGroup().createPageGrp(), i.regView(FestivalEmissaryView, e.pageGrp), i.regView(TreasureHouseView, e.pageGrp), i.regView(PlayDiceView, e.pageGrp), e.addTabByRef("魔王来袭", 0, FestivalEmissaryView), e.addTabByRef("藏宝阁", 1, TreasureHouseView), e.addTabByRef("捉玉兔", 2, PlayDiceView), e.listenTabClick(t.onTbtn, t), this._viewClass = [FestivalEmissaryView, TreasureHouseView, PlayDiceView], this._curst = 0
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e ? this.base.setTabSelIdx(e, !0) : this.base.setTabSelIdx(0, !0)
    }, e.prototype.onClose = function () {}, e.prototype.updateWenHao = function () {
        0 == this._curst ? this.btnWenhao.visible = !1 : this.btnWenhao.visible = !1
    }, e.prototype.onWenHao = function () {
        0 == this._curst && ViewWenHao.show(CFG_COMMOND.LIBWFSM[1122].detail, 24)
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(31);
        if (e) {
            var i = e.getChildByID(57);
            if (!i) return void t.closeHandler();
            var o = i.getRemainSec();
            0 > o && (ViewText.text("活动已结束"), t.closeHandler())
        } else t.closeHandler()
    }, e.prototype.onTbtn = function (t) {
        var e = t.sort;
        CFG_COMMOND.canDo(t.bindSysID) && (this.base.title = t.text, this.setCurSt(e), this.updateWenHao())
    }, e.prototype.setCurSt = function (t) {
        this.openView(this._viewClass[t]), this.base.setTabSelIdx(t), this._curst = t
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(ActivityView.prototype, "ActivityView");
var FestivalEmissaryView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.WIDTH = 450, e.MAX_ITEM_COUNT = 10, e.gridArr = [], e.skinName = "FestivalEmissarySkin", e.logicLayer = UIActivity.LOGIC_LAYER, e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.imgTitle.source = "commonAct_json.15_mwlxTitle", this.lb_boss.text = ",魔王将携大礼出现!", this.img_mwlx.visible = !0, this.img_nianBoss.visible = !1, DisplayUtil.popBtnStyle(this.btnAdd), this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btn_passAward.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btn_rule.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), DisplayUtil.popBtnStyle(this.btn_rule), this.initItemGroup()
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnAdd:
                this.buyChanllengeTimes();
                break;
            case this.btn_passAward:
                this.onShowExtraAward();
                break;
            case this.btn_rule:
                this.onRule()
        }
    }, e.prototype.onRule = function () {
        ViewWenHao.show(CFG_COMMOND.LIBWFSM[1123].detail, 24)
    }, e.prototype.onShowExtraAward = function () {
        GameGlobal.layerMgr.open(UIConst.EMISSARYEXTRAAWARD)
    }, e.prototype.buyChanllengeTimes = function () {
        var t = this,
            e = "是否花费" + this._model.costYB + "元宝购买一次挑战次数?\n剩余可购买次数：" + this._model.leftBuyTimes;
        this.isBuying = !1, ViewAlert.show(e, function () {
            if (!t.isBuying) {
                t.isBuying = !0;
                var e = t.getProxy(ActivityBossProxy);
                e.buyChallengeTimes()
            }
        })
    }, e.prototype.onUpdate = function () {
        this.updateEmissaryItem(), this.updateAwardShow(), this.txtCount.text = "挑战次数: " + this._model.chanllegneTimes + "/10", this.isShowCounterDonw = this._model.chanllegneTimes < 10, this.btnAdd.visible = this.isShowCounterDonw, this.lb_counterDown.visible = this.isShowCounterDonw, this.lb_passLv.text = "" + this._model.curLv
    }, e.prototype.updateEmissaryItem = function () {
        for (var t = this._model.bossDataArr, e = t.length, i = t.values, o = 0; e > o; o++) {
            var n = this.itemGroup.getChildAt(o);
            n.setData(i[o])
        }
    }, e.prototype.initItemGroup = function () {
        var t = this.MAX_ITEM_COUNT,
            e = this.itemGroup.numChildren,
            i = t - e;
        if (i > 0)
            for (var o = 0; i > o; o++) {
                var n = new EmissaryItem;
                this.itemGroup.addChild(n)
            } else if (0 > i)
                for (var a = Math.abs(i), o = 0; a > o; o++) this.itemGroup.removeChildAt(e - o - 1);
        this.setItemPos()
    }, e.prototype.setItemPos = function () {
        for (var t = this.itemGroup.numChildren, e = t - 1; e >= 0; e--)
            if (e % 2 == 0) {
                var i = (t - e) / 2 - 1,
                    o = this.itemGroup.getChildAt(e);
                o.x = 2, o.y = 82 + 310 * i
            } else {
                var i = (t - e - 1) / 2,
                    o = this.itemGroup.getChildAt(e);
                o.x = 356, o.y = 3 + 310 * i
            }
    }, e.prototype.updateAwardShow = function () {
        var t = this._model.curEmissary();
        if (t) ConfigHelp.makeStrGrids(t.award, this.gridArr, 0, 0, this.gridContainer, !0);
        else {
            var e = this._model.bossDataArr,
                i = this._model.firstId;
            ConfigHelp.makeStrGrids(e.get(i).award, this.gridArr, 0, 0, this.gridContainer, !0)
        }
    }, e.prototype.onBuyChangllegeTime = function (t) {
        var e = t.data;
        switch (e) {
            case E_BUY_CHANLLENGE_TIME_RESULT.NO_BUY_TIMES:
                ViewText.text("你没有可购买的次数");
                break;
            case E_BUY_CHANLLENGE_TIME_RESULT.SUCCESS:
                this._model.chanllegneTimes++, this._model.chanllegneTimes >= 10 && (this.lb_counterDown.visible = !1, this.btnAdd.visible = !1, this.isShowCounterDonw = !1);
                break;
            case E_BUY_CHANLLENGE_TIME_RESULT.NOT_ENOUGH_YB:
                ViewText.text("元宝不足")
        }
    }, e.prototype.onChangllengeResult = function (t) {
        var e = t.data.id,
            i = t.data.result;
        switch (i) {
            case E_CHANLLENGE_RESULT.SUCCESS:
                var o = this._model.bossDataArr.get(e).award;
                GameGlobal.layerMgr.open(UIConst.GKBOSSAWRAD, o);
                break;
            case E_CHANLLENGE_RESULT.FAIL:
                break;
            case E_CHANLLENGE_RESULT.NO_CHANCE:
                ViewText.text("你没有挑战的次数");
                break;
            case E_CHANLLENGE_RESULT.NO_THROUGH_LAST:
                ViewText.text("上一层还没有通关");
                break;
            case E_CHANLLENGE_RESULT.HAD_THROUGH:
                ViewText.text("本层已通关")
        }
    }, e.prototype.onExtraAwardStatueChange = function (t) {
        var e = t.data;
        switch (e) {
            case E_RESULT_GET_EXTR_AWARD.SUCCESS:
                ViewText.text("领取成功！");
                var i = this.getProxy(ActivityBossProxy);
                i.reviewExtralAward();
                break;
            case E_RESULT_GET_EXTR_AWARD.UNREACH:
                ViewText.text("条件未达标!");
                break;
            case E_RESULT_GET_EXTR_AWARD.BAG_FULL:
                ViewText.text("背包已满！");
                break;
            case E_RESULT_GET_EXTR_AWARD.RECIEVED:
                ViewText.text("请勿重复领取")
        }
    }, e.prototype.onTick = function () {
        if (this.isShowCounterDonw) {
            var t = GameGlobal.modelLogin.getSerTime() / 1e3,
                e = this._model.refreshTime - (t - this._model.curServerTime) >> 0;
            if (0 >= e) {
                var i = this.getProxy(ActivityBossProxy);
                i.openFestEmissaryView()
            }
            this.lb_counterDown.visible = e >= 0 && this._model.chanllegneTimes < 10, this.lb_counterDown.textFlow = HtmlUtil.parse("回复倒计时: " + HtmlUtil.color(DateUtil.getHMSBySecond2(e), "#FF5B5B"))
        }
    }, e.prototype.addMsg = function () {
        TimerManager.doTimer(1e3, -1, this.onTick, this);
        var t = this.getProxy(ActivityBossProxy);
        t.on(ActivityEvent.UPDATE_FEST_EMISSARY_INFO, this.onUpdate, this), t.openFestEmissaryView(), t.reviewExtralAward(), EventCenter.addMsg(ActivityEvent.UPDATE_BUY_TIMES, this.onBuyChangllegeTime, this), EventCenter.addMsg(ActivityEvent.CHANLLENGE_TIPS, this.onChangllengeResult, this), EventCenter.addMsg(ActivityEvent.UPDATE_EXTRA_AWARD_STATE, this.onExtraAwardStatueChange, this)
    }, e.prototype.removeMsg = function () {
        TimerManager.remove(this.onTick, this);
        var t = this.getProxy(ActivityBossProxy);
        t.off(ActivityEvent.UPDATE_FEST_EMISSARY_INFO, this.onUpdate, this), EventCenter.removeMsg(ActivityEvent.UPDATE_BUY_TIMES, this.onBuyChangllegeTime, this), EventCenter.removeMsg(ActivityEvent.CHANLLENGE_TIPS, this.onChangllengeResult, this), EventCenter.removeMsg(ActivityEvent.UPDATE_EXTRA_AWARD_STATE, this.onExtraAwardStatueChange, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bgg, "commonAct_json.15_bossBg02"), this._model = this.getModel(FestivalEmissaryModel), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bgg), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(FestivalEmissaryView.prototype, "FestivalEmissaryView");
var FestivalEmissaryModel = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.curLv = 0, e.chanllegneTimes = 0, e.leftBuyTimes = 0, e.refreshTime = 0, e.curServerTime = 0, e.extraAwardArr = [], e.notRecievedExtAwardArr = [], e.curPeriod = 0, e.bossDataArr = new Dictionary, e.curEmissarryId = 0, e.firstId = 0, e
    }
    return __extends(e, t), e.prototype.initBossData = function (t) {
        if (t != this.curPeriod) {
            this.curPeriod = t, this.bossDataArr.clear();
            var e = Config.getConfig(ssyjrsz_124).values.concat();
            e.sort(function (t, e) {
                return t.id - e.id
            });
            for (var i = 0; i < e.length; i++) {
                var o = e[i];
                if (o.qs == t) {
                    var n = new EmissaryItemData;
                    n.id = o.id, n.bossid = o.gwmx, n.award = o.zsjl, n.extraAward = o.ewjl, n.lv = o.cs, 1 == n.lv && (this.firstId = n.id), this.bossDataArr.set(n.id, n)
                }
            }
        }
    }, e.prototype.updateActiveBossData = function (t, e, i) {
        var o = this.bossDataArr.get(t);
        o.blood = e, o.personAsk = i;
        var n, a = this.curLv;
        n = o.lv <= a ? E_FEST_EMISSARY_BOSS_STATE.KILLED : o.lv == a + 1 ? E_FEST_EMISSARY_BOSS_STATE.CAN_CHALLENGE : E_FEST_EMISSARY_BOSS_STATE.CANOT_CHALLENGE, o.lv == a && (this.curEmissarryId = o.id), o.state = n, o.extAwardState = E_EMISSARY_AWARD_STATE.HAVED_AWARD
    }, e.prototype.curEmissary = function () {
        return this.bossDataArr.get(this.curEmissarryId)
    }, Object.defineProperty(e.prototype, "canbuyCount", {
        get: function () {
            return CFG_Param.LIB[24].key
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "costYB", {
        get: function () {
            return CFG_Param.LIB[25].key
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "allExtraAward", {
        get: function () {
            if (!this.extraAwardArr.length) {
                var t = CFG_Shuang11_Emissary.LIB;
                for (var e in t) {
                    var i = t[e];
                    if (i.qs == this.curPeriod && "0" != i.ewjl) {
                        var o = new EmissaryExtraAwardData;
                        o.lv = i.cs, o.award = i.ewjl, this.extraAwardArr.push(o)
                    }
                }
            }
            return this.extraAwardArr
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.markExtraReward = function () {
        for (var t = (this.bossDataArr, this.curLv), e = this.notRecievedExtAwardArr, i = e.length, o = 0; i > o; o++) {
            var n = e[o],
                a = this.bossDataArr.get(n);
            a.lv <= t ? a.extAwardState = E_EMISSARY_AWARD_STATE.CAN_AWARD : a.extAwardState = E_EMISSARY_AWARD_STATE.NOT_AWARD
        }
    }, e
}(GameCtrlBase);
__reflect(FestivalEmissaryModel.prototype, "FestivalEmissaryModel");
var CampWar;
! function (t) {
    var e = function () {
        function t() {
            this.prestige = 0
        }
        return Object.defineProperty(t.prototype, "prestige", {
            get: function () {
                return this._prestige
            },
            set: function (t) {
                this._lastPrestige = this._prestige, this._prestige = t
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "lastPrestige", {
            get: function () {
                return this._lastPrestige
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "zoneName", {
            get: function () {
                return this._zoneName || "" == this._zoneName || (this._zoneName = this.getZoneNameByUID(this.uid)), this._zoneName
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.getZoneNameByUID = function (t) {
            var e = "";
            if (t && t > 1e4) {
                var i = t + "",
                    o = i.slice(1, 5);
                return e = ".S" + parseInt(o)
            }
            return e
        }, t
    }();
    t.PlayerData = e, __reflect(e.prototype, "CampWar.PlayerData")
}(CampWar || (CampWar = {}));
var AppConfig = function () {
    function t() {}
    return Object.defineProperty(t, "globalConfig", {
        set: function (t) {
            this._globalConfig = t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "pftype", {
        get: function () {
            return this._pfType
        },
        set: function (t) {
            this._pfType = t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "channel", {
        get: function () {
            return window.OPEN_DATA ? window.OPEN_DATA.channel : E_SQ_CHANNEL.undefined
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "isTecentApp", {
        get: function () {
            return t.channel == E_SQ_CHANNEL.tencentNews
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "isHasBanner", {
        get: function () {
            var e = !1;
            switch (t.channel) {
                case E_SQ_CHANNEL.tencentNews:
                case E_SQ_CHANNEL.xinYueClub:
                    e = !0
            }
            return e
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "global_json_url", {
        get: function () {
            return "resource/config/global.json"
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "wyw_server", {
        get: function () {
            return this._globalConfig.WYWServer
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "wb_server", {
        get: function () {
            return this._globalConfig.WBServer
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "httpServer", {
        get: function () {
            return this._server
        },
        enumerable: !0,
        configurable: !0
    }), t.configGame = function () {
        switch (t.pftype) {
            case E_PF_CONFIG_TYPE.WAN_WAN:
            case E_PF_CONFIG_TYPE.WAN_BA:
                t.isWanBa ? t._server = t.wb_server : t._server = t.wyw_server;
                break;
            case E_PF_CONFIG_TYPE.QQ_BROWNSER:
                t._server = t.wyw_server, t._pfname = "qqbrowser";
                break;
            case E_PF_CONFIG_TYPE.MI:
                var e = window.httpServer ? window.httpServer : "https://hjcsv2-ground.shangshi666.com/";
                e = e.substr(0, e.length - 1), t._server = e, t._pfname = window.pfName
        }
    }, Object.defineProperty(t, "isWanBa", {
        get: function () {
            var t = GameGlobal.loginArg.serverName;
            return t && t.indexOf("体验") >= 0
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "pfname", {
        get: function () {
            return t._pfname
        },
        enumerable: !0,
        configurable: !0
    }), t
}();
__reflect(AppConfig.prototype, "AppConfig");
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FriendGiftItemSkin", t
        }
        return __extends(i, e), i.prototype.childrenCreated = function () {
            e.prototype.childrenCreated.call(this), this.btnBox.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), DisplayUtil.popBtnStyle(this.btnBox), this.time = 0
        }, i.prototype.dataChanged = function () {
            var e = this.data,
                i = e.state;
            switch (this.lb_point.text = e.point + "回归点", i) {
                case t.AwardState.CAN_NOT_GET:
                    this.lb_des.text = "未达成", this.btnBox.source = "friendBack_json.26_closedBox", this.img_red.visible = !1;
                    break;
                case t.AwardState.CAN_GET:
                    this.lb_des.text = "领取仙友回礼", this.btnBox.source = "friendBack_json.26_closedBox", this.img_red.visible = !0;
                    break;
                case t.AwardState.IS_GET:
                    this.lb_des.text = "已领取", this.btnBox.source = "friendBack_json.26_openedBox", this.img_red.visible = !1
            }
        }, i.prototype.onTouch = function () {
            if (!(egret.getTimer() - this.time < 1e3)) {
                this.time = egret.getTimer();
                var e = this.data,
                    i = e.state;
                switch (i) {
                    case t.AwardState.CAN_NOT_GET:
                        GameCtrlBase.instance.openView(t.FriendWatchGiftView, e);
                        break;
                    case t.AwardState.CAN_GET:
                        GameCtrlBase.instance.getProxy(t.Proxy).openBox(e.id);
                        break;
                    case t.AwardState.IS_GET:
                        ViewText.text("已领取过!")
                }
            }
        }, i
    }(eui.ItemRenderer);
    t.FriendGiftItem = e, __reflect(e.prototype, "FriendBack.FriendGiftItem")
}(FriendBack || (FriendBack = {}));
var GiftItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "resource/eui_skins/game/fuLiDaTing/levelGift/LevelGiftPage.exml", e
    }
    return __extends(e, t), e.prototype.partAdded = function (e, i) {
        t.prototype.partAdded.call(this, e, i)
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        var e = this;
        e.btGetAwardsExml.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onTouchHandler, e)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.v
        },
        set: function (t) {
            if (t) {
                this.v = t;
                var e = t.level;
                this.lbTitleExml.text = e + "级礼包", ConfigHelp.makeStrGrids(t.awards, this.gridArr, 0, 0, this.gpAwardsExml), this.lbLevelTopExml.visible = !1, this.lbHeroLvExml.visible = !1, this.imgIsGetedExml.visible = !1, this.btGetAwardsExml.visible = !1, this.btGetAwardsExml.enabled = !0;
                var i = t.isGet,
                    o = GameGlobal.modelRole.voMine.level;
                i ? this.imgIsGetedExml.visible = !0 : !i && e > o ? (this.lbLevelTopExml.visible = !0, this.lbHeroLvExml.visible = !0, this.btGetAwardsExml.visible = !0, this.btGetAwardsExml.enabled = !1, this.lbHeroLvExml.text = o + "级", this.lbLevelTopExml.text = "/" + e + "级") : !i && o >= e && (this.btGetAwardsExml.visible = !0)
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onTouchHandler = function () {
        var t = this.v,
            e = t.id;
        GameGlobal.modelLevelGift.CG1373(e)
    }, e
}(eui.ItemRenderer);
__reflect(GiftItem.prototype, "GiftItem");
var VLevelGiftMain = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/fuLiDaTing/levelGift/LevelGiftMain.exml", e
    }
    return __extends(e, t), e.prototype.guideGetAwd = function () {
        for (var t = Vo_LevelGiftPage.awardList, e = 0, i = t.length; i > e; e++) {
            var o = t[e];
            if (GameGlobal.modelRole.voMine.level >= o.level && !o.isGet) {
                var n = this.list.getVirtualElementAt(e);
                if (n) {
                    QuestGuideArrow.getIns().guideTo(n, n.btGetAwardsExml.x + 40, n.btGetAwardsExml.y + 20);
                    break
                }
            }
        }
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.txtDes1.textFlow = HtmlUtil.parse(HtmlUtil.color("活动规则：", "#ffee5d") + HtmlUtil.color("角色等级达到指定条件即可领取等级礼包", "#f6eada")), e.txtDes2.visible = !1, e.txtDes3.text = "", e.grid.visible = e.btnget.visible = !1, this.cont3.visible = !1, this.bg2.source = "FLAtlas_json.levelBgTxt", e.scrAwardsExml.scrollPolicyH = eui.ScrollPolicy.OFF, DisplayUtil.popBtnStyle(e.btnget), Vo_LevelGiftPage.init(), this.list.itemRenderer = GiftItem, this.list.dataProvider = this.listDataAC = new eui.ArrayCollection
    }, e.prototype.onSend = function () {
        GameGlobal.modelLevelGift.CG1371(), GameGlobal.modelLevelGift.on(ModelGift.MSG_UPDATE_AWARDS, this.reflashAwardsList, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        this.onSend(), IconUtil.setIconSrc(this.bg, "FL_commonBg_png")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this);
        GameGlobal.modelLevelGift.off(ModelGift.MSG_UPDATE_AWARDS, this.reflashAwardsList), IconUtil.setIconSrc(this.bg)
    }, e.prototype.reflashAwardsList = function () {
        var t = Vo_LevelGiftPage.awardList;
        t.sort(this.sortList), DisplayUtil.fillDataAC(this.listDataAC, t)
    }, e.prototype.sortList = function (t, e) {
        return t.isGet == e.isGet ? t.id - e.id : 1 == t.isGet ? 1 : 1 == e.isGet ? -1 : void 0
    }, e
}(BaseEUIView);
__reflect(VLevelGiftMain.prototype, "VLevelGiftMain");
var VYueKa = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.setSkinName(), e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "VYueKaSkin"
    }, e.prototype.initData = function () {
        var t = [{
            type: 1,
            name: "元宝领不停",
            des: ["<font size='22' color='#684c43'>购买立即领取<</font><font size='24' color='#ea6401'> 400元宝</font>", "<font size='22' color='#684c43'>第二天起每天可领</font><font size='24' color='#ea6401'> 100元宝</font>", "<font size='24' color='#684c43'>总共领取</font><font size='30' color='#ea6401'> 3300元宝</font>"]
        }, {
            type: 2,
            name: "成长加速",
            des: ["<font size='22' color='#684c43'>挂机经验</font><font size='24' color='#ea6401'> +10%</font>", "<font size='22' color='#684c43'>挂机银两</font><font size='24' color='#ea6401'> +10%</font>"]
        }, {
            type: 3,
            name: "背包扩容",
            des: ["<font size='22' color='#684c43'>背包容量</font><font size='24' color='#ea6401'> +100</font>", "<font size='22' color='#684c43'>离线挂机不用愁</font>"]
        }];
        this.container.itemRenderer = ItemYueka, this.container.dataProvider = this.sourceData, this.sourceData.source = t
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.initData(), this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBuy, this), this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGet, this), this.btnXufei.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onXufei, this), this.btnBuy.label = "购买", this.btnGet.label = "领取", this.btnXufei.label = "续费"
    }, e.prototype.onBuy = function () {
        MyPlatform.getIns().isAndroid() ? platform.recharge(34640) : platform.recharge(34641)
    }, e.prototype.onGet = function () {
        0 != this.btnGet.enabled && GameGlobal.modelyuekazhouka.CG1925(1)
    }, e.prototype.onXufei = function () {
        this.onBuy()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelyuekazhouka.on(ModelYueKaZhouka.msg_monthWeedka, this.onUpdate, this), this.onUpdate()
    }, e.prototype.onUpdate = function () {
        this.updateState()
    }, e.prototype.updateState = function () {
        var t = VoMonthWeekKa.getInst(),
            e = t.monthState,
            i = t.monthGetState,
            o = t.monthLeftDay;
        if (this.txtLeft.size = 24, this.txtLeft.textColor = 6835267, this.txtLeft.textFlow = HtmlUtil.parse("剩余" + HtmlUtil.color(o, "#ff0000") + "天"), 1 == e) switch (this.btnBuy.visible = !1, this.btnXufei.visible = !0, this.btnGet.visible = !0, this.txtLeft.visible = !0, i) {
            case 0:
                this.btnGet.enabled = !1, this.btnGet.label = "不可领取", this.btnGet.setNoticeVis(!1);
                break;
            case 1:
                this.btnGet.enabled = !0, this.btnGet.label = "领取", this.btnGet.setNoticeVis(!0);
                break;
            case 2:
                this.btnGet.enabled = !1, this.btnGet.label = "已领取", this.btnGet.setNoticeVis(!1)
        } else this.btnBuy.visible = !0, this.btnGet.visible = !1, this.btnXufei.visible = !1, this.txtLeft.visible = !1
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelyuekazhouka.off(ModelYueKaZhouka.msg_monthWeedka, this.onUpdate, this)
    }, e
}(BaseEUIView);
__reflect(VYueKa.prototype, "VYueKa");
var BarView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "BarSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {}, Object.defineProperty(e.prototype, "curValue", {
        get: function () {
            return this._curValue
        },
        set: function (t) {
            this._curValue = t, this.update()
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "totalValue", {
        get: function () {
            return this._totalValue
        },
        set: function (t) {
            this._totalValue = t, this.update()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.update = function () {
        this.text.text = this._curValue + "/" + this._totalValue, this.bar.width = this._curValue / this._totalValue * (this.width - 4)
    }, e.prototype.setTextSize = function (t) {
        this.text.size = t
    }, e.prototype.setPercent = function (t) {
        this.text.text = t + "%", this.bar.width = t / 100 * (this.width - 4)
    }, e.prototype.setText = function (t) {
        this.text.text = t
    }, e.prototype.setTextStroke = function (t, e) {
        this.text.strokeColor = t, this.text.stroke = e
    }, e
}(eui.Component);
__reflect(BarView.prototype, "BarView");
var E_PF_CONFIG_TYPE;
! function (t) {
    t[t.undefined = -1] = "undefined", t[t.LOCAL = 0] = "LOCAL", t[t.SHANG_SHI = 1] = "SHANG_SHI", t[t.WE_CHAT = 2] = "WE_CHAT", t[t.WAN_BA = 3] = "WAN_BA", t[t.WAN_WAN = 4] = "WAN_WAN", t[t.MI = 13] = "MI", t[t.QQ_BROWNSER = 15] = "QQ_BROWNSER"
}(E_PF_CONFIG_TYPE || (E_PF_CONFIG_TYPE = {}));
var E_SQ_CHANNEL;
! function (t) {
    t.undefined = "", t.SQ = "SQ", t.QQRead = "QQRead", t.liMiXiu = "liMiXiu", t.QQEGame = "QQEGame", t.QQDongMan = "QQDongMan", t.QZ = "QZ", t.QQLive = "QQLive", t.tencentReading = "tencentReading", t.tencentNews = "tencentNews", t.TencentNews = "TencentNews", t.xinYueClub = "xinYueClub", t.WX = "WX", t.gameApp = "gameApp", t.pet = "pet", t.campusApp = "campusApp", t.loveZone = "loveZone", t.show = "show", t.pkGame = "pkGame", t.touch = "touch", t.guangDianTong = "guangDianTong", t.wxApp = "wxApp"
}(E_SQ_CHANNEL || (E_SQ_CHANNEL = {}));
var ChatWinCmp = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.totalHei = 0, e.channel = EChatChannel.undefined, e.skinName = "ChatWinSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), DisplayUtil.popBtnStyle(this.btnSent)
    }, Object.defineProperty(e.prototype, "isCanChat", {
        set: function (t) {
            this.grpMsg.visible = t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "promtMsg", {
        set: function (t) {
            this.lbInput.prompt = t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "inputText", {
        set: function (t) {
            this.lbInput.text = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.rev = function (t) {
        var e = t.chanl;
        if ((e == this.channel || this.channel == EChatChannel.GENERAL) && (this.channel != EChatChannel.GENERAL || e != EChatChannel.CROSS && e != EChatChannel.CAMP_WAR)) {
            if (this.chatGroup.numChildren >= 20) {
                var i = this.chatGroup.removeChildAt(0);
                i.dispose()
            }
            var o = ChatItem.create();
            o.setData(t), this.chatGroup.addChild(o), this.repos()
        }
    }, e.prototype.repos = function () {
        for (var t = 8, e = 0, i = 0, o = this.chatGroup.numChildren; o > i; i++) {
            var n = this.chatGroup.$children[i];
            n.y = e, i > 0 ? n.y = e + t : n.y = e, e = n.$getY() + n.$getHeight()
        }
        this.totalHei = e, this.toBottom()
    }, e.prototype.toBottom = function () {
        var t = this.height - this.grpMsg.height - 10;
        this.chatScroller.viewport.scrollV = this.totalHei <= t ? 0 : this.totalHei - t
    }, e.prototype.showCont = function (t) {
        this.curChannel(t), this.clean();
        var e = GameGlobal.modelChat.chatInfosMap[t];
        if (e) {
            for (var i = 0, o = e.length; o > i; i++) {
                var n = e[i],
                    a = ChatItem.create();
                a.setData(n), this.chatGroup.addChild(a)
            }
            this.repos(), this.toBottom()
        }
    }, e.prototype.clean = function () {
        for (var t = this.chatGroup.numChildren, e = 0; t > e; e++) {
            var i = this.chatGroup.getChildAt(e);
            i.dispose()
        }
        this.chatGroup.removeChildren()
    }, e.prototype.onIn = function () {}, e.prototype.onOut = function (t) {
        var e = this,
            i = this.lbInput.text;
        "" == i && (this.lbInput.text = ""), document.addEventListener("keydown", function (t) {
            13 == t.keyCode && e.onSend()
        })
    }, e.prototype.onSend = function () {
        GameGlobal.modelChat.notify(Model_Chat.MSG_SENDCHAT);
        var t = this.lbInput.text;
        if (0 == t.indexOf(" ")) {
            if (" sbgm" == t) return void GameGlobal.modelSetting.setGMVis(!0);
            if (" lajigm" == t) return void GameGlobal.modelSetting.setGMVis(!1)
        }
        if (this.channel == Model_Chat.TYPE_PARTY && 0 == GameGlobal.modelRole.voMine.menpaiId) return void ViewText.text("请加入门派");
        if (t = t.replace(/(^\s*)|(\s*$)/g, ""), t.length <= 0) this.lbInput.text = "";
        else {
            var e = this.channel;
            e = e == EChatChannel.GENERAL ? EChatChannel.WORD : e, this.sendText(e, t)
        }
    }, e.prototype.sendText = function (t, e) {
        var i = Model_Chat.utf16ToEntities(e);
        GameGlobal.modelChat.CG451(t, i), this.lbInput.text = ""
    }, e.prototype.curChannel = function (t) {
        this.channel != t && (e.joinCh(t), this.channel = t)
    }, e.joinCh = function (t) {
        -1 == e.allChennel.indexOf(t) && (e.allChennel.push(t), GameGlobal.modelChat.joinChannel(t), egret.log("加入聊天频道：" + t))
    }, e.exitCh = function (t) {
        var i = e.allChennel.indexOf(t); - 1 != i && e.allChennel.splice(i, 1), GameGlobal.modelChat.quitChannel(t)
    }, e.prototype.active = function () {
        this.addEvent()
    }, e.prototype.deactive = function () {
        this.removeEvent()
    }, e.prototype.quitChannel = function () {
        this.channel != EChatChannel.undefined && (e.exitCh(this.channel), this.channel = EChatChannel.undefined)
    }, e.prototype.quickAllChanel = function () {
        for (var t = e.allChennel.length; t--;) {
            var i = e.allChennel.pop();
            GameGlobal.modelChat.quitChannel(i)
        }
        this.channel = EChatChannel.undefined
    }, e.prototype.addEvent = function () {
        GameGlobal.modelChat.on(Model_Chat.GC452, this.rev, this), this.lbInput.addEventListener(egret.FocusEvent.FOCUS_IN, this.onIn, this), this.lbInput.addEventListener(egret.FocusEvent.FOCUS_OUT, this.onOut, this), this.btnSent.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSend, this), EventCenter.addMsg(ChatEvent.QUIT_ALL_CHENNEL, this.quickAllChanel, this)
    }, e.prototype.removeEvent = function () {
        GameGlobal.modelChat.off(Model_Chat.GC452, this.rev, this), this.lbInput.removeEventListener(egret.FocusEvent.FOCUS_IN, this.onIn, this), this.lbInput.removeEventListener(egret.FocusEvent.FOCUS_OUT, this.onOut, this), this.btnSent.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSend, this), EventCenter.removeMsg(ChatEvent.QUIT_ALL_CHENNEL, this.quickAllChanel, this)
    }, e.allChennel = [], e
}(eui.Component);
__reflect(ChatWinCmp.prototype, "ChatWinCmp");
var Parts = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.list = [], e.dic = {}, e.len = 0, e._needSort = !1, e.ptype = 0, e._perc = 0, e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "perc", {
        get: function () {
            return this._perc
        },
        set: function (t) {
            this._perc = t;
            var i = this.list,
                o = i.length;
            this.ptype == e.DIS_REAPEAT && t >= 1 && (t -= t >> 0);
            for (var n = 0; o > n; n++) {
                var a = i[n];
                a.setPec(t)
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.addPart = function (t) {
        t.parts != this && (t.parts = this, this.list.push(t), this._needSort = !0, this.len++, this.dic[t.type] = t, this.$doAddChild(t, this.numChildren, !1))
    }, e.prototype.removePart = function (t) {
        var e = this.list.indexOf(t);
        if (-1 != e) {
            this.list.splice(e, 1), delete this.dic[t.type];
            var i = this.$children.indexOf(t);
            this.$doRemoveChild(i, !1), t.dispose()
        }
    }, e.prototype.removePartByType = function (t) {
        var e = this.dic[t];
        e && this.removePart(e)
    }, e.prototype.setPart = function (t, e) {
        var i = this.dic[t];
        i && i.setVal(e)
    }, e.prototype.sort = function () {
        var t = this.$children;
        t.sort(this.dSortFunc)
    }, e.prototype.dSortFunc = function (t, e) {
        if (!t.buildmc) return -1;
        if (!e.buildmc) return 1;
        var i = t.dep - e.dep;
        return i
    }, e.prototype.setVal = function (t) {
        for (var e = this.list, i = e.length - 1; i >= 0; i--) {
            var o = e[i];
            o.setAct(t)
        }
    }, e.prototype.dispose = function () {
        for (var t = this, e = t.list.length - 1; e >= 0; e--) {
            var i = t.list[e];
            i.dispose(), t.$doRemoveChild(e, !1)
        }
        t.list.length = 0;
        for (var o in t.dic) delete t.dic[o];
        t.$setScaleX(1), t.$setScaleY(1), t.$setAlpha(1), t.$setVisible(!0)
    }, e.P_SHADOW = 0, e.P_HORSEDOWN = 5, e.P_BODY = 10, e.P_WEAPON = 50, e.P_WING = 30, e.P_WINGDOWN = 7, e.P_HORSEFRONT = 40, e.P_TITLE = 100, e.DIS_REAPEAT = 0, e.DIS_ONCE = 1, e
}(egret.Sprite);
__reflect(Parts.prototype, "Parts");
var UIAndProxyBaseCtr = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.configSelf = function () {
        t.prototype.configSelf.call(this)
    }, e.prototype.initialize = function () {
        this.registProxys(), this.registUI()
    }, e
}(GameCtrlBase);
__reflect(UIAndProxyBaseCtr.prototype, "UIAndProxyBaseCtr");
var Part = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.dep = 0, e.act = 0, e._curFrm = 0, e._perc = 0, e
    }
    return __extends(e, t), e.prototype.completeHand = function (t) {
        return this._compHand = t, this
    }, e.create = function () {
        var t = e.POOL.length ? e.POOL.pop() : new e;
        return t.isDispose = null, t
    }, e.prototype.setVal = function (t) {
        if (t != this.val) {
            if (this.movieClipData = null, this.texture = null, this.res) {
                var e = this.res.useParts.indexOf(this);
                this.res.useParts[e] = null, GameGlobal.resMgr.reduceRes(this.val)
            }
            this.val = t, t ? (this.res = GameGlobal.resMgr.refRes(t), ArrayUtil.insertAtNull(this.res.useParts, this), this.buildmc()) : (this.res = null, this.texture = null)
        }
    }, e.prototype.setAct = function (t) {
        this.act != t && (this.act = t, this.buildmc())
    }, e.prototype.setPec = function (t) {
        var e = this;
        if (e._perc = t, e.movieClipData) {
            var i = e.movieClipData,
                o = i.numFrames,
                n = t * o >> 0;
            if (n >= o && (n = o - 1), e._curFrm != n) {
                var a = i.frames[n];
                if (e._curFrm = n, a) {
                    if (i.spriteSheet) {
                        var s = i.spriteSheet._textureMap[a.res];
                        if (!s) {
                            var r = i.textureData[a.res];
                            if (!r) return void console.error("errorRes:" + e.res.val);
                            s = i.spriteSheet.createTexture(a.res, r.x, r.y, r.w, r.h)
                        }
                        e.texture = s
                    }
                    e.$setAnchorOffsetX(-a.x), e.$setAnchorOffsetY(-a.y), a.scale && (e.$setScaleX(a.scale), e.$setScaleY(a.scale))
                } else e.$setAnchorOffsetX(0), e.$setAnchorOffsetY(0), e.texture = null
            }
        }
    }, e.prototype.buildmc = function () {
        this.res && this.res.factory && (this.movieClipData = this.res.factory.generateMovieClipData(this.act), this._curFrm = -1, this.setPec(this._perc))
    }, e.prototype.dispose = function () {
        var t = this;
        t.isDispose || (t._compHand && (t._compHand.recover(), t._compHand = null), t.isDispose = !0, t.removeBreak = null, t.parts = null, t.$setRotation(0), t.$setScaleX(1), t.$setScaleY(1), t.$setX(0), t.$setY(0), t.$setAlpha(1), t._curFrm = -1, t.movieClipData = null, t.act = 0, t.setVal(null), t.texture = null, t.dep = 0, this._perc = 0, e.POOL.push(t))
    }, e.POOL = [], e
}(egret.Bitmap);
__reflect(Part.prototype, "Part");
var VoPeiYang = function () {
    function t() {
        this.skinMap = new CommondMap, this.highestJie = 1, this.curExp = 0, this.zhanli = 0, this.attMap = {}, this.jinJieAttMap = {}, this.isJsNextJieSkill = !0, this.nextJieSkill = 1
    }
    return t.prototype.initSkins = function (t) {
        for (var e in t) {
            var i = t[e],
                o = new VoPeiYangSkin;
            o.cfg = i, o.isJH = !1, o.isHH = !1, this.skinMap.add(o, e)
        }
    }, t.prototype.initAttMap = function () {
        for (var t in this.lib) {
            var e = this.lib[t],
                i = e.js,
                o = e.jy,
                n = this.attMap[i];
            n || (n = this.attMap[i] = {}), PeiYangAttObject.initMapAtt(e.sx, n, o), n = this.jinJieAttMap[i], n || (n = this.jinJieAttMap[i] = {}), PeiYangAttObject.initJinJieMapAtt(e.jjsx, n)
        }
    }, t.prototype.setAttValue = function (t) {
        var e = this.curExp,
            i = this.getCfgById(this.highestJie).jy,
            o = e / i,
            n = this.attMap[this.highestJie],
            a = n[t],
            s = a * o >> 0;
        return s = this.addJinJieAtt(s, t, this.highestJie), this.highestJie > 1 ? this.getAttByJie(s, this.highestJie - 1, t) : s
    }, t.prototype.getAttByJie = function (t, e, i) {
        return 1 == e ? t += this.attMap[e][i] : this.getAttByJie(t + this.attMap[e][i], e - 1, i)
    }, t.prototype.addJinJieAtt = function (t, e, i) {
        return 1 == i ? t + 0 : this.addJinJieAtt(t + this.jinJieAttMap[i][e], e, i - 1)
    }, t.prototype.updateJHSkin = function (t) {
        var e = this.skinMap.getByKey(t);
        e && (e.isJH = !0)
    }, t.prototype.getChuShiAtt = function (t) {
        for (var e = CFG_PeiYang.LIB_SKINJIHUOLIB, i = Util.strToIntArr(e[this.getType() + 1].sx), o = 0; o < i.length; o++) {
            var n = i[o][0],
                a = i[o][1];
            if (n == t) return a
        }
        return 0
    }, t.prototype.isManji = function () {
        var t = this.getMaxId(),
            e = this.highestJie;
        return t == e && this.curExp >= this.lib[e].jy ? !0 : !1
    }, t.prototype.getJiHuoSkins = function () {
        for (var t = 0, e = 0, i = this.skinMap.getLength(); i > e; e++) {
            var o = this.skinMap.getByIndex(e);
            o.isJH && t++
        }
        return t
    }, t.prototype.getAllSkinAtt = function (t) {
        for (var e = 0, i = 0, o = this.skinMap.getLength(); o > i; i++) {
            var n = this.skinMap.getByIndex(i);
            n.isJH && (e += n.getJhAttribute(t))
        }
        return e
    }, t.prototype.getMaxId = function () {
        if (this.maxId > 0) return this.maxId;
        var t = 0;
        for (var e in this.lib) t++;
        return this.maxId = t
    }, t.prototype.getCfgById = function (t) {
        return this.lib[t]
    }, t.prototype.getSkinNotice = function () {
        var t = this.hasEnoughLevel();
        if (!t) return !1;
        for (var e = 0, i = this.skinMap.getLength(); i > e; e++) {
            var o = this.skinMap.getByIndex(e);
            if (o.canBeJiHuo()) return !0
        }
        return !1
    }, t.prototype.getCost = function () {
        if (this.highestJie > 0) {
            var t = this.getCfgById(this.highestJie),
                e = ConfigHelp.makeVoList(t.xiaohao);
            return e
        }
        return null
    }, t.prototype.getPeiYangNotice = function () {
        for (var t = this.getCost(), e = null != t && this.hasEnoughLevel(), i = 0; t && i < t.length; i++) {
            var o = t[i],
                n = 0;
            switch (o.type) {
                case 1:
                    n = GameGlobal.modelBag.getItemCount(o.id);
                    break;
                case 31:
                    n = GameGlobal.modelRole.voMine.yinliang;
                    break;
                case 33:
                    n = GameGlobal.modelRole.voMine.yuanbao
            }
            var a = n >= o.count;
            e = e && a
        }
        return e && !this.isManji()
    }, t.prototype.hasEnoughLevel = function () {
        var t = 0;
        switch (this.getType()) {
            case 0:
                t = CFG_COMMOND.getOpenLevel(CFG_COMMOND.HORSE);
                break;
            case 1:
                t = CFG_COMMOND.getOpenLevel(CFG_COMMOND.WING);
                break;
            case 2:
                t = CFG_COMMOND.getOpenLevel(CFG_COMMOND.SHENBING);
                break;
            case 3:
                t = CFG_COMMOND.getOpenLevel(CFG_COMMOND.HALO)
        }
        return GameGlobal.modelRole.voMine.level >= t
    }, t.prototype.getJHZhanli = function (t) {
        var e = this.lib[t];
        return e ? e.zdl : 0
    }, t.getChiniseNum = function (t) {
        var e = t.toString(),
            i = e.length,
            o = parseInt(e.charAt(0)),
            n = this.nums[o];
        if (t % 10 == 0 && t > 0) return o = t / 10 >> 0, n = this.nums[o], o > 1 ? n + "十" : "十";
        if (i > 1) {
            var a = parseInt(e.charAt(1)),
                s = this.nums[a];
            return o > 1 ? n + "十" + s : "十" + s
        }
        return n
    }, t.nums = ["零", "一", "二", "三", "四", "五", "六", "七", "八", "九"], t
}();
__reflect(VoPeiYang.prototype, "VoPeiYang");
var PeiYangAttObject = function () {
    function t() {}
    return t.clone = function (t) {
        var e = {};
        for (var i in t) e[i] = t[i];
        return e
    }, t.initMapAtt = function (t, e, i) {
        for (var o = Util.strToIntArr(t), n = i / 10 >> 0, a = 0; a < o.length; a++) {
            var s = o[a],
                r = s[0],
                l = s[1],
                h = l * n / 100 >> 0;
            e[r] || (e[r] = h)
        }
    }, t.initJinJieMapAtt = function (t, e) {
        for (var i = Util.strToIntArr(t), o = i.length, n = 0; o > n; n++) {
            var a = i[n],
                s = a[0],
                r = a[1];
            e[s] = r
        }
    }, t.attObjs = {
        102: {
            id: 102,
            name: "气血",
            val: 0
        },
        103: {
            id: 103,
            name: "攻击",
            val: 0
        },
        105: {
            id: 105,
            name: "物防",
            val: 0
        },
        106: {
            id: 106,
            name: "法防",
            val: 0
        }
    }, t
}();
__reflect(PeiYangAttObject.prototype, "PeiYangAttObject");
var PeiYangCost = function () {
    function t() {}
    return t.getInst = function () {
        return t._inst || (t._inst = new t)
    }, t.prototype.setInfo = function (t, e, i) {
        return this.id = t, this.needCount = e, this.vopy = i, this
    }, t
}();
__reflect(PeiYangCost.prototype, "PeiYangCost");
var Role = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.saveToPool = !1, e.moveSpeed = 150, e.canMove = !0, e._body = null, e._weapon = null, e._horse = null, e._wing = null, e._halo = null, e._act = 0, e.invalid = 0, e.busyFlag = 0, e.hpmax = 20, e.mpmax = 20, e.actState = 0, e.specState = 0, e.lv = 1, e.att = 1, e.pdef = 0, e.mdef = 0, e.level = 1, e.view = new DepSprite, e.ai_attackFar = 100, e.ai_lockSysID = 0, e.ai_bornx = 0, e.ai_borny = 0, e.ai_attackSearchFar = 1e4, e.move_st = 0, e.xianJieLv = 0, e.job = 1, e.sex = 1, e.plugctx = {}, e.visInterv = 0, e.actInterv = 1e3, e.renderInt = 0, e._way = 4, e._curWayAct = 1, e.skillCDPlug = new RoleSkillCDPlug, e.isVis = !1, e.isView = !0, e.createParts(1), e
    }
    return __extends(e, t), e.create = function () {
        var t = this.P.length ? this.P.pop() : new e;
        return t
    }, e.prototype.createParts = function (t) {
        this.parts = new Parts, this.view.addChildAt(this.parts, 0), 1 & t && (this.shadow = new StaticPart, this.shadow.type = Parts.P_SHADOW, this.shadow.dep = Parts.P_SHADOW, this.parts.addPart(this.shadow), this.shadow.setVal("body/s/1"), this.shadow.setAct(4))
    }, e.prototype.setTitle = function (t) {
        this._title != t && (this._title = t, this.updateTitle())
    }, e.prototype.updateTitle = function () {
        this._title ? (this._titlePart || (this._titlePart = Part.create(), this._titlePart.y = -130), this._titlePart.setVal("title/" + this._title), this.view.addChild(this._titlePart)) : this._titlePart && (this._titlePart.dispose(), this._titlePart = null)
    }, e.prototype.setName = function (t) {
        this.name = t, t ? (this.nameBar || (this.nameBar = new NameBar, this.nameBar.setType(this.hpType), this.nameBar.y = 5, this.view.addChild(this.nameBar)), this.nameBar.$parent || this.view.addChild(this.nameBar), this.nameBar.setName(t)) : DisplayUtil.remove(this.nameBar)
    }, e.prototype.setXianJie = function (t) {
        this.xianJieLv = t, this.nameBar && this.nameBar.$parent && this.nameBar.setXianJie(t)
    }, e.prototype.onAddToStage = function (t) {}, e.prototype.onAdd = function () {
        this.invalid |= 1023, this.mapScene.map.fontLayer.depAddChild(this.view), this.checkVis(), this.checkAlpha()
    }, e.prototype.addEffPart = function (t, e) {
        var i;
        this.effParts || (this.effParts = new Parts);
        var o = this.effParts;
        if (!o.dic[t]) {
            var n = new Part;
            n.type = t, o.addPart(n), i = !0
        }
        return i
    }, e.prototype.removeEffPart = function (t) {
        var e = this.effParts;
        if (e && e[t]) {
            var i = e[t];
            e.removePart(i)
        }
    }, e.prototype.advanceTime = function (t) {
        var e = this,
            i = e.plugctx,
            o = !0;
        if (i.dt = t, e.handupbehive) {
            var n = e.handupbehive(e);
            n && (e.handupbehive = null)
        }
        e.visInterv += t, e.visInterv >= 200 && (e.visInterv = 0, e.checkVis());
        var a = e.plugs;
        if (a) {
            for (var s = a.length, r = s - 1; r >= 0; r--) {
                var l = a[r];
                if (l) i.d = 0, l.advanceTime(i), i.d && e.removePlug(l);
                else var h = !0
            }
            h && ArrayUtil.cleannull(e.plugs)
        }
        if (e.isVis) {
            var c = e.invalid;
            c && (256 & c && (this.specState ? this.updateFishAct() : e.updateAct()), 128 & c && e.updateWay(), 512 & c && e.updateDepth(), e.invalid = 0), e.renderInt += t, e.renderInt >= 50 && (e.parts.perc = e.renderInt / e.actInterv + e.parts._perc, e.renderInt = 0), (e.view.x != e.x || e.view.y != e.y) && (e.view.$setX(e.x), e.view.$setY(e.y))
        }
        return e.view.dep = e.y, e.ai_careid && e.isNearCare() && e.onNear(), o
    }, e.prototype.onEvent = function (t, e) {
        var i = this.plugs;
        if (i)
            for (var o = 0; o < i.length; o++) {
                var n = this.plugs[o];
                n && n.onEvent(t, e)
            }
    }, e.prototype.setWay = function (t) {
        this._way = t, this.invalid = 128 | this.invalid | 512
    }, e.prototype.addPlug = function (t) {
        this.plugs || (this.plugs = []), this.plugs.push(t), t.onAdd()
    }, e.prototype.removePlug = function (t) {
        if (this.plugs) {
            var e = this.plugs.indexOf(t);
            this.plugs[e] = null, t.onRemove(0)
        }
    }, e.prototype.removeAllPlug = function () {
        var t = this.plugs;
        if (t) {
            for (var e = t.length, i = 0; e > i; i++) {
                var o = t[i];
                o && t[i].onRemove(-1)
            }
            t.length = 0
        }
    }, e.prototype.getPlugByTag = function (t) {
        for (var e, i = this.plugs, o = i.length, n = 0; o > n; n++)
            if (i[n].tag == t) {
                e = i[n];
                break
            } return e
    }, e.prototype.setAction = function (t, e, i, o) {
        if (void 0 === e && (e = 1e3), void 0 === i && (i = !0), void 0 === o && (o = !1), this.actInterv = e, this.parts.ptype = i ? Parts.DIS_REAPEAT : Parts.DIS_ONCE, o && (this.parts.perc = 0), this._act != t) {
            this._act = t;
            this.invalid = 256 | this.invalid
        }
    }, e.prototype.setSpecState = function (t) {
        this.specState != t && (this.specState = t, this.invalid |= 384)
    }, e.prototype.updateFishWay = function () {
        var t = this._way;
        if (0 == this.move_st) t = t > -.785 && 2.355 > t ? 3 : 1, this.parts.setVal(t), this._curWayAct = t, this.parts.$setScaleX(1 * this.scale);
        else {
            var e = 0;
            t > -1.57 && 0 >= t ? (t = 1, e = -1) : t > 0 && 1.57 >= t ? (t = 3, e = 1) : t > 1.57 ? (t = 3, e = -1) : (t = 1, e = 1), this.parts.setVal(t), this._curWayAct = t, this.parts.$setScaleX(e * this.scale)
        }
    }, e.prototype.updateWay = function () {
        if (1 == this.specState) return void this.updateFishWay();
        var t = this._way,
            e = 0;
        t > -1.57 && 0 >= t ? (t = 1, e = -1) : t > 0 && 1.57 >= t ? (t = 3, e = 1) : t > 1.57 ? (t = 3, e = -1) : (t = 1, e = 1), this.parts.setVal(t), this._curWayAct = t, this.parts.$setScaleX(e * this.scale)
    }, e.prototype.updateFishAct = function () {
        var t = "body/fish" + this.sex + "/";
        this.move_st ? this.parts.setPart(Parts.P_BODY, t + "run") : 1 == this.specState ? this.parts.setPart(Parts.P_BODY, t + "attack") : this.parts.setPart(Parts.P_BODY, t + "idle"), this.parts.setPart(Parts.P_WEAPON, null), this.parts.setPart(Parts.P_WING, null), this.parts.setPart(Parts.P_HORSEFRONT, null), this.parts.setPart(Parts.P_HORSEDOWN, null)
    }, e.prototype.updateAct = function () {
        var t, e, i = this._act,
            o = this.parts,
            n = this._horse;
        1 == this.move_st ? (t = "run", this.actInterv = 700, o.ptype = Parts.DIS_REAPEAT) : 1 == this._act ? t = "run" : 0 == i ? (t = "idle", o.ptype = Parts.DIS_REAPEAT) : t = i > 10 && 20 > i ? "attack" + i % 10 : "skill", e = t, n && (e = "z_" + t);
        var a = "body/" + this._body + "/" + e;
        o.setPart(Parts.P_BODY, a);
        var s = "weapon/" + this._weapon + "/" + e;
        o.setPart(Parts.P_WEAPON, s), this.setHalo(this._halo);
        var r = o.dic[Parts.P_HORSEDOWN];
        if (r) {
            var l = o.dic[Parts.P_HORSEFRONT];
            r.setVal("horse/" + this._horse + "/" + t), CFG_MOD.LIBNOHEAD[this._horse] ? l.setVal(null) : l.setVal("horse/" + this._horse + "h/" + t)
        }
        var h = o.dic[Parts.P_WING];
        h && h.setVal("wing/" + this._wing + "/" + e)
    }, e.prototype.updateDepth = function () {
        var t = (this._way, this._act, this.parts.dic[Parts.P_WEAPON]);
        t && (t.dep = Parts.P_WEAPON);
        var e = this.parts.dic[Parts.P_WING];
        e && (1 == this._curWayAct ? e.dep = Parts.P_WING : e.dep = Parts.P_WINGDOWN), this.parts.sort()
    }, e.prototype.setBody = function (t) {
        this._body != t && (this._body = t, t && this.addPart(Parts.P_BODY, Parts.P_BODY), this.invalid = 256 | this.invalid | 512)
    }, e.prototype.setHorse = function (t) {
        this._horse = t, t ? (this.addPart(Parts.P_HORSEDOWN, Parts.P_HORSEDOWN), this.addPart(Parts.P_HORSEFRONT, Parts.P_HORSEFRONT)) : (this.removePart(Parts.P_HORSEDOWN), this.removePart(Parts.P_HORSEFRONT)), this.invalid = 256 | this.invalid | 512
    }, e.prototype.setWeapon = function (t) {
        this._weapon = t, t ? this.addPart(Parts.P_WEAPON, Parts.P_WEAPON) : this.removePart(Parts.P_WEAPON), this.invalid = 256 | this.invalid | 512
    }, e.prototype.setWing = function (t) {
        this._wing = t, t ? this.addPart(Parts.P_WING, Parts.P_WING) : this.removePart(Parts.P_WING), this.invalid = 256 | this.invalid | 512
    }, e.prototype.setHalo = function (t) {
        this._halo = t, t ? (this.shadow.setVal("halo/" + t), this.shadow.setAct(1)) : (this.shadow.setVal("body/s/1"), this.shadow.setAct(4))
    }, e.prototype.addPart = function (t, e) {
        var i = this.parts.dic[t];
        return i || (i = Part.create(), i.type = t, i.dep = e, this.parts.addPart(i)), i
    }, e.prototype.removePart = function (t) {
        var e = this.parts.dic[t];
        e && this.parts.removePart(e)
    }, e.prototype.onRemove = function () {
        egret.Tween.removeTweens(this), this.specState = 0, this.view.alpha = 1, this.scale = 1, this._act = 0, this.invalid |= 1023, this.move_st = 0, this.mapScene.map.fontLayer.depRemoveChild(this.view), this.removeAllPlug(), this.mapScene = null, GameGlobal.msgCenter.notify(-1, this), this.moveComplteCb = null, this.moveCompleteThisObj = null, this.handupbehive = null, this.ai_distx = 0, this.ai_disty = 0, this.ai_moveTarget = null, this.deadFlag = 0, this.saveToPool && (e.P[e.P.length] = this, this.saveToPool = !1, this.setHalo(null), this.setBody(null), this.setWeapon(null), this.setHorse(null), this.setWing(null), this.va = this.vb = this.vc = null)
    }, e.prototype.moveComplete = function () {
        this.stand(), this.moveComplteCb && (this.moveComplteCb.apply(this.moveCompleteThisObj), this.moveComplteCb = null, this.moveCompleteThisObj = null)
    }, e.prototype.checkAlpha = function () {
        var t = this.mapScene.map.getNode(this.x, this.y);
        t && t.space && this.view.$setAlpha(t.alpha)
    }, e.prototype.stand = function () {
        1 == this.move_st && this.onEvent(e.UEVENT_ACCPATH, null), this.actInterv = 1e3, this.move_st = 0, this.invalid |= 256
    }, e.prototype.getSkillList = function () {
        var t = this.skillList;
        return t
    }, e.prototype.takeDmg = function (t) {
        var i = this,
            o = (t.value, i.mapScene.getUnitByID(t.sourceroleid)),
            n = i.hp > 0;
        if (o) {
            var a = new SceneHpDirMoveView;
            a.hurterid = i.ci, a.dmgValue = t.value, a.isCrit = t.isCrit, a.attackerid = t.sourceroleid, a.angle = Math.atan2(i.y - o.y, i.x - o.x), a.x = i.x, a.y = i.y, i.mapScene.addUnit(a)
        }
        var s = i.hp - t.value;
        0 > s && (s = 0), i.nameBar, i.hp = s, n && 0 >= s && (i.onEvent(e.UEVENT_DEAD, t), egret.Tween.get(i.view).to({
            alpha: .3
        }, 500).call(function () {
            i.mapScene && i.deadFlag++
        }), GameGlobal.msgCenter.notify(e.UEVENT_DEAD, this)), t.isCrit && i.mapScene.shake()
    }, e.prototype.moveTo = function (t, i, o, n) {
        if (void 0 === o && (o = null), void 0 === n && (n = null), this.moveComplteCb = o, this.moveCompleteThisObj = n, this.mapScene) {
            this.mapScene.map.searchPath(this.x, this.y, t, i);
            var a = this.mapScene.map.getLastPath();
            if (a) this.onEvent(e.UEVENT_ACCPATH, a);
            else {
                this.mapScene.map.getNode(this.x, this.y), this.mapScene.map.getNode(t, i);
                this.onEvent(e.UEVENT_ACCPATH, [i, t])
            }
        }
    }, e.prototype.directMoveTo = function (t, i) {
        var o = Util.getTempArr();
        o[0] = i, o[1] = t, this.onEvent(e.UEVENT_ACCPATH, o)
    }, e.prototype.onSkillEnd = function () {
        this.notify(e.MSG_SKILLEND, this)
    }, e.prototype.enterSkillCD = function () {
        this.skillCDPlug || (this.skillCDPlug = new RoleSkillCDPlug), this.skillCDPlug.isWorking ? this.skillCDPlug.reEnter() : (this.skillCDPlug.role = this, this.addPlug(this.skillCDPlug))
    }, e.prototype.interaction = function (t) {
        t.type == e.NPC ? t.interact(this) : t.type == e.COLLECTNPC && console.log(1)
    }, e.prototype.addMovePlug = function () {
        var t = GameObjectPathAccording.create();
        t.tar = this, this.addPlug(t)
    }, e.prototype.setBattleRemain = function (t) {
        return 0 >= t ? void(this._battleEff && (EffectMgr.getIns().removeEff(this._battleEff), this._battleEff = null)) : void(this._battleEff ? (this._battleEff.startTime = egret.getTimer(), this._battleEff.endTime = this._battleEff.startTime + t) : this._battleEff = EffectMgr.addEff("uieff/fighting", this.view, 0, -150, 1e3, t).completeHand(Handler.create(this, this.onBTLEffComp)))
    }, e.prototype.onBTLEffComp = function () {
        this._battleEff = null
    }, e.prototype.nearToNPCID = function (t) {
        var e = CFG_Quest.LIB_NPC[t];
        if (e && this.mapScene)
            if (this.mapScene._curSceneid == e.map) {
                var i = GameGlobal.mapScene.getUnitByID(t);
                i && this.nearTo(i)
            } else {
                var o = this.mapScene.getTP(e.map);
                o && this.nearTo(o)
            }
    }, e.prototype.nearTo = function (t) {
        this.ai_careid = t.id, this.isNearCare() ? this.onNear() : this.moveTo(t.x, t.y)
    }, e.prototype.isNearCare = function () {
        if (this.ai_careid) {
            var t = this.mapScene.getUnitByID(this.ai_careid);
            if (t) {
                var e = MoveUtil.dist(this.x, this.y, t.x, t.y);
                return e <= t.nearFar
            }
        }
        return !1
    }, e.prototype.onNear = function () {
        if (this.ai_careid) {
            this.stand();
            var t = this.mapScene.getUnitByID(this.ai_careid);
            t && (t.interact(this), this.ai_careid = 0)
        }
    }, e.prototype.checkVis = function () {
        var t = this.mapScene.map.scrollMap.focusx - this.x;
        if (350 > t && t > -350) {
            var e = this.mapScene.map.scrollMap.focusy - this.y;
            600 > e && e > -600 ? this.visTrue() : this.visFalse()
        } else this.visFalse()
    }, e.prototype.visTrue = function () {
        this.isVis || (this.isVis = !0, this.view.$setVisible(!0), this.view.$setX(this.x), this.view.$setY(this.y))
    }, e.prototype.visFalse = function () {
        this.isVis && (this.isVis = !1, this.view.$setVisible(!1))
    }, e.P = [], e.NPC = 1, e.FIGHTNPC = 2, e.PLAYERROLE = 3, e.TP = 10, e.COLLECTNPC = 11, e.T = 100, e.T_ITEM = 101, e.UEVENT_ACCPATH = 1, e.UEVENT_TAKEDMG = 100, e.UEVENT_DEAD = 101, e.UEVENT_REMOVE = 102, e.MSG_SKILLEND = "se", e
}(SceneObject);
__reflect(Role.prototype, "Role");
var Vo_shuang11sign = function () {
    function t() {
        this.issign = !1
    }
    return t.create = function () {
        this.List = [], this.Map = {};
        var e = CFG_TeachersDay.LIB5;
        for (var i in e) {
            var o = e[i],
                n = new t;
            n.id = o.id, n.cfg = o, this.List.push(n), this.Map[n.id] = n
        }
    }, t
}();
__reflect(Vo_shuang11sign.prototype, "Vo_shuang11sign");
var VShuang11_sign = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Shuang11_signSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.base.visible = !1, this.btnClose.visible = !1, DisplayUtil.popBtnStyle(this.btnAdd), DisplayUtil.popBtnStyle(this.btn), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.addT, this), this.btn.label = "前往挑战"
    }, e.prototype.addT = function () {
        var t = CFG_Param.LIB[39].key.split(",")[2],
            e = GameGlobal.modelRole.voMine.yuanbao,
            i = "是否花费" + HtmlUtil.color(t + "元宝", "#d83503") + "购买一次挑战次数？\n剩余可购买次数：" + HtmlUtil.color(Vo_shuang11sign.syBuyNum, "#d83503");
        Vo_shuang11sign.syBuyNum > 0 ? e >= t ? ViewAlert.show(i, function () {
            GameGlobal.modelShuang11.CG4459()
        }) : ViewAlert.show("元宝不足，是否前往充值?", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        }) : ViewText.text("已无购买次数！")
    }, e.prototype.onT = function () {
        ModelBattle.canEnterBtl() && GameGlobal.modelShuang11.CG4457()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), Vo_shuang11sign.create(), IconUtil.setIconSrc(this.bg, "weekender_json.titlebg"), this.upCollItems(), GameGlobal.modelShuang11.on(ModelShuang11.MSG_UPDATE, this.upSignItems, this), GameGlobal.modelShuang11.CG4451()
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.bg), GameGlobal.modelShuang11.off(ModelShuang11.MSG_UPDATE, this.upSignItems, this)
    }, e.prototype.upCollItems = function () {
        for (var t = CFG_Shuang11XFPH.LIB_MRCG[GameGlobal.modelRole.voMine.level].jl2, e = ConfigHelp.makeVoList(t), i = 0; i < e.length; i++) {
            var o = e[i],
                n = this["coll" + i];
            n.data = o, n.bg.source = "", n.enableTip()
        }
    }, e.prototype.upSignItems = function () {
        this.signItems || (this.signItems = []);
        var t = Vo_shuang11sign.List;
        if (t) {
            if (3 == t.length)
                for (var e = 0; e < t.length; e++) {
                    var i = t[e],
                        o = this.signItems[e];
                    o || (o = new VShuang11_signItem, o.scaleX = o.scaleY = 1.5, o.x = 1.6 * o.width * e, o.y = 30, this.signItems.push(o), DisplayUtil.addBy(o, this.signGrp)), o.data = i
                } else
                    for (var e = 0; e < t.length; e++) {
                        var i = t[e],
                            o = this.signItems[e];
                        o || (o = new VShuang11_signItem, 4 > e ? o.x = (o.width + 10) * e : (o.x = (4 * o.width + 30 - (3 * o.width + 20)) / 2 + (o.width + 10) * (e - 4), o.y = o.height + 10), this.signItems.push(o), DisplayUtil.addBy(o, this.signGrp)), o.data = i
                    }
            this.lbsy.textFlow = HtmlUtil.parse("剩余挑战次数:" + HtmlUtil.color(Vo_shuang11sign.synum, "#10a244"))
        }
    }, e
}(BaseEUIView);
__reflect(VShuang11_sign.prototype, "VShuang11_sign");
var VShuang11_signItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Tea_SignItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), DisplayUtil.popBtnStyle(this.btn), this.btn.label = "签到", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.imgsign.addEventListener(egret.TouchEvent.TOUCH_TAP, this.bqT, this), this.grid.enableTip()
    }, e.prototype.onT = function () {
        var t = this.vo,
            e = Vo_shuang11sign.nowDay;
        return t.id > e ? void ViewText.text("请在活动第" + t.id + "天再来签到！") : void GameGlobal.modelShuang11.CG4453(t.id)
    }, e.prototype.bqT = function () {
        var t = this.vo,
            e = Vo_shuang11sign.nowDay;
        if (!t.issign && t.id < e) {
            var i = CFG_Param.LIB[16].key,
                o = GameGlobal.modelRole.voMine.yuanbao;
            o >= i ? ViewAlert.show("是否花费" + HtmlUtil.color(i + "元宝", "#d83503") + "进行补签？", function () {
                GameGlobal.modelShuang11.CG4455(t.id)
            }) : ViewAlert.show("元宝不足，是否前往充值?", function () {
                GameGlobal.layerMgr.open(UIConst.RECHARGE)
            })
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t;
            var e = ConfigHelp.makeVoList(t.cfg.jl)[0];
            this.grid.isShowEff(!0), this.grid.data = e, this.grid.bg.source = "";
            var i = Vo_shuang11sign.nowDay;
            if (t.issign) {
                var o = "teachersDay2_json.sign";
                this.btn.visible = !1, this.imgsign.visible = !0
            } else t.id < i ? (this.btn.visible = !1, this.imgsign.visible = !0, o = "teachersDay2_json.btnbq") : (this.btn.visible = !0, this.imgsign.visible = !1);
            this.imgsign.source = o, this.lbday.text = "第" + t.id + "天"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VShuang11_signItem.prototype, "VShuang11_signItem");
var List = eui.List,
    Label = eui.Label,
    ArrayCollection = eui.ArrayCollection,
    ViewShangCheng = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.sourceData = new ArrayCollection, e.sourceCostLabs = new ArrayCollection, e.typeInfo = new ShangChengTypeInfo, e._page = -1, e.hasRegZTFSStoreMsg = !1, e.skinName = "ViewShangChengSkin", e
        }
        return __extends(e, t), e.prototype.initView = function () {
            t.prototype.initView.call(this), this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.base.createTabGroup(), this.base.listenTabClick(this.onSel, this), this.costLabels.itemRenderer = ItemHuoBiStore, this.costLabels.dataProvider = this.sourceCostLabs, this.costLabels.useVirtualLayout = !1, this.setProductSource()
        }, e.prototype.setProductSource = function () {
            this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemShangCheng, this.btnRefresh.label = "刷新", this.btnRefresh.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onRefresh, this)
        }, e.prototype.onRefresh = function () {
            GameGlobal.modelShangCheng.CG907()
        }, e.prototype.onSel = function (t) {
            this.setPage(t.index)
        }, e.prototype.addZTFSMsg = function () {
            this.hasRegZTFSStoreMsg = !0, GameGlobal.modelZTFS.on(ModelZhuTianFengShen.msg_store, this.updateDatas, this), GameGlobal.modelZTFS.CG3083(), GameGlobal.modelZTFS.CG3071()
        }, e.prototype.removeZTFSMsg = function () {
            this.hasRegZTFSStoreMsg = !1, GameGlobal.modelZTFS.off(ModelZhuTianFengShen.msg_store, this.updateDatas, this)
        }, e.prototype.addMsg = function () {
            GameGlobal.modelShangCheng.on(ModelShangCheng.msg_commond, this.updateDatas, this), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_zhenlongge, this.updateDatas, this), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_commond_buy, this.itemUpdate, this), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_zhenlongge_buy, this.itemUpdate, this), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_refrashTime, this.updateRefTime, this), GameGlobal.modelShangCheng.CG901(), GameGlobal.modelShangCheng.CG903()
        }, e.prototype.removeMsg = function () {
            GameGlobal.modelShangCheng.off(ModelShangCheng.msg_commond, this.updateDatas, this), GameGlobal.modelShangCheng.off(ModelShangCheng.msg_zhenlongge, this.updateDatas, this), GameGlobal.modelShangCheng.off(ModelShangCheng.msg_commond_buy, this.itemUpdate, this), GameGlobal.modelShangCheng.off(ModelShangCheng.msg_zhenlongge_buy, this.itemUpdate, this), GameGlobal.modelShangCheng.off(ModelShangCheng.msg_refrashTime, this.updateRefTime, this)
        }, e.prototype.setPage = function (t) {
            var e = this.base.getTabByIdx(t);
            this._page = t, this._page >= 0 && (this.typeInfo.isZTFSStore(this._page) ? this.addZTFSMsg() : (this.updateDatas(), this.hasRegZTFSStoreMsg && this.removeZTFSMsg()), this.base.setTabSelIdx(this._page)), e && (this.base.title = e.label)
        }, e.prototype.updateDatas = function () {
            this.sourceCostLabs.source = this.typeInfo.getCostLabels(this._page);
            var t = this.typeInfo.getDatas(this._page);
            t.sort(this.onSort), this.sourceData.source = t, this.updateZLGTabVis(), this.isZhenLongGe() ? (this.setState("st2"), this.updateRefTime()) : (this.setState("st1"), this.removeTick())
        }, e.prototype.onSort = function (t, e) {
            var i = t.cfg.px,
                o = e.cfg.px;
            return i - o
        }, e.prototype.isZhenLongGe = function () {
            return this.typeInfo.isZhenLongGe(this._page)
        }, e.prototype.updateZLGTabVis = function () {
            this.typeInfo.getType() == Enum_shangChengType.COMMOND && (0 == VoShangCheng.mapZLG.getLength() ? this.base.removeTabByID(3) : (this.base.addTab("珍珑阁", 2, 3), 0 == GameGlobal.modelShangCheng.refreshCount ? (this.base.setNoticByIndex(2, !0), this.btnRefresh.setNoticeVis(!0)) : (this.base.setNoticByIndex(2, !1), this.btnRefresh.setNoticeVis(!1)), 2 == this._page && (this.base.setTabSelIdx(this._page), this.base.title = "珍珑阁")))
        }, e.prototype.setState = function (t) {
            switch (t) {
                case "st1":
                    this.scroller.height = 659, this.iconCostLB.visible = !1, this.txtRefreshTime.visible = !1, this.btnRefresh.visible = !1, this.txtCostYB.visible = !1;
                    break;
                case "st2":
                    this.scroller.height = 550, this.iconCostLB.visible = !0, this.txtRefreshTime.visible = !0, this.btnRefresh.visible = !0, this.txtCostYB.visible = !0
            }
        }, e.prototype.itemUpdate = function (t) {
            this.sourceData.itemUpdated(t)
        }, e.prototype.updateRefTime = function () {
            var t = GameGlobal.modelShangCheng.refreshCount,
                e = t + 1,
                i = CFG_zlgexiaohao_168.LIB[e];
            if (i || (i = CFG_zlgexiaohao_168.LIB[t]), "0" == i.xh) this.txtCostYB.text = "x0";
            else {
                var o = ConfigHelp.makeVoList(i.xh)[0];
                GameGlobal.modelRole.voMine.yuanbao < o.count ? this.txtCostYB.textColor = 16646144 : this.txtCostYB.textColor = 1090116, this.txtCostYB.text = "x" + o.count
            }
            var n = GameGlobal.modelShangCheng.remainTime;
            n > 0 ? this.addTick() : this.removeTick()
        }, e.prototype.addTick = function () {
            this.txtRefreshTime.text = "商城刷新时间: " + DateUtil.getHMSBySecond2(GameGlobal.modelShangCheng.remainTime--), GameGlobal.tick.addInterv(this.onTick, 1e3, this)
        }, e.prototype.removeTick = function () {
            this.txtRefreshTime.text = "商城刷新时间: 00:00:00", GameGlobal.tick.removeInterv(this.onTick, this)
        }, e.prototype.onTick = function (t) {
            t.txtRefreshTime.text = "商城刷新时间: " + DateUtil.getHMSBySecond2(GameGlobal.modelShangCheng.remainTime--)
        }, e.prototype.dealWithArg = function (t) {
            var e = 0;
            if (t) {
                var i;
                if ("string" == typeof t) {
                    var o = t.split("_");
                    i = o[0], e = o[1] || 0
                } else i = t, e = 0;
                this.typeInfo.update(i)
            } else this.typeInfo.update(Enum_shangChengType.COMMOND);
            this.updateTabs(), this.setPage(parseInt(e.toString()))
        }, e.prototype.updateTabs = function () {
            var t = this.base;
            switch (t.clearTabs(), this.typeInfo.getType()) {
                case Enum_shangChengType.COMMOND:
                    t.addTab("元宝商城", 0, 1), t.addTab("绑元商城", 1, 2);
                    break;
                case Enum_shangChengType.ZHENXI:
                    t.addTab("侠义商城", 0, 1), t.addTab("友情商城", 1, 2), t.addTab("答题商城", 2, 3), CFG_COMMOND.isOpen(CFG_COMMOND.ZTFS, !1) && t.addTab("封神商城", 3, 4);
                case Enum_shangChengType.MENPAI:
                    t.addTab("门派商店", 0, 1), t.addTab("门派福利", 1, 2);
                    break;
                case Enum_shangChengType.SHARE:
                    t.addTab("分享商店", 0, 1);
                    break;
                case Enum_shangChengType.ZHENYING:
                    t.addTab("阵营商店", 0, 1)
            }
        }, e.prototype.onOpen = function (e) {
            t.prototype.onOpen.call(this, e), this.dealWithArg(e), this.addMsg()
        }, e.prototype.onClose = function () {
            t.prototype.onClose.call(this), this.typeInfo.isZTFSStore(this._page) && this.removeZTFSMsg(), this.setPage(-1), this.removeMsg()
        }, e.prototype.onSize = function () {
            t.prototype.customPanelResize.call(this)
        }, e
    }(BaseEUIView);
__reflect(ViewShangCheng.prototype, "ViewShangCheng");
var ShangChengTypeInfo = function () {
    function t() {}
    return t.prototype.update = function (t) {
        this._type = t
    }, t.prototype.getType = function () {
        return parseInt(this._type.toString())
    }, t.prototype.getDatas = function (t) {
        var e, i = this.getType(),
            o = parseInt(t.toString());
        switch (o) {
            case 0:
                i == Enum_shangChengType.COMMOND ? e = VoShangCheng.getDatasByType(1) : i == Enum_shangChengType.ZHENXI ? e = VoShangCheng.getDatasByType(3) : i == Enum_shangChengType.MENPAI ? e = VoMPShop.getDatasByType(1) : i == Enum_shangChengType.SHARE ? e = VoShangCheng.getDatasByType(8) : i == Enum_shangChengType.ZHENYING && (e = VoShangCheng.getDatasByType(9));
                break;
            case 1:
                i == Enum_shangChengType.COMMOND ? e = VoShangCheng.getDatasByType(2) : i == Enum_shangChengType.ZHENXI ? e = VoShangCheng.getDatasByType(4) : i == Enum_shangChengType.MENPAI && (e = VoMPShop.getDatasByType(2));
                break;
            case 2:
                i == Enum_shangChengType.COMMOND ? e = VoShangCheng.mapZLG.getList() : i == Enum_shangChengType.ZHENXI ? e = VoShangCheng.getDatasByType(5) : i == Enum_shangChengType.MENPAI && (e = VoMPShop.getDatasByType(2));
                break;
            case 3:
                i == Enum_shangChengType.COMMOND ? e = VoShangCheng.mapZLG.getList() : i == Enum_shangChengType.ZHENXI ? e = VoZTFSStore.getProducts() : i == Enum_shangChengType.MENPAI && (e = VoMPShop.getDatasByType(2))
        }
        return e
    }, t.prototype.getCostLabels = function (t) {
        var e = "",
            i = this.getType(),
            o = parseInt(t.toString());
        switch (o) {
            case 0:
                i == Enum_shangChengType.COMMOND ? e = "33,0,0" : i == Enum_shangChengType.ZHENXI ? e = "36,0,0" : i == Enum_shangChengType.MENPAI ? e = "38,0,0" : i == Enum_shangChengType.SHARE ? e = "1,1262,0" : i == Enum_shangChengType.ZHENYING && (e = "1,1089,0");
                break;
            case 1:
                i == Enum_shangChengType.COMMOND ? e = "32,0,0" : i == Enum_shangChengType.ZHENXI ? e = "1,1033,0" : i == Enum_shangChengType.MENPAI && (e = "38,0,0");
                break;
            case 2:
                i == Enum_shangChengType.COMMOND ? e = "33,0,0;32,0,0;31,0,0" : i == Enum_shangChengType.ZHENXI ? e = "1,1101,0" : i == Enum_shangChengType.MENPAI && (e = "38,0,0");
                break;
            case 3:
                i == Enum_shangChengType.COMMOND ? e = "33,0,0;32,0,0;31,0,0" : i == Enum_shangChengType.ZHENXI ? e = "1,1209,0;1,1210,0;1,1211,0" : i == Enum_shangChengType.MENPAI && (e = "38,0,0")
        }
        return ConfigHelp.makeVoList(e)
    }, t.prototype.isZhenLongGe = function (t) {
        var e = this.getType(),
            i = parseInt(t.toString());
        return e == Enum_shangChengType.COMMOND && 2 == i
    }, t.prototype.isZTFSStore = function (t) {
        var e = this.getType(),
            i = parseInt(t.toString());
        return e == Enum_shangChengType.ZHENXI && 3 == i
    }, t
}();
__reflect(ShangChengTypeInfo.prototype, "ShangChengTypeInfo");
var Enum_shangChengType;
! function (t) {
    t[t.COMMOND = 0] = "COMMOND", t[t.ZHENXI = 1] = "ZHENXI", t[t.MENPAI = 2] = "MENPAI", t[t.SHARE = 3] = "SHARE", t[t.ZHENYING = 4] = "ZHENYING"
}(Enum_shangChengType || (Enum_shangChengType = {}));
var ItemShangCheng = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.txtLimit.size = 18, this.width = 310, this.height = 142, this.iconZheKou = new eui.Image("zhekouBg_png"), this.iconZheKou.left = 0, this.iconZheKou.top = 0, this.txtZheKou = new eui.Label, this.txtZheKou.left = -10, this.txtZheKou.top = -10, this.txtZheKou.width = 74, this.txtZheKou.height = 30, this.txtZheKou.size = 26, this.txtZheKou.textAlign = "center", this.txtZheKou.rotation = 320, this.txtZheKou.bold = !0, this.iconBought = new eui.Image, this.iconBought.horizontalCenter = 30, this.iconBought.verticalCenter = 0, this.addChild(this.iconZheKou), this.addChild(this.iconBought), this.addChild(this.txtZheKou)
    }, e.prototype.onHand = function () {
        var e = this.data;
        e instanceof VoShangCheng && e.isZhengLongGe() && e.hasBought >= 1 ? ViewText.text("该物品已购买过，不能重复购买") : e instanceof VoShangCheng && e.isShuang11() && e.hasBought >= 1 ? ViewText.text("该物品已购买过，不能重复购买") : t.prototype.onHand.call(this)
    }, e.prototype.setBGSource = function () {
        this.background.source = "CM2_json.nChosen"
    }, e.prototype.validateDisplay = function () {
        t.prototype.validateDisplay.call(this);
        var e = this.data,
            i = e.zhekou;
        i > 0 && 10 > i ? (this.txtZheKou.text = i + "折", this.iconZheKou.visible = !0) : (this.txtZheKou.text = "", this.iconZheKou.visible = !1);
        var o = e.hasBought;
        1 == o ? this.iconBought.source = "STAtlas_json.bought" : this.iconBought.source = null
    }, e.prototype.onDown = function () {}, e.prototype.onUp = function () {}, e
}(ItemJJCStore);
__reflect(ItemShangCheng.prototype, "ItemShangCheng");
var VSYTReset = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VSYTResetSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnCancle), DisplayUtil.popBtnStyle(this.btnClose), this.btnChongZhi.label = "重置", this.btnCancle.label = "取消", this.btnChongZhi.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        var t, e = 0;
        0 == this.type ? (t = VoSYTMonster, e = VoVip.LIB[GameGlobal.modelRole.voMine.vip].syt) : (t = VoFMLMonster, e = VoVip.LIB[GameGlobal.modelRole.voMine.vip].fml), t.remainResetTime + e > 0 ? (0 == this.type ? GameGlobal.modelSytAndCTG.CG1055() : GameGlobal.modelSytAndCTG.CG3205(), this.closeHandler()) : ViewText.text("今日重置次数已用完")
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.type = e, this.onUpdate()
    }, e.prototype.onUpdate = function () {
        var t, e = (GameGlobal.modelRole.voMine.vip, 0);
        if (0 == this.type) {
            t = VoSYTMonster, e = VoVip.LIB[GameGlobal.modelRole.voMine.vip].syt;
            var i = t.resetCount,
                o = "免费";
            if (0 == i || void 0 == !i);
            else {
                var n = CFG_SYT.LIB_SUOYAOTA[i];
                if (n) {
                    var a = Util.parseIntStr(n.xh);
                    a[2] && (o = a[2] + CFG_ATTR.LIB[a[0]].n)
                }
            }
            var s = this.getNextVipAdd("syt");
            if (null == s) var r = Lang.reTxt("重置一次需消耗:{0}\n今日剩余重置次数:{1}", HtmlUtil.color(o, "#10a244"), HtmlUtil.color(t.remainResetTime + e, "#10a244"));
            else r = Lang.reTxt("重置一次需消耗:{0}\n今日剩余重置次数:{1}\n达到VIP{2}可额外增加{3}次", HtmlUtil.color(o, "#10a244"), HtmlUtil.color(t.remainResetTime + e, "#10a244"), s.vip, ColorSet(s.addCnt, "#10a244"))
        } else {
            t = VoFMLMonster, e = VoVip.LIB[GameGlobal.modelRole.voMine.vip].fml;
            var l = VoVip.LIB[GameGlobal.modelRole.voMine.vip].fml,
                n = CFG_SYT.LIB_FENGMOLU1[t.remainResetTime + 1];
            if (n) {
                var a = Util.parseIntStr(n.xh);
                o = a[2] ? a[2] + CFG_ATTR.LIB[a[0]].n : "免费"
            }
            s = this.getNextVipAdd("fml"), r = null == s ? Lang.reTxt("重置一次需消耗:{0}\n今日剩余重置次数:{1}", HtmlUtil.color(o, "#10a244"), HtmlUtil.color(l - t.remainResetTime, "#10a244")) : Lang.reTxt("重置一次需消耗:{0}\n今日剩余重置次数:{1}\n达到VIP{2}可额外增加{3}次", HtmlUtil.color(o, "#10a244"), HtmlUtil.color(l - t.remainResetTime, "#10a244"), s.vip, ColorSet(s.addCnt, "#10a244"))
        }
        this.txtInfo.textFlow = HtmlUtil.parse(r)
    }, e.prototype.getNextVipAdd = function (t) {
        var e = VoVip.getFullVip();
        if (GameGlobal.modelRole.voMine.vip >= e) return null;
        var i = GameGlobal.modelRole.voMine.vip,
            o = Util.getTempObj(),
            n = VoVip.LIB[i][t];
        return function a(e) {
            return VoVip.LIB[e] ? void(VoVip.LIB[e][t] != n ? (o.addCnt = VoVip.LIB[e][t] - n, o.vip = e) : a(e + 1)) : void(o = null)
        }(GameGlobal.modelRole.voMine.vip + 1), o
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VSYTReset.prototype, "VSYTReset");
var VTea_SignxlTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Tea_SignxlTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.grids = [], this.lb.text = "神秘礼物";
        var t = Config.getConfig(commonactivities_150).get(7).describe,
            e = Config.getConfig(commonactivities_150).get(8).describe,
            i = Config.getConfig(commonactivities_150).get(9).describe;
        this.lb1.textFlow = HtmlUtil.parse(t + HtmlUtil.color(e, "#10a244") + "!\n" + i), this.lb1.textAlign = egret.HorizontalAlign.CENTER, this.lb1.lineSpacing = 10
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = CFG_Param.LIB[14].key;
        ConfigHelp.makeStrGrids(i, this.grids, 0, 0, this.Grp, !0);
        var o = Config.getConfig(commonactivities_150).get(10).describe;
        this.lb2.text = o + Vo_TeachersDay.xlnum, IconUtil.setIconSrc(this.bgg, "teachMainBG3_png")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bgg)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VTea_SignxlTip.prototype, "VTea_SignxlTip");
var VTuJianPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.libType = 2, e.curPageIdx = 0, e.skinName = "TuJianPage", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VTuJianItem, this.prePage.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPreT, this), this.nextPage.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onNxtT, this)
    }, e.prototype.onOpen = function () {
        this.updateAll(), GameGlobal.modelTuJian.on(ModelTuJian.MSG_UPDATE, this.update, this)
    }, e.prototype.onClose = function () {
        this.curPageIdx = 0, GameGlobal.modelTuJian.off(ModelTuJian.MSG_UPDATE, this.update)
    }, e.prototype.updateAll = function () {
        this.updateList(), this.updatePage()
    }, e.prototype.updateList = function () {}, e.prototype.updatePage = function () {
        var t = GameGlobal.modelTuJian,
            e = this.allList = t.getTJList(this.libType),
            i = Util.getEndPageIndex(e.length, 4);
        this.lbPage.text = this.curPageIdx + 1 + "/" + (i + 1);
        var o = 4 * this.curPageIdx,
            n = Math.min(4 * (this.curPageIdx + 1), e.length);
        e = e.slice(o, n), this.listDataAC.source = e, this.checkNoticPage()
    }, e.prototype.onPreT = function () {
        this.changePage(this.curPageIdx - 1)
    }, e.prototype.onNxtT = function () {
        this.changePage(this.curPageIdx + 1)
    }, e.prototype.changePage = function (t) {
        var e = GameGlobal.modelTuJian,
            i = e.getTJList(this.libType),
            o = Util.getEndPageIndex(i.length, 4);
        t >= 0 && o >= t && (this.curPageIdx = t, this.updatePage())
    }, e.prototype.update = function () {
        this.listDataAC.refresh(), this.checkNoticPage()
    }, e.prototype.checkNoticPage = function () {
        var t = GameGlobal.modelTuJian,
            e = this.allList,
            i = 4 * this.curPageIdx,
            o = Math.min(4 * (this.curPageIdx + 1), e.length - 1);
        this.preTip.visible = !1;
        for (var n = i - 1; n >= 0; n--)
            if (t.checkIDNotic(e[n])) {
                this.preTip.visible = !0;
                break
            } this.nxtTip.visible = !1;
        var a = Util.getEndPageIndex(e.length, 4);
        if (a != this.curPageIdx) {
            for (var s = o, r = e.length; r > s; s++)
                if (t.checkIDNotic(e[s])) {
                    this.nxtTip.visible = !0;
                    break
                }
        } else this.nxtTip.visible = !1
    }, e
}(BaseEUIView);
__reflect(VTuJianPage.prototype, "VTuJianPage");
var ItemChallenger = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.setSkinName(), e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemChallengerSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.uirole = UIRole.create(), this.moxingContainer.addChild(this.uirole)
    }, e.prototype.defaultValue = function () {
        this.txtName.text = "玩家名字: 无", this.txtLevel.text = "等级: 无", this.txtZhanLi.text = "等级: 无", this.offTick()
    }, e.prototype.setData = function (t) {
        if (t) {
            this.txtName.text = t.hname, this.txtLevel.text = "等级: " + t.lv, this.txtZhanLi.text = "战力: " + t.str;
            var e = t.fashionID ? t.fashionID : t.hjob,
                i = t.guangHuanId,
                o = t.rideId,
                n = t.sbId,
                a = t.wingId;
            this.uirole.setHalo(i), this.uirole.setBody(e), this.uirole.setHorse(o), this.uirole.setWeapon(n), this.uirole.setWing(a), this.uirole.setWay(3), this.uirole.validParts(), this.onTick()
        } else this.defaultValue()
    }, e.prototype.setSelected = function (t) {
        this.iconSelected.visible = t
    }, e.prototype.onTick = function () {
        this.uirole.play()
    }, e.prototype.offTick = function () {
        this.uirole && this.uirole.stopAndClear()
    }, e
}(eui.Component);
__reflect(ItemChallenger.prototype, "ItemChallenger");
var Vo_XSFBItem = function () {
    function t() {
        this.isPass = !1, this.touch = !0, this.sdcs = -1, this.List = [], this.Map = {}
    }
    return t.prototype.create = function () {
        if (!(this.List.length > 0)) {
            var e = 0,
                i = this.lib1;
            for (var o in i) {
                var n = i[o],
                    a = new t;
                a.cfg = n, a.id = n.id, a.index = e, this.List.push(a), this.Map[a.id] = a, e++
            }
        }
    }, t.prototype.findMin = function () {
        for (var t = this.List, e = 0; e < t.length; e++) {
            var i = t[e];
            if (!i.isPass) return e
        }
        return t.length
    }, t.prototype.getLIB2len = function () {
        var t = 0;
        for (var e in this.lib2) t++;
        return t
    }, t
}();
__reflect(Vo_XSFBItem.prototype, "Vo_XSFBItem");
var VLJXF = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "LJXFSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.data = new eui.ArrayCollection, this.list.itemRenderer = VLJXFItem, this.list.dataProvider = this.data, Vo_LJXFItem.init()
    }, e.prototype.update = function () {
        var t = this;
        t.lbxfnum.text = GameGlobal.modelLJXF.ljxf.toString() + "元宝", DisplayUtil.fillDataAC(this.data, Vo_LJXFItem.List)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.tick.addInterv(this.onTimeTick, 1e3, this), GameGlobal.modelLJXF.on(ModelLJXF.UPDATE, this.update, this), GameGlobal.modelLJXF.CG2641()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.tick.removeInterv(this.onTimeTick), GameGlobal.modelLJXF.off(ModelLJXF.UPDATE, this.update, this)
    }, e.prototype.onTimeTick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(6);
        if (e) {
            var i = e.getChildByID(33);
            if (i) {
                var o = i.getRemainSec();
                o >= 0 && (t.lbTime.text = DateUtil.getHMSBySecond2(o))
            }
        }
    }, e
}(BaseEUIView);
__reflect(VLJXF.prototype, "VLJXF");
var VLJXFItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "LJXFItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btn.label = "领取", this.btn.labelColor = 14363651
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.txt.textFlow = [{
                text: "累计消费",
                style: {
                    textColor: 16777215,
                    stroke: 2,
                    strokeColor: 15497008
                }
            }, {
                text: t.yb,
                style: {
                    textColor: 172090,
                    stroke: 0
                }
            }, {
                text: "元宝",
                style: {
                    textColor: 16777215,
                    stroke: 2,
                    strokeColor: 15497008
                }
            }], ConfigHelp.makeStrGrids(t.jl, this.grids, 0, 0, this.container, !0), this.setState(t.getState)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setState = function (t) {
        switch (t) {
            case 0:
                this.btn.enabled = !1, this.btn.setNoticeVis(!1), this.btn.visible = !0, this.imgGet.visible = !1;
                break;
            case 1:
                this.btn.enabled = !0, this.btn.setNoticeVis(!0), this.btn.visible = !0, this.imgGet.visible = !1;
                break;
            case 2:
                this.btn.visible = !1, this.imgGet.visible = !0
        }
    }, e.prototype.onT = function (t) {
        GameGlobal.modelLJXF.CG2643(this.vo.id)
    }, e
}(eui.Component);
__reflect(VLJXFItem.prototype, "VLJXFItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var Vo_LJXFItem = function () {
    function t() {}
    return t.init = function () {
        t.List = [];
        var e = CFG_LJXF.LIB;
        for (var i in e) {
            var o = new t;
            o.id = e[i].id, o.yb = e[i].yb, o.jl = e[i].jl, o.sort = e[i].id, t.List.push(o)
        }
    }, t.update = function (e, i) {
        for (var o = [], n = t.List, a = 0; a < n.length; a++) {
            var s = n[a];
            if (s.id == e) {
                s.getState = i, 2 == i && (o.push(s), t.List.splice(a, 1), t.List = t.List.concat(o));
                break
            }
        }
        t.List.length;
        t.List.sort(function (t, e) {
            var i = [2, 3, 1],
                o = i[t.getState],
                n = i[e.getState];
            return o == n ? t.sort - e.sort : n - o
        })
    }, t.Notice = function () {
        for (var e = t.List, i = 0; i < e.length; i++)
            if (1 == e[i].getState) return !0;
        return !1
    }, t.List = [], t
}();
__reflect(Vo_LJXFItem.prototype, "Vo_LJXFItem");
var DepSprite = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.dep = 0, e.childIndex = -1, e
    }
    return __extends(e, t), e.prototype.depAddChild = function (t) {
        for (var e = this.$children, i = e.length - 1, o = 0, n = (o + i) / 2 >> 0; i > o;) {
            var a = e[n];
            if (t.dep > a.dep) o = n + 1;
            else {
                if (!(t.dep < a.dep)) break;
                i = n - 1
            }
            n = (o + i) / 2 >> 0
        }
        t.$parent || this.$doAddChild(t, n), t.childIndex = n
    }, e.prototype.depRemoveChild = function (t) {
        var e = this.$children,
            i = e.indexOf(t);
        i >= 0 && this.$doRemoveChild(i, !1)
    }, e.prototype.sortChild = function () {
        var t = this.$children;
        t.sort(this.sortFunc)
    }, e.prototype.sortFunc = function (t, e) {
        return t ? e ? t.dep - e.dep : -1 : 1
    }, e
}(egret.DisplayObjectContainer);
__reflect(DepSprite.prototype, "DepSprite", ["IDepObject"]);
var PlatformDebug = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e
}(PlatformBase);
__reflect(PlatformDebug.prototype, "PlatformDebug");
var hy_wy_sdk, PlatformMi = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.recharge = function (t, e) {
        var i = CFG_Recharge.getCfgByID(t),
            o = i.money;
        CommonHttp.recharge(t, o, i.name, this.onRecharge, this, t)
    }, e.prototype.onRecharge = function (t, e) {
        if (0 != t.code) ViewText.text("订单请求失败");
        else {
            var i = t.data,
                o = i.cpOrderId,
                n = CFG_Recharge.getCfgByID(e),
                a = GameGlobal.loginArg,
                s = {
                    appId: i.appId,
                    appAccountId: a.account,
                    session: a.sign,
                    cpOrderId: o,
                    cpUserInfo: GameGlobal.modelRole.voMine.id + "",
                    displayName: i.displayName,
                    feeValue: 100 * n.money,
                    sign: i.sign
                };
            try {
                hy_wy_sdk.pay(s)
            } catch (r) {
                console.log("payError:" + String(r)), ViewText.text(String(r))
            }
        }
    }, e
}(PlatformBase);
__reflect(PlatformMi.prototype, "PlatformMi");
var PlatformQQBrowser = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.initSDK = function () {
        t.prototype.initSDK.call(this)
    }, Object.defineProperty(e.prototype, "isCanShare", {
        get: function () {
            return !0
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "isCanAddShortcut", {
        get: function () {
            return !0
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.share = function (t, e, i) {
        var o = t ? t : new ShareData;
        o.ext.inviter = GameGlobal.modelRole.voMine.id, t || (o.title = "仙剑至尊", o.imgUrl = "http://hjcscdn-res.xcwlxcwl.cn/HuanJieChuanShuoQzone/login/loginres/desktopPng.jpg", o.content = "这游戏可以领萌宠，爆装备，领豪礼，赶紧上车，玩经典回合游戏。"), window.sdk.share({
            url: "https://ag.qq.com/community/detail?gameId=7213341296" + o.queryLink,
            title: o.title,
            description: o.content,
            imgUrl: o.imgUrl,
            imgTitle: "",
            cusTxt: ""
        }, function (t, o) {
            switch (t) {
                case 0:
                    e && e();
                    break;
                case -1:
                    i && i()
            }
            ViewText.text(o)
        })
    }, e.prototype.addShortcut = function () {
        window.sdk.sendToDesktop({}, function (t, e) {
            0 == t ? ViewText.text("发送桌面快捷方式成功！") : console.log("发送桌面:" + e)
        })
    }, e.prototype.onRecharge = function (t) {
        if (0 == t.code) {
            var e = t.data,
                i = (e.billno, e.queryMap),
                o = e.goods_id,
                n = CFG_Recharge.LIB[o];
            i.payItem = n.name + "*" + 10 * n.money + "*1", i.payInfo = n.name + "*", console.log("queryMap:" + JSON.stringify(i)), window.sdk.pay(i, function (t) {
                0 == t.result ? (t.msg, t.realSaveNum) : egret.error(t)
            })
        } else ViewText.text("请求充值订单失败!")
    }, e
}(PlatformBase);
__reflect(PlatformQQBrowser.prototype, "PlatformQQBrowser");
var mqq, PlatformQzone = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.initSDK = function () {
        t.prototype.initSDK.call(this), this.shareInit(), this.addShortcutInit()
    }, Object.defineProperty(e.prototype, "isCanShare", {
        get: function () {
            return !0
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "isCanAddShortcut", {
        get: function () {
            return !0
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.adaptDisplay = function () {
        switch (t.prototype.adaptDisplay.call(this), AppConfig.channel) {
            case E_SQ_CHANNEL.tencentNews:
                this.isAdaptNews();
                break;
            case E_SQ_CHANNEL.xinYueClub:
                this.deviceTopPX = 0 == this.deviceTopPX ? 70 : this.deviceTopPX
        }
        console.log("changel:" + AppConfig.channel + "  toppx:" + this.deviceTopPX)
    }, e.prototype.isAdaptNews = function () {
        var t = this.getNewsVer();
        "5.7.6" > t && (this.deviceTopPX = 0 == this.deviceTopPX ? 130 : this.deviceTopPX)
    }, e.prototype.getNewsVer = function () {
        var t = navigator.userAgent,
            e = t.match(/qqnews\/([\.\d]+)/i);
        return e && e[1] ? e[1] : "0.0.0"
    }, e.prototype.addShortcutInit = function () {
        var t = this;
        window.mqq.invoke("ui", "setOnAddShortcutHandler", {
            callback: mqq.callback(function () {
                t.wanbaAddShortcut()
            }, !1, !0)
        })
    }, e.prototype.addShortcut = function () {
        AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_WAN ? this.limixiuAddShortcut() : AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_BA && this.wanbaAddShortcut()
    }, e.prototype.wanbaAddShortcut = function () {
        mqq.ui.addShortcut({
            action: "web",
            title: "仙剑至尊",
            icon: "http://hjcscdn-res.xcwlxcwl.cn/HuanJieChuanShuoQzone/login/loginres/desktopPng.jpg",
            url: window.OPEN_DATA.jumpurl,
            callback: function (t) {}
        })
    }, e.prototype.limixiuAddShortcut = function () {
        window.BK.MQQ.SsoRequest.send({
            extendInfo: ""
        }, "cs.create_xy_shortcut.local")
    }, e.prototype.shareInit = function () {
        var t = {
            title: "仙剑至尊",
            desc: "这游戏可以领萌宠，爆装备，领豪礼，赶紧上车，玩经典回合游戏。",
            share_url: window.OPEN_DATA.shareurl + "&inviter=" + GameGlobal.modelRole.voMine.id,
            image_url: "http://hjcscdn-res.xcwlxcwl.cn/HuanJieChuanShuoQzone/login/loginres/desktopPng.jpg"
        };
        mqq.invoke("ui", "setOnShareHandler", function (e) {
            0 == e || 3 == e ? mqq.ui.shareArkMessage(t, function (t) {}) : (t.share_type = e, t.back = !0, mqq.invoke("ui", "shareMessage", t, function (t) {
                console.log("shared result")
            }))
        })
    }, e.prototype.openRecharge = function () {
        GameGlobal.layerMgr.open(UIConst.RECHARGE), this.callback && this.callback.call(null)
    }, e.prototype.askOpenRecharge = function (t) {
        this.callback = t, ViewAlert.show("是否前往充值?", function () {
            platform.openRecharge()
        })
    }, e.prototype.createRewardedVideoAd = function (t) {}, e.prototype.share = function (t, e, i) {
        switch (AppConfig.channel) {
            case E_SQ_CHANNEL.liMiXiu:
                this.wan_wanShare(t, e);
                break;
            case E_SQ_CHANNEL.SQ:
            case E_SQ_CHANNEL.xinYueClub:
            case E_SQ_CHANNEL.tencentNews:
            case E_SQ_CHANNEL.QQLive:
                this.sqShareMenu(t, e);
                break;
            default:
                this.showShareMenu(t, e)
        }
    }, e.prototype.wan_wanShare = function (t, e) {
        var i = t ? t : new ShareData;
        i.ext.shareRoleId = GameGlobal.modelRole.voMine.id, t || (i.title = "上仙,带我一起遨游洪荒世界吧", i.imgUrl = "http://hjcscdn-res.xcwlxcwl.cn/HuanJieChuanShuoQzone/login/loginres/horShare.jpg", i.content = "上仙,带我一起遨游洪荒世界吧"), i.shareUrl = window.OPEN_DATA.shareurl + i.queryLink, mqq.invoke("ui", "shareMessage", {
            title: i.title,
            desc: i.content,
            share_url: i.shareUrl,
            image_url: i.imgUrl,
            back: !0
        }, function (t) {
            e && e()
        })
    }, e.prototype.sqShareMenu = function (t, e) {
        var i = t ? t : new ShareData;
        i.ext.inviter = GameGlobal.modelRole.voMine.id, t || (i.title = "仙剑至尊", i.imgUrl = "http://hjcscdn-res.xcwlxcwl.cn/HuanJieChuanShuoQzone/login/loginres/desktopPng.jpg", i.content = "这游戏可以领萌宠，爆装备，领豪礼，赶紧上车，玩经典回合游戏。", i.bgUrl = null), i.shareUrl = window.OPEN_DATA.shareurl + i.queryLink, mqq.ui.shareArkMessage({
            title: i.title,
            desc: i.content,
            share_url: i.shareUrl,
            image_url: i.imgUrl,
            bg_url: i.bgUrl
        }, function (t) {
            e && e()
        })
    }, e.prototype.showShareMenu = function (t, e) {
        var i = t ? t : new ShareData;
        i.ext.inviter = GameGlobal.modelRole.voMine.id, t || (i.title = "仙剑至尊", i.imgUrl = "http://hjcscdn-res.xcwlxcwl.cn/HuanJieChuanShuoQzone/login/loginres/desktopPng.jpg", i.content = "这游戏可以领萌宠，爆装备，领豪礼，赶紧上车，玩经典回合游戏。", i.bgUrl = null), i.shareUrl = window.OPEN_DATA.shareurl + i.queryLink, mqq.invoke("ui", "shareMessage", {
            title: i.title,
            desc: i.content,
            share_url: i.shareUrl,
            image_url: i.imgUrl,
            back: !0
        }, function (t) {
            e && e()
        })
    }, e.prototype.sendToPlatform = function () {
        var t = GameGlobal.loginArg,
            e = t.account,
            i = t.openkey,
            o = t.pf,
            n = (t.pd, "");
        AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_WAN ? n = "http://wyiw-ground.xcwlxcwl.cn/fsqy/login/code2accessToken?" : AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_BA && (n = "https://fsqy-ground.xcwlxcwl.cn/fsqy/login/code2accessToken?"), n += "openkey=" + i + "&midas_pf=" + (1 == t.platform ? "android" : "ios") + "&curpf=" + o + "&curpd=" + o + "&openid=" + e;
        try {
            Util.getInstance().httpRequestAsync(n, egret.HttpResponseType.TEXT, egret.HttpMethod.POST)
        } catch (a) {
            console.log("link error")
        }
    }, e.prototype.pay = function (t, e) {
        var i = this;
        window.__paySuccess = function () {
            i.realBuy(t, e), ViewText.text("充值成功"), ReportToWan.reportRecharge()
        }, window.__payError = function () {
            ViewText.text("充值失败, appid:" + GameGlobal.loginArg.appid)
        }, window.__payClose = function () {
            console.log("关闭充值")
        }, window.popPayTips({
            version: "v2",
            defaultScore: t,
            appid: GameGlobal.loginArg.appid
        })
    }, e.prototype.recharge = function (t) {
        return __awaiter(this, void 0, void 0, function () {
            var e, i, o;
            return __generator(this, function (n) {
                switch (n.label) {
                    case 0:
                        return e = CFG_Recharge.LIB[t], i = 10 * e.money, [4, this.checkEnough()];
                    case 1:
                        return o = n.sent(), console.log("购买查询结果", o), o ? 0 == o.state && (console.log("查询结果：" + o.state), i <= o.score ? (console.log("购买"), this.realBuy(i, t)) : (console.log("充值"), this.pay(i, t))) : console.log("查询星币出错"), [2]
                }
            })
        })
    }, e.prototype.checkEnough = function () {
        return __awaiter(this, void 0, void 0, function () {
            var t = this;
            return __generator(this, function (e) {
                return [2, new Promise(function (e, i) {
                    CommonHttp.queryQB(function (t) {
                        var i;
                        0 == t.code ? (console.log("星币数：" + t.data.data[0].score), i = {
                            state: t.code,
                            score: t.data.data[0].score
                        }) : i = {
                            state: -1,
                            score: 0
                        }, e(i)
                    }, t)
                })]
            })
        })
    }, e.prototype.alertToBuy = function (t) {
        return __awaiter(this, void 0, void 0, function () {
            var e;
            return __generator(this, function (i) {
                return e = this, [2, new Promise(function (i) {
                    ViewAlert.show("确定购买" + t + "元宝?", function () {
                        i(1)
                    }, 3, e, "提    示", "确定", "取消", function () {
                        i(0)
                    }, function () {
                        i(0)
                    })
                })]
            })
        })
    }, e.prototype.realBuy = function (t, e) {
        return __awaiter(this, void 0, void 0, function () {
            var i, o = this;
            return __generator(this, function (n) {
                switch (n.label) {
                    case 0:
                        return [4, this.alertToBuy(t)];
                    case 1:
                        return i = n.sent(), 1 != i ? (ViewText.text("您取消了购买元宝!"), [2]) : [2, new Promise(function (i, n) {
                            CommonHttp.rechargeQZone(t, e, function (e) {
                                0 == e.code ? ViewText.text("您成功购买了" + t + "元宝!") : ViewText.text("购买失败"), i()
                            }, o)
                        })]
                }
            })
        })
    }, e.prototype.isScene = function (t) {
        return t
    }, Object.defineProperty(e.prototype, "inviter", {
        get: function () {
            var t;
            if (AppConfig.channel == E_SQ_CHANNEL.liMiXiu)
                if (window.GameStatusInfo)
                    if (t = "window.GameStatusInfo", window.GameStatusInfo.gameParam) {
                        var e = window.GameStatusInfo.gameParam.split("");
                        e.shift(), e.pop(), t = e.join("").split(":")[1]
                    } else t = "";
            else t = "";
            else t = window.shareInfo && window.shareInfo.inviter ? window.shareInfo.inviter : VChangeAccount.inviter ? VChangeAccount.inviter : "";
            return t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.reportMsgToSelf = function (t, e) {
        window.reportMsgToSelf(t, e)
    }, e.prototype.reportLogin = function () {
        window.reportLogin && window.reportLogin()
    }, e.prototype.reportRegister = function () {
        window.reportRegister ? window.reportRegister() : console.log("手Q注册")
    }, e
}(PlatformBase);
__reflect(PlatformQzone.prototype, "PlatformQzone");
var Tick = function () {
    function t() {
        this.items = []
    }
    return t.prototype.disableBtn = function (t, e) {
        t.enabled = !1, GameGlobal.tick.addInterv(this.btnEnableHand, e, this.btnEnableHand, !0, t)
    }, t.prototype.btnEnableHand = function (t, e, i) {
        var o = i.arg;
        o.enabled = !0
    }, t.prototype.tick = function (t) {
        for (var e = this, i = !1, o = 0, n = e.items.length; n > o; o++) {
            var a = e.items[o];
            a ? (a.timer += t, a.timer >= a.interv && (a.method(a.caller, a.timer, a), a.timer = 0, a.once && (e.items[o] = null, i = !0, a._next && (this.items[n] = a._next, a._next = null)))) : i = !0
        }
        i && ArrayUtil.cleannull(e.items)
    }, t.prototype.getIndex = function (t, e) {
        for (var i = this, o = 0, n = i.items.length; n > o; o++) {
            var a = i.items[o];
            if (a && (!e || e == a.caller) && a.method === t) return o
        }
        return -1
    }, t.prototype.addInterv = function (t, e, i, o, n, a) {
        if (void 0 === i && (i = null), void 0 === o && (o = !1), void 0 === n && (n = null), void 0 === a && (a = !0), a) var s = this.getIndex(t, i);
        else s = -1;
        if (-1 == s) {
            var r = TickItem.create();
            return r.method = t, r.caller = i, r.once = o, r.arg = n, r.interv = e, r.timer = 0, this.items[this.items.length] = r, r
        }
    }, t.prototype.removeInterv = function (t, e) {
        void 0 === e && (e = null);
        var i = this.getIndex(t, e);
        if (i >= 0) {
            var o = this.items[i];
            o.recover(), this.items[i] = null
        }
    }, t
}();
__reflect(Tick.prototype, "Tick");
var TickItem = function () {
    function t() {}
    return t.create = function () {
        return t.PO.length ? t.PO.pop() : new t
    }, t.prototype.recover = function () {
        this.caller = null, this.method = null, this.arg = null, t.PO.push(this), this._next && (this._next.recover(), this._next = null)
    }, t.prototype.next = function (e, i, o, n, a) {
        void 0 === o && (o = null), void 0 === n && (n = !1), void 0 === a && (a = null);
        var s = this._next = t.create();
        return s.method = e, s.caller = o, s.once = n, s.arg = a, s.interv = i, s.timer = 0, this
    }, t.PO = [], t
}();
__reflect(TickItem.prototype, "TickItem");
var Delegate = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e._funList = [], e._thisArgList = [], e
    }
    return __extends(e, t), e.prototype.init = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e]
    }, Object.defineProperty(e.prototype, "count", {
        get: function () {
            return this._funList.length
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.has = function (t) {
        return -1 != this._funList.indexOf(t)
    }, e.prototype.register = function (t, e) {
        !this.has(t) && t && (this._funList.push(t), this._thisArgList.push(e))
    }, e.prototype.unregister = function (t) {
        if (this.has(t)) {
            var e = this._funList.indexOf(t);
            this._funList.splice(e, 1), this._thisArgList.splice(e, 1)
        }
    }, e.prototype.clear = function () {
        this._funList.length = 0, this._thisArgList.length = 0
    }, e.prototype.boardcast = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        for (var i = 0; i < this._funList.length; i++) {
            var o = this._funList[i],
                n = this._thisArgList[i];
            n ? o.apply(n, t) : o(t)
        }
    }, e
}(CacheableClass);
__reflect(Delegate.prototype, "Delegate");
var BaseModel = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.getBytes = function () {
        var t = e;
        return t.bytes ? t.bytes.clear() : t.bytes = new BaseBytes, t.bytes
    }, e.prototype.listenServ = function (t) {
        this.socket = t
    }, e.prototype.sendSocket = function (t, e) {
        this.socket.webSocket.connect && this.socket.sendCMDBytes(t, e)
    }, e.prototype.isFlag = function (t) {
        return this.flagMap ? this.flagMap[t] : !1
    }, e.prototype.setFlag = function (t) {
        this.flagMap || (this.flagMap = {}), this.flagMap[t] = !0
    }, e.prototype.removeFlage = function (t) {
        this.flagMap && (GameGlobal.tick.removeInterv(this.onDelay, this), delete this.flagMap[t])
    }, e.prototype.addDelayFlag = function (t, e) {
        void 0 === e && (e = 1e3);
        var i = this;
        i.setFlag(t), GameGlobal.tick.addInterv(this.onDelay, e, i, !0, t)
    }, e.prototype.onDelay = function (t, e, i) {
        t.removeFlage(i.arg)
    }, e
}(GameCtrlBase);
__reflect(BaseModel.prototype, "BaseModel");
var VYaoShouLL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.time = new egret.Timer(1e3, 0), e._x = -1, e.grids = [], e.skinName = "resource/eui_skins/game/daliy/YaoShouLL.exml", e
    }
    return __extends(e, t), e.prototype.guideChallenge = function () {
        var t = this.btnGo;
        t && QuestGuideArrow.getIns().guideViewCenter(t)
    }, e.prototype.initView = function () {
        this.txtdes.textFlow = [{
            text: "击杀",
            style: {
                textColor: 16712194
            }
        }, {
            text: "10",
            style: {
                textColor: 1090116
            }
        }, {
            text: "次经验妖兽可获得额外奖励",
            style: {
                textColor: 16712194
            }
        }], this.btnFinish.label = "一键完成", this.btnGo.label = "前往击杀", this.btn12.label = "1.2倍领取", this.btn12.setNoticeVis(!0), this._x = this.nGroup.x, this.btnFinish.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnFT, this), this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnGoT, this), this.time.addEventListener(egret.TimerEvent.TIMER, this.timeshow, this), this.btn12.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btn12T, this)
    }, e.prototype.btnGetT = function () {
        var t = GameGlobal.modelDaliy.YsHuan;
        10 == t && GameGlobal.modelDaliy.CG1559(4)
    }, e.prototype.btn12T = function () {
        if (2 != GameGlobal.modelDaliy.Ys5Award) var t = 1;
        else t = 4;
        VDaliyTip.show("是否花费:" + HtmlUtil.color("50元宝", "#10a244") + "额外获得20%经验奖励？", function () {
            GameGlobal.modelDaliy.CG1561(t)
        })
    }, e.prototype.btnFT = function () {
        var t = GameGlobal.modelDaliy.Ys5Award;
        if (0 == t) this.isVip();
        else if (1 == t) GameGlobal.modelDaliy.CG1559(1);
        else if (2 == t) {
            var e = GameGlobal.modelDaliy.Ys10Award;
            0 == e ? this.isVip() : 1 == e && GameGlobal.modelDaliy.CG1559(4)
        }
    }, e.prototype.isVip = function () {
        var t = GameGlobal.modelRole.voMine.vip;
        if (4 > t) return void ViewText.text("VIP4开启一键完成");
        var e = 10 * (10 - GameGlobal.modelDaliy.YsHuan);
        VDaliyTip.show("是否花费:" + HtmlUtil.color(e + "元宝", "#10a244") + "直接完成剩余环数?", function () {
            GameGlobal.modelDaliy.CG1557(1)
        })
    }, e.prototype.btnGoT = function () {
        0 != GameGlobal.modelDaliy.YsNum ? GameGlobal.layerMgr.open(UIConst.YAOSHOU) : ViewText.text("暂无妖兽")
    }, e.prototype.update = function () {
        this.txtys0.text = GameGlobal.modelDaliy.YsNum.toString() + "/5", this.upProgress(), this.upNum(), this.upTime(), this.upBtn(), this.setGrid()
    }, e.prototype.upBtn = function () {
        var t = GameGlobal.modelDaliy.Ys5Award,
            e = GameGlobal.modelDaliy.Ys10Award;
        switch (this.btnFinish.enabled = !0, this.Group12.visible = !1, this.btnFinish.setNoticeVis(!1), t) {
            case 0:
                this.btnFinish.label = "一键完成";
                break;
            case 1:
                this.btnFinish.label = "领取5环奖励", this.btnFinish.setNoticeVis(!0), this.Group12.visible = !0;
                break;
            case 2:
                0 == e ? this.btnFinish.label = "一键完成" : 1 == e ? (this.btnFinish.label = "领取奖励", this.btnFinish.setNoticeVis(!0), this.Group12.visible = !0) : 2 == e && (this.btnFinish.label = "已领取", this.btnFinish.enabled = !1)
        }
        0 == GameGlobal.modelDaliy.YsNum ? (this.btnGo.setNoticeVis(!1), this.btnGo.enabled = !1) : (this.btnGo.setNoticeVis(!0), this.btnGo.enabled = !0)
    }, e.prototype.upTime = function () {
        this.timeCc = GameGlobal.modelDaliy.YsTime, this.numCc = GameGlobal.modelDaliy.YsNum, this.time.start()
    }, e.prototype.timeshow = function () {
        this.timeGroup.visible = !0, (0 == this.timeCc || this.numCc >= 5) && (this.time.stop(), this.timeGroup.visible = !1), this.txtys1.text = DateUtil.getHMSBySecond2(this.timeCc), this.timeCc--
    }, e.prototype.upProgress = function () {
        var t = GameGlobal.modelDaliy.YsHuan,
            e = this.g_progress.width / 10;
        this.progress.width = e * t
    }, e.prototype.upNum = function () {
        var t = "num_json.y",
            e = GameGlobal.modelDaliy.YsHuan;
        e >= 10 ? (this.huan0.source = t + 1, this.huan1.visible = !0, this.nGroup.x = this._x + this.huan1.width) : (this.huan0.source = t + e.toString(), this.huan1.visible = !1, this.nGroup.x = this._x)
    }, e.prototype.setGrid = function () {
        var t = GameGlobal.modelDaliy,
            e = GameGlobal.modelRole.voMine.level,
            i = CFG_DALIY.LIB1[e];
        if (i)
            if (2 != t.Ys5Award) var o = i.ys_jl;
            else o = i.ys_jl2;
        var n = ConfigHelp.makeVoListByArr(Util.strToArr(o)),
            a = n.length,
            s = (this.container.width - 90 * a) / (a - 1);
        ConfigHelp.makeVoGrids(n, this.grids, 0, 0, this.container, !0, s)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), GameGlobal.modelDaliy.on(ModelDaliy.UPDATE, this.update, this), GameGlobal.modelDaliy.on(ModelDaliy.FINISH, this.update, this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelDaliy.off(ModelDaliy.UPDATE, this.update, this), GameGlobal.modelDaliy.off(ModelDaliy.FINISH, this.update, this)
    }, e.Notice = !1, e
}(BaseEUIView);
__reflect(VYaoShouLL.prototype, "VYaoShouLL");
var CFG_HJSD = function () {
    function t() {}
    return t
}();
__reflect(CFG_HJSD.prototype, "CFG_HJSD");
var CFG_HUOBAN1 = function () {
    function t() {}
    return t
}();
__reflect(CFG_HUOBAN1.prototype, "CFG_HUOBAN1");
var CFG_HUOBAN2 = function () {
    function t() {}
    return t
}();
__reflect(CFG_HUOBAN2.prototype, "CFG_HUOBAN2");
var CFG_HUOBAN3 = function () {
    function t() {}
    return t
}();
__reflect(CFG_HUOBAN3.prototype, "CFG_HUOBAN3");
var CFG_HuobanJX = function () {
    function t() {}
    return t
}();
__reflect(CFG_HuobanJX.prototype, "CFG_HuobanJX");
var CFG_HUODONG = function () {
    function t() {}
    return t
}();
__reflect(CFG_HUODONG.prototype, "CFG_HUODONG");
var CFG_HYDT = function () {
    function t() {}
    return t
}();
__reflect(CFG_HYDT.prototype, "CFG_HYDT");
var CFG_Item = function () {
    function t() {}
    return t
}();
__reflect(CFG_Item.prototype, "CFG_Item");
var CFG_JJC1 = function () {
    function t() {}
    return t
}();
__reflect(CFG_JJC1.prototype, "CFG_JJC1");
var CFG_JJC2 = function () {
    function t() {}
    return t
}();
__reflect(CFG_JJC2.prototype, "CFG_JJC2");
var CFG_JJC3 = function () {
    function t() {}
    return t
}();
__reflect(CFG_JJC3.prototype, "CFG_JJC3");
var CFG_LJXF = function () {
    function t() {}
    return t
}();
__reflect(CFG_LJXF.prototype, "CFG_LJXF");
var CFG_MAP = function () {
    function t() {}
    return t.getMapName = function (t) {
        var e = this.LIB[t];
        return e ? e.name : "errMap:" + t
    }, t
}();
__reflect(CFG_MAP.prototype, "CFG_MAP");
var CFG_MENPAI = function () {
    function t() {}
    return t
}();
__reflect(CFG_MENPAI.prototype, "CFG_MENPAI");
var CFG_MidFestival = function () {
    function t() {}
    return t
}();
__reflect(CFG_MidFestival.prototype, "CFG_MidFestival");
var CFG_MOD = function () {
    function t() {}
    return t.LIBNOHEAD = {
        1011: 1,
        2001: 1,
        2002: 1,
        2301: 1,
        2307: 1
    }, t
}();
__reflect(CFG_MOD.prototype, "CFG_MOD");
var CFG_MONSTER = function () {
    function t() {}
    return t
}();
__reflect(CFG_MONSTER.prototype, "CFG_MONSTER");
var CFG_MRSC = function () {
    function t() {}
    return t
}();
__reflect(CFG_MRSC.prototype, "CFG_MRSC");
var CFG_NationalDay = function () {
    function t() {}
    return t
}();
__reflect(CFG_NationalDay.prototype, "CFG_NationalDay");
var CFG_Npc = function () {
    function t() {}
    return t.copyNpcAttr = function (t, e) {
        t.name = e.name, t.hp = t.hpmax = e.hp, t.att = e.att, t.pdef = e.pdef
    }, t.LIB = {
        1001: {
            name: "无聊人物",
            dialog: "",
            m: 10001
        },
        1002: {
            name: "城主",
            dialog: "我很强",
            m: 10002
        },
        1003: {
            name: "武器老头",
            dialog: "快要攻下来了！！",
            m: 10003,
            fun: {
                type: "openui",
                uiid: "STORE"
            }
        },
        2001: {
            name: "僵尸",
            m: 2001,
            hp: 40,
            att: 65,
            pdef: 70,
            ny: 110
        },
        2002: {
            name: "BOSS1",
            m: 2002,
            hp: 300,
            att: 70,
            pdef: 80,
            ny: 180
        }
    }, t
}();
__reflect(CFG_Npc.prototype, "CFG_Npc");
var CFG_Param = function () {
    function t() {}
    return t
}();
__reflect(CFG_Param.prototype, "CFG_Param");
var CFG_PeiYang = function () {
    function t() {}
    return t.getHorseRndCFG = function () {
        var t = this.LIB_HORSE[this.HORSERANDKEY[this.HORSERANDKEY.length * Math.random() >> 0]];
        return t
    }, t.getWingRndCFG = function () {
        var t = this.LIB_WING[this.WINGRANDKEY[this.WINGRANDKEY.length * Math.random() >> 0]];
        return t
    }, t.getWeaponRndCFG = function () {
        var t = this.LIB_WEAPON[this.WEAPONRANDKEY[this.WEAPONRANDKEY.length * Math.random() >> 0]];
        return t
    }, t.getHaloRndCFG = function () {
        var t = this.LIB_HALO[this.HALORANDKEY[this.HALORANDKEY.length * Math.random() >> 0]];
        return t
    }, t.HORSERANDKEY = [1, 2, 3], t.WINGRANDKEY = [1, 2], t.WEAPONRANDKEY = [1, 2], t.HALORANDKEY = [1, 2], t
}();
__reflect(CFG_PeiYang.prototype, "CFG_PeiYang");
var CFG_PERSONBOSS = function () {
    function t() {}
    return t
}();
__reflect(CFG_PERSONBOSS.prototype, "CFG_PERSONBOSS");
var CFG_Pet = function () {
    function t() {}
    return t.init = function () {
        this.PETLIB = Config.getConfig(chongwu_122).configMap, this.POSLIB = Config.getConfig(chongwupos_123).configMap, this.PETLEVEL = Config.getConfig(petlv_130).configMap, this.ZHUOCHONGLIB = Config.getConfig(zhuochonggl_181).configMap, this.PETSKILLL = Config.getConfig(petskill_131).configMap
    }, t.prototype.getZiZhiStr = function () {}, t
}();
__reflect(CFG_Pet.prototype, "CFG_Pet");
var CFG_QiangHua = function () {
    function t() {}
    return t.LIB = {
        0: {
            attr: [110, 20]
        },
        1: {
            attr: [110, 11, 111, 10, 112, 10]
        },
        2: {
            attr: [111, 20]
        },
        3: {
            attr: [112, 20]
        },
        4: {
            attr: [113, 2]
        },
        5: {
            attr: [113, 2]
        },
        6: {
            attr: [110, 4, 113, 1]
        },
        7: {
            attr: [110, 4, 113, 1]
        }
    }, t
}();
__reflect(CFG_QiangHua.prototype, "CFG_QiangHua");
var CFG_QiXiYouNi = function () {
    function t() {}
    return t
}();
__reflect(CFG_QiXiYouNi.prototype, "CFG_QiXiYouNi");
var CFG_GoodFeel = function () {
    function t() {}
    return t
}();
__reflect(CFG_GoodFeel.prototype, "CFG_GoodFeel");
var CFG_QMBOSS = function () {
    function t() {}
    return t
}();
__reflect(CFG_QMBOSS.prototype, "CFG_QMBOSS");
var CFG_Quest = function () {
    function t() {}
    return t.getRndCFG = function () {
        var t = Util.getTempArr();
        for (var e in this.LIB) t.push(this.LIB[e]);
        return t[Math.random() * t.length >> 0]
    }, t.getPlotByNpcInteract = function (e, i) {
        var o = t.LIB_PLOT[e];
        if (o) {
            if (0 == i) return o.n0;
            if (2 == i) return o.n1
        }
        return null
    }, t.getPlotAfterActState = function (e, i) {
        var o = t.LIB_PLOT[e];
        if (o) {
            if (0 == i) return o.recive;
            if (2 == i) return o.comp;
            if (3 == i) return o.commit
        }
        return null
    }, t
}();
__reflect(CFG_Quest.prototype, "CFG_Quest");
var CFG_Recharge = function () {
    function t() {}
    return t.getCfgByID = function (t) {
        return Config.getConfig(recharge_200).get(t)
    }, t
}();
__reflect(CFG_Recharge.prototype, "CFG_Recharge");
var CFG_SEVENLOGIN = function () {
    function t() {}
    return t
}();
__reflect(CFG_SEVENLOGIN.prototype, "CFG_SEVENLOGIN");
var CFG_SHOUCHONG = function () {
    function t() {}
    return t
}();
__reflect(CFG_SHOUCHONG.prototype, "CFG_SHOUCHONG");
var CFG_Shuang11_Emissary = function () {
    function t() {}
    return t
}();
__reflect(CFG_Shuang11_Emissary.prototype, "CFG_Shuang11_Emissary");
var CFG_Shuang11XFPH = function () {
    function t() {}
    return t
}();
__reflect(CFG_Shuang11XFPH.prototype, "CFG_Shuang11XFPH");
var CFG_Skill = function () {
    function t() {}
    return t.getRelateIndex = function (t) {
        var e = this.LIB[t],
            i = -1;
        if (e) {
            var o = this.LIBRELATE[e.g];
            if (o) return o.ids.indexOf(t)
        }
        return i
    }, t.isRelate = function (t, e) {
        var i = this.LIB[t],
            o = !1;
        if (i) {
            var n = this.LIBRELATE[i.g];
            n && (o = -1 != n.ids.indexOf(t) && -1 != n.ids.indexOf(e))
        }
        return o
    }, t
}();
__reflect(CFG_Skill.prototype, "CFG_Skill");
var CFG_SMDL = function () {
    function t() {}
    return t
}();
__reflect(CFG_SMDL.prototype, "CFG_SMDL");
var CFG_STORE_shuang11 = function () {
    function t() {}
    return t
}();
__reflect(CFG_STORE_shuang11.prototype, "CFG_STORE_shuang11");
var CFG_STORE = function () {
    function t() {}
    return t.getStoreItemCFG = function (t) {
        var e = this.LIB;
        for (var i in e) {
            var o = e[i];
            if (o.wpid[1] == t) return o
        }
        return null
    }, t.priorChosen = function (t, e) {
        void 0 === e && (e = 1);
        var i, o = this.LIB;
        for (var n in o) {
            var a = o[n];
            if (a.wpid[1] == t) {
                var s = parseInt(a.id.toString().charAt(0));
                if (1 != s) {
                    var r = GameGlobal.modelRole.voMine.bYuanbao;
                    r >= a.xh[2] && !VoShangCheng.isOverXgById(a.id) && (i = a);
                    break
                }
                if (i = a, 1 != e) break
            }
        }
        return i
    }, t.getCost = function (t) {
        var e = this.getStoreItemCFG(t);
        return e ? e.xh : null
    }, t
}();
__reflect(CFG_STORE.prototype, "CFG_STORE");
var CFG_SYT = function () {
    function t() {}
    return t
}();
__reflect(CFG_SYT.prototype, "CFG_SYT");
var CFG_Target = function () {
    function t() {}
    return t
}();
__reflect(CFG_Target.prototype, "CFG_Target");
var CFG_TeachersDay = function () {
    function t() {}
    return t
}();
__reflect(CFG_TeachersDay.prototype, "CFG_TeachersDay");
var CFG_Title = function () {
    function t() {}
    return t.getRndCFG = function () {
        var t = this.LIB[this.RNDKEY[this.RNDKEY.length * Math.random() >> 0]];
        return t
    }, t.getTItem = function (t) {
        var e = this.LIB[t];
        return void 0 == e.$item && ("0" != e.item ? e.$item = Util.parseIntStr(e.item) : e.$item = 0), e.$item
    }, t.RNDKEY = [1001, 1002, 1003, 2001, 3001, 6001, 6002], t
}();
__reflect(CFG_Title.prototype, "CFG_Title");
var CFG_TuJian = function () {
    function t() {}
    return t.getTJName = function (t) {
        var e = this.LIB_TJ[t];
        return e.n
    }, t.getIcoUrl = function (t) {
        var e, i = this.LIB_TJ[t];
        return 2 == i.t ? e = CFG_Pet.PETLIB[i.id].icon : 3 == i.t && (e = CFG_HUOBAN1.LIB[i.id].icon), IconUtil.getIconUrl(e)
    }, t.getEnableAttrArr = function (t) {
        var e = this.LIB_TJ[t];
        return e.$jhjc || (e.$jhjc = Util.strToIntArr(e.jhjc)), e.$jhjc
    }, t.getTJSXAttrArr = function (e) {
        var i = t.LIB_SX[e];
        return void 0 == i.$_sjattr && ("0" == i.sjattr ? i.$_sjattr = 0 : i.$_sjattr = Util.strToIntArr(i.sjattr)), i.$_sjattr
    }, t.getTJPYAttrArr = function (e) {
        var i = t.LIB_SX[e];
        return i.$_pysx || (i.$_pysx = Util.strToIntArr(i.pysx)), i.$_pysx
    }, t
}();
__reflect(CFG_TuJian.prototype, "CFG_TuJian");
var CFG_VIPBOSS = function () {
    function t() {}
    return t
}();
__reflect(CFG_VIPBOSS.prototype, "CFG_VIPBOSS");
var CFG_VipRiChangLiBao = function () {
    function t() {}
    return t
}();
__reflect(CFG_VipRiChangLiBao.prototype, "CFG_VipRiChangLiBao");
var CFG_WDTD = function () {
    function t() {}
    return t
}();
__reflect(CFG_WDTD.prototype, "CFG_WDTD");
var CFG_WEEKENDER = function () {
    function t() {}
    return t
}();
__reflect(CFG_WEEKENDER.prototype, "CFG_WEEKENDER");
var CFG_WYBQ = function () {
    function t() {}
    return t
}();
__reflect(CFG_WYBQ.prototype, "CFG_WYBQ");
var CFG_XDComposite = function () {
    function t() {}
    return t
}();
__reflect(CFG_XDComposite.prototype, "CFG_XDComposite");
var CFG_XDDZ = function () {
    function t() {}
    return t
}();
__reflect(CFG_XDDZ.prototype, "CFG_XDDZ");
var CFG_XiaoFeiAct = function () {
    function t() {}
    return t.getZPCostArr = function (t) {
        var e = this.LIB_ZPCOST[t];
        return 1 == t ? (e.$_xh2 || (e.$_xh2 = Util.parseIntStr(e.xh2)), e.$_xh2) : 2 == t ? GameGlobal.modelXiaoFeiAct.bjcsOne > 0 ? (e.$_xh3 || (e.xh3 ? e.$_xh3 = Util.parseIntStr(e.xh3) : e.$_xh3 = Util.parseIntStr(e.xh2)), e.$_xh3) : (e.$_xh2 || (e.$_xh2 = Util.parseIntStr(e.xh2)), e.$_xh2) : 3 == t ? GameGlobal.modelXiaoFeiAct.bjcsTen > 0 ? (e.$_xh3 || (e.xh3 ? e.$_xh3 = Util.parseIntStr(e.xh3) : e.$_xh3 = Util.parseIntStr(e.xh2)), e.$_xh3) : (e.$_xh2 || (e.$_xh2 = Util.parseIntStr(e.xh2)), e.$_xh2) : void 0
    }, t.getZPCostArrS11KH = function (t) {
        var e = this.LIB_ZCZPCOST[t];
        return e.$_xh2 || (e.$_xh2 = Util.parseIntStr(e.xh2)), e.$_xh2
    }, t
}();
__reflect(CFG_XiaoFeiAct.prototype, "CFG_XiaoFeiAct");
var CFG_XITONG = function () {
    function t() {}
    return t
}();
__reflect(CFG_XITONG.prototype, "CFG_XITONG");
var CFG_XIULIANJY = function () {
    function t() {}
    return t
}();
__reflect(CFG_XIULIANJY.prototype, "CFG_XIULIANJY");
var CFG_XKSD = function () {
    function t() {}
    return t
}();
__reflect(CFG_XKSD.prototype, "CFG_XKSD");
var CFG_XSBDJN = function () {
    function t() {}
    return t
}();
__reflect(CFG_XSBDJN.prototype, "CFG_XSBDJN");
var CFG_XSFB = function () {
    function t() {}
    return t
}();
__reflect(CFG_XSFB.prototype, "CFG_XSFB");
var CFG_YAOQIANSHUJL = function () {
    function t() {}
    return t
}();
__reflect(CFG_YAOQIANSHUJL.prototype, "CFG_YAOQIANSHUJL");
var CFG_YAOQIANSHUXH = function () {
    function t() {}
    return t
}();
__reflect(CFG_YAOQIANSHUXH.prototype, "CFG_YAOQIANSHUXH");
var CFG_YAOQIANSHUXH2 = function () {
    function t() {}
    return t
}();
__reflect(CFG_YAOQIANSHUXH2.prototype, "CFG_YAOQIANSHUXH2");
var CFG_YC = function () {
    function t() {}
    return t
}();
__reflect(CFG_YC.prototype, "CFG_YC");
var CFG_YYFD = function () {
    function t() {}
    return t
}();
__reflect(CFG_YYFD.prototype, "CFG_YYFD");
var CFG_ZHAOMU = function () {
    function t() {}
    return t.getZkNum = function () {
        var t = this.LIB[1];
        return t ? t.zk : 0
    }, t
}();
__reflect(CFG_ZHAOMU.prototype, "CFG_ZHAOMU");
var CFG_zlgexiaohao_168 = function () {
    function t() {}
    return t
}();
__reflect(CFG_zlgexiaohao_168.prototype, "CFG_zlgexiaohao_168");
var CFG_ZTFS = function () {
    function t() {}
    return t
}();
__reflect(CFG_ZTFS.prototype, "CFG_ZTFS");
var CFG_zuduifuben_131 = function () {
    function t() {}
    return t
}();
__reflect(CFG_zuduifuben_131.prototype, "CFG_zuduifuben_131");
var CFG_ZYSL = function () {
    function t() {}
    return t
}();
__reflect(CFG_ZYSL.prototype, "CFG_ZYSL");
var CFG = function () {
    function t() {}
    return t.init = function () {
        this.mapping()
    }, t.mapping = function () {
        CFG_COMMOND.LIB_WXSCJL = Config.getConfig(tjxcx_322).configMap, CFG_COMMOND.LIB_WXFXJL = Config.getConfig(scfx_322).configMap, CFG_COMMOND.LIBSHARE = Config.getConfig(leijihudp_317).configMap, CFG_ATTR.LIB = Config.getConfig(attr_115).configMap, CFG_ATTR.LIB_CLHQ = Config.getConfig(cailiaohuoqu).configMap, CFG_Battle.LIB = Config.getConfig(battleType_118).configMap, CFG_Hero.LIB = Config.getConfig(shuxing_112).configMap, CFG_Skill.LIB = Config.getConfig(skill_111).configMap, CFG_Skill.LIBUPCOST = Config.getConfig(jinengqianghua_509).configMap, CFG_Skill.LIBRELATE = Config.getConfig(skillRelate_118).configMap, CFG_XIULIANJY.LIB = Config.getConfig(xiulianlv_146).configMap, CFG_Buff.LIB = Config.getConfig(buff_102).configMap, CFG_Quest.LIB = Config.getConfig(xinshourenwu_157).configMap, CFG_Quest.LIBICOPROG = Config.getConfig(xinshourenwuico_157).configMap, CFG_Quest.LIB_NPC = Config.getConfig(qNpc).configMap, CFG_Quest.LIB_PLOT = Config.getConfig(xsplot).configMap, CFG_Quest.LIB_GUIDETEXT = Config.getConfig(xinshouyindaowenzi_365).configMap, CFG_GuanQia.LIB = Config.getConfig(guanqia119).configMap, CFG_GuanQia.LIBCHAPTER = Config.getConfig(guanqiaChapter119).configMap, CFG_Item.LIB = Config.getConfig(item_106).configMap, CFG_Equip.LIB = Config.getConfig(equip_120).configMap, CFG_Equip.LIBREDEQ = Config.getConfig(hzhecheng_506).configMap, CFG_Equip.LIB_EQREMAKE = Config.getConfig(hongzhuangtz_336).configMap, CFG_Equip.LIB_EQREMAKECOST = Config.getConfig(taozhuanggaizhaoxh_336).configMap, CFG_Equip.LIB_CLHECHENG = Config.getConfig(hecheng_931).configMap, CFG_CZDH.LIB = Config.getConfig(czduihuan_105).configMap, CFG_CZDH.LIB2 = Config.getConfig(czfenjie_117).configMap, CFG_CZDH.parse(), CFG_MAP.LIB = Config.getConfig(map_107).configMap, CFG_DUANZAO.LIB_QIANGHUA = Config.getConfig(qianghua_114).configMap, CFG_DUANZAO.LIB_JINGLIAN = Config.getConfig(jinglian_113).configMap, CFG_DUANZAO.LIB_BAOSHI = Config.getConfig(baoshi_103).configMap, CFG_DUANZAO.LIB_SHENGXING = Config.getConfig(shengxing_171).configMap, CFG_DUANZAO.LIB_MASTER_QHJL = Config.getConfig(dashi_132).configMap, CFG_DUANZAO.LIB_MASTER_BAOSHI = Config.getConfig(bsdashi_133).configMap, CFG_DUANZAO.LIB_MASTER_SHENGXING = Config.getConfig(sxdashi_182).configMap, CFG_MONSTER.LIB = Config.getConfig(monster_307).configMap, CFG_MOD.LIB = Config.getConfig(mod_308).configMap, CFG_HUOBAN1.LIB = Config.getConfig(huoban_108).configMap, CFG_HUOBAN1.LIB2 = Config.getConfig(shengxin_165).configMap, CFG_HUOBAN1.LIB3 = Config.getConfig(fuwenjichushuxing_610).configMap, CFG_HUOBAN1.LIB4 = Config.getConfig(fuwenfujiashuxing_611).configMap, CFG_HUOBAN1.LIB5 = Config.getConfig(fuwenteshushuxing_612).configMap, CFG_HUOBAN1.LIB6 = Config.getConfig(teshushuxingqianghua_613).configMap, CFG_HUOBAN1.LIB7 = Config.getConfig(jichushuxingqianghua_614).configMap, CFG_HUOBAN1.LIB8 = Config.getConfig(fuwenjikaifanglv_616).configMap, CFG_HUOBAN2.LIB = Config.getConfig(huobanzf_109).configMap, CFG_HUOBAN2.LIB2 = Config.getConfig(hbzfjihuo_111).configMap, CFG_HUOBAN3.LIB = Config.getConfig(hbzhuangbei_110).configMap, CFG_ZHAOMU.LIB1 = Config.getConfig(huobansuipian_164).configMap, CFG_EMAIL.LIB = Config.getConfig(youjianbiao_201).configMap, CFG_JJC1.LIB = Config.getConfig(jiqiren_134).configMap, CFG_JJC2.LIB = Config.getConfig(jjcjiangli_135).configMap, CFG_JJC3.LIB = Config.getConfig(jjshangdian_136).configMap, CFG_JJC1.LIBSHILIAN = Config.getConfig(slfbkaiqi_170).configMap, CFG_COMMOND.LIB = Config.getConfig(xitongkaiqi_116).configMap, CFG_COMMOND.init(), CFG_COMMOND.LIBXTXZ = Config.getConfig(xitongxianzhi_116).configMap, CFG_COMMOND.LIBWFSM = Config.getConfig(wanfasm_116).configMap, CFG_SYT.LIB = Config.getConfig(suoyaota_139).configMap, CFG_SYT.LIB_FENGMOLU = Config.getConfig(fengmolu_141).configMap, CFG_SYT.LIB_SUOYAOTA = Config.getConfig(suoyaotaxh_333).configMap, CFG_SYT.LIB_FENGMOLU1 = Config.getConfig(fengmoluxh_333).configMap, CFG_CTG.LIB = Config.getConfig(chuangtianguan_138).configMap, CFG_PERSONBOSS.LIB = Config.getConfig(gerenboss_301).configMap, CFG_VIPBOSS.LIB = Config.getConfig(VIPBOSS_301).configMap, CFG_QMBOSS.LIB = Config.getConfig(quanminboss_302).configMap, CFG_FuWenBoss.LIB = Config.getConfig(fuwenboss_318).configMap, CFG_PeiYang.LIB_HORSE = Config.getConfig(zuoqipeiyangbiao_210).configMap, CFG_PeiYang.LIB_HORSESKIN = Config.getConfig(zuoqipifubiao_211).configMap, CFG_PeiYang.LIB_WING = Config.getConfig(chibangpeiyangbiao_214).configMap, CFG_PeiYang.LIB_WINGSKIN = Config.getConfig(chibangpifubiao_215).configMap, CFG_PeiYang.LIB_WEAPON = Config.getConfig(shenbinpeiyangbiao_212).configMap, CFG_PeiYang.LIB_WEAPONSKIN = Config.getConfig(shenbinpifubiao_213).configMap, CFG_PeiYang.LIB_HALO = Config.getConfig(guanghuanpeiyangbiao_319).configMap, CFG_PeiYang.LIB_HALOSKIN = Config.getConfig(guanghuangpifubiao_320).configMap, CFG_PeiYang.LIB_SKINJIHUOLIB = Config.getConfig(chushishuxing_218).configMap, CFG_PeiYang.LIB_SHOULING = Config.getConfig(shoulingpeiyangbiao_510).configMap, CFG_PeiYang.LIB_SHOULINSKIN = Config.getConfig(shoulingpifubiao_511).configMap, CFG_Pet.init(), CFG_Bag.LIB = Config.getConfig(bagkuozhan_104).configMap, CFG_STORE.LIB = Config.getConfig(shangcheng_150).configMap, CFG_STORE.LIB2 = Config.getConfig(zhenlongge_151).configMap, CFG_zlgexiaohao_168.LIB = Config.getConfig(zlgexiaohao_168).configMap, CFG_CLFB.LIB = Config.getConfig(cailiaofuben_137).configMap, CFG_zuduifuben_131.LIB = Config.getConfig(zuduifuben_131).configMap, CFG_dengjilibao_158.LIB = Config.getConfig(dengjilibao_158).configMap, CFG_dengjilibao_158.LIB2 = Config.getConfig(leijiqiandao_163).configMap, CFG_dengjilibao_158.LIB3 = Config.getConfig(vipqiandao_167).configMap, CFG_dengjilibao_158.LIB4 = Config.getConfig(meiriqiandao_162).configMap, CFG_dengjilibao_158.LIB5 = Config.getConfig(xymrlq_356).configMap, VoVip.LIB = Config.getConfig(vip_155).configMap, CFG_Recharge.LIB = Config.getConfig(recharge_200).configMap, CFG_ZHAOMU.LIB = Config.getConfig(zhaomu_150).configMap, CFG_SEVENLOGIN.LIB = Config.getConfig(qiridenglu_159).configMap, CFG_YAOQIANSHUXH.LIB = Config.getConfig(yaoqianshuxh_161).configMap, CFG_YAOQIANSHUJL.LIB = Config.getConfig(yaoqianshujl_162).configMap, CFG_YAOQIANSHUXH2.LIB = Config.getConfig(yaoqianshuxh_166).configMap, CFG_Title.LIB = Config.getConfig(chenghaoxitong_250).configMap, CFG_Fashion.LIB = Config.getConfig(shizhuangxitong_216).configMap, CFG_MENPAI.LIB1 = Config.getConfig(menpai_405).configMap, CFG_MENPAI.LIB2 = Config.getConfig(mpsx_406).configMap, CFG_MENPAI.LIB3 = Config.getConfig(mpsxjiangli_407).configMap, CFG_MENPAI.LIB4 = Config.getConfig(mpjineng_410).configMap, CFG_MENPAI.LIB5 = Config.getConfig(mpfuben_408).configMap, CFG_MENPAI.LIB6 = Config.getConfig(mpshangdian_412).configMap, CFG_MENPAI.LIB7 = Config.getConfig(mphuoyuedu_413).configMap, CFG_MENPAI.LIB8 = Config.getConfig(mphuoyuerw_414).configMap, CFG_MENPAI.LIB9 = Config.getConfig(mpmrhuoyue_415).configMap, CFG_MENPAI.LIB10 = Config.getConfig(mpboss_416).configMap, CFG_MENPAI.LIB_PERSONMENPAI = Config.getConfig(mppaimingjl_409).configMap, CFG_MENPAI.LIB_JIESUAN = Config.getConfig(mpjiesuanjl_409).configMap, CFG_MENPAI.LIB_MPZJIANZU = Config.getConfig(mppaijianzhu_409).configMap, CFG_gbxs_603.LIB = Config.getConfig(gbxs_603).configMap, CFG_DALIY.LIB1 = Config.getConfig(rclljiangli_350).configMap, CFG_DALIY.LIB2 = Config.getConfig(rcyaoshou_351).configMap, CFG_DALIY.LIB3 = Config.getConfig(yaoshouxj_352).configMap, CFG_Target.LIBDAILYQ = Config.getConfig(renwu_140).configMap, CFG_Target.LIBACHIEQ = Config.getConfig(cj_140).configMap, CFG_Target.LIBACHIEVE = Config.getConfig(chengjiulv_144).configMap, CFG_Target.LIBdAILYAWD = Config.getConfig(cjmrhuoyue_169).configMap, CFG_Target.LIBXIANJIE = Config.getConfig(xianjie_147).configMap, CFG_WDTD.LIB1 = Config.getConfig(wendingtiandao_501).configMap, CFG_WDTD.LIB2 = Config.getConfig(wendingcengji_502).configMap, CFG_WDTD.LIB3 = Config.getConfig(wdtdshangdian_504).configMap, CFG_WDTD.LIB4 = Config.getConfig(tdjl_544).configMap, CFG_HUODONG.LIB = Config.getConfig(gudinghuodong_101).configMap, CFG_HUODONG.LIB2 = Config.getConfig(mrdttiku_605).configMap, CFG_HUODONG.LIB3 = Config.getConfig(meiridati_606).configMap, CFG_HUODONG.LIB4 = Config.getConfig(mrdtpaiming_607).configMap, CFG_SHOUCHONG.LIB1 = Config.getConfig(mrsc_302).configMap, CFG_SHOUCHONG.LIB2 = Config.getConfig(shouchongjiangli_301).configMap, CFG_SHOUCHONG.LIB3 = Config.getConfig(chengzhangjijin_304).configMap, CFG_SHOUCHONG.LIB4 = Config.getConfig(touzifanli_305).configMap, CFG_TuJian.LIB_TJ = Config.getConfig(tujian_180).configMap, CFG_TuJian.LIB_SX = Config.getConfig(tujiansx_180).configMap, CFG_MRSC.LIB = Config.getConfig(mrsc_302).configMap, CFG_HUODONG.LIB5 = Config.getConfig(jingyandafangsong_330).configMap, CFG_LJXF.LIB = Config.getConfig(leijixiaofei_317).configMap, CFG_CZWAR.LIBPK = Config.getConfig(duizhanhuodong_101).configMap, CFG_CZWAR.LIB1 = Config.getConfig(czjiangli_507).configMap, CFG_CZWAR.LIB2 = Config.getConfig(cztzjiangli_507).configMap, CFG_CZWAR.LIB3 = Config.getConfig(czzdguaiwu_507).configMap, CFG_FABAO.LIB1 = Config.getConfig(fbjh_401).configMap, CFG_FABAO.LIB3 = Config.getConfig(fbew_404).configMap, CFG_FABAO.LIB4 = Config.getConfig(fbjl_402).configMap, CFG_Pet.GIFTLIB1 = Config.getConfig(lstf_512).configMap, CFG_Pet.GIFTLIB2 = Config.getConfig(lstfjn_512).configMap, CFG_Pet.GIFTLIB4 = Config.getConfig(lstfdhq_512).configMap, CFG_Pet.GIFTLIB5 = Config.getConfig(lstfdfj_512).configMap, CFG_XSFB.ZSXTLIB1 = Config.getConfig(xsfb_329).configMap, CFG_XSFB.ZSXTLIB2 = Config.getConfig(xsxt_328).configMap, CFG_XSFB.NDLIB1 = Config.getConfig(xianshifubennvdi_487).configMap, CFG_XSFB.NDLIB2 = Config.getConfig(xianshinvdi_489).configMap, CFG_XSFB.SHLIB1 = Config.getConfig(xianshifubenshaohao_488).configMap, CFG_XSFB.SHLIB2 = Config.getConfig(xianshishaohao_490).configMap, CFG_HJSD.LIB1 = Config.getConfig(sdhl_669).configMap, CFG_HJSD.LIB2 = Config.getConfig(sdry_666).configMap, CFG_HJSD.LIB3 = Config.getConfig(sdjl_667).configMap, CFG_HJSD.LIB4 = Config.getConfig(sdbz_668).configMap, CFG_HJSD.LIB5 = Config.getConfig(sdcz_670).configMap, CFG_WEEKENDER.LIB1 = Config.getConfig(zhoumolibao_611).configMap, CFG_WEEKENDER.LIB2 = Config.getConfig(zmljcz_612).configMap, CFG_QiXiYouNi.LIB = Config.getConfig(qxyn_718).configMap, CFG_QiXiYouNi.LIB1 = Config.getConfig(qixihaorenkapaiming_798).configMap, CFG_GoodFeel.LIB1 = Config.getConfig(qmdjl_777).configMap, CFG_GoodFeel.LIB2 = Config.getConfig(qmdrwjl_778).configMap, CFG_GoodFeel.LIB3 = Config.getConfig(haoyoujineng_779).configMap, CFG_Act.LIB_Act = Config.getConfig(huodongc_116).configMap, CFG_Act.LIB_ActIco = Config.getConfig(hdico_116).configMap, CFG_Act.LIB_ActLeiJiCZ = Config.getConfig(kaifuchongzhi_315).configMap, CFG_Act.LIB_ZheKouShop = Config.getConfig(kaifuzhekou_314).configMap, CFG_Act.LIB_ShouChongTG = Config.getConfig(shouchongtuangou_313).configMap, CFG_Act.LIB_QuanMinJJ = Config.getConfig(kaifujinjie_312).configMap, CFG_Act.LIB_ActGuanQia = Config.getConfig(kaifuzhuxian_311).configMap, CFG_Act.LIB_QuanMinCJ = Config.getConfig(quanminchongji_310).configMap, CFG_Act.LIB_ZhuTiAct = Config.getConfig(kaifuzhuti_308).configMap, CFG_Act.LIB_ZhuTiActItem = Config.getConfig(kaifuztjl_309).configMap, CFG_Act.LIB_ActPHItem = Config.getConfig(kaifuphjl_307).configMap, CFG_Act.LIB_ActPH = Config.getConfig(kaifu_306).configMap, CFG_Act.LIB_DanBiCZ = Config.getConfig(danbichongzhihuikui_323).configMap, CFG_Act.LIB_MRHL = Config.getConfig(mrhl_322).configMap, CFG_XiaoFeiAct.LIB_ZPJLXS = Config.getConfig(zhuanpanzs_316).configMap, CFG_XiaoFeiAct.LIB_ZPCOST = Config.getConfig(zhuanpanxh_316).configMap, CFG_XiaoFeiAct.LIB_ZPJL = Config.getConfig(zhuanpanjl_316).configMap, CFG_FuWenRoll.LIB_ZPJLXS = Config.getConfig(fwzhuanpanzs_321).configMap, CFG_FuWenRoll.LIB_ZPCOST = Config.getConfig(fwzhuanpanxh_321).configMap, CFG_FuWenRoll.LIB_ZPJL = Config.getConfig(fwzhuanpanjl_321).configMap, CFG_PeiYang.LIB_ZHISHENG = Config.getConfig(zsyj_322).configMap, CFG_VipRiChangLiBao.LIB = Config.getConfig(viprichanglibao_324).configMap, CFG_SMDL.LIB = Config.getConfig(smrw_001).configMap, CFG_Act.LIB_ACTHFDL = Config.getConfig(hfdl_486).configMap, CFG_Act.LIB_ActHF_CBMAP = Config.getConfig(hfcbyjmap_481).configMap, CFG_Act.LIB_ActHF_CB = Config.getConfig(hfcbyj_481).configMap, CFG_Act.LIB_ActHF_JJHLMAP = Config.getConfig(hfjjhlmap_482).configMap, CFG_Act.LIB_ActHF_JJHL = Config.getConfig(hfjjhl_482).configMap, CFG_Act.LIB_ActHF_LJCZ = Config.getConfig(hfljcz_484).configMap, CFG_Act.LIB_ACTHF_Shop = Config.getConfig(hfzksd_485).configMap, CFG_Act.LIB_ACTHF_TZPLAN = Config.getConfig(hftz_480).configMap, CFG_ZTFS.LIB = Config.getConfig(zhutianfengshen_508).configMap, CFG_ZTFS.LIB2 = Config.getConfig(ztczxiaohao_508).configMap, CFG_ZTFS.LIB3 = Config.getConfig(ztfsshangdian_508).configMap, CFG_XDDZ.LIB2 = Config.getConfig(cztzjiangli_326).configMap, CFG_XDDZ.LIB3 = Config.getConfig(xddzyz_327).configMap, CFG_DAYDAYFL.LIB1 = Config.getConfig(ttfl_610).configMap, CFG_DAYDAYFL.LIB2 = Config.getConfig(ttfljl_611).configMap, CFG_HuobanJX.LIB1 = Config.getConfig(xsjx_609).configMap, CFG_HuobanJX.LIB2 = Config.getConfig(xsyj_610).configMap, CFG_Param.LIB = Config.getConfig(canshu_143).configMap, CFG_XDComposite.LIB = Config.getConfig(xiandingbiao_988).configMap, CFG_TeachersDay.LIB1 = Config.getConfig(jiaoshijiejiangli_910).configMap, CFG_TeachersDay.LIB2 = Config.getConfig(jsjnj_914).configMap, CFG_TeachersDay.LIB3 = Config.getConfig(jsjqf_913).configMap, CFG_TeachersDay.LIB4 = Config.getConfig(jiaoshijiezengli_912).configMap, CFG_TeachersDay.LIB5 = Config.getConfig(jrqd_910).configMap, CFG_WYBQ.LIB_WYQB = Config.getConfig(wybq_518).configMap, CFG_WYBQ.LIB_WYZY = Config.getConfig(wyzy_517).configMap, CFG_MidFestival.LIB_MIDFESTBOSS = Config.getConfig(jieriboss_924).configMap, CFG_MidFestival.LIB_MIDFESTBOSSAD = Config.getConfig(zqqfjl_928).configMap, CFG_MidFestival.LIB_RABBIT = Config.getConfig(zqzt_926).configMap, CFG_MidFestival.LIB_RABBITJY = Config.getConfig(zqztjl_925).configMap, CFG_MidFestival.LIB_LB = Config.getConfig(zqlb_927).configMap, CFG_HYDT.LIB = Config.getConfig(hydt_876).configMap, CFG_NationalDay.LIB = Config.getConfig(gqmysy_106).configMap, CFG_NationalDay.LIB1 = Config.getConfig(gqyykpm_101).configMap, CFG_NationalDay.LIB2 = Config.getConfig(gqqd_103).configMap, CFG_NationalDay.LIB3 = Config.getConfig(gqbz_111).configMap, CFG_NationalDay.LIB4 = Config.getConfig(gqczxl_110).configMap, CFG_CYDH.LIB = Config.getConfig(cyjl_817).configMap, CFG_XKSD.LIB1 = Config.getConfig(xkshendian_560).configMap, CFG_XSBDJN.LIB = Config.getConfig(xsbdjn_690).configMap, CFG_YYFD.LIB = Config.getConfig(yyfd_555).configMap, CFG_STORE_shuang11.LIB = Config.getConfig(ssysc_125).configMap, CFG_Shuang11XFPH.LIB = Config.getConfig(ssyphjl_126).configMap, CFG_Shuang11XFPH.LIB_MRCG = Config.getConfig(ssymrcg_123).configMap, CFG_Shuang11_Emissary.LIB = Config.getConfig(ssyjrsz_124).configMap, CFG_XiaoFeiAct.LIB_LJCZ = Config.getConfig(ssyljcz_217).configMap, CFG_BuyOneGiveOne.LIB = Config.getConfig(gqmysy_106).configMap, CFG_BuyOneGiveOne.BigAwardLib = Config.getConfig(mysydj_148).configMap, CFG_ZYSL.LIB = Config.getConfig(zhiyousongli_318).configMap, CFG_External.LIB_BASIC = Config.getConfig(kjmrlb_358).configMap, CFG_External.LIB_VIP = Config.getConfig(viptq_357).configMap, CFG_External.LIB_TODESK = Config.getConfig(scyl_356).configMap, CFG_MRSC.LIB_SC5BEI = Config.getConfig(scwbjl_555).configMap, CFG_XiaoFeiAct.LIB_ZCZPJLXS = Config.getConfig(zcjbzs_214).configMap, CFG_XiaoFeiAct.LIB_ZCZPCOST = Config.getConfig(zcjbxh_213).configMap, CFG_XiaoFeiAct.LIB_ZCZPJL = Config.getConfig(zcjbjl_212).configMap
    }, t
}();
__reflect(CFG.prototype, "CFG");
var STD_ATTR = function () {
    function t() {}
    return Object.defineProperty(t, "dic", {
        get: function () {
            return Config.getConfig(attr_115)
        },
        enumerable: !0,
        configurable: !0
    }), t
}();
__reflect(STD_ATTR.prototype, "STD_ATTR");
var STD_FWord = function () {
    function t() {}
    return Object.defineProperty(t, "awardsArr", {
        get: function () {
            if (!t._awardsArr) {
                t._awardsArr = [];
                for (var e = Config.getConfig(fRank_771), i = e.values, o = 0, n = i.length; n > o; o++) {
                    var a = new Award.RankAwardData;
                    a.id = i[o].id, a.rank = i[o].rank, a.awards = i[o].reward, t._awardsArr.push(a)
                }
            }
            return t._awardsArr
        },
        enumerable: !0,
        configurable: !0
    }), t
}();
__reflect(STD_FWord.prototype, "STD_FWord");
var STD_OldFriend = function () {
    function t() {}
    return t.getCfgByQD = function (t) {
        for (var e = Config.getConfig(returnPush_100), i = e.values, o = 0, n = i.length; n > o; o++)
            if (i[o].channel == t) return i[o];
        return egret.error("returnPush_100表没有id:" + t), null
    }, t
}();
__reflect(STD_OldFriend.prototype, "STD_OldFriend");
var AssetAdapter = function () {
    function t() {}
    return t.prototype.getAsset = function (t, e, i) {
        function o(o) {
            e.call(i, o, t)
        }
        if (RES.hasRes(t)) {
            var n = RES.getRes(t);
            n ? o(n) : RES.getResAsync(t, o, this)
        } else RES.getResByUrl(t, o, this, RES.ResourceItem.TYPE_IMAGE)
    }, t
}();
__reflect(AssetAdapter.prototype, "AssetAdapter", ["eui.IAssetAdapter"]);
var BaseBytes = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.writeLong = function (t) {
        t = parseInt(t.toString(), 10), this.writeDouble(t)
    }, e.prototype.readLong = function () {
        var e = t.prototype.readDouble.call(this);
        return e
    }, e.prototype.readFmt = function (t, e) {
        void 0 === e && (e = null), e || (e = []);
        for (var i = 0; i < t.length; i++) {
            var o = t[i];
            if ("B" == o) e[i] = this.readByte();
            else if ("I" == o) e[i] = this.readInt();
            else if ("L" == o) e[i] = this.readLong();
            else if ("S" == o) e[i] = this.readShort();
            else if ("U" == o) e[i] = this.readUTF();
            else if ("J" == o) e[i] = JSON.parse(this.readUTF());
            else
                for (var n = this.readShort(), a = e[i] = [], s = 0; n > s; s++) a[s] = this.readFmt(o)
        }
        return e
    }, e
}(egret.ByteArray);
__reflect(BaseBytes.prototype, "BaseBytes");
var SocketEvent = function () {
    function t() {}
    return t.pre = "SOCKET_EVENT_", t.ON_CONNECT = t.pre + "ON_CONNECT", t
}();
__reflect(SocketEvent.prototype, "SocketEvent");
var WebSocketMgr = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.reqestMap = {}, e.handleMap = {}, e.requestID = 1, e.socketCache = new egret.ByteArray, e.isDebug = 1, e.ba = new egret.ByteArray, e
    }
    return __extends(e, t), e.prototype.init = function () {
        this.webSocket || (this.webSocket = new egret.WebSocket, this.webSocket.addEventListener(egret.Event.CONNECT, this.onConnect, this), this.webSocket.addEventListener(egret.IOErrorEvent.IO_ERROR, this.onError, this), this.webSocket.addEventListener(egret.ProgressEvent.SOCKET_DATA, this.onData, this), this.webSocket.addEventListener(egret.Event.CLOSE, this.onClose, this), this.webSocket.type = egret.WebSocket.TYPE_BINARY, this.bodyBytes = new BaseBytes)
    }, e.prototype.delSocket = function () {
        this.webSocket && (this.webSocket.removeEventListener(egret.Event.CONNECT, this.onConnect, this), this.webSocket.removeEventListener(egret.IOErrorEvent.IO_ERROR, this.onError, this), this.webSocket.removeEventListener(egret.ProgressEvent.SOCKET_DATA, this.onData, this), this.webSocket.removeEventListener(egret.Event.CLOSE, this.onClose, this), this.webSocket = null)
    }, e.prototype.connect = function (t, e) {
        var i = document.location.protocol.indexOf("https");
        if (t.indexOf("wss:") >= 0) this.webSocket.connectByUrl(t);
        else if (-1 != i) {
            var o = "wss://" + t + ":" + e + "/";
            console.log("connectWSS:" + o), this.webSocket.connectByUrl(o)
        } else this.webSocket.connect(t, e)
    }, e.prototype.onConnect = function (t) {
        this.connectCallBack && this.connectCallBack(this, t), this.notify(egret.Event.CONNECT), EventCenter.sendMsg(SocketEvent.ON_CONNECT)
    }, e.prototype.onError = function (t) {
        this.errorCallBack && this.errorCallBack(this, t)
    }, e.prototype.onClose = function (t) {
        this.notify(t.type)
    }, e.prototype.onData = function (t) {
        t.target.readBytes(this.socketCache), this.doMsg()
    }, e.prototype.doMsg = function () {
        var t = this.bodyBytes,
            e = this.socketCache,
            i = e.bytesAvailable;
        if (i >= 2) {
            var o = e.readUnsignedShort(),
                n = e.bytesAvailable;
            if (n >= o - 2) {
                t.clear(), t.position = 0, e.readBytes(t, 0, o - 2);
                var a = t.readUnsignedShort();
                this.isProtocalIdPrint(a) && console.log("server cmd:" + a);
                var s = this.handleMap[a];
                s && s.hand(s.t, t)
            }
        }
        e.clear()
    }, e.prototype.isProtocalIdPrint = function (t) {
        return 120 == t || 1102 == t || 504 == t || 502 == t || 252 == t ? !1 : !0
    }, e.prototype.testObj = function (t, e) {
        this.testData(t, ["U", JSON.stringify(e)])
    }, e.prototype.testData = function (t, e) {
        for (var i = new BaseBytes, o = 0; o < e.length; o += 2) {
            var n = e[o],
                a = e[o + 1];
            "B" == n ? i.writeByte(a) : "S" == n ? i.writeShort(a) : "I" == n ? i.writeInt(a) : "L" == n ? i.writeDouble(a) : "U" == n && i.writeUTF(a)
        }
        i.position = 0, this.testRecive(t, i)
    }, e.prototype.testRecive = function (t, e) {
        var i = this.handleMap[t];
        i && i.hand(i.t, e)
    }, e.prototype.regHand = function (t, e, i) {
        if (this.handleMap[t]) throw "重复注册WEBSOCKET" + t;
        this.handleMap[t] = {
            id: t,
            hand: e,
            t: i
        }
    }, e.prototype.sendCMDBytes = function (t, e) {
        if (this.webSocket.connected) {
            if (WorldSocketMgr.instance.isNet) {
                var i = Model_WorldNet.sendCmd(t, e);
                if (i) return
            }
            console.log("send cmd:" + t);
            var o = this.ba;
            o.clear(), o.writeUnsignedShort(e.length + 4), o.writeUnsignedShort(t), o.writeBytes(e), this.webSocket.writeBytes(o), this.webSocket.flush()
        }
    }, e.prototype.request = function (t, e, i, o) {
        void 0 === o && (o = null);
        var n = this.ba;
        n.clear(), n.writeUnsignedShort(e.length + 4), n.writeUnsignedShort(t), n.writeBytes(e);
        var a = {
            rid: this.requestID,
            cmd: t,
            t: o,
            hand: i
        };
        this.reqestMap[this.requestID] = a, this.webSocket.writeBytes(n), this.webSocket.flush(), this.requestID > 65535 && (this.requestID = 1), this.requestID++
    }, e.prototype.clear = function () {
        this.webSocket.readBytes(this.socketCache), this.socketCache.clear(), this.bodyBytes.clear()
    }, e
}(MsgCenter);
__reflect(WebSocketMgr.prototype, "WebSocketMgr");
var WorldSocketMgr = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.socketCache = new egret.ByteArray, e.ba = new egret.ByteArray, e
    }
    return __extends(e, t), Object.defineProperty(e, "instance", {
        get: function () {
            return e._ins || (e._ins = new e), e._ins
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.connect = function (t, e) {
        this.webSocket || (this.webSocket = new egret.WebSocket, this.webSocket.addEventListener(egret.Event.CONNECT, this.onConnect, this), this.webSocket.addEventListener(egret.IOErrorEvent.IO_ERROR, this.onError, this), this.webSocket.addEventListener(egret.ProgressEvent.SOCKET_DATA, this.onData, this), this.webSocket.addEventListener(egret.Event.CLOSE, this.onClose, this), this.webSocket.type = egret.WebSocket.TYPE_BINARY, this.bodyBytes = new BaseBytes), this.close(!0), console.log("开始链接中央服webSocket"), this._ip = t, this._port = e;
        document.location.protocol.indexOf("https");
        t.indexOf("wss:") >= 0 ? (console.log("connectWSS:" + t), this.webSocket.connectByUrl(t)) : this.webSocket.connect(t, e)
    }, e.prototype.close = function (t) {
        void 0 === t && (t = !1);
        try {
            this.isNet ? this.webSocket.close() : t && this.webSocket && this.webSocket.close()
        } catch (e) {}
    }, Object.defineProperty(e.prototype, "isNet", {
        get: function () {
            return this.webSocket && this.webSocket.connected ? !0 : !1
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onConnect = function (t) {
        console.log("中央服webSocket链接成功"), GameGlobal.layerMgr.close(UIConst.CONNECT_WORLD), GameGlobal.modelWorldNet.CG_Cross_loginCross_2303("123", GameGlobal.modelRole.voMine.id), EventCenter.sendMsg(SocketEvent.ON_CONNECT)
    }, e.prototype.onError = function (t) {
        console.log("中央服webSocket失败"), GameGlobal.layerMgr.close(UIConst.CONNECT_WORLD)
    }, e.prototype.onClose = function (t) {
        console.log("中央服webSocket关闭"), this.webSocket.close(), GameGlobal.layerMgr.close(UIConst.CONNECT_WORLD), this.notify(egret.Event.CLOSE), 4 == GameGlobal.modelWorldNet.type && GameGlobal.mapScene.changeMap(GameGlobal.modelGuanqia.getCurSceneID())
    }, e.prototype.onData = function (t) {
        t.target.readBytes(this.socketCache), this.doMsg()
    }, e.prototype.doMsg = function () {
        for (var t = this.bodyBytes; this.socketCache.bytesAvailable >= 2;) {
            var e = this.socketCache.readUnsignedShort();
            if (!(this.socketCache.bytesAvailable >= e - 2)) {
                this.socketCache.position -= 4;
                break
            }
            t.clear(), e - 2 > 0 && (this.socketCache.readBytes(t, 0, e - 2), t.position = 0);
            var i = t.readUnsignedShort();
            console.log("worldServer cmd:" + i);
            var o = GameGlobal.socketMgr.handleMap[i];
            if (o) {
                try {
                    o.hand(o.t, t)
                } catch (n) {
                    console.error("world-socketError:CMD=" + i)
                }
                var a, s = GameGlobal.socketMgr.request[a];
                if (s) try {
                    o.hand(s.t, t)
                } catch (n) {
                    console.error("world-socketError:REQUEST=" + a)
                }
                this.socketCache.bytesAvailable || this.socketCache.clear()
            } else console.error("unregister:CMD=" + i), this.socketCache.bytesAvailable || this.socketCache.clear()
        }
    }, e.prototype.sendCMDBytes = function (t, e) {
        if (this.isNet && this.webSocket.connected) {
            console.log("sendWorld cmd:" + t);
            var i = this.ba;
            i.clear(), i.writeUnsignedShort(e.length + 4), i.writeUnsignedShort(t), i.writeBytes(e), this.webSocket.writeBytes(i), this.webSocket.flush()
        }
    }, e
}(MsgCenter);
__reflect(WorldSocketMgr.prototype, "WorldSocketMgr");
var ProgressMap = function () {
    function t() {
        this.map = {}
    }
    return t.prototype.add = function (t, e) {
        this.map[t] = e
    }, t
}();
__reflect(ProgressMap.prototype, "ProgressMap");
var LoadConfig = function () {
    function t() {}
    return t.loadConfig = function () {
        return __awaiter(this, void 0, void 0, function () {
            var t = this;
            return __generator(this, function (e) {
                return [2, new Promise(function (e, i) {
                    RES.getResByUrl("resource/config/config", function (t) {
                        JSZip.loadAsync(t).then(function (t) {
                            return t.file("config.json").async("text")
                        }).then(function (t) {
                            var i = JSON.parse(t);
                            Config.init(i), CFG.init(), e()
                        })
                    }, t)
                })]
            })
        })
    }, t.loadGlobalConfig = function () {
        return __awaiter(this, void 0, void 0, function () {
            var t = this;
            return __generator(this, function (e) {
                return [2, new Promise(function (e, i) {
                    t.loadByUrl(GameGlobal.resRoot + AppConfig.global_json_url, function (t) {
                        AppConfig.globalConfig = JSON.parse(t), e()
                    }, t)
                })]
            })
        })
    }, t.loadByUrl = function (t, e, i) {
        var o = new egret.URLRequest(t),
            n = new egret.URLLoader(o);
        n.dataFormat = egret.URLLoaderDataFormat.TEXT, n.once(egret.Event.COMPLETE, function (t) {
            var o = t.target;
            e.call(i, o.data)
        }, this)
    }, t
}();
__reflect(LoadConfig.prototype, "LoadConfig");
var LoadingUI = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.createView(), e
    }
    return __extends(e, t), e.prototype.createView = function () {
        this.textField = new egret.TextField, this.addChild(this.textField), this.textField.y = 300, this.textField.width = 480, this.textField.height = 100, this.textField.textAlign = "center"
    }, e.prototype.setProgress = function (t, e) {
        this.textField.text = "Loading..." + t + "/" + e
    }, e
}(egret.Sprite);
__reflect(LoadingUI.prototype, "LoadingUI");
var LayerManager = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._regMap = {}, e._views = {}, e._opens = [], e._hideRestrict = {}, e._classNameIdMap = {}, e._logicMap = {}, e
    }
    return __extends(e, t), e.prototype.init = function (t) {
        var e = this;
        e.GameMain = t, e.UI_floorUI = new egret.Sprite, e.UI_MainBottom = new egret.Sprite, e.UI_MainMiddle = new egret.Sprite, e.UI_Main = new egret.Sprite, e.UI_Message = new egret.Sprite, e.UI_Tips = new egret.Sprite, t.addChild(e.UI_floorUI), t.addChild(e.UI_MainBottom), t.addChild(e.UI_MainMiddle), t.addChild(e.UI_Main), t.addChild(e.UI_Message), t.addChild(e.UI_Tips), this.addMsgListeners()
    }, e.prototype.addMsgListeners = function () {
        t.prototype.addMsgListeners.call(this), this.on(ViewEvent.OPEN_VIEW, this.onOpenViewHandler, this), this.on(ViewEvent.CLOSE_VIEW, this.onCloseViewHandler, this)
    }, e.prototype.removeEventListeners = function () {
        t.prototype.removeMsgListeners.call(this), this.off(ViewEvent.OPEN_VIEW, this.onOpenViewHandler), this.off(ViewEvent.CLOSE_VIEW, this.onCloseViewHandler)
    }, e.prototype.onOpenViewHandler = function (t) {
        var e = getClassName(t.viewClass),
            i = this._classNameIdMap[e];
        this.open(i, t.data)
    }, e.prototype.onCloseViewHandler = function (t) {
        var e = getClassName(t.viewClass),
            i = this._classNameIdMap[e];
        this.close(i)
    }, e.prototype.setVisible = function (t, e) {
        var i = this.getView(t);
        i && (i.visible = e)
    }, e.prototype.reg = function (t, e, i, o, n, a) {
        void 0 === i && (i = null), void 0 === o && (o = 0), void 0 === n && (n = 0), void 0 === a && (a = null), i || (i = this.UI_Main), this._regMap[t] = {
            id: t,
            clz: e,
            layer: i,
            regRes: a,
            loading: 0,
            uitype: o,
            showUIBG: n
        };
        var s = getClassName(e);
        this._classNameIdMap[s] = t
    }, e.prototype.regView = function (t, e, i, o, n) {
        void 0 === e && (e = null), void 0 === i && (i = 0), void 0 === o && (o = 0), void 0 === n && (n = null);
        var a = egret.getQualifiedClassName(t);
        e || (e = this.UI_Main), this._regMap[a] = {
            id: a,
            clz: t,
            layer: e,
            regRes: n,
            loading: 0,
            uitype: i,
            showUIBG: o
        };
        var s = getClassName(t);
        this._classNameIdMap[s] = a
    }, e.prototype.open = function (t, e) {
        void 0 === e && (e = null);
        var i = this._views[t],
            o = this._regMap[t];
        if (o) {
            if (o.open = !0, o.openArg = e, !i) {
                var n = o.regRes;
                if (n && o.loading) return;
                if (n && n.length) {
                    var a = n.shift();
                    return -1 != a.indexOf(".exml") ? EXML.load(a, this.onLoadExml, o) : a.indexOf(".json") >= 0 ? RES.getResByUrl(a, this.onregresloaded, o, RES.ResourceItem.TYPE_JSON) : RES.getResByUrl(a, this.onregresloaded, o), void o.loading++
                }
                i = new o.clz, i.uiparent = o.layer, i._uitype_ = o.uitype, i.id = t, this._views[t] = i
            }
            if (-1 == this._opens.indexOf(i)) {
                this._opens.push(i);
                var s = this._hideRestrict[t];
                if (s && s.length ? i.$setVisible(!1) : i.$setVisible(!0), o.showUIBG && (o.hide ? ViewUIBG.hideBG2(o.id) : ViewUIBG.showBG2(o.id)), i.logicLayer) {
                    var r = this._logicMap[i.logicLayer];
                    r && r != t && this.close(r)
                }
                i.uiparent.addChild(i), i.onOpen(e), i.logicLayer && (this._logicMap[i.logicLayer] = o.id)
            } else {
                if (o.showUIBG && (o.hide ? ViewUIBG.hideBG2(o.id) : ViewUIBG.showBG2(o.id)), i.logicLayer) {
                    var r = this._logicMap[i.logicLayer];
                    r && r != t && this.close(r)
                }
                i.uiparent.$doAddChild(i, i.uiparent.numChildren - 1), i.onOpen(e), i.logicLayer && (this._logicMap[i.logicLayer] = o.id)
            }
            return i
        }
    }, e.prototype.openX = function (t, e, i) {
        if (void 0 === e && (e = null), void 0 === i && (i = !0), this.isOpenView(t)) {
            var o = this._regMap[t];
            this.close(t), this.closePnlByType(o.uitype)
        } else {
            var o = this._regMap[t];
            i && o && o.uitype && this.closePnlByType(o.uitype), this.open(t, e)
        }
    }, e.prototype.closePnlByType = function (t) {
        for (var e = this._opens.length - 1; e >= 0; e--) {
            var i = this._opens[e];
            i && i._uitype_ && i._uitype_ == t && this.close(i.id)
        }
    }, e.prototype.onLoadExml = function (t, e) {
        var i = this;
        if (!t) return void(i.loading = 0);
        if (i.regRes.length) {
            var e = i.regRes.shift();
            e.indexOf(".json") >= 0 ? RES.getResByUrl(e, this.onregresloaded, i, RES.ResourceItem.TYPE_JSON) : RES.getResByUrl(e, this.onregresloaded, i)
        } else i.open && (i.loading = 0, i.showUIBG && (i.hide ? ViewUIBG.hideBG2(i.id) : ViewUIBG.showBG2(i.id)), GameGlobal.layerMgr.open(i.id, i.openArg))
    }, e.prototype.onregresloaded = function (t, e) {
        BaseEUIView.loadedRes[e] = t;
        var i = this;
        if (i.regRes.length) {
            var o = i.regres.shift(); - 1 != o.indexOf(".exml") ? EXML.load(o, this.onLoadExml, i) : RES.getResByUrl(o, this.onregresloaded, i)
        } else i.open && (i.loading = 0, GameGlobal.layerMgr.open(i.id, i.openArg))
    }, e.prototype.onUIComplete = function (t) {
        var e = t.target;
        e.removeEventListener(eui.UIEvent.COMPLETE, this.onUIComplete, this);
        var i = GameGlobal.layerMgr,
            o = this._regMap[e.id]; - 1 != i._opens.indexOf(e) && o && (e.uiparent.addChild(e), e.onOpen(o.openArg))
    }, e.prototype.close = function (t) {
        var e = this._views[t],
            i = this._regMap[t];
        i && (i.open = !1, i.showUIBG && ViewUIBG.hideBG2(t));
        var o = this._opens.indexOf(e);
        e && -1 != o && (this._opens.splice(o, 1), e.isInit && (delete this._logicMap[e.logicLayer], e.parent.removeChild(e), e.onClose()))
    }, e.prototype.isOpenView = function (t) {
        var e = !1,
            i = this.getView(t);
        return i && this._opens.indexOf(i) >= 0 && (e = !0), e
    }, e.prototype.checkAndOpen = function (t) {
        CFG_COMMOND.isOpenByCFG(t, !0) && this.open(t)
    }, e.prototype.getView = function (t) {
        return this._views[t]
    }, e.prototype.hasTypeView = function (t) {
        for (var e = this._opens, i = 0, o = e.length; o > i; i++)
            if (e[i] && e[i]._uitype_ == t) return !0;
        return !1
    }, e.prototype.onSize = function () {
        for (var t = 0, e = this._opens.length; e > t; t++) {
            var i = this._opens[t];
            i.isInit && i.onSize()
        }
    }, e.prototype.addUIHideF = function (t, e) {
        var i = this._hideRestrict[t],
            o = this._regMap[t];
        if (o) {
            if (i) {
                var n = i.indexOf(e); - 1 == n && i.push(e)
            } else i = this._hideRestrict[t] = [e];
            if (1 == i.length) {
                var a = this.getView(t);
                a && (a.visible = !1), o.hide = !0, o.showUIBG && o.open && ViewUIBG.hideBG2(o.id)
            }
        }
    }, e.prototype.delUIHideF = function (t, e) {
        var i = this._hideRestrict[t],
            o = this._regMap[t];
        if (o && i) {
            var n = i.indexOf(e);
            if (-1 != n && (i.splice(n, 1), 0 == i.length)) {
                var a = this.getView(t);
                o.hide = !1, a && (a.visible = !0), o.showUIBG && o.open && ViewUIBG.showBG2(o.id)
            }
        }
    }, e.prototype.isShowing = function (t) {
        var e = this._regMap[t];
        if (e && e.open) {
            var i = this._hideRestrict[t];
            if (!i || !i.length) return !0
        }
        return !1
    }, e.prototype.dynamicReg = function (t, e, i, o, n, a) {
        void 0 === i && (i = null), void 0 === o && (o = 0), void 0 === n && (n = 0), void 0 === a && (a = null), this._regMap[t] || this.reg(t, e, i, o, n, a)
    }, e
}(lwm.mvc.Controller);
__reflect(LayerManager.prototype, "LayerManager");
var ViewEvent = function () {
    function t() {}
    return t.pre = "VIEW_EVENT_", t.OPEN_VIEW = t.pre + "OPEN_VIEW", t.CLOSE_VIEW = t.pre + "CLOSE_VIEW", t
}();
__reflect(ViewEvent.prototype, "ViewEvent");
var EventCenter = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), Object.defineProperty(e, "instance", {
        get: function () {
            return e._instance || (e._instance = new e), e._instance
        },
        enumerable: !0,
        configurable: !0
    }), e.addMsg = function (t, i, o, n, a) {
        e.instance.addEventListener(t, i, o, n, a)
    }, e.addOnceMsg = function (t, i, o, n, a) {
        e.instance.once(t, i, o, n, a)
    }, e.removeMsg = function (t, i, o, n) {
        e.instance.removeEventListener(t, i, o, n)
    }, e.sendMsg = function (t, i, o, n) {
        e.instance.dispatchEvent(new egret.Event(t, o, n, i))
    }, e
}(egret.EventDispatcher);
__reflect(EventCenter.prototype, "EventCenter");
var Handler = function () {
    function t(t, e, i, o) {
        void 0 === i && (i = null), void 0 === o && (o = !1), this.once = !1, this.once = !1, this._id = 0, this.setTo(t, e, i, o)
    }
    return t.create = function (e, i, o, n) {
        return void 0 === o && (o = null), void 0 === n && (n = !1), this.POOL.length ? this.POOL.pop().setTo(e, i, o, n) : new t(e, i, o, n)
    }, t.prototype.setTo = function (e, i, o, n) {
        return void 0 === o && (o = null), void 0 === n && (n = !1), this._id = t._gid++, this.caller = e, this.method = i, this.args = o, this.once = n, this
    }, t.prototype.run = function () {
        if (null == this.method) return null;
        var t = this._id,
            e = this.method.apply(this.caller, this.args);
        return this._id === t && this.once && this.recover(), e
    }, t.prototype.runWith = function (t) {
        if (null == this.method) return null;
        var e = this._id;
        if (null == t) var i = this.method.apply(this.caller, this.args);
        else i = (this.args || t.unshift) && this.args ? this.method.apply(this.caller, this.args.concat(t)) : this.method.call(this.caller, t);
        return this._id === e && this.once && this.recover(), i
    }, t.prototype.clear = function () {
        return this.caller = null, this.method = null, this.args = null, this
    }, t.prototype.recover = function () {
        this._id > 0 && (this._id = 0, t.POOL.push(this.clear()))
    }, t.POOL = [], t._gid = 1, t
}();
__reflect(Handler.prototype, "Handler");
var Main = function (t) {
    function e() {
        var i = t.call(this) || this;
        return i._preft = egret.getTimer(), e.ins = i, i.initLoginArg(), i.addEventListener(egret.Event.ADDED_TO_STAGE, i.onAddToStage, i), RES.web.Html5VersionController.prototype.getVirtualUrl = GameGlobal.getVerURL, i
    }
    return __extends(e, t), e.prototype.initLoginArg = function () {
        var t = GameGlobal.loginArg = window.loginArg;
        t.cdn && (GameGlobal.resRoot = t.cdn, t.ver && (GameGlobal.resRoot += t.ver + "/"))
    }, e.prototype.onAddToStage = function (t) {
        return __awaiter(this, void 0, void 0, function () {
            var t, e;
            return __generator(this, function (i) {
                switch (i.label) {
                    case 0:
                        return egret.TextField.default_fontFamily = "Microsoft YaHei", egret.TextField.default_size = 20, egret.TextField.defaultTouchEnabled = !1, eui.Label.default_fontFamily = "Microsoft YaHei", eui.Label.default_textColor = 11750920, GameGlobal.gameMain = this, GameGlobal.stage = this.stage, App.getIns().init(), t = new AssetAdapter, e = new ThemeAdapter, egret.registerImplementation("eui.IAssetAdapter", t), egret.registerImplementation("eui.IThemeAdapter", e), RES.setMaxLoadingThread(3), this.addEventListener(egret.Event.ENTER_FRAME, this.onFrame, this), this.stage.addEventListener(egret.Event.RESIZE, this.onSize, self), [4, this.configGame()];
                    case 1:
                        return i.sent(), [4, this.loadPreRes()];
                    case 2:
                        return i.sent(), [4, this.connectSocket()];
                    case 3:
                        return i.sent(), [4, this.loginServer()];
                    case 4:
                        return i.sent(), [4, this.prepareLoad()];
                    case 5:
                        return i.sent(), [2]
                }
            })
        })
    }, e.prototype.configGame = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (t) {
                switch (t.label) {
                    case 0:
                        return [4, LoadConfig.loadGlobalConfig()];
                    case 1:
                        return t.sent(), AppConfig.configGame(), App.httpGame.initServer(AppConfig.httpServer), this.showLoginPro("加载配置文件", 30), [4, LoadConfig.loadConfig()];
                    case 2:
                        return t.sent(), [2]
                }
            })
        })
    }, e.prototype.loadPreRes = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (t) {
                switch (t.label) {
                    case 0:
                        return platform.reportMsgToSelf(3, GameGlobal.loginArg.zoneid), this.showLoginPro("加载游戏基础资源", 60), [4, this.loadResConfig()];
                    case 1:
                        return t.sent(), GameGlobal.initStepOne(), this.showLoginPro("加载必要资源", 70), [4, this.loadGroup("preload")];
                    case 2:
                        return t.sent(), [2]
                }
            })
        })
    }, e.prototype.connectSocket = function () {
        return __awaiter(this, void 0, void 0, function () {
            var t, e, i;
            return __generator(this, function (o) {
                switch (o.label) {
                    case 0:
                        this.showLoginPro("链接服务器", 80), t = 5e3, e = GameGlobal.loginArg, o.label = 1;
                    case 1:
                        return [4, this.connectServer(e.ip, e.port)];
                    case 2:
                        return (i = o.sent()) ? [3, 4] : (this.showLoginPro("无法链接服务器," + t / 1e3 + "秒后重新尝试", 80), [4, this.delay(t)]);
                    case 3:
                        o.sent(), t += 1e3, t = Math.min(3e4, t), o.label = 4;
                    case 4:
                        if (1 != i) return [3, 1];
                        o.label = 5;
                    case 5:
                        return [2]
                }
            })
        })
    }, e.prototype.loginServer = function () {
        return __awaiter(this, void 0, void 0, function () {
            var t, e;
            return __generator(this, function (i) {
                return this.showLoginPro("登陆中", 85), t = GameGlobal.loginArg, e = {
                    account: t.account + "",
                    pf: t.pf,
                    pd: t.pd,
                    zoneid: String(t.zoneid),
                    sysState: String(t.platform ? t.platform : 1),
                    inviter: platform.inviter
                }, platform.reportMsgToSelf(4, GameGlobal.loginArg.zoneid), GameGlobal.modelLogin.login(e), [2]
            })
        })
    }, e.prototype.prepareLoad = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (t) {
                switch (t.label) {
                    case 0:
                        return GameGlobal.initStepTwo(), VdatasWatcher.parseDatas(), [4, this.waitNotic(GameGlobal.modelLogin, ModelLogin.MSG_LOGINSUCCESS)];
                    case 1:
                        return t.sent(), platform.initSDK(), platform.sendToPlatform(), platform.reportLogin(), GameGlobal.modelLogin.haveRole ? [3, 3] : [4, this.loginNoRole()];
                    case 2:
                        return t.sent(), [3, 5];
                    case 3:
                        return [4, this.loginHaveRole()];
                    case 4:
                        t.sent(), t.label = 5;
                    case 5:
                        return platform.reportMsgToSelf(6, GameGlobal.loginArg.zoneid), this.haveGift(), GameGlobal.modelExternal.CG4307(), GameGlobal.modelExternal.CG273(), this.haveCode(), [2]
                }
            })
        })
    }, e.prototype.haveCode = function () {
        if (window.shareInfo) {
            var t = window.shareInfo.code;
            console.log("！！！！！！！！好友的邀请码" + t), t && (GameCtrlBase.instance.getProxy(FriendBack.Proxy).sendCode(t), console.log("！！！！！！！！邀请成功"))
        }
    }, e.prototype.haveGift = function () {
        if (AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_BA) {
            var t = window.urlDic.GIFT;
            if (t) {
                var e = CFG_External.LIB_BASIC[t];
                if (e) switch (e.type) {
                    case 1:
                        GameGlobal.modelExternal.CG4301(t);
                        break;
                    case 2:
                        GameGlobal.modelExternal.CG4313(t)
                }
            }
            GameGlobal.modelExternal.showVIPBtn(), GameGlobal.modelExternal.showZYZLBtn()
        } else GameGlobal.modelExternal.showZYZLBtn()
    }, e.prototype.loginNoRole = function () {
        return __awaiter(this, void 0, void 0, function () {
            var t;
            return __generator(this, function (e) {
                switch (e.label) {
                    case 0:
                        return platform.reportMsgToSelf(5, GameGlobal.loginArg.zoneid), GameGlobal.layerMgr.open(UIConst.CREATEROLE), window.removeLoading(), [4, this.waitNotic(GameGlobal.modelLogin, ModelLogin.MSG_ROLECREATED)];
                    case 1:
                        return e.sent(), (MyPlatform.getIns().isIOS() || MyPlatform.getIns().isAndroid()) && GameGlobal.modelLogin.CG_GETSIGN(4), t = GameGlobal.layerMgr.open(UIConst.LOADING_VIEW), t.setSchedule(50, null, 1e4), t.setSchedule(90, null, 1e4), [4, this.loadTheme()];
                    case 2:
                        return e.sent(), t.setSchedule(95, null, 1e3), GameGlobal.modelRole.initMineRole(), GameGlobal.modelLogin.requestPerpareData(), [4, this.waitNotic(GameGlobal.modelLogin, ModelLogin.MSG_PERPAREDATAED)];
                    case 3:
                        return e.sent(), t.setSchedule(100, null, 50), [4, this.delay(60)];
                    case 4:
                        return e.sent(), GameGlobal.layerMgr.close(UIConst.LOADING_VIEW), this.showGame(), GameGlobal.layerMgr.open(UIConst.ViewBGText, "进入场景"), [4, this.delay(300)];
                    case 5:
                        return e.sent(), GameGlobal.layerMgr.close(UIConst.ViewBGText), GameGlobal.layerMgr.close(UIConst.CREATEROLE), [2]
                }
            })
        })
    }, e.prototype.loginHaveRole = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (t) {
                switch (t.label) {
                    case 0:
                        return (MyPlatform.getIns().isIOS() || MyPlatform.getIns().isAndroid()) && GameGlobal.modelLogin.CG_GETSIGN(4), this.showLoginPro("加载游戏主题", 65), [4, this.loadTheme()];
                    case 1:
                        return t.sent(), GameGlobal.modelRole.initMineRole(), this.showLoginPro("处理角色数据中", 95), GameGlobal.modelLogin.requestPerpareData(), [4, this.waitNotic(GameGlobal.modelLogin, ModelLogin.MSG_PERPAREDATAED)];
                    case 2:
                        return t.sent(), this.showGame(), this.showLoginPro("进入场景", 98), [4, this.delay(300)];
                    case 3:
                        return t.sent(), window.removeLoading(), [2]
                }
            })
        })
    }, e.prototype.delay = function (t) {
        return __awaiter(this, void 0, void 0, function () {
            var e, i;
            return __generator(this, function (o) {
                return e = this, i = new Promise(function (i) {
                    egret.setTimeout(function () {
                        i(!0)
                    }, e, t)
                }), [2, i]
            })
        })
    }, e.prototype.loadResConfig = function () {
        return __awaiter(this, void 0, void 0, function () {
            var t, e;
            return __generator(this, function (i) {
                return t = this, e = new Promise(function (e) {
                    RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE, function i(o) {
                        RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE, i, t), e(!0)
                    }, t)
                }), RES.loadConfig("resource/default.res.json", "resource/"), [2, e]
            })
        })
    }, e.prototype.loadTheme = function () {
        return __awaiter(this, void 0, void 0, function () {
            var t, e;
            return __generator(this, function (i) {
                return t = this, e = new Promise(function (e) {
                    var i = new eui.Theme("resource/default.thm.json", t.stage);
                    i.addEventListener(eui.UIEvent.COMPLETE, function () {
                        i.removeEventListener(eui.UIEvent.COMPLETE, onload, t), e(!0)
                    }, t)
                }), [2, e]
            })
        })
    }, e.prototype.loadGroup = function (t) {
        return __awaiter(this, void 0, void 0, function () {
            var e, i;
            return __generator(this, function (o) {
                return e = this, i = new Promise(function (i) {
                    function o(n) {
                        if (n.groupName == t) switch (n.type) {
                            case RES.ResourceEvent.GROUP_COMPLETE:
                                RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE, o, e), RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR, o, e), RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS, o, e), RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR, o, e), i(!0);
                                break;
                            case RES.ResourceEvent.GROUP_LOAD_ERROR:
                                RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE, o, e), RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR, o, e), RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS, o, e), RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR, o, e), i(!1);
                                break;
                            case RES.ResourceEvent.GROUP_PROGRESS:
                                break;
                            case RES.ResourceEvent.ITEM_LOAD_ERROR:
                                RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE, o, e), RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR, o, e), RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS, o, e), RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR, o, e), i(!1)
                        }
                    }
                    RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE, o, e), RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR, o, e), RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS, o, e), RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR, o, e), RES.loadGroup(t)
                }), [2, i]
            })
        })
    }, e.prototype.connectServer = function (t, e) {
        return __awaiter(this, void 0, void 0, function () {
            var i;
            return __generator(this, function (o) {
                return i = new Promise(function (i) {
                    var o = GameGlobal.socketMgr;
                    o.connect(t, e), GameGlobal.modelLogin.resetRecord(), o.connectCallBack = function () {
                        i(!0), GameGlobal.modelLogin.resetRecord(), o.connectCallBack = null
                    }, o.errorCallBack = function () {
                        i(!1), GameGlobal.modelLogin.resetRecord(), o.errorCallBack = null
                    }
                }), [2, i]
            })
        })
    }, e.prototype.waitNotic = function (t, e, i) {
        return void 0 === i && (i = !0), __awaiter(this, void 0, void 0, function () {
            var o;
            return __generator(this, function (n) {
                return o = new Promise(function (o) {
                    function n() {
                        o(!0)
                    }
                    i && t.once(e, n, this)
                }), [2, o]
            })
        })
    }, e.prototype.showGame = function () {
        this.initMapScene(), this.showWelcome(), this.initGame(), this.onDataReady(), this.setGM(), this.firstRecharge(), GameGlobal.socketMgr.on(egret.Event.CLOSE, this.onSocketClose, this), platform.reportRegister()
    }, e.prototype.initGame = function () {
        GameGlobal.layerMgr.open(UIConst.TOPUI), GameGlobal.layerMgr.open(UIConst.HEADUI), GameGlobal.layerMgr.open(UIConst.MAINMENU), GameGlobal.layerMgr.open(UIConst.BOTTOM2), GameGlobal.layerMgr.open(UIConst.QUEST), GameGlobal.modelQuest.checkShowPreFunc(GameGlobal.modelRole.voMine.level), GameGlobal.tick.addInterv(this.gamelogic, 1, this, !1)
    }, e.prototype.initMapScene = function () {
        GameGlobal.mapScene = new MapScene, GameGlobal.mapScene.init(), GameGlobal.gameMain.addChildAt(GameGlobal.mapScene.map, 0), GameGlobal.layerMgr.reg(UIConst.BATTLESCENE, RoundBattleScene, GameGlobal.mapScene.map)
    }, e.prototype.showWelcome = function () {
        GameGlobal.modelLogin.needShowWellcome && (GameGlobal.modelLogin.needShowWellcome = !1, GameGlobal.layerMgr.reg(UIConst.WELLCOME, VWellcomeUI, GameGlobal.layerMgr.UI_Message), GameGlobal.layerMgr.open(UIConst.WELLCOME))
    }, e.prototype.setGM = function () {
        "9999" == GameGlobal.loginArg.zoneid && GameGlobal.modelSetting.setGMVis(!0)
    }, e.prototype.firstRecharge = function () {
        if (GameGlobal.modelRole.voMine.level >= 30) {
            var t = VoSCAwards.getById(1);
            t && t.state <= 2 && (GameGlobal.modelshouchong.showLoginSCTip = !0)
        }
    }, e.prototype.onSocketClose = function (t) {
        GameGlobal.layerMgr.open(UIConst.RECONNECT)
    }, e.prototype.onDataReady = function () {
        var t = GameGlobal.modelGuanqia.getCurSceneID();
        GameGlobal.mapScene.changeMap(t)
    }, e.prototype.onFrame = function () {
        var t = egret.getTimer(),
            e = t - this._preft;
        GameGlobal.tick.tick(e), this._preft = t
    }, e.prototype.gamelogic = function (t, e) {
        e > 200 && (e = 200), GameGlobal.mapScene.advanceTime(e), Timer.getIns().run()
    }, e.prototype.onSize = function (t) {
        GameGlobal.layerMgr.onSize(), GameGlobal.mapScene && GameGlobal.mapScene.map.updateMapsize()
    }, e.prototype.showLoginPro = function (t, e) {
        window.showPro(t, e)
    }, e
}(egret.Sprite);
__reflect(Main.prototype, "Main");
var TimerManager = function () {
    function t() {
        if (this.iFps_time = 16.666, t.s_instance) throw new Error("单例类不可实例化");
        egret.startTick(this.onTick, this), this.tickList = []
    }
    return t.prototype.onTick = function (t) {
        for (var e = this.tickList, i = 0, o = e.length; o > i; i++) {
            var n = e[i];
            n && n.isValid && t - n.timestamp >= n.delay && (n.timestamp = t, n.count++, n.callback && n.callback.call(n.thisObj, n.clone()), n.count == n.maxCount && (n.isValid = !1))
        }
        for (var a = e.length; a > 0;) {
            var n = e[a - 1];
            n.isValid || e.splice(a - 1, 1), a--
        }
        return !1
    }, t.prototype.addTick = function (t, e, i, o) {
        for (var n = [], a = 4; a < arguments.length; a++) n[a - 4] = arguments[a];
        var s = this.tickList;
        if (s)
            for (var r = 0, l = s.length; l > r; r++) {
                var h = s[r];
                if (h.callback == i && h.thisObj == o && h.delay == t) return void(h.isValid || (h.isValid = !0, h.delay = t, h.count = 0, h.maxCount = 0 >= e ? Number.MAX_VALUE : e, h.callback = i, h.thisObj = o, h.args = n, h.timestamp = egret.getTimer()))
            } else s = [], this.tickList = s;
        var c = new TickData;
        c.delay = t, c.count = 0, c.maxCount = 0 >= e ? Number.MAX_VALUE : e, c.callback = i, c.thisObj = o, c.args = n, c.timestamp = egret.getTimer(), c.isValid = !0, s.push(c)
    }, t.prototype.hasTick = function (t, e) {
        var i = this.tickList;
        if (i)
            for (var o = void 0, n = 0, a = i.length; a > n; n++)
                if (o = i[n], o.callback == t && o.thisObj == e) return !0;
        return !1
    }, t.prototype.removeTick = function (t, e) {
        var i = this.tickList;
        if (i)
            for (var o = void 0, n = 0, a = i.length; a > n; n++)
                if (o = i[n], o.callback == t && o.thisObj == e) return void(o.isValid = !1)
    }, t.prototype.removeTicks = function (t) {
        var e = this.tickList;
        if (e)
            for (var i = void 0, o = 0, n = e.length; n > o; o++) i = e[o], i.thisObj == t && (i.isValid = !1)
    }, t.prototype.removeAllTicks = function () {
        this.tickList.length = 0
    }, Object.defineProperty(t, "instance", {
        get: function () {
            return null == t.s_instance && (t.s_instance = new t), t.s_instance
        },
        enumerable: !0,
        configurable: !0
    }), t.doTimer = function (e, i, o, n) {
        for (var a = [], s = 4; s < arguments.length; s++) a[s - 4] = arguments[s];
        t.instance.addTick(e, i, o, n, a)
    }, t.doFrame = function (e, i, o, n) {
        for (var a = [], s = 4; s < arguments.length; s++) a[s - 4] = arguments[s];
        e *= t.instance.iFps_time, t.instance.addTick(e, i, o, n, a)
    }, t.remove = function (e, i) {
        t.instance.removeTick(e, i)
    }, t.removes = function (e) {
        t.instance.removeTicks(e)
    }, t.removeAll = function () {
        t.instance.removeAllTicks()
    }, t
}();
__reflect(TimerManager.prototype, "TimerManager");
var TickData = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.clone = function () {
        var t = new e;
        return t.delay = this.delay, t.count = this.count, t.maxCount = this.maxCount, t.callback = this.callback, t.thisObj = this.thisObj, t.args = this.args, t.isValid = this.isValid, t
    }, e
}(egret.HashObject);
__reflect(TickData.prototype, "TickData");
var ThemeAdapter = function () {
    function t() {}
    return t.prototype.getTheme = function (t, e, i, o) {
        function n(t) {
            e.call(o, t)
        }

        function a(e) {
            e.resItem.url == t && (RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR, a, null), i.call(o))
        }
        var s = this;
        if ("undefined" != typeof generateEUI) egret.callLater(function () {
            e.call(o, generateEUI)
        }, this);
        else if ("undefined" != typeof generateEUI2) {
            var r = this.getEUIUrl();
            RES.getResByUrl(r, function (t, i) {
                window.JSONParseClass.setData(t), n(t), egret.callLater(function () {
                    e.call(o, generateEUI2)
                }, s)
            }, this, RES.ResourceItem.TYPE_JSON)
        } else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR, a, null), RES.getResByUrl(t, n, this, RES.ResourceItem.TYPE_TEXT)
    }, t.prototype.getEUIUrl = function () {
        if (window.extraGameEuiVer) var t = GameGlobal.getVerURL("resource/gameEui_" + window.extraGameEuiVer + ".json");
        else var t = GameGlobal.getVerURL("resource/gameEui.json");
        return t
    }, t
}();
__reflect(ThemeAdapter.prototype, "ThemeAdapter", ["eui.IThemeAdapter"]);
var Timer = function () {
    function t() {
        this.tasks = []
    }
    return t.getIns = function () {
        return t._instance || (t._instance = new t), t._instance
    }, t.prototype.listen = function (t, e, i, o) {
        void 0 === i && (i = 0), void 0 === o && (o = 0), this.remove(t, e), this.tasks.push([t, e, o, i])
    }, t.prototype.remove = function (t, e) {
        for (var i = this.tasks.length, o = i - 1; o >= 0; o--) {
            var n = this.tasks[o];
            if (n[0] == t && n[1] == e) {
                this.tasks.splice(o, 1);
                break
            }
        }
    }, t.prototype.has = function (t, e) {
        for (var i = 0; i < this.tasks.length; i++) {
            var o = this.tasks[i];
            if (o[0] == t && o[1] == e) return !0
        }
        return !1
    }, t.prototype.run = function () {
        for (var t = egret.getTimer(), e = this.tasks.length, i = e - 1; i >= 0; i--) {
            var o = this.tasks[i];
            if (o && !(t - o[2] < o[3])) {
                var n = o[0];
                n.length >= 1 ? n.call(o[1], t) : n.call(o[1]), o[2] = t
            }
        }
    }, t
}();
__reflect(Timer.prototype, "Timer");
var EffectMgr = function () {
    function t() {
        this.list = [], this.invalid = 0, this.last = 0
    }
    return t.addEff = function (t, e, i, o, n, a, s, r) {
        void 0 === i && (i = 0), void 0 === o && (o = 0), void 0 === n && (n = 1e3), void 0 === a && (a = -1), void 0 === s && (s = !0), void 0 === r && (r = 1);
        var l = this.getIns().addEff1(t, e, i, o, n, a, s, r);
        return l
    }, t.getIns = function () {
        return this._ins || (this._ins = new t), this._ins
    }, t.prototype.addEff1 = function (t, e, i, o, n, a, s, r) {
        var l = Part.create();
        if (l.act = r, l.setVal(t), l.aniInterv = n, l.startTime = egret.getTimer(), l.repeat = s, -1 != a ? l.endTime = l.startTime + a : l.endTime = Number.MAX_VALUE, 0 == this.list.length && GameGlobal.tick.addInterv(this.update, 60, this), l.setPec(0), l.$setX(i), l.$setY(o), e) {
            var h = e.$children.length;
            e.$doAddChild(l, h, !1)
        }
        return this.list.push(l), l
    }, t.prototype.removeEff = function (t) {
        var e = this,
            i = e.list.indexOf(t);
        if (-1 != i && (e.list[i] = null, 1 & e.invalid || (e.invalid |= 1, GameGlobal.tick.addInterv(e.clearList, 1e3, e))), t.$parent) {
            var i = t.$parent.$children.indexOf(t);
            t.$parent.$doRemoveChild(i, !1)
        }
        t.dispose()
    }, t.prototype.clearList = function (t) {
        ArrayUtil.cleannull(t.list), t.invalid = 0, 0 == t.list.length && GameGlobal.tick.removeInterv(t.update)
    }, t.prototype.update = function (t) {
        var e = egret.getTimer();
        e - t.last >= 70 && (t.last = e);
        for (var i = t.list, o = 0, n = i.length; n > o; o++) {
            var a = i[o];
            if (a)
                if (e > a.endTime) a._compHand && a._compHand.run(), t.removeEff(a);
                else {
                    var s = (e - a.startTime) / a.aniInterv;
                    s > 1 && (a.repeat ? s -= s >> 0 : s = 1), a.setPec(s)
                }
        }
    }, t
}();
__reflect(EffectMgr.prototype, "EffectMgr");
var MCResObj = function () {
    function t() {
        this.proprity = 1, this.refCount = 0, this.useParts = [], this.disposeTimes = 0
    }
    return t.create = function () {
        var e = t.POOL.length ? t.POOL.pop() : new t;
        return e
    }, t.prototype.complete = function () {
        this.factory = new egret.MovieClipDataFactory(this.mcdata, this.mctexture);
        var t = this.useParts;
        this.ready = !0;
        for (var e = t.length - 1; e >= 0; e--) {
            var i = t[e];
            i.buildmc()
        }
        t.length = 0
    }, t.prototype.dispose = function () {
        this.mcdata && (this.mcdata = null), this.mctexture && (this.mctexture.dispose(), this.mctexture = null), this.jsonUrl = this.textureUrl = null, this.state = 0, this.ready = !1, this.disposeTimes++
    }, t.POOL = [], t
}();
__reflect(MCResObj.prototype, "MCResObj");
var MDPart = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.init = function () {
        this.mc = new egret.MovieClip, this.mc.touchEnabled = !1
    }, e.prototype.setPec = function (t) {
        var e = this;
        return void(e.movieClipData && e.mc.movieClipData && (0 == this.parts.ptype ? e.mc.gotoAndPlay(1, -1) : e.mc.gotoAndPlay(1, 1)))
    }, e.prototype.setVal = function (e) {
        t.prototype.setVal.call(this, e), e || this.mc && (this.mc && this.mc).stop()
    }, e.prototype.buildmc = function () {
        if (this.res && this.res.factory) {
            this.movieClipData = this.res.factory.generateMovieClipData(this.act), this._curFrm = -1;
            var t = this.mc;
            t.movieClipData = this.movieClipData, this.setPec(this._perc), t.x = -600, t.y = -600
        }
    }, e
}(Part);
__reflect(MDPart.prototype, "MDPart");
var MDRidePart = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.init = function () {
        this.mc = new egret.MovieClip
    }, e.prototype.setPec = function (t) {
        return
    }, e.prototype.buildmc = function () {
        if (this.res && this.res.factory) {
            this.movieClipData = this.res.factory.generateMovieClipData(this.act), this._curFrm = -1, this.setPec(this._perc);
            var t = this.mc;
            t.movieClipData = this.movieClipData, 0 == this.parts.ptype ? t.play(-1) : t.play(1), t.x = -600, t.y = -600
        }
    }, e
}(Part);
__reflect(MDRidePart.prototype, "MDRidePart");
var VdatasWatcher = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VdatasWatcherSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose).addCloseListen(this.background)
    }, e.addData = function (t, i) {
        e.totalContent += t + ": " + i + "\n"
    }, e.parseDatas = function () {
        if (window.GameStatusInfo) {
            var t = "";
            for (var i in window.GameStatusInfo) t += i + ": " + window.GameStatusInfo[i] + "\n"
        }
        if (e.addData("window.GameStatusInfo", window.GameStatusInfo), e.addData("window.GameStatusInfo", t), window.shareInfo) {
            var o = "";
            for (var i in window.shareInfo) o += i + ": " + window.shareInfo[i] + "\n"
        }
        e.addData("window.shareInfo", window.shareInfo), e.addData("window.shareInfo", o)
    }, e.parseDatas2 = function () {
        if (GameGlobal.modelLogin.loginArg) {
            var t = "";
            for (var i in GameGlobal.modelLogin.loginArg) t += i + ": " + GameGlobal.modelLogin.loginArg[i]
        }
        e.addData("GameGlobal.modelLogin.loginArg", GameGlobal.modelLogin.loginArg), e.addData("GameGlobal.modelLogin.loginArg", t)
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i), this.txtDatas.text = e.totalContent
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.totalContent = "", e.lb = "", e
}(BaseEUIView);
__reflect(VdatasWatcher.prototype, "VdatasWatcher");
var RESManager = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.map = {}, e.loadingRes = {}, e.loadingCount = 0, e.loadQueue = [], GameGlobal.tick.addInterv(e.checkDestory1, 5e3, e), e
    }
    return __extends(e, t), e.prototype.refRes = function (t) {
        var e = this.map[t];
        return e ? e.inDList = !1 : (e = RESObj.create(), e.val = t, this.map[t] = e, this.loadQueue.push(e), this.loadNext()), e.refCount++, e
    }, e.prototype.reduceRes = function (t) {
        var e = this.map[t];
        return e && (e.refCount--, e.refCount <= 0 && (e.ref0Time = egret.getTimer(), e.inDList = !0)), e
    }, e.prototype.onLoaded = function (t) {
        this.loadingRes[t] && (delete this.loadingRes[t], this.loadingCount--, this.loadNext())
    }, e.prototype.loadNext = function () {
        if (this.loadingCount < 2 && this.loadQueue.length)
            for (; this.loadQueue.length && this.loadingCount < 2;) {
                var t = this.loadQueue.shift();
                if (t) {
                    this.loadingRes[t.val] = t, t.startLoad();
                    break
                }
            }
    }, e.prototype.checkDestory1 = function (t, e) {
        var i = egret.getTimer();
        for (var o in t.map) {
            var n = t.map[o];
            0 == n.refCount && i - n.ref0Time >= 12e4 && !t.loadingRes[n.val] && t.destoryRes(n)
        }
    }, e.prototype.destoryRes = function (t) {
        if (!this.loadingRes[t.val]) {
            if (delete this.map[t.val], -1 == t.state) {
                var e = this.loadQueue.indexOf(t);
                e >= 0 && this.loadQueue.splice(e, 1)
            }
            t.dispose()
        }
    }, e
}(egret.EventDispatcher);
__reflect(RESManager.prototype, "RESManager");
var RESObj = function () {
    function t() {
        this.state = -1, this.proprity = 1, this.refCount = 0, this.useParts = [], this.disposeTimes = 0, this.usedTime = 9999999
    }
    return t.create = function () {
        var e = t.POOL.length ? t.POOL.pop() : new t;
        return e
    }, t.prototype.startLoad = function () {
        this.state = 0, this.jsonUrl = "resource/model/" + this.val + ".json", RES.getResByUrl(this.jsonUrl, this.josnComplete, this, RES.ResourceItem.TYPE_JSON)
    }, t.prototype.josnComplete = function (t) {
        return null == t ? (console.log("errorRes:" + this.val), void GameGlobal.resMgr.onLoaded(this.val)) : (this.state = 1, this.mcdata = t, this.textureUrl = "resource/model/" + this.val + ".png", void RES.getResByUrl(this.textureUrl, this.textureComplete, this, RES.ResourceItem.TYPE_IMAGE))
    }, t.prototype.textureComplete = function (t) {
        return null == t ? void GameGlobal.resMgr.onLoaded(this.val) : (this.state = 2, this.mctexture = t, void this.complete())
    }, t.prototype.complete = function () {
        this.factory = new egret.MovieClipDataFactory(this.mcdata, this.mctexture);
        var t = this.useParts;
        this.ready = !0;
        for (var e = t.length - 1; e >= 0; e--) {
            var i = t[e];
            i && i.buildmc()
        }
        t.length = 0, GameGlobal.resMgr.onLoaded(this.val)
    }, t.prototype.dispose = function () {
        if (this.mcdata && (RES.destroyRes(this.jsonUrl), this.mcdata = null), this.mctexture) {
            RES.destroyRes(this.textureUrl);
            var t = this.factory.spriteSheet;
            t.dispose();
            for (var e in t._textureMap) t._textureMap[e].dispose(), delete t._textureMap[e];
            this.mctexture = null
        }
        this.jsonUrl = this.textureUrl = null, this.state = -1, this.ready = !1, this.disposeTimes++
    }, t.POOL = [], t
}();
__reflect(RESObj.prototype, "RESObj");
var StaticPart = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setAct = function (t) {
        this.act && this.buildmc()
    }, e
}(Part);
__reflect(StaticPart.prototype, "StaticPart");
var SoundManager = function () {
    function t() {
        this.bgmSound = new egret.Sound, this.sounds = {}, this.loadings = {}, this.stopFlags = [], this.counter = 0
    }
    return t.getInstance = function () {
        var e = t;
        return e._ins || (t._ins = new t), e._ins
    }, t.prototype.setSoundEnable = function (t) {
        t ? this.removeStopFlag("disable") : this.addStopFlag("disable")
    }, t.prototype.addStopFlag = function (t) {
        var e = this.stopFlags.indexOf(t); - 1 == e && (this.stopFlags.push(t), 1 == this.stopFlags.length && this.stopCurBGM())
    }, t.prototype.removeStopFlag = function (t) {
        var e = this.stopFlags.indexOf(t); - 1 != e && (this.stopFlags.splice(e, 1), this.stopFlags.length || this.playCurBGM())
    }, t.prototype.playBGM = function (t) {
        var e = this;
        if (!t) return e.bgmChannel && (e.bgmChannel.stop(), e.bgmChannel = null), void(e.curbgmurl = null);
        var i = GameGlobal.testVerObj ? GameGlobal.testVerObj.musicVer : "",
            o = "resource/sound/bgm" + i + "/" + t + ".mp3";
        e.curbgmurl != o && (e.curbgmurl = o, e.bgmChannel && (e.bgmChannel.stop(), e.bgmChannel = null), t && e.playCurBGM())
    }, t.prototype.playCurBGM = function () {
        var t = this;
        if (!t.stopFlags.length) {
            var e = t.curbgmurl;
            if (!e) return;
            var i = t.sounds[e];
            if (i) try {
                t.bgmChannel = i.play(), t.bgmChannel.volume = .5
            } catch (o) {
                console.log("playbmgError:" + e)
            } else t.loadings[e] || (t.loadings[e] = !0, RES.getResByUrl(e, t.onBgmLoaded, t, RES.ResourceItem.TYPE_SOUND))
        }
    }, t.prototype.stopCurBGM = function () {
        this.bgmChannel && (this.bgmChannel.stop(), this.bgmChannel = null)
    }, t.prototype.onBgmLoaded = function (t, e) {
        if (t && (this.sounds[e] = t, delete this.loadings[e], e == this.curbgmurl && !this.stopFlags.length)) try {
            this.bgmChannel = t.play(), this.bgmChannel.volume = .3
        } catch (i) {
            console.log("playBmgError:" + e)
        }
    }, t.prototype.playEff = function (t) {
        if (t) {
            var e = this;
            if (!(e.stopFlags.length || e.counter >= 1)) {
                var i = GameGlobal.testVerObj ? GameGlobal.testVerObj.musicVer : "",
                    o = "resource/sound/eff" + i + "/" + t + ".mp3",
                    n = e.sounds[o];
                if (n) try {
                    var a = n.play(0, 1);
                    a.addEventListener(egret.Event.SOUND_COMPLETE, e.onsounded, e), e.counter++
                } catch (s) {
                    console.log("playSoundEffError:" + o)
                } else e.loadings[o] || (e.loadings[o] = !0, RES.getResByUrl(o, e.onloaded, e, RES.ResourceItem.TYPE_SOUND));
                return a
            }
        }
    }, t.prototype.playLocalEff = function (t) {
        if (t) {
            var e = this;
            if (!(e.stopFlags.length || e.counter >= 1)) {
                var i = (GameGlobal.testVerObj ? GameGlobal.testVerObj.musicVer : "", "localRes/sound/" + t + ".mp3"),
                    o = e.sounds[i];
                if (o) try {
                    var n = o.play(0, 1);
                    n.volume = .3, n.addEventListener(egret.Event.SOUND_COMPLETE, e.onsounded, e), e.counter++
                } catch (a) {
                    console.log("playSoundEffError:" + i)
                } else e.loadings[i] || (e.loadings[i] = !0, RES.getResByUrl(i, e.onlocalLoaded, e, RES.ResourceItem.TYPE_SOUND));
                return n
            }
        }
    }, t.prototype.onloaded = function (t, e) {
        t && (delete this.loadings[e], this.sounds[e] = t)
    }, t.prototype.onlocalLoaded = function (t, e) {
        if (t) {
            delete this.loadings[e], this.sounds[e] = t;
            var i = t.play(0, 1);
            i.volume = .3, i.addEventListener(egret.Event.SOUND_COMPLETE, this.onsounded, this), this.counter++
        }
    }, t.prototype.onsounded = function (t) {
        this.counter--, t.target.removeEventListener(egret.Event.SOUND_COMPLETE, this.onsounded, this)
    }, t.prototype.killChannel = function (t) {
        t && t.hasEventListener(egret.Event.SOUND_COMPLETE) && (t.stop(), this.counter--, t.removeEventListener(egret.Event.SOUND_COMPLETE, this.onsounded, this))
    }, t
}();
__reflect(SoundManager.prototype, "SoundManager");
var ActNumber = function () {
    function t(t) {
        this._readVal = t >> 0
    }
    return Object.defineProperty(t.prototype, "val", {
        get: function () {
            return this._readVal
        },
        set: function (t) {
            this._readVal = t >> 0
        },
        enumerable: !0,
        configurable: !0
    }), t
}();
__reflect(ActNumber.prototype, "ActNumber");
var BasePanel = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._title = "title", e.skinName = "BasePanelSkin", e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "title", {
        get: function () {
            return this._title
        },
        set: function (t) {
            this._title != t && (this._title = t, this.lbTitle && (this.lbTitle.text = t))
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.createPageGrp = function (t) {
        void 0 === t && (t = 2);
        var e = this.pageGrp = new eui.Group;
        return this.addChildAt(e, t), this
    }, e.prototype.createTabGroup = function () {
        var t = this.tabGrp = new eui.Group,
            e = t.layout = new eui.HorizontalLayout;
        return e.gap = 6, t.x = 30, t.bottom = 20, this.addChild(t), this
    }, e.prototype.createQuestTxt = function (t) {
        this.createQuestBtn(), this._questStr = t, this.btnQuest.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onQuestT, this)
    }, e.prototype.createQuestBtn = function () {
        this.btnQuest || (this.btnQuest = new BmBtn, this.btnQuest.skinName = "QuestBtn", this.btnQuest.left = 4, this.btnQuest.y = 0, this.addChild(this.btnQuest))
    }, e.prototype.showQuestBtn = function () {
        this.createQuestBtn(), this.btnQuest.visible = !0
    }, e.prototype.hideQuestBtn = function () {
        this.btnQuest && (this.btnQuest.visible = !1)
    }, e.prototype.clearTabs = function () {
        for (var t = this.tabGrp.$children, e = 0, i = t.length; i > e; e++) t[e].dispose();
        this.tabGrp.removeChildren()
    }, e.prototype.addTab = function (t, e, i) {
        if (void 0 === e && (e = 0), void 0 === i && (i = 0), !i || !this.getTabBySysID(i)) {
            var o = TBTN.create();
            return o.label = t, o.bindSysID = i, o.sort = e, this.addTBTN(o)
        }
    }, e.prototype.addTabByRef = function (t, e, i) {
        var o = getClassName(i);
        return this.addTab(t, e, o)
    }, e.prototype.addTBTN = function (t) {
        for (var e = this.tabGrp.$children.length, i = 0; e > i; i++) {
            var o = this.tabGrp.$children[i];
            if (o.sort > t.sort) break
        }
        return t.index = i, this.tabGrp.$doAddChild(t, i, !1), t
    }, e.prototype.removeTabByID = function (t) {
        var e = this.getTabIndexBySysID(t);
        if (e >= 0) {
            var i = this.tabGrp.$doRemoveChild(e, !1);
            i.dispose()
        }
        return !1
    }, e.prototype.removeTabBySort = function (t) {
        var e = this.getTabBySort(t);
        if (e) {
            var i = this.tabGrp.$children.indexOf(e);
            if (i >= 0) {
                var e = this.tabGrp.$doRemoveChild(i, !1);
                e.dispose()
            }
        }
        return !1
    }, e.prototype.removeTabByIdx = function (t) {
        if (t >= 0 && t < this.$children.length) {
            var e = this.tabGrp.$doRemoveChild(t, !1);
            e.dispose()
        }
        return !1
    }, e.prototype.getTabByIdx = function (t) {
        return this.tabGrp.$children[t]
    }, e.prototype.getTabIndexBySysID = function (t) {
        for (var e = this.tabGrp.$children, i = 0, o = e.length; o > i; i++)
            if (e[i].bindSysID == t) return i;
        return -1
    }, e.prototype.getTabBySysID = function (t) {
        for (var e = this.tabGrp.$children, i = 0, o = e.length; o > i; i++)
            if (e[i].bindSysID == t) return e[i];
        return null
    }, e.prototype.getTabBySort = function (t) {
        for (var e = this.tabGrp.$children, i = 0, o = e.length; o > i; i++)
            if (e[i].sort == t) return e[i];
        return null
    }, e.prototype.listenTabClick = function (t, e) {
        this._tabClickCB = t, this._tabClickCaller = e, this.tabGrp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPageGrpT, this)
    }, e.prototype.onPageGrpT = function (t) {
        var e = t.$target;
        "TBTN" == e.classT && this._tabClickCB && this._tabClickCB.call(this._tabClickCaller, e)
    }, e.prototype.onQuestT = function (t) {
        this._questStr && GameGlobal.layerMgr.open(UIConst.UIID_INTRODUCE, this._questStr)
    }, e.prototype.setTabSelIdx = function (t, e) {
        void 0 === e && (e = !1);
        for (var i, o = this.tabGrp.$children, n = 0, a = o.length; a > n; n++) {
            var s = o[n];
            n == t ? (s._sel || (s.selected = !0), i = s) : s._sel && (s.selected = !1)
        }
        e && i && this._tabClickCB && this._tabClickCB.call(this._tabClickCaller, i)
    }, e.prototype.setTabSelBySort = function (t, e) {
        void 0 === e && (e = !1);
        for (var i, o = this.tabGrp.$children, n = 0, a = o.length; a > n; n++) {
            var s = o[n];
            s.sort == t ? (s._sel || (s.selected = !0), i = s) : s._sel && (s.selected = !1)
        }
        e && i && this._tabClickCB && this._tabClickCB.call(this._tabClickCaller, i)
    }, e.prototype.setTabSelSys = function (t, e) {
        void 0 === e && (e = !1);
        var i = this.getTabIndexBySysID(t);
        i >= 0 && this.setTabSelIdx(i, e)
    }, e.prototype.setNoticBySysID = function (t, e) {
        var i = this.getTabBySysID(t);
        i && i.setNoticVis(e)
    }, e.prototype.setNoticByIndex = function (t, e) {
        var i = this.getTabByIdx(t);
        i && i.setNoticVis(e)
    }, e.prototype.setNoticBySort = function (t, e) {
        var i = this.getTabBySort(t);
        i && i.setNoticVis(e)
    }, e.prototype.getTbtnTextByIdx = function (t) {
        var e = this.getTabByIdx(t);
        return e ? e.text : "n:" + t
    }, e.prototype.getTbtnTextBySort = function (t) {
        var e = this.getTabBySort(t);
        return e ? e.text : "n:" + t
    }, e.prototype.getTbtnTextBySysID = function (t) {
        for (var e = this.tabGrp.$children, i = 0; i < e.length; i++) {
            var o = e[i];
            if (o.bindSysID == t) return o.text
        }
        return "n:" + t
    }, e.TBTNPool = [], e
}(eui.Component);
__reflect(BasePanel.prototype, "BasePanel", ["eui.UIComponent", "egret.DisplayObject"]);
var Bitmaptext = function () {
    function t() {
        this.images = [], this.fx = 0, this.fy = 0, this.totalWid = 0
    }
    return t.prototype.makeContainer = function () {
        this.container = new egret.DisplayObjectContainer
    }, t.prototype.setCharFunc = function (t) {
        this.charFunc != t && (this.charFunc = t, this.dirty = 1)
    }, t.prototype.setText = function (t) {
        (this._text != t || this.dirty) && (this._text = t, this.redraw(), this.dirty = 0)
    }, t.prototype.redraw = function () {
        for (var t = this, e = t._text, i = 0, o = 0, n = e.length; n > o; o++) {
            var a = t.images[o];
            t.by = 0, a || (a = t.images[o] = ImageText.getImage(), t.container.addChild(a)), t.charFunc(t, e.charAt(o));
            var s = RES.getRes(t.bs);
            s && (a.texture = s), a.x = t.fx + i, a.y = t.fy + t.by, i += t.bw
        }
        for (t.totalWid = i; o < t.images.length; o++) ImageText.POOL.push(t.images[o]), t.container.removeChild(t.images[o]);
        n < t.images.length && (t.images.length = n)
    }, t.getImage = function () {
        return ImageText.POOL.length ? ImageText.POOL.pop() : new egret.Bitmap
    }, t.STRFUNC = function (t, e) {
        "z" == e ? (t.bs = "num_json.zl", t.bw = 83) : "+" == e ? (t.bs = "num_json.z+", t.bw = 30, t.by = 4) : (t.bs = "num_json.z" + e, t.bw = 27, t.by = 4)
    }, t
}();
__reflect(Bitmaptext.prototype, "Bitmaptext");
var BmBtn = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isDown = !1, e.enable = !0, e.init(), e
    }
    return __extends(e, t), e.prototype.init = function () {
        this.touchEnabled = !0, this.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onTB, this)
    }, e.prototype.onTB = function () {
        this.addEventListener(egret.TouchEvent.TOUCH_END, this.onTCancle, this), this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE, this.onTCancle, this), this.isDown = !0, this.updateSt()
    }, e.prototype.updateSt = function () {
        this.enable && (this.isDown ? this.currentState = "down" : this.currentState = "up")
    }, e.prototype.onTCancle = function () {
        this.removeEventListener(egret.TouchEvent.TOUCH_END, this.onTCancle, this), this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE, this.onTCancle, this), this.isDown = !1, this.updateSt()
    }, e.prototype.$onAddToStage = function (e, i) {
        t.prototype.$onAddToStage.call(this, e, i), this.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onDown, this)
    }, e.prototype.$onRemoveFromStage = function () {
        t.prototype.$onRemoveFromStage.call(this)
    }, e.prototype.onDown = function () {
        SoundManager.getInstance().playLocalEff("click")
    }, e
}(eui.Component);
__reflect(BmBtn.prototype, "BmBtn", ["eui.UIComponent", "egret.DisplayObject"]);
var BoxButton = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._hasGet = !1, e.skinName = "BoxButtonSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.iconNotice.visible = !1, this.currentState = "noget"
    }, e.prototype.setType = function (t) {
        switch (t) {
            case 1:
                this.icon.source = "CMS1_json.tong";
                break;
            case 2:
                this.icon.source = "CMS1_json.yin";
                break;
            case 3:
                this.icon.source = "CMS1_json.gold"
        }
    }, e.prototype.setNoticeVis = function (t) {
        this.iconNotice.visible = t
    }, Object.defineProperty(e.prototype, "hasGet", {
        get: function () {
            return this._hasGet
        },
        set: function (t) {
            this._hasGet != t && (this._hasGet = t, this.currentState = t ? "get" : "noget")
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setTextVis = function (t) {
        this.text.visible = t
    }, e.prototype.setText = function (t) {
        this.text.textFlow = HtmlUtil.parse(t)
    }, e.prototype.setTextBottom = function (t) {
        this.text.bottom = t
    }, e.prototype.setState = function (t) {
        switch (t) {
            case 0:
                this.hasGet = !1, this.setNoticeVis(!1);
                break;
            case 1:
                this.hasGet = !1, this.setNoticeVis(!0);
                break;
            case 2:
                this.hasGet = !0, this.setNoticeVis(!1)
        }
    }, e
}(eui.Component);
__reflect(BoxButton.prototype, "BoxButton");
var EasyButton = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._isDown = !1, e._enabled = !0, e
    }
    return __extends(e, t), e.prototype.partAdded = function (e, i) {
        t.prototype.partAdded.call(this, e, i)
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.touchChildren = !1, this.iconNotice.visible = !1, this.icon = this._icon, this._iconDown && (this.imgDown.source = this._iconDown), this._label && (this.lbText.text = this._label), this.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onTB, this)
    }, e.prototype.setNoticeVis = function (t) {
        this.iconNotice.$setVisible(t)
    }, e.prototype.onTB = function (t) {
        this._isDown = !0, this.stage.once(egret.TouchEvent.TOUCH_END, this.onTE, this), SoundManager.getInstance().playLocalEff("click"), this.updateState()
    }, e.prototype.onTE = function (t) {
        this._isDown = !1, this.updateState()
    }, Object.defineProperty(e.prototype, "icon", {
        get: function () {
            return this._icon
        },
        set: function (t) {
            t != this._icon && (this._icon = t, this.updateState())
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "iconDisable", {
        get: function () {
            return this._iconDisable
        },
        set: function (t) {
            t != this._iconDisable && (this._iconDisable = t)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "iconDown", {
        get: function () {
            return this._iconDown
        },
        set: function (t) {
            t != this._iconDown && (this._iconDown = t, this.imgDown && (this.imgDown.source = t))
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "label", {
        get: function () {
            return this._label
        },
        set: function (t) {
            this._label != t && (this._label = t, this.lbText && (this.lbText.text = t))
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "labelColor", {
        get: function () {
            return this._labelColor
        },
        set: function (t) {
            this._labelColor != t && (this._labelColor = t, this.lbText && (this.lbText.textColor = t))
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "labelSize", {
        set: function (t) {
            this._labelSize != t && (this._labelSize = t, this.lbText && (this.lbText.size = t))
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "enabled", {
        get: function () {
            return this._enabled
        },
        set: function (t) {
            this._enabled != t && (this._enabled = t, this.updateState())
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateState = function () {
        var t = this;
        t._enabled ? t._selected ? t.currentState = "selected" : t._isDown ? t.currentState = "down" : t.currentState = "up" : t.currentState = "disabled"
    }, Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected != t && (this._selected = t, this.updateState())
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.showEff = function (t, e) {
        void 0 === t && (t = 1), void 0 === e && (e = 1), this._eff || (this._eff = EffectMgr.addEff("uieff/btnEff", null, this.width >> 1, this.height >> 1), DisplayUtil.addBy(this._eff, this, 1)), this._eff.scaleY = e, this._eff.scaleX = t
    }, e.prototype.hideEff = function () {
        this._eff && (EffectMgr.getIns().removeEff(this._eff), this._eff = null)
    }, e.prototype.addIconZk = function (t, e, i, o) {
        void 0 === e && (e = 320), void 0 === i && (i = 5), void 0 === o && (o = this.height / 2.4), this.lbZk || (this.lbZk = new eui.Label, this.lbZk.size = 22, this.lbZk.textColor = 16777215, this.iconZk = new eui.Image("CMS1_json.labelBGA"), this.iconZk.height = 1.05 * this.height, this.iconZk.width = 110 / 95 * this.iconZk.height, this.iconZk.x = this.iconZk.y = 0), 0 == t ? this.lbZk.text = "免费" : this.lbZk.text = t + "折", this.lbZk.rotation = e, this.lbZk.x = i, this.lbZk.y = o, DisplayUtil.addBy(this.iconZk, this), DisplayUtil.addBy(this.lbZk, this)
    }, e.prototype.removeIconZk = function () {
        this.lbZk && (DisplayUtil.remove(this.lbZk), DisplayUtil.remove(this.iconZk))
    }, e
}(eui.Component);
__reflect(EasyButton.prototype, "EasyButton", ["eui.UIComponent", "egret.DisplayObject"]);
var GCheckBox = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e._text = "", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.lbText.text = this._text
    }, Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel = t, t ? this.imgSel.visible = !0 : this.imgSel.visible = !1
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "text", {
        get: function () {
            return this._text
        },
        set: function (t) {
            this._text = t, this.lbText && (this.lbText.text = t)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(GCheckBox.prototype, "GCheckBox", ["eui.UIComponent", "egret.DisplayObject"]);
var ImageText = function () {
    function t() {
        this.images = [], this.gap = 0, this.fx = 0, this.fy = 0, this.totalWid = 0, this.dirty = 0
    }
    return t.prototype.makeContainer = function () {
        this.container = new egret.DisplayObjectContainer
    }, t.prototype.setCharFunc = function (t, e) {
        void 0 === e && (e = !1), this.charFunc != t && (this.charFunc = t, e && this.redraw())
    }, t.prototype.setText = function (t) {
        (this._text != t || this.dirty) && (this._text = t, this.redraw())
    }, t.prototype.redraw = function () {
        this.dirty = 0;
        var e, i, o = this._text,
            n = 0;
        for (e = 0, i = o.length; i > e; e++) {
            this.by = 0;
            var a = this.images[e];
            a || (a = this.images[e] = t.getImage(), this.container.$doAddChild(a, this.container.numChildren, !1)), this.charFunc(this, o.charAt(e), a, e), a.source = this.bs, a.touchEnabled = !1, this.layoutFunc ? this.layoutFunc(this, a, e) : (a.$setX(this.fx + n), a.$setY(this.fy), this.by && a.$setY(a.$getY() + this.by), n += e == i - 1 ? this.bw : this.bw + this.gap)
        }
        for (; e < this.images.length; e++) {
            var s = this.images[e];
            s.$setScaleX(1), s.$setScaleY(1), t.POOL.push(s), DisplayUtil.remove(s), s.source = null
        }
        i < this.images.length && (this.images.length = i), this.totalWid = n
    }, t.getImage = function () {
        return t.POOL.length ? t.POOL.pop() : new eui.Image
    }, t.STRFUNC = function (t, e) {
        "d" == e ? (t.bs = "num_json.dz", t.bw = 151) : "z" == e ? (t.bs = "num_json.z", t.bw = 38) : "/" == e ? (t.bs = "num_json.zslash", t.bw = 15, t.by = 5) : ":" == e ? (t.bs = "num_json.zcolon", t.bw = 15, t.by = 5) : "u" == e ? (t.bs = "num2_json.strUp", t.bw = 149, t.by = 36) : "c" == e ? (t.bs = "num2_json.strCanUp", t.bw = 186, t.by = 36) : (t.bs = "num_json.z" + e, t.bw = 27, t.by = 3)
    }, t.VIPFUNC = function (t, e) {
        "V" == e ? (t.bs = "num_json.vh", t.bw = 52, t.by = 0) : "v" == e ? (t.bs = "num_json.v", t.bw = 21, t.by = -3) : (t.bs = "num_json.v" + e, t.bw = 14, t.by = 0)
    }, t.VIEWLITVIPFUNC = function (t, e) {
        "V" == e ? (t.bs = "VIPAtlas_json.vipLit", t.bw = 44, t.by = 0) : "T" == e ? (t.bs = "VIPAtlas_json.tequan", t.bw = 58, t.by = 0) : (t.bs = "VIPAtlas_json." + e + e, t.bw = 20, t.by = 0)
    }, t.VIEWBIGVIPFUNC = function (t, e) {
        "V" == e ? (t.bs = "VIPAtlas_json.vip", t.bw = 58, t.by = 0) : "M" == e ? (t.bs = "VIPAtlas_json.manji", t.bw = 118, t.by = 0) : (t.bs = "VIPAtlas_json." + e, t.bw = 26, t.by = 0)
    }, t.ROUNDFUNC = function (t, e) {
        "/" == e ? (t.bs = "num_json.tslash", t.bw = 11) : (t.bs = "num_json.t" + e, t.bw = 15)
    }, t.BATTLERED = function (t, e) {
        t.bs = "num_json.red_" + e, "A" == e || "F" == e || "W" == e || "K" == e || "B" == e ? t.bw = 72 : "d" == e || "u" == e ? t.bw = 22 : t.bw = 24
    }, t.DMGFUNC = function (t, e) {
        t.bs = "num_json.ylw_" + e, "J" == e ? (t.bs = "num_json.js", t.bw = 71) : "A" == e || "F" == e ? t.bw = 59 : "d" == e || "u" == e ? t.bw = 22 : t.bw = 21
    }, t.DMGFUNC_MAG = function (t, e) {
        t.bs = "num_json.pur_" + e, "A" == e || "F" == e ? t.bw = 59 : "d" == e || "u" == e ? t.bw = 22 : t.bw = 21
    }, t.CRITDMGFUNC = function (t, e) {
        t.bs = "num_json.red_" + e, "B" == e ? t.bw = 72 : t.bw = 21
    }, t.CUREFUNC = function (t, e) {
        "B" == e ? (t.bw = 72, t.bs = "num_json.red_" + e) : (t.bw = 21, t.bs = "num_json.gre_" + e)
    }, t.GKSTARFUNC = function (t, e, i, o) {
        t.bs = "MainScreen_json.bm_win1", t.bw = 30, t.by = 1
    }, t.PHBFUNC = function (t, e) {
        t.bs = "PHBAtlas_json." + e, t.bw = 18
    }, t.RECHARGEFUN = function (t, e) {
        t.bs = "num2_json.yb" + e, "Y" == e ? t.bw = 51 : t.bw = 16
    }, t.CZUIVIP = function (t, e) {
        t.bs = "num2_json.v" + e, "V" == e ? t.bw = 71 : (t.bw = 23, t.by = 2)
    }, t.VIPBOSSVIP = function (t, e) {
        "V" == e ? (t.bs = "vipBoss_json.vipText", t.bw = 71) : (t.bs = "vipBoss_json." + e, t.bw = 23, t.by = 2)
    }, t.STARFUNC = function (t, e) {
        t.bs = "CMS1_json.bm_star" + e, t.bw = 35
    }, t.EXPTIMECOUNT = function (t, e) {
        ":" == e ? (t.bs = "ExpGiftAtlas_json.point", t.bw = 13) : "-" == e ? (t.bs = "ExpGiftAtlas_json.gang", t.bw = 13) : (t.bs = "ExpGiftAtlas_json." + e, t.bw = 20)
    }, t.SCYUANBAO = function (t, e) {
        t.bs = "SCAtlas_json." + e, t.bw = 15
    }, t.MRHLSTR = function (t, e, i, o) {
        t.bs = "zlts_png_json." + e + "_png", t.by = -5 * o, t.bw = 30
    }, t.WQYBFUNC = function (t, e) {
        t.bs = "wybqAltas_json." + e
    }, t.WYBQEFUNCL1 = function (t, e, i) {
        e.x = t.fx + t.totalWid, e.y = t.fy, t.totalWid += 30, e.$setScaleX(1), e.$setScaleY(1)
    }, t.WYBQEFUNCL2 = function (t, e, i) {
        e.x = t.fx + t.totalWid, e.y = t.fy, t.totalWid += 35, e.$setScaleX(1), e.$setScaleY(1)
    }, t.WYBQEFUNCL3 = function (t, e, i) {
        t.bw = 30, 0 == i ? (e.x = t.fx, e.y = t.fy + 10, e.$setScaleX(.7), e.$setScaleY(.7)) : 1 == i ? (e.x = t.fx + 60, e.y = t.fy + 10, e.$setScaleX(.7), e.$setScaleY(.7)) : 2 == i && (e.x = t.fx + 22, e.y = t.fy, e.$setScaleX(1), e.$setScaleY(1))
    }, t.POOL = [], t
}();
__reflect(ImageText.prototype, "ImageText");
var Sex;
! function (t) {
    t[t.MAN = 1] = "MAN", t[t.WOMAN = 2] = "WOMAN"
}(Sex || (Sex = {}));
var E_RoleShowType;
! function (t) {
    t[t.BODY = 1] = "BODY", t[t.HORSE = 2] = "HORSE", t[t.WING = 3] = "WING", t[t.WEAPON = 4] = "WEAPON", t[t.HALO = 5] = "HALO"
}(E_RoleShowType || (E_RoleShowType = {}));
var ActivityType;
! function (t) {
    t[t.COMMON_ACT = 35] = "COMMON_ACT", t[t.SPRING_FESTIVAL = 36] = "SPRING_FESTIVAL", t[t.CONSUME_ACT = 29] = "CONSUME_ACT"
}(ActivityType || (ActivityType = {}));
var MainMenuBtn = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sortIndex = 0, e.noticY = 0, e._isNoticVis = !1, e._isDouble = !1, e._isZk = !1, e._isShowEff = !1, e
    }
    return __extends(e, t), e.prototype.partAdded = function (e, i) {
        t.prototype.partAdded.call(this, e, i)
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this._icon && (this.imgIcon.source = this._icon), this._down && (this.imgDown.source = this._down), this.imgNotic && this.updateNoticVis()
    }, Object.defineProperty(e.prototype, "icon", {
        get: function () {
            return this._icon
        },
        set: function (t) {
            t != this._icon && (this._icon = t, this.imgIcon && (this.imgIcon.source = t))
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "down", {
        get: function () {
            return this._down
        },
        set: function (t) {
            t != this._down && (this._down = t, this.imgDown && (this.imgDown.source = t))
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setNoticVis = function (t) {
        t != this._isNoticVis && (this._isNoticVis = t, this.imgNotic && this.updateNoticVis())
    }, e.prototype.addImgTR = function (t) {
        var e = this[t];
        e || (e = this[t] = new eui.Image(t), e.top = e.right = 0, this.addChild(e))
    }, e.prototype.removeImg = function (t) {
        var e = this[t];
        e && DisplayUtil.remove(e)
    }, e.prototype.setDouble = function (t) {
        this._isDouble != t ? (this._doubleImg || (this._doubleImg = new eui.Image, this._doubleImg.source = "MainScreen_json.double", this._doubleImg.right = 0), DisplayUtil.addBy(this._doubleImg, this)) : this._doubleImg && DisplayUtil.remove(this._doubleImg)
    }, e.prototype.setZk = function (t, e, i) {
        void 0 === e && (e = 8), void 0 === i && (i = 0), this._isZk != t && (this._isZk = t, t ? (this._zkImg || (this._zkImg = new eui.Image, this._zkImg.top = 0), this._zkImg.right = i, this._zkImg.source = "chouka_json.z" + e, DisplayUtil.addBy(this._zkImg, this, 1)) : this._zkImg && DisplayUtil.remove(this._zkImg))
    }, e.prototype.updateNoticVis = function () {
        this._isNoticVis ? (DisplayUtil.addBy(this.imgNotic, this), this.noticY && (this.imgNotic.y = this.noticY)) : DisplayUtil.remove(this.imgNotic)
    }, e.prototype.getNoticVis = function () {
        return this._isNoticVis
    }, e.prototype.createLbRemain = function () {
        this.lbRemain || (this.lbRemain = new eui.Label, this.lbRemain.size = 15, this.lbRemain.textColor = 1090116, this.lbRemain.y = 85, this.lbRemain.horizontalCenter = 0)
    }, e.prototype.setLbRemainY = function (t) {
        this.lbRemain && (this.lbRemain.y = t)
    }, e.prototype.setLbRemainColor = function (t) {
        this.lbRemain.textColor = t
    }, e.prototype.$onAddToStage = function (e, i) {
        t.prototype.$onAddToStage.call(this, e, i), this.vo && this.vo.remainTime && (this.createLbRemain(), DisplayUtil.addBy(this.lbRemain, this), this.updateTime(this), GameGlobal.tick.addInterv(this.updateTime, 1e3, this)), DisplayUtil.popBtnStyle(this.imgIcon), this.updateEff()
    }, e.prototype.$onRemoveFromStage = function () {
        t.prototype.$onRemoveFromStage.call(this), GameGlobal.tick.removeInterv(this.updateTime, this), this.updateEff(), DisplayUtil.removePopBtnStyle(this.imgIcon)
    }, e.prototype.startTime = function () {
        this.createLbRemain(), this.updateTime(this), this.$stage && DisplayUtil.addBy(this.lbRemain, this), GameGlobal.tick.addInterv(this.updateTime, 1e3, this)
    }, e.prototype.endTime = function () {
        GameGlobal.tick.removeInterv(this.updateTime, this)
    }, e.prototype.updateTime = function (t) {
        t.vo && t.lbRemain && (t.vo._isShowTime ? t.lbRemain.text = DateUtils.getFormatBySecond(t.vo.getRemainSec(), DateFormat.MAX_UNIT) : t.lbRemain.text = "")
    }, e.prototype.isShowEff = function (t) {
        this._isShowEff != t && (this._isShowEff = t, this.updateEff())
    }, e.prototype.updateEff = function () {
        var t = this;
        t._isShowEff ? t.$stage && !t._eff && (t._eff = EffectMgr.addEff("uieff/1002", t, 45, 45, 600)) : t._eff && (EffectMgr.getIns().removeEff(t._eff), t._eff = null)
    }, e
}(eui.Component);
__reflect(MainMenuBtn.prototype, "MainMenuBtn", ["eui.UIComponent", "egret.DisplayObject"]);
var InstanceZonesRankData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.name = "", this.zhanli = 0, this.layer = 0
    }, t
}();
__reflect(InstanceZonesRankData.prototype, "InstanceZonesRankData");
var InstanceZonesRankItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ItemSYTPaiHangSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, e.prototype.dataChanged = function () {
        var t = this.data,
            e = t.name,
            i = t.zhanli,
            o = t.layer;
        this.txtPaiMing.text = this.itemIndex + 1 + "", this.txtName.text = e, this.txtZhanli.text = i + "", this.txtLayer.text = o + ""
    }, Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            t >= 0 && (this._itemIndex = t, 0 == (1 & t) ? this.background.source = "JJCAtlas_json.bg9" : this.background.source = "JJCAtlas_json.bg10")
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(InstanceZonesRankItem.prototype, "InstanceZonesRankItem");
var ProgressB = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._size = new egret.Point(400, 30), e._offSet = new egret.Point(1, 1), e.MAXWIDTH = 398, e.skinName = "resource/eui_skins/gameComp/ProgressBSkin.exml", e.max = 0, e.curNum = new ActNumber(0), e
    }
    return __extends(e, t), e.create = function () {
        return new e
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, e.prototype.setBg = function (t, e) {
        this.bg.source = t, this.bg.$scale9Grid = e
    }, e.prototype.setBar = function (t, e) {
        this.bar.source = t, this.bar.$scale9Grid = e
    }, Object.defineProperty(e.prototype, "size", {
        get: function () {
            return this._size
        },
        set: function (t) {
            this._size = t, this.validate()
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "offSet", {
        get: function () {
            return this._offSet
        },
        set: function (t) {
            this._offSet = t, this.validate()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.validate = function () {
        this.bg.x = 0, this.bg.y = 0, this.bg.width = this.size.x, this.bg.height = this.size.y, this.bar.x = this.offSet.x, this.bar.y = this.offSet.y, this.bar.width = this.size.x - (this.offSet.x << 1), this.bar.height = this.size.y - (this.offSet.y << 1), this.txt.width = this.size.x, this.txt.height = this.size.y, this.MAXWIDTH = this.size.x - (this.offSet.x << 1)
    }, e.prototype.setVal = function (t, e) {
        this.max = t, this.curNum.val = e, this.realCur = e, this.txt.text = e + "/" + t;
        var i = Math.min(e / t, 1);
        this.bar.width = this.MAXWIDTH * Math.min(i, 1)
    }, e.prototype.setTxtVis = function (t) {
        this.txt.visible = t
    }, e.prototype.addFire = function (t, e, i, o) {
        var n = EffectMgr.addEff("uieff/progFire", this, i, o, 1e3, 1e3);
        n.scaleX = t, n.scaleY = e
    }, e.prototype.curTo = function (t) {
        var e = this;
        e.realCur = t, e.eff || (e.eff = EffectMgr.addEff("uieff/progBullet", e, e.bar.x + e.bar.width - 10, e.bar.y + 12, 900, -1)), egret.Tween.removeTweens(e.curNum), egret.Tween.get(e.curNum, {
            loop: !1,
            onChange: this.onTwnChange,
            onChangeObj: this
        }).to({
            val: t
        }, 600).wait(400).call(e.onTRweemEmd, this)
    }, e.prototype.stop = function () {
        egret.Tween.removeTweens(this.curNum), this.onTRweemEmd()
    }, e.prototype.onTwnChange = function () {
        var t = this;
        t.txt.text = t.curNum.val + "/" + t.max;
        var e = Math.min(t.curNum.val / t.max, 1);
        t.bar.width = t.MAXWIDTH * e, t.eff && (t.eff.x = t.bar.x + t.bar.width - 10, t.eff.y = t.bar.y + 12)
    }, e.prototype.onTRweemEmd = function () {
        this.eff && (EffectMgr.getIns().removeEff(this.eff), this.eff = null)
    }, e
}(eui.Component);
__reflect(ProgressB.prototype, "ProgressB");
var RingMask = function () {
    function t(t, e) {
        this.lineThick = 1, this.target = t, this.shap = new egret.Shape, this.shap.graphics.lineStyle(1), this.shap.graphics.drawArc(10, 10, 10, 0, 2 * Math.PI), e && (e.addChild(this.shap), t.mask = this.shap, this.shap.$setX(t.x), this.shap.$setY(t.y))
    }
    return t.prototype.setRightInfo = function (t, e, i, o) {
        this.side = Side.RIGHT, this.clockWise = o, this.lineThick = i, this.radius = t, this.offSet = e, this.shap.graphics.lineStyle(i), this.shap.graphics.drawArc(t, t, t - e, 0, 2 * Math.PI, o)
    }, t.prototype.setLeftInfo = function (t, e, i, o) {
        this.side = Side.LEFT, this.clockWise = o, this.lineThick = i, this.radius = t, this.offSet = e, this.shap.graphics.lineStyle(i), this.shap.graphics.drawArc(t, t, t - e, 0, 2 * Math.PI, o)
    }, t.prototype.setPer = function (t) {
        var e;
        switch (this.shap.graphics.clear(), this.shap.graphics.lineStyle(this.lineThick), this.side) {
            case Side.LEFT:
                this.clockWise;
                break;
            case Side.RIGHT:
                this.clockWise ? (e = 360 - 360 * t, this.shap.graphics.drawArc(this.radius, this.radius, this.radius - this.offSet, 0, e * Math.PI / 180, !0)) : (e = 360 * t, this.shap.graphics.drawArc(this.radius, this.radius, this.radius - this.offSet, 0, e * Math.PI / 180, !1))
        }
    }, t
}();
__reflect(RingMask.prototype, "RingMask");
var Side;
! function (t) {
    t[t.LEFT = 0] = "LEFT", t[t.RIGHT = 1] = "RIGHT"
}(Side || (Side = {}));
var TBTN = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.classT = "TBTN", e.sort = 0, e._label = "", e._sel = !1, e
    }
    return __extends(e, t), e.create = function () {
        var t = this.P.length ? this.P.pop() : new e;
        return t.skinName || (t.skinName = "TBTNMSkin"), t
    }, e.prototype.dispose = function () {
        e.P.push(this)
    }, e.prototype.partAdded = function (e, i) {
        t.prototype.partAdded.call(this, e, i)
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.imgNotice.visible = !1, this.lb.text = this._label, this.touchChildren = !1
    }, e.prototype.setNoticVis = function (t) {
        this.imgNotice.visible = t
    }, Object.defineProperty(e.prototype, "label", {
        get: function () {
            return this._label
        },
        set: function (t) {
            this._label != t && (this._label = t, this.lb && (this.lb.text = this._label))
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "text", {
        get: function () {
            return this._label
        },
        set: function (t) {
            this._label != t && (this._label = t, this.lb && (this.lb.text = this._label))
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel != t && (this._sel = t, this.updateState())
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateState = function () {
        this._sel ? this.currentState = "upAndSelected" : this.currentState = "up"
    }, e.prototype.$onAddToStage = function (e, i) {
        t.prototype.$onAddToStage.call(this, e, i), this.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onDown, this)
    }, e.prototype.$onRemoveFromStage = function () {
        t.prototype.$onRemoveFromStage.call(this)
    }, e.prototype.onDown = function () {
        SoundManager.getInstance().playLocalEff("click")
    }, e.P = [], e
}(eui.Component);
__reflect(TBTN.prototype, "TBTN", ["eui.UIComponent", "egret.DisplayObject"]);
var YellowBtn = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.NON = 2306147, e.SEL = 1133467, e
    }
    return __extends(e, t), e.prototype.partAdded = function (e, i) {
        t.prototype.partAdded.call(this, e, i), DisplayUtil.popBtnStyle(this)
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onClick, this)
    }, e.prototype.onClick = function (t) {
        null != this.funcIf && this.funcIf.func.apply(this.funcIf.thisObj, [t])
    }, e.prototype.addEnt = function (t, e, i) {
        this.addEventListener(t, e, i)
    }, e.prototype.dispEnt = function (t) {
        this.dispatchEventWith(t)
    }, Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, t ? (this.bg.fillColor = this.SEL, GameGlobal.modelRole.notify(e.YELLOWBTNSELECTED, this)) : this.bg.fillColor = this.NON
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, "string" == typeof t ? this.label = t : this.label = t.label
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t
        },
        enumerable: !0,
        configurable: !0
    }), e.CLICK = "touchTap", e.YELLOWBTNSELECTED = "YELLOWBTNSELECTED", e
}(eui.Button);
__reflect(YellowBtn.prototype, "YellowBtn", ["eui.UIComponent", "egret.DisplayObject", "eui.IItemRenderer"]);
var MidPop = function () {
    function t(t) {
        if (this.initScaleX = 1, this.initScaleY = 1, t) {
            this.disObj = t;
            var e = t.width,
                i = t.height;
            t.contentWidth && t.contentHeight && (e = Math.max(e, t.contentWidth), i = Math.max(i, t.contentHeight));
            var o = e / 2,
                n = i / 2;
            t.$setAnchorOffsetX(o), t.$setAnchorOffsetY(n), t.x += o, t.y += n, this.initScaleX = t.scaleX, this.initScaleY = t.scaleY
        }
    }
    return t.prototype.addEvent = function (t) {
        t && (this.disObj = t, this.initScaleX = t.scaleX, this.initScaleY = t.scaleY, t.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onbegin, this))
    }, t.prototype.onbegin = function (t) {
        t.stopImmediatePropagation(), this.disObj.scaleX = this.disObj.scaleX * this.initScaleX * .98, this.disObj.scaleY = this.disObj.scaleY * this.initScaleY * .98, GameGlobal.stage.once(egret.TouchEvent.TOUCH_END, this.onEnd, this)
    }, t.prototype.onEnd = function () {
        this.disObj.scaleX = this.initScaleX, this.disObj.scaleY = this.initScaleY
    }, t.prototype.offEvent = function () {
        this.disObj && this.disObj.removeEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onbegin, this)
    }, t
}();
__reflect(MidPop.prototype, "MidPop");
var MoveEff = function () {
    function t(t) {
        this.group = t
    }
    return t.prototype.move = function () {
        for (var t = this.group.$children, e = this.group.numChildren, i = 0; e > i; i++) {
            var o = t[i];
            o.visible = !1, o.setMove(100 * i)
        }
    }, t
}();
__reflect(MoveEff.prototype, "MoveEff");
var MoveItem1 = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.staticX = this.cont.x, this.staticY = this.cont.y
    }, e.prototype.effShow = function (e) {
        t.prototype.effShow.call(this, e);
        var i = (e.cont.height, -e.cont.height / 2),
            o = e.staticY;
        e.cont.y = i, egret.Tween.get(e.cont).to({
            y: o
        }, 500, egret.Ease.backOut)
    }, e
}(PopItem);
__reflect(MoveItem1.prototype, "MoveItem1");
var InstanceZonesRankView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "InstanceZonesRankSkin", e
    }
    return __extends(e, t), e.prototype.init = function () {
        this.sourceData = new eui.ArrayCollection
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.init(), this.rankAwardBtn.visible = !0, DisplayUtil.popBtnStyle(this.rankAwardBtn), this.rankAwardBtn.textFlow = HtmlUtil.underLine("排名奖励"), this.container.dataProvider = this.sourceData, this.container.itemRenderer = InstanceZonesRankItem, this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.rankAwardBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
    }, e.prototype.addMsg = function () {
        this._data.eventMsg && EventCenter.addMsg(this._data.eventMsg, this.onUpdate, this)
    }, e.prototype.removeMsg = function () {
        this._data.eventMsg && EventCenter.removeMsg(this._data.eventMsg, this.onUpdate, this)
    }, e.prototype.onTouch = function () {
        this._data.btnCallback && this._data.thisObj && this._data.btnCallback.call(this._data.thisObj)
    }, e.prototype.onUpdate = function (t) {
        this.sourceData.source = t.data.tempArr;
        var e = t.data.mySort,
            i = t.data.highestLevel;
        e > 0 ? this.txtMinePaiMing.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color(e, "#10a244")) : this.txtMinePaiMing.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color("未上榜", "#10a244")), i > 0 ? this.txtMineTongGuan.textFlow = HtmlUtil.parse("本周通关数: " + HtmlUtil.color(i, "#10a244")) : this.txtMineTongGuan.text = "本周通关数: 0"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this._data = e, this.addMsg(), this.base.title = this._data.title, this._data.callback && this._data.thisObj && this._data.callback.call(this._data.thisObj)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(InstanceZonesRankView.prototype, "InstanceZonesRankView");
var RankWindowData = function () {
    function t() {
        this.title = "", this.eventMsg = "", this.callback = null, this.thisObj = null, this.btnCallback = null
    }
    return t
}();
__reflect(RankWindowData.prototype, "RankWindowData");
var AttributeData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.name = "", this.value = null, this.addValue = null, this.nameColor = "#93271F", this.valueColor = "#684C43", this.addValueColor = "#10a244"
    }, t
}();
__reflect(AttributeData.prototype, "AttributeData");
var NameBar = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.quality = 3, e._perc = 1, e.xianjielv = -1, e
    }
    return __extends(e, t), e.create = function () {
        return new e
    }, e.prototype.setType = function (t) {}, e.prototype.show = function () {}, e.prototype.setName = function (t) {
        var e = this;
        t ? (e.labelName || (e.labelName = new eui.Label, e.labelName.$setSize(16), e.labelName.$setY(10)), e.labelName.parent || e.addChild(e.labelName), e.labelName.$setTextColor(e.getQualityColor(e.quality)), e.labelName.$setText(t), e.labelName.$setX(-e.labelName.textWidth >> 1), e.graphics.clear(), e.graphics.beginFill(0, .5), e.graphics.drawRect(e.labelName.$getX(), 10, e.labelName.width, e.labelName.height), e.alignXianJie()) : e.labelName && e.labelName.$parent && e.labelName.$parent.removeChild(e.labelName)
    }, e.prototype.setXianJie = function (t) {
        this.xianjielv != t && (t ? (this.xiuXianImg || (this.xiuXianImg = new eui.Image, this.xiuXianImg.touchEnabled = !1, this.xiuXianImg.scaleX = this.xiuXianImg.scaleY = .7), this.xiuXianImg.source = "xiuXian_json.l" + t, this.xiuXianImg.$parent || DisplayUtil.addBy(this.xiuXianImg, this), this.alignXianJie()) : this.xiuXianImg && DisplayUtil.remove(this.xiuXianImg))
    }, e.prototype.alignXianJie = function () {
        this.xiuXianImg && (this.xiuXianImg.x = this.labelName.$getX() - this.labelName.anchorOffsetX - 65, this.xiuXianImg.y = this.labelName.$getY() - 10)
    }, e.prototype.setQuality = function (t) {
        this.labelName && this.labelName.$setTextColor(this.getQualityColor(t))
    }, e.prototype.getQualityColor = function (t) {
        var e = 65280;
        return 2 == t ? e = 255 : 3 == t ? e = 16711935 : 4 == t ? e = 16776960 : 5 == t && (e = 16711680), e
    }, e
}(egret.Sprite);
__reflect(NameBar.prototype, "NameBar");
var RoleHPBar = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._perc = 1, e.imgBg = new egret.Bitmap, e.addChild(e.imgBg), e.imgBar = new egret.Bitmap, e.addChild(e.imgBar), e
    }
    return __extends(e, t), e.prototype.setType = function (t) {
        var e, i;
        1 == t ? (e = "resource/ui/scene/h1g.png", i = "resource/ui/scene/h1_bar.png", this.imgBar.y = 2) : (e = "resource/ui/scene/h1.png", i = "resource/ui/scene/h1_bar.png", this.imgBar.y = 3), RES.getResByUrl(e, this.onBarImgLoaded, this, RES.ResourceItem.TYPE_IMAGE), RES.getResByUrl(i, this.onBGImgLoaded, this, RES.ResourceItem.TYPE_IMAGE)
    }, e.prototype.onBarImgLoaded = function (t) {
        t && (this.imgBar.texture = t, this.imgBar.x = -t.textureWidth / 2), this.updateView()
    }, e.prototype.onBGImgLoaded = function (t) {
        t && (this.imgBg.texture = t, this.imgBg.x = -t.textureWidth / 2), this.updateView()
    }, e.prototype.show = function () {}, Object.defineProperty(e.prototype, "percent", {
        set: function (t) {
            this._perc = t, this.updateView()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateView = function () {
        this.imgBar.texture && (this.imgBar.width = this.imgBar.texture.textureWidth * this._perc)
    }, e.prototype.setName = function (t) {
        var e = this;
        t ? (e.labelName || (e.labelName = new egret.TextField, e.labelName.y = -20, e.labelName.stroke = 1, e.labelName.size = 20), e.labelName.parent || e.addChild(e.labelName), e.labelName.text = t, e.labelName.x = -e.labelName.textWidth / 2) : e.labelName && e.labelName.parent && e.labelName.parent.removeChild(e.labelName)
    }, e
}(egret.Sprite);
__reflect(RoleHPBar.prototype, "RoleHPBar");
var SceneItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.view = new DepSprite, e.type = Role.T_ITEM, e.depadd = -1e6, e.img = new egret.Bitmap, e.view.addChild(e.img), e.isView = !0, e
    }
    return __extends(e, t), e.prototype.initIMGUrl = function (t) {
        RES.getResByUrl(t, function (t) {
            var e = this.img;
            e.texture = t, t && (e.x = -t.textureWidth / 2, e.y = -t.textureHeight + 10)
        }, this)
    }, e.prototype.onAdd = function () {
        this.mapScene.map.fontLayer.depAddChild(this.view)
    }, e.prototype.advanceTime = function (t) {
        var e = !this.dead;
        return e
    }, e.prototype.onRemove = function () {
        this.mapScene.map.fontLayer.depRemoveChild(this.view)
    }, e
}(SceneObject);
__reflect(SceneItem.prototype, "SceneItem");
var AttributeLabel = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "AttributeLabelSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.len = 8
    }, e.prototype.setData = function (t) {
        for (var e = t.length, i = "", o = 0; e > o; o++) {
            var n = t[o];
            if (i += HtmlUtil.color(n.name + ": ", n.nameColor), null != n.value)
                if (null != n.addValue) {
                    var a = this.numToStr(n.value);
                    i += HtmlUtil.color(a, n.valueColor) + HtmlUtil.color("+" + n.addValue, n.addValueColor)
                } else i += HtmlUtil.color(n.value + "", n.valueColor);
            e - 1 > o && (i += "\n")
        }
        this.label.textFlow = HtmlUtil.parse(i)
    }, e.prototype.getInterval = function (t) {
        void 0 === t && (t = 0);
        for (var e = "", i = 0; t > i; i++) e += "\n";
        return e
    }, e.prototype.setTextSize = function (t) {
        this.label.size = t
    }, e.prototype.setLineSpacing = function (t) {
        this.label.lineSpacing = t
    }, e.prototype.numToStr = function (t) {
        var e = t + "",
            i = this.len - e.length;
        if (i > 0)
            for (var o = 0; i > o; o++) e += "  ";
        return e
    }, e
}(eui.Component);
__reflect(AttributeLabel.prototype, "AttributeLabel");
var MonsterCreator = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isShowing = !1, e.npcList = [], e.count = 0, e.interv = 0, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        this.checkShow(), GameGlobal.msgCenter.on(-1, this.onMonsterRemove, this)
    }, e.prototype.onRemove = function () {
        GameGlobal.msgCenter.off(-1, this.onMonsterRemove, this)
    }, e.prototype.advanceTime = function (t) {
        if (this.interv += t, this.interv >= 200) {
            for (var e = this.npcList, i = 0, o = e.length; o > i; i++) {
                e[i];
                GlobalAi.attackAnyEnemy(e[i], 250)
            }
            this.checkShow(), this.interv = 0, this.createMonster()
        }
        return !0
    }, e.prototype.checkShow = function () {
        var t = this.mapScene.map.scrollMap.focusx,
            e = this.mapScene.map.scrollMap.focusy,
            i = MoveUtil.dist(t, e, this.x, this.y);
        16e4 >= i ? this.showMonsters() : this.removeMonsters()
    }, e.prototype.showMonsters = function () {
        this.isShowing || (this.isShowing = !0, this.createMonster())
    }, e.prototype.createMonster = function () {
        if (this.isShowing) {
            var t = this.cfg.monster.count,
                e = this.cfg.monster.id;
            if (this.npcList.length < t) {
                var i = Role.create();
                i.x = this.x + 200 * Math.random(), i.y = this.y + 200 * Math.random(), i.ai_bornx = i.x, i.ai_borny = i.y;
                var o = CFG_Npc.LIB[e];
                CFG_Npc.copyNpcAttr(i, o), i.att = 1, i.setBody(o.m), i.sysid = e, i.force = 2, i.id = this.id + "_m" + this.mapScene.map.ITEMINDEX++, i.type = Role.FIGHTNPC;
                var n = new GameObjectPathAccording;
                n.tar = i, i.addPlug(n);
                var a = Vo_Skill.create(0, 1);
                i.skillList = [a], this.npcList.push(i), this.mapScene.addUnit(i)
            }
        }
    }, e.prototype.removeMonsters = function () {
        if (this.isShowing) {
            this.isShowing = !1;
            for (var t = this.npcList.length - 1; t >= 0; t--) {
                var e = this.npcList[t];
                e.mapScene && this.mapScene.removeUnit(e)
            }
        }
    }, e.prototype.onMonsterRemove = function (t) {
        var e = this.npcList.indexOf(t); - 1 != e && this.npcList.splice(e, 1)
    }, e
}(SceneObject);
__reflect(MonsterCreator.prototype, "MonsterCreator");
var App = function () {
    function t() {
        this.isAct = !0
    }
    return t.prototype.init = function () {
        var t = this;
        GameGlobal.stage.addEventListener(egret.Event.ACTIVATE, this.onACT, this), GameGlobal.stage.addEventListener(egret.Event.DEACTIVATE, this.onDeact, this), egret.lifecycle.onResume = this.onACT, egret.lifecycle.onPause = this.onDeact;
        try {
            if (AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_WAN) {
                var e = window.BK;
                e.onEnterForeground(t.onACT), e.onEnterBackground(t.onDeact)
            }
        } catch (i) {}
    }, t.getIns = function () {
        return this._ins || (this._ins = new t), this._ins
    }, t.prototype.onACT = function () {
        this.isAct = !0, SoundManager.getInstance().removeStopFlag("deact")
    }, t.prototype.onDeact = function () {
        this.isAct = !1, SoundManager.getInstance().addStopFlag("deact")
    }, Object.defineProperty(t, "serverTimestamp", {
        get: function () {
            return GameGlobal.modelLogin.getSerTime()
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "httpGame", {
        get: function () {
            return this._http || (this._http = new Http), this._http
        },
        enumerable: !0,
        configurable: !0
    }), t.shareIcon = "http://hjcscdn-res.xcwlxcwl.cn/HuanJieChuanShuoQzone/login/loginres/desktopPng.jpg", t
}();
__reflect(App.prototype, "App");
var SceneFaBao = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.view = new DepSprite, e.vertPerc = 0, e.renderInt = 0, e.part = Part.create(), e.part.setAct(1), e.view.addChild(e.part), e.part.$setY(-130), e.part.scaleX = e.part.scaleY = .5, e
    }
    return __extends(e, t), e.create = function () {
        var t = new e;
        return t
    }, e.prototype.advanceTime = function (t) {
        var e = this;
        if (e.renderInt += t, e.renderInt >= 100) {
            var i = e.part._perc + e.renderInt / 1e3;
            i > 1 && (i -= i >> 0), e.part.setPec(i), e.renderInt = 0
        }
        var o = e.tar.x - e.x,
            n = e.tar.y - e.y;
        return o > 40 || -40 > o || n > 40 || -40 > n ? (e.x = .1 * o + e.x, e.y = .1 * n + e.y) : e.part.$setY(-130 + 20 * Math.sin(e.vertPerc += .05)), e.view.dep = e.y, e.view.$setX(e.x), e.view.$setY(e.y), !0
    }, e.prototype.setModID = function (t) {
        this.part.setVal("fabao/" + t)
    }, e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.view.$setX(this.x), this.view.$setY(this.y), this.mapScene.map.fontLayer.depAddChild(this.view)
    }, e.prototype.onRemove = function () {
        t.prototype.onRemove.call(this), this.mapScene.map.fontLayer.depRemoveChild(this.view)
    }, e
}(SceneObject);
__reflect(SceneFaBao.prototype, "SceneFaBao");
var ScenePet = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.patchAccounding = new GameObjectPathAccording, e.view = new DepSprite, e.path = [], e.createParts(1), e.patchAccounding.tar = e, e
    }
    return __extends(e, t), e.create = function () {
        var t = new e;
        return t
    }, e.prototype.advanceTime = function (t) {
        var e = this;
        e.plugctx.dt = t;
        var i = e.invalid;
        return i && (256 & i && e.updateAct(), 128 & i && e.updateWay(), 512 & i && e.updateDepth(), e.invalid = 0), e.renderInt += t, e.renderInt >= 60 && (e.parts.perc += e.renderInt / e.actInterv, e.renderInt = 0, e.fTargetRole && (MoveUtil.dist(e.x, e.y, e.fTargetRole.x, e.fTargetRole.y) >= 1e4 ? (e.path[0] = e.fTargetRole.y, e.path[1] = e.fTargetRole.x, e.patchAccounding.route = e.path, e.patchAccounding.next()) : e.move_st && (e.move_st = 0, e.stand()))), e.move_st && e.patchAccounding.advanceTime(e.plugctx), e.view.dep = e.y, e.view.$setX(e.x), e.view.$setY(e.y), !0
    }, e.prototype.setPetID = function (t) {
        var e = CFG_Pet.PETLIB[t];
        if (e) {
            var i = CFG_MOD.LIB[e.m];
            i && (this.scale = i.scale / 100, this.setBody(i.mid))
        }
    }, e.prototype.onRemove = function () {
        t.prototype.onRemove.call(this)
    }, e.prototype.setTJEff = function (t) {
        if (t) {
            var e = "eff/jinquan";
            this.tjEff ? this.tjEff.setVal(e) : (this.tjEff = EffectMgr.addEff(e, this.view, 0, 0, 800, -1, !0), this.view.setChildIndex(this.tjEff, 0))
        } else this.tjEff && (EffectMgr.getIns().removeEff(this.tjEff), this.tjEff = null)
    }, e
}(Role);
__reflect(ScenePet.prototype, "ScenePet");
var ScenePetSL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.view = new DepSprite, e.vertPerc = 0, e.renderInt = 0, e.part = Part.create(), e.part.setAct(1), e.view.addChild(e.part), e.part.$setY(-130), e
    }
    return __extends(e, t), e.create = function () {
        var t = new e;
        return t
    }, e.prototype.advanceTime = function (t) {
        var e = this;
        if (e.renderInt += t, e.renderInt >= 100) {
            var i = e.part._perc + e.renderInt / 1e3;
            i > 1 && (i -= i >> 0), e.part.setPec(i), e.renderInt = 0
        }
        var o = e.tar.x - e.x,
            n = e.tar.y - e.y;
        return o > 40 || -40 > o || n > 40 || -40 > n ? (e.x = .1 * o + e.x, e.y = .1 * n + e.y) : e.part.$setY(-130 + 20 * Math.sin(e.vertPerc += .05)), e.view.dep = e.y, e.view.$setX(e.x), e.view.$setY(e.y), !0
    }, e.prototype.setModID = function (t) {
        this.part.setVal("shouling/" + t)
    }, e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.view.$setX(this.x), this.view.$setY(this.y), this.mapScene.map.fontLayer.depAddChild(this.view)
    }, e.prototype.onRemove = function () {
        t.prototype.onRemove.call(this), this.mapScene.map.fontLayer.depRemoveChild(this.view)
    }, e
}(SceneObject);
__reflect(ScenePetSL.prototype, "ScenePetSL");
var SimpleNpc = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.aniInterv = 0, e.actInterv = 0, e.interv = 0, e.isVis = !1, e.nearFar = 1e4, e.type = Role.NPC, e.parts = new Parts;
        var i = new StaticPart;
        i.type = Parts.P_SHADOW, i.dep = Parts.P_SHADOW, e.parts.addPart(i), i.setVal("body/s/1"), i.setAct(4);
        var o = new Part;
        return o.type = Parts.P_BODY, o.dep = Parts.P_SHADOW, e.parts.addPart(o), e.view = new DepSprite, e.view.addChild(e.parts), e
    }
    return __extends(e, t), e.create = function () {
        return this.P.length ? this.P.pop() : new e
    }, e.prototype.initMonster = function (t) {
        this.monsterID = t;
        var e = this.monsterCFG = CFG_MONSTER.LIB[t];
        if (e) {
            this.name = e.n;
            var i = CFG_MOD.LIB[e.mx];
            i ? this.setBody(i.mid) : this.setBody(2001)
        } else this.name = "errMonSysID:" + t, this.setBody(2001);
        this.setName(this.name), this.parts.touchEnabled = !0
    }, e.prototype.initPet = function (t) {
        this.petID = t;
        var e = this.petCFG = CFG_Pet.PETLIB[t];
        e ? (this.setBody(e.m), this.name = e.n) : (this.name = "errPetSysID:" + t, this.setBody(2001)), this.setName(this.name), this.parts.touchEnabled = !0
    }, e.prototype.initNpc = function (t) {
        this.npcID = t;
        var e = CFG_Quest.LIB_NPC[t];
        this.nearFar = e.far * e.far, this.type = e.t, e ? (this.name = e.name, this.setBody(e.res)) : (this.name = "errPetSysID:" + t, this.setBody(2001)), this.setName(this.name), this.id = t, this.parts.touchEnabled = !0
    }, e.prototype.initQuestEnemy = function (t) {
        var e = CFG_Quest.LIB_NPC[t];
        this.type = Role.FIGHTNPC, this.npcID = t, e && (this.setBody(e.res), this.setName(e.name))
    }, e.prototype.initCollectNpc = function (t) {
        var e = CFG_Quest.LIB_NPC[t];
        this.type = Role.COLLECTNPC, this.npcID = t, e && (this.setBody(e.res), this.setName(e.name))
    }, e.prototype.initTransPoint = function (t) {
        this.type = Role.TP, this.nearFar = 100, this.transMapID = t.distmapid, this.transMapX = t.distmapx, this.transMapY = t.distmapy, this.setBody(100), this.setName("")
    }, e.prototype.setName = function (t) {
        this.name = t
    }, e.prototype.onT = function (t) {
        var e = GameGlobal.mapScene,
            i = e.getLifeMainRole();
        i.interaction(this), e._curSt == SceneCtrl.T_PET ? GameGlobal.layerMgr.open(UIConst.BUZHUOPET, this.va) : e._curSt == SceneCtrl.T_GUANQIA && Vo_YaoShou.isYs(this.id) && GameGlobal.layerMgr.open(UIConst.YAOSHOU, this.va)
    }, e.prototype.onAdd = function () {
        this.checkVis(), this.parts.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onRemove = function () {
        this.visFalse(), this.parts.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.sceneid || e.P.push(this), this.transMapID = 0
    }, e.prototype.advanceTime = function (t) {
        var e = this;
        if (e.interv += t, e.interv >= 200 && (e.interv = 0, e.checkVis()), e.isVis && (e.view.dep = e.y, e.actInterv += t, e.aniInterv += t, e.aniInterv >= 100)) {
            e.aniInterv = 0, e.actInterv >= 1e3 && (e.actInterv = 0);
            var i = e.actInterv / 1e3;
            this.parts.perc = i
        }
        return !0
    }, e.prototype.checkVis = function () {
        var t = this.mapScene.map.scrollMap.focusx - this.x;
        if (350 > t && t > -350) {
            var e = this.mapScene.map.scrollMap.focusy - this.y;
            500 > e && e > -500 ? this.visTrue() : this.visFalse()
        } else this.visFalse()
    }, e.prototype.visTrue = function () {
        if (!this.isVis) {
            if (this._body) {
                var t = "body/" + this._body + "/idle";
                this.parts.setPart(Parts.P_BODY, t), this.parts.setVal(3)
            }
            this.isVis = !0, this.mapScene.map.fontLayer.depAddChild(this.view), this.view.x = this.x, this.view.y = this.y
        }
    }, e.prototype.visFalse = function () {
        this.isVis && (this.isVis = !1, this.mapScene.map.fontLayer.depRemoveChild(this.view), this.parts.setPart(Parts.P_BODY, null))
    }, e.prototype.setBody = function (t) {
        if (this._body = t, t && !this.parts.dic[Parts.P_BODY]) {
            var e = Part.create();
            e.type = Parts.P_BODY, e.dep = Parts.P_BODY, this.parts.addPart(e)
        }
    }, e.prototype.interact = function (t) {
        if (this.type == Role.NPC) {
            var e = GameGlobal.modelQuest.getCurVo();
            if (e) {
                var i = e.state;
                if (0 == i && e.cfg.anpc == this.npcID) var o = CFG_Quest.getPlotByNpcInteract(e.id, i);
                else if (2 == i && e.cfg.npc == this.npcID) var o = CFG_Quest.getPlotByNpcInteract(e.id, i);
                if (o && "null" != o) return void PScriptExecuter.create().playStr(o)
            }
        } else this.type == Role.COLLECTNPC ? VCollectBar.begin(2e3, Handler.create(this, this.onCollectComp), null, Handler.create(this, this.onCollectInterrupt)) : this.type == Role.TP ? GameGlobal.mapScene.changeMap(this.transMapID, {
            enterX: this.transMapX,
            enterY: this.transMapY
        }) : this.type == Role.FIGHTNPC && GameGlobal.modelQuest.CG_ATTACKNPC(this.npcID)
    }, e.prototype.onCollectComp = function () {
        GameGlobal.modelQuest.finishQuest()
    }, e.prototype.onCollectInterrupt = function () {}, e.P = [], e
}(SceneObject);
__reflect(SimpleNpc.prototype, "SimpleNpc");
var GreenBarView = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.bar.source = "CMS1_json.pb_green2"
    }, e
}(BarView);
__reflect(GreenBarView.prototype, "GreenBarView");
var HeroSkill1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.effTime = 300, e.SKILLCFGTIME = 600, e.lifeTime = 0, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        var t = this.role;
        t.busyFlag++, t.setAction(11, 600, !1, !0);
        var e = MoveUtil.caculateWay(t.x, t.y, this.target.x, this.target.y);
        if (t.setWay(e), 4 >= e) var i = e,
            o = 1;
        else i = 8 - e, o = -1;
        var n = EffectMgr.addEff("eff/a_1", this.role.view, 0, 0, 600, 600, !1, i);
        n.scaleX = o, t.view.addChild(n)
    }, e.prototype.onRemove = function (t) {
        this.role.busyFlag--, this.role.onSkillEnd(), -1 != t && this.role.enterSkillCD()
    }, e.prototype.advanceTime = function (t) {
        var e = this,
            i = e.lifeTime + t.dt;
        if (e.lifeTime < e.effTime && i >= e.effTime) {
            var o = this.role,
                n = o.ai_skillTar;
            if (n && n.mapScene) {
                var a = Formula.caculateDmg(o, n, e.vo_skill);
                n.takeDmg(a)
            }
        }
        i > e.SKILLCFGTIME && (t.d = !0), e.lifeTime = i
    }, e
}(GameObjectPlug);
__reflect(HeroSkill1.prototype, "HeroSkill1");
var HeroSkill2 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.effTime = 300, e.SKILLCFGTIME = 600, e.lifeTime = 0, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        var t = this.role;
        t.busyFlag++, t.setAction(12, 600, !1, !0);
        var e = MoveUtil.caculateWay(t.x, t.y, this.target.x, this.target.y);
        t.setWay(e);
        var i = EffectMgr.addEff("eff/jinquan", this.role.view, 0, -60, 300, 300, !1);
        egret.Tween.get(i).to({
            x: this.target.x - t.x,
            y: this.target.y - t.y - 60
        }, 200)
    }, e.prototype.onRemove = function (t) {
        this.role.busyFlag--, this.role.onSkillEnd(), -1 != t && this.role.enterSkillCD()
    }, e.prototype.advanceTime = function (t) {
        var e = this,
            i = e.lifeTime + t.dt;
        if (e.lifeTime < e.effTime && i >= e.effTime) {
            var o = this.role,
                n = o.ai_skillTar;
            if (n && n.mapScene) {
                var a = Formula.caculateDmg(o, n, e.vo_skill);
                n.takeDmg(a);
                EffectMgr.addEff("eff/huobaozha", this.target.view, 0, 0, 400, 400, !1)
            }
        }
        i > e.SKILLCFGTIME && (t.d = !0), e.lifeTime = i
    }, e
}(GameObjectPlug);
__reflect(HeroSkill2.prototype, "HeroSkill2");
var MonsterSkill = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.effTime = 250, e.SKILLCFGTIME = 500, e.lifeTime = 0, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        var t = this.role;
        t.busyFlag++, t.setAction(11, 500, !1, !0);
        var e = GlobalAi.getNearestEmeny(t);
        if (e) {
            var i = MoveUtil.caculateWay(t.x, t.y, e.x, e.y);
            t.setWay(i)
        }
    }, e.prototype.onRemove = function (t) {
        this.role.busyFlag--, this.role.onSkillEnd(), this.role.setAction(0), -1 != t && this.role.enterSkillCD()
    }, e.prototype.advanceTime = function (t) {
        var e = this,
            i = e.lifeTime + t.dt;
        if (e.lifeTime < e.effTime && i >= e.effTime) {
            var o = this.role,
                n = o.ai_skillTar;
            if (n && n.mapScene) {
                var a = Formula.caculateDmg(o, n, e.vo_skill);
                n.takeDmg(a)
            }
        }
        i > e.SKILLCFGTIME && (t.d = !0), e.lifeTime = i
    }, e
}(GameObjectPlug);
__reflect(MonsterSkill.prototype, "MonsterSkill");
var RoleSkillCDPlug = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.time = 0, e.st = 0, e.isWorking = !1, e
    }
    return __extends(e, t), e.prototype.advanceTime = function (t) {
        var e = this.time + t.dt;
        0 == this.st && e >= 400 && (this.st = 1, this.role._act = 0, this.role.busyFlag--), e > 500 && (t.d = 1), this.time = e
    }, e.prototype.onEvent = function (t, e) {}, e.prototype.onAdd = function () {
        this.st = 0, this.time = 0, this.role.busyFlag++, this.isWorking = !0
    }, e.prototype.reEnter = function () {
        this.time = 0, 1 == this.st && (this.role.busyFlag++, this.st = 0)
    }, e.prototype.onRemove = function (t) {
        0 == this.st && this.role.busyFlag--, this.role.invalid |= 256, this.isWorking = !1
    }, e
}(GameObjectPlug);
__reflect(RoleSkillCDPlug.prototype, "RoleSkillCDPlug");
var ShiShiSkill1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.effTime = 300, e.SKILLCFGTIME = 600, e.lifeTime = 0, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        var t = this.role;
        t.busyFlag++, t.setAction(12, 600, !1, !0);
        var e = MoveUtil.caculateWay(t.x, t.y, this.target.x, this.target.y);
        t.setWay(e);
        var i = EffectMgr.addEff("eff/jinquan", this.role.view, 0, -60, 200, 200, !1);
        egret.Tween.get(i).to({
            x: this.target.x - t.x,
            y: this.target.y - t.y - 60
        }, 150)
    }, e.prototype.onRemove = function (t) {
        this.role.busyFlag--, this.role.onSkillEnd(), -1 != t && this.role.enterSkillCD()
    }, e.prototype.advanceTime = function (t) {
        var e = this,
            i = e.lifeTime + t.dt;
        if (e.lifeTime < e.effTime && i >= e.effTime) {
            var o = this.role,
                n = o.ai_skillTar;
            if (n && n.mapScene) {
                var a = Formula.caculateDmg(o, n, e.vo_skill);
                n.takeDmg(a)
            }
        }
        i > e.SKILLCFGTIME && (t.d = !0), e.lifeTime = i
    }, e
}(GameObjectPlug);
__reflect(ShiShiSkill1.prototype, "ShiShiSkill1");
var SkillStyle = function () {
    function t() {}
    return t.getStyle = function (t) {
        var e;
        return 1 == t ? e = new HeroSkill1 : 2 == t ? e = new YeManSKill : 11 == t ? e = new HeroSkill2 : 21 == t ? e = new ShiShiSkill1 : 0 == t && (e = new MonsterSkill), e
    }, t
}();
__reflect(SkillStyle.prototype, "SkillStyle");
var YeManSKill = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.effTime = 200, e.SKILLCFGTIME = 400, e.lifeTime = 0, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        var t = this.role;
        this.role.busyFlag++, t.setAction(1, 400, !1, !0);
        var e = MoveUtil.caculateWay(t.x, t.y, this.target.x, this.target.y);
        t.setWay(e);
        var i = Math.atan2(this.target.y - this.role.y, this.target.x - this.role.x);
        this.speedx = 400 * Math.cos(i), this.speedy = 400 * Math.sin(i);
        var o = EffectMgr.addEff("eff/bingdandao", this.role.view, 0, -60, 400, 400, !1);
        o.rotation = i / Math.PI * 180
    }, e.prototype.onRemove = function (t) {
        this.role.busyFlag--, this.role.setAction(0), -1 != t && this.role.enterSkillCD()
    }, e.prototype.advanceTime = function (t) {
        var e = this,
            i = this.role,
            o = e.lifeTime + t.dt,
            n = i.x + this.speedx * t.dt / 1e3,
            a = i.y + this.speedy * t.dt / 1e3;
        if (i.mapScene.map.isCanWalk(n, a) && (i.x = n, i.y = a), e.lifeTime < e.effTime && o >= e.effTime) {
            var s = i.ai_skillTar;
            if (s && s.mapScene) {
                var r = Formula.caculateDmg(i, s, e.vo_skill);
                s.takeDmg(r)
            }
        }
        o > e.SKILLCFGTIME && (t.d = !0), e.lifeTime = o
    }, e
}(GameObjectPlug);
__reflect(YeManSKill.prototype, "YeManSKill");
var SceneHpDirMoveView = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.dmgValue = 0, e.displayState = 0, e.LIFETIMECFG = 900, e.lifeTime = 0, e.view = new DepSprite, e.depadd = 1e4;
        var i = e.hpValueView = new egret.TextField;
        return i.y = -100, i.textColor = 15606306, i.bold = !0, i.stroke = 2, i.strokeColor = 0, e.view.addChild(i), e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        var t = 100 * Math.cos(this.angle),
            e = 100 * Math.sin(this.angle);
        this.isCrit ? (this.hpValueView.text = "暴击-" + this.dmgValue.toString(), this.hpValueView.size = 28) : (this.hpValueView.text = "-" + this.dmgValue.toString(), this.hpValueView.size = 26), this.view.x = this.x, this.view.y = this.y, this.mapScene.map.fontLayer.depAddChild(this.view), this.view.alpha = 1, egret.Tween.get(this.view).to({
            x: this.x + t,
            y: this.y + e
        }, 600, egret.Ease.sineOut).to({
            x: this.x + 1.4 * t,
            y: this.y + 1.6 * e,
            alpha: 0
        }, 300, egret.Ease.sineOut)
    }, e.prototype.onRemove = function () {
        this.mapScene.map.fontLayer.depRemoveChild(this.view)
    }, e.prototype.advanceTime = function (t) {
        var e = this,
            i = e.lifeTime;
        i += t, this.lifeTime = i;
        var o = i <= e.LIFETIMECFG;
        return o
    }, e
}(SceneObject);
__reflect(SceneHpDirMoveView.prototype, "SceneHpDirMoveView");
var GameObjectPathAccording = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.index = 0, e
    }
    return __extends(e, t), e.create = function () {
        var t = this.P.length ? this.P.pop() : new e;
        return t
    }, e.prototype.advanceTime = function (t) {
        var e = t.dt,
            i = this.tar;
        if (i.move_st) {
            var o = this.route;
            this.addTime += e;
            var n = this.addTime / this.allTime;
            if (n > 1) n = 1, i.x = this.dx, i.y = this.dy, o.length ? this.next() : (i.move_st = 0, i.moveComplete()), i.invalid |= 256, i.specState && (i.invalid |= 128);
            else {
                var a = this.sx + this.subx * n,
                    s = this.sy + this.suby * n;
                i.x = a, i.y = s
            }
            i.checkAlpha()
        }
    }, e.prototype.next = function () {
        var t = this.route,
            e = this.tar;
        this.addTime = 0;
        var i = t.shift(),
            o = t.shift();
        this.dx = o, this.dy = i, this.sx = e.x, this.sy = e.y;
        var n = this.subx = o - this.sx,
            a = this.suby = i - this.sy,
            s = Math.sqrt(n * n + a * a),
            r = GameGlobal.mapScene._curSt == SceneCtrl.T_TOWN ? 47 : 48,
            l = Config.getConfig(canshu_143).get(r);
        e.moveSpeed = l ? parseInt(l.key) : 150, this.allTime = s / e.moveSpeed * 1e3, e.move_st || (e.move_st = 1, e.invalid |= 256);
        var h = Math.atan2(a, n);
        this.tar.setWay(h), this.tar.invalid |= 256
    }, e.prototype.setRoute = function (t) {
        this.route = t, this.tar.move_st = 1, this.next()
    }, e.prototype.onRemove = function (t) {
        this.route = null, this.tar.move_st = 0;
        var i = e.P;
        i[i.length] = this
    }, e.prototype.onEvent = function (t, e) {
        t == Role.UEVENT_ACCPATH && (e ? (this.route = e.concat(), this.tar.move_st = 1, this.next()) : this.tar.move_st && (this.tar.move_st = 0, this.tar.invalid |= 256))
    }, e.P = [], e
}(GameObjectPlug);
__reflect(GameObjectPathAccording.prototype, "GameObjectPathAccording");
var HeroNewerPlug = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        this.moveState = -1
    }, e.prototype.advanceTime = function (t) {
        this.tar.move_st != this.moveState && (this.moveState = this.tar.move_st, this.moveState > 0 ? QuestGuideArrow.hide("run") : QuestGuideArrow.show("run"))
    }, e.prototype.onRemove = function (t) {
        QuestGuideArrow.show("run")
    }, e
}(GameObjectPlug);
__reflect(HeroNewerPlug.prototype, "HeroNewerPlug");
var UserInputPlug = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._lastT = 0, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        this.tar.mapScene.map.layer.touchEnabled = !0, this.tar.mapScene.map.layer.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onToucBegin, this)
    }, e.prototype.onRemove = function (t) {
        this.tar.mapScene.map.layer.removeEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onToucBegin, this)
    }, e.prototype.onToucBegin = function (t) {
        var e = this.tar,
            i = e.mapScene;
        if (e.ai_lockSysID = 0, e.handupbehive = null, 1 == e.specState) return void ViewAlert.show("您正在钓鱼,是否取消钓鱼?", function () {
            GameGlobal.modelFish.CG_SHOUGAN(0)
        });
        if (i._curSt == SceneCtrl.T_TOWN && e.move_st) {
            var o = egret.getTimer();
            if (o - this._lastT > 2e3) return ViewText.text("再次点击停止自动寻路"), void(this._lastT = o)
        }
        if (1 != i.map.isLoading && t.target == i.map.layer && !e.busyFlag) {
            var n = t.localX,
                a = t.localY,
                s = this.tar.mapScene.map,
                r = !1;
            if (!s.isCanWalk(this.tar.x, this.tar.y)) return void(s.isCanWalk(n, a) && this.tar.onEvent(Role.UEVENT_ACCPATH, [a, n]));
            if (s.isCanWalk(n, a)) s.searchPath(this.tar.x, this.tar.y, n, a), r = !0;
            else {
                var l = s.getNearCanWalkBlock(a / 32, n / 32);
                l && (s.searchPath(this.tar.x, this.tar.y, 32 * l.x, 32 * l.y), r = !0)
            }
            if (0 != r) {
                var h = s.getLastPath();
                if (h && h.length > 0) {
                    for (var c = 2; c < h.length; c += 2) {
                        h[c], h[c + 1]
                    }
                    this.tar.onEvent(Role.UEVENT_ACCPATH, h)
                }
            }
        }
    }, e
}(GameObjectPlug);
__reflect(UserInputPlug.prototype, "UserInputPlug");
var UserTouchInput = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.distPoint = new egret.Point, e.speed = 1, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        this.tar.mapScene.map.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onToucBegin, this), this.tar.mapScene.map.addEventListener(egret.TouchEvent.TOUCH_MOVE, this.onTouchMoved, this), this.tar.mapScene.map.addEventListener(egret.TouchEvent.TOUCH_END, this.onTouchEnd, this)
    }, e.prototype.onRemove = function (t) {
        this.tar.mapScene.map.removeEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onToucBegin, this), this.tar.mapScene.map.removeEventListener(egret.TouchEvent.TOUCH_MOVE, this.onToucBegin, this), this.tar.mapScene.map.removeEventListener(egret.TouchEvent.TOUCH_END, this.onTouchEnd, this)
    }, e.prototype.onToucBegin = function (t) {
        t.target == this.tar.mapScene.map && (this.isHandOver = !0, this.updateDistPoint(t.localX, t.localY))
    }, e.prototype.onTouchMoved = function (t) {
        t.target == this.tar.mapScene.map && (this.isHandOver = !0, this.updateDistPoint(t.localX, t.localY))
    }, e.prototype.onTouchEnd = function (t) {
        this.isHandOver = !1
    }, e.prototype.updateDistPoint = function (t, e) {
        this.distPoint.x = t, this.distPoint.y = e
    }, e.prototype.advanceTime = function (t) {
        if (this.isHandOver) {
            var e = MoveUtil.getNextPoint(this.tar.x, this.tar.y, this.distPoint.x, this.distPoint.y, this.speed, 50);
            e && this.tar.mapScene.map.isCanWalk(e.x, e.y) && (this.tar.x = e.x, this.tar.y = e.y)
        }
    }, e.prototype.advanceTime1 = function (t) {
        if (this.isHandOver) {
            var e = this.distPoint.x - this.tar.x,
                i = this.distPoint.y - this.tar.y,
                o = Math.sqrt(e * e + i * i),
                n = o > this.speed ? this.speed : o,
                a = Math.atan2(i, e),
                s = this.tar.x + Math.cos(a) * n,
                r = this.tar.y + Math.sin(a) * n;
            this.tar.mapScene.map.isCanWalk(s, r) && (this.tar.x = s, this.tar.y = r)
        }
    }, e
}(GameObjectPlug);
__reflect(UserTouchInput.prototype, "UserTouchInput");
var RndMovePlug = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.create = function () {
        var t = this.P.length ? this.P.pop() : new e;
        return t
    }, e.prototype.advanceTime = function (t) {
        var e = this;
        if (!e.role.move_st) {
            var i = e.role.mapScene.map.spaceNodes,
                o = i[Math.random() * i.length >> 0];
            e.role.directMoveTo(o.cx, o.cy)
        }
    }, e.prototype.onAdd = function () {}, e.prototype.onRemove = function () {}, e.P = [], e
}(GameObjectPlug);
__reflect(RndMovePlug.prototype, "RndMovePlug");
var SkillSelecter = function () {
    function t() {}
    return t.getBeskill = function (e) {
        for (var i, o = e.getSkillList(), n = -1, a = o.length - 1; a >= 0; a--) {
            var s = o[a];
            if (!(e.level < s.requrelv)) {
                var r = t.getSkillScore(s);
                r >= 0 && r > n && (i = s, n = r)
            }
        }
        return i
    }, t.getSkillScore = function (t) {
        var e = -1;
        return t.level > 0 && t.coolDown <= 0 && t.proprity && (e = t.proprity), e
    }, t
}();
__reflect(SkillSelecter.prototype, "SkillSelecter");
var GameGlobal = function () {
    function t() {}
    return t.getVerURL = function (e) {
        var i = t.resRoot + e;
        return i
    }, t.onSize = function (e) {
        t.layerMgr.onSize()
    }, t.initStepOne = function () {
        var e = t;
        e.socketMgr = new WebSocketMgr, e.socketMgr.init(), e.resMgr = new RESManager, e.layerMgr = new LayerManager, t.layerMgr.init(t.gameMain), t.mainEtry = new MainEntry, t.mainEtry.initialize();
        var i = UIConst,
            o = e.layerMgr;
        o.reg(i.IOSRECHARGESYS, VIosRechargeSys, o.UI_Message), o.reg(i.ALERT, ViewAlert, o.UI_Message), o.reg(i.WXFAVORITE, VWXFavoritePnl, o.UI_MainMiddle, 1, 1), o.reg(i.WXGAMECOIN, VWXUserFuliPnl, o.UI_MainMiddle, 1, 1), o.reg(i.WXSHARE1, VWXShare1Pnl, o.UI_MainMiddle, 1, 1), o.reg(i.XYGIFT, XinYueGiftView, o.UI_MainMiddle, 1, 1), o.reg(i.WXSHARE, VWXSharePnl, o.UI_MainMiddle, 1), o.reg(i.GETCZHONGBAO, VWXGetSFCZHongBao, o.UI_MainMiddle, 1), o.reg(i.TASTEVIP, VTasteVip, o.UI_Message), o.reg(i.TASTEVIPING, VTasteViping, o.UI_MainMiddle, 1), o.reg(i.TASTEVIPOVERTIME, VTasteVipOvertime, o.UI_MainMiddle, 1), o.reg(i.USEV3, VUseV3, o.UI_MainMiddle, 1), e.modelLogin = new ModelLogin, e.modelLogin.listenServ(e.socketMgr), e.modelBattle = new ModelBattle, e.modelBattle.listenServ(e.socketMgr), e.modelSetting = new ModelSetting, e.modelSetting.listenServ(e.socketMgr)
    }, t.initStepTwo = function () {
        t.registerUI(), t.registerModel()
    }, t.registerUI = function () {
        var e = UIConst,
            i = t.layerMgr;
        i.reg(e.CONNECT_WORLD, View_ConnectWorld, i.UI_Message), i.reg(e.HERODETAIL, VHeroDetail, i.UI_Message), i.reg(e.CHANGENAME, VChangeName, i.UI_Message), i.reg(e.SETTING, VGameSetting, i.UI_Message), i.reg(e.AWARD, VAwardPnl, i.UI_Message), i.reg(e.GKOFFLINE, VGuanQiaOffLine, i.UI_Message, 1), i.reg(e.GUANQIASCENE, VBossSceneUI, i.UI_floorUI), i.reg(e.GUANQIABOSS, VGuanQiaBossPnl, i.UI_MainMiddle, 1, 1), i.reg(e.GKBOSSAWRAD, VGuanQiaBossAward, i.UI_Message), i.reg(e.BATTLELOSE, VGuanQiaLose, i.UI_Message), i.reg(e.GUANQIARANK, VGuanQiaRnk, null, 1, 1), i.reg(e.GKCHAPTER, VGuanQiaAward, i.UI_Main), i.reg(e.QIUZHU, VQiuZhu, i.UI_Message), i.reg(e.GM, View_GM_Panel, i.UI_Message), i.reg(e.STRINGTIP, VStringTip, i.UI_Message), i.reg(e.RECONNECT, ViewOffLinePnl, i.UI_Message), i.reg(e.VIEWTEXT, ViewText, i.UI_Tips), i.reg(e.FLOATITEMTIP, ViewItemFloatTip, i.UI_Tips), i.reg(e.PROMPT, ViewPrompt, i.UI_Message), i.reg(e.VIEWWENHAO, ViewWenHao, i.UI_Message), i.reg(e.UIBG, ViewUIBG, i.UI_floorUI), i.reg(e.STRUP, ViewStrUp, i.UI_Tips), i.reg(e.SPECSCENEBAR, VSpecSceneBar, i.UI_floorUI), i.reg(e.TOPUI, ViewMainTop, i.UI_MainBottom), i.reg(e.HEADUI, View_HeroHead, i.UI_floorUI), i.reg(e.BUFFLIST, ViewBuffContainer, i.UI_floorUI), i.reg(e.BUFFINFO, View_buffInfo, i.UI_Message), i.reg(e.WORLDMAPENTRY, VWorldMapEntry, i.UI_floorUI), i.reg(e.MAINMENU, MainMenu), i.reg(e.BOTTOM2, ViewMainBottom2, i.UI_floorUI), i.reg(e.BOTTOM_XIN_SHOU, ViewChatXinShouMsg, i.UI_MainBottom), i.reg(e.LEFTUI, ViewLeftUI, i.UI_floorUI), i.reg(e.RIGHTUI, ViewRightUI, i.UI_floorUI), i.reg(e.MAINTOWN, VTopActivity, i.UI_MainBottom, 1, 1), i.reg(e.LOADING, ViewLoading, i.UI_Message), i.reg(e.LOADING_VIEW, LoadingView), i.reg(e.QUEST, ViewQuest, i.UI_floorUI), i.reg(e.QUESTDLG, VQuestDLG, i.UI_Message), i.reg(e.ROLEPNL, ViewRolePnl, i.UI_MainMiddle, 1, 1), i.reg(e.ROLEATTR, VRoleAttr, i.UI_Message), i.reg(e.WORLDMAP, VWorldMap, i.UI_Main), i.reg(e.WORLDMAPPROMPT, VWorldMapPrompt, i.UI_Message), i.reg(e.BAG, ViewBagPnl, i.UI_MainMiddle, 1, 1), i.reg(e.ITEMUSE, VItemUse, i.UI_Message), i.reg(e.ITEMLIBAOUSED, VItemLBUsed, i.UI_Message), i.reg(e.IT_HE_CHENG, VItemHeCheng, i.UI_Message), i.reg(e.ITEMGIVE, VItemGive, i.UI_Message), i.reg(e.GETSUIPIAN, ViewGetSP, i.UI_MainMiddle, 1, 1), i.reg(e.CHENGZHUANDH, ViewCZDH, i.UI_MainMiddle, 1, 1), i.reg(e.EQUIPRL, ViewEquipRL, i.UI_MainMiddle, 1, 1), i.reg(e.VEPCH, VEquipChosen, i.UI_Message, 1, 1), i.reg(e.OPENGRID, GdExtend, i.UI_Message), i.reg(e.EQUIPTIP, ViewEquipDetail, i.UI_Message), i.reg(e.ITEMTIP, TipsItem, i.UI_Message), i.reg(e.FUWENTIP, TipsFuWen, i.UI_Message), i.reg(e.CURRENCYTIP, VCurrencyTip, i.UI_Message), i.reg(e.SKILLTIP, VSkillTip, i.UI_Message), i.reg(e.ROLEQUIPDETAIL, ViewRoleEquipTip, i.UI_Message), i.reg(e.SKILLSETTING, VSkillSetting, i.UI_MainMiddle, 1, 1), i.reg(e.PET, ViewPetPnl, i.UI_MainMiddle, 1, 1), i.reg(e.BUZHUOPET, VBuZhuoPnl, i.UI_MainMiddle), i.reg(e.BUZHUOQIUZHU, VBuZhuoQiuZu, i.UI_Message), i.reg(e.BUZHUOPETBTL, VBuZhuoBattle, i.UI_floorUI), i.reg(e.BUZHUORET, VBuZhuoRet, i.UI_Message), i.reg(e.PETSKIPPTIP1, VPetSkillTip1, i.UI_Message), i.reg(e.PETSKIPPTIP, VPetSkillTip, i.UI_Message), i.reg(e.PETRENAME, VPetRename, i.UI_Message), i.reg(e.PETSKILLLEARN, ViewPetSkillLearn, i.UI_Main), i.reg(e.PETLEVEL, ViewLevelPnl, i.UI_Message), i.reg(e.PETZIZHI, ViewZiZhiPeiYangPnl, i.UI_Message), i.reg(e.PETENBLETIP, VPetEnabelTip, i.UI_Message), i.reg(e.PETSHANGZHEN, VPetShangZhen, i.UI_Main), i.reg(e.PEIYANG2, VShouLingPnl, i.UI_MainMiddle, 1), i.reg(e.PETSKILLOPENTIP, VPetSkillOpenTip, i.UI_Message, 1), i.reg(e.TUJIAN, VTuJianPnl, i.UI_MainMiddle, 1, 1), i.reg(e.TUJIANDETAIL, VTuJianDetail, i.UI_MainMiddle, 1), i.reg(e.TUJIANUP, VTuJianUpgrade, i.UI_MainMiddle, 1), i.reg(e.TUJIANPY, VTuJianPY, i.UI_MainMiddle, 1), i.reg(e.STORE, ViewShangCheng, i.UI_MainMiddle, 1, 1), i.reg(e.CREATEROLE, ViewCreateRole, i.UI_Main), i.reg(VHBGetItems.UIID_HBGETITEMS, VHBGetItems, i.UI_Message), i.reg(VHBOnbattle.UIID_HBONBATTLE, VHBOnbattle, i.UI_Message), i.reg(VGetHuoBan.UIID_GETHUOBAN, VGetHuoBan, i.UI_Message), i.reg(VHBSkillTip.UIID_VHBSKILLTIP, VHBSkillTip, i.UI_Message), i.reg(VHuobanZF.UIID_HUOBANZF, VHuobanZF, i.UI_MainMiddle), i.reg(VZhenfaUp.UIID_ZHENFAUP, VZhenfaUp, i.UI_Message), i.reg(e.HBFUWENBAG, VHBFuwenBag, i.UI_Message), i.reg(e.HBFUWENQH, VHBFuWenQH, i.UI_Message), i.reg(e.HBFUWENTIPS, VHBFuWenTip, i.UI_Message), i.reg(e.ViewBGText, ViewBGText, i.UI_Message), i.reg(e.VROLEINFO, VRoleInfo, i.UI_MainMiddle, 1, 1), i.reg(e.MARQUE, VMarQ, i.UI_Message), i.reg(e.EMAIL, VEmail, i.UI_MainMiddle, 1, 1), i.reg(e.EMAILGET, VEmailBox, i.UI_Main), i.reg(e.CAST, ViewDuanZao, i.UI_MainMiddle, 1, 1), i.reg(e.DUANZAO_MASTER, VDuanZaoMaster, i.UI_Message), i.reg(e.EQHECHENG, VEqHeCheng, i.UI_MainMiddle, 1, 1), i.reg(e.SHILIAN, VShiLian, i.UI_MainMiddle, 1, 1), i.reg(e.VIEWJJC, ViewJJC, i.UI_MainMiddle, 1, 1), i.reg(e.JJCAWARDTIPS, VJJCAwardTips, i.UI_Message), i.reg(e.JJCJIANGLI, VJJCJiangli, i.UI_Message), i.reg(e.JJCPAIHANG, VJJCPaiHang, i.UI_Message), i.reg(e.JJCRECORD, VJJCRecord, i.UI_Message), i.reg(e.JJCSTORE, VJJCStore, i.UI_MainMiddle), i.reg(e.JJCSTORETIPS, VJJCStoreBuyTip, i.UI_Message), i.reg(e.PAIHANGBANG, VPaiHangBang, i.UI_MainMiddle, 1, 1), i.reg(e.UIID_PEIYANG, ViewPeiYangPage, i.UI_MainMiddle, 1, 1), i.reg(e.UIID_PEIYANGATT, VPeiYangAtt, i.UI_MainMiddle, 1, 1), i.reg(e.UIID_STOREBUYTIP, VStoreBuyTip, i.UI_Main), i.reg(e.UIID_PEIYANGSKIN, VPeiyangSkin, i.UI_MainMiddle, 1, 1), i.reg(e.PEIYANGSKILLTIP, VPeiYangSkillTip, i.UI_Message), i.reg(e.VSYT, VSYTAndCTGPage, i.UI_MainMiddle, 1, 1), i.reg(e.UIID_SYTAWARDSTIP, VSYTAwardTip, i.UI_Message), i.reg(e.UIID_SYTPAIHANG, VSYTPaiHang, i.UI_MainMiddle), i.reg(e.UIID_SYTRESETVIEW, VSYTReset, i.UI_Message), i.reg(e.NEWMOD, VNewModTip, i.UI_Message), i.reg(e.NEWSKILL, VNewSkillTip, i.UI_Message), i.reg(e.NEWSKILLBDJN, VNewSkillTipBDJN, i.UI_Message), i.reg(e.BOSSPAGE, BossPage, i.UI_MainMiddle, 1, 1), i.reg(e.QMBOSSRANK, QMRank, i.UI_MainMiddle, 1), i.reg(e.QMBOSSKILLINFO, ViewQMKill, i.UI_MainMiddle), i.reg(e.QMNOTICE, QmNoticeView, i.UI_MainMiddle), i.reg(e.QMBUY, QmBuyView, i.UI_MainMiddle), i.reg(e.UIID_CAILIAOBUYTIP, VCaiLiaoFBBuyTip, i.UI_Message), i.reg(e.VCLFB, VCaiLiaoFB, i.UI_MainMiddle, 1, 1), i.reg(e.FRIEND, VFriendPnl, i.UI_MainMiddle, 1), i.reg(e.SI_LIAO, ViewSiLiao, i.UI_MainMiddle, 1), i.reg(e.ZDFBPAGE, VCrossTeamFuBenMain, i.UI_MainMiddle, 1, 1), i.reg(e.FULIDATING, VFuLiDaTingMain, i.UI_MainMiddle, 1, 1), i.reg(e.CHOUKA, choukaPnl, i.UI_MainMiddle, 1), i.reg(e.CHOUKAVIEW, choukaView, i.UI_Main), i.reg(e.CHOUKATLE, choukaTle, i.UI_Main), i.reg(e.VIEWVIP, ViewVIP, i.UI_MainMiddle, 1, 1), i.reg(e.SEVENLOGIN, VSevenLoginPnl, i.UI_MainMiddle, 1, 1), i.reg(e.YAOQIANSHUJL, VYaoQianShu_gift, i.UI_Main, 1), i.reg(e.CAILIAOGET, VCaiLiaoHuoQu, i.UI_Message), i.reg(e.CAILIAOGETS, VCaiLiaoHuoQuSimple, i.UI_Message), i.reg(e.TITLEFASH, VTitleFashPnl, i.UI_MainMiddle, 1, 1), i.reg(e.TITLETB, VTBTL, i.UI_Main), i.reg(e.FUNCPRESCENEUI, VFuncPreSceneUI, i.UI_floorUI), i.reg(e.FUNCPREPNL, VFuncPrePnl, i.UI_Message), i.reg(e.FUNCOPEN, VFuncOpenPnl, t.stage), i.reg(e.RECHARGE, VRecharge, i.UI_MainMiddle, 1, 1), i.reg(e.TARGET, ViewTarget, i.UI_MainMiddle, 1, 1), i.reg(e.TAWARD, VTargetAward, i.UI_Message), i.reg(e.TDAILYAWARD, ViewTDailyAward, i.UI_Message), i.reg(e.TXIANJIEAPRE, VTXianJieAwdPreview, i.UI_Message), i.reg(e.TXIANJIEADDPRE, VTXianJieAttrAdd, i.UI_Message), i.reg(e.TDAILYPNL, VTargetDailyQuestPnl, i.UI_MainMiddle, 1, 1), i.reg(e.MENPAILIST, VMPList, i.UI_MainMiddle, 1, 1), i.reg(e.MENPAI, VMenPaiPage, i.UI_MainMiddle, 1, 1), i.reg(e.MPCREATE, VMPCreate, i.UI_Message, 1), i.reg(e.MENPAIRENAME, VMPReName, i.UI_Message, 1), i.reg(e.MPAPPLYLIST, VApplyList, i.UI_MainMiddle, 1), i.reg(e.MPMEMBERS, VMPMembers, i.UI_MainMiddle, 1), i.reg(e.MPMEMBERMGR, VMemMgr, i.UI_Message, 1), i.reg(e.MPGONGGAO, VMPReWGG, i.UI_Message, 1), i.reg(e.MENPAIJIANSHE, VMPJianShe, i.UI_Message, 1), i.reg(e.MENPAISHOP, VMPShop, i.UI_MainMiddle, 1), i.reg(e.MPXHAWARDS, XHAwards, i.UI_Message, 1), i.reg(e.MPHUOYUEPAGE, VMPHuoYuePage, i.UI_MainMiddle, 1), i.reg(e.MPHYYULAN, VMPHuoYueYL, i.UI_Message, 1), i.reg(e.MPBOSS, VMPBoss, i.UI_MainMiddle, 1, 1), i.reg(e.VIEWMPBATTLEPAGE, VMPBattlePage, i.UI_MainMiddle, 1, 1), i.reg(e.VMPBATZHUFANGINFO, VMPBatJuDianDetail, i.UI_Message), i.reg(e.VMPBATTLEPAIHANG, VMPBattlePaiHang, i.UI_Message), i.reg(e.VMPBATTLEBAOMING, VMPBatBaoMing, i.UI_Message), i.reg(e.TIAOZHENGZF, VMPBatZhuFang, i.UI_Message), i.reg(e.MENPAIBATEND, ViewMPBatEnd, i.UI_Message), i.reg(e.MENPAIBATRESULT, VSingleBatRetult, i.UI_Message), i.reg(e.DALIY, VDaliy, i.UI_MainMiddle, 1, 1), i.reg(e.YAOSHOU, VYaoShou, i.UI_MainMiddle, 1, 1), i.reg(e.DALIYTIP, VDaliyTip, i.UI_Main), i.reg(e.WDTDPNL, VWDTDPnl, i.UI_MainMiddle, 1, 1), i.reg(e.HUODONG, VHuoDong, i.UI_MainMiddle, 1, 1), i.reg(e.HALLOFFAMEVIEW, HallOfFameView, i.UI_MainMiddle), i.reg(e.DAIRYANSWER, VDairyAnswer, i.UI_MainMiddle, 1, 1), i.reg(e.DAIRYPAIHANG, VDairyAnsPH, i.UI_MainMiddle), i.reg(e.DAIRYCOUNT, VDairyCount, i.UI_MainMiddle), i.reg(e.DAIRYJIESUAN, VDairyAwards, i.UI_Message), i.reg(e.SHOUCHONGPAGE, VShouChongPage, i.UI_MainMiddle, 1, 1), i.reg(UIConst.EXPBACKTIPS, VTipsExpBack, t.layerMgr.UI_Message), i.reg(UIConst.HUOBANPAGE, VHuobanPage, i.UI_MainMiddle, 1, 1), i.reg(e.ACT, View_ActPnl, i.UI_MainMiddle, 1, 1), i.reg(e.JCHD, View_ActJC, i.UI_MainMiddle, 1, 1), i.reg(e.ACTHF, View_ActHeFu, i.UI_MainMiddle, 1, 1), i.reg(e.MRSC, VMRSC, i.UI_MainMiddle, 1), i.reg(e.EFFGLOBALCONT, VEffGlobalCont, i.UI_Message), i.reg(e.EXPGIFT, VExpGift, i.UI_MainMiddle, 1, 1), i.reg(e.XIAOFEIACT, VXiaoFeiActPnl, i.UI_Message, 1, 1), i.reg(e.FISHENTRY, VFishEntry, i.UI_MainMiddle, 1), i.reg(e.CHENGZHUWARPNL, VChengZhuWarPnl, i.UI_MainMiddle, 1), i.reg(e.UIID_ZTFSPAGE, VZTFSPage, i.UI_MainMiddle, 1, 1), i.reg(e.UIID_ZTFSPAIHANG, ViewZTFSPaiHang, i.UI_Message, 1), i.reg(e.UIID_ZTF3STARAWARD, VZTFS3StarAward, i.UI_Main), i.reg(e.UIID_ZTFSRESET, VZTFSReset, i.UI_Message), i.reg(e.UIID_INTRODUCE, VIntroduce, i.UI_Message), i.reg(e.UIID_ZHISHENGYIJIE, VZhiShengYiJie, i.UI_Message), i.reg(e.FABAO, VFaBaoPnl, i.UI_MainMiddle, 1, 1), i.reg(e.ZHAOMUZK, VZhaoMuZk, i.UI_MainMiddle, 1), i.reg(e.ZHAOMUXS, VZhaoMuXS, i.UI_MainMiddle, 1), i.reg(e.MSGTIPS, ViewMsgTips, i.UI_Message), i.reg(e.XSFB, VXSFBPnl, i.UI_MainMiddle, 1, 1), i.reg(e.VIEWXDDZMAIN, ViewXDDZMain, i.UI_MainMiddle, 1, 1), i.reg(e.VIEWCHALLENGEBOOK, ViewChallengeBook, i.UI_Main, 1), i.reg(e.VIEWCHALLENGE, ViewChallenge, i.UI_Main, 1), i.reg(e.VIEWYAZHUDETAIL, ViewXDDZYZDetail, i.UI_Main), i.reg(e.VIEWYAZHURECS, ViewYaZhuRecs, i.UI_Main), i.reg(e.VYAZHUJIANGLITIP, ViewAwards, i.UI_Main), i.reg(e.VXDDZAWARDS, VXDDZAwards, i.UI_MainMiddle), i.reg(e.VBACKLOOK, ViewBackLook, i.UI_MainMiddle), i.reg(e.VBACKLOOKDETAIL, ViewBackLookDetail, i.UI_Message), i.reg(e.DAYDAYFANLI, ViewDayDayFL, i.UI_MainMiddle, 1), i.reg(e.HBJUEXINGTIP, ViewHBJXTip, i.UI_Message), i.reg(e.HUANJIESHENGDIAN, ViewHJSDMain, i.UI_MainMiddle, 1, 1), i.reg(e.WEEKENDER, VWeekender, i.UI_MainMiddle, 1, 1), i.reg(e.MRHL, VMeiRiHaoLi, i.UI_MainMiddle, 1), i.reg(e.VBDRECORD, VBDRecord, i.UI_Message), i.reg(e.VBAOXIANGTIPS, VBDGetAward, i.UI_Message), i.reg(e.VSSAWARDTIP, VSSAwardTip, i.UI_Message), i.reg(e.QIXIYOUNI, VQiXiYouNi, i.UI_MainMiddle, 1), i.reg(e.GOODFEEL, VGoodFeel, i.UI_MainMiddle, 1), i.reg(e.GOODFEELFLOWER, VGetFlower, i.UI_Message), i.reg(e.XDCOMPOSITE, VXDComposite, i.UI_MainMiddle, 1), i.reg(e.HIDEMISSION, VHideMission, i.UI_floorUI), i.reg(e.SMDL, VSMDL, i.UI_MainMiddle, 1), i.reg(e.TEACHERSDAY, VTeachersDay, i.UI_MainMiddle, 1), i.reg(e.VIEWDIANJING, ViewDianJing, i.UI_Message), i.reg(e.WYBQ, VWoYaoBianQiang, i.UI_MainMiddle, 1, 1), i.reg(e.MIDFESTIVAL, ViewMidFestival, i.UI_MainMiddle, 1), i.reg(e.MIDFESTBOSSADTIP, ViewFestBossAdTip, i.UI_Message), i.reg(e.MIDFESTBOSSPHAD, ViewFestBossAD, i.UI_Message), i.reg(e.MIDFESTBOSSPH, ViewFestBossPH, i.UI_Message), i.reg(e.HYDT, View_hongYunPage, i.UI_MainMiddle, 1), i.reg(e.HJJL, View_shangQiJiangLi, i.UI_Message), i.reg(e.QGJG, ViewResult, i.UI_Message), i.reg(e.NATIONALDAY, VNationalDay, i.UI_MainMiddle, 1), i.reg(e.VGIFTGET, VGiftGet, i.UI_Message), i.reg(e.JFLB, VJFLBGet, i.UI_Message), i.reg(e.VIPGIFTGET, VVIPGiftGet, i.UI_Message), i.reg(e.VIEWTODESK, ViewToDesk, i.UI_Message), i.reg(e.SC5BEI, VSC5bei, i.UI_MainMiddle, 1), i.reg(e.VIPPAGE, vipPage, i.UI_MainMiddle, 1, 1), i.reg(e.ZYZL, VZYZLPnl, i.UI_MainMiddle, 1), i.reg(e.ZYZL7DAY, VZYZL_otherPnl, i.UI_MainMiddle, 1), i.reg(e.DATASWATCHERA, VdatasWatcher, i.UI_Message), i.reg(e.WSJ, VWsjPnl, i.UI_MainMiddle, 1), i.reg(e.XKSDPNL, VXKSDPnl, i.UI_MainMiddle, 1), i.reg(e.YYFD, VYYFD, i.UI_MainMiddle, 1), i.reg(e.SHUANG11, VShuang11, i.UI_MainMiddle, 1), i.reg(e.THANKSGIVINGDAY, VThanksGivingDay, i.UI_MainMiddle, 1), i.reg(e.S11KH, VS11khPnl, i.UI_MainMiddle, 1), i.reg(e.EMISSARYEXTRAAWARD, EmissaryExtraAwardView, i.UI_Message), i.reg(e.HURT_RANK_VIEW, HurtRankView, i.UI_Message), i.reg(e.EXTRA_AWARD_WINDOW, EmissaryGetAwardView, i.UI_Message), i.reg(e.SHUANG11XFPHBANG, View_shuang11shangQiJiangLi, i.UI_MainMiddle, 1), i.reg(e.FESTIVALXFPHBANG, View_FestivalShangQiJiangLi, i.UI_MainMiddle, 1)
    }, t.registerModel = function () {
        var e = t,
            i = e.socketMgr;
        e.modelGM = new Model_GM, e.modelGM.listenServ(i), e.modelRole = new ModelRole, e.modelRole.listenServ(i), e.modelQuest = new ModelQuest, e.modelQuest.listenServ(i), e.modelMap = new ModelMap, e.modelMap.listenServ(i), e.modelBag = new ModelBag, e.modelBag.listenServ(i), e.modelEquip = new ModelEquip, e.modelEquip.listenServ(i), e.modelSkill = new ModelSkill, e.modelSkill.listenServ(i), e.modelPlayer = new ModelPlayer, e.modelPlayer.listenServ(i), e.modelChat = new Model_Chat, e.modelChat.listenServ(i), e.modelGuanqia = new ModelGuanQia, e.modelGuanqia.listenServ(i), e.modelhb = new ModelHB, e.modelhb.listenServ(i), e.modelPet = new ModelPet, e.modelPet.listenServ(i), e.modelEmail = new ModelEmail, e.modelEmail.listenServ(i), e.modelDuanZao = new ModelDuanZao, e.modelDuanZao.listenServ(i), e.modeljingjichang = new ModelJingJiChang, e.modeljingjichang.listenServ(i), e.modelcommod = new ModelCommond, e.modelcommod.listenServ(i), e.modelBoss = new Model_BossData, e.modelBoss.listenServ(i), e.modelShiLian = new Model_ShiLian, e.modelShiLian.listenServ(i), e.modelSytAndCTG = new ModelSYTAndCTG, e.modelSytAndCTG.listenServ(i), e.modelpeiyang = new ModelPeiYang, e.modelpeiyang.listenServ(i), e.modelpaihangbang = new ModelPaiHangBang, e.modelpaihangbang.listenServ(i), e.modelShangCheng = new ModelShangCheng, e.modelShangCheng.listenServ(i), e.modelcailiaoFb = new ModelCaiLiaoFB, e.modelcailiaoFb.listenServ(i), e.modelFriend = new ModelFriend, e.modelFriend.listenServ(i), e.modelCrossTeam = new Model_CrossTeamFuBen, e.modelCrossTeam.listenServ(i), e.modelchouka = new Modelchouka, e.modelchouka.listenServ(i), e.modelFuLiDaTing = new Model_FuLiDaTing, e.modelFuLiDaTing.listenServ(i), e.modelLevelGift = new ModelGift, e.modelLevelGift.listenServ(i), e.modelVip = new ModelVIP, e.modelVip.listenServ(i), e.modelsevenlogin = new ModelSevenLogin, e.modelsevenlogin.listenServ(i), e.modelSign = new ModelSign, e.modelSign.listenServ(i), e.modelyaoqianshu = new ModelYaoQianShu, e.modelyaoqianshu.listenServ(i), e.modelTitle = new ModelTitle, e.modelTitle.listenServ(i), e.modelmenpai = new ModelMenPai, e.modelmenpai.listServ(i), e.modelTarget = new ModelTarget, e.modelTarget.listenServ(i), e.modelyuekazhouka = new ModelYueKaZhouka, e.modelyuekazhouka.listenServ(i), e.modelDaliy = new ModelDaliy, e.modelDaliy.listenServ(i), e.modelWDTD = new ModelWDTD, e.modelWDTD.listenServ(i), e.modeldairyAns = new ModelDairyAnswer, e.modeldairyAns.listenServ(i), e.modelexpBack = new ModelExpBack, e.modelexpBack.listenServ(i), e.modelshouchong = new ModelShouChong, e.modelshouchong.listenServ(i), e.modelTuJian = new ModelTuJian, e.modelTuJian.listenServ(i), e.modelXiuLian = new ModelXiuLian, e.modelXiuLian.listenServ(i), e.xinYueGiftModel = new XinYueGiftModel, e.xinYueGiftModel.listenServ(i), e.modelFashion = new ModelFashion, e.modelFashion.listenServ(i), e.modelAct = new Model_Act, e.modelAct.listenServ(i), e.modelMRSC = new ModelMRSC, e.modelMRSC.listenServ(i), e.modelczjj = new ModelCZJiJin, e.modelczjj.listenServ(i), e.modeltzPlan = new ModelTZTZPlan, e.modeltzPlan.listenServ(i), e.modelExpGift = new ModelExpGift, e.modelExpGift.listenServ(i), e.modelXiaoFeiAct = new ModelXiaoFeiAct, e.modelXiaoFeiAct.listenServ(i), e.modelfuwenRoll = new ModelFuWenRoll, e.modelfuwenRoll.listenServ(i), e.modelLJXF = new ModelLJXF, e.modelLJXF.listenServ(i), e.modelFish = new ModelFishing, e.modelFish.listenServ(i), e.modelWorldNet = new Model_WorldNet, e.modelWorldNet.listenServ(i), e.modelsiliao = new ModelSiLiao, e.modelsiliao.listenServ(i), e.modelCZWAR = new ModelCZWAR, e.modelCZWAR.listenServ(i), e.modelZTFS = new ModelZhuTianFengShen, e.modelZTFS.listenServ(i), e.modelMPBattle = new ModelMPBattle, e.modelMPBattle.listenServ(i), e.modelFaBao = new ModelFaBao, e.modelFaBao.listenServ(i), e.modelVipGifts = new ModelVipGifts, e.modelVipGifts.listenServ(i), e.modelXSFB = new ModelXSFB, e.modelXSFB.listenServ(i), e.modelxddz = new ModelXDDZ, e.modelxddz.listenServ(i), e.modelDayDayFL = new ModelDayDayFL, e.modelDayDayFL.listenServ(i), e.modelHJSD = new ModelHJSD, e.modelHJSD.listenServ(i), e.modelWeekender = new ModelWeekender, e.modelWeekender.listenServ(i), e.modelQiXiYouNi = new ModelQiXiYouNi, e.modelQiXiYouNi.listenServ(i), e.modelBuff = new ModelBuff, e.modelxdComposite = new ModelXDComposite, e.modelxdComposite.listenServ(i), e.modelTeachersDay = new ModelTeachersDay, e.modelTeachersDay.listenServ(i), e.modelDJ = new ModelDianJing, e.modelDJ.listenServ(i), e.modelXSBuff = new ModelXSBuff, e.modelXSBuff.listenServ(i), e.modelHYDT = new ModelHYDT, e.modelHYDT.listenServ(i), e.modelMidFestival = new ModelMidFestival, e.modelMidFestival.listenServ(i), e.modelNationalDay = new ModelNationalDay, e.modelNationalDay.listenServ(i), e.modelExternal = new ModelExternal, e.modelExternal.listenServ(i), e.modelCYJ = new ModelCYJ, e.modelCYJ.listenServ(i), e.modelZYZL = new ModelZYZL, e.modelZYZL.listenServ(i), e.modelXKSD = new ModelXKSD, e.modelXKSD.listenServ(i), e.modelYYFD = new ModelYYFD, e.modelYYFD.listenServ(i), e.modelShuang11 = new ModelShuang11, e.modelShuang11.listenServ(i), e.modelS11kh = new ModelS11kh, e.modelS11kh.listenServ(i)
    }, t.resRoot = "", t.ver = "", t.testVer = "V1", t.MSG_CHANGEMAP = "changemap", t.MSG_FIGHTVIEWHID = "MSG_FIGHTVIEWHID", t.MSG_RIGHTLAYOUT = "MSG_RIGHTLAYOUT", t.msgCenter = new MsgCenter, t.tick = new Tick, t
}();
__reflect(GameGlobal.prototype, "GameGlobal");
var UIConst = function () {
    function t() {}
    return t.LOGINMAIN = "LOGINMAIN", t.LOGINGG = "LOGINGG", t.SERVLIST = "SERVLIST", t.LOGINLOADING = "LOGINLOADING", t.IOSRECHARGESYS = "IOSRECHARGESYS", t.CHANGEACCOUNT = "CHANGEACCOUNT", t.WXFAVORITE = "WXFAVORITE", t.WXSHARE1 = "WXSHARE1", t.XYGIFT = "XYGIFT", t.WXSHARE = "WXSHARE", t.WXSHAREPAGE = "WXSHAREPAGE", t.WXSHARELVPAGE = "WXSHARELVPAGE", t.WXHONGBAORTBPAGE = "WXHONGBAORTBPAGE", t.WXGAMECOIN = "WXGAMECOIN", t.GETCZHONGBAO = "GETCZHONGBAO", t.TASTEVIP = "TASTEVIP", t.TASTEVIPING = "TASTEVIPING", t.TASTEVIPOVERTIME = "TASTEVIPOVERTIME", t.USEV3 = "USEV3", t.TOPUI = 1, t.LEFTUI = 2, t.RIGHTUI = 3, t.MAINMENU = 4, t.WORLDMAP = 5, t.MAINMENUDZ = "42", t.MAINTOWN = 1042, t.SPECSCENEBAR = "SPECSCENEBAR", t.SCREENMASK = "SCREENMASK", t.GUANQIASCENE = "BOSSSCENEUI", t.GUANQIABOSS = 1030, t.GUANQIARANK = "GUANQIARANK", t.GKOFFLINE = "GKOFFLINE", t.GKCHAPTER = "GKCHAPTER", t.GKBOSSAWRAD = "GKBOSSAWRAD", t.BATTLELOSE = "BATTLELOSE", t.QIUZHU = "QIUZHU", t.HERODETAIL = "HERODETAIL", t.CHANGENAME = "CHANGENAME", t.SETTING = "SETTING", t.AWARD = "AWARD", t.GM = "GM", t.GMPROTOCOL = "GMPROTOCOL", t.STRINGTIP = "STRINGTIP", t.CREATEROLE = "CREATEROLE", t.BOTTOM2 = "BOTTOM2", t.BOTTOM_XIN_SHOU = "BOTTOM_XIN_SHOU", t.STRUP = "STRUP", t.UIBG = "UIBG", t.STORE = 1032, t.HEADUI = "headui", t.BUFFLIST = "BUFFLIST", t.BUFFINFO = "BUFFINFO", t.WORLDMAPENTRY = "WORLDMAPENTRY", t.QUEST = "quest", t.QUESTDLG = "QUESTDLG", t.COLLECT = "COLLECT", t.LOADING = "ld", t.LOADING_VIEW = "ldv", t.WORLDMAPPROMPT = "WORLDMAPPROMPT", t.ROLEATTR = "ROLEATTR", t.ROLEPNL = 1001, t.ROLEPNLEQUIP = "rolepnlequip", t.ROLESKILL = 1009, t.ROLEPNLWING = "ROLEPNLWING", t.ROLEPNLJINGMAI = "ROLEPNLJINGMAI", t.XIULIAN = "XIULIAN", t.ROLESKILLTIP = "ROLESKILLTIP", t.HUOBANPAGE = 1011, t.PET = 1013, t.BUZHUOPET = "BUZHUOPET", t.BUZHUOQIUZHU = "BUZHUOQIUZHU", t.BUZHUOPETBTL = "BUZHUOPETBTL", t.BUZHUORET = "BUZHUORET", t.PETPAGE = "PETPAGE", t.PETGROWUP = "PETGROWUP", t.PETSKILL = "PETSKILL", t.PETPEIYANG = "PETPEIYANG", t.PETENBLETIP = "PETENBLETIP", t.PETINFO = "PETINFO", t.XSINFO = "XSINFO", t.PETSKILLOPENTIP = "PETSKILLOPENTIP", t.PETSKILLLEARN = "PETSKILLLEARN", t.PETSKILLTJ = "PETSKILLTJ", t.PETEXCHANGE = "PETEXCHANGE", t.PETSKIPPTIP1 = "PETSKIPPTIP1", t.PETSKIPPTIP = "PETSKIPPTIP", t.PETRENAME = "PETRENAME", t.PETLEVEL = "PETLEVEL", t.PETZIZHI = "PETZIZHI", t.PETSHANGZHEN = "PETSHANGZHEN", t.PETGIFT = "PETGIFT", t.PETGETTIP1 = "PETGETTIP1", t.PETGETTIP2 = "PETGETTIP2", t.TUJIAN = 1055, t.TUJIANP1 = "TUJIANP1", t.TUJIANP2 = "TUJIANP2", t.TUJIANDETAIL = "TUJIANDETAIL", t.TUJIANUP = "TUJIANUP", t.TUJIANPY = "TUJIANPY", t.BOSSLAIXI = "BOSSLAIXI", t.BATTLETLUI = "BATTLETLUI", t.LEFTBOSSRNK = "LEFTBOSSRNK", t.BOTTOMBOSSHP = "BOTTOMBOSSHP", t.BATTLEEXIT = "BATTLEEXIT", t.BAG = 1002, t.ITEMUSE = "ITEMUSE", t.ITEMLIBAOUSED = "ITEMLIBAOUSED", t.IT_HE_CHENG = "IT_HE_CHENG", t.ITEMGIVE = "ITEMGIVE", t.EQUIPTIP = "EQUIPTIP", t.CURRENCYTIP = "CURRENCYTIP", t.ITEMTIP = "ITEMTIP", t.FUWENTIP = "FUWENTIP", t.SKILLTIP = "SKILLTIP", t.VIEWTEXT = "viewtext", t.ALERT = "alert", t.PROMPT = "prompt", t.VIEWWENHAO = "VIEWWENHAO", t.ROLEQUIPDETAIL = "ROLEQUIPDETAIL", t.SKILLSETTING = "SKILLSETTING", t.WELLCOME = "WELLCOME", t.BATTLESCENE = "BATTLESCENE", t.ViewBGText = "ViewBGText", t.FLOATITEMTIP = "FLOATITEMTIP", t.ROLERIDE = "ROLERIDE", t.RECONNECT = "RECONNECT", t.CHENGZHUANDH = 1006, t.GETSUIPIAN = "GETSUIPIAN", t.EQUIPRL = 1005, t.VEPCH = "VEPCH", t.OPENGRID = "OPENGRID", t.VROLEINFO = "VROLEINFO", t.MARQUE = "MARQUE", t.NEWMOD = "NEWMOD", t.NEWSKILL = "NEWSKILL", t.NEWSKILLBDJN = "NEWSKILLBDJN", t.CAST = 1022, t.UIID_CHILDDUANZAO = "UIID_CHILDDUANZAO", t.DUANZAO_MASTER = "DUANZAO_MASTER", t.EMAIL = 1007, t.EMAILGET = "EMAILGET", t.EQHECHENG = 1117, t.CLHECHENGPAGE = "CLHECHENGPAGE", t.EQHECHENGPAGE = 1066, t.EQREMAKE = "EQREMAKE", t.SHILIAN = 1014, t.VPHB = "VPHB", t.UIID_PEIYANG = 1040, t.UIID_CHILDPEIYANG = "UIID_CHILDPEIYANG", t.UIID_PEIYANGSKIN = "UIID_PEIYANGSKIN", t.UIID_STOREBUYTIP = "UIID_STOREBUYTIP", t.UIID_PEIYANGATT = "UIID_PEIYANGATT", t.PEIYANG2 = 1078e3, t.SHOULING = 1078, t.PEIYANGSKILLTIP = "PEIYANGSKILLTIP", t.VSYT = 1016e3, t.SYTPAGE = 1016, t.CTGPAGE = 1033, t.FENGMOLU = 1082, t.UIID_SYTAWARDSTIP = "UIID_SYTAWARDSTIP", t.UIID_SYTRESETVIEW = "UIID_SYTRESETVIEW", t.UIID_SYTPAIHANG = "UIID_SYTPAIHANG", t.ZDFBPAGE = 1018, t.BOSSPAGE = 1031, t.PERBOSS = "PERBOSS", t.QMBOSS = 1035, t.FWBOSS = 1073, t.VIPBOSS = 1116, t.QMBOSSRANK = "QMBOSSRANK", t.QMBOSSKILLINFO = "QMBOSSKILLINFO", t.QMNOTICE = "QMNOTICE", t.QMBUY = "QMBUY", t.VCLFB = 1017, t.UIID_CAILIAOBUYTIP = "UIID_CAILIAOBUYTIP", t.FULIDATING = 1052, t.SIGNGIFT = "SIGNGIFT", t.SHOUWANG = "SHOUWANG", t.VIEWVIP = "VIEWVIP", t.YUEKA = "YUEKA", t.ZHOUKA = "ZHOUKA", t.EXPBACK = "EXPBACK", t.EXPBACKTIPS = "EXPBACKTIPS", t.LEVELGIFT = 1052001, t.FULIGONGGAO = "FULIGONGGAO", t.FRIEND = 1036, t.SI_LIAO = "SI_LIAO", t.CHOUKA = 1041, t.CHOUKAVIEW = "CHOUKAVIEW", t.CHOUKATLE = "CHOUKATLE", t.SEVENLOGIN = 1061, t.YAOQIANSHU = 1043, t.JIHUOMA = "JIHUOMA", t.YAOQIANSHUJL = "YAOQIANSHUJL", t.CAILIAOGET = "CAILIAOGET", t.CAILIAOGETS = "CAILIAOGETS", t.TITLE = "TITLE", t.FASHION = "FASHION", t.TITLEFASH = "TITLEFASH", t.TITLETB = "TITLETB", t.TARGET = 1048, t.TAWARD = "TAWARD", t.TXIUXIAN = "TXIUXIAN", t.TCHENGJIU = "TCHENGJIU", t.TXIANJIE = "TXIANJIE", t.TXIANJIEAPRE = "TXIANJIEAPRE", t.TXIANJIEADDPRE = "TXIANJIEADDPRE", t.FEISHENGTIP = "FEISHENGTIP", t.TDAILYPNL = 1085, t.TDAILY = "TDAILY", t.TDAILYAWARD = "TDAILYAWARD", t.FUNCPRESCENEUI = "FUNCPRESCENEUI", t.FUNCPREPNL = "FUNCPREPNL", t.FUNCOPEN = "FUNCOPEN", t.RECHARGE = 1060, t.MENPAILIST = "MENPAILIST", t.MENPAI = 1046, t.MPDATING = "MPDATING", t.MPSHANGXIANG = "MPSHANGXIANG", t.MPFUBEN = "MPFUBEN", t.MPSKILL = "MPSKILL", t.MPCREATE = "MPCREATE", t.MENPAIRENAME = "MENPAIRENAME", t.MPAPPLYLIST = "MPAPPLYLIST", t.MPMEMBERS = "MPMEMBERS", t.MPMEMBERMGR = "MPMEMBERMGR", t.MPGONGGAO = "MPGONGGAO", t.MENPAIJIANSHE = "MENPAIJIANSHE", t.MENPAISHOP = "MENPAISHOP", t.MPXHAWARDS = "MPXHAWARDS", t.MPHUOYUEPAGE = 1046001, t.MPHUOYUE = "MPHUOYUE", t.MPHUOYUEDAY = "MPHUOYUEDAY", t.MPHYYULAN = "MPHYYULAN", t.MPBOSS = "MPBOSS", t.VIEWMPBATTLEPAGE = 1080, t.VIEWMPBATTLE = "VIEWMPBATTLE", t.VMPBATPERSONALAWARD = "VMPBATPERSONALAWARD", t.VMPBATJIESUANAWARD = "VMPBATJIESUANAWARD", t.VMPBATTLEAWARD = "VMPBATTLEAWARD", t.MPBATTLEENTRY = "MPBATTLEENTRY", t.VMPBATTLEPAIHANG = "VMPBATTLEPAIHANG", t.VMPBATTLEBAOMING = "VMPBATTLEBAOMING", t.VMPBATZHUFANGINFO = "VMPBATZHUFANGINFO", t.TIAOZHENGZF = "TIAOZHENGZF", t.MENPAIBATEND = "MENPAIBATEND", t.MENPAIBATRESULT = "MENPAIBATRESULT", t.DALIY = 1049, t.YAOSHOULL = "YAOSHOULL", t.YAOSHOU = "YAOSHOU", t.DALIYTIP = "DALIYTIP", t.ZHUDUILL = "ZHUDUILL", t.MEIRI100 = "MEIRI100", t.ZHUACHONG = 1056, t.HUODONG = "HUODONG", t.DAIRYANSWER = "DAIRYANSWER", t.DAIRYPAIHANG = "DAIRYPAIHANG", t.DAIRYCOUNT = "DAIRYCOUNT", t.DAIRYJIESUAN = "DAIRYJIESUAN", t.WDTDPNL = 1051, t.WDTDPAGEPNL = "WDTDPAGEPNL", t.WDTDSEL = "WDTDSEL", t.WDTDPAGE = "WDTDPAGE", t.WDTDPAGETEAM = "WDTDPAGETEAM", t.WDTDPAGERECORD = "WDTDPAGERECORD", t.WDTDSHOP = "WDTDSHOP", t.WDTDSHOPTB = "WDTDSHOPTB", t.WDTDBX = "WDTDBX", t.SHOUCHONGPAGE = 1062, t.SHOUCHONGTIP = 1163, t.MRSC = "MRSC", t.EFFGLOBALCONT = "EFFGLOBALCONT", t.ACT = 1063, t.ACTCOMPAGE1 = "ACTCOMPAGE1", t.ACTQUANMINJJ = "ACTQUANMINJJ", t.ACTQUANMINCJ = "ACTQUANMINCJ", t.ACTGUANQIA = "ACTGUANQIA", t.ACTCOMRANK = "ACTCOMRANK", t.SHOUCHONGTG = "SHOUCHONGTG", t.ACTZKSHOP = "ACTZKSHOP", t.ACTJLCZ = "ACTJLCZ", t.ACTRANKLIST = "ACTRANKLIST", t.ACTZDSB = "ACTZDSB", t.ACTDBCZ = "ACTDBCZ", t.VIPGIFTS = "VIPGIFTS", t.CJBP = "CJBP", t.EXPGIFT = 1064, t.ACTHF = "ACTHF", t.ACTHF_CBYL = "ACTHF_CBYL", t.ACTHF_DL = "ACTHF_DL", t.ACTHF_JJHL = "ACTHF_JJHL", t.ACTHF_LJCZ = "ACTHF_LJCZ", t.ACTHF_TZPLAN = "ACTHFTZPLAN", t.ACTHF_THLB = "ACTHF_THLB", t.ACTHF_HLZP = "ACTHF_HLZP", t.SHOUCHONG = "SHOUCHONG", t.CZJIJIN = "CZJIJIN", t.TOUZIPLAN = 1065, t.XIAOFEIACT = 1069, t.FUWENROLL = 106902, t.LJXF = 106901, t.VLUCKROLL = 1070, t.JCHD = "JCHD", t.ZHAOMUZK = 104101, t.ZHAOMUXS = "ZHAOMUXS", t.ZHAOMUXSTIP = 104102, t.XSFB = 1092, t.HUODONGENTRY = "HUODONGENTRY", t.FISHENTRY = 1072, t.FISHSCENE = "FISHSCENE", t.FISHROOM = "FISHROOM", t.FISHBASKET = "FISHBASKET", t.FISHMSG = "FISHMSG", t.HBFUWENBAG = "HBFUWENBAG", t.HBFUWENQH = "HBFUWENQH", t.HBFUWENTIPS = "HBFUWENTIPS", t.HBJUEXINGTIP = "HBJUEXINGTIP", t.PAIHANGBANG = "PAIHANGBANG", t.VIEWJJC = 1015, t.JJCAWARDTIPS = "JJCAWARDTIPS", t.JJCJIANGLI = "JJCJIANGLI", t.JJCPAIHANG = "JJCPAIHANG", t.JJCRECORD = "JJCRECORD", t.JJCSTORE = 1015005, t.JJCSTORETIPS = "JJCSTORETIPS", t.CONNECT_WORLD = "CONNECT_WORLD", t.CAMP_WAR = "CAMP_WAR", t.CHENGZHUWARPNL = 1074, t.CHENGZHUWAR = "CHENGZHUWAR", t.CZWARJSJL = "CZWARJSJL", t.CZWARZWJL = "CZWARZWJL", t.CZWARSHOP = "CZWARSHOP", t.CZWARPAGE1 = "CZWARPAGE1", t.CZWARPAGE2 = "CZWARPAGE2", t.CZWARPAGE3 = "CZWARPAGE3", t.CZWARDIAN = "CZWARDIAN", t.CZWARZLTIP = "CZWARZLTIP", t.CZWARJL = "CZWARJL", t.CZWARPKRECORD = "CZWARPKRECORD", t.CZWARBXTIP = "CZWARBXTIP", t.UIID_ZTFSPAGE = 1077, t.UIID_VIEWZTFS = "UIID_VIEWZTFS", t.UIID_ZTFSSTORE = "UIID_ZTFSSTORE", t.UIID_ZTFSPAIHANG = "UIID_ZTFSPAIHANG", t.UIID_ZTF3STARAWARD = "UIID_ZTF3STARAWARD", t.UIID_ZTFSRESET = "UIID_ZTFSRESET", t.UIID_INTRODUCE = "UIID_INTRODUCE", t.UIID_ZHISHENGYIJIE = "UIID_ZHISHENGYIJIE", t.UIID_ZHISHENGDANUSE = "UIID_ZHISHENGDANUSE", t.FABAO = 1081, t.FABAOQH = 1081e3, t.FABAOJL = 1081001, t.FABAOJHTIP = 1081002, t.MSGTIPS = "MSGTIPS", t.VIEWCHALLENGEBOOK = "VIEWCHALLENGEBOOK", t.VIEWXDDZMAIN = 1089, t.VIEWXDDZ = 1089e3, t.VIEWXDDZPH = 1089001, t.VIEWXDDZSTORE = 1089002, t.VIEWXDDZYZHU = 1089003, t.VIEWCHALLENGE = "VIEWCHALLENGE", t.VIEWYAZHUDETAIL = "VIEWYAZHUDETAIL", t.VIEWYAZHURECS = "VIEWYAZHURECS", t.HALLOFFAMEVIEW = "HALLOFFAMEVIEW", t.VYAZHUJIANGLITIP = "VYAZHUJIANGLITIP", t.VXDDZAWARDS = "VXDDZAWARDS", t.VBACKLOOK = "VBACKLOOK", t.VBACKLOOKDETAIL = "VBACKLOOKDETAIL", t.DAYDAYFANLI = 1093, t.HUANJIESHENGDIAN = 1096, t.SHENGSHIHAOLING = 1096e3, t.SHENGSHIRONGYAO = 1096001, t.SHENGSHIBAODIAN = 1096002, t.CHONGZHIXIANLI = 1096003, t.VBDRECORD = "VBDRECORD", t.VBAOXIANGTIPS = "VBAOXIANGTIPS", t.VSSAWARDTIP = "VSSAWARDTIP", t.WEEKENDER = "WEEKENDER", t.WEEKLB = "WEEKLB", t.WEEKLC = "WEEKLC", t.WEEKTIP = "WEEKTIP", t.MRHL = 1095, t.QIXIYOUNI = 1102, t.QIXIGIFT = "QIXIGIFT", t.QIXIAWARD = "QIXIAWARD", t.GOODFEEL = "GOODFEEL", t.GOODFEELSKILL = "GOODFEELSKILL", t.GOODFEELFLOWER = "GOODFEELFLOWER", t.XDCOMPOSITE = "XDCOMPOSITE", t.HIDEMISSION = "HIDEMISSION", t.SMDL = "SMDL", t.TEACHERSDAY = 1105, t.TEALETTER = "TEALETTER", t.TEASIGN = "TEASIGN", t.TEASIGNZLTIP = "TEASIGNZLTIP", t.TEASIGNXLTIP = "TEASIGNXLTIP", t.TEAJYKX = "TEAJYKX", t.TEAGSQF = "TEAGSQF", t.TEAGSQFRECORD = "TEAGSQFRECORD", t.TEASSCFTIP = "TEASSCFTIP", t.TEAGSQFTIP = "TEAGSQFTIP", t.TEAGSQFBOXTIP = "TEAGSQFBOXTIP", t.TEASMZL = "TEASMZL", t.VIEWDIANJING = "VIEWDIANJING", t.WYBQ = "WYBQ", t.WYBQPAGE = "WYBQPAGE", t.WYZYPAGE = "WYZYPAGE", t.MIDFESTIVAL = "MIDFESTIVAL", t.MIDFESTBOSS = 1106, t.MIDFESTBOSSADTIP = "MIDFESTBOSSADTIP", t.MIDFESTBOSSPHAD = "MIDFESTBOSSPHAD", t.MIDFESTBOSSPH = "MIDFESTBOSSPH", t.MIDFESTRABBIT = 1107, t.MIDFESTRABBITJL = "MIDFESTRABBITJL", t.MIDFESTRABBITRANK = "MIDFESTRABBITRANK", t.MIDFESTLB = 1109, t.HYDT = 1108, t.HJJL = "HJJL", t.QGJG = "QGJG", t.NATIONALDAY = "NATIONALDAY", t.NATIONALDAY_SIGN = 1111, t.NATIONALDAY_MYSY = 1112, t.NATIONALDAY_MYSYGIFT = "NATIONALDAY_MYSYGIFT", t.NATIONALDAY_MYSYAWARD = "NATIONALDAY_MYSYAWARD", t.NATIONALDAY_SSBZ = "NATIONALDAY_SSBZ", t.NATIONALDAY_SSBZREC = "NATIONALDAY_SSBZREC", t.NATIONALDAY_SSBZJL = "NATIONALDAY_SSBZJL", t.NATIONALDAY_XL = "NATIONALDAY_XL", t.VGIFTGET = "VGIFTGET", t.VIPGIFTGET = "VIPGIFTGET", t.JFLB = "JFLB", t.VIEWTODESK = "VIEWTODESK", t.SC5BEI = "SC5BEI", t.SC5BEITIP = "SC5BEITIP", t.VIPPAGE = "VIPPAGE", t.CYDH = 1115, t.ZYZL = 1118, t.ZYZL7DAY = "ZYZL7DAY", t.DATASWATCHERA = "DATASWATCHERA", t.WSJ = "WSJ", t.XKSDPNL = 1120, t.XKSD = "XKSD", t.XKSDRANK = "XKSDRANK", t.XKSD3XJL = "XKSD3XJL", t.YYFD = 1121, t.SHUANG11 = 1122, t.SHUANG11SIGN = "SHUANG11SIGN", t.FESTIVALEMISSARY = "FESTIVALEMISSARY", t.EMISSARYEXTRAAWARD = "EMISSARYEXTRAAWARD", t.EXTRA_AWARD_WINDOW = "EXTRA_AWARD_WINDOW", t.HURT_RANK_VIEW = "HURT_RANK_VIEW", t.SHUANG11STORE = "SHUANG11STORE", t.SHUANG11XFPH = "SHUANG11XFPH", t.SHUANG11XFPHBANG = "SHUANG11XFPHBANG", t.THANKSGIVINGDAY = "THANKSGIVINGDAY", t.FESTIVALSTORE = "FESTIVALSTORE", t.FESTIVALXFPH = "FESTIVALXFPH", t.FESTIVALXFPHBANG = "FESTIVALXFPHBANG", t.S11KH = 1128, t.S11KHROLL = "S11KHROLL", t.S11KHLJXF = "S11KHLJXF", t.SPRING_CONSUME = "SPRING_CONSUME", t.CROSS_SERVICE_lADDER = "CROSS_SERVICE_lADDER", t.F_WORLD = 1139, t
}();
__reflect(UIConst.prototype, "UIConst");
var RedBarView = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e
}(BarView);
__reflect(RedBarView.prototype, "RedBarView");
var HttpReqPack = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.create = function (t, i, o, n, a) {
        return void 0 === i && (i = null), void 0 === o && (o = egret.HttpMethod.POST), void 0 === n && (n = egret.HttpResponseType.TEXT), void 0 === a && (a = egret.URLLoaderDataFormat.TEXT), this._cachePool.getObj(e, t, o, i, n, a)
    }, e.prototype.init = function (t, e, i, o, n) {
        void 0 === i && (i = null), void 0 === o && (o = egret.HttpResponseType.TEXT), void 0 === n && (n = egret.URLLoaderDataFormat.TEXT), this.key = t, this.method = e, this.respFormat = o, this.reqFormat = n, n == egret.URLLoaderDataFormat.TEXT ? this.data = this.parseToString(i) : this.data = i
    }, e.prototype.parseToObject = function (t) {
        var e = {};
        if (void 0 == t || "" == t) return e;
        for (var i = t.split("&"), o = 0; o < i.length; o++) {
            var n = i[o].split("=");
            e[n[0]] = n[1]
        }
        return e
    }, e.prototype.parseToString = function (t) {
        var e = [];
        for (var i in t) {
            var o = i + "=" + t[i];
            e.push(o)
        }
        return e.join("&")
    }, e.prototype.clear = function () {
        this.key = null, this.method = null, this.respFormat = null, this.data = null
    }, Object.defineProperty(e.prototype, "key", {
        get: function () {
            return this._key
        },
        set: function (t) {
            this._key = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(MessageVo);
__reflect(HttpReqPack.prototype, "HttpReqPack");
var HttpRespPack = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.create = function (t, i) {
        return this._cachePool.getObj(e, t, i)
    }, e.prototype.init = function (t, e) {
        if (this._isSuccess = t, e) {
            var i = JSON.parse(e);
            this._data = i.data ? i.data : i, this._code = i.code, this._msg = i.msg ? i.msg : "", this._obj = i
        }
    }, e.prototype.clear = function () {
        this._isSuccess = null, this._data = null
    }, Object.defineProperty(e.prototype, "isSuccess", {
        get: function () {
            return this._isSuccess
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "code", {
        get: function () {
            return this._code
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "msg", {
        get: function () {
            return this._msg
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "obj", {
        get: function () {
            return this._obj
        },
        enumerable: !0,
        configurable: !0
    }), e
}(CacheableClass);
__reflect(HttpRespPack.prototype, "HttpRespPack");
var HttpTransaction = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._httpRequest = new egret.HttpRequest, e.dg_onTimeOut = new Delegate, e._isRequesting = !1, e
    }
    return __extends(e, t), e.prototype.reg_onTimeOut = function (t, e) {
        this.dg_onTimeOut.register(t, e)
    }, e.prototype.unreg_onTimeOut = function (t) {
        this.dg_onTimeOut.unregister(t)
    }, e.prototype.clear_onTimeOut = function () {
        this.dg_onTimeOut.clear()
    }, e.create = function (t) {
        return void 0 === t && (t = null), e._cachePool.getObj(e, t)
    }, e.prototype.init = function (t, e) {
        void 0 === t && (t = null), void 0 === e && (e = 1e4), this._httpErroProc = t, this._reqtimeOut = e, this._dgComplete = RespDelegate.create()
    }, e.prototype.send = function (t, e, i, o, n) {
        return void 0 === i && (i = null), void 0 === o && (o = !0), void 0 === n && (n = null), this._isRequesting ? (egret.log("================没有请求发送到数据============================="), this.restore()) : this.egretSendHttp(t, e, i, o, n), this
    }, e.prototype.egretSendHttp = function (t, e, i, o, n) {
        void 0 === i && (i = null), void 0 === o && (o = !0), void 0 === n && (n = null);
        var a = this._httpRequest;
        this._userData = i;
        var s, r = "application/x-www-form-urlencoded";
        e.method == egret.HttpMethod.POST && e.data ? (a.open(t + e.key, e.method), r = "application/x-www-form-urlencoded", s = e.data) : a.open(t + e.key + "?" + e.data, e.method), a.setRequestHeader("Content-Type", r);
        for (var l in n) a.setRequestHeader(l, n[l]);
        a.responseType = e.respFormat, this._isRequesting = !0, a.addEventListener(egret.Event.COMPLETE, this.onLoaderComplete, this), a.addEventListener(egret.IOErrorEvent.IO_ERROR, this.onError, this), a.send(s), this._timeOutId = egret.setTimeout(this.onTimeOut, this, this._reqtimeOut), egret.log("==== HTTP SEND ==== key:" + e.key + " === ts: " + egret.getTimer())
    }, e.prototype.register = function (t, e) {
        this._dgComplete.register(t, e)
    }, e.prototype.onTimeOut = function () {
        egret.log("==== HTTP fail ==== ts:" + egret.getTimer()), this._httpRequest.abort(), this._isRequesting = !1, this.dg_onTimeOut.boardcast()
    }, e.prototype.onLoaderComplete = function (t) {
        var e = this._httpRequest;
        switch (egret.log("==== HTTP success ====  ts: " + egret.getTimer()), e.responseType) {
            case egret.HttpResponseType.TEXT:
                var i = HttpRespPack.create(!0, e.response);
                this._dgComplete.boardcast(i, this._userData), i.restore();
                break;
            case egret.HttpResponseType.ARRAY_BUFFER:
        }
        this.restore()
    }, e.prototype.onError = function (t) {
        var e = this._httpRequest;
        if (this._httpErroProc) {
            var i = HttpRespPack.create(!1, e.response);
            this._httpErroProc.onErro(i), i.restore(), this.restore()
        } else egret.clearTimeout(this._timeOutId), this.onTimeOut()
    }, e.prototype.clear = function () {
        var t = this._httpRequest;
        t.removeEventListener(egret.Event.COMPLETE, this.onLoaderComplete, this), t.removeEventListener(egret.IOErrorEvent.IO_ERROR, this.onError, this);
        try {
            t.abort()
        } catch (e) {}
        this._isRequesting = !1, this._dgComplete.restore(), this._dgComplete = null, this._userData = null, this._httpErroProc = null, egret.clearTimeout(this._timeOutId), this._timeOutId = null, this.dg_onTimeOut.clear()
    }, e
}(CacheableClass);
__reflect(HttpTransaction.prototype, "HttpTransaction");
var BaseSCmp = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "BaseSSkin", e
    }
    return __extends(e, t), e.prototype.setDes = function (t) {
        this.lb_des.textFlow = HtmlUtil.parse(t)
    }, e
}(eui.Component);
__reflect(BaseSCmp.prototype, "BaseSCmp");
var RespDelegate = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.has = function (e) {
        return t.prototype.has.call(this, e)
    }, e.prototype.register = function (e, i) {
        t.prototype.register.call(this, e, i)
    }, e.prototype.unregister = function (e) {
        t.prototype.unregister.call(this, e)
    }, e
}(Delegate);
__reflect(RespDelegate.prototype, "RespDelegate"), window.RespDelegate = RespDelegate;
var EnumBattleKey = function () {
    function t() {}
    return t.BATTLETYPE = "type", t.WINNER = "winner", t.INIT = "init", t.INIT_NUM = "num", t.OPERA = "send", t.R_TYPE = "type", t.SYSID = "sysid", t.R_NAME = "1", t.R_FORCE = "2", t.R_RIDEID = "3", t.R_WINGID = "4", t.R_SBID = "5", t.R_HALO = "6", t.R_SHOULING = "7", t.R_FABAO = "31", t.R_ID = "id", t.R_JOB = "9", t.R_SEX = "10", t.R_POS = "11", t.RHP = "12", t.R_MAXHP = "13", t.EFFECT = "effect", t.P_HOSTID = "id", t.P_SKILLID = "skillId", t.P_COMBOSKILLID = "si", t.P_TARGETID = "15", t.T_ROUND = "round", t.P_CURHP = "16", t.EFFECT_TYPE = "type", t.P_MAXHP = "maxHp", t.DAMGVALUE = "18", t.P_DEADFLAG = "19", t.antiHurt = "20", t.antiAttack = "21", t.k_VAMPIRE = "22", t.P_BUFF = "23", t.P_ABSRES = "24", t.P_ABSDEF = "25", t.P_MISS = "miss", t.p_ABS_HALF = "30", t.p_ABS_XTQ = "32", t.P_BUFID = "23", t.P_BUFIDXXXX = "26", t.T_CURE = "cure", t.VAL_INIT = "init", t.VAL_USESKILL = "use_skill", t.VAL_CURE = "cure", t.VAL_DMG = "dmg", t.VAL_TBUF = "tBuff", t.VAL_ADDBUF = "addBuff", t.VAL_DELBUF = "delBuff", t.VAL_DELTBUF = "delTBuff", t.BUFFTYPE = "buffT", t.VAL_COMBO = "combo", t.VAL_ROUND = "round", t.VAL_JS = "js", t.ROUNDINDEX = "index", t.TYPE = "type", t.VAL_TEAMBUF = "teamBuf", t.MATEBUFF = "mateBuff", t.RIVALBUFF = "rivalBuff", t.CHAIN = "chain", t.REBIRTH = "rebirth", t
}();
__reflect(EnumBattleKey.prototype, "EnumBattleKey");
var BattleWaitFinishState = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.create = function () {
        var t = new e;
        return t
    }, e.prototype.onAdd = function () {
        this.request(this), GameGlobal.tick.addInterv(this.request, 1e4, this), GameGlobal.modelBattle.on(ModelBattle.GC_504, this.onServFinish, this), GameGlobal.socketMgr.on(egret.Event.CONNECT, this.onSocketConnect, this), this.scene.exitCounter++
    }, e.prototype.onRemove = function () {
        GameGlobal.tick.removeInterv(this.request), GameGlobal.modelBattle.off(ModelBattle.GC_504, this.onServFinish), GameGlobal.socketMgr.off(egret.Event.CONNECT, this.onSocketConnect), this.scene.exitCounter--
    }, e.prototype.request = function (t) {
        GameGlobal.modelBattle.CG_BATTLEFINISH(GameGlobal.modelBattle.curBattleType)
    }, e.prototype.onServFinish = function () {
        this.scene.battleData && (this.scene.battleData.isMineLose() && this.scene.battleData.battleCFG.sl ? this.scene.battleData.type != ModelBattle.BT_CROSS_SERVICE_LADDER && GameGlobal.layerMgr.open(UIConst.BATTLELOSE) : GameGlobal.modelBattle.notify(ModelBattle.MSG_MINEWIN)), this.scene.exit()
    }, e.prototype.onSocketConnect = function () {
        this.scene.exit()
    }, e
}(GameObjectPlug);
__reflect(BattleWaitFinishState.prototype, "BattleWaitFinishState");
var ClientRunnigPlug = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.curDir = 1, e.objectCFG = [{
            type: 1,
            ride: 0,
            weapon: "nanwuqi01",
            body: "1",
            skillids: [1020001]
        }, {
            type: 2,
            ride: 0,
            body: "101",
            skillids: [1009200]
        }, {
            type: 2,
            ride: 0,
            body: "102",
            skillids: [1009400]
        }, {
            type: 2,
            ride: 0,
            body: "102",
            skillids: [1009600]
        }], e.arr1 = [], e.arr2 = [], e.isend = !1, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        this.curDir = MathUtil.rndInt(1, 2), this.addTest()
    }, e.prototype.addTest = function () {
        this.addForceTest(1), this.addForceTest(2)
    }, e.prototype.addForceTest = function (t) {
        for (var e = 0; 10 > e; e++)
            if (!(Math.random() < .2)) {
                var i = e / 5 >> 0,
                    o = e % 5,
                    n = new RoundBattleRole,
                    a = this.objectCFG[Math.random() * this.objectCFG.length >> 0];
                n.type = a.type, n.setBody(a.body), n.setHorse(a.ride), n.setWeapon(a.weapon);
                for (var s = 0; s < a.skillids.length; s++) {
                    var r = Vo_Skill.create(a.skillids[s], 1);
                    r.initLib()
                }
                n.hp = n.maxhp = 20, n.force = t, n.row = i, n.col = o, n.initForceXY(), n.setName("aaa"), this.scene.unitMgr.addUnit(n), n.updateCurhp(), n.playStand()
            }
    }, e.prototype.advanceTime = function (t) {
        if (!this.scene.stepLock) {
            var e = this.scene.unitMgr.filterUnits(RoundBattleUnitMgr.FILTER_FORCELIFEUNIT, this.arr1, 1),
                i = this.scene.unitMgr.filterUnits(RoundBattleUnitMgr.FILTER_FORCELIFEUNIT, this.arr2, 2);
            if (!e.length) return void(this.isend || (this.showResult(), this.isend = !0));
            if (!i.length) return void(this.isend || (this.showResult(), this.isend = !0));
            if (1 == this.curDir) var o = this.cmds(e);
            else var o = this.cmds(i);
            if (o) {
                if (o.isIdle()) {
                    o.lastHandRound = this.scene.roundid;
                    var n = RoundBattleSkillSelecter.getBestSkllLogic(o);
                    n && this.scene.addPlug(n)
                }
            } else this.nextRound()
        }
    }, e.prototype.showResult = function () {
        ViewText.text("战斗结束");
        var t = this;
        GameGlobal.tick.addInterv(function () {
            t.scene.exit()
        }, 200, t, !0)
    }, e.prototype.cmds = function (t) {
        for (var e = 0, i = t.length; i > e; e++) {
            var o = t[e];
            if (o.lastHandRound < this.scene.roundid) return o
        }
        return null
    }, e.prototype.exchangeHand = function () {}, e.prototype.onRemove = function () {}, e.prototype.nextRound = function () {
        this.scene.roundid += 1, 1 == this.curDir ? this.curDir = 2 : this.curDir = 1
    }, e
}(GameObjectPlug);
__reflect(ClientRunnigPlug.prototype, "ClientRunnigPlug");
var RecordRunningPlug = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.roundIndex = 0, e.stepIndex = 0, e.st = 0, e.exit = !1, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        this.exit = !1, this.doStepAndNext(), this.scene.runningPlug = this;
        var t = this.data[EnumBattleKey.R_TYPE],
            e = GameGlobal.layerMgr,
            i = "battle";
        if (t != ModelBattle.BT_GUANQIAMONSTER && (e.addUIHideF(UIConst.LEFTUI, i), e.addUIHideF(UIConst.SHOUCHONGTIP, i), e.addUIHideF(UIConst.GUANQIASCENE, i), e.addUIHideF(UIConst.WORLDMAPENTRY, i), e.addUIHideF(UIConst.QUEST, i), e.addUIHideF(UIConst.DALIY, i), e.addUIHideF(UIConst.SPECSCENEBAR, i), e.addUIHideF(UIConst.TARGET, i), e.addUIHideF(UIConst.TDAILYPNL, i), e.addUIHideF(UIConst.VBACKLOOK, i), e.addUIHideF(UIConst.VIEWCHALLENGE, i), e.addUIHideF(UIConst.VBACKLOOKDETAIL, i), e.addUIHideF(UIConst.HIDEMISSION, i)), t == ModelBattle.BT_GUANQIABOSS) {
            var o = GameGlobal.modelQuest.questList[0];
            !o || 1001 != o.id && 1004 != o.id || (VoVip.isTasteVip() ? GuideMgr.getIns().setZhiXianQueueByName("JUMPBATTLE") : QuestGuideArrow.hide(i, !0))
        } else t == ModelBattle.BT_QMBOSS || t == ModelBattle.BT_PERSONBOSS || t == ModelBattle.BT_FWBOSS || t == ModelBattle.BT_FESTBOSS ? (e.close(UIConst.BOSSPAGE), e.close(UIConst.SHILIAN), e.close(UIConst.MAINTOWN), GameGlobal.modelGuanqia.setAutoBoss(!1), QuestGuideArrow.hide(i, !0)) : t == ModelBattle.BT_VIPBOSS ? (e.close(UIConst.VIPPAGE), e.close(UIConst.MAINTOWN)) : t == ModelBattle.BT_CAILIAO ? (e.close(UIConst.VCLFB), e.close(UIConst.SHILIAN), e.close(UIConst.MAINTOWN), GameGlobal.modelGuanqia.setAutoBoss(!1), QuestGuideArrow.hide(i, !0)) : t == ModelBattle.BT_SYT || t == ModelBattle.BT_CTG || t == ModelBattle.BT_FENGMO ? (e.close(UIConst.VSYT), e.close(UIConst.SHILIAN), e.close(UIConst.MAINTOWN), e.close(UIConst.TITLEFASH), e.close(UIConst.ROLEPNL), QuestGuideArrow.hide(i, !0), GameGlobal.modelGuanqia.setAutoBoss(!1)) : t == ModelBattle.BT_JJCPVE || t == ModelBattle.BT_JJCPVP ? (e.close(UIConst.VIEWJJC), e.close(UIConst.MAINTOWN)) : t == ModelBattle.BT_TEAMFB ? (e.close(UIConst.ZDFBPAGE), e.close(UIConst.SHILIAN), e.close(UIConst.MAINTOWN)) : t == ModelBattle.BT_WDTD ? (e.close(UIConst.SHILIAN), e.close(UIConst.MAINTOWN), e.addUIHideF(UIConst.WDTDPNL, i)) : t == ModelBattle.BT_FENGSHEN ? (e.close(UIConst.TITLEFASH), e.close(UIConst.ROLEPNL), e.close(UIConst.UIID_ZTFSPAGE), e.close(UIConst.SHILIAN), e.close(UIConst.MAINTOWN), QuestGuideArrow.hide(i, !0)) : t == ModelBattle.BT_MPFB ? (e.close(UIConst.MAINTOWN), e.close(UIConst.MENPAI), e.close(UIConst.MPFUBEN)) : t == ModelBattle.BT_MPBOSS ? (e.close(UIConst.MAINTOWN), e.close(UIConst.MENPAI), e.close(UIConst.MPBOSS)) : t == ModelBattle.BT_CZZ_PVE || t == ModelBattle.BT_CZZ_PVP ? (e.close(UIConst.TITLEFASH), e.close(UIConst.ROLEPNL), e.close(UIConst.MAINTOWN), e.addUIHideF(UIConst.CHENGZHUWARPNL, i), e.addUIHideF(UIConst.CZWARDIAN, i)) : t == ModelBattle.BT_MPBAT || t == ModelBattle.BT_MPBAT_BOSS ? (e.close(UIConst.MAINTOWN), e.addUIHideF(UIConst.VMPBATZHUFANGINFO, i), e.addUIHideF(UIConst.VIEWMPBATTLEPAGE, i)) : t == ModelBattle.BT_XSFBZSXT || t == ModelBattle.BT_XSFBND || t == ModelBattle.BT_XSFBSH ? (e.close(UIConst.MAINTOWN), e.addUIHideF(UIConst.XSFB, i)) : t == ModelBattle.BT_SDQD ? (e.close(UIConst.MAINTOWN), e.close(UIConst.HUANJIESHENGDIAN)) : t == ModelBattle.BT_XDDZ ? (e.close(UIConst.VIEWXDDZMAIN), e.close(UIConst.MAINTOWN)) : t == ModelBattle.BT_JYKX ? (e.close(UIConst.MAINTOWN), e.close(UIConst.TEACHERSDAY), e.close(UIConst.TEAJYKX)) : t == ModelBattle.BT_SSFB ? (e.close(UIConst.MAINTOWN), e.close(UIConst.TEACHERSDAY), e.close(UIConst.TEAGSQF)) : t == ModelBattle.BT_XKSD ? (e.close(UIConst.MAINTOWN), e.close(UIConst.SHILIAN), e.close(UIConst.XKSDPNL)) : t == ModelBattle.BT_S11QD ? (e.close(UIConst.MAINTOWN), e.close(UIConst.THANKSGIVINGDAY)) : t == ModelBattle.BT_EMISSARY ? (e.close(UIConst.MAINTOWN), e.close(getClassName(ActivityView))) : t == ModelBattle.BT_SPRING_EMISSARY ? (e.close(UIConst.MAINTOWN), e.close(getClassName(SpringActivityBossView)), e.close(getClassName(SpringActivityView))) : t == ModelBattle.BT_SPRING_DAILY && (e.close(UIConst.MAINTOWN), e.close(getClassName(SpringSignView)), e.close(getClassName(SpringActivityView)));
        (t == ModelBattle.BT_QMBOSS || t == ModelBattle.BT_FESTBOSS) && (e.close(UIConst.MIDFESTIVAL), e.close(UIConst.NATIONALDAY), ModelBattleUI.getIns().openBossHp(this.scene), ModelBattleUI.getIns().openLeftRnl(this.scene)), ModelBattleUI.getIns().checkShowExit(this.scene)
    }, e.prototype.onRemove = function () {
        var t = this.data[EnumBattleKey.BATTLETYPE],
            e = GameGlobal.layerMgr,
            i = "battle";
        t != ModelBattle.BT_GUANQIAMONSTER && (e.delUIHideF(UIConst.LEFTUI, i), e.delUIHideF(UIConst.SHOUCHONGTIP, i), e.delUIHideF(UIConst.GUANQIASCENE, i), e.delUIHideF(UIConst.WORLDMAPENTRY, i), e.delUIHideF(UIConst.QUEST, i), e.delUIHideF(UIConst.DALIY, i), e.delUIHideF(UIConst.SPECSCENEBAR, i), e.delUIHideF(UIConst.VBACKLOOK, i), e.delUIHideF(UIConst.VBACKLOOKDETAIL, i), this.data.isMineLose() && this.data.type == ModelBattle.BT_SYT && GameGlobal.modelSytAndCTG.setAuto(!1), e.delUIHideF(UIConst.TARGET, i), e.delUIHideF(UIConst.TDAILYPNL, i), e.delUIHideF(UIConst.VIEWCHALLENGE, i), e.delUIHideF(UIConst.HIDEMISSION, i)), t == ModelBattle.BT_QMBOSS ? VShiLian.tryOpen(UIConst.BOSSPAGE, 1) : t == ModelBattle.BT_FESTBOSS ? VShiLian.tryOpen(UIConst.BOSSPAGE, 3) : t == ModelBattle.BT_VIPBOSS ? VShiLian.tryOpen(UIConst.VIPPAGE, 1) : t == ModelBattle.BT_PERSONBOSS ? VShiLian.tryOpen(UIConst.BOSSPAGE, 0) : t == ModelBattle.BT_FWBOSS ? VShiLian.tryOpen(UIConst.BOSSPAGE, 2) : t == ModelBattle.BT_CAILIAO ? VShiLian.tryOpen(UIConst.VCLFB, "noAlign") : t == ModelBattle.BT_SYT ? VShiLian.tryOpen(UIConst.VSYT, 0) : t == ModelBattle.BT_CTG ? VShiLian.tryOpen(UIConst.VSYT, 1) : t == ModelBattle.BT_FENGMO ? VShiLian.tryOpen(UIConst.VSYT, 2) : t == ModelBattle.BT_JJCPVE || t == ModelBattle.BT_JJCPVP ? e.open(UIConst.VIEWJJC) : t == ModelBattle.BT_TEAMFB ? e.open(UIConst.ZDFBPAGE) : t == ModelBattle.BT_FENGSHEN ? e.open(UIConst.UIID_ZTFSPAGE) : t == ModelBattle.BT_NEWER ? GameGlobal.modelQuest.autoMainQuest() : t == ModelBattle.BT_MPFB ? e.open(UIConst.MENPAI, 2) : t == ModelBattle.BT_MPBOSS ? e.open(UIConst.MPBOSS) : t == ModelBattle.BT_CZZ_PVE || t == ModelBattle.BT_CZZ_PVP ? (e.delUIHideF(UIConst.CHENGZHUWARPNL, i), e.delUIHideF(UIConst.CZWARDIAN, i)) : t == ModelBattle.BT_WDTD ? e.delUIHideF(UIConst.WDTDPNL, i) : t == ModelBattle.BT_MPBAT || t == ModelBattle.BT_MPBAT_BOSS ? (e.delUIHideF(UIConst.VMPBATZHUFANGINFO, i), e.delUIHideF(UIConst.VIEWMPBATTLEPAGE, i)) : t == ModelBattle.BT_XSFBZSXT || t == ModelBattle.BT_XSFBND || t == ModelBattle.BT_XSFBSH ? e.delUIHideF(UIConst.XSFB, i) : t == ModelBattle.BT_SDQD ? e.open(UIConst.HUANJIESHENGDIAN) : t == ModelBattle.BT_XDDZ ? e.open(UIConst.VIEWXDDZMAIN) : t == ModelBattle.BT_JYKX ? (e.open(UIConst.TEACHERSDAY), e.open(UIConst.TEAJYKX)) : t == ModelBattle.BT_SSFB ? (e.open(UIConst.TEACHERSDAY), e.open(UIConst.TEAGSQF)) : t == ModelBattle.BT_XKSD ? e.open(UIConst.XKSDPNL) : t == ModelBattle.BT_S11QD ? e.open(UIConst.THANKSGIVINGDAY) : t == ModelBattle.BT_EMISSARY ? e.open(getClassName(ActivityView)) : t == ModelBattle.BT_SPRING_EMISSARY ? (e.open(getClassName(SpringActivityView)), e.open(getClassName(SpringActivityBossView))) : t == ModelBattle.BT_SPRING_DAILY && (e.open(getClassName(SpringActivityView)), e.open(getClassName(SpringSignView))), QuestGuideArrow.show(i, !0)
    }, e.prototype.createRoles = function (t) {
        for (var e = 0; e < t.length; e++) {
            var i = t[e],
                o = RoundBattleRole.createWithData(i);
            o.initForceXY(), this.scene.unitMgr.addUnit(o), 1 == o.type && i[EnumBattleKey.R_FABAO] && o.createFollow("fabao/" + i[EnumBattleKey.R_FABAO]), 2 == o.type && i[EnumBattleKey.R_SHOULING] && o.createFollow("shouling/" + i[EnumBattleKey.R_SHOULING])
        }
    }, e.prototype.advanceTime = function (t) {
        var e = this;
        e.scene.stepLock || -1 == e.st || e.doStepAndNext()
    }, e.prototype.doStepAndNext = function () {
        var t = this.data.data[EnumBattleKey.OPERA],
            e = t[this.stepIndex];
        e ? this.doStep(e) : this.exit || (this.scene.waitExitPass(), this.exit = !0), this.stepIndex++
    }, e.prototype.enterNextRound = function () {
        this.roundIndex++
    }, e.prototype.enterExitState = function () {
        this.scene.exit(), this.st = 0
    }, e.prototype.doStep = function (t) {
        switch (t[EnumBattleKey.TYPE]) {
            case EnumBattleKey.VAL_INIT:
                this.doInit(t);
                break;
            case EnumBattleKey.VAL_TEAMBUF:
                this.dealTeamBuf(t);
                break;
            case EnumBattleKey.VAL_USESKILL:
                this.doSkill(t);
                break;
            case EnumBattleKey.VAL_TBUF:
                this.dealTriggleBuff(t);
                break;
            case EnumBattleKey.VAL_ADDBUF:
                this.addBuf(t);
                break;
            case EnumBattleKey.VAL_DELBUF:
                this.delBuff(t);
                break;
            case EnumBattleKey.VAL_COMBO:
                this.doSkill(t);
                break;
            case EnumBattleKey.VAL_ROUND:
                var e = t[EnumBattleKey.ROUNDINDEX],
                    i = e ? "" + e : "00",
                    o = this.data.battleCFG.maxRound;
                this.scene.setRoundIndex(e), this.scene.setRoundStr(i + "/" + o);
                break;
            default:
                console.warn("未处理的STEP类型 data:" + t)
        }
    }, e.prototype.doInit = function (t) {
        for (var e = t[EnumBattleKey.INIT], i = 0, o = e.length; o > i; i++) {
            var n = e[i],
                a = RoundBattleRole.createWithData(n);
            if (a.initForceXY(), this.scene.unitMgr.addUnit(a), a.updateCurhp(), GameGlobal.modelSetting.showBattleHpVal) {
                var s = BattleRoleHpText.create();
                s.scene = this.scene, s.tar = a, this.scene.addPlug(s)
            }
            if (t[EnumBattleKey.INIT_NUM] > 1) {
                a.view.alpha = 0, this.scene.stepLock++;
                var r = MTweenThread.create(a.view).wait(100 * i).call(this.startCreateRole, a).to({
                    alpha: 1
                }, 200).call(this.onRoleJoinCommp, this);
                this.scene.tween.add(r)
            }
            if (1 == a.type && n[EnumBattleKey.R_FABAO]) {
                var l = a.createFollow("fabao/" + n[EnumBattleKey.R_FABAO]);
                l.scaleX = l.scaleY = .5
            }
            if (2 == a.type && n[EnumBattleKey.R_SHOULING]) {
                var l = a.createFollow("shouling/" + n[EnumBattleKey.R_SHOULING]);
                l.scaleX = l.scaleY = 1
            }
        }
    }, e.prototype.dealTeamBuf = function (t) {
        var e = t[EnumBattleKey.MATEBUFF],
            i = t[EnumBattleKey.RIVALBUFF];
        e && this.addTeamBuff(e, 1), i && this.addTeamBuff(i, 2)
    }, e.prototype.addTeamBuff = function (t, e) {
        for (var i = this.scene.unitMgr.filterUnits(RoundBattleUnitMgr.FILTER_FORCELIFEUNIT, Util.getTempArr(), e), o = 0, n = i.length; n > o; o++) {
            var a = i[o];
            if (a)
                for (var s = 0, r = t.length; r > s; s++) {
                    var l = t[s];
                    a.addBuffView(l, 0, a.hpOffset, 600, 600, 1, -1, !0)
                }
        }
    }, e.prototype.startCreateRole = function () {
        var t = this;
        t.addBodyEffet("battleeff/huojuan", 0, 0, 400, 400, 1, 400, !1)
    }, e.prototype.onRoleJoinCommp = function () {
        this.scene.stepLock--
    }, e.prototype.doSkill = function (t) {
        var e = t[EnumBattleKey.P_SKILLID];
        if (0 != e) {
            var i = t[EnumBattleKey.R_ID],
                o = (this.scene.unitMgr.getUnitById(i), RoundBattleSkillSelecter.getSkillLogic(e));
            o.mainRoleID = i, o.recordData = t, this.scene.addPlug(o)
        }
    }, e.prototype.dealTriggleBuff = function (t) {
        var e = t.effect;
        if (e && e.length)
            for (var i = 0; i < e.length; i++) {
                var o = e[i];
                this.dealBuffOP(o)
            }
    }, e.prototype.addBuf = function (t) {
        var e = t[EnumBattleKey.P_TARGETID],
            i = t[EnumBattleKey.P_BUFID],
            o = this.scene.unitMgr.getUnitById(e);
        o && o.addBuffView && o.addBuffView(i, 0, o.hpOffset, 600, 600, 1, -1, !0)
    }, e.prototype.delBuff = function (t) {
        var e = t[EnumBattleKey.P_TARGETID],
            i = t[EnumBattleKey.P_BUFIDXXXX],
            o = this.scene.unitMgr.getUnitById(e);
        o && o.removeBufView && o.removeBufView(i)
    }, e.prototype.dealBuffOP = function (t) {
        switch (t[EnumBattleKey.EFFECT_TYPE]) {
            case EnumBattleKey.VAL_DMG:
                this.dealDmg(t[EnumBattleKey.P_TARGETID], t);
                break;
            case EnumBattleKey.P_BUFF:
                console.log(1);
                break;
            case EnumBattleKey.VAL_CURE:
                this.dealCure(t[EnumBattleKey.P_TARGETID], t);
                break;
            default:
                t[EnumBattleKey.P_BUFF] ? this.dealBuffTriggle(t) : console.log(1)
        }
    }, e.prototype.dealDmg = function (t, e) {
        var i = this.scene.unitMgr.getUnitById(t);
        if (i) {
            var o = Util.getTempObj();
            o.dmgValue = e[EnumBattleKey.DAMGVALUE], o.newHp = e[EnumBattleKey.P_CURHP], o.newHp > 0 ? i.playHitAct(300, 300) : 10 == i.type ? i.playFickDie() : i.playDieAct(), i.takeDmg2(o)
        }
    }, e.prototype.dealCure = function (t, e) {
        var i = this.scene.unitMgr.getUnitById(t);
        if (i) {
            var o = Util.getTempObj();
            o.damgValue = 1, o[EnumBattleKey.P_CURHP] = 1, i.takeCure(o, null)
        }
    }, e.prototype.dealBuffTriggle = function (t) {
        var e = t[EnumBattleKey.P_BUFF],
            i = CFG_Buff.LIB[e];
        if (i) {
            var o = this.scene.unitMgr.getUnitById(t[EnumBattleKey.P_TARGETID]);
            if (o) {
                var n = i.text;
                if (n && "0" != n) {
                    var a = HuiHeHurtText.create();
                    1 == i.zengyijianyi ? a.setZhengYiText(o, n) : a.setJianYiText(o, n), this.scene.addPlug(a)
                }
                o.addBuffView(e, 0, o.hpOffset, 600, 600, 1, -1, !0)
            } else console.log("cant find buffTarget:" + t[EnumBattleKey.P_TARGETID])
        } else console.log("cant find buff:" + e)
    }, e
}(GameObjectPlug);
__reflect(RecordRunningPlug.prototype, "RecordRunningPlug");
var RoleHpBar = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._perc = 1, e.imgBG = new eui.Image, e.imgBG.$setY(-14), e.imgBG.$setX(-36), e.imgBG.$setWidth(72), e.addChild(e.imgBG), e.imgBar = new eui.Image, e.imgBar.$setY(-13), e.imgBar.$setX(-35), e.imgBar.$setWidth(70), e.addChild(e.imgBar), e
    }
    return __extends(e, t), e.prototype.setType = function (t) {
        if (this.type != t) {
            var e, i;
            1 == t ? (e = "resource/ui/battle/h1g.png", i = "resource/ui/battle/h1_bar.png") : (e = "resource/ui/battle/h1r.png", i = "resource/ui/battle/h1_bar.png"), this.imgBar.source = e, this.imgBG.source = i
        }
    }, e.prototype.setPerc = function (t) {
        this._perc = t, this.updateView()
    }, e.prototype.updateView = function () {
        this.imgBar.texture && (this.imgBar.width = 70 * this._perc), this._perc <= 0 ? this.visible = !1 : this.visible = !0
    }, Object.defineProperty(e.prototype, "perc", {
        get: function () {
            return this._perc
        },
        set: function (t) {
            this.setPerc(t)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setTitle = function (t) {
        if (t) {
            this.titleImg || (this.titleImg = new eui.Image);
            var e;
            "BOSS" == t && (e = "resource/ui/battle/boss.png", this.titleImg.y = -63, this.titleImg.x = -40), this.titleImg.source = e, this.titleImg.horizontalCenter = 0, DisplayUtil.addBy(this.titleImg, this)
        } else this.titleImg && DisplayUtil.remove(this.titleImg)
    }, e
}(egret.Sprite);
__reflect(RoleHpBar.prototype, "RoleHpBar");
var RoundBattleScene = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.view = new DepSprite, e.topview = new egret.Sprite, e.state = -1, e.plugs = [], e.stepLock = 0, e.roundid = 0, e.timeScale = 1.2, e.exitCounter = 0, e.ctx = {}, e.skinName = "resource/eui_skins/game/huihezhi/HuiHeZhiBG.exml", e.tween = new MTween, e
    }
    return __extends(e, t), e.initTransforn = function () {
        if (!this._isInitTf) {
            var t = this.posMatrix1 = new egret.Matrix;
            t.rotate(Math.PI * (1 + this.ROTATE)), t.scale(134, 67), t.translate(135, 580);
            var e = this.posMatrix2 = new egret.Matrix;
            e.rotate(Math.PI * this.ROTATE), e.scale(134, 67), e.translate(585, 185);
            var i = t.transformPoint(0, 0, MoveUtil.p00),
                o = i.x,
                n = i.y,
                a = t.transformPoint(0, 1, MoveUtil.p00),
                s = a.x,
                r = a.y;
            this.angle1 = Math.atan2(n - r, o - s);
            var i = e.transformPoint(0, 0, MoveUtil.p00),
                o = i.x,
                n = i.y,
                a = e.transformPoint(0, 1, MoveUtil.p00),
                s = a.x,
                r = a.y;
            this.angle2 = Math.atan2(n - r, o - s), this._isInitTf = !0
        }
    }, e.getPosMatrix = function (t) {
        var e;
        return e = 1 == t ? this.posMatrix1 : this.posMatrix2
    }, e.getAngle = function (t) {
        return 1 == t ? this.angle1 : this.angle2
    }, e.prototype.onSize = function () {
        var t = this.stage,
            e = platform.deviceTopPX,
            i = 370,
            o = 600;
        this.view.y = e + (t.stageHeight - e - i - o >> 1), this.fullStage()
    }, e.prototype.setTestViewVis = function (t) {
        var e = this;
        if (t) {
            if (!e.gmGroup) {
                var i = this.gmGroup = new eui.Group;
                i.layout = new eui.VerticalLayout, i.x = 395, i.y = 32, i.scaleX = i.scaleY = .8, e.addChild(i), e.btnPause = new eui.Button, e.btnPause.label = "暂停", i.addChild(e.btnPause), e.btnPause.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onPauseClick, e), e.btnExit = new eui.Button, e.btnExit.label = "退出", i.addChild(e.btnExit), e.btnExit.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onExitClick, e)
            }
            DisplayUtil.addBy(e.gmGroup, e)
        } else e.gmGroup && DisplayUtil.remove(e.gmGroup)
    }, e.prototype.initView = function () {
        var t = this;
        e.initTransforn(), t.unitMgr = new RoundBattleUnitMgr, t.unitMgr.scene = this, t.addChild(t.view), t.addChild(t.topview), t.txtRound = new ImageText, t.txtRound.fx = 310, t.txtRound.fy = 155 + platform.deviceTopPX, t.txtRound.charFunc = ImageText.STRFUNC, t.txtRound.container = t, GameGlobal.layerMgr.reg(UIConst.BOSSLAIXI, VFightBossLX, this), GameGlobal.layerMgr.reg(UIConst.BATTLETLUI, VBattleTLUI, this)
    }, e.prototype.setRoundIndex = function (t) {
        this.roundid = t, ModelBattleUI.getIns().onRound(this)
    }, e.prototype.setRoundStr = function (t) {
        this.txtRound.setText(t)
    }, e.prototype.update = function (t, e) {
        e = e * GameGlobal.modelBattle.timeScale * GameGlobal.modelBattle.pauseMul, t.tween.update(e), t.stateupdate(e), t.unitMgr.update(e)
    }, e.prototype.onOpen = function (e) {
        var i = GameGlobal;
        i.modelBattle.isInbattle && this.interupt(), i.modelBattle.curBattleType = e.data[EnumBattleKey.BATTLETYPE], e && "boss" == e.battleCFG.ee && GameGlobal.layerMgr.open(UIConst.BOSSLAIXI), this.battleData = e, "0" != this.battleData.battleCFG.rtText ? i.layerMgr.open(UIConst.BATTLETLUI, this.battleData) : i.layerMgr.close(UIConst.BATTLETLUI);
        var o = e.battleCFG.bg;
        o ? this.imgBG.source = "resource/ui/fightBG/" + o + ".jpg" : this.imgBG.source = null, egret.Tween.removeTweens(this), t.prototype.onOpen.call(this, e);
        var n = this;
        n.setTestViewVis(i.modelSetting.isGMOpen);
        var a = Util.getTempRect();
        if (a.x = -i.mapScene.map.x, a.y = -i.mapScene.map.y, a.width = i.stage.stageWidth, a.height = i.stage.stageHeight - 380, a.height > 1e3 && (a.height = 1e3), this.alpha = .3, egret.Tween.get(this).to({
                alpha: 1
            }, 300), e) {
            var s = new RecordRunningPlug;
            s.data = e, this.addPlug(s)
        } else {
            var r = new ClientRunnigPlug;
            this.addPlug(r)
        }
        i.modelBattle.isInbattle = !0, i.modelBattle.isInBattleIndeed = !0, GameGlobal.mapScene.checkVisible(), i.tick.addInterv(this.update, 1, this), this.battleData.type != ModelBattle.BT_GUANQIAMONSTER && SoundManager.getInstance().playBGM("fight1"), i.msgCenter.on(GameGlobal.MSG_CHANGEMAP, this.onMapChange, this), this.stepLock += 1, this.setTimeout(this.onEnterDelay, this, 300), this.setRoundStr("")
    }, e.prototype.onEnterDelay = function () {
        this.stepLock -= 1
    }, e.prototype.onMapChange = function () {
        var t = GameGlobal.modelBattle;
        t.isInbattle && t.curBattleType == ModelBattle.BT_GUANQIAMONSTER && this.waitExitPass()
    }, e.prototype.onExitClick = function () {
        this.waitExitPass()
    }, e.prototype.waitExitPass = function () {
        if (!this.exitCounter) {
            var t = BattleWaitFinishState.create();
            this.addPlug(t)
        }
    }, e.prototype.onPauseClick = function () {
        GameGlobal.modelBattle.pauseMul > 0 ? GameGlobal.modelBattle.pauseMul = 0 : GameGlobal.modelBattle.pauseMul = 1
    }, e.prototype.onClose = function () {
        this.roundid = 0, this.stepLock = 0, GameGlobal.msgCenter.off(GameGlobal.MSG_CHANGEMAP, this.onMapChange), GameGlobal.tick.removeInterv(this.update), SoundManager.getInstance().playBGM("default"), ModelBattleUI.getIns().close()
    }, e.prototype.stateupdate = function (t) {
        var e = this,
            i = this.ctx;
        i.dt = t;
        for (var o = 0, n = e.plugs.length, a = 0; n > a; a++) {
            var s = e.plugs[a];
            s ? (s.advanceTime(i), i.d && (o++, e.plugs[a] = null, s.onRemove(0), i.d = null)) : o++
        }
        o && ArrayUtil.cleannull(e.plugs)
    }, e.prototype.addPlug = function (t) {
        t.scene = this, this.plugs.push(t), t.onAdd()
    }, e.prototype.removePlug = function (t, e) {
        void 0 === e && (e = null);
        var i = this.plugs.indexOf(t);
        i >= 0 && (this.plugs[i] = null, t.onRemove(e))
    }, e.prototype.exit = function () {
        GameGlobal.mapScene.off(GameGlobal.MSG_CHANGEMAP, this.onMapChange), GameGlobal.modelBattle.notify(ModelBattle.MSG_BATTLEEND), egret.Tween.removeTweens(this), egret.Tween.get(this).wait(400).call(this.onEnd1Call, this).to({
            alpha: 0
        }, 300).call(this.onEnd2Call, this)
    }, e.prototype.onEnd1Call = function () {
        this.clearBattlePlugs(), GameGlobal.mapScene.map.fontLayer.visible = !0, GameGlobal.modelBattle.isInBattleIndeed = !1
    }, e.prototype.onEnd2Call = function () {
        GameGlobal.layerMgr.close(UIConst.BATTLESCENE), GameGlobal.modelBattle.isInbattle = !1, GameGlobal.mapScene.checkVisible(), GameGlobal.modelBattle.notify(ModelBattle.MSG_BATTLEENDED), this.callCB("finishCB", this.battleData), this.clearData()
    }, e.prototype.clearBattlePlugs = function () {
        this.unitMgr.clear(), this.clearPlugs(), this.tween.clear()
    }, e.prototype.interupt = function () {
        this.clearBattlePlugs(), this.callCB("interrupCB", this.battleData), this.clearData(), this.stepLock = 0
    }, e.prototype.clearData = function () {
        var t = this.battleData;
        t && (t.clear(), this.battleData = null)
    }, e.prototype.callCB = function (t, e) {
        if (void 0 === e && (e = null), this.battleData) {
            var i = this.battleData[t];
            i && i.runWith(e)
        }
    }, e.prototype.clearPlugs = function () {
        for (var t = 0, e = this.plugs.length; e > t; t++) {
            var i = this.plugs[t];
            i && i.onRemove(0)
        }
        this.plugs.length = 0
    }, e.prototype.setTimeout = function (t, e, i, o) {
        void 0 === e && (e = null), void 0 === o && (o = null);
        var n = TimeOutPlug.create();
        n.caller = e, n.func = t, n.timeremain = i, n.arg = o, this.addPlug(n)
    }, e.ROTATE = .8, e
}(BaseEUIView);
__reflect(RoundBattleScene.prototype, "RoundBattleScene");
var RoundBattleSkillSelecter = function () {
    function t() {}
    return t.getSkillLogic = function (t) {
        var e, i = CFG_Skill.LIB[t];
        if (i) {
            var o = i.style;
            switch (o) {
                case "pohu":
                    e = (new SkillStyleQueue).setQueue(SkillStyleQueue.mengHuShi);
                    break;
                case 11:
                    e = (new SkillStyleQueue).setQueue(SkillStyleQueue.pugongNear);
                    break;
                case 12:
                    e = HuiHePhatomAtt.create();
                    break;
                case 13:
                    e = MultAttack.create();
                    break;
                case 14:
                    e = new HuiHeAreaAttack;
                    break;
                case 21:
                    e = new FarPuGong;
                    break;
                case 22:
                    e = new LeiDong9Tian;
                    break;
                case 23:
                    e = new FarAreaAttack;
                    break;
                case 50:
                    e = new HuiHeReborn;
                    break;
                default:
                    e = MultAttack.create()
            }
            e.skillid = t, e.skillcfg = i
        }
        return e
    }, t.getRandom = function () {
        var t = [FarPuGong, LeiDong9Tian],
            e = t[t.length * Math.random() >> 0];
        return new e
    }, t.getBestSkllLogic = function (t) {
        return null
    }, t
}();
__reflect(RoundBattleSkillSelecter.prototype, "RoundBattleSkillSelecter");
var RoundBattleUnitMgr = function () {
    function t() {
        this.units = [], this.unitMap = {}, this.ctx = {}, this.depInterv = 0, this.retArr = []
    }
    return t.getOnlyClientID = function () {
        this.clentID += 1;
        var t = "clientID:" + this.clentID;
        return t
    }, t.prototype.update = function (t) {
        var e = this,
            i = e.ctx;
        i.dt = t;
        for (var o = 0, n = e.units.length, a = 0; n > a; a++) {
            var s = e.units[a];
            s ? (s.advanceTime(i), i.d && (e.units[a] = null, delete e.unitMap[s.id], s.onRemove(0), o++, i.d = null)) : o++
        }
        o && ArrayUtil.cleannull(this.units), this.depInterv += t, this.depInterv > 250 && (this.scene.view.sortChild(), this.depInterv = 0)
    }, t.prototype.addUnit = function (t) {
        if (t.id) {
            var e = this.units.indexOf(t); - 1 == e && (this.unitMap[t.id] = t, this.units.push(t), t.scene = this.scene, t.onAdd())
        }
    }, t.prototype.removeUnit = function (t) {
        if (t) {
            var e = this.units.indexOf(t); - 1 != e && (delete this.unitMap[t.id], this.units[e] = null, t.onRemove(0))
        }
    }, t.prototype.getUnitById = function (t) {
        var e = this.unitMap[t];
        return e
    }, t.prototype.filterUnits = function (t, e, i, o, n) {
        void 0 === e && (e = null), void 0 === i && (i = null), void 0 === o && (o = null), void 0 === n && (n = null);
        var a = e || this.retArr;
        a.length = 0;
        for (var s = 0, r = this.units.length; r > s; s++) {
            var l = this.units[s];
            l && t(l, i, o, n) && a.push(l)
        }
        return a
    }, t.prototype.getBestTarget = function (t, e, i, o) {
        void 0 === e && (e = null), void 0 === i && (i = null), void 0 === o && (o = null);
        for (var n = null, a = Number.MAX_VALUE, s = 0, r = this.units.length; r > s; s++) {
            var l = this.units[s];
            if (l) {
                var h = t(l, e, i, o);
                h >= 0 && a > h && (n = l, a = h)
            }
        }
        return n
    }, t.prototype.clear = function () {
        for (var t = 0, e = this.units.length; e > t; t++) {
            var i = this.units[t];
            i && i.onRemove(0)
        }
        this.units.length = 0;
        for (var o in this.unitMap) delete this.unitMap[o]
    }, t.FILTER_FORCELIFEUNIT = function (t, e, i, o) {
        return t.force && t.force == e && t.hp > 0
    }, t.FILTER_PARNET = function (t, e, i, o) {
        return t.force == e && t.id != i
    }, t.FILTER_NEAR = function (t, e, i, o) {
        if (t.hp && t.scene) {
            var n = t.scene.unitMgr.getUnitById(i);
            if (n && n.scene) {
                var a = t.force == e && t.id != i;
                return a && Math.abs(t.row - n.row) + Math.abs(t.col - n.col) <= o
            }
        }
        return !1
    }, t.LIFE_ENEMY = function (t, e, i, o) {
        return t.force && t.force != e && t.hp > 0
    }, t.NEAR_ENEMY = function (t, e, i, o) {
        if (t.force && t.hp > 0 && t.force != e.force) {
            var n = 100 * t.row + 10 * Math.abs(t.col - e.col);
            return n
        }
        return -1
    }, t.clentID = 0, t
}();
__reflect(RoundBattleUnitMgr.prototype, "RoundBattleUnitMgr");
var SkillLogicUtil = function () {
    function t() {}
    return t.setFaceDirEff = function (t, e) {
        2 == t ? e.part.rotation = 180 * (1 - RoundBattleScene.ROTATE) : (e.part.scaleY = -1, e.part.rotation = 180 * (.4 + RoundBattleScene.ROTATE))
    }, t
}();
__reflect(SkillLogicUtil.prototype, "SkillLogicUtil");
var BattleRoleHpText = function () {
    function t() {
        this.lb = new egret.TextField, this.lb.size = 18, this.id = "hptextval" + RoundBattleUnitMgr.getOnlyClientID()
    }
    return t.create = function () {
        var e = new t;
        return e
    }, t.prototype.onAdd = function () {
        this.tar.hpBar.addChild(this.lb), GameGlobal.modelBattle.on(ModelBattle.MSG_ROLETAKEDMG, this.onRoleDmg, this), this.updateHp()
    }, t.prototype.advanceTime = function (t) {}, t.prototype.onEvent = function (t, e) {}, t.prototype.onRemove = function () {
        this.tar.hpBar.removeChild(this.lb), GameGlobal.modelBattle.off(ModelBattle.MSG_ROLETAKEDMG, this.onRoleDmg, this)
    }, t.prototype.onRoleDmg = function (t) {
        t.role == this.tar && this.updateHp()
    }, t.prototype.updateHp = function () {
        this.lb.text = this.tar.hp + "/" + this.tar.maxhp
    }, t
}();
__reflect(BattleRoleHpText.prototype, "BattleRoleHpText", ["IGameObjectPlug"]);
var HuiHeEffect = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.time = 1e3, e.totaltime = 1e3, e.loop = !1, e.interv = 1e3, e.lifetime = 1e3, e.layertype = 0, e.id = RoundBattleUnitMgr.getOnlyClientID(), e.part = Part.create(), e.addChild(e.part), e
    }
    return __extends(e, t), e.create = function () {
        var t = this.POOL.length ? this.POOL.pop() : new e;
        return t
    }, e.TIMEEFFFUNC = function (t, e) {
        t.time += e.dt;
        var i = t.time / t.lifetime;
        i > 1 && t.loop && (i -= i >> 0), t.part.setPec(i), t.totaltime >= 0 && t.time >= t.totaltime && (e.d = 1)
    }, e.createCustomEff = function (t, e, i, o, n, a, s, r, l) {
        void 0 === o && (o = 1e3), void 0 === n && (n = 1e3), void 0 === a && (a = 1), void 0 === s && (s = 1e3), void 0 === r && (r = !1), void 0 === l && (l = 1e3);
        var h = this.create();
        return h.layertype = 0, h.updateFunc = this.TIMEEFFFUNC, h.part.x = e, h.part.y = i, h.part.setVal(t), h.part.setAct(a), h.dep = i + l, h.lifetime = n, h.totaltime = s, h.loop = r, h.interv = o, h
    }, e.createBodyEff = function (t, e, i, o, n, a, s, r, l) {
        void 0 === o && (o = 1e3), void 0 === n && (n = 1e3), void 0 === a && (a = 1), void 0 === s && (s = 1e3), void 0 === r && (r = !1), void 0 === l && (l = 1);
        var h = this.create();
        return h.layertype = 1, h.updateFunc = this.TIMEEFFFUNC, h.part.x = e, h.part.y = i, h.part.setVal(t), h.part.setAct(a), h.lifetime = n, h.totaltime = s, h.loop = r, h.interv = o, h
    }, e.prototype.advanceTime = function (t) {
        this.updateFunc ? this.updateFunc(this, t) : t.d = 1
    }, e.prototype.onAdd = function () {
        this.time = 0, this.tparten ? this.tparten.addChild(this) : this.scene.view.depAddChild(this)
    }, e.prototype.onRemove = function (t) {
        this.filters = null, this.part.setVal(null), this.$setRotation(0), this.$setScaleX(1), this.$setScaleY(1), this.$setX(0), this.$setY(0), this.$setAlpha(1), this.part.$setRotation(0), this.part.$setScaleX(1), this.part.$setScaleY(1), this.part.$setX(0), this.part.$setY(0), this.buffCFG = null, this.battleCount = 0, this.tparten ? (this.tparten.removeChild(this), this.tparten = null) : this.scene.view.depRemoveChild(this), this.scene.tween.removeTar(this), e.POOL.push(this), this.scene = null
    }, e.prototype.onEvent = function (t, e) {}, e.prototype.scale = function (t) {
        this.part.scaleX = this.part.scaleY = t
    }, e.POOL = [], e
}(DepSprite);
__reflect(HuiHeEffect.prototype, "HuiHeEffect", ["IGameObjectPlug"]);
var HuiHeHurtText = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.arg1 = {}, e.arg2 = {}, e._dead = 0, e.id = RoundBattleUnitMgr.getOnlyClientID(), e.imgText = new ImageText, e.imgText.container = e, e
    }
    return __extends(e, t), e.create = function () {
        this.P || (this.P = []);
        var t = this.P.length ? this.P.pop() : new e;
        return t
    }, e.prototype.onAdd = function () {
        this.dep = 1e8, this.scene.view.depAddChild(this)
    }, e.prototype.advanceTime = function (t) {
        this._dead && (t.d = this._dead)
    }, e.prototype.onRemove = function (t) {
        this.$setAlpha(1), this.$setScaleX(1), this.$setScaleY(1), this.scene.view.depRemoveChild(this), this._dead = 0, e.P.push(this)
    }, e.prototype.onEvent = function (t, e) {}, e.prototype.setCure = function (t, e) {
        this.x = t.x, this.y = t.y - 100;
        var i = e[EnumBattleKey.DAMGVALUE];
        e.dmgType ? e.dmgType : 1;
        i = Math.abs(i), e.crit ? (this.imgText.setCharFunc(ImageText.CUREFUNC), this.imgText.setText("B" + i)) : (this.imgText.setCharFunc(ImageText.CUREFUNC), this.imgText.setText("" + i)), this.anchorOffsetX = this.imgText.totalWid / 2, this.scaleX = this.scaleY = .4;
        var o = MTweenThread.create(this).to({
            scaleX: 1,
            scaleY: 1,
            y: this.y - 30
        }, 400, egret.Ease.backInOut).to({
            alpha: .3,
            y: this.y - 100
        }, 600).call(this.dead, this);
        t.scene.tween.add(o)
    }, e.prototype.setCureValue = function (t, e) {
        this.x = t.x, this.y = t.y - 100, e = Math.abs(e), this.imgText.setCharFunc(ImageText.CUREFUNC), this.imgText.setText("" + e), this.anchorOffsetX = this.imgText.totalWid / 2, this.scaleX = this.scaleY = .4;
        var i = MTweenThread.create(this).to({
            scaleX: 1,
            scaleY: 1,
            y: this.y - 30
        }, 400, egret.Ease.backInOut).to({
            alpha: .3,
            y: this.y - 100
        }, 600).call(this.dead, this);
        t.scene.tween.add(i)
    }, e.prototype.setHurt = function (t, e, i, o, n) {
        if (void 0 === o && (o = !1), void 0 === n && (n = !1), this.x = t.x, this.y = t.y - 100, n ? (this.imgText.setCharFunc(ImageText.DMGFUNC), this.imgText.setText("J" + e)) : o ? (this.imgText.setCharFunc(ImageText.CRITDMGFUNC), this.imgText.setText("B" + e)) : (this.imgText.setCharFunc(ImageText.DMGFUNC), this.imgText.setText("" + e)), this.anchorOffsetX = this.imgText.totalWid / 2, this.scaleX = this.scaleY = .4, t.scene) {
            var a = MTweenThread.create(this).to({
                scaleX: 1,
                scaleY: 1,
                y: this.y - 30
            }, 400, egret.Ease.backInOut).to({
                alpha: .3,
                y: this.y - 100
            }, 600).call(this.dead, this);
            t.scene.tween.add(a)
        }
    }, e.prototype.setAntiHurt = function (t, e) {
        this.x = t.x, this.y = t.y - 100, this.imgText.setCharFunc(ImageText.DMGFUNC), this.imgText.setText("" + e), this.anchorOffsetX = this.imgText.totalWid / 2, this.scaleX = this.scaleY = .4;
        var i = this.arg1;
        Util.clearKeys(i), i.scaleX = 1, i.scaleY = 1, i.y = this.y - 20;
        var o = this.arg2;
        Util.clearKeys(o), o.alpha = .3, o.y = this.y - 70;
        var n = MTweenThread.create(this).to(i, 400, egret.Ease.backInOut).to(o, 600).call(this.dead, this);
        t.scene.tween.add(n)
    }, e.prototype.setZhengYiText = function (t, e) {
        this.x = t.x + 50, this.y = t.y - 100, this.imgText.charFunc = ImageText.BATTLERED, this.imgText.setText(String(e));
        var i = this.arg1;
        Util.clearKeys(i), i.y = this.y - 30, i.alpha = .8;
        var o = MTweenThread.create(this).to(i, 600, egret.Ease.sineOut).call(this.dead, this).call(this.dead, this);
        this.anchorOffsetX = this.imgText.totalWid / 2, t.scene.tween.add(o)
    }, e.prototype.setJianYiText = function (t, e) {
        this.x = t.x + 50, this.y = t.y - 100, this.imgText.charFunc = ImageText.BATTLERED, this.imgText.setText(String(e));
        var i = this.arg1;
        Util.clearKeys(i), i.y = this.y + 30, i.alpha = .8;
        var o = MTweenThread.create(this).to(i, 600, egret.Ease.sineOut).call(this.dead, this).call(this.dead, this);
        this.anchorOffsetX = this.imgText.totalWid / 2, t.scene.tween.add(o)
    }, e.prototype.dead = function () {
        this._dead = 1
    }, e
}(DepSprite);
__reflect(HuiHeHurtText.prototype, "HuiHeHurtText", ["IGameObjectPlug"]);
var RoundBattleRole = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.scale = 1, e.attCount = 0, e.hitCount = 0, e.dieState = 0, e.removeing = 0, e.isBoss = !1, e.type = 1, e.dir = 1, e.force = 1, e.lastHandRound = -1, e.row = 0, e.col = 0, e.initx = 0, e.inity = 0, e.x = 0, e.y = 0, e.h = 0, e.hp = 20, e.maxhp = 20, e._body = null, e._weapon = null, e._horse = null, e._wing = null, e.actInterv = 1200, e.actTimer = 0, e.quality = 1, e.name = "oooo", e.invalid = 0, e.hpOffset = -120, e.follower = null, e._hpperc = 1, e._futureSHTime = 0, e.way = 0, e.buffIDMap = {}, e.buffVMap = {}, e.GETID(), e.view = new DepSprite, e.init(), e.createHp(), e
    }
    return __extends(e, t), e.create = function () {
        var t;
        return this.P.length ? (t = this.P.pop(), t.reset()) : t = new e, t
    }, e.prototype.reset = function () {
        this.view.$setAlpha(1), this.view.$setVisible(!0), this.view.$setScaleX(1), this.view.$setScaleY(1), this.way = 0, this.attCount = 0, this.hitCount = 0, this.dieState = 0, this._action = null
    }, e.createWithData = function (t) {
        var i = e.create(),
            o = 1;
        i.type = t[EnumBattleKey.R_TYPE];
        var n = "",
            a = null,
            s = null,
            r = null,
            l = null;
        i.scale = 1, i.hpOffset = -120;
        var h = null,
            c = t[EnumBattleKey.RHP],
            p = t[EnumBattleKey.R_MAXHP],
            u = t[EnumBattleKey.R_NAME],
            d = t[EnumBattleKey.R_ID],
            f = t[EnumBattleKey.R_POS];
        switch (i.type) {
            case 1:
                n = u, s = t[EnumBattleKey.R_SBID], a = t[EnumBattleKey.R_RIDEID], r = t[EnumBattleKey.R_WINGID], l = t[EnumBattleKey.R_HALO], i.hpOffset = -120;
                var g = GameGlobal.modelSetting,
                    m = t[EnumBattleKey.R_JOB];
                t[EnumBattleKey.R_SEX];
                o = m;
                var y = GameGlobal.modelRole.voMine.id;
                t[EnumBattleKey.R_ID] == y && null != g._bodyVal && (o = g._bodyVal), null != g._weaponVal && (s = g._weaponVal), null != g._wingVal && (r = g._wingVal), null != g._horseVal && (a = g._horseVal);
                break;
            case 2:
                var v = CFG_Pet.PETLIB[t[EnumBattleKey.SYSID]];
                n = u, o = v.m, i.hpOffset = -120, i.hpOffset = -v.ny;
                var _ = CFG_MOD.LIB[v.m];
                _ && (i.scale = _.scale / 100);
                break;
            case 3:
                var G = CFG_HUOBAN1.LIB[t[EnumBattleKey.SYSID]];
                n = u, o = G.m, i.hpOffset = -G.ny;
                break;
            case 10:
                var b = CFG_MONSTER.LIB[t[EnumBattleKey.SYSID]];
                if (i.monsterCFG = b, p = b.qixue, b) {
                    if (b.mx.indexOf(",")) var C = b.mx.split(","),
                        T = C[Math.random() * C.length >> 0];
                    else T = b.mx;
                    var _ = CFG_MOD.LIB[T];
                    _ && (i.scale = _.scale / 100, o = _.mid, i.hpOffset = -_.ny)
                }
                3 == b.t || 4 == b.t ? (h = "BOSS", i.isBoss = !0) : i.isBoss = !1, GameGlobal.modelSetting.staticMonsterModel && (o = GameGlobal.modelSetting.staticMonsterModel)
        }
        return i.id = d, i.row = (f - 1) / 5 >> 0, i.col = (f - 1) % 5, i.maxhp = void 0 != p ? p : c, i.hp = c, i.setCurhp(i.hp), i.force = t[EnumBattleKey.R_FORCE], GameGlobal.modelSetting.isReverBattleForce ? i.dir = 1 == i.force ? 2 : 1 : i.dir = i.force, i.setBody(o), i.setHorse(a), i.setWeapon(s), i.setName(n), i.setWing(r), i.setHalo(l), i.hpBar.setTitle(h), i.hpBar.y = i.hpOffset, i.hpBar.setType(i.force), i.hp ? i.playStand() : i.playDieAct(), i
    }, e.prototype.createFollow = function (t) {
        if (this.scene) {
            var e = RoundBattleRoleFollower.create();
            return e.ox = 1 == this.dir ? 30 : -30, e.oy = 1 == this.dir ? 20 : -20, e.x = this.x + e.ox, e.y = this.y + e.oy, e.tar = this, e.die = !1, this.follower = e, e.part.setVal(t), this.scene.unitMgr.addUnit(e), e.part
        }
    }, e.prototype.init = function () {
        this.initParts()
    }, e.prototype.setName = function (t) {
        this.name = t, t ? (this.nameBar || (this.nameBar = NameBar.create(), this.nameBar.y = 5, this.view.addChild(this.nameBar)), this.nameBar.visible = !0, this.nameBar.setQuality(this.quality), this.nameBar.setName(t)) : this.nameBar && (this.nameBar.visible = !1)
    }, e.prototype.setBody = function (t) {
        this._body = t, t ? this.addPart(Parts.P_BODY, Parts.P_BODY) : this.removePart(Parts.P_BODY), this.invalid = 768
    }, e.prototype.setWeapon = function (t) {
        this._weapon = t, t ? this.addPart(Parts.P_WEAPON, Parts.P_WEAPON) : this.removePart(Parts.P_WEAPON), this.invalid = 768
    }, e.prototype.setHorse = function (t) {
        this._horse = t, t ? this.addPart(Parts.P_HORSEDOWN, Parts.P_HORSEDOWN) : this.removePart(Parts.P_HORSEDOWN), this.invalid = 768
    }, e.prototype.setWing = function (t) {
        this._wing = t, t ? this.addPart(Parts.P_WING, Parts.P_WING) : this.removePart(Parts.P_WING), this.invalid = 768
    }, e.prototype.setHalo = function (t) {
        this._halo = t, t ? this.addPart(Parts.P_SHADOW, Parts.P_SHADOW) : this.removePart(Parts.P_SHADOW), this.invalid = 768
    }, e.prototype.GETID = function () {
        this.id = RoundBattleUnitMgr.getOnlyClientID()
    }, e.prototype.initParts = function () {
        this.parts = new Parts;
        var t = this.shadow = new StaticPart;
        this.view.addChild(t), t.setVal("body/s/1"), t.setAct(4), this.view.addChild(this.parts)
    }, e.prototype.createHp = function () {
        this.hpBar || (this.hpBar = new RoleHpBar, this.view.addChild(this.hpBar)), this.hpBar.$setY(this.hpOffset)
    }, e.prototype.onAdd = function () {
        this.scene.view.depAddChild(this.view), this.view.dep = this.y
    }, e.prototype.advanceTime = function (t) {
        this.view.$setX(this.x), this.view.$setY(this.y - this.h), this.view.dep = this.y, this.parts.perc = 0, this.actTimer += t.dt;
        var e = this.actTimer / this.actInterv;
        this.parts.perc = e, this.invalid && (this.updateAct(), this.invalid = 0)
    }, e.prototype.onRemove = function () {
        this.attCount = 0, this.hitCount = 0, this.dieState = 0, this.removeing = 0, this._action = null, this.scene.view.depRemoveChild(this.view), this.parts.dispose(), this.view.filters = null, this.scene = null, this.setHorse(null), this.setWeapon(null), this.setWing(null), this.setBody(null), this.setHalo(null), this.isBoss = !1, this.monsterCFG = null, this.scale = 1, this.clearBuffMV(), this.follower = null, e.P.push(this)
    }, e.prototype.isIdle = function () {
        return !0
    }, e.prototype.initForceXY = function () {
        var t = this.posMatrix = RoundBattleScene.getPosMatrix(this.dir),
            e = t.transformPoint(this.col, this.row, MoveUtil.nextPointRet);
        this.view.x = this.x = this.initx = e.x, this.y = this.inity = e.y, this.view.y = e.y - this.h, this.updateAct();
        var i = 1 == this.dir ? 4 : 2;
        this.setWay(i)
    }, e.prototype.updateAct = function () {
        var t;
        if (this.attCount ? t = this.attackState : this.hitCount ? t = "hit" : this.dieState ? t = "die" : (t = "idle", this.actInterv = 800, this.parts.ptype = Parts.DIS_REAPEAT), t != this._action) {
            if (this._action = t, 256 & this.invalid) {
                var e = t;
                this._horse && "die" != t && (e = "z_" + t), this._horse || "skill" == t && (e = t = "attack");
                var i = "body/" + this._body + "/" + e;
                if (this.parts.setPart(Parts.P_BODY, i), this._weapon) {
                    var o = "weapon/" + this._weapon + "/" + e;
                    this.parts.setPart(Parts.P_WEAPON, o)
                }
                if (this._horse) {
                    if ("attack" == t || "skill" == t) {
                        var n = "horse/" + this._horse + "/" + t;
                        if (CFG_MOD.LIBNOHEAD[this._horse]) a = null;
                        else var a = "horse/" + this._horse + "h/" + t
                    } else {
                        var n = "horse/" + this._horse + "/idle";
                        if (CFG_MOD.LIBNOHEAD[this._horse]) a = null;
                        else var a = "horse/" + this._horse + "h/idle"
                    }
                    this.parts.setPart(Parts.P_HORSEDOWN, n)
                }
                if (this._wing) {
                    var s = this.parts.dic[Parts.P_WING];
                    if ("die" == e) var r = null;
                    else r = "wing/" + this._wing + "/" + e;
                    this.parts.setPart(Parts.P_WING, r)
                }
                if (this._halo) {
                    var l = this.parts.dic[Parts.P_SHADOW];
                    l && (l.setVal("halo/" + this._halo), l.setAct(1))
                }(1 == this.type || 2 == this.type) && this.follower && ("die" == t ? this.follower.die = !0 : this.follower.die = !1), this.invalid ^= 256
            }
            if (512 & this.invalid) {
                var s = this.parts.dic[Parts.P_WING];
                s && (1 == this.dir ? s.dep = Parts.P_WING : s.dep = Parts.P_WINGDOWN), this.parts.sort(), this.invalid ^= 512
            }
        }
    }, e.prototype.addPart = function (t, e) {
        var i = this.parts.dic[t];
        return i || (i = Part.create(), i.type = t, i.dep = e, this.parts.addPart(i)), i
    }, e.prototype.removePart = function (t) {
        var e = this.parts.dic[t];
        e && this.removePart(e)
    }, e.prototype.playAttack = function (t, e) {
        void 0 === t && (t = 800), void 0 === e && (e = 800), this.actInterv = t, this.actTimer = 0, this.parts.perc = 0, this.parts.ptype = Parts.DIS_ONCE, this.attackState = "attack", this.attCount++, e > 0 && this.scene.setTimeout(this.onActEnd, this, e), this.invalid |= 256
    }, e.prototype.onActEnd = function () {
        this.attCount--, this.attCount || (this.invalid |= 256)
    }, e.prototype.onHitEnd = function () {
        this.hitCount--, this.hitCount || (this.invalid |= 256)
    }, e.prototype.playSkill = function (t, e) {
        if (void 0 === t && (t = 800), void 0 === e && (e = 800), this.actInterv = t, this.actTimer = 0, this.parts.perc = 0, this.parts.ptype = Parts.DIS_ONCE, this.attackState = "skill", this.attCount++, e > 0 && this.scene.setTimeout(this.onActEnd, this, e), this.invalid |= 256, 1 == this.type) {
            var i = 2;
            if (this._horse) {
                var o = 1 == this.dir ? 1 : 3;
                this.addBodyEffet("battleeff/swordEff_" + i + "_skill_z", 0, 0, t, t, o, t, !1)
            }
        }
    }, e.prototype.playStand = function () {}, e.prototype.playRun = function () {
        this.playStand()
    }, e.prototype.playHit = function () {
        this.playHitAct();
        var t = this.getFacePoint(MoveUtil.nextPointRet, -.25),
            e = MTweenThread.create(this).to({
                x: t.x,
                y: t.y
            }, 500, MathUtil.HURTTRAINS);
        this.scene.tween.add(e)
    }, e.prototype.playHitAct = function (t, e) {
        void 0 === t && (t = 400), void 0 === e && (e = 400), this.actInterv = t, this.actTimer = 0, this.parts.perc = 0, this.parts.ptype = Parts.DIS_ONCE, this.hitCount++, e > 0 && this.scene.setTimeout(this.onHitEnd, this, e), this.invalid |= 256
    }, e.prototype.playDie = function () {
        10 == this.type ? Math.random() >= .5 ? this.playFlyDie() : this.playFickDie() : (this.clearBuffMV(), this.playDieAct()), this.removeHpName(), this.removeBuffByEvt(1)
    }, e.prototype.playFickDie = function () {
        var t = DeadFlyState.create();
        t.scene = this.scene, t.role = this, this.scene.addPlug(t)
    }, e.prototype.playFlyDie = function () {
        var t = DeadFickState.create();
        t.scene = this.scene, t.role = this, this.scene.addPlug(t)
    }, e.prototype.removeHpName = function () {
        this.hpBar && (this.hpBar.visible = !1), this.nameBar && (this.nameBar.visible = !1)
    }, Object.defineProperty(e.prototype, "hpPerc", {
        get: function () {
            return this._hpperc
        },
        set: function (t) {
            this._hpperc = t, this.hpBar && (this.hpBar.scaleX = t)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.playDieAct = function () {
        this.dieState = 1, this.actTimer = 0, this.parts.perc = 0, this.actInterv = 300, this.parts.ptype = Parts.DIS_ONCE, this.invalid |= 256, this.showBuffTrigEffView("dieEff", 1)
    }, e.prototype.getFacePoint = function (t, e) {
        void 0 === t && (t = null), void 0 === e && (e = 1);
        var i = t || MoveUtil.nextPointRet;
        return this.posMatrix.transformPoint(this.col, this.row - e, i), i.y += 1, i
    }, e.prototype.pos = function (t, e) {
        this.view.x = t, this.view.y = e - this.h
    }, e.prototype.takeCure = function (t, e) {
        var i = this;
        if (t[EnumBattleKey.DAMGVALUE]) {
            i.hp = t[EnumBattleKey.P_CURHP], i.tweenHpBar(i.hpBar, i.hp / i.maxhp);
            var o = HuiHeHurtText.create();
            e && (t.dmgType = e.sktype), o.setCure(i, t), i.scene.unitMgr.addUnit(o)
        }
    }, e.prototype.rebirth = function (t) {
        this.dieState = 0
    }, e.prototype.tweenHpBar = function (t, e) {
        if (t._perc != e) {
            this._hpTwmObj || (this._hpTwmObj = {}), this._hpTwmObj.perc = e;
            var i = MTweenThread.create(t).to(this._hpTwmObj, 200);
            this.scene.tween.add(i)
        }
    }, e.prototype.takeDmg = function (t, e) {
        var i = this;
        if (t[EnumBattleKey.DAMGVALUE]) {
            i.hp = t[EnumBattleKey.P_CURHP], i.hp < 0 && (i.hp = 0), t.crit && GameGlobal.mapScene.shake(), t[EnumBattleKey.P_DEADFLAG] ? i.playDie() : i.hp > 0 ? i.hitCount || i.playHit() : (i.clearBuffMV(), i.playDieAct()), i.tweenHpBar(i.hpBar, i.hp / i.maxhp);
            var o = t.dmgType ? t.dmgType : 1,
                n = t[EnumBattleKey.EFFECT_TYPE] == EnumBattleKey.VAL_JS;
            this.showHurtText(t[EnumBattleKey.DAMGVALUE], o, t.crit ? !0 : !1, n);
            var a = Util.getTempObj();
            a.role = this, a.value = t[EnumBattleKey.DAMGVALUE], GameGlobal.modelBattle.notify(ModelBattle.MSG_ROLETAKEDMG, a)
        } else t[EnumBattleKey.P_CURHP] > 0 && i.setCurhp(t[EnumBattleKey.P_CURHP])
    }, e.prototype.showHurtText = function (t, e, i, o) {
        var n = egret.getTimer();
        if (n > this._futureSHTime) {
            var a = HuiHeHurtText.create();
            a.setHurt(this, t, e, i, o), this.scene.unitMgr.addUnit(a)
        } else {
            var s = this._futureSHTime - n;
            this.scene.setTimeout(this.showHurtTextNow, this, s, [t, e, i])
        }
        this._futureSHTime = Math.max(n, this._futureSHTime) + 300
    }, e.prototype.showHurtTextNow = function (t) {
        if (this.scene) {
            var e = HuiHeHurtText.create();
            e.setHurt(this, t[0], t[1], t[2]), this.scene.unitMgr.addUnit(e)
        }
    }, e.prototype.takeDmg2 = function (t) {
        var e = t.dmgValue,
            i = t.newHp;
        this.showHurtText(e, 0, !1, !1), this.setCurhp(i, !0);
        var o = Util.getTempObj();
        o.role = this, o.value = e, GameGlobal.modelBattle.notify(ModelBattle.MSG_ROLETAKEDMG, o)
    }, e.prototype.setCurhp = function (t, e) {
        if (void 0 === e && (e = !1), 0 > t && (t = 0), this.dieState && t > 0) {
            this.dieState = 0, this.invalid |= 256, this.h = 0;
            var i = MTweenThread.create(this).to({
                h: 50,
                x: this.initx,
                y: this.inity
            }, 400, MathUtil.EASESIN05).call(this.onRebornEnd, this).wait(100);
            this.scene.tween.add(i), this.scene.stepLock++
        }
        if (this.hp = t, e) {
            var o = this.hp / this.maxhp;
            this.tweenHpBar(this.hpBar, o)
        } else {
            var o = t / this.maxhp;
            o > 1 ? o = 1 : 0 > o && (o = 0), this.hpBar.setPerc(t / this.maxhp)
        }
    }, e.prototype.onRebornEnd = function () {
        this.scene.stepLock--
    }, e.prototype.updateCurhp = function () {
        this.hpBar || this.createHp(), this.hpBar.setPerc(this.hp / this.maxhp)
    }, e.prototype.clone = function () {
        var t = e.create();
        return t.id = RoundBattleUnitMgr.getOnlyClientID(), t.setName(null), t.force = 0, t.setBody(this._body), t.setWay(this.way), t.row = this.row, t.col = this.col, t.x = this.x, t.y = this.y, t.initx = this.initx, t.inity = this.inity, t.hp = 0, t.invalid |= 256, t.updateAct(), t
    }, e.prototype.setWay = function (t) {
        var e = this.scale;
        this.parts.scaleY = e, this.way != t && (1 == t ? (this.parts.scaleX = -1 * e, this.parts.setVal(1)) : 2 == t ? (this.parts.scaleX = 1 * e, this.parts.setVal(3)) : 3 == t ? (this.parts.scaleX = -1 * e, this.parts.setVal(3)) : (this.parts.scaleX = 1 * e, this.parts.setVal(1)), this.way = t)
    }, e.prototype.addBuffView = function (t, e, i, o, n, a, s, r) {
        var l = CFG_Buff.LIB[t];
        if (l) {
            this.buffIDMap[t] ? this.buffIDMap[t]++ : this.buffIDMap[t] = 1;
            var h = l.effv;
            if (h && "0" != h) {
                var c = "battleeff/" + h;
                if (this.buffVMap[c]) this.buffVMap[c].battleCount++;
                else {
                    var p = this.addBodyEffet(c, e, i, o, n, a, s, r);
                    p.buffCFG = l, p.battleCount = 1, this.buffVMap[c] = p
                }
            }
        }
    }, e.prototype.removeBufView = function (t) {
        var e = CFG_Buff.LIB[t];
        if (e) {
            delete this.buffIDMap[t];
            var i = e.effv;
            if (i && "0" != i) {
                var o = "battleeff/" + i,
                    n = this.buffVMap[o];
                n && this.scene && (delete this.buffVMap[o], this.scene.removePlug(n))
            }
        }
    }, e.prototype.removeBuffByEvt = function (t) {
        for (var e in this.buffIDMap) {
            var i = (this.buffIDMap[e], CFG_Buff.LIB[e]);
            if (i && i.rflag & t && (this.buffIDMap[e]--, 0 == this.buffIDMap[e])) {
                delete this.buffIDMap[e];
                var o = i.effv;
                if (o && "0" != o) {
                    var n = "battleeff/" + o,
                        a = this.buffVMap[n];
                    a && (a.battleCount = 0, 0 == a.battleCount && (delete this.buffVMap[n], this.scene && this.scene.removePlug(a)))
                }
            }
        }
    }, e.prototype.clearBuffMV = function () {
        for (var t in this.buffIDMap) delete this.buffIDMap[t];
        for (var e in this.buffVMap) {
            var i = this.buffVMap[e];
            delete this.buffVMap[e], i.scene && i.scene.removePlug(i)
        }
    }, e.prototype.addBodyEffet = function (t, e, i, o, n, a, s, r) {
        var l = HuiHeEffect.createBodyEff(t, e, i, o, n, a, s, r, 1);
        return l.tparten = this.view, l.dep = 1e6, this.scene.addPlug(l), l
    }, e.prototype.addTextEff = function (t, e) {
        void 0 === e && (e = "battleeff/battleText");
        var i = HuiHeEffect.createBodyEff(e, 0, -100, 600, 600, t, 600, !1, 1);
        i.tparten = this.view, i.dep = 1e6, this.scene.addPlug(i), i.alpha = 1;
        var o = MTweenThread.create(i.part).to({
            scaleX: 1.5,
            scaleY: 1.5
        }, 600, MathUtil.HURTTRAINS);
        return this.scene.tween.add(o), i
    }, e.prototype.showSkillText = function (t) {
        var e = SkillNameText.create();
        e.setToStr(this, t), this.scene.addPlug(e)
    }, e.prototype.showBuffTrigEffView = function (t, e) {
        var i = this.buffIDMap;
        for (var o in i) {
            var n = CFG_Buff.LIB[o];
            if (n) {
                if (n.ext && n.ext[t]) {
                    var a = HuiHeEffect.createCustomEff("battleeff/" + n.ext[t], this.x, this.y, 500, 500, 1, 500, !1, 1e5);
                    this.scene.unitMgr.addUnit(a)
                }
                n.rflag & e && this.removeBufView(n.ID)
            }
        }
    }, e.P = [], e.OID = 0, e
}(GameObjectPlug);
__reflect(RoundBattleRole.prototype, "RoundBattleRole");
var RoundBattleRoleFollower = function () {
    function t() {
        this.renderInt = 0, this.vertPerc = 0, this.x = 0, this.y = 0, this.ox = 0, this.oy = 0, this.die = !1, this.view = new DepSprite, this.id = "follow:" + RoundBattleUnitMgr.getOnlyClientID(), this.part = Part.create(), this.part.setAct(1), this.part.$setY(-130), this.view.$doAddChild(this.part, 0, !1)
    }
    return t.create = function () {
        return this.P.length ? this.P.pop() : new t
    }, t.prototype.advanceTime = function (t) {
        var e = this;
        if (e.renderInt += t.dt, e.renderInt >= 100) {
            var i = e.part._perc + e.renderInt / 1e3;
            i > 1 && (i -= i >> 0), e.part.setPec(i), e.renderInt = 0
        }
        var o = e.tar.x + e.ox - e.x,
            n = e.tar.y + e.oy - e.y;
        return o > 2 || -2 > o || n > 2 || -2 > n ? (e.x = .2 * o + e.x, e.y = .2 * n + e.y) : e.part.$setY(-130 + 20 * Math.sin(e.vertPerc += .05)), e.view.dep = e.y, e.view.$setX(e.x), e.view.$setY(e.y), e.die && e.part.$setY(0), !0
    }, t.prototype.onAdd = function () {
        this.scene.view.depAddChild(this.view)
    }, t.prototype.onRemove = function () {
        this.scene.view.depRemoveChild(this.view), t.P.push(this)
    }, t.prototype.onEvent = function (t, e) {}, t.P = [], t
}();
__reflect(RoundBattleRoleFollower.prototype, "RoundBattleRoleFollower", ["IGameObjectPlug"]);
var SkillNameText = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.tf = new egret.TextField, e.arg1 = {}, e.arg2 = {}, e.id = RoundBattleUnitMgr.getOnlyClientID(), e.imgBG = new eui.Image, e.imgBG.source = "CM1_json.bm_greyTxtBG", e.imgBG.width = 150, e.imgBG.height = 40, e.addChild(e.imgBG), e.tf.size = 26, e.tf.y = 4, e.tf.stroke = 2, e.tf.strokeColor = 4009753, e.tf.textColor = 16574169, e.addChild(e.tf), e.anchorOffsetX = 75, e.anchorOffsetY = 45, e
    }
    return __extends(e, t), e.create = function () {
        var t = this.POOL.length ? this.POOL.pop() : new e;
        return t
    }, e.prototype.onAdd = function () {
        this.dep = 1e8, this.scene.view.depAddChild(this), this.showAni()
    }, e.prototype.advanceTime = function (t) {}, e.prototype.onRemove = function (t) {
        this.scene.view.depRemoveChild(this), e.POOL.push(this)
    }, e.prototype.onEvent = function (t, e) {}, e.prototype.showAni = function () {
        var t = -1;
        this.tag && 1 == this.tag.force && (t = t = 1), this.scaleX = this.scaleY = .5, this.alpha = .4;
        var e = this.arg1;
        e.scaleX = 1, e.scaleY = 1, e.alpha = 1, e.y = this.y - 20;
        var i = this.arg2;
        i.x = this.x + 100 * -t, i.alpha = .2;
        var o = MTweenThread.create(this).to(e, 200, egret.Ease.cubicOut).wait(250).to(i, 200).call(this.die, this);
        this.scene.tween.add(o)
    }, e.prototype.die = function () {
        this.scene.removePlug(this)
    }, e.prototype.setToStr = function (t, e) {
        this.x = t.x, this.y = t.y + t.hpOffset, this.tf.text = e, this.tf.x = (150 - this.tf.textWidth >> 1) + 20, this.tf.y = 40 - this.tf.textHeight >> 1
    }, e.POOL = [], e
}(DepSprite);
__reflect(SkillNameText.prototype, "SkillNameText", ["IGameObjectPlug"]);
var TakeBuffText = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.arg1 = {}, e.imgText = new ImageText, e.imgText.container = e, e
    }
    return __extends(e, t), e.create = function () {
        var t = this.POOL && this.POOL.length ? this.POOL.pop() : new e;
        return t
    }, e.prototype.initLib = function (t) {
        CFG_Buff.LIB[t];
        this.imgText.setCharFunc(ImageText.BATTLERED);
        var e = "F",
            i = "d",
            o = e + i;
        this.imgText.setText(o), this.$setAnchorOffsetX(this.imgText.totalWid / 2), this.dep = 1e8, this.alpha = 1, this.reduceDown()
    }, e.prototype.addUp = function () {
        this.x = this.target.x + 30, this.y = this.target.y - 120;
        var t = this.arg1;
        t.y = this.y - 50, t.alpha = .5;
        var e = MTweenThread.create(this).to(t, 600).call(this.dead, this);
        this.target.scene.tween.add(e)
    }, e.prototype.reduceDown = function () {
        this.x = this.target.x + 30, this.y = this.target.y - 120;
        var t = this.arg1;
        t.y = this.y + 50, t.alpha = .5;
        var e = MTweenThread.create(this).to(t, 600).call(this.dead, this);
        this.target.scene.tween.add(e)
    }, e.prototype.onAdd = function () {
        this.scene.view.depAddChild(this)
    }, e.prototype.advanceTime = function (t) {}, e.prototype.onEvent = function (t, e) {}, e.prototype.dead = function () {
        this.scene && this.scene.removePlug(this)
    }, e.prototype.onRemove = function (t) {
        this.scene.view.depRemoveChild(this), this.scene = null;
        var i = e;
        i.POOL || (i.POOL = []), i.POOL.push(this)
    }, e
}(DepSprite);
__reflect(TakeBuffText.prototype, "TakeBuffText", ["IGameObjectPlug"]);
var TimeOutPlug = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.timeremain = 0, e
    }
    return __extends(e, t), e.create = function () {
        var t = this.P.length ? this.P.pop() : new e;
        return t
    }, e.prototype.onAdd = function () {}, e.prototype.advanceTime = function (t) {
        this.timeremain -= t.dt, this.timeremain <= 0 && (this.func.call(this.caller, this.arg), t.d = 1)
    }, e.prototype.onRemove = function () {
        this.scene && (e.P.push(this), this.arg = null, this.scene = null)
    }, e.P = [], e
}(GameObjectPlug);
__reflect(TimeOutPlug.prototype, "TimeOutPlug");
var FarAreaAttack = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.time = 0, e
    }
    return __extends(e, t), e.prototype.advanceTime = function (t) {}, e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.index = 0, this.attacker = this.scene.unitMgr.getUnitById(this.mainRoleID), this.attacker.playSkill(), this.scene.stepLock++, this.delayTWCall(this.showEff1, 300), this.delayTWCall(this.dealAllRecord, 700), this.delayTWCall(this.dead, 1e3)
    }, e.prototype.onRemove = function () {
        this.scene.stepLock--
    }, e.prototype.showEff1 = function () {
        var t = this.skillcfg.eff1,
            e = this.getForceTranspoint(1 == this.attacker.dir ? 2 : 1, 2, .5),
            i = HuiHeEffect.createCustomEff("battleeff/" + t, e.x, e.y, 800, 800, 1, 800, !1);
        i.scale(1.5), this.scene.addPlug(i)
    }, e
}(HuiHeSkillBase);
__reflect(FarAreaAttack.prototype, "FarAreaAttack");
var FarPuGong = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.numtar = 0, e.lifeTime = 0, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        if (t.prototype.onAdd.call(this), this.attacker = this.scene.unitMgr.getUnitById(this.mainRoleID), !this.attacker) return void ViewText.text("errorID:" + this.mainRoleID);
        if (this.scene.stepLock++, this.numtar = 0, this.attacker.hp) this.attacker.playSkill(800, 800);
        else {
            var e = this.attacker.clone();
            e.view.alpha = .8, e.view.filters = Color.getColorGlodenFilters(), e.scene = this.scene, this.scene.unitMgr.addUnit(e), e.playSkill(800, 800);
            var i = MTweenThread.create(e.view).wait(1e3).to({
                alpha: .2
            }, 500).call(this.onPhatomEnd, this, [e]);
            this.scene.tween.add(i)
        }
        for (var o = this.recordData[EnumBattleKey.EFFECT], n = (this.skillcfg.scfg, this.getStyleCFGArg("delay1", 450)), a = this.getStyleCFGArg("interv", 300), s = this.getStyleCFGArg("wait1", 200), r = 0; r < o.length; r++)
            if (o[r][EnumBattleKey.EFFECT_TYPE] == EnumBattleKey.VAL_DMG || o[r][EnumBattleKey.EFFECT_TYPE] == EnumBattleKey.VAL_CURE) {
                var l = [r],
                    i = MTweenThread.create(this).wait(n + r * a).call(this.onTarEff1, this, l).wait(s).call(this.dealIndex, this, l);
                this.scene.tween.add(i), this.numtar++
            } this.numtar || (this.dealAllRecord(), this.delayTWCall(this.dead, 400, this))
    }, e.prototype.onPhatomEnd = function (t) {
        t.scene && t.scene.unitMgr.removeUnit(t)
    }, e.prototype.advanceTime = function (t) {}, e.prototype.onRemove = function () {
        this.scene.stepLock--
    }, e.prototype.onTarEff1 = function (t) {
        var e = this.getRecordTar(t);
        if (e) {
            var i = this.getStyleCFGArg("efftime", 400);
            if ("0" != this.skillcfg.eff1) {
                var o = "battleeff/" + this.skillcfg.eff1,
                    n = e.addBodyEffet(o, 0, 0, i, i, 1, i, !1),
                    a = this.getStyleCFGArg("alphaBlend", 0),
                    s = this.getStyleCFGArg("move", 0),
                    r = this.getStyleCFGArg("deff", !1);
                if (r && SkillLogicUtil.setFaceDirEff(e.dir, n), a || s) {
                    var l = {};
                    s && (l.x = n.x + .67 * s, l.y = n.y - .33 * s, n.x = n.x - .67 * s, n.y = n.y + .33 * s), a && (l.alpha = a);
                    var h = MTweenThread.create(n).to(l, i);
                    this.scene.tween.add(h)
                }
            }
        } else this.dead()
    }, e.prototype.dealIndex = function (e) {
        this.numtar--;
        var i = this.recordData[EnumBattleKey.EFFECT],
            o = i[e];
        if (t.prototype.dealIndex.call(this, e), o[EnumBattleKey.EFFECT_TYPE] == EnumBattleKey.VAL_DMG || o[EnumBattleKey.EFFECT_TYPE] == EnumBattleKey.VAL_CURE)
            for (var n = o[EnumBattleKey.P_TARGETID], a = 0, s = i.length; s > a; a++) {
                var r = i[a];
                a != e && (r[EnumBattleKey.P_BUFF] ? r[EnumBattleKey.P_TARGETID] == n && t.prototype.dealIndex.call(this, a) : r[EnumBattleKey.EFFECT_TYPE] == EnumBattleKey.P_BUFF && r[EnumBattleKey.P_TARGETID] == n && this.dealIndex(a))
            }
        if (this.numtar <= 0)
            if (this.hasNextCombo()) this.delayTWCall(this.onCureAndHitComp, 200, this);
            else {
                var l = this.getStyleCFGArg("endDelay", 500);
                this.delayTWCall(this.onCureAndHitComp, l, this)
            }
    }, e.prototype.onCureAndHitComp = function () {
        for (var e = this.recordData[EnumBattleKey.EFFECT], i = 0, o = 0, n = e.length; n > o; o++) {
            var a = e[o];
            if (a[EnumBattleKey.EFFECT_TYPE] == EnumBattleKey.VAL_DELTBUF) {
                this.scene.setTimeout(this.applyDealIndex, this, 200, o), i = 400;
                var s = this.scene.unitMgr.getUnitById(a[EnumBattleKey.P_TARGETID]);
                s && s.addBodyEffet("battleeff/clearBuf", 0, 0, 600, 600, 1, 600, !1)
            } else a[EnumBattleKey.EFFECT_TYPE] == EnumBattleKey.k_VAMPIRE ? t.prototype.dealIndex.call(this, o) : a[EnumBattleKey.EFFECT_TYPE] == EnumBattleKey.P_BUFF && t.prototype.dealIndex.call(this, o)
        }
        i ? this.scene.setTimeout(this.dead, this, i) : this.dead()
    }, e.prototype.applyDealIndex = function (e) {
        t.prototype.dealIndex.call(this, e)
    }, e
}(HuiHeSkillBase);
__reflect(FarPuGong.prototype, "FarPuGong");
var LeiDong9Tian = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.time = 0, e
    }
    return __extends(e, t), e.prototype.advanceTime = function (t) {}, e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.index = 0, this.attacker = this.scene.unitMgr.getUnitById(this.mainRoleID), this.attacker.playSkill(), this.scene.stepLock++, this.delayTWCall(this.showEff1, 200), this.delayTWCall(this.showEff2, 450), this.delayTWCall(this.dealAllRecord, 600), this.delayTWCall(this.dead, 1e3)
    }, e.prototype.onRemove = function () {
        this.scene.stepLock--
    }, e.prototype.showEff1 = function () {
        var t = this.getForceTranspoint(1 == this.attacker.dir ? 2 : 1, 2, .5),
            e = HuiHeEffect.createCustomEff("battleeff/leidong", t.x, t.y, 500, 500, 1, 500, !1);
        e.scale(1.5), this.scene.addPlug(e)
    }, e.prototype.showEff2 = function () {
        var t = this.getForceTranspoint(1 == this.attacker.dir ? 2 : 1, 2, .5),
            e = HuiHeEffect.createCustomEff("battleeff/leidong", t.x, t.y, 500, 500, 2, 500, !1, 1001);
        e.scale(1.5), this.scene.addPlug(e), e.alpha = 1;
        var i = MTweenThread.create(e).wait(250).to({
            alpha: .5
        }, 250);
        this.scene.tween.add(i)
    }, e
}(HuiHeSkillBase);
__reflect(LeiDong9Tian.prototype, "LeiDong9Tian");
var MengHuShi = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.numtar = 0, e.lifeTime = 0, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.attacker = this.scene.unitMgr.getUnitById(this.mainRoleID), this.scene.stepLock++, this.numtar = 0, this.attacker.playAttack(1e3, 1e3);
        for (var e = this.recordData[EnumBattleKey.EFFECT], i = 0; i < e.length; i++)
            if (e[i][EnumBattleKey.EFFECT_TYPE] == EnumBattleKey.VAL_DMG) {
                var o = [i],
                    n = MTweenThread.create(this).wait(450 + 300 * i).call(this.onTarEff1, this, o).wait(200).call(this.dealIndex, this, o);
                this.scene.tween.add(n), this.numtar++
            }
    }, e.prototype.advanceTime = function (t) {}, e.prototype.onRemove = function () {
        this.scene.stepLock--
    }, e.prototype.onTarEff1 = function (t) {
        this.numtar--;
        var e = this.getRecordTar(t);
        if (e) {
            var i = "battleeff/menghushi",
                o = HuiHeEffect.createCustomEff(i, e.x, e.y, 600, 600, 1, 600, !1);
            this.scene.addPlug(o), SkillLogicUtil.setFaceDirEff(e.dir, o)
        }
    }, e.prototype.dealIndex = function (e) {
        t.prototype.dealIndex.call(this, e), this.numtar <= 0 && this.delayTWCall(this.dead, 500, this)
    }, e
}(HuiHeSkillBase);
__reflect(MengHuShi.prototype, "MengHuShi");
var HuiHeAreaAttack = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.step = 0, e.timer = 0, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.scene.stepLock++, this.attacker = this.scene.unitMgr.getUnitById(this.mainRoleID), this.attacker && (this.recordData || (this.recordData = this.getEnemyDmgData(this.attacker, 2)))
    }, e.prototype.advanceTime = function (t) {
        if (!this.attacker) return void(t.d = 1);
        if (0 == this.step) {
            var e = this.getMiddleLineFront(MoveUtil.p00);
            e.y -= 1.5;
            var i = RoundBattleScene.getPosMatrix(1 == this.attacker.dir ? 2 : 1),
                o = i.transformPoint(e.x, e.y, e),
                n = MTweenThread.create(this.attacker).to({
                    x: o.x,
                    y: o.y
                }, 200).call(this.onNeared, this);
            this.scene.tween.add(n);
            var n = MTweenThread.create(this.attacker).to({
                h: 50
            }, 200, MathUtil.EASESIN05);
            this.scene.tween.add(n), this.step = .5
        } else if (1 == this.step) {
            var a = this.timer + t.dt;
            if (a > 500 && this.timer <= 500 && this.dealAllRecord(), a >= 950) {
                this.step = 1.5;
                var n = MTweenThread.create(this.attacker).to({
                    x: this.attacker.initx,
                    y: this.attacker.inity
                }, 150).call(this.onRtned, this);
                this.scene.tween.add(n)
            }
            this.timer = a
        } else 2 == this.step && (t.d = 1)
    }, e.prototype.onRtned = function () {
        this.step = 2
    }, e.prototype.onNeared = function () {
        this.step = 1, this.attacker.playAttack(), this.scene.setTimeout(this.onEff, this, 400)
    }, e.prototype.onEff = function () {
        var t = this.attacker.addBodyEffet("battleeff/swordLight", 0, 0, 400, 400, 1, 400, !1);
        2 == this.attacker.dir && (t.scaleX = -1, t.scaleY = -1)
    }, e.prototype.onRemove = function () {
        this.scene.stepLock--
    }, e
}(HuiHeSkillBase);
__reflect(HuiHeAreaAttack.prototype, "HuiHeAreaAttack");
var HuiHePhatomAtt = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.state = 1, e.statetime = 0, e.phathoms = [], e.counter = 0, e
    }
    return __extends(e, t), e.create = function () {
        return this.P.length ? this.P.pop() : new e
    }, e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.state = 1, this.statetime = 0, this.counter = 0, this.phathoms.length = 0, this.targets = null, this.attacker = this.scene.unitMgr.getUnitById(this.mainRoleID), this.scene.stepLock++
    }, e.prototype.onRemove = function () {
        this.clear(), this.scene.stepLock--, e.P[e.P.length] = this
    }, e.prototype.advanceTime = function (t) {
        if (1 == this.state) {
            if (this.recordData)
                for (var e = 0; e < this.recordData[EnumBattleKey.EFFECT].length; e++) {
                    var i = this.recordData[EnumBattleKey.EFFECT][e][EnumBattleKey.P_TARGETID],
                        o = this.attacker.scene.unitMgr.getUnitById(i);
                    o && (this.phatomMove(this.attacker, o, 150 * e, this.onstate1comp, this), this.counter++)
                } else
                    for (var e = 0; e < this.targets.length; e++) {
                        var o = this.attacker.scene.unitMgr.getUnitById(this.targets[e]);
                        o && (this.phatomMove(this.attacker, o, 150 * e, this.onstate1comp, this), this.counter++)
                    }
            this.state = 1.5
        } else if (2 == this.state) {
            var n = this.statetime + t.dt;
            this.statetime < 400 && n >= 400 && this.dealHurt(), n >= 800 && (this.state = 3), this.statetime = n
        } else if (3 == this.state)
            for (var e = 0; e < this.phathoms.length; e++) {
                var a = this.phathoms[e];
                a.playStand(), egret.Tween.get(a).to({
                    x: a.initx,
                    y: a.inity
                }, 100).call(this.onstate3comp, this)
            } else 10 == this.state && (t.d = 1)
    }, e.prototype.phatomMove = function (t, e, i, o, n, a) {
        void 0 === a && (a = null);
        var s = t.clone();
        this.phathoms.push(s), this.attacker.scene.unitMgr.addUnit(s);
        var r = e.getFacePoint();
        s.view.alpha = .8;
        var l = 200;
        if (o) var h = MTweenThread.create(s).wait(i).to({
            x: r.x,
            y: r.y
        }, l).call(o, n, a);
        else var h = MTweenThread.create(s).wait(i).to({
            x: r.x,
            y: r.y
        }, l);
        this.scene.tween.add(h), this.attacker.h = 0;
        var h = MTweenThread.create(s).to({
            h: 30
        }, l, MathUtil.EASESIN05);
        this.scene.tween.add(h)
    }, e.HEASE = function (t) {
        if (1 == t) return 0;
        var e = Math.sin(Math.PI * t);
        return e
    }, e.prototype.onstate1comp = function () {
        if (this.counter--, 0 == this.counter) {
            this.attacker.playAttack();
            for (var t = 0; t < this.phathoms.length; t++) {
                var e = this.phathoms[t];
                e.playAttack()
            }
            this.state = 2
        }
    }, e.prototype.onstate3comp = function () {
        this.state = 10
    }, e.prototype.dealHurt = function () {
        if (this.recordData) return void this.dealAllRecord();
        for (var t = 0; t < this.targets.length; t++) {
            var e = this.attacker.scene.unitMgr.getUnitById(this.targets[t]);
            e && e.takeDmg(Formula.caculateRBattleDmg(this.attacker, e, this.skill))
        }
    }, e.prototype.clear = function () {
        for (var t = 0; t < this.phathoms.length; t++) {
            var e = this.phathoms[t];
            this.scene.unitMgr.removeUnit(e)
        }
        this.phathoms.length = 0, this.attacker.playStand()
    }, e.P = [], e
}(HuiHeSkillBase);
__reflect(HuiHePhatomAtt.prototype, "HuiHePhatomAtt");
var BuffIcon = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "BuffSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
    }, e.prototype.onTouch = function (t) {
        EventCenter.sendMsg(FWorld.Event.SELECTED_BUFF, this._id)
    }, e.prototype.setConten = function (t, e, i, o) {
        this.icon.source = t, this.labelBg.source = "commonAct_json.15_daysBg";
        var n = HtmlUtil.color(i + "%", "#10a244");
        this.title.textFlow = HtmlUtil.parse(e.replace("{0}%", n)), "0" != o ? (this.addBuffEff(o), this.icon.visible = !1) : this.icon.visible = !0
    }, e.prototype.setInBattleContent = function (t, e) {
        this.icon.source = t, this.labelBg.source = "CM2_json.broBg";
        var i = HtmlUtil.color("+" + e + "%", "#ffffff");
        this.title.textFlow = HtmlUtil.parse(i)
    }, Object.defineProperty(e.prototype, "id", {
        set: function (t) {
            this._id = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.addBuffEff = function (t) {
        this.buffEff || (this.buffEff = EffectMgr.addEff(t, this.effGrp, 0, 0, 1e3, -1, !0))
    }, e.prototype.removeBuffEff = function () {
        this.buffEff && (EffectMgr.getIns().removeEff(this.buffEff), this.buffEff = null)
    }, e
}(eui.Component);
__reflect(BuffIcon.prototype, "BuffIcon");
var MultAttack = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.index = 0, e.state = 1, e.statetime = 0, e
    }
    return __extends(e, t), e.create = function () {
        return this.P.length ? this.P.pop() : new e
    }, e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.index = 0, this.state = 1, this.statetime = 1, this.isAntiAtt = !1, this.attacker = this.scene.unitMgr.getUnitById(this.mainRoleID), this.attackCur(), this.scene.stepLock++
    }, e.prototype.onRemove = function () {
        this.scene.stepLock--, this.scene = null, this.mainRoleID = 0, this.attacker = null, this.child = null, e.P.push(this)
    }, e.prototype.attackCur = function () {
        var t = this.getTarget();
        this.target = t
    }, e.prototype.advanceTime = function (t) {
        var e = this;
        if (e.child) return void e.child.advanceTime(t);
        if (1 == e.state) {
            if (!e.attacker) return ViewText.text("找不到施法者:" + e.mainRoleID), void(t.d = 1);
            if (e.attacker.h = 0, !e.target) return t.d = 1, void e.textErrorTargetNull();
            var i = e.target.getFacePoint(),
                o = 200,
                n = MoveUtil.dist(e.attacker.x, e.attacker.y, i.x, i.y);
            if (n > 30)
                if (e.index > 0) {
                    var a = MTweenThread.create(e.attacker).to({
                        x: i.x,
                        y: i.y
                    }, 70).call(e.onstate1comp, e);
                    e.scene.tween.add(a)
                } else {
                    e.attacker.playRun();
                    var a = MTweenThread.create(e.attacker).to({
                        x: i.x,
                        y: i.y
                    }, o).call(e.onstate1comp, e);
                    e.scene.tween.add(a), e.attacker.h = 0;
                    var a = MTweenThread.create(e.attacker).to({
                        h: 50
                    }, o, MathUtil.EASESIN05);
                    e.scene.tween.add(a), e.state = 1.5
                }
            else e.state = 2, e.statetime = 0, e.attacker.playAttack()
        } else if (2 == e.state) {
            var s = e.statetime + t.dt,
                r = this.target;
            if (e.statetime < 400 && s >= 400 && r && "0" != this.skillcfg.eff1) {
                var l = this.getStyleCFGArg("efftime", 400),
                    h = "battleeff/" + this.skillcfg.eff1,
                    c = HuiHeEffect.createCustomEff(h, r.x, r.y, l, l, 1, l, !1);
                this.scene.addPlug(c)
            }
            if (e.statetime < 500 && s >= 500 && e.dealHurt(), s >= 800) {
                if (s = 0, e.isAntiAtt || e.dealAntiAttack(e.recordData[EnumBattleKey.EFFECT][e.index]), e.child) return;
                e.index < e.recordData[EnumBattleKey.EFFECT].length ? e.nextTar() : e.state = 3
            }
            e.statetime = s
        } else if (3 == e.state)
            if (e.attacker.dieState || e.attacker.removeing) this.dead();
            else {
                e.state = 10;
                var a = MTweenThread.create(e.attacker).to({
                    x: e.attacker.initx,
                    y: e.attacker.inity
                }, 100).call(e.onstate3comp, e);
                e.scene.tween.add(a)
            }
    }, e.prototype.onstate1comp = function () {
        this.scene && (this.attacker.playAttack(), this.state = 2)
    }, e.prototype.onstate3comp = function () {
        this.dead()
    }, e.prototype.dealHurt = function () {
        var t = this.target;
        t && this.dealIndex(this.index)
    }, e.prototype.dealAntiAttack = function (t) {
        this.isAntiAtt = !0, t && t[EnumBattleKey.antiAttack] && (this.child = AntiAttack.create(this, t), this.child.onAdd())
    }, e.prototype.nextTar = function () {
        var t = this;
        if (t.index++, t.target = t.getTarget(), t.isAntiAtt = !1, t.target) {
            if (t.state = 1, t.index > 0) {
                var e = t.recordData[EnumBattleKey.EFFECT][t.index],
                    i = e[EnumBattleKey.P_COMBOSKILLID];
                if (2 == t.attacker.type) t.attacker.addTextEff(4);
                else {
                    var o = CFG_Skill.LIB[i];
                    o && t.attacker.addTextEff(6)
                }
            }
        } else t.state = 3
    }, e.prototype.getTarget = function () {
        if (this.recordData) {
            for (var t = this.recordData[EnumBattleKey.EFFECT]; this.index < t.length;) {
                var e = t[this.index];
                if (e[EnumBattleKey.EFFECT_TYPE] == EnumBattleKey.VAL_DMG) {
                    var i = this.scene.unitMgr.getUnitById(e[EnumBattleKey.P_TARGETID]);
                    return i
                }
                this.dealIndex(this.index), this.index++
            }
            return null
        }
        if (this.target && this.target.hp > 0) return this.target;
        var o = this.scene.unitMgr.filterUnits(RoundBattleUnitMgr.LIFE_ENEMY, null, this.attacker.force);
        return o ? o[0] : null
    }, e.P = [], e
}(HuiHeSkillBase);
__reflect(MultAttack.prototype, "MultAttack");
var PuGong = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.state = 1, e.statetime = 0, e
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.attacker = this.scene.unitMgr.getUnitById(this.mainRoleID), this.target = this.scene.unitMgr.getUnitById(this.targetid), this.scene.stepLock++
    }, e.prototype.onRemove = function () {
        this.child = null, this.scene.stepLock--
    }, e.prototype.advanceTime = function (e) {
        if (this.child) {
            if (this.child.advanceTime(e), !e.d) return;
            this.child.onRemove(-1), e.d = null
        }
        if (1 == this.state) {
            if (!this.attacker) return e.d = 1, void ViewText.text("找不到施法者pugong:" + this.mainRoleID);
            if (this.attacker.h = 0, this.attacker.playRun(), this.recordData) var i = t.prototype.getAnyTarget.call(this, this.recordData);
            else i = this.target;
            if (!i) return e.d = 1, void this.textErrorTargetNull();
            var o = i.getFacePoint(),
                n = 200,
                a = MTweenThread.create(this.attacker).to({
                    x: o.x,
                    y: o.y
                }, n).call(this.onstate1comp, this);
            this.scene.tween.add(a), this.attacker.h = 0;
            var a = MTweenThread.create(this.attacker).to({
                h: 50
            }, n, MathUtil.EASESIN05);
            this.scene.tween.add(a), this.state = 1.5
        } else if (2 == this.state) {
            var s = this.statetime + e.dt;
            this.statetime < 400 && s >= 400 && this.dealHurt(), s >= 1e3 && (this.state = 3), this.statetime = s
        } else if (3 == this.state)
            if (this.attacker.hp > 0) {
                var a = MTweenThread.create(this.attacker).to({
                    x: this.attacker.initx,
                    y: this.attacker.inity
                }, 100).call(this.onstate3comp, this);
                this.scene.tween.add(a)
            } else this.attacker.playDie(), this.state = 10;
        else 10 == this.state && (e.d = 1)
    }, e.prototype.onstate1comp = function () {
        this.attacker.playAttack(800, 800), this.state = 2
    }, e.prototype.onstate3comp = function () {
        this.state = 10
    }, e.prototype.dealHurt = function () {
        this.recordData && this.dealAllRecord()
    }, e
}(HuiHeSkillBase);
__reflect(PuGong.prototype, "PuGong");
var AntiAttack = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.create = function (t, i) {
        var o = new e;
        return o.setTo(t, i), o
    }, e.prototype.setTo = function (t, e) {
        this.scene = t.scene, this.parent = t, this.mainRoleID = e[EnumBattleKey.P_TARGETID], this.recordData = e
    }, e.prototype.advanceTime = function (t) {}, e.prototype.onAdd = function () {
        var t = this.getMainRole();
        t && t.hp ? (t.playAttack(600, 600), t.addTextEff(1), this.delayTWCall(this.dealHurt, 300, this)) : (this.parent.child = null, this.onRemove(-1))
    }, e.prototype.dealHurt = function () {
        var t = this.recordData[EnumBattleKey.antiAttack],
            e = this.scene.unitMgr.getUnitById(t[EnumBattleKey.R_ID]);
        if (e) {
            var i = t[EnumBattleKey.P_CURHP],
                o = e.hp - i;
            if (o > 0) {
                var n = HuiHeHurtText.create();
                n.setAntiHurt(e, o), e.scene.unitMgr.addUnit(n)
            } else if (0 > o) {
                var n = HuiHeHurtText.create();
                n.setCureValue(e, o), e.scene.unitMgr.addUnit(n)
            }
            e.setCurhp(i, !0), 0 >= i ? e.playDie() : e.playHitAct()
        }
        this.delayTWCall(this.onComp, 500, this)
    }, e.prototype.onComp = function () {
        this.parent.child = null, this.onRemove(-1)
    }, e
}(HuiHeSkillBase);
__reflect(AntiAttack.prototype, "AntiAttack");
var HuiHeReborn = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.scene.stepLock++;
        var e = this.scene.unitMgr.getUnitById(this.mainRoleID);
        e && e.addBodyEffet("battleeff/addValue", 0, 0, 500, 500, 1, 600, !1), this.delayTWCall(this.onText, 300, this), this.delayTWCall(this.onReviveTime, 200, this)
    }, e.prototype.onRemove = function () {
        this.scene.stepLock--
    }, e.prototype.onText = function () {
        var t = this.scene.unitMgr.getUnitById(this.mainRoleID);
        t && t.addTextEff(5)
    }, e.prototype.onReviveTime = function () {
        this.dealAllRecord(), this.scene.setTimeout(this.dead, this, 300)
    }, e
}(HuiHeSkillBase);
__reflect(HuiHeReborn.prototype, "HuiHeReborn");
var SkillStyleQueue = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.index = 0, e
    }
    return __extends(e, t), e.prototype.setQueue = function (t) {
        return this.queue = t, this
    }, e.prototype.advanceTime = function (t) {
        if (!this.locker) {
            if (this.curStep) {
                this.stepUpdate(this.curStep, t);
                this.locker || this.nextStep()
            } else this.nextStep();
            this.curStep || (t.d = 1)
        }
    }, e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.scene.stepLock++, this.index = -1, this.nextStep()
    }, e.prototype.onRemove = function (t) {
        this.scene.stepLock--
    }, e.prototype.nextStep = function () {
        this.locker || (this.index++, this.curStep = this.queue[this.index], this.curStep && this.enterStep(this.curStep))
    }, e.prototype.stepUpdate = function (t, e) {
        var i = -1;
        return i
    }, e.prototype.enterStep = function (t) {
        var e = this.getMainRole(),
            i = this.getAnyTarget(this.recordData);
        switch (t.t) {
            case "nearTar":
                var o = t.far > 0 ? t.far : .5;
                if (e && i) {
                    this.locker++;
                    var n = 200,
                        a = i.getFacePoint(MoveUtil.nextPointRet, o),
                        s = MTweenThread.create(e).to({
                            x: a.x,
                            y: a.y
                        }, n).call(this.onMoveEnd, this);
                    e.h = 0;
                    var r = MTweenThread.create(e).to({
                        h: 50
                    }, n, MathUtil.EASESIN05);
                    this.scene.tween.add(r), this.scene.tween.add(s)
                }
                break;
            case "playAct":
                if (e) {
                    var l = t.time ? t.time : 700,
                        h = t.endTime ? t.endTime : l;
                    "attack" == t.act ? e.playAttack(l, h) : "skill" == t.act && e.playSkill(l, h)
                }
                break;
            case "dealAll":
                this.dealAllRecord();
                break;
            case "delay":
                t.time > 0 && (this.locker++, this.scene.setTimeout(this.onTimeOut, this, t.time));
                break;
            case "back":
                if (e && i) {
                    this.locker++;
                    var s = MTweenThread.create(e).to({
                        x: e.initx,
                        y: e.inity
                    }, 150).call(this.onMoveEnd, this);
                    this.scene.tween.add(s)
                }
                break;
            case "moveForward":
                e && this.moveForward(t, e);
                break;
            case "menghuEff":
                var c = this.getAnyTarget(this.recordData);
                c && this.menghuEff(c);
                break;
            case "tarSceneEff":
                this.tarSceneEff()
        }
    }, e.prototype.exitStep = function (t) {
        t.t
    }, e.prototype.onMoveEnd = function () {
        this.locker--
    }, e.prototype.onTimeOut = function () {
        this.locker--
    }, e.prototype.moveForward = function (t, e) {
        var i = t.length ? t.length : 100,
            o = t.time ? t.time : 200,
            n = RoundBattleScene.getAngle(e.dir),
            a = Math.cos(n) * i,
            s = Math.sin(n) * i,
            r = MTweenThread.create(e).to({
                x: e.x + a,
                y: e.y + s
            }, o);
        this.scene.tween.add(r)
    }, e.prototype.menghuEff = function (t) {
        var e = "battleeff/menghushi",
            i = HuiHeEffect.createCustomEff(e, t.x, t.y, 600, 600, 1, 600, !1);
        this.scene.addPlug(i);
        RoundBattleScene.getAngle(t.dir);
        2 == t.dir ? i.part.rotation = 180 * (1 - RoundBattleScene.ROTATE) : (i.part.scaleY = -1, i.part.rotation = 180 * (.4 + RoundBattleScene.ROTATE));
        var o = this.getStyleCFGArg("effBlend", null);
        "shoal" == o && (o = Color.getColorShoalFilters()), i.filters = o
    }, e.prototype.tarSceneEff = function () {
        var t = this.getAnyTarget(this.recordData);
        if (t && "0" != this.skillcfg.eff1) {
            var e = this.getStyleCFGArg("efftime", 400),
                i = "battleeff/" + this.skillcfg.eff1,
                o = HuiHeEffect.createCustomEff(i, t.x, t.y, e, e, 1, e, !1);
            this.scene.addPlug(o)
        }
    }, e.mengHuShi = [{
        t: "nearTar",
        far: 4
    }, {
        t: "playAct",
        act: "attack"
    }, {
        t: "moveForward",
        length: 200
    }, {
        t: "menghuEff"
    }, {
        t: "delay",
        time: 300
    }, {
        t: "dealAll"
    }, {
        t: "delay",
        time: 150
    }, {
        t: "back"
    }, {
        t: "delay",
        time: 200
    }], e.pugongNear = [{
        t: "nearTar",
        far: 1
    }, {
        t: "playAct",
        act: "attack",
        time: 750
    }, {
        t: "delay",
        time: 200
    }, {
        t: "tarSceneEff"
    }, {
        t: "delay",
        time: 200
    }, {
        t: "dealAll"
    }, {
        t: "delay",
        time: 300
    }, {
        t: "back"
    }], e
}(HuiHeSkillBase);
__reflect(SkillStyleQueue.prototype, "SkillStyleQueue");
var DeadFickState = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.t = 0, e.st = 0, e.fickInterc = 0, e.fickSt = 1, e
    }
    return __extends(e, t), e.create = function () {
        return this.P.length ? this.P.pop() : new e
    }, e.prototype.advanceTime = function (t) {
        var e = this;
        if (1 == e.st) e.fickInterc += t.dt, e.t += t.dt, e.fickInterc >= 150 && (e.fickInterc = 0, 1 == e.fickSt ? e.fickSt = .3 : (e.fickSt = 1, e.t >= 500 && (e.st = 2, e.t = 0)), e.role.view.alpha = e.fickSt);
        else if (2 == e.st) {
            e.t += t.dt;
            var i = e.t / 400;
            i >= 1 && (t.d = 1), e.role.view.alpha = 1 - i
        }
    }, e.prototype.onAdd = function () {
        this.st = 0, this.t = 0, this.fickInterc = 0, this.fickSt = 1, this.role.playHitAct(), this.role.removeing = 1, this.scene.setTimeout(this.onTimeOut1, this, 200)
    }, e.prototype.onTimeOut1 = function () {
        this.st = 1, this.role.playDieAct(), this.role.showBuffTrigEffView("dieEff", 1)
    }, e.prototype.onRemove = function () {
        e.P.push(this)
    }, e.P = [], e
}(GameObjectPlug);
__reflect(DeadFickState.prototype, "DeadFickState");
var DeadFlyState = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.speedx = 0, e.speedy = 0, e.st = 0, e.rtimer = 0, e.prop2 = {}, e.prop3 = {}, e
    }
    return __extends(e, t), e.create = function () {
        return this.P.length ? this.P.pop() : new e
    }, e.prototype.onAdd = function () {
        this.st = this.rtimer = 0, this.role.removeing = 1, 1 == this.role.dir ? (this.speedx = 500, this.speedy = 330) : (this.speedx = -500, this.speedy = -330), this.role.playHitAct(), this.scene.setTimeout(this.onTimeOut1, this, 200)
    }, e.prototype.onTimeOut1 = function () {
        this.st = 1, this.role.showBuffTrigEffView("dieEff", 1)
    }, e.prototype.advanceTime = function (t) {
        var e = this,
            i = e.role;
        if (e.st >= 1) {
            e.rtimer += t.dt;
            var o = i.way + e.rtimer / 130 >> 0;
            e.rtimer >= 130 && (e.rtimer = 0), o > 3 && (o = 0), i.setWay(o)
        }
        if (1 == e.st) {
            var n = i.x + e.speedx * t.dt / 1e3,
                a = i.y + e.speedy * t.dt / 1e3,
                s = 670,
                r = 670;
            if (50 > n ? (n = 50, e.speedx = -e.speedx, e.st = 2) : n > s && (n = s, e.speedx = -e.speedx, e.st = 2), 50 > a ? (a = 50, e.speedy = -e.speedy, e.st = 3) : a > r && (a = r, e.speedy = -e.speedy, e.st = 3), e.role.x = n, e.role.y = a, e.st >= 2) {
                var l, h, c, p;
                1 == e.role.dir ? 3 == e.st ? (l = s, h = 490, c = 490, p = -100) : (l = 490, h = r, c = -100, p = 490) : 3 == e.st ? (l = 50, h = 150, c = 150, p = 700) : (l = 150, h = 50, c = 700, p = 150);
                var u = 1.4 * MoveUtil.distSqrt(e.role.x, e.role.y, l, h),
                    d = 1.4 * MoveUtil.distSqrt(l, h, c, p);
                e.prop2.x = l, e.prop2.y = h, e.prop3.x = c, e.prop3.y = p;
                var f = MTweenThread.create(e.role).to(e.prop2, u).to(e.prop3, d).call(e.onTwnComp, e);
                e.scene.tween.add(f)
            }
        }
    }, e.prototype.onTwnComp = function () {
        this.scene.unitMgr.removeUnit(this.role), this.role = null, this.scene.removePlug(this)
    }, e.prototype.onRemove = function () {
        e.P.push(this)
    }, e.P = [], e
}(GameObjectPlug);
__reflect(DeadFlyState.prototype, "DeadFlyState");
var VBattleExit = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/huihezhi/BattleExit.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnExit.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnExitT, this), this.btnExit.enabled = !1
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.scene = e;
        e.battleData.type, GameGlobal.modelRole.voMine
    }, e.prototype.setEnable = function (t) {
        t ? this.btnExit.enabled = !0 : this.btnExit.enabled = !1
    }, e.prototype.onClose = function () {}, e.prototype.checkEnable = function () {}, e.prototype.onSize = function () {
        this.x = GameGlobal.stage.stageWidth - this.skin.width, this.y = GameGlobal.stage.stageHeight - 435 - this.skin.height
    }, e.prototype.onBtnExitT = function () {
        var t = this.scene,
            e = (t.battleData.type, GameGlobal.modelRole.voMine, t.battleData.getSkipWarnStr(t.roundid));
        e ? ViewText.text(e) : t.waitExitPass()
    }, e.prototype.guideVip = function () {
        QuestGuideArrow.getIns().guideViewCenter(this, "Vip一键跳过，省时省力", 1)
    }, e
}(BaseEUIView);
__reflect(VBattleExit.prototype, "VBattleExit");
var VBossLeftRnk = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.arrayCol = new eui.ArrayCollection, e.arr = [], e.skinName = "resource/eui_skins/game/huihezhi/ClientBossHpRnk.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.rnkList.itemRenderer = VBossLeftRnkItem, this.rnkList.dataProvider = this.arrayCol
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), ModelBattleUI.getIns().on(ModelBattleUI.MSG_RNKCHANGE, this.onupdate, this), this.onupdate()
    }, e.prototype.onClose = function () {
        ModelBattleUI.getIns().off(ModelBattleUI.MSG_RNKCHANGE, this.onupdate, this)
    }, e.prototype.onSize = function () {
        this.y = GameGlobal.stage.stageHeight - 440 - this.skin.height - 20
    }, e.prototype.onupdate = function () {
        var t = ModelBattleUI.getIns();
        this.arr.length = 0;
        for (var e = 0; e < t.otherRnkList.length; e++) this.arr[e] = t.otherRnkList[e];
        t.myRnkVo && (this.arr.push(t.myRnkVo), this.arr.sort(t.sort), this.arr.length > 3 && (this.arr.length = 3));
        for (var e = 0, i = this.arr.length; i > e; e++) this.arr[e].rnk = e;
        this.arrayCol.replaceAll(this.arr), this.myItem.data = t.myRnkVo
    }, e
}(BaseEUIView);
__reflect(VBossLeftRnk.prototype, "VBossLeftRnk");
var VBossLeftRnkItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/huihezhi/ClientBossHpRankItem.exml", e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            t && (this._data = t, this.lbRnk.text = "" + (t.rnk + 1), this.lbName.text = t.name, this.lbValue.text = "" + t.value)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VBossLeftRnkItem.prototype, "VBossLeftRnkItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VBottomBossHPUI = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/huihezhi/BottomBossHpSkin.exml", e
    }
    return __extends(e, t), e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.openArg = e, ModelBattleUI.getIns().on(ModelBattleUI.MSG_BOTTOMBOSSHP, this.onHp, this), GameGlobal.modelBattle.on(ModelBattle.MSG_ROLETAKEDMG, this.onTakeDmg, this), this.initHp()
    }, e.prototype.onClose = function () {
        ModelBattleUI.getIns().off(ModelBattleUI.MSG_BOTTOMBOSSHP, this.onHp), GameGlobal.modelBattle.off(ModelBattle.MSG_ROLETAKEDMG, this.onTakeDmg)
    }, e.prototype.onSize = function () {
        this.x = GameGlobal.stage.stageWidth - this.skin.width >> 1, this.y = GameGlobal.stage.stageHeight - 390 - this.skin.height
    }, e.prototype.onHp = function () {
        this.updateHP()
    }, e.prototype.updateHP = function () {
        var t = ModelBattleUI.getIns();
        this.imgPB.scaleX = t.curBottomBossHp / t.curBottomBossHpmax, this.lbHp.text = t.curBottomBossHp + "/" + t.curBottomBossHpmax
    }, e.prototype.onTakeDmg = function (t) {
        var e = t.role;
        if (e.id == this.careUnitID) {
            var i = t.value,
                o = ModelBattleUI.getIns(),
                n = o.curBottomBossHp - i;
            0 > n && (n = 0), o.setBottomBossHp(n, o.curBottomBossHpmax)
        }
    }, e.prototype.initHp = function () {
        var t = ModelBattleUI.getIns().scene;
        (t.battleData.type == ModelBattle.BT_QMBOSS || t.battleData.type == ModelBattle.BT_FESTBOSS) && this.searchBossHp()
    }, e.prototype.searchBossHp = function () {
        for (var t = ModelBattleUI.getIns().scene, e = t.unitMgr, i = 0, o = e.units.length; o > i; i++) {
            var n = e.units[i];
            if (n.isBoss && n.monsterCFG) {
                this.careUnitID = n.id, ModelBattleUI.getIns().setBottomBossHp(n.hp, n.monsterCFG.qixue);
                break
            }
        }
    }, e
}(BaseEUIView);
__reflect(VBottomBossHPUI.prototype, "VBottomBossHPUI");
var VoBattleRnkItem = function () {
    function t() {}
    return t.create = function () {
        return new t
    }, t
}();
__reflect(VoBattleRnkItem.prototype, "VoBattleRnkItem");
var Mymap = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.mapWid = 0, e.mapHei = 0, e.maptiled = [], e.TILE_SIZE = 250, e.rcDic = {}, e.isLoading = !1, e.len = 0, e.nodes = new Array, e.mapJsonCache = {}, e.spaceNodes = [], e.ITEMINDEX = 0, e.scrollMap = new ScrollMap, e.fontLayer = new DepSprite, e.scrollMap.addChild(e.fontLayer), e.layer = e.scrollMap, e.scrollMap.itemCreateFunc = ScrollMapItemDef.CREATEFUNC, e.addChild(e.scrollMap), e
    }
    return __extends(e, t), e.prototype.setIDAA = function (t) {
        var e = "" + t;
        if (this.scrollMap.head = e, this.id = t, this.mapJsonCache[t]) this.initMap(this.mapJsonCache[t]);
        else {
            var i = "resource/map/" + t + "/map.json";
            RES.getResByUrl(i, this.onResLoadComp, this, RES.ResourceItem.TYPE_TEXT)
        }
    }, e.prototype.clearMapImages = function () {
        var t = ScrollMapItemDef.imageUrls,
            e = Number.MAX_VALUE,
            i = null,
            o = 0;
        for (var n in t) {
            var a = t[n];
            a.time < e && (i = a, e = a.time), o++
        }
        if (o >= 3) {
            for (var s = 0, r = i.tiles.length; r > s; s++) {
                var l = i.tiles[s];
                RES.destroyRes(l)
            }
            i.tiles.length = 0, delete t[i.head]
        }
    }, e.prototype.onResLoadComp = function (t) {
        t && this.initMap(t)
    }, e.prototype.onLoaderComplete = function (t) {}, e.prototype.initMap = function (t) {
        var e = this.mapdata = JSON.parse(t);
        this.mapJsonCache[e.id] = t, this.endRow = Math.ceil(e.height / this.TILE_SIZE) - 1, this.endCol = Math.ceil(e.width / this.TILE_SIZE) - 1, this.mapWid = e.width, this.mapHei = e.height, this.initNodes(), this.caculateLink(), this.updateMapsize(), this.complete();
        var i = "" + e.id;
        ScrollMapItemDef.imageUrls[i] || (ScrollMapItemDef.imageUrls[i] = {
            head: i,
            tiles: [],
            time: egret.getTimer()
        }, this.clearMapImages()), GameGlobal.mapScene.onMapLoaded()
    }, e.prototype.updateMapsize = function () {
        var t = egret.MainContext.instance.stage;
        if (this.mapdata) {
            var e = 35,
                i = 70,
                o = t.stageHeight - e - i;
            this.y = e, this.scrollMap.initCustom(t.stageWidth, o, this.mapdata.width, this.mapdata.height), this.scrollMap.updateViewLimit()
        }
    }, e.prototype.destoryOld = function () {
        this.spaceNodes.length = 0;
        for (var t = this.nodes, e = 0, i = t.length; i > e; e++)
            for (var o = t[e], n = 0, a = o.length; a > n; n++) o[n].destory();
        t.length = 0
    }, e.prototype.getRndSpaceNode = function () {
        return this.spaceNodes.length ? this.spaceNodes[this.spaceNodes.length * Math.random() >> 0] : null
    }, e.prototype.initNodes = function () {
        var t = this.mapdata.tile,
            e = t.length,
            i = this.nodes;
        if (this.destoryOld(), e > 0)
            for (var o = t[0].length, n = 0; e > n; n++) {
                for (var a = t[n], s = [], r = 0; o > r; r++) {
                    var l = AstarNode.create();
                    l.row = n, l.col = r, l.cx = 32 * r + 16, l.cy = 32 * n + 16;
                    var h = a[r];
                    l.type = h, l.space = 1 == (1 & h), l.space && this.spaceNodes.push(l), l.alpha = 2 & h ? .6 : 1, s.push(l)
                }
                i.push(s)
            }
    }, e.prototype.caculateLink = function () {
        for (var t = this.nodes, e = t.length, i = e - 1, o = 1, n = 1.414, a = 0; e > a; a++)
            for (var s = t[a], r = s.length, l = r - 1, h = 0; r > h; h++) {
                var c = s[h];
                if (a > 0) {
                    if (t[a - 1][h].space) {
                        var p = AstarLink.create(c, t[a - 1][h]);
                        c.nears.push(p), p.g = o
                    }
                    if (h > 0 && t[a - 1][h - 1].space) {
                        var p = AstarLink.create(c, t[a - 1][h - 1]);
                        c.nears.push(p), p.g = n
                    }
                    if (l > h && t[a - 1][h + 1].space) {
                        var p = AstarLink.create(c, t[a - 1][h + 1]);
                        c.nears.push(p), p.g = n
                    }
                }
                if (i > a && t[a + 1][h].space) {
                    var p = AstarLink.create(c, t[a + 1][h]);
                    if (c.nears.push(p), p.g = o, h > 0 && t[a + 1][h - 1].space) {
                        var p = AstarLink.create(c, t[a + 1][h - 1]);
                        c.nears.push(p), p.g = n
                    }
                    if (l > h && t[a + 1][h + 1].space) {
                        var p = AstarLink.create(c, t[a + 1][h + 1]);
                        c.nears.push(p), p.g = n
                    }
                }
                if (h > 0 && t[a][h - 1].space) {
                    var p = AstarLink.create(c, t[a][h - 1]);
                    c.nears.push(p), p.g = o
                }
                if (l > h && t[a][h + 1].space) {
                    var p = AstarLink.create(c, t[a][h + 1]);
                    c.nears.push(p), p.g = o
                }
            }
    }, e.prototype.parseMapItems = function (t, e) {
        if (null != t)
            for (var i = (t.name, t.items), o = i.length, n = 0; o > n; n++) {
                var a = i[n];
                if ("npc" == a.type) {
                    var s = SimpleNpc.create();
                    s.x = a.x, s.y = a.y, s.initNpc(a.sysID), GameGlobal.mapScene.addUnit(s)
                } else {
                    if ("point" == a.type) continue;
                    if ("transpoint" == a.type) {
                        var r = SimpleNpc.create();
                        r.initTransPoint(a), r.x = a.x, r.y = a.y, r.id = "tp:" + Role.getUniqueID(), GameGlobal.mapScene.addUnit(r)
                    }
                }
            }
    }, e.prototype.getGroupInfo = function (t) {
        var e, i = this.mapdata;
        if (i)
            for (var o = i.items, n = o.length, a = 0; n > a; a++)
                if (o[a].name == t) {
                    e = o[a];
                    break
                } return e
    }, e.prototype.complete = function () {
        this.isLoading = !1, this.scrollMap.invalid |= 1, this.dispatchEvent(new egret.Event(egret.Event.COMPLETE))
    }, e.prototype.onConfigComplete = function (t) {
        "MAPLOADER" == t.groupName && RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE, this.onConfigComplete, this)
    }, e.prototype.onGroupError = function (t) {
        "MAPLOADER" == t.groupName && RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE, this.onConfigComplete, this)
    }, e.prototype.set = function (t) {
        console.log(t)
    }, e.prototype.watch = function (t, e) {
        this.scrollMap.watchFocus(t, e)
    }, e.prototype.isCanWalk = function (t, e) {
        var i = e / 32 >> 0,
            o = t / 32 >> 0,
            n = this.nodes;
        return n[i] && n[i][o] && n[i][o].space ? !0 : !1
    }, e.prototype.getNode = function (t, e) {
        var i = this.nodes[Math.floor(e / 32) >> 0];
        return i ? i[Math.floor(t / 32) >> 0] : null
    }, e.prototype.getNearCanWalkBlock = function (t, e, i) {
        void 0 === i && (i = null);
        var o = 1;
        t >>= 0, e >>= 0;
        var n = this.nodes,
            a = Number.MAX_VALUE;
        do {
            for (var s = t - o, r = t + o, l = e - o, h = e + o, c = s; r >= c; c++)
                for (var p = l; h >= p; p++)
                    if ((c == s || c == r || p == l || p == h) && n[c] && n[c][p]) {
                        var u = n[c][p];
                        if (u.space) {
                            var d = this.getNearScore(c, p, t, e);
                            if (a > d) {
                                a = d, null == i && (i = new egret.Point), i.y = c, i.x = p;
                                break
                            }
                        }
                    } if (a < Number.MAX_VALUE) break;
            o++
        } while (6 > o);
        return i
    }, e.prototype.getNearScore = function (t, e, i, o) {
        var n = t - i;
        0 > n && (n = -n);
        var a = e - o;
        return 0 > a && (a = a), n + a
    }, e.prototype.searchPath = function (t, e, i, o) {
        null == this.astar && (this.astar = new Astar), this.astar.startFind(t, e, i, o, this.nodes)
    }, e.prototype.getLastPath = function () {
        var t = null;
        return this.astar.success && (t = this.astar.path), t
    }, e.prototype.showMinibg = function (t) {
        !this.smallMap && this.mapdata && (this.smallMap = new eui.Image, this.smallMap.touchEnabled = !1, this.layer.addChildAt(this.smallMap, 0)), this.mapdata && (this.smallMap.width = this.mapdata.width, this.smallMap.height = this.mapdata.height, this.smallMap.source = "miniMap_json." + t)
    }, e
}(egret.Sprite);
__reflect(Mymap.prototype, "Mymap");
var Enum_Act = function () {
    function t() {}
    return t.ActzsyjIcon = {
        3: 101,
        4: 201,
        5: 301,
        10: 101,
        11: 201,
        12: 301,
        37: 401,
        38: 501
    }, t.RankType = {
        3: 5,
        4: 6,
        5: 7,
        6: 4,
        7: 3,
        9: 1,
        28: 0
    }, t.Enum_ZXGQ = 1, t.Enum_QMCJ = 2, t.Enum_ZQPH = 3, t.Enum_CBPH = 4, t.Enum_SBPH = 5, t.Enum_HBPH = 6, t.Enum_PETPH = 7, t.Enum_SYTPH = 8, t.Enum_ZLPH = 9, t.Enum_ZQJJ = 10, t.Enum_CBJJ = 11, t.Enum_SBJJ = 12, t.Enum_HBPY = 13, t.Enum_CWPY = 14, t.Enum_SYTTG = 15, t.Enum_ZLTS = 16, t.Enum_MRCZ = 17, t.Enum_SCTG = 18, t.Enum_ZKSD = 19, t.Enum_QMZQJJ = 20, t.Enum_QMCBJJ = 21, t.Enum_QMSBJJ = 22, t.Enum_QMHBPY = 23, t.Enum_QMCWJJ = 24, t.Enum_QMSYTTG = 25, t.Enum_QMZLTS = 26, t.Enum_LJCZ = 27, t.Enum_JJCPH = 28, t.Enum_JJCBP = 30, t.Enum_QMJJC = 31, t.Enum_TZJH = 32, t.Enum_LJXF = 33, t.Enum_XYZP = 34, t.Enum_FWZP = 35, t.Enum_ZSYJ = 36, t.Enum_GHJJ = 37, t.Enum_SLJJ = 38, t.Enum_ZDSB = 40, t.Enum_DBCZ = 41, t.Enum_HFDL = 201, t.Enum_HFZQPH = 202, t.Enum_HFCBPH = 203, t.Enum_HFSBPH = 204, t.Enum_HFHBPH = 205, t.Enum_HFPETPH = 206, t.Enum_HFJJCPH = 207, t.Enum_HFZLPH = 208, t.Enum_HFZQJJ = 209, t.Enum_HFCBJJ = 210, t.Enum_HFSBJJ = 211, t.Enum_HFHBPY = 212, t.Enum_HFCWPY = 213, t.Enum_HFJJC = 214, t.Enum_HFZLTS = 215, t.Enum_HFTZPLAN = 216, t.Enum_HFTHLB = 217, t.Enum_HFLJCZ = 218, t
}();
__reflect(Enum_Act.prototype, "Enum_Act");
var Model_Act = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.doubleState = !1, e.actData = new Vo_Act, e.iosPayPassActIDMap = {
            19: 1,
            17: 1,
            18: 1,
            36: 1,
            27: 1,
            10: 1,
            11: 1,
            12: 1,
            37: 1,
            38: 1,
            41: 1,
            46: 1,
            47: 1,
            50: 1,
            218: 1
        }, e.rnkNumMap = {}, e.quanMinCJData = {}, e.guanQiaServInfo = {}, e.tzItemServData = {}, e.sctgServData = {}, e.quanMinJJServData = {}, e.xiangouServData = {}, e.LJCZServData = {}, e.dbczDatas = {}, e.mrhlTotalRecharge = 0, e.heFuSignDay = 0, e.heFuSignData = {}, e.hfXianGouSerData = {}, e.HFLJCZServData = {}, e.hfTZItemServData = {}, e.hfChongBang = {}, e.tzPlanData = {}, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1952, this.GC_ACTINFO_1952, this), e.regHand(1954, this.GC_ActivityInfo_activityInfo_1954, this), e.regHand(1956, this.GC_ActivityInfo_updateInfo_1956, this), e.regHand(1958, this.GC_ActivityInfo_delAct_1958, this), e.regHand(1960, this.GC_ActivityInfo_doubleACTOpen_1960, this), e.regHand(1964, this.GC_Act_NotOpen, this), e.regHand(1962, this.GC_ActRed, this), e.regHand(2462, this.GC_COMRNKINFO, this), e.regHand(2502, this.GC_QUANMINCJINFO, this), e.regHand(2504, this.GC_QUANMINCJAWARD, this), e.regHand(2522, this.GC_ACTGUANQIAINFO, this), e.regHand(2524, this.GC_ACTGUANQIAAWRAD, this), e.regHand(2532, this.GC_ACTCHALLENGE, this), e.regHand(2534, this.GC_GETACTCHALLENGE, this), e.regHand(2552, this.GC_SCTG_INFO, this), e.regHand(2554, this.GC_SCTG_AWARD, this), e.regHand(2562, this.GC_QUANMINJJINFO, this), e.regHand(2564, this.GC_QUANMINJJAWARD, this), e.regHand(2582, this.GC_XIANGOU_INFO, this), e.regHand(2584, this.GC_XIANGOU_BUY, this), e.regHand(2592, this.GC_LEIJICZ_INFO, this), e.regHand(2594, this.GC_LEIJICZ_AWARD, this), e.regHand(3382, this.GC_DBCZ_INFO, this), e.regHand(3384, this.GC_DBCZ_RECRESULT, this), e.regHand(3662, this.GC_MRHL_INFO, this), e.regHand(3664, this.GC_MRHL_GETAWD, this), e.regHand(3782, this.GC_HF_JJHL, this), e.regHand(3784, this.GC_HF_JJHL_GETAWD, this), e.regHand(3802, this.GC_HF_CBYL, this), e.regHand(3822, this.GC_HF_TZPLAN, this), e.regHand(3824, this.GC_HF_TZPLAN_BUY, this), e.regHand(3826, this.GC_HF_TZPLAN_GETAWD, this), e.regHand(3842, this.GC_HF_SHOP, this), e.regHand(3844, this.GC_HF_SHOP_BUY, this), e.regHand(3862, this.GC_HF_LJCZ, this), e.regHand(3864, this.GC_HF_GETLJCZ, this), e.regHand(3882, this.GC_HF_SIGN, this), e.regHand(3884, this.GC_HF_SIGN_GETAWRD, this)
    }, e.prototype.findActAny = function (t, e) {
        if (27 == t) return null;
        if (e.hasChild())
            for (var i = 0, o = e.childs.length; o > i; i++) {
                var n = e.childs[i];
                if (n.id == t) return n;
                var a = this.findActAny(t, n);
                if (a) return a
            }
        return null
    }, e.prototype.haveActGroup = function (t) {
        var e = this.actData.getChildByID(t);
        return e ? !0 : !1
    }, e.prototype.haveAct = function (t, e) {
        var i = this.actData.getChildByID(t);
        return i && i.getChildByID(e) ? !0 : !1
    }, e.prototype.getAnyChildList = function () {
        return this.actData.hasChild() ? this.actData.childs[0].childs : null
    }, e.prototype.setActClickFlag = function (t, e) {
        e ? egret.localStorage.setItem("actClickFlag:" + t, "1") : egret.localStorage.setItem("actClickFlag:" + t, "")
    }, e.prototype.GC_ACTINFO_1952 = function (t, e) {
        var i = e.readInt(),
            o = e.readByte(),
            n = egret.localStorage.getItem("actClickFlag:" + i);
        if ("1" == n) var a = 1;
        else a = 0;
        var s = t.actData.getChildByID(i);
        if (1 == o) {
            s || (s = new Vo_Act, s.id = i, s.initIcoLib());
            for (var r = e.readShort(), l = 0; r > l; l++) {
                var h = e.readShort(),
                    c = (e.readShort(), e.readInt()),
                    p = e.readShort(),
                    u = !1;
                if (platform.canRechage || !t.iosPayPassActIDMap[h]) {
                    var d = s.getChildByID(h);
                    d || (d = new Vo_Act, d.id = h, s.addChild(d)), CFG_Act.LIB_Act[h] && d.initActLib(), d.group = i, d.id = h, d.index = p, d.remainTime = c, d.remainTimeUDT = egret.getTimer(), u = !0
                }
            }
            s.clickFlag = a, s.updateRed(), 1 == s.numChild() && s.useChildTime(), u && t.actData.addChild(s)
        } else s && (s.clear(), t.actData.removeChild(s), s.dispose());
        GameGlobal.tick.addInterv(t.notifyListChange, 100, t, !0)
    }, e.prototype.CG_ActivityInfo_openActUI_1953 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1953, e)
    }, e.prototype.GC_ActivityInfo_activityInfo_1954 = function (t, e) {
        for (var i = (e.readInt(), e.readShort()), o = 0; i > o; o++) {
            e.readInt(), e.readInt(), e.readShort(), e.readUTF(), e.readShort()
        }
        GameGlobal.tick.addInterv(t.notifyListChange, 100, t, !0)
    }, e.prototype.notifyListChange = function (t) {
        t.notify(e.MSG_ACTLIST_UPDATE)
    }, e.prototype.GC_ActivityInfo_updateInfo_1956 = function (t, e) {}, e.prototype.GC_ActivityInfo_delAct_1958 = function (t, e) {
        var i = e.readInt(),
            o = e.readInt(),
            n = t.actData.getChildByID(i);
        if (n) {
            var a = n.getChildByID(o);
            a && (n.removeChild(a), a.dispose()), n.hasChild() ? n.updateRed() : (t.actData.removeChild(n), n.dispose())
        }
        GameGlobal.tick.addInterv(t.notifyListChange, 100, t, !0)
    }, e.prototype.GC_ActivityInfo_doubleACTOpen_1960 = function (t, e) {
        var i = e.readByte();
        1 == i ? GameGlobal.modelAct.doubleState = !0 : GameGlobal.modelAct.doubleState = !1
    }, e.prototype.GC_ActRed = function (t, i) {
        var o = i.readInt(),
            n = i.readInt(),
            a = i.readByte(),
            s = t.actData.getChildByID(o);
        if (s) {
            var r = s.getChildByID(n);
            if (r) {
                var l = 1 == a;
                r.isRed != l && (r.setRed(l), t.notify(e.MSG_ACTRED, n))
            }
        }
    }, e.prototype.GC_Act_NotOpen = function (t, e) {
        e.readByte(), e.readShort();
        ViewText.text("该活动未开启")
    }, e.prototype.CG_COMRNKINFO = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(2461, e)
    }, e.prototype.GC_COMRNKINFO = function (t, i) {
        var o = i.readShort(),
            n = i.readByte();
        t.rnkNumMap[o] = n, t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_COMRNK = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(2463, e)
    }, e.prototype.GC_COMRNK = function (t, i) {
        for (var o = i.readShort(), n = 0, a = i.readShort(); a > n; n++) {
            i.readByte(), i.readUTF(), i.readInt(), i.readShort()
        }
        var s = i.readByte();
        i.readInt();
        t.rnkNumMap[o] = s, t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_QUANMINCJINFO = function () {
        this.sendSocket(2501, this.getBytes())
    }, e.prototype.GC_QUANMINCJINFO = function (t, i) {
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = i.readShort(),
                s = i.readByte();
            t.quanMinCJData[a] = s
        }
        t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_QUANMINCJAWARD = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(2503, e)
    }, e.prototype.GC_QUANMINCJAWARD = function (t, i) {
        var o = i.readByte(),
            n = i.readShort();
        1 == o && (t.quanMinCJData[n] = 3, t.notify(e.MSG_PAGEUIEVT))
    }, e.prototype.CG_ACTGUANQIAINFO = function () {
        this.sendSocket(2521, this.getBytes())
    }, e.prototype.GC_ACTGUANQIAINFO = function (t, i) {
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = i.readShort(),
                s = i.readByte();
            t.guanQiaServInfo[a] = s
        }
        t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_ACTGUANQIAAWRAD = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(2523, e)
    }, e.prototype.GC_ACTGUANQIAAWRAD = function (t, i) {
        var o = i.readByte(),
            n = i.readShort();
        1 == o && (t.guanQiaServInfo[n] = 3, t.notify(e.MSG_PAGEUIEVT))
    }, e.prototype.CG_ACTCHALLENGE = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(2531, e)
    }, e.prototype.GC_ACTCHALLENGE = function (t, i) {
        for (var o = (i.readInt(), i.readInt(), 0), n = i.readShort(); n > o; o++) {
            var a = i.readInt(),
                s = i.readByte();
            t.tzItemServData[a] = s
        }
        t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_GETACTCHALLENGE = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(2533, e)
    }, e.prototype.GC_GETACTCHALLENGE = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt();
            t.tzItemServData[n] = 2, t.notify(e.MSG_PAGEUIEVT)
        }
    }, e.prototype.CG_SCTG_INFO = function () {
        var t = this.getBytes();
        this.sendSocket(2551, t)
    }, e.prototype.GC_SCTG_INFO = function (t, i) {
        var o = i.readInt(),
            n = i.readShort();
        t.sctgServData.numPeople = n, t.sctgServData.myCZ = o;
        for (var a = 0, s = i.readShort(); s > a; a++) {
            var r = i.readShort(),
                l = i.readByte();
            t.sctgServData[r] = l
        }
        t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_SCTG_AWARD = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(2553, e)
    }, e.prototype.GC_SCTG_AWARD = function (t, i) {
        var o = i.readByte(),
            n = i.readShort();
        1 == o ? (t.sctgServData[n] = 3, t.notify(e.MSG_PAGEUIEVT)) : 6 == o && (ViewText.text("背包已满"), GameGlobal.layerMgr.open(UIConst.EQUIPRL))
    }, e.prototype.CG_QUANMINJJINFO = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(2561, e)
    }, e.prototype.GC_QUANMINJJINFO = function (t, i) {
        var o = (i.readInt(), i.readInt());
        t.quanMinJJServData.myData = o;
        for (var n = 0, a = i.readShort(); a > n; n++) {
            var s = i.readInt(),
                r = i.readShort(),
                l = i.readByte();
            t.quanMinJJServData[s] = [s, r, l]
        }
        t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_QUANMINJJAWARD = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(2563, e)
    }, e.prototype.GC_QUANMINJJAWARD = function (t, i) {
        var o = i.readByte(),
            n = i.readInt();
        if (1 == o) {
            if (t.quanMinJJServData)
                for (var a in t.quanMinJJServData) {
                    var s = t.quanMinJJServData[a];
                    if (s.length && s[0] == n) {
                        s[2] = 2;
                        break
                    }
                }
            t.notify(e.MSG_PAGEUIEVT)
        }
    }, e.prototype.CG_XIANGOU_INFO = function () {
        var t = this.getBytes();
        this.sendSocket(2581, t)
    }, e.prototype.GC_XIANGOU_INFO = function (t, i) {
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = i.readShort(),
                s = i.readByte();
            t.xiangouServData[a] = s
        }
        t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_XIANGOU_BUY = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(2583, e)
    }, e.prototype.GC_XIANGOU_BUY = function (t, i) {
        var o = i.readByte(),
            n = i.readShort();
        1 == o && (t.xiangouServData[n] || (t.xiangouServData[n] = 0), t.xiangouServData[n] += 1, t.notify(e.MSG_PAGEUIEVT))
    }, e.prototype.CG_LEIJICZ_INFO = function () {
        var t = this.getBytes();
        this.sendSocket(2591, t)
    }, e.prototype.GC_LEIJICZ_INFO = function (t, i) {
        for (var o = i.readInt(), n = 0, a = i.readShort(); a > n; n++) {
            var s = i.readShort(),
                r = i.readByte();
            t.LJCZServData[s] = r
        }
        t.LJCZServData.todayCZ = o, t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_LEIJICZ_AWARD = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(2593, e)
    }, e.prototype.GC_LEIJICZ_AWARD = function (t, i) {
        var o = i.readByte(),
            n = i.readShort();
        1 == o ? (t.LJCZServData[n] = 3, t.notify(e.MSG_PAGEUIEVT)) : 7 == o && GameGlobal.modelBag.checkRLTips(0)
    }, e.prototype.CG_DBCZ_INFO = function () {
        var t = this.getBytes();
        this.sendSocket(3381, t)
    }, e.prototype.GC_DBCZ_INFO = function (t, i) {
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = i.readShort(),
                s = i.readByte(),
                r = i.readByte();
            t.dbczDatas[a] = [a, s, r]
        }
        t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_DBCZ_RECIVE = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(3383, e)
    }, e.prototype.GC_DBCZ_RECRESULT = function (t, i) {
        var o = i.readByte(),
            n = i.readShort(),
            a = i.readByte();
        1 == o && (t.dbczDatas[n] ? t.dbczDatas[n][2] = a : t.dbczDatas[n] = [n, 1, a]), t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.showGroupAct = function (t) {
        var e = this.actData.getChildByID(t);
        if (!e) {
            var e = new Vo_Act;
            e.id = t, e.initIcoLib(), this.actData.addChild(e), GameGlobal.tick.addInterv(this.notifyListChange, 100, this, !0)
        }
    }, e.prototype.CG_MRHL_OPENUI = function () {
        var t = this.getBytes();
        this.sendSocket(3661, t)
    }, e.prototype.GC_MRHL_INFO = function (t, i) {
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = {};
            a.state = i.readByte(), a.id = i.readShort(), t.mrhlData = a
        }
        if (2 == a.state) {
            var s = t.actData.getChildByID(17);
            s && (t.actData.removeChild(s), s.dispose())
        }
        t.mrhlTotalRecharge = i.readInt(), t.notify(e.MSG_PAGEUIEVT), t.checkActMrhlEff()
    }, e.prototype.CG_MRHL_GETAWD = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(3663, e)
    }, e.prototype.GC_MRHL_GETAWD = function (t, i) {
        var o = i.readByte(),
            n = i.readShort();
        1 == o ? (t.mrhlData && (t.mrhlData || (t.mrhlData = {
            id: n
        }), t.mrhlData.state = 2), t.checkActMrhlEff(), t.notify(e.MSG_PAGEUIEVT)) : 4 == o && GameGlobal.modelBag.checkRLTips(0)
    }, e.prototype.checkActMrhlEff = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(17);
        if (t) {
            var e = GameGlobal.modelAct.mrhlData,
                i = t.getBtn();
            i.setNoticVis(1 == e.state), i.isShowEff(2 != e.state)
        }
    }, e.prototype.CG_HF_SIGN = function () {
        var t = this.getBytes();
        this.sendSocket(3881, t)
    }, e.prototype.GC_HF_SIGN = function (t, i) {
        t.heFuSignDay = i.readByte();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = n + 1,
                s = i.readByte();
            t.heFuSignData[a] = s
        }
        t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_HF_SIGN_GETAWARD = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3883, e)
    }, e.prototype.GC_HF_SIGN_GETAWRD = function (t, i) {
        var o = i.readByte(),
            n = i.readByte();
        1 == o && (t.heFuSignData[n] = 2, t.notify(e.MSG_PAGEUIEVT))
    }, e.prototype.CG_HF_SHOP = function () {
        var t = this.getBytes();
        this.sendSocket(3841, t)
    }, e.prototype.GC_HF_SHOP = function (t, i) {
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = i.readShort(),
                s = i.readByte();
            t.hfXianGouSerData[a] = s
        }
        t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_HF_SHOP_BUY = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(3843, e)
    }, e.prototype.GC_HF_SHOP_BUY = function (t, i) {
        var o = i.readByte(),
            n = i.readShort();
        1 == o ? (ViewText.text("购买成功"), t.hfXianGouSerData[n] || (t.hfXianGouSerData[n] = 0), t.hfXianGouSerData[n]++, t.notify(e.MSG_PAGEUIEVT)) : 7 == o && GameGlobal.modelBag.checkRLTips(0)
    }, e.prototype.CG_HF_LJCZ = function () {
        var t = this.getBytes();
        this.sendSocket(3861, t)
    }, e.prototype.GC_HF_LJCZ = function (t, i) {
        for (var o = i.readInt(), n = 0, a = i.readShort(); a > n; n++) {
            var s = i.readShort(),
                r = i.readByte();
            t.HFLJCZServData[s] = r
        }
        t.HFLJCZServData.todayCZ = o, t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_HF_GETLJCZ = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(3863, e)
    }, e.prototype.GC_HF_GETLJCZ = function (t, i) {
        var o = i.readByte(),
            n = i.readShort();
        1 == o ? (t.HFLJCZServData[n] = 3, t.notify(e.MSG_PAGEUIEVT)) : 7 == o && GameGlobal.modelBag.checkRLTips(0)
    }, e.prototype.CG_HF_JJHL = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(3781, e)
    }, e.prototype.GC_HF_JJHL = function (t, i) {
        for (var o = (i.readInt(), i.readInt(), 0), n = i.readShort(); n > o; o++) {
            var a = i.readInt(),
                s = i.readByte();
            t.hfTZItemServData[a] = s
        }
        t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_HF_JJHL_GETAWD = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(3783, e)
    }, e.prototype.GC_HF_JJHL_GETAWD = function (t, i) {
        var o = i.readByte(),
            n = i.readInt();
        1 == o && (t.hfTZItemServData[n] = 2, t.notify(e.MSG_PAGEUIEVT))
    }, e.prototype.CG_HF_CBYL = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(3801, e)
    }, e.prototype.GC_HF_CBYL = function (t, i) {
        var o = i.readShort(),
            n = i.readByte();
        t.hfChongBang[o] = n, t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_HF_TZPLAN = function () {
        var t = this.getBytes();
        this.sendSocket(3821, t)
    }, e.prototype.GC_HF_TZPLAN = function (t, i) {
        t.hadBuyHFTZ = i.readByte();
        for (var o = 0, n = i.readShort(); n > o; o++) t.tzPlanData[o + 1] = i.readByte();
        t.todayPlanGet = i.readByte(), t.notify(e.MSG_PAGEUIEVT)
    }, e.prototype.CG_HF_TZPLAN_BUY = function () {
        var t = this.getBytes();
        this.sendSocket(3823, t)
    }, e.prototype.GC_HF_TZPLAN_BUY = function (t, i) {
        var o = i.readByte();
        1 == o && (t.hadBuyHFTZ = 1, t.notify(e.MSG_PAGEUIEVT))
    }, e.prototype.CG_HF_TZPLAN_GETAWD = function () {
        var t = this.getBytes();
        this.sendSocket(3825, t)
    }, e.prototype.GC_HF_TZPLAN_GETAWD = function (t, i) {
        var o = i.readByte(),
            n = i.readByte();
        1 == o && (t.todayPlanGet = 1, ViewText.text("领取成功"), t.tzPlanData[n] = 1, t.notify(e.MSG_PAGEUIEVT))
    }, e.MSG_ACTLIST_UPDATE = "MSG_ACTLIST_UPDATE", e.MSG_ACT_HIGH_LIGHT = "MSG_ACT_HIGH_LIGHT", e.MSG_ACTRED = "MSG_ACTRED", e.MSG_PAGEUIEVT = "MSG_PAGEUIEVT", e
}(BaseModel);
__reflect(Model_Act.prototype, "Model_Act");
var VActTBtn = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel = t, t ? this.currentState = "sel" : this.currentState = "nor"
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.lbName.text = t.getName(), this.imgRed.visible = t.isRed
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VActTBtn.prototype, "VActTBtn", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var View_ActPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.curPageUIID = 0, e.curActID = 0, e.pageUI = {}, e.skinName = "ActPnlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.initPage(), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.base.createPageGrp(), this.base.title = "七日活动", this.pageGrp = this.base.pageGrp, this.tabList.itemRenderer = VActTBtn, this.tabListDataAC = new eui.ArrayCollection, this.tabList.dataProvider = this.tabListDataAC, this.lbOpe.touchEnabled = !0, this.lbOpe.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOpT, this), this.tabList.addEventListener(egret.Event.CHANGE, this.onListC, this), this.part = Part.create(), this.part.setAct(1), this.addChildAt(this.part, this.getChildIndex(this.imgTitleBG) + 1)
    }, e.prototype.initPage = function () {
        var t = GameGlobal.layerMgr,
            e = UIConst,
            i = this.pageUI,
            o = Enum_Act;
        t.reg(e.ACTRANKLIST, VActCheckRank, GameGlobal.layerMgr.UI_MainMiddle, 1), t.reg(e.ACTCOMPAGE1, VComActPage1, this.pageGrp), t.reg(e.ACTCOMRANK, VACTComRank, this.pageGrp), t.reg(e.ACTQUANMINJJ, VQuanMinJJ, this.pageGrp), t.reg(e.ACTQUANMINCJ, VQuanMinCJ, this.pageGrp), t.reg(e.ACTGUANQIA, VActGuanQia, this.pageGrp), t.reg(e.ACTZKSHOP, VActShopPage, this.pageGrp), t.reg(e.SHOUCHONGTG, VShouChongTG, this.pageGrp), t.reg(e.ACTJLCZ, VActLeiJiCZ, this.pageGrp), t.reg(e.ACTZDSB, VZDSB, this.pageGrp), t.reg(e.ACTDBCZ, VDBCZ, this.pageGrp), i[o.Enum_QMCJ] = e.ACTQUANMINCJ, i[o.Enum_ZXGQ] = e.ACTGUANQIA, i[Enum_Act.Enum_ZQJJ] = e.ACTCOMPAGE1, i[Enum_Act.Enum_CBJJ] = e.ACTCOMPAGE1, i[Enum_Act.Enum_SBJJ] = e.ACTCOMPAGE1, i[Enum_Act.Enum_HBPY] = e.ACTCOMPAGE1, i[Enum_Act.Enum_CWPY] = e.ACTCOMPAGE1, i[Enum_Act.Enum_ZLTS] = e.ACTCOMPAGE1, i[Enum_Act.Enum_JJCBP] = e.ACTCOMPAGE1, i[Enum_Act.Enum_GHJJ] = e.ACTCOMPAGE1, i[Enum_Act.Enum_SLJJ] = e.ACTCOMPAGE1, i[o.Enum_ZQPH] = e.ACTCOMRANK, i[o.Enum_CBPH] = e.ACTCOMRANK, i[o.Enum_SBPH] = e.ACTCOMRANK, i[o.Enum_HBPH] = e.ACTCOMRANK, i[o.Enum_PETPH] = e.ACTCOMRANK, i[o.Enum_ZLPH] = e.ACTCOMRANK, i[o.Enum_JJCPH] = e.ACTCOMRANK, i[o.Enum_QMZQJJ] = e.ACTQUANMINJJ, i[o.Enum_QMCBJJ] = e.ACTQUANMINJJ, i[o.Enum_QMSBJJ] = e.ACTQUANMINJJ, i[o.Enum_QMHBPY] = e.ACTQUANMINJJ, i[o.Enum_QMCWJJ] = e.ACTQUANMINJJ, i[o.Enum_QMZLTS] = e.ACTQUANMINJJ, i[o.Enum_QMJJC] = e.ACTQUANMINJJ, i[o.Enum_SCTG] = e.SHOUCHONGTG, i[o.Enum_ZKSD] = e.ACTZKSHOP, i[o.Enum_LJCZ] = e.ACTJLCZ, i[o.Enum_ZDSB] = e.ACTZDSB, i[o.Enum_DBCZ] = e.ACTDBCZ
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), this.updateList(), e) {
            var i = this.getIndexByID(e);
            this.openIndex(this.getIndexByID(e)), this.updateAllLB();
            var o = this.tabList.layout;
            DisplayUtil.watchTileVertIndex(o, this.pageScrol, i)
        } else this.openIndex(0), this.updateAllLB(), DisplayUtil.resetScroller(this.pageScrol);
        GameGlobal.tick.addInterv(this.onTimeTick, 1e3, this), this.updateTime(), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.updateCur, this), GameGlobal.modelAct.on(Model_Act.MSG_ACTRED, this.onNotic, this)
    }, e.prototype.onClose = function () {
        this.closeCurPage(), GameGlobal.tick.removeInterv(this.onTimeTick), GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.updateCur), GameGlobal.modelAct.off(Model_Act.MSG_ACTRED, this.onNotic, this), this.part.setVal(null)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.updateList = function () {
        var t = GameGlobal.modelAct;
        this.tabListDataAC.removeAll();
        var e = t.actData.getChildByID(1);
        e.hasChild() && (e.childs.sort(this.tabSortFunc), DisplayUtil.fillDataAC(this.tabListDataAC, e.childs, this.pageScrol))
    }, e.prototype.tabSortFunc = function (t, e) {
        var i = 1e3 * t.sort + t.id,
            o = 1e3 * e.sort + e.id;
        return i - o
    }, e.prototype.updateAllLB = function () {
        var t = this.tabList.selectedItem;
        if (t) {
            this.lbCur.text = t.getCurStr(), this.lbDes.text = t.getDes();
            var e = t.getOpStr();
            this._oldOpStr != e && (this._oldOpStr = e, e && "0" != e ? this.lbOpe.textFlow = HtmlUtil.underLine(e) : this.lbOpe.text = "")
        } else this._oldOpStr = "", this.lbCur.text = "", this.lbDes.text = "", this.lbOpe.text = ""
    }, e.prototype.onListC = function (t) {
        var e = t.target,
            i = e.selectedItem;
        i && this.openPageViewByActID(i.id, i), this.updateAllLB()
    }, e.prototype.closeCurPage = function () {
        this.curPageUIID && (GameGlobal.layerMgr.close(this.curPageUIID), this.curPageUIID = 0)
    }, e.prototype.openPageViewByActID = function (t, e) {
        var i = this.pageUI[t];
        if (this.closeCurPage(), i) {
            var o = CFG_Act.LIB_Act[t];
            GameGlobal.modelAct.curSelVo = e, this.imgTitleBG.source = "actbg" + o.tbg + "_png", this.part.setVal("text/" + o.t), "zqph" == o.t || "chongBang" == o.t ? (this.part.x = 150, this.part.y = 100) : (this.part.x = 60, this.part.y = 110), this.curPageUIID = i, this.curActID = t, GameGlobal.layerMgr.open(i, e), this.getRankData(t)
        }
    }, e.prototype.getRankData = function (t) {
        if (28 != t) {
            var e = Enum_Act.RankType[t];
            e && CFG_COMMOND.isOpen(CFG_COMMOND.PANGHANGBANG) && GameGlobal.modelpaihangbang.CG1341(e, 1)
        }
    }, e.prototype.updateTime = function () {
        var t = this.tabList.selectedItem;
        if (t) {
            var e = t.getRemainSec();
            e >= 0 && (this.lbTime.text = DateUtil.getHMSBySecond2(t.getRemainSec()))
        }
    }, e.prototype.onTimeTick = function (t) {
        t.updateTime()
    }, e.prototype.onOpT = function () {
        var t = this.tabList.selectedItem;
        if (t) {
            var e = t.doOp();
            e && this.closeHandler()
        }
    }, e.prototype.updateCur = function () {
        var t = this.tabList.selectedItem;
        t && (this.lbCur.text = t.getCurStr())
    }, e.prototype.openIndex = function (t) {
        if (this.tabListDataAC.length > t) {
            var e = this.tabListDataAC.getItemAt(t);
            this.tabList.selectedItem = e, this.openPageViewByActID(e.id, e)
        }
    }, e.prototype.getIndexByID = function (t) {
        for (var e = 0, i = this.tabListDataAC.length; i > e; e++)
            if (this.tabListDataAC.getItemAt(e).id == t) return e;
        return 0
    }, e.prototype.onNotic = function (t) {
        for (var e = 0; e < this.tabListDataAC.length; e++) {
            var i = this.tabListDataAC.getItemAt(e);
            i.id == t && this.tabListDataAC.itemUpdated(i)
        }
    }, e
}(BaseEUIView);
__reflect(View_ActPnl.prototype, "View_ActPnl");
var Vo_Act = function () {
    function t() {
        this.isRed = !1, this.remainTime = 0, this.remainTimeUDT = 0, this.ui = 0, this.clickFlag = 0, this.openLevel = 0, this.isUseChildTime = !1, this.noticState = 0, this._isShowTime = !0
    }
    return t.prototype.getBtn = function () {
        return this._btn || (this._btn = new MainMenuBtn, this._btn.sortIndex = this.sort, this._btn.icon = this.icoUrl, this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this._btn.setNoticVis(this.isRed), this._btn.vo = this), this._btn
    }, t.prototype.useChildTime = function () {
        if (this.childs)
            for (var t = 0, e = this.childs.length; e > t; t++) {
                this.remainTime = this.childs[t].remainTime, this.remainTimeUDT = this.childs[t].remainTimeUDT;
                break
            }
    }, t.prototype.numChild = function () {
        if (this.childs) var t = this.childs.length;
        else t = 0;
        return t
    }, t.prototype.dispose = function () {
        this._btn && (DisplayUtil.remove(this._btn), this._btn.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)), this.clickCB = this.clickCaller = null
    }, t.prototype.onBtnT = function (t) {
        var e = t.currentTarget;
        this.hadClicked = !0, 1 != this.removeEffFlagCFG || this.clickFlag || (GameGlobal.modelAct.setActClickFlag(this.id, !0), e.isShowEff(!1)), 2 == this.removeEffFlagCFG && e.isShowEff(!1), this.clickCB ? this.clickCB.call(this.clickCaller, this) : this.doOp()
    }, t.prototype.disableTouch = function () {
        this._btn.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, t.prototype.initIcoLib = function () {
        var t = CFG_Act.LIB_ActIco[this.id];
        t ? (this.ope = "0" != t.ope ? t.ope : null, this.icoUrl = t.ico, this.sort = t.s, this.isUseChildTime = 1 == t.useCT, this.ui = t.ui, this.openLevel = t.lv, this.removeEffFlagCFG = t.eff, this.showTime(0 != (1 & t.st))) : console.error("找不到活动图标表id:" + this.id)
    }, t.prototype.initActLib = function () {
        var t = CFG_Act.LIB_Act[this.id];
        t || console.log("errorActID:" + this.id), this.opStr = t.opStr, this.ope = t.ope, this.sort = t.px, this.icoUrl = "MainScreen_json.qrhd"
    }, t.prototype.hasChild = function () {
        var t = this.childs;
        return t && t.length > 0
    }, t.prototype.clear = function () {
        var t = this.childs;
        t && (t.length = 0)
    }, t.prototype.getIcon = function () {
        return "ActIcon_json.BM_Act" + this.id2
    }, t.prototype.addChild = function (t) {
        this.childs || (this.childs = []), t.parent || (t.parent = this, this.childs.push(t))
    }, t.prototype.hasChildRed = function () {
        var t = this.childs;
        if (t)
            for (var e = t.length - 1; e >= 0; e--)
                if (t[e].isRed) return !0;
        return !1
    }, t.prototype.getChildByID = function (t) {
        var e = this.childs;
        if (e)
            for (var i = 0, o = e.length; o > i; i++) {
                var n = e[i];
                if (n.id == t) return n
            }
        return null
    }, t.prototype.removeChild = function (t) {
        var e = this.childs;
        if (e) {
            var i = this.childs.indexOf(t);
            if (-1 != i) return this.childs.splice(i, 1), !0
        }
        return !1
    }, t.prototype.getRemainSec = function () {
        var t = egret.getTimer(),
            e = this.remainTime - (t - this.remainTimeUDT) / 1e3 >> 0;
        return 0 > e && (e = 0), e
    }, t.prototype.getName = function () {
        var t = CFG_Act.LIB_Act[this.id];
        return t ? t.n : "act:" + this.id
    }, t.prototype.getOpStr = function () {
        return this.opStr
    }, t.prototype.getDes = function () {
        var t, e = CFG_Act.LIB_Act[this.id];
        return t = e && "0" != e.txt ? e.txt : ""
    }, t.prototype.getCurStr = function () {
        var t = GameGlobal.modelAct,
            e = "",
            i = this.id;
        if (i == Enum_Act.Enum_ZQPH || i == Enum_Act.Enum_CBPH || i == Enum_Act.Enum_SBPH || i == Enum_Act.Enum_HBPH || i == Enum_Act.Enum_PETPH || i == Enum_Act.Enum_SYTPH || i == Enum_Act.Enum_ZLPH || i == Enum_Act.Enum_JJCPH) {
            var o = GameGlobal.modelAct.rnkNumMap[i];
            e = o ? "当前排名:" + o : 0 == o ? "当前排名:未上榜" : "--"
        } else if (i == Enum_Act.Enum_HFZQPH || i == Enum_Act.Enum_HFCBPH || i == Enum_Act.Enum_HFSBPH || i == Enum_Act.Enum_HFHBPH || i == Enum_Act.Enum_HFPETPH || i == Enum_Act.Enum_SYTPH || i == Enum_Act.Enum_HFZLPH || i == Enum_Act.Enum_HFJJCPH) {
            var o = GameGlobal.modelAct.hfChongBang[i];
            e = o ? "当前排名:" + o : 0 == o ? "当前排名:未上榜" : "--"
        } else if (i == Enum_Act.Enum_ZQJJ || i == Enum_Act.Enum_QMZQJJ || i == Enum_Act.Enum_HFZQJJ) e = Lang.reTxt("当前等阶:{0}阶", VoHorse.getInst().highestJie);
        else if (i == Enum_Act.Enum_CBJJ || i == Enum_Act.Enum_QMCBJJ || i == Enum_Act.Enum_HFCBJJ) e = Lang.reTxt("当前等阶:{0}阶", VoWing.getInst().highestJie);
        else if (i == Enum_Act.Enum_SBJJ || i == Enum_Act.Enum_QMSBJJ || i == Enum_Act.Enum_HFSBJJ) e = Lang.reTxt("当前等阶:{0}阶", VoWeapon.getInst().highestJie);
        else if (i == Enum_Act.Enum_QMCJ) e = Lang.reTxt("当前等级:{0}级", GameGlobal.modelRole.voMine.level);
        else if (i == Enum_Act.Enum_ZXGQ) {
            var n = CFG_GuanQia.LIB[GameGlobal.modelGuanqia.guanqia - 1];
            e = n ? Lang.reTxt("当前{0}", n.n) : ""
        } else if (i == Enum_Act.Enum_ZLTS || i == Enum_Act.Enum_QMZLTS || i == Enum_Act.Enum_HFZLTS) e = Lang.reTxt("当前战力{0}", GameGlobal.modelRole.voMine.str);
        else if (i == Enum_Act.Enum_SYTTG || i == Enum_Act.Enum_QMSYTTG) e = Lang.reTxt("已通关{0}", VoSYTMonster.highestLayer);
        else if (i == Enum_Act.Enum_SCTG) e = Lang.reTxt("今日累计充值:{0}元宝", t.sctgServData.myCZ ? t.sctgServData.myCZ : 0);
        else if (i == Enum_Act.Enum_LJCZ) e = Lang.reTxt("今日累计充值{0}元宝", t.LJCZServData.todayCZ ? t.LJCZServData.todayCZ : 0);
        else if (i == Enum_Act.Enum_QMJJC) {
            var a = t.quanMinJJServData.myData;
            e = Lang.reTxt("我的排名:{0}", a ? a : "--")
        } else i == Enum_Act.Enum_GHJJ ? e = Lang.reTxt("当前等阶:{0}阶", VoHalo.getInst().highestJie) : i == Enum_Act.Enum_SLJJ ? e = Lang.reTxt("当前等阶:{0}阶", VoShouLing.getInst().highestJie) : i == Enum_Act.Enum_HFLJCZ && (e = Lang.reTxt("今日累计充值{0}元宝", t.HFLJCZServData.todayCZ ? t.HFLJCZServData.todayCZ : 0));
        return e
    }, t.prototype.doOp = function () {
        var t = !1,
            e = this.ope ? this.ope.split(",") : null;
        if (e)
            if (e[1] == UIConst.VIEWWENHAO) ViewWenHao.show(e[2]);
            else if ("1" == e[0] && CFG_COMMOND.isOpenByCFG(e[1], !0)) {
            1030 == i && GameGlobal.layerMgr.close(UIConst.ACT);
            var i = parseInt(e[2]) > 0 ? parseInt(e[2]) : e[2];
            if (1030 == i && GameGlobal.layerMgr.close(UIConst.ACT), 1e3 > i || CFG_COMMOND.isOpenByCFG(i, !0)) return GameGlobal.layerMgr.open(e[1], i), !0
        }
        return t
    }, t.prototype.updateRed = function () {
        var t = this.childs,
            e = !1;
        if (t)
            for (var i = 0, o = t.length; o > i; i++) {
                var n = t[i];
                if (n.isRed) {
                    e = !0;
                    break
                }
            }
        this.isRed = e, this._btn && this._btn.setNoticVis(e)
    }, t.prototype.checkRed = function () {
        switch (this.id) {
            case Enum_Act.Enum_ZQPH:
            case Enum_Act.Enum_CBPH:
            case Enum_Act.Enum_SBPH:
            case Enum_Act.Enum_HBPH:
            case Enum_Act.Enum_PETPH:
            case Enum_Act.Enum_ZLPH:
        }
    }, t.prototype.setRed = function (t) {
        this.isRed != t && (this.isRed = t, this._btn && this._btn.setNoticVis(t), this.parent.updateRed())
    }, t.prototype.showTime = function (t) {
        this._isShowTime = t
    }, t.prototype.clone = function () {
        var e = new t;
        for (var i in this) "function" != typeof this[i] && (e[i] = this[i]);
        return e
    }, t
}();
__reflect(Vo_Act.prototype, "Vo_Act");
var VActCheckRank = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e)
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VActCheckRank.prototype, "VActCheckRank");
var VACTComRank = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ACTComRank", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VACTComRankItem, this.role = UIRole.create(), this.roleGrp.addChild(this.role)
    }, e.prototype.onOpen = function (t) {
        this.voAct = t, this.updateList(), this.updateRole(), GameGlobal.modelpaihangbang.on(ModelPaiHangBang.msg_data, this.updateRole, this), GameGlobal.modelpaihangbang.on(ModelPaiHangBang.msg_1stInfo, this.updateRole, this), GameGlobal.modelAct.CG_COMRNKINFO(this.voAct.id)
    }, e.prototype.onClose = function () {
        VoPaiHangBang._1stInfo = null, this.role.stopAndClear(), GameGlobal.modelpaihangbang.off(ModelPaiHangBang.msg_data, this.updateRole, this), GameGlobal.modelpaihangbang.off(ModelPaiHangBang.msg_1stInfo, this.updateRole, this)
    }, e.prototype.updateList = function () {
        for (var t = this.voAct, e = CFG_Act.LIB_ActPH[t.id], i = CFG_Act.LIB_ActPHItem, o = e.idx + 1, n = []; i[o];) n.push(i[o]), o += 1;
        this.fillList(n)
    }, e.prototype.fillList = function (t) {
        var e = this.listDataAC;
        e.removeAll(), e.replaceAll(t), DisplayUtil.resetScroller(this.scroller)
    }, e.prototype.updateRole = function () {
        if (VoPaiHangBang.list.length) {
            var t = VoPaiHangBang.list[0].name;
            this.lbname.text = t
        }
        if (this.role.stopAndClear(), VoPaiHangBang._1stInfo) {
            this.scroller.height = 366, this.container.visible = !0;
            var e = VoPaiHangBang._1stInfo,
                i = e.fashion,
                o = e.job;
            i > 0 ? o = i : e.petId > 0 ? o = CFG_Pet.PETLIB[e.petId].m : e.huobanId > 0 && (o = CFG_HUOBAN1.LIB[e.huobanId].m);
            var n = this.role;
            3 == e.type || 4 == e.type ? n.setBody(o) : (n.setHalo(e.halo), n.setWeapon(e.shenBing), n.setHorse(e.horseMX), n.setWing(e.wing), n.setBody(o)), n.setWay(3), n.validParts(), n.play()
        } else this.container.visible = !1, this.scroller.height = 640
    }, e
}(BaseEUIView);
__reflect(VACTComRank.prototype, "VACTComRank");
var VACTComRankItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.selected = !1, e.gridArr = [], e.skinName = "ACTComRankItem", e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.id / 1e3 >> 0;
            CFG_Act.LIB_ActPH[e];
            t.qj.indexOf(",") ? this.lbNum.text = Lang.reTxt("第{0}名", t.qj.replace(",", "-")) : this.lbNum.text = Lang.reTxt("第{0}名", t.qj);
            var i = 1 == GameGlobal.modelRole.voMine.job ? t.nanjl : t.nvjl;
            ConfigHelp.makeStrGrids(i, this.gridArr, 30, 40, this, !0, 10, .8);
            var o = (this.itemIndex, GameGlobal.layerMgr.getView(UIConst.ACT));
            o && (28 == o.curActID ? this.desGrp.visible = !0 : t.id % 1e3 == 1 && (this.desGrp.visible = !1))
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VACTComRankItem.prototype, "VACTComRankItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VComActPage1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ComActPage1", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VComActPage1Item
    }, e.prototype.onOpen = function (t) {
        this.voAct = t, this.update(), GameGlobal.modelAct.CG_ACTCHALLENGE(this.voAct.id), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.update, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.update)
    }, e.prototype.update = function () {
        for (var t = this.voAct, e = CFG_Act.LIB_ZhuTiAct[t.id], i = CFG_Act.LIB_ZhuTiActItem, o = 1e5 * (t.index - 1) + e.idx + 1, n = []; i[o];) n.push(i[o]), o += 1;
        n.sort(this.sortF), this.fillList(n)
    }, e.prototype.sortF = function (t, i) {
        return e.getSortS(t) - e.getSortS(i)
    }, e.getSortS = function (t) {
        var e = GameGlobal.modelAct,
            i = e.tzItemServData[t.id];
        return 1 == i ? 0 + t.id : 2 == i ? 2e5 + t.id : 1e5 + t.id
    }, e.prototype.fillList = function (t) {
        var e = this.listDataAC;
        e.removeAll(), e.replaceAll(t)
    }, e
}(BaseEUIView);
__reflect(VComActPage1.prototype, "VComActPage1");
var VComActPage1Item = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.selected = !1, e.gridArr = [], e.skinName = "ComActPage1Item", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.update()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.update = function () {
        var t = this,
            e = t._data;
        t.lb.text = e.tjxs, ConfigHelp.makeStrGrids(e.jl, t.gridArr, 30, 40, t, !0, 10, .8);
        var i = GameGlobal.modelAct,
            o = i.tzItemServData[e.id];
        t.imgGet.visible = !1, t.btn.visible = !1, o ? 1 == o ? (t.btn.label = "领取奖励", t.btn.setNoticeVis(!0), t.btn.visible = !0) : 2 == o && (t.imgGet.visible = !0) : "0" != i.curSelVo.ope && (t.btn.visible = !0, t.btn.setNoticeVis(!1), t.btn.label = "前往"), t.btn.setNoticeVis(1 == o)
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelAct,
            e = t.tzItemServData[this._data.id];
        e ? t.CG_GETACTCHALLENGE(this._data.id) : t.curSelVo && (t.curSelVo.doOp(), GameGlobal.layerMgr.close(UIConst.ACT), GameGlobal.layerMgr.close(UIConst.JCHD))
    }, e
}(eui.Component);
__reflect(VComActPage1Item.prototype, "VComActPage1Item", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VDBCZ = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "DBCZSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VDBCZItem
    }, e.prototype.onOpen = function (t) {
        GameGlobal.modelAct.CG_DBCZ_INFO(), this.voAct = t, this.update(), DisplayUtil.resetScroller(this.scroller), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.update, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.update, this)
    }, e.prototype.update = function () {
        var t = (this.voAct, CFG_Act.LIB_DanBiCZ),
            e = [];
        for (var i in t) e.push(t[i]);
        e.sort(this.sortF), this.fillList(e)
    }, e.prototype.sortF = function (t, i) {
        var o = e.getCFGScore(t),
            n = e.getCFGScore(i);
        return o - n
    }, e.getCFGScore = function (t) {
        var e = 0,
            i = GameGlobal.modelAct.dbczDatas[t.id];
        if (i) {
            var o = t.cs,
                n = i[1],
                a = i[2];
            e = a >= o ? 2e6 : n >= n ? 1e6 : 0
        } else s = 0;
        var s = t.id + e;
        return s
    }, e.prototype.fillList = function (t) {
        var e = this.listDataAC;
        e.removeAll(), e.replaceAll(t)
    }, e
}(BaseEUIView);
__reflect(VDBCZ.prototype, "VDBCZ");
var VDBCZItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.canGet = !1, e.skinName = "DBCZItemSkin", e.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onBtnT, e), e.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onBtnT, e), e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.update()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.update = function () {
        var t = this,
            e = t._data,
            i = GameGlobal.modelAct.dbczDatas[e.id];
        t.lb.text = Lang.reTxt("单笔充值{0}元", e.czed), ConfigHelp.makeStrGrids(e.jl, t.gridArr, 30, 40, t, !0, 10, .8);
        var o = "可领次数";
        if (t.btn.setNoticeVis(!1), this.canGet = !1, i) {
            var n = e.cs,
                a = i[1],
                s = i[2];
            s >= n ? (t.btnGo.visible = !1, t.btn.visible = !1, t.imgGet.visible = !0) : s >= a ? (t.btnGo.visible = !0, t.btn.visible = !1, t.imgGet.visible = !1) : (t.btnGo.visible = !1, t.btn.visible = !0, t.imgGet.visible = !1, t.btn.setNoticeVis(!0), this.canGet = !0), t.lbState.textFlow = HtmlUtil.parse(HtmlUtil.fontNoSize(o, "#ce540a") + " " + a + "/" + e.cs)
        } else t.btnGo.visible = t.btn.visible = t.imgGet.visible = !1, t.lbState.text = o + "-/" + e.cs
    }, e.prototype.onBtnT = function () {
        var t = this._data;
        GameGlobal.modelAct.dbczDatas[t.id];
        this.canGet ? GameGlobal.modelAct.CG_DBCZ_RECIVE(t.id) : platform.openRecharge()
    }, e
}(eui.Component);
__reflect(VDBCZItem.prototype, "VDBCZItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VActLeiJiCZ = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ComActPage1", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VActLeiJiCZItem
    }, e.prototype.onOpen = function (t) {
        this.voAct = t, this.update(), GameGlobal.modelAct.CG_LEIJICZ_INFO(), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.update, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.update)
    }, e.prototype.update = function () {
        var t = this.voAct,
            e = CFG_Act.LIB_ActLeiJiCZ,
            i = (GameGlobal.modelAct, []);
        for (var o in e) {
            var n = e[o];
            n.id / 100 >> 0 == t.index && i.push(n)
        }
        i.sort(this.sortF), this.fillList(i)
    }, e.prototype.sortF = function (t, i) {
        return e.getSortS(t) - e.getSortS(i)
    }, e.getSortS = function (t) {
        var e = GameGlobal.modelAct,
            i = e.LJCZServData[t.id];
        return 2 == i ? 0 + t.id : 3 == i ? 2e5 + t.id : 1e5 + t.id
    }, e.prototype.fillList = function (t) {
        var e = this.listDataAC;
        e.removeAll(), e.replaceAll(t)
    }, e
}(BaseEUIView);
__reflect(VActLeiJiCZ.prototype, "VActLeiJiCZ");
var VActLeiJiCZItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.selected = !1, e.gridArr = [], e.skinName = "ComActPage1Item", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.update()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.update = function () {
        var t = this,
            e = t._data;
        t.lb.text = Lang.reTxt("今日累计充值{0}元宝", e.czed), ConfigHelp.makeStrGrids(e.jl, t.gridArr, 30, 40, t, !0, 10, .8);
        var i = GameGlobal.modelAct.LJCZServData[e.id];
        t.btn.visible = t.imgGet.visible = !1, 2 == i ? (t.btn.visible = !0, t.btn.setNoticeVis(!0), t.btn.label = "领取奖励") : 3 == i ? t.imgGet.visible = !0 : (t.btn.visible = !0, t.btn.setNoticeVis(!1), t.btn.label = "前往")
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelAct,
            e = t.LJCZServData[this._data.id];
        2 == e ? t.CG_LEIJICZ_AWARD(this._data.id) : 3 == e || (platform.openRecharge(), GameGlobal.layerMgr.close(UIConst.ACT), GameGlobal.layerMgr.close(UIConst.JCHD))
    }, e
}(eui.Component);
__reflect(VActLeiJiCZItem.prototype, "VActLeiJiCZItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VMeiRiHaoLi = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "MRHLSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.imgText = new ImageText, this.imgText.charFunc = ImageText.MRHLSTR, this.imgText.makeContainer(), this.cont.addChild(this.imgText.container)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.update, this), this.onTimer(this), GameGlobal.modelAct.CG_MRHL_OPENUI(), this.update(), GameGlobal.tick.addInterv(this.onTimer, 1e3, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.update, this), GameGlobal.tick.removeInterv(this.onTimer, this), ConfigHelp.clearGrids(this.grids), this.mod && (EffectMgr.getIns().removeEff(this.mod), this.mod = null)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function () {
        var t = GameGlobal.modelAct.mrhlData;
        if (this.btnHand.label = "前往充值", this.btnHand.va = 0, t) {
            var e = CFG_Act.LIB_MRHL[t.id];
            if (e)
                if (this.txtName.text = e.zt, ConfigHelp.makeStrGrids(e.jl, this.grids, 0, 0, this.gridContainer, !0, 0, .8, .8), this.imgText.container.x = 481.36, this.imgText.container.y = 84, this.imgText.container.rotation = .21, e.zl) {
                    this.currentState = "str";
                    var i = e.zl.toString();
                    this.imgText.setText(i), this.imgText.container.anchorOffsetX = this.imgText.totalWid / 2, this.greenUp.x = this.imgText.container.x - this.imgText.container.getBounds().x, this.greenUp.y = this.imgText.container.y + 1.3 * this.imgText.container.getBounds().y
                } else this.currentState = "normal", this.imgText.setText("");
            if (1 == t.state ? (this.btnHand.label = "领取奖励", this.btnHand.va = 1) : 2 == t.state && (this.btnHand.label = "已领取", this.btnHand.va = 2), "0" != e.mod) {
                var o = e.mod.split("_");
                this.mod || (this.mod = EffectMgr.addEff(o[0], null, 200, 250, 800, -1, !0, o[1]), this.mod.scaleX = this.mod.scaleY = 1.2, this.cont.addChildAt(this.mod, 4)), this.imgIco.source = null
            } else {
                this.mod && (EffectMgr.getIns().removeEff(this.mod), this.mod = null);
                var n = CFG_Item.LIB[e.zs];
                n && (this.imgIco.source = IconUtil.getIconUrl(n.icon))
            }
            this.txtDes.text = e.txt;
            var a = e.lc - GameGlobal.modelAct.mrhlTotalRecharge
        }
        a > 0 ? this.txtChongZhi.textFlow = HtmlUtil.parse(Lang.reTxt("还需充值<font color='#c4fd00'>{0}元</font>即可领取", a)) : this.txtChongZhi.text = "已满足条件", this.lbdes.text = Lang.reTxt("今天充值满{0}元可额外领取", e.lc)
    }, e.prototype.onTimer = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(17),
            i = 0;
        e && (i = e.getRemainSec()), t.txtTime.text = "剩余时间:" + DateUtil.getHMSBySecond2(i)
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelAct.mrhlData;
        0 == this.btnHand.va ? GameGlobal.layerMgr.open(UIConst.RECHARGE) : 1 == this.btnHand.va ? GameGlobal.modelAct.CG_MRHL_GETAWD(t.id) : ViewText.text("奖励已领取")
    }, e
}(BaseEUIView);
__reflect(VMeiRiHaoLi.prototype, "VMeiRiHaoLi");
var VQuanMinCJ = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QuanMinJJ", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VQuanMinCJItem
    }, e.prototype.onOpen = function (t) {
        this.voAct = t, this.update(), GameGlobal.modelAct.CG_QUANMINCJINFO(), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.onUpdate, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.onUpdate)
    }, e.prototype.update = function () {
        var t = (this.voAct, CFG_Act.LIB_QuanMinCJ),
            e = [];
        for (var i in t) {
            var o = t[i];
            e.push(o)
        }
        e.sort(this.sortF), this.fillList(e)
    }, e.prototype.onUpdate = function () {
        this.update()
    }, e.prototype.sortF = function (t, i) {
        return e.getSortS(t) - e.getSortS(i)
    }, e.getSortS = function (t) {
        var e = GameGlobal.modelAct,
            i = e.quanMinCJData[t.id];
        return 2 == i ? 0 + t.id : 3 == i ? 2e5 + t.id : 1e5 + t.id
    }, e.prototype.fillList = function (t) {
        var e = this.listDataAC;
        e.removeAll(), e.replaceAll(t)
    }, e
}(BaseEUIView);
__reflect(VQuanMinCJ.prototype, "VQuanMinCJ");
var VQuanMinCJItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.selected = !1, e.gridArr = [], e.skinName = "QuanMinJJItem", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.update()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.update = function () {
        var t = this,
            e = t._data;
        t.lb.text = Lang.reTxt("主角达到{0}级", e.qj), ConfigHelp.makeStrGrids(e.jl, t.gridArr, 30, 40, t, !0, 10, .8);
        var i = GameGlobal.modelAct.quanMinCJData[e.id];
        t.imgGet.visible = !1, t.btn.visible = !1, 2 == i ? (t.btn.visible = !0, t.btn.label = "领取奖励", t.btn.setNoticeVis(!0)) : 3 == i ? t.imgGet.visible = !0 : (t.btn.visible = !0, t.btn.label = "前往", t.btn.setNoticeVis(!1)), t.btn.setNoticeVis(2 == i)
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelAct,
            e = t.quanMinCJData[this._data.id];
        2 == e ? t.CG_QUANMINCJAWARD(this._data.id) : 3 == e || GameGlobal.layerMgr.openX(UIConst.GUANQIABOSS)
    }, e
}(eui.Component);
__reflect(VQuanMinCJItem.prototype, "VQuanMinCJItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VQuanMinJJ = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QuanMinJJ", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VQuanMinJJItem
    }, e.prototype.onOpen = function (t) {
        this.voAct = t, this.update(), GameGlobal.modelAct.CG_QUANMINJJINFO(this.voAct.id), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.update, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.update)
    }, e.prototype.update = function () {
        var t = this.voAct,
            e = CFG_Act.LIB_QuanMinJJ,
            i = CFG_Act.LIB_Act[t.id].arg,
            o = [];
        if ("0" != i)
            for (var n = i.split(","), a = 0, s = n.length; s > a; a++) {
                var r = e[n[a]];
                o.push(r)
            }
        o.sort(this.sortF), this.fillList(o)
    }, e.prototype.sortF = function (t, i) {
        return e.getSortS(t) - e.getSortS(i)
    }, e.getSortS = function (t) {
        var e = GameGlobal.modelAct,
            i = e.quanMinJJServData[t.id];
        if (i) var o = i[2];
        return 1 == o ? 0 + t.id : 2 == o ? 2e5 + t.id : 1e5 + t.id
    }, e.prototype.fillList = function (t) {
        var e = this.listDataAC;
        e.removeAll(), e.replaceAll(t), DisplayUtil.resetScroller(this.scroller)
    }, e
}(BaseEUIView);
__reflect(VQuanMinJJ.prototype, "VQuanMinJJ");
var VQuanMinJJItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.selected = !1, e.gridArr = [], e.skinName = "QuanMinJJItem", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.update()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.update = function () {
        var t = this,
            e = t._data;
        ConfigHelp.makeStrGrids(e.jl, t.gridArr, 30, 40, t, !0, 10, .8);
        var i = GameGlobal.modelAct,
            o = i.quanMinJJServData[e.id];
        if (t.btn.visible = t.imgGet.visible = !1, o) {
            var n = o[2];
            n ? 1 == n ? (t.btn.visible = !0, t.btn.label = "领取奖励", t.btn.setNoticeVis(!0)) : 2 == n && (t.imgGet.visible = !0) : (t.lb.text = e.tjxs, "0" != i.curSelVo.ope && (t.btn.visible = !0, t.btn.label = "前往", t.btn.setNoticeVis(!1))), t.lb.text = e.tjxs + Lang.reTxt("({0}/{1})", o[1], e.p)
        } else t.lb.text = e.tjxs, "0" != i.curSelVo.ope && (t.btn.visible = !0, t.btn.label = "前往", t.btn.setNoticeVis(!1))
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelAct,
            e = t.quanMinJJServData[this._data.id];
        if (e) {
            var i = e[2];
            i ? t.CG_QUANMINJJAWARD(this._data.id) : t.curSelVo && t.curSelVo.doOp()
        }
    }, e
}(eui.Component);
__reflect(VQuanMinJJItem.prototype, "VQuanMinJJItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VShouChongTG = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.curNum = 10, e.skinName = "ShouChongTG", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VShouChongTGItem, this.tbtn0.label = "团购10人", this.tbtn1.label = "团购20人", this.tbtn2.label = "团购50人", this.tbtn3.label = "团购100人"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.voAct = e, GameGlobal.modelAct.CG_SCTG_INFO(), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.onUpdate, this), this.updateList(), this.setSelIndex(0), this.tabs.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTabT, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.onUpdate)
    }, e.prototype.onUpdate = function () {
        this.updateRed(), this.listDataAC.refresh()
    }, e.prototype.updateList = function () {
        var t = this.getListArr();
        this.fillList(t)
    }, e.prototype.getListArr = function () {
        var t = CFG_Act.LIB_ShouChongTG,
            e = [];
        for (var i in t) {
            var o = t[i];
            o.id / 100 >> 0 == this.voAct.index && o.p == this.curNum && e.push(o)
        }
        return e
    }, e.prototype.setSelIndex = function (t) {
        var e = this.tabs.getChildAt(t);
        e != this._oldTab && (this._oldTab && (this._oldTab.selected = !1), this._oldTab = e, e.selected = !0, 0 == t ? this.curNum = 10 : 1 == t ? this.curNum = 20 : 2 == t ? this.curNum = 50 : this.curNum = 100, this.updateList())
    }, e.prototype.fillList = function (t) {
        var e = this.listDataAC;
        e.removeAll(), e.replaceAll(t), DisplayUtil.resetScroller(this.scroller)
    }, e.prototype.onTabT = function (t) {
        var e = t.target,
            i = this.tabs.$children.indexOf(e);
        i >= 0 && this.setSelIndex(i)
    }, e.prototype.updateRed = function () {
        var t = Util.getTempObj(),
            e = GameGlobal.modelAct.sctgServData,
            i = CFG_Act.LIB_ShouChongTG;
        for (var o in e) {
            var n = i[o];
            if (n && n.id / 100 >> 0 == this.voAct.index) {
                var a = e[o];
                2 == a && (t[n.p] = !0)
            }
        }
        this.tbtn0.setNoticVis(null != t[10]), this.tbtn1.setNoticVis(null != t[20]), this.tbtn2.setNoticVis(null != t[50]), this.tbtn3.setNoticVis(null != t[100])
    }, e
}(BaseEUIView);
__reflect(VShouChongTG.prototype, "VShouChongTG");
var VShouChongTGItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "ShouChongTGItem", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return null
        },
        set: function (t) {
            var e = this,
                i = GameGlobal.modelAct.sctgServData[t.id];
            e._data = t, e.lb.text = t.tjxs, e.lbNum.y = e.lb.y + e.lb.textHeight + 10, e.btn.visible = e.imgGet.visible = !1, 2 == i ? (e.btn.visible = !0, e.btn.label = "领取", e.btn.setNoticeVis(!0)) : 3 == i ? e.imgGet.visible = !0 : (e.btn.visible = !0, e.btn.label = "前往", e.btn.setNoticeVis(!1));
            var o = GameGlobal.modelAct.sctgServData.numPeople,
                n = (GameGlobal.modelAct.sctgServData.myCZ, CFG_Act.LIB_ShouChongTG[t.id]);
            o ? e.lbNum.text = o + "/" + n.p : e.lbNum.text = "0/" + n.p, ConfigHelp.makeStrGrids(t.jl, e.gridArr, 227, 25, e, !0)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onBtnT = function () {
        var t = GameGlobal.modelAct.sctgServData[this._data.id];
        2 == t ? GameGlobal.modelAct.CG_SCTG_AWARD(this._data.id) : 2 == t || platform.openRecharge()
    }, e
}(eui.Component);
__reflect(VShouChongTGItem.prototype, "VShouChongTGItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VActShopItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ActShopItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBuyT, this), this.grid.enableTip()
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            var e = GameGlobal.modelAct;
            this._data = t;
            var i = Util.parseIntStr(t.tjxs),
                o = this.grid._data ? this.grid._data : VoItem.create();
            o.count = i[2], o.init(i[1]), this.grid.setData(o), this.lbDiscount.text = t.zk + "折", this.lbName.text = o.name;
            var n = Util.parseIntStr(t.xj),
                a = Util.parseIntStr(t.yj);
            this.lbYJ.text = "原价:" + a[2], this.lbXJ.text = "现价:" + n[2];
            var s = 32 == n[0] ? "MainScreen_json.byl" : "MainScreen_json.bm_yb";
            this.imgYJ.source = s, this.imgXJ.source = s;
            var r = e.xiangouServData[t.id] ? e.xiangouServData[t.id] : 0;
            this.lbNum.text = r + "/" + t.xg, this.btnBuy.enabled = r < t.xg
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onBuyT = function () {
        var t = GameGlobal.modelAct,
            e = t.xiangouServData[this._data.id] ? t.xiangouServData[this._data.id] : 0,
            i = this._data;
        if (e < this.data.xg) {
            var o = Util.parseIntStr(this._data.xj);
            ViewAlert.show(Lang.reTxt("是否花费{0}{1}购买{2}个{3}?", o[2], CFG_ATTR.LIB[o[0]].n, this.grid._data.count, this.grid._data.name), function () {
                ConfigHelp.checkEnough1(o, !0) && GameGlobal.modelAct.CG_XIANGOU_BUY(i.id)
            })
        } else ViewText.text("购买次数已满")
    }, e
}(eui.Component);
__reflect(VActShopItem.prototype, "VActShopItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VActShopPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ActShopSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VActShopItem
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.voAct = e, this.updateList(), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.onUpdate, this), GameGlobal.modelAct.CG_XIANGOU_INFO()
    }, e.prototype.onClose = function () {
        GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.onUpdate)
    }, e.prototype.updateList = function () {
        var t = this.getListArr();
        this.fillList(t)
    }, e.prototype.getListArr = function () {
        var t = CFG_Act.LIB_ZheKouShop,
            e = [];
        for (var i in t) {
            var o = t[i];
            o.id / 100 >> 0 == this.voAct.index && e.push(o)
        }
        return e
    }, e.prototype.fillList = function (t) {
        DisplayUtil.fillDataAC(this.listDataAC, t, this.scroller)
    }, e.prototype.onUpdate = function () {
        DisplayUtil.fillDataAC(this.listDataAC, this.getListArr())
    }, e
}(BaseEUIView);
__reflect(VActShopPage.prototype, "VActShopPage");
var VZDSB = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ZDSBSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onT = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.ZDFB, !0) && (GameGlobal.layerMgr.open(UIConst.ZDFBPAGE), GameGlobal.layerMgr.close(UIConst.ACT))
    }, e
}(BaseEUIView);
__reflect(VZDSB.prototype, "VZDSB");
var VActGuanQia = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QuanMinJJ", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VActGuanQiaItem
    }, e.prototype.onOpen = function (t) {
        this.voAct = t, this.update(), DisplayUtil.resetScroller(this.scroller), GameGlobal.modelAct.CG_ACTGUANQIAINFO(), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.onUpdate, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.onUpdate)
    }, e.prototype.update = function () {
        var t = (this.voAct, CFG_Act.LIB_ActGuanQia),
            e = [];
        for (var i in t) {
            var o = t[i];
            e.push(o)
        }
        e.sort(this.sortF), this.fillList(e)
    }, e.prototype.sortF = function (t, i) {
        return e.getSortS(t) - e.getSortS(i)
    }, e.getSortS = function (t) {
        var e = GameGlobal.modelAct,
            i = e.guanQiaServInfo[t.id];
        return 2 == i ? 0 + t.id : 3 == i ? 2e5 + t.id : 1e5 + t.id
    }, e.prototype.fillList = function (t) {
        var e = this.listDataAC;
        e.removeAll(), e.replaceAll(t)
    }, e.prototype.onUpdate = function () {
        this.listDataAC.source && this.listDataAC.source.sort(this.sortF), this.listDataAC.refresh()
    }, e
}(BaseEUIView);
__reflect(VActGuanQia.prototype, "VActGuanQia");
var VActGuanQiaItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.selected = !1, e.gridArr = [], e.skinName = "QuanMinJJItem", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.update()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.update = function () {
        var t = this,
            e = t._data,
            i = CFG_GuanQia.LIB[e.tg];
        t.lb.text = Lang.reTxt("通关{0}", i.n), ConfigHelp.makeStrGrids(e.jl, t.gridArr, 30, 40, t, !0, 10, .8);
        var o = GameGlobal.modelAct.guanQiaServInfo[e.id];
        t.btn.visible = t.imgGet.visible = !1, 2 == o ? (t.btn.visible = !0, t.btn.setNoticeVis(!0), t.btn.label = "领取奖励") : 3 == o ? t.imgGet.visible = !0 : (t.btn.label = "前往", t.btn.setNoticeVis(!1), t.btn.visible = !0), t.btn.setNoticeVis(2 == o)
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelAct,
            e = t.guanQiaServInfo[this._data.id];
        2 == e ? t.CG_ACTGUANQIAAWRAD(this._data.id) : 3 == e || (GameGlobal.mapScene._curSt == SceneCtrl.T_GUANQIA ? GameGlobal.layerMgr.openX(UIConst.GUANQIABOSS) : GameGlobal.mapScene._curSt == SceneCtrl.T_TOWN && ViewAlert.show("是否前往关卡地图?", function () {
            GameGlobal.mapScene.changeMap(GameGlobal.modelGuanqia.getCurSceneID()), GameGlobal.layerMgr.closePnlByType(1)
        }))
    }, e
}(eui.Component);
__reflect(VActGuanQiaItem.prototype, "VActGuanQiaItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VActHFPageIcon = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.skinName = "ActHeFuPageIcon", e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            var e = CFG_Act.LIB_Act[t.id],
                i = e.t + "Ico_png",
                o = e.t + "LB_png";
            IconUtil.setIconSrc(this.imgIco, i), IconUtil.setIconSrc(this.imgLB, o), this.imgRed.visible = t.isRed
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel = t, t ? this.imgSelExml.source = "FLAtlas_json.select" : this.imgSelExml.source = "FLAtlas_json.noselect"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VActHFPageIcon.prototype, "VActHFPageIcon", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var View_ActHeFu = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.pageUI = {}, e.curPageUIID = 0, e.skinName = "ActHeFuPnlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this,
            e = t.pageUI,
            i = UIConst,
            o = Enum_Act,
            n = GameGlobal;
        t.tabListDataAC = new eui.ArrayCollection, t.listIconExml.itemRenderer = VActHFPageIcon, t.listIconExml.dataProvider = t.tabListDataAC, t.listIconExml.addEventListener(egret.Event.CHANGE, t.onListC, t), t.lbOpe.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onOpT, t), t.base.title = "合服活动", t.addCloseListen(t.base.btnClose).addCloseListen(t.base.btnReturn), n.layerMgr.reg(i.ACTHF_DL, VActHFSign, t.pageGrp), n.layerMgr.reg(i.ACTHF_CBYL, VHeFuChongBang, t.pageGrp), n.layerMgr.reg(i.ACTHF_JJHL, VHeFuJinJieHL, t.pageGrp), n.layerMgr.reg(i.ACTHF_THLB, VHeFuTeHuiLiBao, t.pageGrp), n.layerMgr.reg(i.ACTHF_TZPLAN, VActHFTZPlan, t.pageGrp), n.layerMgr.reg(i.ACTHF_LJCZ, VHeFuLJCZ, t.pageGrp), e[o.Enum_HFDL] = i.ACTHF_DL, e[o.Enum_HFZQPH] = i.ACTHF_CBYL, e[o.Enum_HFCBPH] = i.ACTHF_CBYL, e[o.Enum_HFSBPH] = i.ACTHF_CBYL, e[o.Enum_HFHBPH] = i.ACTHF_CBYL, e[o.Enum_HFPETPH] = i.ACTHF_CBYL, e[o.Enum_HFJJCPH] = i.ACTHF_CBYL, e[o.Enum_HFZLPH] = i.ACTHF_CBYL, e[Enum_Act.Enum_HFZQJJ] = i.ACTHF_JJHL, e[Enum_Act.Enum_HFCBJJ] = i.ACTHF_JJHL, e[Enum_Act.Enum_HFSBJJ] = i.ACTHF_JJHL, e[Enum_Act.Enum_HFHBPY] = i.ACTHF_JJHL, e[Enum_Act.Enum_HFCWPY] = i.ACTHF_JJHL, e[Enum_Act.Enum_HFJJC] = i.ACTHF_JJHL, e[Enum_Act.Enum_HFZLTS] = i.ACTHF_JJHL, e[Enum_Act.Enum_HFTZPLAN] = i.ACTHF_TZPLAN, e[Enum_Act.Enum_HFTHLB] = i.ACTHF_THLB, e[Enum_Act.Enum_HFLJCZ] = i.ACTHF_LJCZ
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), this.updateIcoList(), e) {
            var i = this.getIndexByID(e);
            this.openIndex(this.getIndexByID(e)), this.updateAllLB();
            var o = this.listIconExml.layout;
            DisplayUtil.watchTileHIndex(o, this.pageScrollor, i);
            DisplayUtil.resetScroller(this.pageScrollor)
        } else this.openIndex(0), this.updateAllLB(), DisplayUtil.resetScroller(this.pageScrollor);
        GameGlobal.tick.addInterv(this.onTimeTick, 1e3, this), this.updateTime(), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.updateCur, this), GameGlobal.modelAct.on(Model_Act.MSG_ACTRED, this.onNotic, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.onTimeTick, this)
    }, e.prototype.updateIcoList = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(21);
        t && (t.childs.sort(this.tabSortFunc), DisplayUtil.fillDataAC(this.tabListDataAC, t.childs))
    }, e.prototype.tabSortFunc = function (t, e) {
        var i = 1e3 * t.sort + t.id,
            o = 1e3 * e.sort + e.id;
        return i - o
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.openIndex = function (t) {
        if (this.tabListDataAC.length > t) {
            var e = this.tabListDataAC.getItemAt(t);
            this.listIconExml.selectedItem = e, this.openPageViewByActID(e.id, e)
        }
    }, e.prototype.openPageViewByActID = function (t, e) {
        var i = this.pageUI[t];
        if (this.closeCurPage(), i) {
            var o = CFG_Act.LIB_Act[t];
            GameGlobal.modelAct.curSelVo = e, 216 == t ? (IconUtil.setIconSrc(this.imgTxt, null), IconUtil.setIconSrc(this.imgTitleBG, "bgtz_jpg"), this.imgBack.visible = !1, this.lbTimeTitle.x = 408, this.lbTimeTitle.y = 186, this.lbTime.x = 516, this.lbTime.y = 186) : (IconUtil.setIconSrc(this.imgTxt, o.t + "Txt_png"), IconUtil.setIconSrc(this.imgTitleBG, "bg1_jpg"), this.imgBack.visible = !0, this.lbTimeTitle.x = 44, this.lbTimeTitle.y = 298, this.lbTime.x = 152, this.lbTime.y = 298), this.curPageUIID = i, GameGlobal.layerMgr.open(i, e)
        }
    }, e.prototype.closeCurPage = function () {
        this.curPageUIID && (GameGlobal.layerMgr.close(this.curPageUIID), this.curPageUIID = 0)
    }, e.prototype.getIndexByID = function (t) {
        for (var e = 0, i = this.tabListDataAC.length; i > e; e++)
            if (this.tabListDataAC.getItemAt(e).id == t) return e;
        return 0
    }, e.prototype.onListC = function (t) {
        var e = t.target,
            i = e.selectedItem;
        i && this.openPageViewByActID(i.id, i), this.updateAllLB()
    }, e.prototype.updateAllLB = function () {
        var t = this.listIconExml.selectedItem;
        if (t) {
            this.lbCur.text = t.getCurStr();
            var e = t.getOpStr();
            this._oldOpStr != e && (this._oldOpStr = e, e && "0" != e ? this.lbOpe.textFlow = HtmlUtil.underLine(e) : this.lbOpe.text = "")
        } else this._oldOpStr = "", this.lbCur.text = "", this.lbOpe.text = ""
    }, e.prototype.updateTime = function () {
        var t = this.listIconExml.selectedItem;
        if (t) {
            var e = t.getRemainSec();
            e >= 0 && (this.lbTime.text = DateUtil.getHMSBySecond2(t.getRemainSec()))
        }
    }, e.prototype.onTimeTick = function (t) {
        t.updateTime()
    }, e.prototype.updateCur = function () {
        var t = this.listIconExml.selectedItem;
        t && (this.lbCur.text = t.getCurStr())
    }, e.prototype.onNotic = function (t) {
        for (var e = 0; e < this.tabListDataAC.length; e++) {
            var i = this.tabListDataAC.getItemAt(e);
            i.id == t && this.tabListDataAC.itemUpdated(i)
        }
    }, e.prototype.onOpT = function () {
        var t = this.listIconExml.selectedItem;
        if (t) {
            var e = t.doOp();
            e && this.closeHandler()
        }
    }, e
}(BaseEUIView);
__reflect(View_ActHeFu.prototype, "View_ActHeFu");
var VHeFuChongBang = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ACTHFComRank", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VHeFuChongBangItem, this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCheckT, this), this.btnCheck.touchEnabled = !0, this.btnCheck.textFlow = HtmlUtil.underLine("查看排行")
    }, e.prototype.onOpen = function (t) {
        this.voAct = t, this.updateList(), GameGlobal.modelAct.CG_HF_CBYL(this.voAct.id), this.update()
    }, e.prototype.onClose = function () {}, e.prototype.updateList = function () {
        for (var t = this.voAct, e = CFG_Act.LIB_ActHF_CBMAP[t.id], i = CFG_Act.LIB_ActHF_CB, o = e.idx + 1, n = []; i[o];) n.push(i[o]), o += 1;
        this.fillList(n)
    }, e.prototype.fillList = function (t) {
        var e = this.listDataAC;
        e.removeAll(), e.replaceAll(t), DisplayUtil.resetScroller(this.scroller)
    }, e.prototype.update = function () {}, e.prototype.onCheckT = function () {
        var t = CFG_Act.LIB_ActHF_CBMAP[this.voAct.id],
            e = (CFG_Act.LIB_ActHF_CB, (t.idx + 1) % 1e3);
        28 == e ? GameGlobal.layerMgr.open(UIConst.JJCPAIHANG) : GameGlobal.layerMgr.open(UIConst.PAIHANGBANG), GameGlobal.layerMgr.close(UIConst.MAINTOWN)
    }, e
}(BaseEUIView);
__reflect(VHeFuChongBang.prototype, "VHeFuChongBang");
var VHeFuChongBangItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.selected = !1, e.gridArr = [], e.skinName = "ACTHFComRankItem", e
    }
    return __extends(e, t), e.getRnkTName = function (t) {
        var e;
        return 3 == t ? e = "坐骑排行" : 4 == t ? e = "翅膀排行" : 5 == t ? e = "神兵排行" : 6 == t ? e = "仙神排行" : 7 == t ? e = "灵兽排行" : 28 == t ? e = "竞技场排行" : 9 == t && (e = "战力排行"), e
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var i = t.id / 1e3 >> 0;
            CFG_Act.LIB_ActHF_CB[i];
            t.qj.indexOf(",") >= 0 ? this.lbNum.text = e.getRnkTName(i) + Lang.reTxt("第{0}名", t.qj.replace(",", "-")) : this.lbNum.text = e.getRnkTName(i) + Lang.reTxt("第{0}名", t.qj);
            var o = 1 == GameGlobal.modelRole.voMine.job ? t.nanjl : t.nvjl;
            ConfigHelp.makeStrGrids(o, this.gridArr, 15, 45, this, !0, 10);
            this.itemIndex
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VHeFuChongBangItem.prototype, "VHeFuChongBangItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VActHFTZPlan = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "ActHFTZPlan", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnGroup), this.btnGroup.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.container.dataProvider = this.sourceData, this.container.itemRenderer = VActHFTZPlanItem
    }, e.prototype.onHand = function () {
        var t = GameGlobal.modelAct;
        if (0 == t.hadBuyHFTZ) {
            var e = 888,
                i = GameGlobal.modelRole.voMine.yuanbao;
            if (e > i) return void ViewAlert.show("元宝不足，是否前往充值?", function () {
                GameGlobal.layerMgr.open(UIConst.RECHARGE)
            });
            GameGlobal.modelAct.CG_HF_TZPLAN_BUY()
        } else 1 == t.hadBuyHFTZ && 0 == t.todayPlanGet && GameGlobal.modelAct.CG_HF_TZPLAN_GETAWD()
    }, e.prototype.setBtnEnable = function (t) {
        t ? (this.btnBg.source = "SCAtlas_json.btnTz", this.btnLabel.textColor = 11023619) : (this.btnBg.source = "CM1_json.disabled", this.btnLabel.textColor = 16777215)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onUpdate(), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.onUpdate, this), GameGlobal.modelAct.CG_HF_TZPLAN()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.onUpdate)
    }, e.prototype.onUpdate = function () {
        this.updateState();
        var t = [];
        for (var e in CFG_Act.LIB_ACTHF_TZPLAN) {
            var i = CFG_Act.LIB_ACTHF_TZPLAN[e];
            t.push(i)
        }
        DisplayUtil.fillDataAC(this.sourceData, t)
    }, e.prototype.updateState = function () {
        var t = GameGlobal.modelAct;
        0 == t.hadBuyHFTZ ? (this.btnLabel.text = "投资888元宝", this.setBtnEnable(!0)) : 1 == t.hadBuyHFTZ && (0 == t.todayPlanGet ? (this.btnLabel.text = "领取", this.setBtnEnable(!0)) : (this.btnLabel.text = "今日已领取", this.setBtnEnable(!1)))
    }, e
}(BaseEUIView);
__reflect(VActHFTZPlan.prototype, "VActHFTZPlan");
var VActHFTZPlanItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "ActHFTZPlanItem", e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.day.toString(),
                i = e.length,
                o = parseInt(e.charAt(0));
            if (this.bm1.source = "SCAtlas_json." + o, i > 1) {
                var n = parseInt(e.charAt(1));
                DisplayUtil.addBy(this.bm2, this.wordContainer, 2), this.bm2.source = "SCAtlas_json." + n
            } else DisplayUtil.remove(this.bm2);
            var a = GameGlobal.modelAct,
                s = a.tzPlanData[t.day];
            switch (s) {
                case 0:
                    this.iconGot.source = null;
                    break;
                case 1:
                    this.iconGot.source = "SCAtlas_json.iconGot"
            }
            ConfigHelp.makeStrGrids(t.jl, this.grids, 0, 0, this.container, !0, 10, .9)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, t % 3 == 0 ? this.bg.source = "CM2_json.bg1" : this.bg.source = "CM2_json.bg2"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VActHFTZPlanItem.prototype, "VActHFTZPlanItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VHeFuJinJieHL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ComActHFPage", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VHeFuJinJieHLItem
    }, e.prototype.onOpen = function (t) {
        this.voAct = t, this.update(), GameGlobal.modelAct.CG_HF_JJHL(this.voAct.id), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.update, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.update)
    }, e.prototype.update = function () {
        for (var t = this.voAct, e = CFG_Act.LIB_ActHF_JJHLMAP[t.id], i = CFG_Act.LIB_ActHF_JJHL, o = e.idx + 1, n = []; i[o];) n.push(i[o]), o += 1;
        n.sort(this.sortF), this.fillList(n)
    }, e.prototype.sortF = function (t, i) {
        return e.getSortS(t) - e.getSortS(i)
    }, e.getSortS = function (t) {
        var e = GameGlobal.modelAct,
            i = e.hfTZItemServData[t.id];
        return 1 == i ? 0 + t.id : 2 == i ? 2e5 + t.id : 1e5 + t.id
    }, e.prototype.fillList = function (t) {
        var e = this.listDataAC;
        e.removeAll(), e.replaceAll(t)
    }, e
}(BaseEUIView);
__reflect(VHeFuJinJieHL.prototype, "VHeFuJinJieHL");
var VHeFuJinJieHLItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.selected = !1, e.gridArr = [], e.skinName = "ComActHFPageItem", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.update()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.update = function () {
        var t = this,
            e = t._data;
        t.lb.text = e.tjxs, ConfigHelp.makeStrGrids(e.jl, t.gridArr, 15, 45, t, !0, 10);
        var i = GameGlobal.modelAct,
            o = i.hfTZItemServData[e.id];
        t.imgGet.visible = !1, t.btn.visible = !1, o ? 1 == o ? (t.btn.label = "领取奖励", t.btn.setNoticeVis(!0), t.btn.visible = !0) : 2 == o && (t.imgGet.visible = !0) : "0" != i.curSelVo.ope && (t.btn.visible = !0, t.btn.setNoticeVis(!1), t.btn.label = "前往"), t.btn.setNoticeVis(1 == o)
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelAct,
            e = t.hfTZItemServData[this._data.id];
        e ? t.CG_HF_JJHL_GETAWD(this._data.id) : t.curSelVo && (t.curSelVo.doOp(), GameGlobal.layerMgr.close(UIConst.ACTHF), GameGlobal.layerMgr.close(UIConst.JCHD))
    }, e
}(eui.Component);
__reflect(VHeFuJinJieHLItem.prototype, "VHeFuJinJieHLItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VHeFuLJCZ = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ComActHFPage", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VHeFuLJCZItem
    }, e.prototype.onOpen = function (t) {
        this.voAct = t, this.update(), GameGlobal.modelAct.CG_HF_LJCZ(), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.update, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.update)
    }, e.prototype.update = function () {
        var t = this.voAct,
            e = CFG_Act.LIB_ActHF_LJCZ,
            i = (GameGlobal.modelAct, []);
        for (var o in e) {
            var n = e[o];
            n.id / 100 >> 0 == t.index && i.push(n)
        }
        i.sort(this.sortF), this.fillList(i)
    }, e.prototype.sortF = function (t, i) {
        return e.getSortS(t) - e.getSortS(i)
    }, e.getSortS = function (t) {
        var e = GameGlobal.modelAct,
            i = e.HFLJCZServData[t.id];
        return 2 == i ? 0 + t.id : 3 == i ? 2e5 + t.id : 1e5 + t.id
    }, e.prototype.fillList = function (t) {
        var e = this.listDataAC;
        e.removeAll(), e.replaceAll(t)
    }, e
}(BaseEUIView);
__reflect(VHeFuLJCZ.prototype, "VHeFuLJCZ");
var VHeFuLJCZItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.selected = !1, e.gridArr = [], e.skinName = "ComActHFPageItem", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.update()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.update = function () {
        var t = this,
            e = t._data;
        t.lb.text = Lang.reTxt("今日累计充值{0}元宝", e.czed), ConfigHelp.makeStrGrids(e.jl, t.gridArr, 30, 40, t, !0, 10, .8);
        var i = GameGlobal.modelAct.HFLJCZServData[e.id];
        t.btn.visible = t.imgGet.visible = !1, 2 == i ? (t.btn.visible = !0, t.btn.setNoticeVis(!0), t.btn.label = "领取奖励") : 3 == i ? t.imgGet.visible = !0 : (t.btn.visible = !0, t.btn.setNoticeVis(!1), t.btn.label = "前往")
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelAct,
            e = t.HFLJCZServData[this._data.id];
        2 == e ? t.CG_HF_GETLJCZ(this._data.id) : 3 == e || (GameGlobal.layerMgr.open(UIConst.RECHARGE), GameGlobal.layerMgr.close(UIConst.ACT), GameGlobal.layerMgr.close(UIConst.JCHD))
    }, e
}(eui.Component);
__reflect(VHeFuLJCZItem.prototype, "VHeFuLJCZItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VActHFSign = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.items = [], e.gridArr = [], e.curDay = 1, e.skinName = "ActHFSign", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        for (var t = 1; 7 >= t; t++) {
            var e = this["s" + t];
            e._data = CFG_Act.LIB_ACTHFDL[t], e.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onItemT, this), this.items.push(e)
        }
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btn.label = "领取"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelAct.CG_HF_SIGN(), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.update, this), this.curDay = GameGlobal.modelAct.heFuSignDay, this.update()
    }, e.prototype.onClose = function () {
        GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.update), ConfigHelp.clearGrids(this.gridArr), this.setSel(-1)
    }, e.prototype.update = function () {
        this.curDay || (this.curDay = GameGlobal.modelAct.heFuSignDay, this.setSel(this.curDay));
        for (var t = 1; 7 >= t; t++) {
            var e = this["s" + t];
            e.update()
        }
        this.updateCur()
    }, e.prototype.setSel = function (t) {
        for (var e = 1; 7 >= e; e++) {
            var i = this["s" + e];
            i.selected = t == e
        }
    }, e.prototype.onItemT = function (t) {
        var e = this.items.indexOf(t.currentTarget);
        e >= 0 && (this.curDay = e + 1, this.updateCur(), this.setSel(this.curDay))
    }, e.prototype.updateCur = function () {
        var t = CFG_Act.LIB_ACTHFDL[this.curDay];
        t && (this.lb.text = Lang.reTxt("第{0}天奖励", this.curDay), ConfigHelp.makeStrGrids(t.reward, this.gridArr, 0, 0, this.gridGrp));
        var e = GameGlobal.modelAct.heFuSignData[this.curDay];
        1 == e ? (this.btn.enabled = !0, this.btn.label = "领取") : 2 == e ? (this.btn.enabled = !1, this.btn.label = "已领取") : (this.btn.enabled = !1, this.btn.label = "未达条件")
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelAct.heFuSignData[this.curDay];
        1 == t ? GameGlobal.modelAct.CG_HF_SIGN_GETAWARD(this.curDay) : 2 == t ? ViewText.text("已领取,不能重复领取") : ViewText.text("该天未登录,不能领取")
    }, e
}(BaseEUIView);
__reflect(VActHFSign.prototype, "VActHFSign");
var VActHFSignItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.skinName = "ActHFSignItem", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {}, e.prototype.update = function () {
        IconUtil.setIconSrc(this.imgDay, "hfSignD" + this._data.day + "_png");
        var t = GameGlobal.modelAct,
            e = t.heFuSignData[this._data.day];
        1 == e ? (this.imgSign.visible = !1, this.imgRed.visible = !0) : 2 == e ? (this.imgSign.visible = !0, this.imgRed.visible = !1) : (this.imgSign.visible = !1, this.imgRed.visible = !1)
    }, Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel != t && (this._sel = t, t ? this.filters = Color.getRedFilters() : this.filters = null)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onBtnT = function () {
        var t = GameGlobal.modelAct,
            e = t.heFuSignData[this._data.day];
        e && t.CG_HF_SIGN_GETAWARD(this._data.day)
    }, e.prototype.$removeFromStage = function () {
        IconUtil.setIconSrc(this.imgDay)
    }, e
}(eui.Component);
__reflect(VActHFSignItem.prototype, "VActHFSignItem");
var VHeFuTeHuiLiBao = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ActHFShopSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.list.itemRenderer = VHeFuTeHuiLiBaoItem
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.voAct = e, this.updateList(), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.onUpdate, this), GameGlobal.modelAct.CG_HF_SHOP()
    }, e.prototype.onClose = function () {
        GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.onUpdate)
    }, e.prototype.updateList = function () {
        var t = this.getListArr();
        t.sort(this.sortF), this.fillList(t)
    }, e.prototype.getListArr = function () {
        var t = CFG_Act.LIB_ACTHF_Shop,
            e = [];
        for (var i in t) {
            var o = t[i];
            o.id / 100 >> 0 == this.voAct.index && e.push(o)
        }
        return e
    }, e.prototype.fillList = function (t) {
        DisplayUtil.fillDataAC(this.listDataAC, t, this.scroller)
    }, e.prototype.onUpdate = function () {
        this.updateList()
    }, e.prototype.sortF = function (t, i) {
        return e.getSortS(t) - e.getSortS(i)
    }, e.getSortS = function (t) {
        var e = GameGlobal.modelAct,
            i = e.hfXianGouSerData[t.id];
        return i ? 2e5 + t.id : t.id
    }, e
}(BaseEUIView);
__reflect(VHeFuTeHuiLiBao.prototype, "VHeFuTeHuiLiBao");
var VHeFuTeHuiLiBaoItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ActHFShopItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBuyT, this), this.grid.enableTip()
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            var e = GameGlobal.modelAct;
            this._data = t;
            var i = Util.parseIntStr(t.tjxs),
                o = this.grid._data ? this.grid._data : VoItem.create();
            o.count = i[2], o.init(i[1]), this.grid.setData(o), this.lbDiscount.text = t.zk + "折", this.lbName.text = o.name;
            var n = Util.parseIntStr(t.xj),
                a = Util.parseIntStr(t.yj);
            this.lbYJ.text = "原价:" + a[2], this.lbXJ.text = "现价:" + n[2];
            var s = 32 == n[0] ? "MainScreen_json.byl" : "MainScreen_json.bm_yb";
            this.imgYJ.source = s, this.imgXJ.source = s;
            var r = e.hfXianGouSerData[t.id] ? e.hfXianGouSerData[t.id] : 0;
            this.lbNum.text = r + "/" + t.xg, this.btnBuy.enabled = r < t.xg
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onBuyT = function () {
        var t = GameGlobal.modelAct,
            e = t.hfXianGouSerData[this._data.id] ? t.hfXianGouSerData[this._data.id] : 0,
            i = this._data;
        if (e < this.data.xg) {
            var o = Util.parseIntStr(this._data.xj);
            ViewAlert.show(Lang.reTxt("是否花费{0}{1}购买{2}个{3}?", o[2], CFG_ATTR.LIB[o[0]].n, this.grid._data.count, this.grid._data.name), function () {
                ConfigHelp.checkEnough1(o, !0) && GameGlobal.modelAct.CG_HF_SHOP_BUY(i.id)
            })
        } else ViewText.text("购买次数已满")
    }, e
}(eui.Component);
__reflect(VHeFuTeHuiLiBaoItem.prototype, "VHeFuTeHuiLiBaoItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var ActivityCtrl = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.registUI = function () {
        var t = GameGlobal.layerMgr;
        t.reg(UIBuyOne.BUY_ONE_GIVE_ONE_VIEW, BuyOneGiveOneView, t.UI_MainMiddle, 1), t.regView(ActivityView, t.UI_MainMiddle, 1), t.regView(SpringExtraAwardView, t.UI_MainMiddle, 1), t.regView(SpringHurtRankView, t.UI_MainMiddle, 1), t.regView(SpringActivityView, t.UI_MainMiddle, 1), t.regView(SpringActivityBossView, t.UI_MainMiddle, 1)
    }, e.prototype.registProxys = function () {
        var t = GameGlobal.socketMgr;
        this.registSingleProxy(BuyOneProxy, t), this.registSingleProxy(PlayDiceProxy, t), this.registSingleProxy(TreasureHouseProxy, t), this.registSingleProxy(ActivityBossProxy, t), this.registSingleProxy(SpringEmissaryProxy, t), this.registSingleProxy(SpringConsumeProxy, t), this.registSingleProxy(SpringSignProxy, t)
    }, e
}(UIAndProxyBaseCtr);
__reflect(ActivityCtrl.prototype, "ActivityCtrl");
var GuiFingerView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "GuiFingerSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {}, e
}(eui.Component);
__reflect(GuiFingerView.prototype, "GuiFingerView");
var SpringActivityBossView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Shuang11Skin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this.base;
        t.btnReturn.visible = !1, this.btnWenhao.visible = !1;
        var e = GameGlobal.layerMgr;
        this.addCloseListen(t.btnClose).addCloseListen(t.btnReturn), t.createTabGroup().createPageGrp(), e.regView(SpringEmissaryView, t.pageGrp), t.addTabByRef("魔王来袭", 0, SpringEmissaryView), t.removeTabByIdx(0)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.openView(SpringEmissaryView)
    }, e.prototype.onClose = function () {}, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(36);
        if (e) {
            var i = e.getChildByID(71);
            if (!i) return void t.closeHandler();
            var o = i.getRemainSec();
            0 > o && (ViewText.text("活动已结束"), t.closeHandler())
        } else t.closeHandler()
    }, e.prototype.onSize = function () {
        t.prototype.onSize.call(this)
    }, e
}(ActivityView);
__reflect(SpringActivityBossView.prototype, "SpringActivityBossView");
var SpringActivityView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._isShowEff = !1, e.redMap = {
            0: !0,
            1: !0,
            2: !0,
            3: !0,
            4: !0
        }, e.skinName = "SpringFestivalSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = GameGlobal.layerMgr;
        t.regView(SpringSignView, t.UI_MainMiddle, 1), t.regView(View_hongYunPage, t.UI_MainMiddle, 1), t.regView(VS11khPnl, t.UI_MainMiddle, 1), t.regView(ViewMidFestLB, t.UI_MainMiddle, 1), t.regView(SpringActivityBossView, t.UI_MainMiddle, 1);
        for (var e = 0; 4 >= e; e++) {
            var i = this["red" + e];
            i.visible = !0;
            var o = this["btn" + e];
            DisplayUtil.popBtnStyle(o), o.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
        }
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), DisplayUtil.popBtnStyle(this.btnClose), this.addCloseListen(this.btnClose).addCloseListen(this.rect);
        var n = Config.getConfig(canshu_143).get(51).qd;
        this.lbActivityTime.text = "活动时间：" + n, AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_BA ? this.btn.visible = !0 : this.btn.visible = !1
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btn:
                try {
                    AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_BA && (window.location.href = "https://mobile.qzone.qq.com/l?g=5207")
                } catch (t) {}
                break;
            case this.btn0:
                CFG_COMMOND.isOpen(CFG_COMMOND.SPRING_SIGH, !0) && (this.openView(SpringSignView), this.redMap[0] = !1, this.red0.visible = !1);
                break;
            case this.btn1:
                CFG_COMMOND.isOpen(UIConst.HYDT, !0) && (this.openView(View_hongYunPage), this.redMap[1] = !1, this.red1.visible = !1);
                break;
            case this.btn2:
                CFG_COMMOND.isOpen(UIConst.S11KH, !0) && (this.openView(VS11khPnl), this.redMap[2] = !1, this.red2.visible = !1);
                break;
            case this.btn3:
                CFG_COMMOND.isOpen(UIConst.MIDFESTLB, !0) && (this.openView(ViewMidFestLB), this.redMap[3] = !1, this.red3.visible = !1);
                break;
            case this.btn4:
                CFG_COMMOND.isOpen(CFG_COMMOND.SPRING_EMISSARY, !0) && (this.openView(SpringActivityBossView), this.redMap[4] = !1, this.red4.visible = !1)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.isShowEff(!0), GameGlobal.tick.addInterv(this.tick, 1e3, this)
    }, e.prototype.onClose = function () {
        this.isShowEff(!1), GameGlobal.tick.removeInterv(this.tick, this)
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(36);
        e || t.closeHandler()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.isShowEff = function (t) {
        this._isShowEff != t && (this._isShowEff = t, this.updateEff())
    }, e.prototype.updateEff = function () {
        var t = this;
        t._isShowEff ? t.$stage && !t._eff && (t._eff = EffectMgr.addEff("uieff/1002", t.btn, 70, 45, 600)) : t._eff && (EffectMgr.getIns().removeEff(t._eff), t._eff = null)
    }, e
}(BaseEUIView);
__reflect(SpringActivityView.prototype, "SpringActivityView");
var UIActivity = function () {
    function t() {}
    return t.LOGIC_LAYER = "UI_ACTIVITY_LOGIN_LAYER", t
}();
__reflect(UIActivity.prototype, "UIActivity");
var EBuyOneProto;
! function (t) {
    t[t.OPEN = 4071] = "OPEN", t[t.OPEN_GIFT_BOX = 4073] = "OPEN_GIFT_BOX", t[t.BUY_GIFT = 4075] = "BUY_GIFT", t[t.CHOOSE_GIRLFRIEND = 4077] = "CHOOSE_GIRLFRIEND", t[t.GET_AWARD = 4079] = "GET_AWARD", t[t.REFRESH_TIME = 4081] = "REFRESH_TIME"
}(EBuyOneProto || (EBuyOneProto = {}));
var EGiftRecordType;
! function (t) {
    t[t.NONE = -1] = "NONE", t[t.GIVE = 1] = "GIVE", t[t.RECIEVE = 2] = "RECIEVE"
}(EGiftRecordType || (EGiftRecordType = {}));
var EBuyGoodsResultType;
! function (t) {
    t[t.NONE = -1] = "NONE", t[t.SUCCESS = 1] = "SUCCESS", t[t.YB_NOT_ENOUGH = 2] = "YB_NOT_ENOUGH", t[t.BAG_FULL = 3] = "BAG_FULL", t[t.NOT_CHOOSE_FRIEND = 4] = "NOT_CHOOSE_FRIEND", t[t.BEYOND_BUY_TIMES = 5] = "BEYOND_BUY_TIMES", t[t.MAX_GIVE = 6] = "MAX_GIVE"
}(EBuyGoodsResultType || (EBuyGoodsResultType = {}));
var ERefreshRet;
! function (t) {
    t[t.NONE = -1] = "NONE", t[t.SUCCESS = 1] = "SUCCESS", t[t.NOT_ENOUGH_YB = 2] = "NOT_ENOUGH_YB"
}(ERefreshRet || (ERefreshRet = {}));
var BuyOneEvent = function () {
    function t() {}
    return t.pre = "BUY_ONE_EVENT_", t.MSG_UPDATE_AWARD = t.pre + "MSG_UPDATE_AWARD", t.MSG_UPDATE_RECORD = t.pre + "MSG_UPDATE_RECORD", t.MSG_UPDATE_SHOP = t.pre + "MSG_UPDATE_SHOP", t.MSG_UPDATE_CHOOSE = t.pre + "MSG_UPDATE_CHOOSE", t.ON_RANK_CHANGE = t.pre + "ON_RANK_CHANGE", t.ON_BUY_RESULT = t.pre + "ON_BUY_RESULT", t.ON_REFRESH_RESULT = t.pre + "ON_REFRESH_RESULT", t.ON_LIST_ITME_TAP = t.pre + "ON_LIST_ITME_TAP", t.ON_PERIOD_CHANGE = t.pre + "ON_PERIOD_CHANGE", t
}();
__reflect(BuyOneEvent.prototype, "BuyOneEvent");
var BuyOneFriendItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiFriendItemSkin", e
    }
    return __extends(e, t), e.prototype.dataChanged = function () {
        var t = this.data;
        this.lbname.textColor = 1 == t.lineSt ? 5869579 : 6835267, this.lbname.text = t.name, this.lbnum.text = t.qmd.toString()
    }, e
}(eui.ItemRenderer);
__reflect(BuyOneFriendItem.prototype, "BuyOneFriendItem");
var numberToBlendMode = egret.sys.numberToBlendMode,
    BuyOneGiveOneView = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.skinName = "buyOneGiveOneSkin", e
        }
        return __extends(e, t), e.prototype.initView = function () {
            var t = this.base;
            this.addCloseListen(t.btnClose).addCloseListen(t.btnReturn), this.lb.textFlow = HtmlUtil.parse("每购买一个礼物,您和您所选择的好友都可获得一份,\n还有" + HtmlUtil.colorSize("鸭鸭卡", "#ba3202", 24) + "相送哦！");
            var e = GameGlobal.layerMgr;
            e.reg(UIBuyOne.BUY_ONE_GIVE_ONE_GIFT, BuyOneGiftBoxView, e.UI_Message), e.reg(UIBuyOne.BUY_ONE_GIVE_ONE_AWARD, BuyOneAwardView, e.UI_Message), this.shopdata = new eui.ArrayCollection, this.shoplist.itemRenderer = BuyOneGoodsItem, this.shoplist.dataProvider = this.shopdata, this.phbdata = new eui.ArrayCollection, this.phblist.itemRenderer = BuyOneRankItem, this.phblist.dataProvider = this.phbdata, this.frienddata = new eui.ArrayCollection, this.friendlist.itemRenderer = BuyOneFriendItem, this.friendlist.dataProvider = this.frienddata, DisplayUtil.popBtnStyle(this.btnSelFriend), DisplayUtil.popBtnStyle(this.btnGetAward), DisplayUtil.popBtnStyle(this.btnGift), DisplayUtil.popBtnStyle(this.btnRefresh), this.lbckjl.textFlow = HtmlUtil.underLine("奖励"), this.btnGetAward.addEventListener(egret.TouchEvent.TOUCH_TAP, this.getawardT, this), this.btnSelFriend.addEventListener(egret.TouchEvent.TOUCH_TAP, this.selfriendT, this), this.btnGift.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGift, this), this.lbckjl.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAward, this), this.btnRefresh.addEventListener(egret.TouchEvent.TOUCH_TAP, this.refreshT, this), this.friendlist.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.chooseFriend, this), this.btn_rule.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onRule, this)
        }, e.prototype.onRule = function () {
            ViewWenHao.show(CFG_COMMOND.LIBWFSM[EPlayRuleType.BUY_ONE_GIVE_ONE].detail, 24)
        }, e.prototype.refreshT = function () {
            var t = this.getProxy(BuyOneProxy);
            t.refreshGoods()
        }, e.prototype.chooseFriend = function (t) {
            var e = t.item;
            if (e) {
                this.selFri = e, this.lbname.text = e.name;
                var i = this.getProxy(BuyOneProxy);
                i.chooseFriend(e.id)
            }
        }, e.prototype.onAward = function () {
            GameGlobal.layerMgr.open(UIBuyOne.BUY_ONE_GIVE_ONE_AWARD)
        }, e.prototype.onGift = function () {
            GameGlobal.layerMgr.open(UIBuyOne.BUY_ONE_GIVE_ONE_GIFT)
        }, e.prototype.getawardT = function () {
            var t = this.getModel(BuyOneModel),
                e = t.curPeriod,
                i = Config.getConfig(mysydj_148).get(e),
                o = Util.parseIntStr(i.consume),
                n = o[2],
                a = o[1],
                s = GameGlobal.modelBag.getItemCount(a);
            if (t.isChange) ViewText.text("已兑换,请勿重复兑换");
            else if (s >= n) {
                var r = this.getProxy(BuyOneProxy);
                r.getAward()
            } else ViewText.text("鸭鸭卡不足，无法兑换！")
        }, e.prototype.selfriendT = function () {
            this.friGrp.visible = !this.friGrp.visible, this.friGrp.visible && GameGlobal.modelFriend.CG_FriendData(1)
        }, e.prototype.onOpen = function (e) {
            t.prototype.onOpen.call(this, e), this.addEvent(), IconUtil.setIconSrc(this.titlebg, "nationalDay_title_BG_png"), IconUtil.setIconSrc(this.bg1, "nation_jz_BG_png"), this.friGrp.visible = !1, this.lbxh.text = Util.parseIntStr(Config.getConfig(canshu_143).get(26).key)[2];
            var i = this.getProxy(BuyOneProxy);
            i.openBuyOneGiveOneView(), this.update()
        }, e.prototype.onClose = function () {
            this.removeEvent(), IconUtil.setIconSrc(this.titlebg, null), IconUtil.setIconSrc(this.bg1)
        }, e.prototype.update = function () {
            this.upShop(), this.upPHB()
        }, e.prototype.upAward = function () {
            var t = this.getModel(BuyOneModel),
                e = t.curPeriod,
                i = CFG_BuyOneGiveOne.BigAwardLib[e],
                o = Util.parseIntStr(i.consume),
                n = o[1],
                a = o[2],
                s = GameGlobal.modelBag.getItemCount(n);
            this.lbnum.textFlow = HtmlUtil.parse(s + HtmlUtil.color("/" + a, "#ea2b2b")), this.btnGetAward.label = t.isChange ? "已兑换" : "兑换", this.btnGetAward.enabled = !t.isChange, this.btnGetAward.setNoticeVis(s >= a && !t.isChange), o = Util.parseIntStr(i.reward), n = o[1], this.img_prop.source = CFG_Item.LIB[n].icon + "_png";
            var r = GameGlobal.modelAct.actData.getChildByID(32);
            if (r) {
                var l = r.getBtn();
                l.setNoticVis(s >= a && !t.isChange)
            }
        }, e.prototype.upShop = function () {
            var t = this.getModel(BuyOneModel);
            this.shopdata.replaceAll(t.goodsDataArr)
        }, e.prototype.upPHB = function () {
            var t = this.getModel(BuyOneModel);
            this.phbdata.replaceAll(t.rankDataArr);
            var e = 0 == t.myRank ? "未上榜" : t.myRank;
            this.lbrank.text = "我的排名：" + e
        }, e.prototype.upFriend = function () {
            for (var t = [], e = GameGlobal.modelFriend.friendList, i = 0; i < e.length; i++) {
                var o = e[i];
                1 == o.friendSt && t.push(o)
            }
            this.lbtipfri.visible = 0 == t.length, DisplayUtil.fillDataAC(this.frienddata, t)
        }, e.prototype.giveFriendResult = function () {
            var t = this.getModel(BuyOneModel).isCanGive;
            t ? this.friGrp.visible = !1 : (ViewText.text("该好友受赠次数已达最高值，今日无法赠送，请明日再来！"), this.friendlist.selectedIndex = -1, this.lbname.text = "")
        }, e.prototype.tickTime = function () {
            var t = GameGlobal.modelAct.actData.getChildByID(25);
            if (t) {
                var e = t.getChildByID(61);
                if (e) {
                    var i = e.getRemainSec();
                    if (i > 0) return
                }
            }
        }, e.prototype.onRefreshGoods = function () {
            var t = this.getModel(BuyOneModel),
                e = t.refressResult;
            e == ERefreshRet.NOT_ENOUGH_YB && ViewAlert.show("元宝不足，是否前往充值？", function () {
                GameGlobal.layerMgr.open(UIConst.RECHARGE), GameGlobal.layerMgr.close(UIBuyOne.BUY_ONE_GIVE_ONE_VIEW)
            })
        }, e.prototype.onBuyGoods = function (t) {
            var e = t.data;
            if (!this.selFri) return void ViewText.text("请先选择赠送对象，再进行购买！");
            var i = Util.parseIntStr(e.cfg.xh);
            if (32 == i[0] && GameGlobal.modelRole.voMine.bYuanbao < i[2]) return void ViewText.text("绑定元宝不足");
            var o = this.getProxy(BuyOneProxy);
            o.buyGift(this.selFri.id, e.id)
        }, e.prototype.onBuyGoodsResult = function () {
            var t = 0,
                e = this.getModel(BuyOneModel),
                i = e.buyGoodsRet,
                o = e.goodsid;
            if (i == EBuyGoodsResultType.SUCCESS) {
                var n = e.getGoodsByid(o);
                n && (n.buyNum++, t = n.cfg.qmd, ViewText.text("增加好感度" + t)), this.update()
            } else if (i == EBuyGoodsResultType.YB_NOT_ENOUGH) ViewAlert.show("元宝不足，是否前往充值？", function () {
                GameGlobal.layerMgr.open(UIConst.RECHARGE)
            });
            else {
                var a = ["", "", "", "未选择好友", "选择的好友没有互相关注", "购买数量超过限购", "该好友受赠次数已达最大值，请明日再来"];
                ViewText.text(a[i])
            }
        }, e.prototype.onSize = function () {
            this.customPanelResize()
        }, e.prototype.addEvent = function () {
            TimerManager.doTimer(1e3, -1, this.tickTime, this), EventCenter.addMsg(BuyOneEvent.MSG_UPDATE_SHOP, this.upShop, this), EventCenter.addMsg(BuyOneEvent.ON_RANK_CHANGE, this.upPHB, this), GameGlobal.modelFriend.on(ModelFriend.MSG_FLIST, this.upFriend, this), EventCenter.addMsg(BuyOneEvent.MSG_UPDATE_AWARD, this.update, this), EventCenter.addMsg(BuyOneEvent.MSG_UPDATE_CHOOSE, this.giveFriendResult, this), EventCenter.addMsg(BuyOneEvent.ON_REFRESH_RESULT, this.onRefreshGoods, this), EventCenter.addMsg(BuyOneEvent.ON_LIST_ITME_TAP, this.onBuyGoods, this), EventCenter.addMsg(BuyOneEvent.ON_BUY_RESULT, this.onBuyGoodsResult, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.upAward, this), EventCenter.addMsg(BuyOneEvent.ON_PERIOD_CHANGE, this.upAward, this)
        }, e.prototype.removeEvent = function () {
            TimerManager.remove(this.tickTime, this), EventCenter.removeMsg(BuyOneEvent.MSG_UPDATE_SHOP, this.upShop, this), EventCenter.removeMsg(BuyOneEvent.ON_RANK_CHANGE, this.upPHB, this), GameGlobal.modelFriend.off(ModelFriend.MSG_FLIST, this.upFriend, this), EventCenter.removeMsg(BuyOneEvent.MSG_UPDATE_AWARD, this.update, this), EventCenter.removeMsg(BuyOneEvent.MSG_UPDATE_CHOOSE, this.giveFriendResult, this), EventCenter.removeMsg(BuyOneEvent.ON_REFRESH_RESULT, this.onRefreshGoods, this), EventCenter.removeMsg(BuyOneEvent.ON_LIST_ITME_TAP, this.onBuyGoods, this), EventCenter.removeMsg(BuyOneEvent.ON_BUY_RESULT, this.onBuyGoodsResult, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.upAward, this), EventCenter.removeMsg(BuyOneEvent.ON_PERIOD_CHANGE, this.upAward, this)
        }, e
    }(BaseEUIView);
__reflect(BuyOneGiveOneView.prototype, "BuyOneGiveOneView");
var UIBuyOne = function () {
    function t() {}
    return t.pre = "UI_BUY_ONE_GIVE_ONE", t.BUY_ONE_GIVE_ONE_VIEW = "BUY_ONE_GIVE_ONE_VIEW", t.BUY_ONE_GIVE_ONE_GIFT = "BUY_ONE_GIVE_ONE_GIFT", t.BUY_ONE_GIVE_ONE_AWARD = "BUY_ONE_GIVE_ONE_AWARD", t
}();
__reflect(UIBuyOne.prototype, "UIBuyOne");
var BuyOneAwardData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.index = 0
    }, t
}();
__reflect(BuyOneAwardData.prototype, "BuyOneAwardData");
var BuyOneAwardItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "ChengZhuZWJLItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.btnGet.visible = !1, this.scrol.width = 416
    }, e.prototype.dataChanged = function () {
        var t = this.data;
        this.bg.source = t.index % 2 == 0 ? "CM2_json.bg1" : "CM2_json.bg2", this.imgTitle.source = "qxyl_json.no" + t.cfg.mc, ConfigHelp.makeStrGrids(t.cfg.pmjl, this.grids, 0, 0, this.group, !0)
    }, e
}(eui.ItemRenderer);
__reflect(BuyOneAwardItem.prototype, "BuyOneAwardItem");
var BuyOneAwardView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiPHBjlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.awardCollection = new eui.ArrayCollection, this.list.itemRenderer = BuyOneAwardItem, this.list.dataProvider = this.awardCollection, this.base.title = "加油榜排行奖励", this.txt1.text = "1.买一送伊获得的鸭鸭卡数量为加油榜的加油积分（其他活动的鸭鸭卡数量不计入在内）\n2.活动结束后，加油榜前10名奖励将通过邮件发送", this._awardDataArr = [], this.initAwardData()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.update = function () {
        this.awardCollection.replaceAll(this._awardDataArr)
    }, e.prototype.initAwardData = function () {
        var t = 0,
            e = CFG_NationalDay.LIB1,
            i = this.getModel(BuyOneModel).curPeriod;
        for (var o in e) {
            var n = e[o];
            if (n.qs == i) {
                var a = new BuyOneAwardData;
                a.cfg = n, a.index = t, this._awardDataArr.push(a), t++
            }
        }
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(BuyOneAwardView.prototype, "BuyOneAwardView");
var BuyOneGoodsData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.id = 0, this.buyNum = 0
    }, t
}();
__reflect(BuyOneGoodsData.prototype, "BuyOneGoodsData");
var BuyOneGoodsItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiShopItemSkin", e
    }
    return __extends(e, t), e.prototype.dataChanged = function () {
        var t = this.data,
            e = ConfigHelp.makeVoList(t.cfg.sp)[0];
        this.grid.data = e, this.grid.bg.source = "";
        var i = Util.parseIntStr(t.cfg.hrksl)[2];
        this.lbitemnum.text = "x" + i, this.lbxgnum.textFlow = HtmlUtil.parse(t.buyNum.toString() + "/" + t.cfg.xzgm);
        var o = Util.parseIntStr(t.cfg.xh),
            n = 32 == o[0] ? "MainScreen_json.byl" : "MainScreen_json.bm_yb";
        this.imgxh.source = n, this.lbxhnum.text = o[2].toString()
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btn.label = " ", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.grid.enableTip(), this.icon.source = IconUtil.getIconUrlById(1794)
    }, e.prototype.onT = function () {
        EventCenter.sendMsg(BuyOneEvent.ON_LIST_ITME_TAP, this.data)
    }, e
}(eui.ItemRenderer);
__reflect(BuyOneGoodsItem.prototype, "BuyOneGoodsItem");
var BuyOneModel = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.init(), e
    }
    return __extends(e, t), e.prototype.init = function () {
        this._goodsDataArr = [], this._rankDataArr = [], this.isChange = !1, this.myRank = 0, this._giftRecordDataArr = [], this.buyGoodsRet = EBuyGoodsResultType.NONE, this.goodsid = 0, this.isCanGive = !1, this.reciveGiftState = EGetGiftStatus.NONE, this.refressResult = ERefreshRet.NONE, this._curPeriod = 1
    }, e.prototype.initGoodsData = function (t, e, i) {
        var o = this._goodsDataArr[t];
        o || (o = new BuyOneGoodsData, this._goodsDataArr[t] = o), o.id = e, o.buyNum = i, o.cfg = CFG_BuyOneGiveOne.LIB[e]
    }, e.prototype.updateGoodsData = function (t) {
        this._goodsDataArr.length > t && this._goodsDataArr.splice(0, t), EventCenter.sendMsg(BuyOneEvent.MSG_UPDATE_SHOP)
    }, e.prototype.getGoodsByid = function (t) {
        for (var e, i = this._goodsDataArr.length, o = 0; i > o; o++)
            if (this._goodsDataArr[o].id == t) {
                e = this._goodsDataArr[o];
                break
            } return e
    }, e.prototype.initRankData = function (t, e, i) {
        var o = this._rankDataArr[t];
        o || (o = new BuyOneRankData, this._rankDataArr[t] = o), o.name = e, o.cardNum = i
    }, e.prototype.updateRankDataArr = function (t) {
        this._rankDataArr.length > t && this._rankDataArr.splice(0, t), EventCenter.sendMsg(BuyOneEvent.ON_RANK_CHANGE)
    }, e.prototype.initGiftRecardArr = function (t, e, i, o, n, a) {
        var s = this._giftRecordDataArr[t];
        s || (s = new GiftRecordData, this._giftRecordDataArr[t] = s), s.type = e, s.name = i, s.shopid = o, s.shopnum = n, s.date = a
    }, e.prototype.updateGiftRecardArr = function (t) {
        this._giftRecordDataArr.length > t && this._giftRecordDataArr.splice(0, t), EventCenter.sendMsg(BuyOneEvent.MSG_UPDATE_RECORD)
    }, e.prototype.updateBuyGoods = function (t, e) {
        this.buyGoodsRet = t, this.goodsid = e, EventCenter.sendMsg(BuyOneEvent.ON_BUY_RESULT)
    }, e.prototype.updateGiveFriendStatus = function (t) {
        this.isCanGive = t, EventCenter.sendMsg(BuyOneEvent.MSG_UPDATE_CHOOSE)
    }, e.prototype.onRecieveGiftStatus = function (t) {
        this.reciveGiftState = t, EventCenter.sendMsg(BuyOneEvent.MSG_UPDATE_AWARD)
    }, e.prototype.onRefresh = function (t) {
        this.refressResult = t, EventCenter.sendMsg(BuyOneEvent.ON_REFRESH_RESULT)
    }, Object.defineProperty(e.prototype, "goodsDataArr", {
        get: function () {
            return this._goodsDataArr
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "rankDataArr", {
        get: function () {
            return this._rankDataArr
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "giftRecordDataArr", {
        get: function () {
            return this._giftRecordDataArr
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "curPeriod", {
        get: function () {
            return this._curPeriod
        },
        set: function (t) {
            this._curPeriod = t, EventCenter.sendMsg(BuyOneEvent.ON_PERIOD_CHANGE)
        },
        enumerable: !0,
        configurable: !0
    }), e.redMap = {
        0: !0,
        1: !0,
        2: !0,
        3: !0,
        4: !0,
        5: !0
    }, e
}(GameCtrlBase);
__reflect(BuyOneModel.prototype, "BuyOneModel");
var BuyOneProxy = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(4070, this.GC4070, this), e.regHand(4072, this.GC4072, this), e.regHand(4074, this.GC4074, this), e.regHand(4076, this.GC4076, this), e.regHand(4078, this.GC4078, this), e.regHand(4080, this.GC4080, this), e.regHand(4082, this.GC4082, this)
    }, e.prototype.openBuyOneGiveOneView = function () {
        this.sendMessage(EBuyOneProto.OPEN)
    }, e.prototype.openGiftBox = function () {
        this.sendMessage(EBuyOneProto.OPEN_GIFT_BOX)
    }, e.prototype.buyGift = function (t, e) {
        var i = this.getBytes();
        i.writeLong(t), i.writeByte(e), this.sendMessage(EBuyOneProto.BUY_GIFT, i)
    }, e.prototype.chooseFriend = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendMessage(EBuyOneProto.CHOOSE_GIRLFRIEND, e)
    }, e.prototype.getAward = function () {
        var t = this.getBytes();
        this.sendMessage(EBuyOneProto.GET_AWARD, t)
    }, e.prototype.refreshGoods = function () {
        var t = this.getBytes();
        this.sendMessage(EBuyOneProto.REFRESH_TIME, t)
    }, e.prototype.GC4070 = function (t, e) {
        for (var i = e.readShort(), o = t.getModel(BuyOneModel), n = 0; i > n; n++) {
            var a = e.readByte(),
                s = e.readByte();
            o.initGoodsData(n, a, s)
        }
        o.updateGoodsData(i)
    }, e.prototype.GC4072 = function (t, e) {
        var i = t.getModel(BuyOneModel),
            o = e.readByte();
        i.isChange = 1 == o;
        for (var n = e.readShort(), a = 0; n > a; a++) {
            var s = e.readUTF(),
                r = e.readShort();
            i.initRankData(a, s, r)
        }
        i.myRank = e.readInt(), i.curPeriod = e.readByte(), i.updateRankDataArr(n)
    }, e.prototype.GC4074 = function (t, e) {
        for (var i = e.readShort(), o = t.getModel(BuyOneModel), n = 0; i > n; n++) {
            var a = e.readByte(),
                s = e.readUTF(),
                r = e.readShort(),
                l = e.readShort(),
                h = e.readInt();
            o.initGiftRecardArr(n, a, s, r, l, h)
        }
        o.updateGiftRecardArr(i)
    }, e.prototype.GC4076 = function (t, e) {
        var i = e.readByte(),
            o = e.readByte();
        t.getModel(BuyOneModel).updateBuyGoods(i, o)
    }, e.prototype.GC4078 = function (t, e) {
        var i = e.readByte();
        t.getModel(BuyOneModel).updateGiveFriendStatus(1 == i)
    }, e.prototype.GC4080 = function (t, e) {
        var i = e.readByte();
        i == EGetGiftStatus.SUCCESS && t.openBuyOneGiveOneView(), t.getModel(BuyOneModel).onRecieveGiftStatus(i)
    }, e.prototype.GC4082 = function (t, e) {
        var i = e.readByte();
        t.getModel(BuyOneModel).onRefresh(i)
    }, e.prototype.sendMessage = function (t, e) {
        var i = e || this.getBytes();
        this.sendSocket(t, i)
    }, e
}(BaseModel);
__reflect(BuyOneProxy.prototype, "BuyOneProxy");
var BuyOneRankData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.name = "", this.cardNum = 0
    }, t
}();
__reflect(BuyOneRankData.prototype, "BuyOneRankData");
var BuyOneRankItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiPHBItemSkin", e
    }
    return __extends(e, t), e.prototype.dataChanged = function () {
        var t = this.data;
        this.lbname.text = t.name, this.lbnum.text = "" + t.cardNum
    }, e
}(eui.ItemRenderer);
__reflect(BuyOneRankItem.prototype, "BuyOneRankItem");
var BuyOneGiftBoxView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "buyOneGiveOneGiftSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.data = new eui.ArrayCollection, this.list.itemRenderer = GiftBoxItem, this.list.dataProvider = this.data
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addEvent(), IconUtil.setIconSrc(this.bg, "qixiyouni_gift_BG_png");
        var i = this.getProxy(BuyOneProxy);
        i.openGiftBox()
    }, e.prototype.onClose = function () {
        this.removeEvent(), IconUtil.setIconSrc(this.bg, null)
    }, e.prototype.update = function () {
        this.data.replaceAll(this.getModel(BuyOneModel).giftRecordDataArr)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.addEvent = function () {
        EventCenter.addMsg(BuyOneEvent.MSG_UPDATE_RECORD, this.update, this)
    }, e.prototype.removeEvent = function () {
        EventCenter.removeMsg(BuyOneEvent.MSG_UPDATE_AWARD, this.update, this)
    }, e
}(BaseEUIView);
__reflect(BuyOneGiftBoxView.prototype, "BuyOneGiftBoxView");
var GiftBoxItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiGiftItemSkin", e
    }
    return __extends(e, t), e.prototype.dataChanged = function () {
        var t = this.data;
        this.lbtime.text = DateUtil.getYMDHM(t.date);
        var e = CFG_Item.LIB[t.shopid],
            i = e ? e.name : "";
        if (1 == t.type) var o = HtmlUtil.parse("赠送给" + HtmlUtil.color(t.name, "#ab67cc") + HtmlUtil.color(i + "*" + t.shopnum, "#a83503"));
        else o = HtmlUtil.parse("收到" + HtmlUtil.color(t.name, "#ab67cc") + "赠送的" + HtmlUtil.color(i + "*" + t.shopnum, "#a83503"));
        this.lbdes.textFlow = o
    }, e
}(eui.ItemRenderer);
__reflect(GiftBoxItem.prototype, "GiftBoxItem");
var GiftRecordData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.type = EGiftRecordType.NONE, this.name = "", this.shopid = 0, this.shopnum = 0, this.date = 0
    }, t
}();
__reflect(GiftRecordData.prototype, "GiftRecordData");
var SpringConsumeItem = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        set: function (t) {
            this.vo = t, this.txt.textFlow = [{
                text: "累计消费",
                style: {
                    textColor: 16777215,
                    stroke: 2,
                    strokeColor: 15497008
                }
            }, {
                text: t.yb,
                style: {
                    textColor: 172090,
                    stroke: 0
                }
            }, {
                text: "元宝",
                style: {
                    textColor: 16777215,
                    stroke: 2,
                    strokeColor: 15497008
                }
            }], ConfigHelp.makeStrGrids(t.jl, this.grids, 0, 0, this.container, !0), this.setState(t.getState)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onT = function (t) {
        var e = GameCtrlBase.instance.getProxy(SpringConsumeProxy);
        e.getAward(this.vo.id)
    }, e
}(VLJXFItem);
__reflect(SpringConsumeItem.prototype, "SpringConsumeItem");
var SpringConsumeView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._isShowEff = !1, e.skinName = "SpringLJXFSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.data = new eui.ArrayCollection, this.list.itemRenderer = SpringConsumeItem, this.list.dataProvider = this.data, Vo_SpringConsume.init(), DisplayUtil.popBtnStyle(this.btn), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_BA ? this.btn.visible = !1 : this.btn.visible = !1
    }, e.prototype.update = function () {
        var t = this;
        t.lbxfnum.text = this.getModel(SpringConsumeModel).ljxf.toString() + "元宝", DisplayUtil.fillDataAC(this.data, Vo_SpringConsume.List)
    }, e.prototype.onT = function () {
        try {
            AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_BA && (window.location.href = "https://mobile.qzone.qq.com/l?g=5207")
        } catch (t) {}
    }, e.prototype.addMsg = function () {
        EventCenter.addMsg(SpringConsumeEvent.MSG_CONSUME_UPDATE, this.update, this), GameGlobal.tick.addInterv(this.onTimeTick, 1e3, this)
    }, e.prototype.removeMsg = function () {
        EventCenter.removeMsg(SpringConsumeEvent.MSG_CONSUME_UPDATE, this.update, this), GameGlobal.tick.removeInterv(this.onTimeTick)
    }, e.prototype.onOpen = function (t) {
        this.addMsg(), this.isShowEff(!0), this.getProxy(SpringConsumeProxy).openSpringConsumeView()
    }, e.prototype.onClose = function () {
        this.removeMsg(), this.isShowEff(!1)
    }, e.prototype.onTimeTick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(ActivityType.CONSUME_ACT);
        if (e) {
            var i = e.getChildByID(73);
            if (i) {
                var o = i.getRemainSec();
                o >= 0 && (t.lbTime.text = DateUtil.getHMSBySecond2(o))
            }
        }
    }, e.prototype.isShowEff = function (t) {
        this._isShowEff != t && (this._isShowEff = t, this.updateEff())
    }, e.prototype.updateEff = function () {
        var t = this;
        t._isShowEff ? t.$stage && !t._eff && (t._eff = EffectMgr.addEff("uieff/1002", t.btn, 57, 45, 600)) : t._eff && (EffectMgr.getIns().removeEff(t._eff), t._eff = null)
    }, e
}(VLJXF);
__reflect(SpringConsumeView.prototype, "SpringConsumeView");
var Vo_SpringConsume = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.init = function () {
        e.List = [];
        var t = Config.getConfig(Cumulative_120).values;
        t.sort(function (t, e) {
            return t.id - e.id
        });
        for (var i = 0; i < t.length; i++) {
            var o = new e;
            o.id = t[i].id, o.yb = t[i].yb, o.jl = t[i].jl, o.sort = t[i].id, e.List.push(o)
        }
    }, e.update = function (t, i) {
        for (var o = [], n = e.List, a = 0; a < n.length; a++) {
            var s = n[a];
            if (s.id == t) {
                s.getState = i, 2 == i && (o.push(s), e.List.splice(a, 1), e.List = e.List.concat(o));
                break
            }
        }
        e.List.length;
        e.List.sort(function (t, e) {
            var i = [2, 3, 1],
                o = i[t.getState],
                n = i[e.getState];
            return o == n ? t.sort - e.sort : n - o
        })
    }, e.Notice = function () {
        for (var t = e.List, i = 0; i < t.length; i++)
            if (1 == t[i].getState) return !0;
        return !1
    }, e.List = [], e
}(Vo_LJXFItem);
__reflect(Vo_SpringConsume.prototype, "Vo_SpringConsume");
var EspringConsumeProto;
! function (t) {
    t[t.OPEN = 4791] = "OPEN", t[t.ON_CONSUME_INFO = 4792] = "ON_CONSUME_INFO", t[t.GET_AWARD = 4793] = "GET_AWARD", t[t.ON_AWARD = 4794] = "ON_AWARD"
}(EspringConsumeProto || (EspringConsumeProto = {}));
var SpringConsumeEvent = function () {
    function t() {}
    return t.pre = "SPRING_CONSUME_EVENT_", t.MSG_CONSUME_UPDATE = t.pre + "MSG_CONSUME_UPDATE", t
}();
__reflect(SpringConsumeEvent.prototype, "SpringConsumeEvent");
var SpringConsumeModel = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e
}(GameCtrlBase);
__reflect(SpringConsumeModel.prototype, "SpringConsumeModel");
var SpringConsumeProxy = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(EspringConsumeProto.ON_CONSUME_INFO, this.onConsumeInfo, this), e.regHand(EspringConsumeProto.ON_AWARD, this.onAward, this)
    }, e.prototype.onConsumeInfo = function (t, e) {
        var i = t.getModel(SpringConsumeModel);
        i.ljxf = e.readInt();
        var o = e.readShort();
        i.notice = !1;
        for (var n = 0; o > n; n++) {
            var a = e.readByte(),
                s = e.readByte();
            Vo_SpringConsume.update(a, s), 1 == s && (i.notice = !0)
        }
        EventCenter.sendMsg(SpringConsumeEvent.MSG_CONSUME_UPDATE)
    }, e.prototype.onAward = function (t, e) {
        var i = t.getModel(SpringConsumeModel),
            o = e.readByte();
        if (1 == o) {
            var n = e.readByte();
            Vo_SpringConsume.update(n, 2), i.notice = Vo_SpringConsume.Notice(), EventCenter.sendMsg(SpringConsumeEvent.MSG_CONSUME_UPDATE)
        } else 2 == o ? ViewText.text("条件未达") : 3 == o && GameGlobal.modelBag.checkRLTips(0)
    }, e.prototype.openSpringConsumeView = function () {
        var t = this.getBytes();
        this.sendSocket(EspringConsumeProto.OPEN, t)
    }, e.prototype.getAward = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(EspringConsumeProto.GET_AWARD, e)
    }, e
}(BaseModel);
__reflect(SpringConsumeProxy.prototype, "SpringConsumeProxy");
var SpringSignItem = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.onT = function () {
        var t = this.vo;
        Vo_springSign.nowDay, GameCtrlBase.instance.getProxy(SpringSignProxy).getAward(t.id)
    }, e.prototype.bqT = function () {
        this.vo, Vo_springSign.nowDay
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t;
            var e = ConfigHelp.makeVoList(t.cfg.jl)[0];
            7 == t.id ? (e.quality < 5 && (e.quality = 5), this.grid.isShowEff(!0)) : this.grid.isShowEff(!1), this.grid.data = e, this.grid.bg.source = "";
            Vo_springSign.nowDay;
            t.signState == EawardState.IS_GET ? (this.btn.label = "已领取", this.btn.enabled = !1) : t.signState == EawardState.CAN_NOT_GET ? (this.btn.label = "未达成", this.btn.enabled = !1) : t.signState == EawardState.CAN_GET && (this.btn.label = "领取", this.btn.enabled = !0), this.lbday.text = "第" + t.id + "天"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(VShuang11_signItem);
__reflect(SpringSignItem.prototype, "SpringSignItem");
var SpringSignView = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.base.visible = !0, this.base.btnClose.visible = !1, DisplayUtil.popBtnStyle(this.btnAdd), DisplayUtil.popBtnStyle(this.btn), DisplayUtil.popBtnStyle(this.btnClose), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.addT, this), this.addCloseListen(this.btnClose).addCloseListen(this.base.btnReturn), this.btn.label = "前往挑战"
    }, e.prototype.addT = function () {
        var t = CFG_Param.LIB[39].key.split(",")[2],
            e = GameGlobal.modelRole.voMine.yuanbao,
            i = this,
            o = "是否花费" + HtmlUtil.color(t + "元宝", "#d83503") + "购买一次挑战次数？\n剩余可购买次数：" + HtmlUtil.color(Vo_springSign.syBuyNum, "#d83503");
        Vo_springSign.syBuyNum > 0 ? e >= t ? ViewAlert.show(o, function () {
            i.getProxy(SpringSignProxy).buyChallenge()
        }) : ViewAlert.show("元宝不足，是否前往充值?", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        }) : ViewText.text("已无购买次数！")
    }, e.prototype.onT = function () {
        ModelBattle.canEnterBtl() && this.getProxy(SpringSignProxy).challenge()
    }, e.prototype.onOpen = function (t) {
        this.onSize(), Vo_springSign.create(), IconUtil.setIconSrc(this.bg, "weekender_json.titlebg"), this.upCollItems(), EventCenter.addMsg(SpringSignEvent.MSG_SIGN_UPDATE, this.upSignItems, this), this.getProxy(SpringSignProxy).openSignView()
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.bg), EventCenter.removeMsg(SpringSignEvent.MSG_SIGN_UPDATE, this.upSignItems, this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.prototype.upCollItems = function () {
        for (var t = CFG_Shuang11XFPH.LIB_MRCG[GameGlobal.modelRole.voMine.level].jl2, e = ConfigHelp.makeVoList(t), i = 0; i < e.length; i++) {
            var o = e[i],
                n = this["coll" + i];
            n.data = o, n.bg.source = "", n.enableTip()
        }
    }, e.prototype.upSignItems = function () {
        this.signItems || (this.signItems = []);
        var t = Vo_springSign.List;
        if (t) {
            for (var e = 0; e < t.length; e++) {
                var i = t[e],
                    o = this.signItems[e];
                o || (o = new SpringSignItem, 4 > e ? o.x = (o.width + 10) * e : (o.x = (4 * o.width + 30 - (3 * o.width + 20)) / 2 + (o.width + 10) * (e - 4), o.y = o.height + 10), this.signItems.push(o), DisplayUtil.addBy(o, this.signGrp)), o.data = i
            }
            this.lbsy.textFlow = HtmlUtil.parse("剩余挑战次数:" + HtmlUtil.color(Vo_springSign.synum, "#10a244"))
        }
    }, e
}(VShuang11_sign);
__reflect(SpringSignView.prototype, "SpringSignView");
var Vo_springSign = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.signState = EawardState.CAN_NOT_GET, e
    }
    return __extends(e, t), e.create = function () {
        this.List = [], this.Map = {};
        var t = CFG_TeachersDay.LIB5;
        for (var i in t) {
            var o = t[i],
                n = new e;
            n.id = o.id, n.cfg = o, this.List.push(n), this.Map[n.id] = n
        }
    }, e
}(Vo_shuang11sign);
__reflect(Vo_springSign.prototype, "Vo_springSign");
var EspringSignProto;
! function (t) {
    t[t.OPEN = 4781] = "OPEN", t[t.ON_SIGN_INFO = 4782] = "ON_SIGN_INFO", t[t.GET_AWARD = 4783] = "GET_AWARD", t[t.ON_AWARD = 4784] = "ON_AWARD", t[t.ASK_CHALLENGE = 4785] = "ASK_CHALLENGE", t[t.ON_CHALLENGE = 4786] = "ON_CHALLENGE", t[t.BUY_CHALLENGE_COUNT = 4787] = "BUY_CHALLENGE_COUNT", t[t.ON_BUY_CHALLENGE_COUNT = 4788] = "ON_BUY_CHALLENGE_COUNT"
}(EspringSignProto || (EspringSignProto = {}));
var EawardState;
! function (t) {
    t[t.CAN_NOT_GET = 0] = "CAN_NOT_GET", t[t.CAN_GET = 1] = "CAN_GET", t[t.IS_GET = 2] = "IS_GET"
}(EawardState || (EawardState = {}));
var SpringSignEvent = function () {
    function t() {}
    return t.pre = "SPRING_SIGN_EVENT_", t.MSG_SIGN_UPDATE = t.pre + "MSG_SIGN_UPDATE", t
}();
__reflect(SpringSignEvent.prototype, "SpringSignEvent");
var SpringSignProxy = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(EspringSignProto.ON_SIGN_INFO, this.onSignInfo, this), e.regHand(EspringSignProto.ON_AWARD, this.onAward, this), e.regHand(EspringSignProto.ON_CHALLENGE, this.onChallenge, this), e.regHand(EspringSignProto.ON_BUY_CHALLENGE_COUNT, this.onBuyChallengeCount, this)
    }, e.prototype.openSignView = function () {
        var t = this.getBytes();
        this.sendSocket(EspringSignProto.OPEN, t)
    }, e.prototype.onSignInfo = function (t, e) {
        Vo_springSign.nowDay = e.readByte();
        for (var i = e.readShort(), o = 0; i > o; o++) {
            var n = e.readInt(),
                a = e.readByte(),
                s = Vo_springSign.Map[n];
            s && (s.signState = a)
        }
        Vo_springSign.synum = e.readInt(), Vo_springSign.syBuyNum = e.readInt(), EventCenter.sendMsg(SpringSignEvent.MSG_SIGN_UPDATE)
    }, e.prototype.getAward = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(EspringSignProto.GET_AWARD, e)
    }, e.prototype.onAward = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = e.readByte(),
                n = Vo_springSign.Map[o];
            n && (n.signState = EawardState.IS_GET), EventCenter.sendMsg(SpringSignEvent.MSG_SIGN_UPDATE)
        } else {
            var a = ["", "", "累计登陆天数不足!", "已经领取过", "背包已满"];
            ViewText.text(a[i])
        }
    }, e.prototype.challenge = function () {
        var t = this.getBytes();
        this.sendSocket(EspringSignProto.ASK_CHALLENGE, t)
    }, e.prototype.onChallenge = function (t, e) {
        var i = e.readByte();
        t.openSignView(), 1 == i || ViewText.text("今日已无挑战次数")
    }, e.prototype.buyChallenge = function () {
        var t = this.getBytes();
        this.sendSocket(EspringSignProto.BUY_CHALLENGE_COUNT, t)
    }, e.prototype.onBuyChallengeCount = function (t, e) {
        var i = e.readByte();
        1 == i ? (Vo_springSign.synum++, Vo_springSign.syBuyNum--, EventCenter.sendMsg(SpringSignEvent.MSG_SIGN_UPDATE)) : 2 == i ? ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        }) : 3 == i && ViewText.text("没有购买次数")
    }, e
}(BaseModel);
__reflect(SpringSignProxy.prototype, "SpringSignProxy");
var ActivityEvent = function () {
    function t() {}
    return t.pre = "ACTIVITY_EVENT", t.UPDATE_FEST_EMISSARY_INFO = t.pre + "UPDATE_FEST_EMISSARY_INFO", t.UPDATE_RANK_HURT_BOSS = t.pre + "UPDATE_RANK_HURT_BOSS", t.UPDATE_BUY_TIMES = t.pre + "UPDATE_BUY_TIMES", t.CHANLLENGE_TIPS = t.pre + "CHANLLENGE_TIPS", t.CHANLLENGE_BOSS_RESULT = t.pre + "CHANLLENGE_BOSS_RESULT", t.UPDATE_EXTRA_AWARD_STATE = t.pre + "UPDATE_EXTRA_AWARD_STATE", t.UPDATE_EMISSARY_INFO_SPRING = t.pre + "UPDATE_EMISSARY_INFO_SPRING", t.UPDATE_RANK_HURT_SPRING = t.pre + "UPDATE_RANK_HURT_SPRING", t.UPDATE_BUY_TIMES_SPRING = t.pre + "UPDATE_BUY_TIMES_SPRING", t.CHANLLENGE_TIPS_SPRING = t.pre + "CHANLLENGE_TIPS_SPRING", t.CHANLLENGE_BOSS_RESULT_SPRING = t.pre + "CHANLLENGE_BOSS_RESULT_SPRING", t.UPDATE_EXTRA_AWARD_STATE_SPRING = t.pre + "UPDATE_EXTRA_AWARD_STATE_SPRING", t
}();
__reflect(ActivityEvent.prototype, "ActivityEvent");
var E_FEST_EMISSARY_BOSS_STATE;
! function (t) {
    t[t.undefined = -1] = "undefined", t[t.KILLED = 0] = "KILLED", t[t.CAN_CHALLENGE = 1] = "CAN_CHALLENGE", t[t.CANOT_CHALLENGE = 2] = "CANOT_CHALLENGE"
}(E_FEST_EMISSARY_BOSS_STATE || (E_FEST_EMISSARY_BOSS_STATE = {}));
var E_EMISSARY_AWARD_STATE;
! function (t) {
    t[t.undefined = -1] = "undefined", t[t.NOT_AWARD = 0] = "NOT_AWARD", t[t.CAN_AWARD = 1] = "CAN_AWARD", t[t.HAVED_AWARD = 2] = "HAVED_AWARD"
}(E_EMISSARY_AWARD_STATE || (E_EMISSARY_AWARD_STATE = {}));
var E_WINDOW_AWARD_STATE;
! function (t) {
    t[t.undefined = -1] = "undefined", t[t.NOT_AWARD = 0] = "NOT_AWARD", t[t.CAN_AWARD = 1] = "CAN_AWARD", t[t.HAVED_AWARD = 2] = "HAVED_AWARD", t[t.CONFIRM = 3] = "CONFIRM"
}(E_WINDOW_AWARD_STATE || (E_WINDOW_AWARD_STATE = {}));
var E_BUY_CHANLLENGE_TIME_RESULT;
! function (t) {
    t[t.undefined = -1] = "undefined", t[t.SUCCESS = 1] = "SUCCESS", t[t.NO_BUY_TIMES = 2] = "NO_BUY_TIMES", t[t.NOT_ENOUGH_YB = 3] = "NOT_ENOUGH_YB"
}(E_BUY_CHANLLENGE_TIME_RESULT || (E_BUY_CHANLLENGE_TIME_RESULT = {}));
var E_CHANLLENGE_RESULT;
! function (t) {
    t[t.undefined = -1] = "undefined", t[t.SUCCESS = 1] = "SUCCESS", t[t.FAIL = 2] = "FAIL", t[t.NO_CHANCE = 3] = "NO_CHANCE", t[t.NO_THROUGH_LAST = 4] = "NO_THROUGH_LAST", t[t.HAD_THROUGH = 5] = "HAD_THROUGH"
}(E_CHANLLENGE_RESULT || (E_CHANLLENGE_RESULT = {}));
var E_RESULT_GET_EXTR_AWARD;
! function (t) {
    t[t.undefinde = -1] = "undefinde", t[t.SUCCESS = 1] = "SUCCESS", t[t.UNREACH = 2] = "UNREACH", t[t.BAG_FULL = 3] = "BAG_FULL", t[t.RECIEVED = 4] = "RECIEVED"
}(E_RESULT_GET_EXTR_AWARD || (E_RESULT_GET_EXTR_AWARD = {}));
var E_EMISSARY_PROTO;
! function (t) {
    t[t.OPEN = 4461] = "OPEN", t[t.REVIEW_EXTRAL_AWARD = 4475] = "REVIEW_EXTRAL_AWARD", t[t.CHALLENGE = 4463] = "CHALLENGE", t[t.BUY_CHALLENGE_TIMES = 4465] = "BUY_CHALLENGE_TIMES", t[t.AWARD = 4469] = "AWARD", t[t.WATCH_KILL_RECORD = 4471] = "WATCH_KILL_RECORD", t[t.DETAIL_INFO = 4473] = "DETAIL_INFO"
}(E_EMISSARY_PROTO || (E_EMISSARY_PROTO = {}));
var SpringEmissaryProto;
! function (t) {
    t[t.OPEN = 4701] = "OPEN", t[t.ON_SPRING_EMISSARY_INFO = 4702] = "ON_SPRING_EMISSARY_INFO", t[t.CHALLENGE = 4703] = "CHALLENGE", t[t.ON_CHALLENGE = 4704] = "ON_CHALLENGE", t[t.BUY_CHALLENGE_TIMES = 4705] = "BUY_CHALLENGE_TIMES", t[t.ON_BUY_CHALLENGE_TIMES = 4706] = "ON_BUY_CHALLENGE_TIMES", t[t.ON_BATTLE_AWARD = 4708] = "ON_BATTLE_AWARD", t[t.AWARD = 4709] = "AWARD", t[t.ON_AWARD = 4710] = "ON_AWARD", t[t.WATCH_KILL_RECORD = 4711] = "WATCH_KILL_RECORD", t[t.ON_WATCH_KILL_RECORD = 4712] = "ON_WATCH_KILL_RECORD", t[t.DETAIL_INFO = 4713] = "DETAIL_INFO", t[t.ON_DETAIL_INFO = 4714] = "ON_DETAIL_INFO", t[t.REVIEW_EXTRAL_AWARD = 4715] = "REVIEW_EXTRAL_AWARD", t[t.ON_REVIEW_EXTRAL_AWARD = 4716] = "ON_REVIEW_EXTRAL_AWARD"
}(SpringEmissaryProto || (SpringEmissaryProto = {}));
var EmissaryGetAwardView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "VSYTAwardTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.background), DisplayUtil.popBtnStyle(this.btnClose), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHand.label = "确定"
    }, e.prototype.onHand = function () {
        this._data.callback && this._data.thisObj && this._data.callback.call(this._data.thisObj), this.closeHandler()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this._data = e, this.onUpdate()
    }, e.prototype.onUpdate = function () {
        this.txtTitle.text = this._data.title, this.txtDescription.text = this._data.description;
        var t = this._data.award;
        switch ("0" != t && ConfigHelp.makeStrGrids(t, this.gridArr, 0, 0, this.gridContainer, !0), this._data.state) {
            case E_WINDOW_AWARD_STATE.NOT_AWARD:
                this.btnHand.label = "不可领取", this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1);
                break;
            case E_WINDOW_AWARD_STATE.CAN_AWARD:
                this.btnHand.label = "领取", this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!0);
                break;
            case E_WINDOW_AWARD_STATE.HAVED_AWARD:
                this.btnHand.label = "已领取", this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1);
                break;
            case E_WINDOW_AWARD_STATE.CONFIRM:
                this.btnHand.label = "确定", this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!1)
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(EmissaryGetAwardView.prototype, "EmissaryGetAwardView");
var AwardWindowData = function () {
    function t() {
        this.title = "通关奖励", this.description = "", this.award = "0", this.state = E_WINDOW_AWARD_STATE.NOT_AWARD, this.callback = null, this.thisObj = null
    }
    return t
}();
__reflect(AwardWindowData.prototype, "AwardWindowData");
var EmissaryItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.WIDTH = 114, e.skinName = "EmissaryItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.txtCntInfo.textFlow = HtmlUtil.underLine("争夺12人"), DisplayUtil.popBtnStyle(this.txtCntInfo), this.txtCntInfo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.clickObj.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.iconBaoXiang.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.uirole = UIRole.create(), this.mxContainer.addChild(this.uirole)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget,
            i = this.getProxy(ActivityBossProxy);
        switch (e) {
            case this.txtCntInfo:
                GameGlobal.layerMgr.open(UIConst.HURT_RANK_VIEW), i.watchDetailInfo(this._data.lv);
                break;
            case this.clickObj:
                if (!ModelBattle.canEnterBtl()) return;
                if (this._data.state == E_FEST_EMISSARY_BOSS_STATE.CAN_CHALLENGE) {
                    if (this.isBetweenChanllegeTime()) {
                        var o = this.getModel(FestivalEmissaryModel);
                        o.curLv + 1 == this._data.lv ? i.challenge(this._data.id) : ViewText.text("请先通关上一层!")
                    }
                } else this._data.state == E_FEST_EMISSARY_BOSS_STATE.KILLED && ViewText.text("本层已通关!");
                break;
            case this.iconBaoXiang:
                this.onOpenBox()
        }
    }, e.prototype.onOpenBox = function () {
        var t = new AwardWindowData;
        t.thisObj = this, t.callback = this.callbackAwardWindow, t.award = this._data.extraAward, t.state = this._data.extAwardState;
        var e = t.state == E_WINDOW_AWARD_STATE.CAN_AWARD;
        e ? t.title = "领取奖励" : t.title = "通关奖励", GameGlobal.layerMgr.open(UIConst.EXTRA_AWARD_WINDOW, t)
    }, e.prototype.callbackAwardWindow = function () {
        switch (this._data.extAwardState) {
            case E_EMISSARY_AWARD_STATE.NOT_AWARD:
                ViewText.text("通关后才能领取奖励");
                break;
            case E_EMISSARY_AWARD_STATE.CAN_AWARD:
                var t = this.getProxy(ActivityBossProxy);
                t.getEmissaryExtraAward(this._data.id), this._data.extAwardState = E_EMISSARY_AWARD_STATE.HAVED_AWARD, this.iconBaoXiang.setNoticeVis(!1);
                break;
            case E_EMISSARY_AWARD_STATE.HAVED_AWARD:
                ViewText.text("你已经领取过奖励!")
        }
    }, e.prototype.setData = function (t) {
        switch (t || this.stop(), this._data = t, this.uirole.setMonsterID(t.bossid), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play(), this.txtCntInfo.textFlow = HtmlUtil.underLine("争夺:" + t.personAsk), this.showCanBattleEff(!1), t.state) {
            case 0:
                this.iconBeated.visible = !0;
                break;
            case 1:
                this.iconBeated.visible = !1, this.showCanBattleEff(!0);
                break;
            case 2:
                this.iconBeated.visible = !1
        }
        this.iconProgress.width = this.WIDTH * t.blood / 100, this.txtProgress.text = t.blood + "%", this.iconBaoXiang.visible = "0" != this._data.extraAward, this.iconBaoXiang.setNoticeVis(t.extAwardState == E_EMISSARY_AWARD_STATE.CAN_AWARD)
    }, e.prototype.stop = function () {
        this.uirole && this.uirole.stopAndClear()
    }, e.prototype.showCanBattleEff = function (t) {
        t ? this.battleEffect || (this.battleEffect = EffectMgr.addEff("uieff/fighting", this, 130, 150, 1e3, -1, !0)) : this.battleEffect && (EffectMgr.getIns().removeEff(this.battleEffect), this.battleEffect = null)
    }, e.prototype.isBetweenChanllegeTime = function () {
        var t, e = GameGlobal.modelLogin.getSerTime(),
            i = DateUtil.getHours(e),
            o = !1;
        return i >= 0 && 9 > i ? t = "9点将开启挑战！" : i >= 23 ? t = "今日挑战已结束！" : o = !0, o || ViewText.text(t), o
    }, e
}(BaseView);
__reflect(EmissaryItem.prototype, "EmissaryItem");
var EmissaryItemData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.id = -1, this.lv = 0, this.bossid = -1, this.blood = 0, this.personAsk = 0, this.state = E_FEST_EMISSARY_BOSS_STATE.undefined, this.award = "", this.extraAward = "", this.extAwardState = E_EMISSARY_AWARD_STATE.undefined
    }, t
}();
__reflect(EmissaryItemData.prototype, "EmissaryItemData");
var IconData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.quality = 0, this.iconId = 0, this.level = 0, this.name = "", this.qualityColor = "", this.starLevel = 0, this.isShowUp = !1, this.state = BattleState.INACTIVATED, this.isShowRed = !1, this.isSelected = !1, this.isCanActive = !1
    }, t
}();
__reflect(IconData.prototype, "IconData");
var SpringEmissaryItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.WIDTH = 118, e.skinName = "SpringEmissaryItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.txtCntInfo.textFlow = HtmlUtil.underLine("争夺12人"), DisplayUtil.popBtnStyle(this.txtCntInfo), this.txtCntInfo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.clickObj.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.iconBaoXiang.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.uirole = UIRole.create(), this.mxContainer.addChild(this.uirole)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget,
            i = this.getProxy(SpringEmissaryProxy);
        switch (e) {
            case this.txtCntInfo:
                this.openView(SpringHurtRankView), i.watchDetailInfo(this._data.lv);
                break;
            case this.clickObj:
                if (!ModelBattle.canEnterBtl()) return;
                if (this._data.state == E_FEST_EMISSARY_BOSS_STATE.CAN_CHALLENGE) {
                    if (this.isBetweenChanllegeTime()) {
                        var o = this.getModel(SpringEmissaryModel);
                        o.curLv + 1 == this._data.lv ? i.challenge(this._data.id) : ViewText.text("请先通关上一层!")
                    }
                } else this._data.state == E_FEST_EMISSARY_BOSS_STATE.KILLED && ViewText.text("本层已通关!");
                break;
            case this.iconBaoXiang:
                this.onOpenBox()
        }
    }, e.prototype.onOpenBox = function () {
        var t = new AwardWindowData;
        t.thisObj = this, t.callback = this.callbackAwardWindow, t.award = this._data.extraAward, t.state = this._data.extAwardState;
        var e = t.state == E_WINDOW_AWARD_STATE.CAN_AWARD;
        e ? t.title = "领取奖励" : t.title = "通关奖励", this.openView(EmissaryGetAwardView, t)
    }, e.prototype.callbackAwardWindow = function () {
        switch (this._data.extAwardState) {
            case E_EMISSARY_AWARD_STATE.NOT_AWARD:
                ViewText.text("通关后才能领取奖励");
                break;
            case E_EMISSARY_AWARD_STATE.CAN_AWARD:
                var t = this.getProxy(SpringEmissaryProxy);
                t.getEmissaryExtraAward(this._data.id), this._data.extAwardState = E_EMISSARY_AWARD_STATE.HAVED_AWARD, this.iconBaoXiang.setNoticeVis(!1);
                break;
            case E_EMISSARY_AWARD_STATE.HAVED_AWARD:
                ViewText.text("你已经领取过奖励!")
        }
    }, e.prototype.setData = function (t) {
        switch (t || this.stop(), this._data = t, this.uirole.setMonsterID(t.bossid), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play(), this.txtCntInfo.textFlow = HtmlUtil.underLine("争夺:" + t.personAsk), this.showCanBattleEff(!1), t.state) {
            case 0:
                this.iconBeated.visible = !0;
                break;
            case 1:
                this.iconBeated.visible = !1, this.showCanBattleEff(!0);
                break;
            case 2:
                this.iconBeated.visible = !1
        }
        this.iconProgress.width = this.WIDTH * t.blood / 100, this.txtProgress.text = t.blood + "%", this.iconBaoXiang.visible = "0" != this._data.extraAward, this.iconBaoXiang.setNoticeVis(t.extAwardState == E_EMISSARY_AWARD_STATE.CAN_AWARD)
    }, e.prototype.stop = function () {
        this.uirole && this.uirole.stopAndClear()
    }, e.prototype.showCanBattleEff = function (t) {
        t ? this.battleEffect || (this.battleEffect = EffectMgr.addEff("uieff/fighting", this, 130, 150, 1e3, -1, !0)) : this.battleEffect && (EffectMgr.getIns().removeEff(this.battleEffect), this.battleEffect = null)
    }, e.prototype.isBetweenChanllegeTime = function () {
        var t, e = GameGlobal.modelLogin.getSerTime(),
            i = DateUtil.getHours(e),
            o = !1;
        return i >= 0 && 9 > i ? t = "9点将开启挑战！" : i >= 23 ? t = "今日挑战已结束！" : o = !0, o || ViewText.text(t), o
    }, e
}(BaseView);
__reflect(SpringEmissaryItem.prototype, "SpringEmissaryItem");
var SpringEmissaryView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "SpringEmissarySkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = Config.getConfig(commonactivities_150).get(11).describe;
        this.lb_boss.text = t, this.scroller.scrollPolicyH = eui.ScrollPolicy.OFF, DisplayUtil.popBtnStyle(this.btnAdd), this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btn_passAward.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btn_rule.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), DisplayUtil.popBtnStyle(this.btn_rule), this.initItemGroup()
    }, e.prototype.onShowExtraAward = function () {
        this.openView(SpringExtraAwardView)
    }, e.prototype.onRule = function () {
        ViewWenHao.show(CFG_COMMOND.LIBWFSM[1128].detail, 24)
    }, e.prototype.buyChanllengeTimes = function () {
        var t = this,
            e = "是否花费" + this._springModel.costYB + "元宝购买一次挑战次数?\n剩余可购买次数：" + this._springModel.leftBuyTimes;
        this.isBuying = !1, ViewAlert.show(e, function () {
            if (!t.isBuying) {
                t.isBuying = !0;
                var e = t.getProxy(SpringEmissaryProxy);
                e.buyChallengeTimes()
            }
        })
    }, e.prototype.onUpdate = function () {
        this.updateEmissaryItem(), this.updateAwardShow(), this.txtCount.textFlow = HtmlUtil.parse("挑战次数:" + HtmlUtil.color(this._springModel.chanllegneTimes, "#e9274C") + HtmlUtil.color("/10", "#10A244")), this.isShowCounterDonw = this._springModel.chanllegneTimes < 10, this.btnAdd.visible = this.isShowCounterDonw, this.lb_counterDown.visible = this.isShowCounterDonw, this.lb_passLv.text = "" + this._springModel.curLv
    }, e.prototype.updateEmissaryItem = function () {
        for (var t = this._springModel.bossDataArr, e = t.length, i = t.values, o = 0; e > o; o++) {
            var n = this.itemGroup.getChildAt(o);
            n.setData(i[o])
        }
    }, e.prototype.initItemGroup = function () {
        var t = this.MAX_ITEM_COUNT,
            e = this.itemGroup.numChildren,
            i = t - e;
        if (i > 0)
            for (var o = 0; i > o; o++) {
                var n = new SpringEmissaryItem;
                this.itemGroup.addChild(n)
            } else if (0 > i)
                for (var a = Math.abs(i), o = 0; a > o; o++) this.itemGroup.removeChildAt(e - o - 1);
        this.setItemPos()
    }, e.prototype.setItemPos = function () {
        for (var t = this.itemGroup.numChildren, e = t - 1; e >= 0; e--)
            if (e % 2 == 0) {
                var i = (t - e) / 2 - 1,
                    o = this.itemGroup.getChildAt(e);
                o.x = 2, o.y = 82 + 310 * i
            } else {
                var i = (t - e - 1) / 2,
                    o = this.itemGroup.getChildAt(e);
                o.x = 356, o.y = 3 + 310 * i
            }
    }, e.prototype.updateAwardShow = function () {
        var t = this._springModel.curEmissary();
        if (t) ConfigHelp.makeStrGrids(t.award, this.gridArr, 0, 0, this.gridContainer, !0);
        else {
            var e = this._springModel.bossDataArr,
                i = this._springModel.firstId;
            ConfigHelp.makeStrGrids(e.get(i).award, this.gridArr, 0, 0, this.gridContainer, !0)
        }
    }, e.prototype.onBuyChangllegeTime = function (t) {
        var e = t.data;
        switch (e) {
            case E_BUY_CHANLLENGE_TIME_RESULT.NO_BUY_TIMES:
                ViewText.text("你没有可购买的次数");
                break;
            case E_BUY_CHANLLENGE_TIME_RESULT.SUCCESS:
                this._springModel.chanllegneTimes++, this._springModel.chanllegneTimes >= 10 && (this.lb_counterDown.visible = !1, this.btnAdd.visible = !1, this.isShowCounterDonw = !1);
                break;
            case E_BUY_CHANLLENGE_TIME_RESULT.NOT_ENOUGH_YB:
                ViewText.text("元宝不足")
        }
    }, e.prototype.onChangllengeResult = function (t) {
        var e = t.data.id,
            i = t.data.result;
        switch (i) {
            case E_CHANLLENGE_RESULT.SUCCESS:
                var o = this._springModel.bossDataArr.get(e).award;
                GameGlobal.layerMgr.open(UIConst.GKBOSSAWRAD, o);
                break;
            case E_CHANLLENGE_RESULT.FAIL:
                break;
            case E_CHANLLENGE_RESULT.NO_CHANCE:
                ViewText.text("你没有挑战的次数");
                break;
            case E_CHANLLENGE_RESULT.NO_THROUGH_LAST:
                ViewText.text("上一层还没有通关");
                break;
            case E_CHANLLENGE_RESULT.HAD_THROUGH:
                ViewText.text("本层已通关")
        }
    }, e.prototype.onExtraAwardStatueChange = function (t) {
        var e = t.data;
        switch (e) {
            case E_RESULT_GET_EXTR_AWARD.SUCCESS:
                ViewText.text("领取成功！");
                var i = this.getProxy(SpringEmissaryProxy);
                i.reviewExtralAward();
                break;
            case E_RESULT_GET_EXTR_AWARD.UNREACH:
                ViewText.text("条件未达标!");
                break;
            case E_RESULT_GET_EXTR_AWARD.BAG_FULL:
                ViewText.text("背包已满！");
                break;
            case E_RESULT_GET_EXTR_AWARD.RECIEVED:
                ViewText.text("请勿重复领取")
        }
    }, e.prototype.onTick = function () {
        if (this.isShowCounterDonw) {
            var t = GameGlobal.modelLogin.getSerTime() / 1e3,
                e = this._springModel.refreshTime - (t - this._springModel.curServerTime) >> 0;
            if (0 >= e) {
                var i = this.getProxy(SpringEmissaryProxy);
                i.openFestEmissaryView()
            }
            this.lb_counterDown.visible = e >= 0 && this._springModel.chanllegneTimes < 10, this.lb_counterDown.textFlow = HtmlUtil.parse("回复倒计时: " + HtmlUtil.color(DateUtil.getHMSBySecond2(e), "#FFFFFF"))
        }
    }, e.prototype.addMsg = function () {
        TimerManager.doTimer(1e3, -1, this.onTick, this);
        var t = this.getProxy(SpringEmissaryProxy);
        t.on(ActivityEvent.UPDATE_EMISSARY_INFO_SPRING, this.onUpdate, this), t.openFestEmissaryView(), t.reviewExtralAward(), EventCenter.addMsg(ActivityEvent.UPDATE_BUY_TIMES_SPRING, this.onBuyChangllegeTime, this), EventCenter.addMsg(ActivityEvent.CHANLLENGE_TIPS_SPRING, this.onChangllengeResult, this), EventCenter.addMsg(ActivityEvent.UPDATE_EXTRA_AWARD_STATE_SPRING, this.onExtraAwardStatueChange, this)
    }, e.prototype.removeMsg = function () {
        TimerManager.remove(this.onTick, this);
        var t = this.getProxy(SpringEmissaryProxy);
        t.off(ActivityEvent.UPDATE_EMISSARY_INFO_SPRING, this.onUpdate, this), EventCenter.removeMsg(ActivityEvent.UPDATE_BUY_TIMES_SPRING, this.onBuyChangllegeTime, this), EventCenter.removeMsg(ActivityEvent.CHANLLENGE_TIPS_SPRING, this.onChangllengeResult, this), EventCenter.removeMsg(ActivityEvent.UPDATE_EXTRA_AWARD_STATE_SPRING, this.onExtraAwardStatueChange, this)
    }, e.prototype.onOpen = function (t) {
        this.addMsg(), this._springModel = this.getModel(SpringEmissaryModel), IconUtil.setIconSrc(this.bgg, "springEmissarry_json.27_bg")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e
}(FestivalEmissaryView);
__reflect(SpringEmissaryView.prototype, "SpringEmissaryView");
var EmissaryExtraAwardData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.lv = 0, this.award = ""
    }, t
}();
__reflect(EmissaryExtraAwardData.prototype, "EmissaryExtraAwardData");
var EmissaryExtraAwardItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "ViewFestRabbit_RankItemSkin", e
    }
    return __extends(e, t), e.prototype.dataChanged = function () {
        var t = this.data;
        this.lb.text = "第" + t.lv + "层", this.grp.removeChildren(), ConfigHelp.makeStrGrids(t.award, this.grids, 0, 0, this.grp, !0, 5, .8)
    }, e
}(eui.ItemRenderer);
__reflect(EmissaryExtraAwardItem.prototype, "EmissaryExtraAwardItem");
var EmissaryExtraAwardView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewFestRabbit_RankSkin", e
    }
    return __extends(e, t), e.prototype.init = function () {
        this.arrCollection = new eui.ArrayCollection, this.arrCollection.source = this.getModel(FestivalEmissaryModel).allExtraAward
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.init(), this.addCloseListen(this.btnClose), this.list.dataProvider = this.arrCollection, this.list.itemRenderer = EmissaryExtraAwardItem, this.lblink.visible = !1, this.lb_title.text = "全服通关奖励"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.arrCollection.replaceAll(this.getModel(FestivalEmissaryModel).allExtraAward)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(EmissaryExtraAwardView.prototype, "EmissaryExtraAwardView");
var SpringExtraAwardView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewFestRabbit_RankSkin", e
    }
    return __extends(e, t), e.prototype.init = function () {
        this.arrCollection = new eui.ArrayCollection, this.arrCollection.source = this.getModel(SpringEmissaryModel).allExtraAward
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.init(), this.addCloseListen(this.btnClose), this.list.dataProvider = this.arrCollection, this.list.itemRenderer = EmissaryExtraAwardItem, this.lblink.visible = !1, this.lb_title.text = "全服通关奖励"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.arrCollection.replaceAll(this.getModel(SpringEmissaryModel).allExtraAward)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(SpringExtraAwardView.prototype, "SpringExtraAwardView");
var HurtRankItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ItemFestBossPHSkin", e
    }
    return __extends(e, t), e.prototype.dataChanged = function () {
        var t = this.data;
        this.txtPM.text = t.rank + "", this.txtName.text = t.name, this.txtDamage.text = t.hurt + ""
    }, e
}(eui.ItemRenderer);
__reflect(HurtRankItem.prototype, "HurtRankItem");
var HurtRankItemData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.rank = 0, this.name = "", this.hurt = 0
    }, t
}();
__reflect(HurtRankItemData.prototype, "HurtRankItemData");
var HurtRankView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewFestBossPHSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose).addCloseListen(this.btnReturn).addCloseListen(this.background), this.dataArr = [], this.provider = new eui.ArrayCollection, this.provider.source = this.dataArr
    }, e.prototype.onUpdate = function (t) {
        var e = t.data;
        this.dataArr = e, this.provider.replaceAll(this.dataArr)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addEvent(), this.list.dataProvider = this.provider, this.list.itemRenderer = HurtRankItem
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeEvent()
    }, e.prototype.addEvent = function () {
        EventCenter.addMsg(ActivityEvent.UPDATE_RANK_HURT_BOSS, this.onUpdate, this)
    }, e.prototype.removeEvent = function () {
        EventCenter.removeMsg(ActivityEvent.UPDATE_RANK_HURT_BOSS, this.onUpdate, this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(HurtRankView.prototype, "HurtRankView");
var SpringHurtRankView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewFestBossPHSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose).addCloseListen(this.btnReturn).addCloseListen(this.background), this.dataArr = [], this.provider = new eui.ArrayCollection, this.provider.source = this.dataArr
    }, e.prototype.onUpdate = function (t) {
        var e = t.data;
        this.dataArr = e, this.provider.replaceAll(this.dataArr)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addEvent(), this.list.dataProvider = this.provider, this.list.itemRenderer = HurtRankItem
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeEvent()
    }, e.prototype.addEvent = function () {
        EventCenter.addMsg(ActivityEvent.UPDATE_RANK_HURT_SPRING, this.onUpdate, this)
    }, e.prototype.removeEvent = function () {
        EventCenter.removeMsg(ActivityEvent.UPDATE_RANK_HURT_SPRING, this.onUpdate, this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(SpringHurtRankView.prototype, "SpringHurtRankView");
var BattleState;
! function (t) {
    t[t.INACTIVATED = 1] = "INACTIVATED", t[t.ON_BATTLE = 2] = "ON_BATTLE", t[t.REST = 3] = "REST"
}(BattleState || (BattleState = {}));
var SpringEmissaryModel = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.initBossData(), e
    }
    return __extends(e, t), e.prototype.initBossData = function () {
        this.bossDataArr.clear();
        var t = Config.getConfig(nianBoss_126).values.concat();
        t.sort(function (t, e) {
            return t.id - e.id
        });
        for (var e = 0; e < t.length; e++) {
            var i = t[e],
                o = new EmissaryItemData;
            o.id = i.id, o.bossid = i.gwmx, o.award = i.zsjl, o.extraAward = i.ewjl, o.lv = i.cs, 1 == o.lv && (this.firstId = o.id), this.bossDataArr.set(o.id, o)
        }
    }, Object.defineProperty(e.prototype, "allExtraAward", {
        get: function () {
            if (!this.extraAwardArr.length)
                for (var t = Config.getConfig(nianBoss_126).values, e = 0; e < t.length; e++) {
                    var i = t[e];
                    if ("0" != i.ewjl) {
                        var o = new EmissaryExtraAwardData;
                        o.lv = i.cs, o.award = i.ewjl, this.extraAwardArr.push(o)
                    }
                }
            return this.extraAwardArr
        },
        enumerable: !0,
        configurable: !0
    }), e
}(FestivalEmissaryModel);
__reflect(SpringEmissaryModel.prototype, "SpringEmissaryModel");
var ActivityBossProxy = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(4462, this.GC4462, this), e.regHand(4464, this.GC4464, this), e.regHand(4466, this.GC4466, this), e.regHand(4468, this.GC4468, this), e.regHand(4470, this.GC4470, this), e.regHand(4472, this.GC4472, this), e.regHand(4474, this.GC4474, this), e.regHand(4476, this.GC4476, this)
    }, e.prototype.openFestEmissaryView = function () {
        this.sendMessage(E_EMISSARY_PROTO.OPEN)
    }, e.prototype.reviewExtralAward = function () {
        this.sendMessage(E_EMISSARY_PROTO.REVIEW_EXTRAL_AWARD)
    }, e.prototype.challenge = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendMessage(E_EMISSARY_PROTO.CHALLENGE, e)
    }, e.prototype.buyChallengeTimes = function () {
        this.sendMessage(E_EMISSARY_PROTO.BUY_CHALLENGE_TIMES)
    }, e.prototype.getEmissaryExtraAward = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendMessage(E_EMISSARY_PROTO.AWARD, e)
    }, e.prototype.wathcKillRecord = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendMessage(E_EMISSARY_PROTO.WATCH_KILL_RECORD, e)
    }, e.prototype.watchDetailInfo = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendMessage(E_EMISSARY_PROTO.DETAIL_INFO, e)
    }, e.prototype.GC4462 = function (t, e) {
        var i = e.readInt(),
            o = e.readByte(),
            n = e.readByte(),
            a = e.readInt(),
            s = e.readByte(),
            r = t.getModel(FestivalEmissaryModel);
        r.initBossData(i), r.curLv = o, r.chanllegneTimes = n, r.refreshTime = a, r.curServerTime = GameGlobal.modelLogin.getSerTime() / 1e3, r.leftBuyTimes = s;
        for (var l = e.readShort(), h = 0; l > h; h++) {
            var c = e.readInt(),
                p = e.readByte(),
                u = e.readByte();
            r.updateActiveBossData(c, p, u)
        }
        t.notify(ActivityEvent.UPDATE_FEST_EMISSARY_INFO)
    }, e.prototype.GC4464 = function (t, e) {
        var i = e.readByte(),
            o = e.readByte();
        EventCenter.sendMsg(ActivityEvent.CHANLLENGE_TIPS, {
            id: i,
            result: o
        })
    }, e.prototype.GC4466 = function (t, e) {
        var i = e.readByte();
        EventCenter.sendMsg(ActivityEvent.UPDATE_BUY_TIMES, i)
    }, e.prototype.GC4468 = function (t, e) {
        var i = (e.readInt(), ConfigHelp.parseServItems(e));
        GameGlobal.layerMgr.open(UIConst.GKBOSSAWRAD, i)
    }, e.prototype.GC4470 = function (t, e) {
        var i = e.readByte();
        EventCenter.sendMsg(ActivityEvent.UPDATE_EXTRA_AWARD_STATE, i)
    }, e.prototype.GC4472 = function (t, e) {
        for (var i = e.readShort(), o = 0; i > o; o++) {
            e.readInt(), e.readUTF(), e.readInt()
        }
    }, e.prototype.GC4474 = function (t, e) {
        for (var i = e.readShort(), o = [], n = 0; i > n; n++) {
            var a = new HurtRankItemData;
            a.rank = e.readByte(), a.name = e.readUTF(), a.hurt = e.readInt(), o.push(a)
        }
        EventCenter.sendMsg(ActivityEvent.UPDATE_RANK_HURT_BOSS, o)
    }, e.prototype.GC4476 = function (t, e) {
        var i = e.readShort(),
            o = t.getModel(FestivalEmissaryModel),
            n = o.notRecievedExtAwardArr;
        if (n.length = 0, i) {
            for (var a = 0; i > a; a++) {
                var s = e.readByte();
                n.push(s)
            }
            o.markExtraReward(), t.notify(ActivityEvent.UPDATE_FEST_EMISSARY_INFO)
        }
    }, e.prototype.sendMessage = function (t, e) {
        var i = e || this.getBytes();
        this.sendSocket(t, i)
    }, e
}(BaseModel);
__reflect(ActivityBossProxy.prototype, "ActivityBossProxy");
var SpringEmissaryProxy = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(SpringEmissaryProto.ON_SPRING_EMISSARY_INFO, this.onSpringEmissaryInfo, this), e.regHand(SpringEmissaryProto.ON_CHALLENGE, this.onChallenge, this), e.regHand(SpringEmissaryProto.ON_BUY_CHALLENGE_TIMES, this.onBuyChallengeTimes, this), e.regHand(SpringEmissaryProto.ON_BATTLE_AWARD, this.onBattleAward, this), e.regHand(SpringEmissaryProto.ON_AWARD, this.onAward, this), e.regHand(SpringEmissaryProto.ON_WATCH_KILL_RECORD, this.onWatchKillRecord, this), e.regHand(SpringEmissaryProto.ON_DETAIL_INFO, this.onDetailInfo, this), e.regHand(SpringEmissaryProto.ON_REVIEW_EXTRAL_AWARD, this.onReviewExtraAward, this)
    }, e.prototype.openFestEmissaryView = function () {
        this.sendMessage(SpringEmissaryProto.OPEN)
    }, e.prototype.reviewExtralAward = function () {
        this.sendMessage(SpringEmissaryProto.REVIEW_EXTRAL_AWARD)
    }, e.prototype.challenge = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendMessage(SpringEmissaryProto.CHALLENGE, e)
    }, e.prototype.buyChallengeTimes = function () {
        this.sendMessage(SpringEmissaryProto.BUY_CHALLENGE_TIMES)
    }, e.prototype.getEmissaryExtraAward = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendMessage(SpringEmissaryProto.AWARD, e)
    }, e.prototype.wathcKillRecord = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendMessage(SpringEmissaryProto.WATCH_KILL_RECORD, e)
    }, e.prototype.watchDetailInfo = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendMessage(SpringEmissaryProto.DETAIL_INFO, e)
    }, e.prototype.onSpringEmissaryInfo = function (t, e) {
        var i = e.readByte(),
            o = e.readByte(),
            n = e.readInt(),
            a = e.readByte(),
            s = t.getModel(SpringEmissaryModel);
        s.curLv = i, s.chanllegneTimes = o, s.refreshTime = n, s.curServerTime = GameGlobal.modelLogin.getSerTime() / 1e3, s.leftBuyTimes = a;
        for (var r = e.readShort(), l = 0; r > l; l++) {
            var h = e.readInt(),
                c = e.readByte(),
                p = e.readByte();
            s.updateActiveBossData(h, c, p)
        }
        t.notify(ActivityEvent.UPDATE_EMISSARY_INFO_SPRING)
    }, e.prototype.onChallenge = function (t, e) {
        var i = e.readByte(),
            o = e.readByte();
        EventCenter.sendMsg(ActivityEvent.CHANLLENGE_TIPS_SPRING, {
            id: i,
            result: o
        })
    }, e.prototype.onBuyChallengeTimes = function (t, e) {
        var i = e.readByte();
        EventCenter.sendMsg(ActivityEvent.UPDATE_BUY_TIMES_SPRING, i)
    }, e.prototype.onBattleAward = function (t, e) {
        var i = (e.readInt(), ConfigHelp.parseServItems(e));
        GameGlobal.layerMgr.open(UIConst.GKBOSSAWRAD, i)
    }, e.prototype.onAward = function (t, e) {
        var i = e.readByte();
        EventCenter.sendMsg(ActivityEvent.UPDATE_EXTRA_AWARD_STATE_SPRING, i)
    }, e.prototype.onWatchKillRecord = function (t, e) {
        for (var i = e.readShort(), o = 0; i > o; o++) {
            e.readInt(), e.readUTF(), e.readInt()
        }
    }, e.prototype.onDetailInfo = function (t, e) {
        for (var i = e.readShort(), o = [], n = 0; i > n; n++) {
            var a = new HurtRankItemData;
            a.rank = e.readByte(), a.name = e.readUTF(), a.hurt = e.readInt(), o.push(a)
        }
        EventCenter.sendMsg(ActivityEvent.UPDATE_RANK_HURT_SPRING, o)
    }, e.prototype.onReviewExtraAward = function (t, e) {
        var i = e.readShort(),
            o = t.getModel(SpringEmissaryModel),
            n = o.notRecievedExtAwardArr;
        if (n.length = 0, i) {
            for (var a = 0; i > a; a++) {
                var s = e.readByte();
                n.push(s)
            }
            o.markExtraReward(), t.notify(ActivityEvent.UPDATE_EMISSARY_INFO_SPRING)
        }
    }, e.prototype.sendMessage = function (t, e) {
        var i = e || this.getBytes();
        this.sendSocket(t, i)
    }, e
}(BaseModel);
__reflect(SpringEmissaryProxy.prototype, "SpringEmissaryProxy");
var PlayDiceAwardData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.index = 0, this.id = 0, this.state = EAwardStatus.NONE
    }, t
}();
__reflect(PlayDiceAwardData.prototype, "PlayDiceAwardData");
var PlayDiceAwardItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "playDice_RankItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this)
    }, e.prototype.dataChanged = function () {
        var t = this.data;
        this.bg.source = t.index % 2 == 0 ? "CM2_json.bg1" : "CM2_json.bg2", this.lb.text = "捉拿" + t.cfg.sl + "只"
    }, e
}(eui.ItemRenderer);
__reflect(PlayDiceAwardItem.prototype, "PlayDiceAwardItem");
var EPlayDiceProto;
! function (t) {
    t[t.OPEN = 4011] = "OPEN", t[t.OPEN_AWARD = 4013] = "OPEN_AWARD", t[t.GET_AWARD = 4015] = "GET_AWARD", t[t.OPEN_RANK = 4017] = "OPEN_RANK", t[t.PLAY_DICE = 4019] = "PLAY_DICE"
}(EPlayDiceProto || (EPlayDiceProto = {}));
var EDiceResultType;
! function (t) {
    t[t.NONE = -1] = "NONE", t[t.SUCCESS = 1] = "SUCCESS", t[t.NO_PROP = 2] = "NO_PROP", t[t.BAG_FULL = 3] = "BAG_FULL", t[t.NO_YB = 4] = "NO_YB"
}(EDiceResultType || (EDiceResultType = {}));
var PlayDiceEvent = function () {
    function t() {}
    return t.pre = "PLAY_DICE_EVENT_", t.MSG_RABBIT_UPDATE = t.pre + "MSG_RABBIT_UPDATE", t.MSG_RABBIT_DICE = t.pre + "MSG_RABBIT_DICE", t.MSG_RABBIT_AWARD = t.pre + "MSG_RABBIT_AWARD", t.ON_GET_AWARD = t.pre + "ON_GET_AWARD", t.ON_PERIOD_CHANGE = t.pre + "ON_PERIOD_CHANGE", t
}();
__reflect(PlayDiceEvent.prototype, "PlayDiceEvent");
var PlayDiceItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.skinName = "playDiceItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.anchorOffsetX = this.width / 2, this.anchorOffsetY = this.height / 2
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.grid.enableTip(), this.grid.data = t, 1585 == t.id && this.grid.isShowEff(!0)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            t != this._sel && (this._sel = t, this.grid.selected = t)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(PlayDiceItem.prototype, "PlayDiceItem");
var PlayDiceRankData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.index = 0, this.name = "", this.num = 0
    }, t
}();
__reflect(PlayDiceRankData.prototype, "PlayDiceRankData");
var PlayDiceRankItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "playDice_RankItemSkin", e
    }
    return __extends(e, t), e.prototype.dataChanged = function () {
        var t = this.data;
        this.bg.source = t.index % 2 == 0 ? "CM2_json.bg1" : "CM2_json.bg2", this.lb.text = "捉拿" + t.cfg.sl + "只", ConfigHelp.makeStrGrids(t.cfg.jl, this.grids, 0, 0, this.grp, !0)
    }, e
}(eui.ItemRenderer);
__reflect(PlayDiceRankItem.prototype, "PlayDiceRankItem");
var UIPlayDice = function () {
    function t() {}
    return t.pre = "UI_PLAY_DIC_", t.PLAYDICE = 1107, t.PLAY_DICE_AWARD = t.pre + "PLAY_DICE_AWARD", t.PLAYDICERANK = t.pre + "PLAYDICERANK", t
}();
__reflect(UIPlayDice.prototype, "UIPlayDice");
var PlayDiceModel = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.init(), e
    }
    return __extends(e, t), e.prototype.init = function () {
        this.hidebubb = !1, this.isRedPoint = !1, this._awardArr = [], this._awardMap = {}, this._rankDataArr = [], this._curDiceResult = EDiceResultType.NONE, this._curDiceNum = 0, this._curPeriod = 0
    }, e.prototype.initAward = function () {
        if (!this._awardArr.length) {
            var t = 0,
                e = CFG_MidFestival.LIB_RABBITJY;
            for (var i in e) {
                var o = e[i];
                if (o.qs == this._curPeriod) {
                    var n = new PlayDiceAwardData;
                    n.index = t, n.id = o.id, n.cfg = o, this._awardArr.push(n), this._awardMap[t + 1] = n, t++
                }
            }
        }
    }, e.prototype.updateData = function (t, e, i) {
        this.curSeat = t, this.catchRabbit = e, this.curPeriod = i, this.initAward(), EventCenter.sendMsg(PlayDiceEvent.MSG_RABBIT_UPDATE)
    }, Object.defineProperty(e.prototype, "awardMap", {
        get: function () {
            return this._awardMap
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "awardArr", {
        get: function () {
            return this._awardArr
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.getAwardResult = function (t, e) {
        if (t == EGetAwardResultSatus.SUCCESS) {
            var i = this.awardMap,
                o = i[e];
            o && (o.state = 2)
        }
        EventCenter.sendMsg(PlayDiceEvent.ON_GET_AWARD, t)
    }, e.prototype.diceResult = function (t, e) {
        this._curDiceResult = t, this._curDiceNum = e, this.curSeat += e, this.curSeat = this.curSeat > 30 ? this.curSeat - 30 : this.curSeat, EventCenter.sendMsg(PlayDiceEvent.MSG_RABBIT_DICE)
    }, Object.defineProperty(e.prototype, "curDiceRet", {
        get: function () {
            return this._curDiceResult
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "curDiceNum", {
        get: function () {
            return this._curDiceNum
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "curPeriod", {
        get: function () {
            return this._curPeriod
        },
        set: function (t) {
            this._curPeriod != t && (this._curPeriod = t, EventCenter.sendMsg(PlayDiceEvent.ON_PERIOD_CHANGE))
        },
        enumerable: !0,
        configurable: !0
    }), e
}(GameCtrlBase);
__reflect(PlayDiceModel.prototype, "PlayDiceModel");
var PlayDiceProxy = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(4012, this.GC4012, this), e.regHand(4014, this.GC4014, this), e.regHand(4016, this.GC4016, this), e.regHand(4018, this.GC4018, this), e.regHand(4020, this.GC4020, this)
    }, e.prototype.openCatchRabbitView = function () {
        this.sendMessage(EPlayDiceProto.OPEN)
    }, e.prototype.openCatchRabbitAward = function () {
        this.sendMessage(EPlayDiceProto.OPEN_AWARD)
    }, e.prototype.applyToGetAward = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendMessage(EPlayDiceProto.GET_AWARD, e)
    }, e.prototype.openCatchRabbitRank = function () {
        this.sendMessage(EPlayDiceProto.OPEN_RANK)
    }, e.prototype.playDice = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendMessage(EPlayDiceProto.PLAY_DICE, e), Vo_RabbitItem.hidebubb = !0
    }, e.prototype.GC4012 = function (t, e) {
        var i = t.getModel(PlayDiceModel),
            o = e.readByte(),
            n = e.readInt(),
            a = e.readByte();
        i.updateData(o, n, a)
    }, e.prototype.GC4014 = function (t, e) {
        for (var i = e.readShort(), o = t.getModel(PlayDiceModel).awardMap, n = 0; i > n; n++) {
            var a = e.readInt(),
                s = e.readByte(),
                r = o[a];
            r && (r.state = s)
        }
        EventCenter.sendMsg(PlayDiceEvent.MSG_RABBIT_AWARD)
    }, e.prototype.GC4016 = function (t, e) {
        var i = e.readByte(),
            o = e.readInt();
        t.getModel(PlayDiceModel).getAwardResult(i, o)
    }, e.prototype.GC4018 = function (t, e) {
        for (var i = e.readShort(), o = 0; i > o; o++) {
            var n = Vo_RabbitItemRank.List[o];
            n || (n = new Vo_RabbitItemRank, Vo_RabbitItemRank.List.push(n)), n.index = o, n.name = e.readUTF(), n.num = e.readInt()
        }
        t.notify(PlayDiceEvent.MSG_RABBIT_AWARD)
    }, e.prototype.GC4020 = function (t, e) {
        var i = e.readByte(),
            o = e.readByte();
        t.getModel(PlayDiceModel).diceResult(i, o)
    }, e.prototype.sendMessage = function (t, e) {
        var i = e || this.getBytes();
        this.sendSocket(t, i)
    }, e
}(BaseModel);
__reflect(PlayDiceProxy.prototype, "PlayDiceProxy");
var PlayDiceAwardView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.selid = 0, e.grids = [], e.skinName = "playDiceAwardSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.rect), DisplayUtil.popBtnStyle(this.btnPre), DisplayUtil.popBtnStyle(this.btnNext), this.btn.label = "领取", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnT, this), this.btnPre.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnNext.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.btnT = function () {
        var t = this.getProxy(PlayDiceProxy),
            e = this.getModel(PlayDiceModel).awardArr[this.selid].cfg.sx;
        t.applyToGetAward(e)
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnPre:
                this.selid--, this.selid < 0 && (this.selid = 0);
                break;
            case this.btnNext:
                this.selid++;
                var i = this.getModel(PlayDiceModel).awardArr.length;
                this.selid >= i && (this.selid = i - 1)
        }
        this.upView(), this.checkbtnRed()
    }, e.prototype.check = function () {
        var t, e = this.getModel(PlayDiceModel).awardMap;
        for (var i in e)
            if (t = e[i], 2 != t.state) return void(this.selid = t.cfg.sx - 1);
        this.selid = t.cfg.sx - 1
    }, e.prototype.update = function () {
        this.check(), this.upView(), this.checkbtnRed()
    }, e.prototype.onGetAward = function () {
        this.upView(), this.checkbtnRed()
    }, e.prototype.upView = function () {
        var t = this.getModel(PlayDiceModel).awardMap[this.selid + 1];
        t && (this.lb.text = "捉拿" + t.cfg.sl + "只玉兔", ConfigHelp.makeStrGrids(t.cfg.jl, this.grids, 0, 0, this.grp, !0), this.btn.setNoticeVis(1 == t.state), this.btn.label = 2 == t.state ? "已领取" : "领取", this.btn.enabled = 2 != t.state)
    }, e.prototype.checkbtnRed = function () {
        var t = this.selid - 1,
            e = this.getModel(PlayDiceModel).awardArr,
            i = e[t];
        i ? this.red0.visible = 1 == i.state : this.red0.visible = !1, t = this.selid + 1;
        var i = e[t];
        i ? this.red1.visible = 1 == i.state : this.red1.visible = !1
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), this.red0.visible = this.red1.visible = !1;
        var i = this.getProxy(PlayDiceProxy);
        i.openCatchRabbitAward()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.addMsg = function () {
        EventCenter.addMsg(PlayDiceEvent.MSG_RABBIT_AWARD, this.update, this), EventCenter.addMsg(PlayDiceEvent.ON_GET_AWARD, this.onGetAward, this)
    }, e.prototype.removeMsg = function () {
        EventCenter.removeMsg(PlayDiceEvent.MSG_RABBIT_AWARD, this.update, this), EventCenter.removeMsg(PlayDiceEvent.ON_GET_AWARD, this.onGetAward, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(PlayDiceAwardView.prototype, "PlayDiceAwardView");
var PlayDiceRankView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "playDice_RankSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.data = new eui.ArrayCollection, this.list.dataProvider = this.data, this.list.itemRenderer = PlayDiceRankItem, this.lblink.textFlow = HtmlUtil.underLine("请即时领取捉玉兔奖励"), this.lblink.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIPlayDice.PLAY_DICE_AWARD)
        }, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.update = function () {
        var t = this.getModel(PlayDiceModel).awardArr;
        t.sort(this.sortFun), this.data.replaceAll(t)
    }, e.prototype.sortFun = function (t, e) {
        var i = t.cfg.sl,
            o = e.cfg.sl;
        return i - o
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(PlayDiceRankView.prototype, "PlayDiceRankView");
var PlayDiceView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isopen = !0, e.skinName = "playDiceSkin", e.logicLayer = UIActivity.LOGIC_LAYER, e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = GameGlobal.layerMgr;
        t.reg(UIPlayDice.PLAY_DICE_AWARD, PlayDiceAwardView, t.UI_Message), t.reg(UIPlayDice.PLAYDICERANK, PlayDiceRankView, t.UI_Message), DisplayUtil.popBtnStyle(this.btnjl), this.btnjl.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIPlayDice.PLAY_DICE_AWARD)
        }, this), this.lblink.textFlow = HtmlUtil.underLine("奖励一览"), this.lblink.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIPlayDice.PLAYDICERANK)
        }, this), this.btnxh0.label = "团子投掷", this.btnxh1.label = "元宝投掷", this.btnxh0.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnxh1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.gridxh0.enableTip(), this._playDiceItemMap = {}, this.addCloseListen(this.btnClose)
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnxh0:
                var i = 22;
                break;
            case this.btnxh1:
                i = 23
        }
        this.oldPos = this.getModel(PlayDiceModel).curSeat;
        var o = this.getProxy(PlayDiceProxy);
        o.playDice(i)
    }, e.prototype.update = function () {
        var t = this.getModel(PlayDiceModel);
        this.lbnum.text = "" + t.catchRabbit;
        var e = t.curSeat - 1 > 0 ? t.curSeat - 1 : 0,
            i = this._playDiceItemMap[e];
        i && (i.scaleX = i.scaleY = 1.2);
        var o = t.awardMap;
        for (var n in o) {
            var a = o[n];
            if (2 != a.state && a.cfg.sl <= t.catchRabbit) {
                var s = this.getProxy(PlayDiceProxy);
                s.openCatchRabbitAward();
                break
            }
        }
    }, e.prototype.checkjlRed = function () {
        this.redjl.visible = !1;
        for (var t = this.getModel(PlayDiceModel).awardArr, e = t.length; e--;) {
            var i = t[e];
            if (1 == i.state) {
                this.redjl.visible = !0;
                break
            }
        }
    }, e.prototype.updice = function () {
        var t = this.getModel(PlayDiceModel);
        switch (t.curDiceRet) {
            case EDiceResultType.SUCCESS:
                this.playDiceAnimation(t.curDiceNum);
                break;
            case EDiceResultType.NO_PROP:
                ViewText.text("道具不足"), Vo_RabbitItem.hidebubb = !1;
                break;
            case EDiceResultType.BAG_FULL:
                ViewText.text("背包已满"), Vo_RabbitItem.hidebubb = !1;
                break;
            case EDiceResultType.NO_YB:
                this.needYB()
        }
    }, e.prototype.needYB = function () {
        ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        }), Vo_RabbitItem.hidebubb = !1
    }, e.prototype.playDiceAnimation = function (t) {
        var e = this;
        this.imgdice.visible = !1, this.btnxh0.touchEnabled = this.btnxh1.touchEnabled = !1, EffectMgr.addEff("uieff/dice", this.effGrp, 0, -100, 500, 500), setTimeout(function () {
            e.isopen && (e.imgdice.visible = !0, e.imgdice.source = "midFestAtlas_json.s" + t, TimerManager.doTimer(300, -1, e.callback, e))
        }, 500)
    }, e.prototype.callback = function () {
        var t = this.getModel(PlayDiceModel),
            e = this.oldPos - 1 > 0 ? this.oldPos - 1 : 0,
            i = this._playDiceItemMap[e];
        i && (i.scaleX = i.scaleY = 1), this.oldPos++, this.oldPos = this.oldPos > 30 ? this.oldPos - 30 : this.oldPos;
        var o = this.oldPos,
            n = this._playDiceItemMap[o - 1];
        if (n && (n.scaleX = n.scaleY = 1.2), this.oldPos == t.curSeat) {
            TimerManager.remove(this.callback, this), this.btnxh0.touchEnabled = this.btnxh1.touchEnabled = !0, Vo_RabbitItem.hidebubb = !1;
            var a = IconUtil.getIconUrl(n.data.icon);
            ViewText.iconText(a, "获得" + n.data.name + "*" + n.data.count)
        }
    }, e.prototype.upClosePos = function () {
        var t = this.oldPos;
        t = t - 1 > 0 ? t - 1 : 0;
        var e = this._playDiceItemMap[t - 1];
        e && (e.scaleX = e.scaleY = 1), this.oldPos = -1
    }, e.prototype.upXH = function () {
        var t = CFG_Param.LIB[22].key,
            e = ConfigHelp.makeVoList(t)[0],
            i = GameGlobal.modelBag.getItemCount(e.id);
        this.gridxh0.data = e, this.gridxh0.lbCount.visible = !1;
        var o = i >= e.count ? i + "/" + e.count : HtmlUtil.color(i, "#ff0000") + "/" + e.count;
        this.lbxh0.textFlow = HtmlUtil.parse(o);
        var n = CFG_Param.LIB[23].key,
            a = Util.parseIntStr(n)[2];
        this.lbxh1.text = a.toString()
    }, e.prototype.initItem = function () {
        var t = 8,
            e = CFG_MidFestival.LIB_RABBIT,
            i = this.getModel(PlayDiceModel).curPeriod;
        for (var o in e) {
            var n = e[o];
            if (n.qs == i) {
                var a = n.sx - 1,
                    s = this._playDiceItemMap[a];
                s || (s = new PlayDiceItem, this._playDiceItemMap[a] = s), DisplayUtil.addBy(s, this.container);
                var r = (s.vid = n.id, n.sx);
                7 >= r ? (s.x = (r - 1) * (s.width + t), s.y = 0) : r > 7 && 11 >= r ? (s.x = 6 * (s.width + t), s.y = (r - 7) * (s.height + t)) : 12 == r ? (s.x = 5 * (s.width + t), s.y = 4 * (s.height + t)) : r > 12 && 15 >= r ? (s.x = 4 * (s.width + t), s.y = (15 - r + 2) * (s.height + t)) : 16 == r ? (s.x = 3 * (s.width + t), s.y = 2 * (s.height + t)) : r > 16 && 22 >= r ? (s.x = 2 * (s.width + t), s.y = (r - 17 + 2) * (s.height + t)) : 23 == r ? (s.x = s.width + t, s.y = 7 * (s.height + t)) : r > 23 && 30 >= r && (s.x = 0, s.y = (30 - r + 1) * (s.height + t));
                var l = ConfigHelp.makeVoList(n.jl)[0];
                s.data = l
            }
        }
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(31);
        if (e) {
            var i = e.getChildByID(57);
            if (!i) return void t.closeHandler();
            var o = i.getRemainSec();
            0 > o && (ViewText.text("活动已结束"), t.closeHandler())
        } else t.closeHandler()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), this.isopen = !0, IconUtil.setIconSrc(this.bgg, "minFest_titlebg_png"), IconUtil.setIconSrc(this.bgg2, "minFest_bg2_png"), this.upXH(), this.checkjlRed(), GameGlobal.tick.addInterv(this.tick, 1e3, this);
        var i = this.getProxy(PlayDiceProxy);
        i.openCatchRabbitView()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), this.isopen = !1, IconUtil.setIconSrc(this.bgg), IconUtil.setIconSrc(this.bgg2), this.btnxh0.touchEnabled = this.btnxh1.touchEnabled = !0, Vo_RabbitItem.hidebubb = !1, GameGlobal.tick.removeInterv(this.tick, this), TimerManager.remove(this.callback, this), this.upClosePos()
    }, e.prototype.onGetAward = function (t) {
        var e = t.data;
        if (e == EGetAwardResultSatus.SUCCESS) this.checkjlRed();
        else {
            var i = ["", "", "未达标", "背包已满", "已领取"];
            ViewText.text(i[e])
        }
    }, e.prototype.addMsg = function () {
        EventCenter.addMsg(PlayDiceEvent.MSG_RABBIT_DICE, this.updice, this), EventCenter.addMsg(PlayDiceEvent.MSG_RABBIT_UPDATE, this.update, this), EventCenter.addMsg(PlayDiceEvent.MSG_RABBIT_AWARD, this.checkjlRed, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.upXH, this), EventCenter.addMsg(PlayDiceEvent.ON_GET_AWARD, this.onGetAward, this), EventCenter.addMsg(PlayDiceEvent.ON_PERIOD_CHANGE, this.initItem, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.tick.removeInterv(this.callback, this), EventCenter.removeMsg(PlayDiceEvent.MSG_RABBIT_DICE, this.updice, this), EventCenter.removeMsg(PlayDiceEvent.MSG_RABBIT_UPDATE, this.update, this), EventCenter.removeMsg(PlayDiceEvent.MSG_RABBIT_AWARD, this.checkjlRed, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.upXH, this), EventCenter.removeMsg(PlayDiceEvent.ON_GET_AWARD, this.onGetAward, this), EventCenter.removeMsg(PlayDiceEvent.ON_PERIOD_CHANGE, this.initItem, this)
    }, e
}(BaseEUIView);
__reflect(PlayDiceView.prototype, "PlayDiceView");
var TreasureAwardView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.content = "下一层已开启", e.timeremain = 0, e.skinName = "TreasureHouseGetAwardSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnok), this.addCloseListen(this.bg)
    }, e.prototype.onOpen = function (e) {
        var i = e.award;
        this.closeCallbackFn = e.callback, this.thisObj = e.thisObj, t.prototype.onOpen.call(this, i), i.sort(ConfigHelp.ITEMSORT), ConfigHelp.makeVoGrids(i, this.grids, 0, 0, this.itemGroup, !0, 0, 1, 2), this.itemGroup.scrollV = 0;
        for (var o = 0, n = i.length; n > o; o++) {
            var a = i[o];
            2 == a.type && ViewItemFloatTip.checkShowEquipID(a.id)
        }
        this.timeremain = 3e3, this.updateTime(this, 0), GameGlobal.tick.addInterv(this.updateTime, 500, this), this.isShowGetKey = this.hasKey(i);
        var s = this.getModel(TreasureHouseModel).unLockLevel;
        this.isShowGetKey && 10 != s ? (this.nxtGroup.visible = !0, this.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.fontSize(this.content, 26))) : (this.nxtGroup.visible = !1, this.txtDes.text = "")
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.updateTime), ConfigHelp.clearGrids(this.grids);
        var t = this.getModel(TreasureHouseModel);
        t.isFstAward ? t.isFstAward = !1 : this.closeCallbackFn.call(this.thisObj)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.hasKey = function (t) {
        for (var e = this.getModel(TreasureHouseModel).keyId, i = 0; i < t.length; i++) {
            var o = t[i];
            if (o.id == e) return !0
        }
        return !1
    }, e.prototype.updateTime = function (t, e) {
        t.timeremain -= e;
        var i = Math.ceil(t.timeremain / 1e3);
        0 > i && (i = 0, t.closeHandler()), t.btnok.label = "关闭(" + i + ")"
    }, e
}(BaseEUIView);
__reflect(TreasureAwardView.prototype, "TreasureAwardView");
var TreasureHouseData = function () {
    function t() {
        this.cfg = null, this.lockState = ETreasureLockState.NONE, this.bigAwardGot = 0, this.isPlayAnim = !1
    }
    return t
}();
__reflect(TreasureHouseData.prototype, "TreasureHouseData");
var ETreasureHouseProto;
! function (t) {
    t[t.OPEN = 4111] = "OPEN", t[t.OPEN_BOX = 4113] = "OPEN_BOX", t[t.OPEN_AWARD_RECORD = 4115] = "OPEN_AWARD_RECORD"
}(ETreasureHouseProto || (ETreasureHouseProto = {}));
var ETreasureBoxStatus;
! function (t) {
    t[t.NONE = -1] = "NONE", t[t.SUCCESS = 1] = "SUCCESS", t[t.NO_PROP = 2] = "NO_PROP", t[t.BAG_FULL = 3] = "BAG_FULL", t[t.OPEND = 4] = "OPEND", t[t.FIRST_OPEN = 100] = "FIRST_OPEN"
}(ETreasureBoxStatus || (ETreasureBoxStatus = {}));
var ETreasureLockState;
! function (t) {
    t[t.NONE = -1] = "NONE", t[t.LOCK = 1] = "LOCK", t[t.UNLOCK = 2] = "UNLOCK"
}(ETreasureLockState || (ETreasureLockState = {}));
var TreasureHouseEvent = function () {
    function t() {}
    return t.pre = "TREASURE_HOUSE_EVENT_", t.MSG_UPDATE = t.pre + "MSG_UPDATE", t.MSG_UPDATE_RECORD = t.pre + "MSG_UPDATE_RECORD", t.ON_TREASUREBOX_OPENED = t.pre + "ON_TREASUREBOX_OPENED", t
}();
__reflect(TreasureHouseEvent.prototype, "TreasureHouseEvent");
var TreasureHouseItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.baoxiangs = [], e.skinName = "ItemSSBDSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        for (var e = 0; 9 > e; e++) {
            var i = this["iconBX" + e];
            this.baoxiangs.push(i), i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGetLitAward, this)
        }
        this.gridCost.enableTip(), this.gridAward.enableTip()
    }, e.prototype.onGetLitAward = function (t) {
        var e = t.currentTarget,
            i = this.baoxiangs.indexOf(e);
        if (i >= 0) {
            var o = GameGlobal.mainEtry.getProxy(TreasureHouseProxy);
            o.openBox(this.data.cfg.sx, i)
        }
    }, e.prototype.dataChanged = function () {
        var t = this.data;
        t.lockState == ETreasureLockState.LOCK ? (this.awardLock.visible = !0, this.totalLock.visible = !0) : (this.awardLock.visible = !1, this.totalLock.visible = !1), this.gridAward.data = ConfigHelp.makeVoList(t.cfg.zdjl)[0], this.gridAward.isShowEff(!0);
        var e = ConfigHelp.makeVoList(t.cfg.kxxh)[0];
        this.gridCost.data = e, this.txtLayer.text = t.cfg.rw;
        var i = ConfigHelp.costTxt(e);
        this.txtCost.textFlow = i, this.iconBigAdGot.visible = 2 == t.bigAwardGot, this.updateBaoXiangSt(), t.isPlayAnim && (t.isPlayAnim = !1, this.showUnLockEff())
    }, e.prototype.updateBaoXiangSt = function () {
        var t = this.data.bxOpenedInfo,
            e = t.length;
        if (0 == e)
            for (var i = 0; i < this.baoxiangs.length; i++) {
                var o = this.baoxiangs[i],
                    n = this["iconOpened" + i];
                o.source = "HJSDAtlas_json.bxClose", n.visible = !1
            } else
                for (var i = 0; e > i; i++) {
                    var a = t[i],
                        s = a.index,
                        r = this.baoxiangs[s],
                        l = this["iconOpened" + s];
                    2 == a.state ? (r.source = "HJSDAtlas_json.bxOpened", l.visible = !0) : (r.source = "HJSDAtlas_json.bxClose", l.visible = !1)
                }
    }, e.prototype.showUnLockEff = function () {
        EffectMgr.addEff("uieff/hjsdUnLock", this, 320, 190, 1e3, 1e3)
    }, e
}(eui.ItemRenderer);
__reflect(TreasureHouseItem.prototype, "TreasureHouseItem");
var TreasureHouseView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "TreasureHouseSkin", e.logicLayer = UIActivity.LOGIC_LAYER, e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = GameGlobal.layerMgr;
        e.reg(UITreasureHouse.TREASURE_HOUSE_AWARD_RECORD, TreasureRecordView, e.UI_Message), e.reg(UITreasureHouse.TREASURE_HOUSE_AWARD_TIP, TreasureAwardView, e.UI_Message), this.txtNoteLink.textFlow = HtmlUtil.underLine(this.txtNoteLink.text), DisplayUtil.popBtnStyle(this.txtNoteLink), this.txtNoteLink.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLink, this), this.list.dataProvider = this.sourceData = new eui.ArrayCollection, this.list.itemRenderer = TreasureHouseItem
    }, e.prototype.onLink = function () {
        GameGlobal.layerMgr.open(UITreasureHouse.TREASURE_HOUSE_AWARD_RECORD)
    }, e.prototype.addTick = function () {
        GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.onTick = function (t) {
        t.displayTimetxt();
        var e = t.getModel(TreasureHouseModel);
        e.actLeftTime < 0 && (t.showActTime(!1), t.closeHandler())
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.showActTime = function (t) {
        t ? this.addTick() : (this.txtActTime.text = "00:00:00", this.removeTick())
    }, e.prototype.displayTimetxt = function () {
        var t = this.getModel(TreasureHouseModel);
        DateUtil.isLessThan1Day(t.actLeftTime) ? this.txtActTime.textFlow = HtmlUtil.parse(DateUtil.getHMSBySecond(t.actLeftTime, "时分秒")) : this.txtActTime.textFlow = HtmlUtil.parse(DateUtil.getDayHourStr(t.actLeftTime))
    }, e.prototype.onUpdate = function () {
        var t = this.getModel(TreasureHouseModel);
        this.txtOwnKey.text = t.ownKeys + "", this.showActTime(t.actLeftTime > 0), this.sourceData.replaceAll(t.map.getList())
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), IconUtil.setIconSrc(this.titlebg, "nationalDay_title_BG_png"), IconUtil.setIconSrc(this.title, "nationalDay_ssbz_BG_png");
        var i = this.getProxy(TreasureHouseProxy);
        i.openTreasureHouse()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), IconUtil.setIconSrc(this.titlebg, null), IconUtil.setIconSrc(this.title, null), this.showActTime(!1)
    }, e.prototype.onTreasureBoxOpened = function () {
        var t = this.getModel(TreasureHouseModel),
            e = t.boxStatus,
            i = t.boxAward;
        e == ETreasureBoxStatus.SUCCESS || e == ETreasureBoxStatus.FIRST_OPEN ? GameGlobal.layerMgr.open(UITreasureHouse.TREASURE_HOUSE_AWARD_TIP, {
            award: i,
            callback: this.callbackCloseAwardView,
            thisObj: this
        }) : (ViewText.text([null, null, "钥匙不足，无法开启", "背包已满", "该箱子已经开启过了"][e]), e == ETreasureBoxStatus.BAG_FULL && GameGlobal.layerMgr.open(UIConst.EQUIPRL))
    }, e.prototype.callbackCloseAwardView = function () {
        var t = this.getProxy(TreasureHouseProxy);
        this.isGetNextLvKey() ? (this.playOpenNextBoxLvAnim(), GameGlobal.tick.addInterv(function () {
            t.openTreasureHouse()
        }, 1100, this, !0)) : t.openTreasureHouse()
    }, e.prototype.isGetNextLvKey = function () {
        for (var t = this.getModel(TreasureHouseModel), e = t.keyId, i = t.boxAward, o = 0; o < i.length; o++) {
            var n = i[o];
            if (n.id == e) return !0
        }
        return !1
    }, e.prototype.playOpenNextBoxLvAnim = function () {
        for (var t = this.getModel(TreasureHouseModel).map.getList(), e = t.length, i = 0; e > i; i++)
            if (t[i].lockState == ETreasureLockState.LOCK) {
                t[i].isPlayAnim = !0;
                break
            } this.sourceData.replaceAll(t)
    }, e.prototype.addMsg = function () {
        EventCenter.addMsg(TreasureHouseEvent.MSG_UPDATE, this.onUpdate, this), EventCenter.addMsg(TreasureHouseEvent.ON_TREASUREBOX_OPENED, this.onTreasureBoxOpened, this)
    }, e.prototype.removeMsg = function () {
        EventCenter.removeMsg(TreasureHouseEvent.MSG_UPDATE, this.onUpdate, this), EventCenter.removeMsg(TreasureHouseEvent.ON_TREASUREBOX_OPENED, this.onTreasureBoxOpened, this)
    }, e
}(BaseEUIView);
__reflect(TreasureHouseView.prototype, "TreasureHouseView");
var UITreasureHouse = function () {
    function t() {}
    return t.pre = "UI_TREASURE_HOUSE_", t.TREASURE_HOUSE_AWARD_TIP = "TREASURE_HOUSE_AWARD_TIP", t.TREASURE_HOUSE_AWARD_RECORD = "TREASURE_HOUSE_AWARD_RECORD", t.TREASURE_HOUSE = "TREASURE_HOUSE", t
}();
__reflect(UITreasureHouse.prototype, "UITreasureHouse");
var TreasureHouseModel = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.init(), e
    }
    return __extends(e, t), e.prototype.init = function () {
        this.map = new CommondMap, this.record = [], this.boxStatus = ETreasureBoxStatus.NONE, this.boxAward = [], this.isFstAward = !1, this._period = -1, this._unLockLevel = -1
    }, e.prototype.updatePeriod = function (t) {
        this._period != t && (this._period = t, this.map.clear(), this.initLib())
    }, Object.defineProperty(e.prototype, "period", {
        get: function () {
            return this._period
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "unLockLevel", {
        get: function () {
            return this._unLockLevel
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.initLib = function () {
        var t = CFG_NationalDay.LIB3,
            e = 0;
        for (var i in t) {
            var o = t[i];
            if (o.qs == this.period) {
                var n = new TreasureHouseData;
                n.cfg = o, n.bxOpenedInfo = [], this.map.add(n, i), 0 == e ? n.lockState = 2 : n.lockState = 1, e++
            }
        }
    }, e.prototype.update = function (t, e, i) {
        var o = this.map.getByIndex(t - 1);
        o && (o.bxOpenedInfo = e, o.bigAwardGot = i)
    }, e.prototype.updateLocks = function (t) {
        this._unLockLevel = t;
        for (var e = 0; e < this.map.getLength(); e++) {
            var i = this.map.getByIndex(e);
            i.cfg.sx <= t && (i.lockState = 2)
        }
        EventCenter.sendMsg(TreasureHouseEvent.MSG_UPDATE)
    }, Object.defineProperty(e.prototype, "actLeftTime", {
        get: function () {
            var t = GameGlobal.modelAct.actData.getChildByID(31);
            return t && t.getChildByID(62).getRemainSec()
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "ownKeys", {
        get: function () {
            var t = 1724,
                e = this.map.getList()[0];
            return e && (t = Util.parseIntStr(e.cfg.kxxh)[1]), GameGlobal.modelBag.getItemCount(t)
        },
        enumerable: !0,
        configurable: !0
    }), e.notice = function () {
        return !1
    }, e.prototype.updateTreaseRecord = function (t) {
        t.sort(function (t, e) {
            return e.time - t.time
        }), this.record.length = 0, this.record = this.record.concat(t), EventCenter.sendMsg(TreasureHouseEvent.MSG_UPDATE_RECORD)
    }, e.prototype.upBoxState = function (t, e) {
        this.boxStatus = t, this.boxAward = e, this.isFstAward = t == ETreasureBoxStatus.FIRST_OPEN, EventCenter.sendMsg(TreasureHouseEvent.ON_TREASUREBOX_OPENED)
    }, Object.defineProperty(e.prototype, "keyId", {
        get: function () {
            for (var t = this.map.getLength(), e = 0, i = 0; t > i; i++) {
                var o = this.map.getByIndex(i);
                if (o.cfg.sx == this._unLockLevel) {
                    var n = o.cfg.kqxcjl.split(",");
                    e = parseInt(n[1]);
                    break
                }
            }
            return e
        },
        enumerable: !0,
        configurable: !0
    }), e
}(GameCtrlBase);
__reflect(TreasureHouseModel.prototype, "TreasureHouseModel");
var TreasureRecordData = function () {
    function t() {}
    return t
}();
__reflect(TreasureRecordData.prototype, "TreasureRecordData");
var TreasureRecordItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ItemBZRecSkin", e
    }
    return __extends(e, t), e.prototype.dataChanged = function () {
        var t = this.data;
        this.txtTime.text = DateUtil.getYMDHM(t.time), this.txtAward.textFlow = HtmlUtil.parse("开启宝箱获得" + ColorSet(t.award.name + "x" + t.award.count, "#10a244"))
    }, e
}(eui.ItemRenderer);
__reflect(TreasureRecordItem.prototype, "TreasureRecordItem");
var TreasureRecordView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VBDRecordSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose).addCloseListen(this.background), DisplayUtil.popBtnStyle(this.btnClose), this.list.dataProvider = this.sourceData = new eui.ArrayCollection, this.list.itemRenderer = TreasureRecordItem
    }, e.prototype.onUpdate = function () {
        var t = this.getModel(TreasureHouseModel).record;
        this.sourceData.replaceAll(t)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg();
        var i = this.getProxy(TreasureHouseProxy);
        i.openAwardRecord()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.addMsg = function () {
        EventCenter.addMsg(TreasureHouseEvent.MSG_UPDATE_RECORD, this.onUpdate, this)
    }, e.prototype.removeMsg = function () {
        EventCenter.removeMsg(TreasureHouseEvent.MSG_UPDATE_RECORD, this.onUpdate, this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(TreasureRecordView.prototype, "TreasureRecordView");
var TreasureHouseProxy = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(4112, this.GC4112, this), e.regHand(4114, this.GC4114, this), e.regHand(4116, this.GC4116, this)
    }, e.prototype.openTreasureHouse = function () {
        var t = this.getBytes();
        this.sendSocket(ETreasureHouseProto.OPEN, t)
    }, e.prototype.openBox = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeByte(e), this.sendSocket(ETreasureHouseProto.OPEN_BOX, i)
    }, e.prototype.openAwardRecord = function () {
        var t = this.getBytes();
        this.sendSocket(ETreasureHouseProto.OPEN_AWARD_RECORD, t)
    }, e.prototype.GC4112 = function (t, e) {
        var i = t.getModel(TreasureHouseModel),
            o = e.readInt();
        i.updatePeriod(o);
        for (var n = e.readShort(), a = 0; n > a; a++) {
            for (var s = e.readShort(), r = [], l = 0, h = e.readShort(); h > l; l++) {
                var c = {};
                c.index = e.readByte(), c.state = e.readByte(), r.push(c)
            }
            var p = e.readByte();
            i.update(s, r, p)
        }
        i.updateLocks(e.readByte())
    }, e.prototype.GC4114 = function (t, e) {
        var i = e.readByte(),
            o = ConfigHelp.parseServItems(e);
        t.getModel(TreasureHouseModel).upBoxState(i, o)
    }, e.prototype.GC4116 = function (t, e) {
        for (var i = [], o = 0, n = e.readShort(); n > o; o++) {
            var a = new TreasureRecordData;
            a.time = e.readInt();
            var s = e.readByte(),
                r = e.readInt(),
                l = e.readShort(),
                h = ConfigHelp.makeVoList(s + "," + r + "," + l)[0];
            a.award = h, i.push(a)
        }
        t.getModel(TreasureHouseModel).updateTreaseRecord(i)
    }, e
}(BaseModel);
__reflect(TreasureHouseProxy.prototype, "TreasureHouseProxy");
var View_ActJC = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.curPageUIID = 0, e.pageUI = {}, e.skinName = "ActPnlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.initPage(), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.base.createPageGrp(), this.pageGrp = this.base.pageGrp, this.tabList.itemRenderer = VActTBtn, this.tabListDataAC = new eui.ArrayCollection, this.tabList.dataProvider = this.tabListDataAC, this.lbOpe.touchEnabled = !0, this.lbOpe.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOpT, this), this.tabList.addEventListener(egret.Event.CHANGE, this.onListC, this), this.part = Part.create(), this.part.setAct(1), this.addChildAt(this.part, this.getChildIndex(this.imgTitleBG) + 1), this.part.x = 60, this.part.y = 110
    }, e.prototype.initPage = function () {
        var t = GameGlobal.layerMgr,
            e = UIConst,
            i = this.pageUI,
            o = Enum_Act;
        t.reg(e.ACTRANKLIST, VActCheckRank, GameGlobal.layerMgr.UI_MainMiddle, 1), t.reg(e.ACTCOMPAGE1, VComActPage1, this.pageGrp), t.reg(e.ACTCOMRANK, VACTComRank, this.pageGrp), t.reg(e.ACTQUANMINJJ, VQuanMinJJ, this.pageGrp), t.reg(e.ACTQUANMINCJ, VQuanMinCJ, this.pageGrp), t.reg(e.ACTGUANQIA, VActGuanQia, this.pageGrp), t.reg(e.ACTZKSHOP, VActShopPage, this.pageGrp), t.reg(e.SHOUCHONGTG, VShouChongTG, this.pageGrp), t.reg(e.ACTJLCZ, VActLeiJiCZ, this.pageGrp), t.reg(e.ACTZDSB, VZDSB, this.pageGrp), t.reg(e.ACTDBCZ, VDBCZ, this.pageGrp), i[o.Enum_QMCJ] = e.ACTQUANMINCJ, i[o.Enum_ZXGQ] = e.ACTGUANQIA, i[Enum_Act.Enum_ZQJJ] = e.ACTCOMPAGE1, i[Enum_Act.Enum_CBJJ] = e.ACTCOMPAGE1, i[Enum_Act.Enum_SBJJ] = e.ACTCOMPAGE1, i[Enum_Act.Enum_HBPY] = e.ACTCOMPAGE1, i[Enum_Act.Enum_CWPY] = e.ACTCOMPAGE1, i[Enum_Act.Enum_ZLTS] = e.ACTCOMPAGE1, i[Enum_Act.Enum_JJCBP] = e.ACTCOMPAGE1, i[Enum_Act.Enum_GHJJ] = e.ACTCOMPAGE1, i[Enum_Act.Enum_SLJJ] = e.ACTCOMPAGE1, i[o.Enum_ZQPH] = e.ACTCOMRANK, i[o.Enum_CBPH] = e.ACTCOMRANK, i[o.Enum_SBPH] = e.ACTCOMRANK, i[o.Enum_HBPH] = e.ACTCOMRANK, i[o.Enum_PETPH] = e.ACTCOMRANK, i[o.Enum_SYTPH] = e.ACTCOMRANK, i[o.Enum_ZLPH] = e.ACTCOMRANK, i[o.Enum_JJCPH] = e.ACTCOMRANK, i[o.Enum_QMZQJJ] = e.ACTQUANMINJJ, i[o.Enum_QMCBJJ] = e.ACTQUANMINJJ, i[o.Enum_QMSBJJ] = e.ACTQUANMINJJ, i[o.Enum_QMHBPY] = e.ACTQUANMINJJ, i[o.Enum_QMCWJJ] = e.ACTQUANMINJJ, i[o.Enum_QMZLTS] = e.ACTQUANMINJJ, i[o.Enum_QMJJC] = e.ACTQUANMINJJ, i[o.Enum_SCTG] = e.SHOUCHONGTG, i[o.Enum_ZKSD] = e.ACTZKSHOP, i[o.Enum_LJCZ] = e.ACTJLCZ, i[o.Enum_ZDSB] = e.ACTZDSB, i[o.Enum_DBCZ] = e.ACTDBCZ
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.base.title = "精彩活动", this.updateList(e), this.openIndex(0), this.updateAllLB(), DisplayUtil.resetScroller(this.pageScrol), GameGlobal.tick.addInterv(this.onTimeTick, 1e3, this), this.updateTime(), GameGlobal.modelAct.on(Model_Act.MSG_PAGEUIEVT, this.updateCur, this), GameGlobal.modelAct.on(Model_Act.MSG_ACTRED, this.onNotic, this)
    }, e.prototype.onClose = function () {
        this.closeCurPage(), GameGlobal.tick.removeInterv(this.onTimeTick), GameGlobal.modelAct.off(Model_Act.MSG_PAGEUIEVT, this.updateCur), GameGlobal.modelAct.off(Model_Act.MSG_ACTRED, this.onNotic, this), this.part.setVal(null)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.updateList = function (t) {
        var e = GameGlobal.modelAct;
        this.tabListDataAC.removeAll();
        var i = e.actData.getChildByID(t);
        i && i.hasChild() && (i.childs.sort(this.tabSortFunc), this.tabListDataAC.removeAll(), this.tabListDataAC.replaceAll(i.childs)), 9 == t && (this.base.title = i.childs[0].getName())
    }, e.prototype.tabSortFunc = function (t, e) {
        var i = 1e3 * t.sort + t.id,
            o = 1e3 * e.sort + e.id;
        return i - o
    }, e.prototype.updateAllLB = function () {
        var t = this.tabList.selectedItem;
        if (t) {
            this.lbCur.text = t.getCurStr(), this.lbDes.text = t.getDes();
            var e = t.getOpStr();
            this._oldOpStr != e && (this._oldOpStr = e, e && "0" != e ? this.lbOpe.textFlow = HtmlUtil.underLine(e) : this.lbOpe.text = "")
        } else this._oldOpStr = "", this.lbCur.text = "", this.lbDes.text = "", this.lbOpe.text = ""
    }, e.prototype.onListC = function (t) {
        var e = t.target,
            i = e.selectedItem;
        i && this.openPageViewByActID(i.id, i), this.updateAllLB()
    }, e.prototype.closeCurPage = function () {
        this.curPageUIID && (GameGlobal.layerMgr.close(this.curPageUIID), this.curPageUIID = 0)
    }, e.prototype.openPageViewByActID = function (t, e) {
        var i = this.pageUI[t];
        if (this.closeCurPage(), i) {
            var o = CFG_Act.LIB_Act[t];
            GameGlobal.modelAct.curSelVo = e, this.imgTitleBG.source = "actbg" + o.tbg + "_png", this.part.setVal("text/" + o.t), this.curPageUIID = i, GameGlobal.layerMgr.open(i, e)
        }
    }, e.prototype.updateTime = function () {
        var t = this.tabList.selectedItem;
        if (t) {
            var e = t.getRemainSec();
            e >= 0 && (this.lbTime.text = DateUtil.getHMSBySecond2(t.getRemainSec()))
        }
    }, e.prototype.onTimeTick = function (t) {
        t.updateTime()
    }, e.prototype.onOpT = function () {
        var t = this.tabList.selectedItem;
        if (t) {
            var e = t.doOp();
            e && this.closeHandler()
        }
    }, e.prototype.updateCur = function () {
        var t = this.tabList.selectedItem;
        t && (this.lbCur.text = t.getCurStr())
    }, e.prototype.openIndex = function (t) {
        if (this.tabListDataAC.length > t) {
            var e = this.tabListDataAC.getItemAt(t);
            this.tabList.selectedItem = e, this.openPageViewByActID(e.id, e)
        }
    }, e.prototype.onNotic = function (t) {
        for (var e = 0; e < this.tabListDataAC.length; e++) {
            var i = this.tabListDataAC.getItemAt(e);
            i.id == t && this.tabListDataAC.itemUpdated(i)
        }
    }, e
}(BaseEUIView);
__reflect(View_ActJC.prototype, "View_ActJC");
var AwardCtrl = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.registUI = function () {
        var t = GameGlobal.layerMgr;
        t.regView(Award.RankAwardView, t.UI_MainMiddle, 1)
    }, e.prototype.registProxys = function () {}, e
}(UIAndProxyBaseCtr);
__reflect(AwardCtrl.prototype, "AwardCtrl");
var Poker = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "PokerSkin", e
    }
    return __extends(e, t), e.prototype.setCard = function (t) {
        ConfigHelp.makeStrGrids(t, this.gridArr, 0, 0, this.itemGroup, !0);
        var e = parseInt(t.split(",")[1]),
            i = Config.getConfig(item_106).get(e).name;
        this.propName.text = i
    }, e.prototype.clearGrids = function () {
        ConfigHelp.clearGrids(this.gridArr)
    }, e
}(eui.Component);
__reflect(Poker.prototype, "Poker");
var Award;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.skinName = "PokerAwardSkin", e
        }
        return __extends(e, t), e.prototype.initView = function () {
            t.prototype.initView.call(this), this.pokerArr = this.pokers.$children
        }, e.prototype.onOpen = function (e) {
            t.prototype.onOpen.call(this, e), this._data = e, this.addEvent();
            for (var i = this.pokerArr.length, o = 0; i > o; o++) {
                var n = this.pokerArr[o];
                n.back.visible = !0
            }
            this.closeTimeLabel.visible = !1, this.havedOpen = !1
        }, e.prototype.onClose = function () {
            t.prototype.onClose.call(this), this.removeEvent(), this.clearGrids(), this.getModel(FWorld.Model).isTurnCard = !1, EventCenter.sendMsg(FWorld.Event.START_AUTO_BATTLE), this.havedOpen || this.requestTurnCard()
        }, e.prototype.clearGrids = function () {
            for (var t = this.pokerArr.length, e = 0; t > e; e++) {
                var i = this.pokerArr[e];
                i.clearGrids()
            }
        }, e.prototype.onSize = function () {
            this.fullStage()
        }, e.prototype.onTouchPoker = function (t) {
            var e = t.currentTarget;
            this._currentPocker = e, this.requestTurnCard()
        }, e.prototype.requestTurnCard = function () {
            this._data.callback && this._data.thisObj && this._data.callback.call(this._data.thisObj)
        }, e.prototype.openPocker = function (t) {
            this.removePokerLst(), this._currentPocker.back.visible = !1, this._currentPocker.setCard(t.data), this.havedOpen = !0, this.close_time = 3, this.closeTimeLabel.visible = !0, this.closeTimeLabel.text = this.close_time + "秒后自动关闭", TimerManager.doTimer(1e3, -1, this.autoClose, this)
        }, e.prototype.autoClose = function () {
            this.close_time -= 1, this.closeTimeLabel.text = this.close_time + "秒后自动关闭", this.close_time <= 0 && (this.close_time = 0, TimerManager.doTimer(50, 1, function () {
                this.closeView(e)
            }, this), TimerManager.remove(this.autoClose, this))
        }, e.prototype.addPokerLst = function () {
            for (var t = this.pokerArr.length, e = 0; t > e; e++) {
                var i = this.pokerArr[e];
                i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchPoker, this)
            }
        }, e.prototype.removePokerLst = function () {
            for (var t = this.pokerArr.length, e = 0; t > e; e++) {
                var i = this.pokerArr[e];
                i.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchPoker, this)
            }
        }, e.prototype.addEvent = function () {
            this.addCloseListen(this.baseSCmp.btnClose), this.addPokerLst(), this._data.eventMsg && EventCenter.addMsg(this._data.eventMsg, this.openPocker, this)
        }, e.prototype.removeEvent = function () {
            this.removeCloseListen(this.baseSCmp.btnClose), this.removePokerLst(), TimerManager.remove(this.autoClose, this), this._data.eventMsg && EventCenter.removeMsg(this._data.eventMsg, this.openPocker, this)
        }, e
    }(BaseEUIView);
    t.PokerAwardView = e, __reflect(e.prototype, "Award.PokerAwardView")
}(Award || (Award = {}));
var PockerWindowData = function () {
    function t() {
        this.eventMsg = "", this.callback = null, this.thisObj = null
    }
    return t
}();
__reflect(PockerWindowData.prototype, "PockerWindowData");
var Award;
! function (t) {
    var e = function () {
        function t() {
            this.id = 0, this.rank = "", this.awards = ""
        }
        return t
    }();
    t.RankAwardData = e, __reflect(e.prototype, "Award.RankAwardData")
}(Award || (Award = {}));
var Award;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.grids = [], e.skinName = "RankAwardItemSkin", e
        }
        return __extends(e, t), e.prototype.dataChanged = function () {
            var t = this.data;
            this.setRank(t.rank), ConfigHelp.makeStrGrids(t.awards, this.grids, 0, 0, this.awardGrp, !0, 5, 1)
        }, e.prototype.setRank = function (t) {
            var e, i = t.split(",");
            e = 2 == i.length && i[0] != i[1] ? "第" + i[0] + "至" + i[1] + "名" : "第" + i[0] + "名", this.lb_sort.text = e
        }, e.prototype.clearGrids = function () {
            ConfigHelp.clearGrids(this.grids)
        }, e
    }(eui.ItemRenderer);
    t.RankAwardItem = e, __reflect(e.prototype, "Award.RankAwardItem")
}(Award || (Award = {}));
var Award;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "RankAwardSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.collection = new eui.ArrayCollection, this.list.itemRenderer = t.RankAwardItem, this.list.dataProvider = this.collection
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t), this.addEvent(), this.base.title = t.title, this.descriptionLabel.textFlow = t.description, this.collection.replaceAll(t.arr)
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeEvent();
            for (var t = this.list.numChildren, i = 0; t > i; i++) {
                var o = this.list.getChildAt(i);
                o.clearGrids()
            }
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i.prototype.addEvent = function () {
            this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn)
        }, i.prototype.removeEvent = function () {
            this.removeCloseListen(this.base.btnClose), this.removeCloseListen(this.base.btnReturn)
        }, i
    }(BaseEUIView);
    t.RankAwardView = e, __reflect(e.prototype, "Award.RankAwardView")
}(Award || (Award = {}));
var ItemType;
! function (t) {
    t[t.SKILLBOOK = 10] = "SKILLBOOK"
}(ItemType || (ItemType = {}));
var ModelBag = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.capacity = 100, e.openType = 0, e.capacityTimes = 0, e.isOpenAutoRL = !1, e.udArg = {}, e._dirt = !1, e.itemMap = {}, e.items = [], e.equips = [], e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(200, i.GCBagRev, i), e.regHand(202, i.GC202, i), e.regHand(204, i.GCEqdUpd, i), e.regHand(206, i.GCItmUpd, i), e.regHand(208, i.GC_USEITEM_208, i), e.regHand(210, i.GC210, i), e.regHand(254, i.GC254, i), e.regHand(260, i.GC260, i), e.regHand(604, i.GC604, i), e.regHand(606, i.GC_RLBOOK, i), e.regHand(608, i.GC_608, i)
    }, e.prototype.getItemCount = function (t) {
        var e = this.itemMap[t];
        if (e) var i = e.count;
        else i = 0;
        return i
    }, e.prototype.getBagEquipByType = function (t, e) {
        void 0 === e && (e = null), e || (e = []);
        for (var i = GameGlobal.modelBag.equips, o = 0, n = i.length; n > o; o++) {
            var a = i[o];
            a.position == t && e.push(a)
        }
        return e
    }, e.prototype.CG201 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(201, e)
    }, e.prototype.GC202 = function (t, e) {
        var i = e.readByte();
        1 == i && (t.capacity = e.readShort(), t.capacityTimes = e.readShort(), t.notifyChange(), GameGlobal.layerMgr.close(UIConst.OPENGRID)), ViewText.text(["失败", "成功开启", "已达最大格子", "传入参数有异", "元宝不足"][i])
    }, e.prototype.GC210 = function (t, e) {
        for (var i = e.readByte(), o = 1 == i, n = CFG_Item.LIB, a = 0, s = e.readShort(); s > a; a++) {
            var r, l = e.readInt(),
                h = e.readInt(),
                c = e.readByte(),
                p = e.readByte(),
                u = void 0,
                d = void 0;
            if (1 == p) {
                var f = n[l];
                f && (u = f.name, d = f.quality, r = IconUtil.getIconUrl(f.icon))
            } else if (2 == p) {
                var g = CFG_Equip.LIB[l];
                g && (u = g.n, d = g.q, r = IconUtil.getIconUrl(g.ico)), d >= 5 && ViewItemFloatTip.checkShowEquipID(l)
            } else {
                var m = CFG_HUOBAN1.LIB3[l];
                m && (u = m.n, d = m.xj, r = IconUtil.getIconUrl(m.ico))
            }
            if (0 == c) ViewText.text("使用【" + u + "】 X" + h);
            else {
                if (!o || Vo_RabbitItem.hidebubb) return;
                ViewText.iconText(r, "获得" + u + "*" + h)
            }
        }
    }, e.prototype.GC254 = function (t, e) {
        var i = e.readByte(),
            o = e.readInt(),
            n = e.readInt(),
            a = e.readInt();
        if (1 == o) {
            var s = CFG_Item.LIB[n];
            ViewText.iconText(IconUtil.getIconUrl(s.icon), s.name + "*" + a)
        } else if (2 == o) {
            var r = CFG_Equip.LIB[n];
            ViewText.iconText(IconUtil.getIconUrl(r.ico), r.n + "*" + a)
        } else {
            if (470 == o) return;
            var l = CFG_ATTR.LIB[o];
            0 == i ? ViewText.text(l.n + " -" + a) : ViewText.iconText(IconUtil.getIconUrl(l.ICON), "获得" + l.n + "*" + a)
        }
    }, e.prototype.GC260 = function (t, e) {
        var i = (e.readByte(), e.readUTF());
        GameGlobal.layerMgr.open(UIConst.STRINGTIP, i)
    }, e.prototype.deleteEquips = function (t) {
        for (var e = t.length - 1; e >= 0; e--)
            for (var i = this.equips.length - 1; i >= 0; i--) {
                var o = this.equips[i];
                o && o.lid == t[e] && (this.equips[i] = null)
            }
        ArrayUtil.cleannull(this.equips), this.notifyChange()
    }, e.prototype.CG603 = function (t, e) {
        var i = this.getBytes(),
            o = e.length;
        i.writeByte(t), i.writeShort(o);
        for (var n = 0; o > n; n++) {
            var a = e[n];
            i.writeLong(a)
        }
        this.sendSocket(603, i)
    }, e.prototype.CG_RLBOOK = function (t) {
        for (var e = 0; t[e] && t[e].data;) e++;
        if (e) {
            this.rlIndexs = [];
            var i = this.getBytes();
            i.writeShort(e);
            for (var o = 0; e > o; o++) i.writeInt(t[o].data.id), this.rlIndexs[o] = 1;
            this.sendSocket(605, i)
        }
    }, e.prototype.GC_RLBOOK = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            GameGlobal.layerMgr.getView(UIConst.EQUIPRL);
            ViewText.text("兽诀熔炼成功")
        } else 2 == i ? ViewText.text("熔炼数量不能超过9件") : ViewText.text("操作频繁,请稍等片刻");
        this.rlIndexs = null
    }, e.prototype.GC604 = function (t, e) {
        var i = (e.readByte(), e.readByte());
        if (1 == i);
        else {
            var o = ["熔炼失败", "熔炼成功", "背包已满", "已达最高级", "操作频繁,请稍等片刻"];
            ViewText.text(o[i])
        }
    }, e.prototype.CG_607 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(607, e)
    }, e.prototype.GC_608 = function (t, i) {
        var o = (i.readByte(), i.readByte());
        0 == o ? t.isOpenAutoRL = !1 : 1 == o && (t.isOpenAutoRL = !0), t.notify(e.MSG_AUTO_RL)
    }, e.prototype.GCBagRev = function (t, e) {
        var i = e.readShort();
        for (var o in t.itemMap) delete t.itemMap[o];
        t.items.length = i;
        for (var n = 0; i > n; n++) {
            var a = e.readInt(),
                s = e.readInt(),
                r = new VoItem;
            r.init(a), r.count = s, t.items[n] = r, t.itemMap[a] = r, t.udArg[r.itemType] = 1
        }
        var l = e.readShort();
        t.equips.length = l;
        for (var n = 0; l > n; n++) {
            var h = e.readLong(),
                c = e.readInt(),
                p = new VoEquip;
            p.place = 1, p.init(c), p.lid = h, t.equips[n] = p;
            for (var u = 0, d = e.readShort(); d > u; u++) p.attrDyn || (p.attrDyn = []), p.attrDyn[u] = [e.readShort(), e.readShort()];
            p.updateStr(), p.roleName = e.readUTF(), p.remakeID = e.readByte()
        }
        t.capacity = e.readShort(), t.capacityTimes = e.readShort(), t.notifyChange()
    }, e.prototype.getEquipCount = function (t) {
        for (var e = this.equips, i = e.length, o = 0, n = 0; i > n; n++) {
            var a = e[n];
            a.id == t && o++
        }
        return o
    }, e.prototype.notifyEquipChange = function () {
        this.notify(e.MSG_EQUIPCHANGE)
    }, e.prototype.GCItmUpd = function (t, e) {
        for (var i = e.readShort(), o = 0; i > o; o++) {
            var n = e.readInt(),
                a = e.readInt();
            t.updateItms(n, a)
        }
        GameGlobal.modelTuJian.invalidNotic(), t.notifyChange()
    }, e.prototype.notifyChange = function () {
        this._dirt || GameGlobal.tick.addInterv(this._onTickC, 1, this, !0)
    }, e.prototype._onTickC = function (t) {
        t._dirt = !1, t.notify(e.MSG_CHANGE)
    }, e.prototype.CG_USEITEM_207 = function (t, e, i) {
        var o = this.getBytes();
        o.writeInt(t), o.writeShort(e), o.writeByte(i), this.sendSocket(207, o)
    }, e.prototype.GC_USEITEM_208 = function (t, e) {
        var i = e.readByte(),
            o = ["失败", null, "物品使用数量已达日限制", "使用后大于了体力上限", "等级不符", "物品不可直接使用", "职业不符", "物品数量不足", "背包已满", "数量不足", "传入参数异常", "道具不存在", "对方不在线"],
            n = o[i];
        n && ViewText.text(n)
    }, e.prototype.CG209 = function (t, e, i) {
        var o = this.getBytes();
        o.writeLong(t), o.writeShort(e), o.writeInt(i), this.sendSocket(209, o)
    }, e.prototype.GCEqdUpd = function (t, e) {
        for (var i = e.readShort(), o = 0; i > o; o++) {
            for (var n = e.readLong(), a = e.readInt(), s = e.readByte(), r = t.updateEqds(n, a, s), l = 0, h = e.readShort(); h > l; l++) {
                var c = e.readShort(),
                    p = e.readShort();
                r && s > 0 && (r.attrDyn || (r.attrDyn = []), r.attrDyn[l] = [c, p], r.updateStr())
            }
            var u = e.readUTF(),
                d = e.readByte();
            r && (r.roleName = u, r.remakeID = d), t.notifyChange()
        }
    }, e.prototype.removeTool = function (t) {
        var e = this.equips.indexOf(t); - 1 != e && (this.equips.splice(e, 1), this.notifyChange())
    }, e.prototype.addEquip = function (t) {
        this.equips.push(t)
    }, e.prototype.getRedEqs = function () {
        var t = this.equips,
            e = [];
        for (var i in t) 6 == t[i].quality && e.push(t[i]);
        return e
    }, e.prototype.getEquipByLID = function (t) {
        for (var e = this.equips, i = 0, o = e.length; o > i; i++)
            if (e[i].lid == t) return e[i];
        return null
    }, e.prototype.getItemPageItems = function () {
        for (var t = this.items, e = [], i = 0, o = t.length; o > i; i++) 10 != t[i].itemType && e.push(t[i]);
        return e
    }, e.prototype.getCZEquips = function () {
        for (var t = (GameGlobal.modelRole.voMine, this.equips), e = [], i = 0, o = t.length; o > i; i++) {
            var n = t[i];
            5 == n.quality && e.push(n)
        }
        return ArrayUtil.cleannull(e), e
    }, e.prototype.updateItms = function (t, e) {
        var i = this.itemMap[t];
        if (e) i || (i = VoItem.create(), i.init(t), this.itemMap[t] = i, this.items.push(i), this.udArg[i.itemType] = 1), i.count = e;
        else if (i) {
            delete this.itemMap[t];
            var o = this.items.indexOf(i);
            this.items.splice(o, 1), this.udArg[i.itemType] = 1, EventCenter.sendMsg(BagEvent.DELETE_ITEM, i)
        }
    }, e.prototype.updateEqds = function (t, e, i) {
        var o = this.equips.length,
            n = this.equips;
        if (0 == i) {
            for (var a = 0; o > a; a++)
                if (n[a].lid == t) {
                    n.splice(a, 1);
                    break
                } return null
        }
        var s = new VoEquip;
        return s.init(e), s.lid = t, n.push(s), s.place = 1, s
    }, e.prototype.getBestEquip = function (t, e, i) {
        void 0 === i && (i = 4);
        for (var o = this.equips, n = null, a = 0, s = o.length; s > a; a++) {
            var r = o[a];
            r.quality <= i && r.position == t && r.level == e && (!n || r.zhanli > n.zhanli) && (n = r)
        }
        return n
    }, e.prototype.getBestLVEquipsMap = function (t, e) {
        void 0 === t && (t = null), void 0 === e && (e = 4), t || (t = Util.getTempObj());
        for (var i = this.equips, o = 0, n = i.length; n > o; o++) {
            var a = i[o];
            if (a.quality <= e) {
                var s = 1e4 * a.position + a.level,
                    r = t[s];
                (!r || a.zhanli > r.zhanli) && (t[s] = a)
            }
        }
        return t
    }, e.MATCHITEMTYPE = function (t, e) {
        return t.itemType == e ? !0 : !1
    }, e.prototype.getItemsByTypes = function (t, e) {
        void 0 === e && (e = null), e || (e = []);
        for (var i = this.items, o = 0, n = i.length; n > o; o++) {
            var a = i[o];
            a.itemType == t && e.push(a)
        }
        return e
    }, e.MATCHEQUIPPOS = function (t, e) {
        return t.position == e ? !0 : !1
    }, e.MATCHWORSESKILLBOOK = function (t) {
        return 10 == t.itemType && t.quality <= 3 ? !0 : !1
    }, e.prototype.filterItem = function (t, e, i, o, n) {
        void 0 === e && (e = null), void 0 === i && (i = null), void 0 === o && (o = null), void 0 === n && (n = null), e || (e = Util.getTempArr());
        for (var a = this.items, s = 0, r = a.length; r > s; s++) t(a[s], i, o, n) && e.push(a[s]);
        return e
    }, e.prototype.filterEquip = function (t, e, i, o, n) {
        void 0 === e && (e = null), void 0 === i && (i = null), void 0 === o && (o = null), void 0 === n && (n = null), e || (e = Util.getTempArr());
        for (var a = this.equips, s = 0, r = a.length; r > s; s++) t(a[s], i, o, n) && e.push(a[s]);
        return e
    }, e.prototype.checkBagTip = function () {
        for (var t = this.items, e = GameGlobal.modelRole.voMine.level, i = !1, o = 0, n = t.length; n > o; o++) {
            var a = t[o];
            if (e >= a.level && 1 == a.cfg.ope) {
                i = !0;
                break
            }
        }
        return i
    }, e.prototype.getIdleCapacity = function () {
        var t = this.capacity - this.equips.length;
        return t
    }, e.prototype.checkRL = function () {
        var t = this.capacity - this.equips.length;
        return 50 >= t
    }, e.prototype.checkRLTips = function (t) {
        void 0 === t && (t = 50);
        var e = GameGlobal.modelBag.checkRL();
        if (!t || e) {
            if (VCrossTeamFuBenMain.joinSel = !1, t) var i = Lang.reTxt("背包空间不足{0},是否前往熔炼?", t);
            else var i = "背包空间不足,是否前往熔炼?";
            return ViewAlert.show(i, this.onAlertOK, ViewAlert.OKANDCANCEL), !0
        }
        return !1
    }, e.prototype.onAlertOK = function () {
        GameGlobal.layerMgr.open(UIConst.EQUIPRL)
    }, e.MSG_CHANGE = "c", e.MSG_EQUIPCHANGE = "ec", e.MSG_AUTO_RL = "auto", e
}(BaseModel);
__reflect(ModelBag.prototype, "ModelBag");
var ModelEquip = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(374, this.GC_REDEQCOMBIN, this), e.regHand(376, this.GC_UNDRESSEQUIP, this), e.regHand(378, this.GC_REMAKE, this), e.regHand(4322, this.GC4322, this)
    }, e.prototype.CG_REDEQCOMBIN = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(373, e)
    }, e.prototype.GC_REDEQCOMBIN = function (t, i) {
        var o = i.readByte(),
            n = i.readLong();
        if (1 == o) {
            var a = GameGlobal.modelBag.getEquipByLID(n);
            a && GameGlobal.layerMgr.open(UIConst.EQUIPTIP, a), t.notify(e.MSG_COMBIN)
        }
    }, e.prototype.GC_UNDRESSEQUIP = function (t, e) {
        var i = e.readLong();
        GameGlobal.modelRole.unDressEquip(i)
    }, e.prototype.CG_REMAKE = function (t) {
        if (!this.isFlag(377)) {
            this.addDelayFlag(377, 1e4);
            var e = this.getBytes();
            e.writeLong(t), this.sendSocket(377, e)
        }
    }, e.prototype.GC_REMAKE = function (t, i) {
        t.removeFlage(377);
        var o = (i.readByte(), i.readLong()),
            n = i.readByte(),
            a = GameGlobal.modelRole.getEqByLid(o);
        a || (a = GameGlobal.modelBag.getEquipByLID(o)), a && (a.remakeID = n, t.notify(e.MSG_REMAKERET, o))
    }, e.prototype.CG_DRESS1EQ = function (t, e) {
        var i = this.getBytes();
        i.writeLong(t), i.writeByte(e), this.sendSocket(379, i)
    }, e.prototype.checkNotick = function () {
        for (var t = !1, e = 0; 8 > e && !(t = this.checkNotickReplace(e)); e++);
        return t
    }, e.prototype.checkNotickReplace = function (t) {
        for (var i = !1, o = GameGlobal.modelRole.eqDts, n = GameGlobal.modelRole.voMine, a = o[t], s = e.getPosType(t), r = GameGlobal.modelRole.voMine.level, l = GameGlobal.modelBag.getBagEquipByType(s, Util.getTempArr()), h = 0, c = l.length; c > h; h++) {
            var p = l[h];
            if ((3 == p.job || p.job == n.job) && r >= p.level) {
                if (!a) {
                    i = !0;
                    break
                }
                if (p.quality < 6 && a.zhanli < p.zhanli && r >= p.level) {
                    i = !0;
                    break
                }
            }
        }
        return i
    }, e.prototype.CG4321 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeShort(e), this.sendSocket(4321, i)
    }, e.prototype.GC4322 = function (t, i) {
        var o = i.readByte(),
            n = i.readByte();
        if (1 == o) {
            var a = VoItem.create(),
                s = CFG_Equip.LIB_CLHECHENG[n].xdj.split(",")[1];
            a.init(s), t.notify(e.MSG_CAILIAOCOMBIN);
            var r = GameGlobal.layerMgr.getView(UIConst.CLHECHENGPAGE);
            r.setNum(1)
        } else 4 == o && ViewText.text("新道具不存在！")
    }, e.getPosType = function (t) {
        var e = this.posSaveArr;
        return e[t]
    }, e.getEquipTName = function (t) {
        return this.equipNames[t]
    }, e.getTypePos = function (t) {
        return this.posArr[t]
    }, e.getRemakeTName = function (t) {
        var e = CFG_Equip.LIB_EQREMAKE[t];
        return e ? e.mc : ""
    }, e.prototype.hasAnyEqByQuality = function (t) {
        var e = GameGlobal.modelRole.eqDts;
        for (var i in e) {
            var o = e[i];
            if (o && o.quality == t) return !0
        }
        for (var n = GameGlobal.modelBag.equips, a = 0, s = n.length; s > a; a++) {
            var o = n[a];
            if (o && o.quality == t) return !0
        }
        return !1
    }, e.MSG_COMBIN = "MSG_COMBIN", e.MSG_REMAKERET = "MSG_REMAKERET", e.MSG_CAILIAOCOMBIN = "MSG_CAILIAOCOMBIN", e.posSaveArr = [1, 2, 3, 4, 5, 5, 6, 6], e.posArr = [null, [0],
        [1],
        [2],
        [3],
        [4, 5],
        [6, 7]
    ], e.qualityName = ["", "", "绿装", "蓝装", "紫装", "橙装", "红装"], e.posNames = ["武器", "头盔", "衣服", "项链", "左护腕", "右护腕", "左戒指", "右戒指"], e.equipNames = ["", "武器", "头盔", "衣服", "项链", "护腕", "戒指"], e
}(BaseModel);
__reflect(ModelEquip.prototype, "ModelEquip");
var VBagGrid = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.locate = Locate.bagpan, e.skinName = "resource/eui_skins/game/bag/bagGrid.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        var e = this;
        e.touchChildren = !1, e.imgSel.visible = !1
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            var e = this;
            if (e._data = t, t || e.imgSel.$setVisible(!1), t ? (1 == t.quality ? e.bg1.source = "CM1_json.grid1" : e.bg1.source = "CM1_json.bm_gridbg" + t.quality, e.icon.source = IconUtil.getIconUrl(t.icon), this.txtLimit.visible = VoZhiShengYiJie.isZhiShengDan(t.id)) : (e.bg1.source = "CM1_json.grid1", e.icon.source = null), 1 == t.type) {
                e.numLab.visible = !0, e.numLab.$setText(t.count + ""), e.label.$setText(t.name);
                var i = GameGlobal.modelRole.voMine.level;
                t.cfg ? e.imgTip.visible = 1 == t.cfg.ope && i >= t.level : e.imgTip.visible = !1
            } else e.label.visible = !(e.numLab.visible = !1), e.label.$setText("Lv." + t.level), e.imgTip.visible = !1
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, this.imgSel.visible = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onTap = function (t) {
        var e = this;
        if (e._data) switch (e.locate) {
            case Locate.bagpan:
                1 == e._data.type ? GameGlobal.layerMgr.open(UIConst.ITEMTIP, e._data) : 2 == e._data.type && GameGlobal.layerMgr.open(UIConst.EQUIPTIP, e._data);
                break;
            case Locate.rolepan:
                GameGlobal.layerMgr.open(UIConst.ROLEQUIPDETAIL, e._data)
        }
    }, e.prototype.removeEvent = function () {
        this.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTap, this)
    }, e
}(eui.Component);
__reflect(VBagGrid.prototype, "VBagGrid", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VEquipChosen = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/bag/VEquipChSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.addCloseListen(e.btnClose), e.addCloseListen(e.btnReturn), e.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e)
    }, e.prototype.onHand = function (t) {
        var e = this,
            i = (e.container.numChildren, []);
        e.container.$children.filter(function (t) {
            return 1 == t.selected ? (i.push(t.data), !0) : void 0
        });
        var o = GameGlobal.layerMgr.getView(UIConst.EQUIPRL);
        o && o.onAdd(i), GameGlobal.layerMgr.close(e.id)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.onUpdate()
    }, e.prototype.onUpdate = function () {
        for (var t = this; t.container.numChildren;) t.container.getChildAt(0).dispose();
        for (var e = GameGlobal.modelBag.equips, i = e.length, o = 0; i > o; o++) {
            var n = RLItem.create(),
                a = e[o];
            a.level >= GameGlobal.modelRole.voMine.level || a.quality >= 5 || (n.data = a, n.choose = !1, t.container.addChild(n))
        }
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VEquipChosen.prototype, "VEquipChosen");
var ViewBagPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._st = -1, e.skinName = "resource/eui_skins/game/BagPanel.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this;
        t.base.title = "背包", t.base.createPageGrp().createTabGroup(), t.addCloseListen(t.base.btnClose), t.addCloseListen(t.base.btnReturn), DisplayUtil.popBtnStyle(t.btnAdd), t.base.addTab("道具", 0), t.base.addTab("装备", 1), t.base.addTab("兽决", 2), t.gridDatas = new eui.ArrayCollection, t.gridList.itemRenderer = VBagGrid, t.gridList.dataProvider = t.gridDatas, t.base.listenTabClick(t.onTbtnT, t), t.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onAddGD, t), t.btnRL.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onRL, t), t.gridList.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onListTouch, t)
    }, e.prototype.onRL = function (t) {
        1 == this._st ? GameGlobal.layerMgr.open(UIConst.EQUIPRL) : 2 == this._st && GameGlobal.layerMgr.open(UIConst.EQUIPRL, 1)
    }, e.prototype.onAddGD = function (t) {
        GameGlobal.modelBag.capacityTimes >= 100 ? ViewText.text("已开启全部格子") : GameGlobal.layerMgr.open(UIConst.OPENGRID)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setCurretSt(0), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.update, this), GameGlobal.modelPlayer.setMainMenuSt(2)
    }, e.prototype.onClose = function () {
        this.setCurretSt(-1), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.update), GameGlobal.modelPlayer.setMainMenuSt(0)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.update = function () {
        var t, e = this;
        1 == e._st ? (t = GameGlobal.modelBag.equips.concat(), e.btnRL.visible = !0) : 0 == e._st ? (t = GameGlobal.modelBag.getItemPageItems(), e.btnRL.visible = !1) : 2 == e._st && (t = GameGlobal.modelBag.getItemsByTypes(10), e.btnRL.visible = !0), e.fillGrids(t), e.gridCap.text = "背包容量:" + t.length + "/" + GameGlobal.modelBag.capacity, e.checkTip()
    }, e.prototype.checkTip = function () {
        var t = !1;
        t = t || GameGlobal.modelBag.checkBagTip(), this.base.getTabByIdx(0).setNoticVis(t), this.btnRL.setNoticeVis(GameGlobal.modelBag.checkRL())
    }, e.prototype.fillGrids = function (t) {
        DisplayUtil.fillDataAC(this.gridDatas, t)
    }, e.prototype.onTbtnT = function (t) {
        var e = t.sort;
        this.setCurretSt(e)
    }, e.prototype.setCurretSt = function (t) {
        switch (this._st = t, this.base.setTabSelIdx(t), this.scroll.stopAnimation(), t) {
            case 1:
                this.scroll.height = 650, this.scroll.viewport.scrollV = 0, this.grpCapacity.visible = !0, this.update();
                break;
            case 0:
                this.scroll.height = 750, this.scroll.viewport.scrollV = 0, this.grpCapacity.visible = !1, this.update();
                break;
            case 2:
                this.scroll.height = 650, this.scroll.viewport.scrollV = 0, this.grpCapacity.visible = !1, this.update()
        }
    }, e.prototype.onListTouch = function (t) {
        var e = t.target;
        if (e._data) {
            var i = e._data;
            if (2 == i.type) i.uiArg = 1, GameGlobal.layerMgr.open(UIConst.EQUIPTIP, i);
            else {
                var o = i;
                1 == o.cfg.ope ? GameGlobal.layerMgr.open(UIConst.ITEMUSE, i) : 2 == o.cfg.ope ? GameGlobal.layerMgr.open(UIConst.ITEMLIBAOUSED, o) : 3 == o.cfg.ope ? GameGlobal.layerMgr.open(UIConst.IT_HE_CHENG, i) : 4 == o.cfg.ope ? GameGlobal.layerMgr.open(UIConst.ITEMGIVE, i) : GameGlobal.layerMgr.open(UIConst.ITEMTIP, i)
            }
        }
    }, e
}(BaseEUIView);
__reflect(ViewBagPnl.prototype, "ViewBagPnl");
var ViewEquipDetail = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "EquipDetail", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.textStr = new ImageText, this.textStr.fx = 20, this.textStr.fy = 156, this.textStr.container = this.mainGroup, this.textStr.charFunc = ImageText.STRFUNC
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.vo = e, i.lbName.text = e.name, i.lbName.textColor = Color.getColorInt(e.quality), i.txtPart.text = ModelEquip.getEquipTName(e.position), i.txtLv.text = e.level + "", i.txtJob.text = ModelRole.jobs[e.job], i.textStr.setText("z" + e.zhanli);
        for (var o = "", n = 0; n < e.attr.length; n++) {
            var a = e.attr[n][0],
                s = e.attr[n][1],
                r = CFG_ATTR.LIB[a].n + ":" + s;
            o += 0 == n ? r : "\n" + r
        }
        i.txtAtt.text = o, i.grid.data = e;
        var l = DisplayUtil;
        if (e.quality >= 6) {
            if (e.attrDyn && e.attrDyn.length) var h = ConfigHelp.getAttrText(e.attrDyn, "\n");
            else h = CFG_Equip.getEQExtraAttrStr(e.id);
            i.txtAttExtra.text = h, l.addBy(i.extraGrp, i.allAttrGrp, 1), e.roleName ? i.lbRoleName.text = e.roleName : i.lbRoleName.text = "", e.extraStr ? i.lbScore.text = "" + e.extraStr : i.lbScore.text = ""
        } else l.remove(i.extraGrp);
        if (e.remakeID) {
            l.addBy(i.suitGrp, i.allAttrGrp);
            var c = CFG_Equip.LIB_EQREMAKE[e.remakeID];
            c && (i.lbSuitName.text = c.mc, i.lbSuitDes.text = c.tzwz)
        } else l.remove(i.suitGrp);
        var p = GameGlobal.modelRole.voMine.level;
        p >= e.level && e.quality >= 6 && 1 == e.uiArg && -1 == e.dressingpos ? (l.addBy(i.dressGrp, i.allAttrGrp), 5 == e.cfg.p || 6 == e.cfg.p ? (l.addBy(i.btnDress2, i.dressGrp), i.btnDress1.label = "穿戴(左)", i.btnDress2.label = "穿戴(右)") : (l.remove(i.btnDress2), i.btnDress1.label = "穿戴")) : l.remove(i.dressGrp)
    }, e.prototype.onClose = function () {
        this.vo && (this.vo.uiArg = null)
    }, e.prototype.onSize = function () {
        var t = GameGlobal.stage;
        this.width = t.stageWidth, this.height = t.stageHeight
    }, e.prototype.onT = function (t) {
        t.target != this.btnDress1 && t.target != this.btnDress2 ? this.closeHandler() : this.onDress(t)
    }, e.prototype.onDress = function (t) {
        var e = ModelEquip.getTypePos(this.vo.cfg.p);
        if (t.target == this.btnDress1) var i = e[0];
        else i = e[1];
        GameGlobal.modelEquip.CG_DRESS1EQ(this.vo.lid, i), this.closeHandler()
    }, e
}(BaseEUIView);
__reflect(ViewEquipDetail.prototype, "ViewEquipDetail");
var ViewEquipRL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.onRlS = [], e.selectedArr = [], e.effing = !1, e.skinName = "resource/eui_skins/game/bag/EquipRLSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.base.title = "熔炼", e.addCloseListen(e.base.btnClose), e.addCloseListen(e.base.btnReturn), e.grids = [];
        for (var i = 0; 9 > i; i++) e.grids.push(e["g" + i]);
        DisplayUtil.popBtnStyle(e.btnRL), DisplayUtil.popBtnStyle(e.btnRL0), DisplayUtil.popBtnStyle(e.selGrp), e.btnRL.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onRLT, e), e.btnRL0.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onRL2, e), e.selGrp.addEventListener(egret.TouchEvent.TOUCH_TAP, e.autoRLClick, e)
    }, e.prototype.onRL2 = function () {
        if (GameGlobal.modelRole.voMine.vip <= 0 && GameGlobal.modelRole.voMine.level < 80) return void ViewText.text("vip1或80级开启熔炼50件");
        for (var t = this, e = GameGlobal.modelRole, i = GameGlobal.modelBag.equips, o = i.length, n = Util.getTempArr(), a = 0, s = e.voMine, r = GameGlobal.modelBag.getBestLVEquipsMap(), l = o - 1; l >= 0; l--) {
            var h = i[l];
            if (!(h.quality >= 5)) {
                if ((h.job == s.job || 3 == h.job) && h.level >= e.voMine.level) {
                    if (h.zhanli > e.getDressEqStr(h.position)) {
                        var c = 1e4 * h.position + h.level,
                            p = r[c];
                        if (p && h.lid == p.lid) continue
                    }
                } else if ((h.job == s.job || 3 == h.job) && h.zhanli > e.getDressEqStr(h.position)) {
                    var c = 1e4 * h.position + h.level,
                        p = r[c];
                    if (p && h.lid == p.lid) continue
                }
                if (n.push(h.lid), a++, a >= 50) break
            }
        }
        n.length && (t.showEff(), GameGlobal.modelBag.CG603(2, n), GameGlobal.modelBag.deleteEquips(t.onRlS))
    }, e.prototype.onAutoRL = function () {
        GameGlobal.modelRole.voMine.vip < 5 ? this.imgSel.visible = !1 : this.imgSel.visible = GameGlobal.modelBag.isOpenAutoRL
    }, e.prototype.autoRLClick = function () {
        GameGlobal.modelBag.isOpenAutoRL ? GameGlobal.modelBag.CG_607(0) : GameGlobal.modelRole.voMine.vip < 5 ? ViewText.text("VIP等级达到5级才可开启！") : GameGlobal.modelBag.CG_607(1)
    }, e.prototype.onOpen = function (e) {
        var i = this;
        t.prototype.onOpen.call(this, e), e || (e = 0), GameGlobal.modelBag.openType = e, 0 == GameGlobal.modelBag.openType ? (this.selGrp.visible = !0, i.setOnKeyVis(!0), i.lbDes.textFlow = HtmlUtil.parse("多余的装备可进行熔炼,熔炼\n可获得<font color='#d95514'>精炼石。</font>\n<font color='#6d7106'>熔炼自动筛选无用装备,也\n可手动选择装备哦！</font>")) : (this.selGrp.visible = !1, i.lbDes.textFlow = HtmlUtil.parse("多余的兽诀可进行熔炼\n可获得<font color='#d95514'>银两</font>"), i.setOnKeyVis(!1)), i.onUpdate(), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, i.onUpdate, i), GameGlobal.modelBag.on(ModelBag.MSG_AUTO_RL, i.onAutoRL, i), this.onAutoRL(), GameGlobal.modelRole.voMine.vip > 0 || GameGlobal.modelRole.voMine.level >= 80 ? i.btnRL0.enabled = !0 : i.btnRL0.enabled = !1
    }, e.prototype.onUpdate = function () {
        0 == GameGlobal.modelBag.openType ? this.updateEquip() : this.updatePetSkill()
    }, e.prototype.checkSelected = function () {
        for (var t = GameGlobal.modelBag, e = this.selectedArr.length - 1; e >= 0; e--) {
            var i = this.selectedArr[e];
            t.getEquipByLID(i) || this.selectedArr.splice(e, 1)
        }
    }, e.prototype.updateEquip = function () {
        for (var t = this, e = GameGlobal.modelRole, i = 0, o = t.grids.length; o > i; i++) t.grids[i].setVo(null);
        if (this.checkSelected(), t.onRlS.length = 0, this.selectedArr.length)
            for (var i = 0; 9 > i; i++) {
                var n = GameGlobal.modelBag.getEquipByLID(this.selectedArr[i]),
                    a = t.grids[i];
                a.setVo(n)
            } else
                for (var s = GameGlobal.modelBag.equips, r = s.length, l = 0, h = r - 1, c = GameGlobal.modelRole.voMine, p = GameGlobal.modelBag.getBestLVEquipsMap(); 9 > l && h >= 0;) {
                    var u = s[h];
                    if (h--, !(u.quality >= 5)) {
                        if (u.level >= c.level && (u.job == c.job || 3 == u.job)) {
                            if (u.zhanli > e.getDressEqStr(u.position)) {
                                var d = 1e4 * u.position + u.level,
                                    f = p[d];
                                if (f && u.lid == f.lid) continue
                            }
                        } else if ((u.job == c.job || 3 == u.job) && u.zhanli > e.getDressEqStr(u.position)) {
                            var d = 1e4 * u.position + u.level,
                                f = p[d];
                            if (f && u.lid == f.lid) continue
                        }
                        var a = t.grids[l];
                        a.setVo(u), t.onRlS.push(u.lid), l++
                    }
                }
    }, e.prototype.updatePetSkill = function () {
        for (var t = this, e = GameGlobal.modelBag.filterItem(ModelBag.MATCHWORSESKILLBOOK), i = Math.min(9, e.length), o = 0; i > o; o++) {
            var n = t.grids[o];
            n.setVo(e[o])
        }
        for (; 9 > o; o++) t.grids[o].setVo(null)
    }, e.prototype.onAdd = function (t) {
        for (var e = this, i = 0, o = e.grids.length; o > i; i++) e.grids[i].setVo(null);
        for (var n = t.length, a = 0, s = 0; n > s; s++) {
            var r = e.grids[s],
                l = t[s];
            if (r.setVo(l), e.selectedArr.push(l.lid), a++, a >= 9) break
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.selectedArr.length = 0, GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onUpdate), GameGlobal.modelBag.off(ModelBag.MSG_AUTO_RL, this.onAutoRL, this)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.onRLT = function () {
        0 == GameGlobal.modelBag.openType ? (this.showEff(), this.selectedArr.length ? (GameGlobal.modelBag.deleteEquips(this.selectedArr), GameGlobal.modelBag.CG603(1, this.selectedArr)) : this.onRlS.length && (GameGlobal.modelBag.deleteEquips(this.onRlS), GameGlobal.modelBag.CG603(1, this.onRlS))) : this.bookRL()
    }, e.prototype.bookRL = function () {
        return GameGlobal.modelRole.voMine.level < 60 ? void ViewText.text("60级以后才能熔炼技能书") : (this.showEff(), void GameGlobal.modelBag.CG_RLBOOK(this.grids))
    }, e.prototype.showEff = function () {
        if (!this.effing) {
            for (var t = 0; 9 > t; t++) {
                var e = this.grids[t];
                e.data && EffectMgr.addEff("uieff/dzsuccess", e.parent, e.x + 45, e.y + 45, 500, 500)
            }
            GameGlobal.tick.addInterv(this.onEffend, 500, this, !0)
        }
    }, e.prototype.onEffend = function () {
        this.effing = !1
    }, e.prototype.setOnKeyVis = function (t) {
        t ? DisplayUtil.addBy(this.btnRL0, this.btnGroup) : DisplayUtil.remove(this.btnRL0)
    }, e.prototype.guide = function () {
        QuestGuideArrow.getIns().guideTo(this.btnRL, 109, 34)
    }, e.prototype.guideClose = function () {
        var t = this.base.btnReturn;
        QuestGuideArrow.getIns().guideTo(this, t.x + 30, t.y + 30)
    }, e
}(BaseEUIView);
__reflect(ViewEquipRL.prototype, "ViewEquipRL");
var Locate;
! function (t) {
    t[t.bagpan = 1] = "bagpan", t[t.rolepan = 2] = "rolepan"
}(Locate || (Locate = {}));
var ViewGrid = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.itemIndex = -1, e.locate = Locate.bagpan, e._isShowCount = !0, e.isShowSuit = !0, e.isShowingSuit = !1, e.pos = 0, e.showOne = !1, e._isShowEff = !1, e._isDispose = !1, e.skinName = "ViewGridSkin", e
    }
    return __extends(e, t), e.create = function () {
        var t = this.POOL.length ? this.POOL.shift() : new e;
        return t._isDispose = !1, t
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.lbCount.visible = !1, this.chosen.visible = !1, this.txtLv.visible = !1, this.mainGroup.height = this.width
    }, e.prototype.enableTip = function () {
        this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.disableTip = function () {
        this.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this.setData(t)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.create_txtLimit = function () {
        this.txtLimit || (this.txtLimit = new eui.Label, this.txtLimit.x = 8, this.txtLimit.y = 62, this.addChild(this.txtLimit))
    }, e.prototype.showTagGrp = function () {
        if (!this.tagGrp) {
            this.tagGrp = new eui.Group, this.tagGrp.touchEnabled = this.tagGrp.touchChildren = !1;
            var t = new eui.Image;
            t.source = "CMS1_json.labelBGA", t.scaleX = .6, t.scaleY = .7, this.tagGrp.addChild(t), this.lbtag = new eui.Label, this.lbtag.x = 3, this.lbtag.y = 26, this.lbtag.size = 20, this.lbtag.rotation = 317, this.lbtag.text = "狂欢", this.tagGrp.addChild(this.lbtag), this.addChild(this.tagGrp)
        }
        this.tagGrp.visible = !0
    }, e.prototype.setData = function (t) {
        if (this._data = t, t) {
            1 == t.quality ? this.bg.source = "CM1_json.grid1" : this.bg.source = "CM1_json.bm_gridbg" + t.quality, this.imgIcon.source = IconUtil.getIconUrl(t.icon);
            var e = VoZhiShengYiJie.isZhiShengDan(t.id);
            e ? (this.create_txtLimit(), this.txtLimit.visible = !0) : this.txtLimit && (this.txtLimit.visible = !1)
        } else this.imgIcon.source = null, this.bg.source = "CM1_json.grid1";
        t && this._isShowCount ? t.count > 1 || this.showOne && 1 == t.count ? (this.lbCount.visible = !0, this.lbCount.text = ConfigHelp.getNumText(t.count)) : this.showZero ? (this.lbCount.text = "0", this.lbCount.visible = !0) : this.lbCount.visible = !1 : this.lbCount.visible = !1, this.updateEff(), this.checkShowSuit()
    }, e.prototype.updateEff = function () {
        var t = this._data;
        if (this._isShowEff && t && t.quality >= 5) {
            var e = "";
            e = 3 == t.type && 0 != t.cfg.tx ? "uieff/grid" + t.cfg.tx : "uieff/grid" + t.quality, this._eff ? this._eff.setVal(e) : this._eff = EffectMgr.addEff(e, this, 45, 43, 1e3, -1, !0)
        } else this._eff && (EffectMgr.getIns().removeEff(this._eff), this._eff = null)
    }, e.prototype.isShowEff = function (t) {
        this.isShowEff != t && (this._isShowEff = t, this.$stage && this.updateEff())
    }, e.prototype.setTxtVis1 = function (t) {
        this.lbCount.visible = t
    }, e.prototype.setTxtVis2 = function (t) {
        this.txtLv.visible = t
    }, e.prototype.setLvTxt = function (t) {
        this.txtLv.text = t
    }, Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, this.chosen.visible = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onT = function (t) {
        var e = this;
        if (e._data) {
            switch (e.locate) {
                case Locate.bagpan:
                    1 == e._data.type ? GameGlobal.layerMgr.open(UIConst.ITEMTIP, e._data) : 2 == e._data.type ? GameGlobal.layerMgr.open(UIConst.EQUIPTIP, e._data) : 3 == e._data.type ? GameGlobal.layerMgr.open(UIConst.FUWENTIP, e._data) : 4 == e._data.type ? GameGlobal.layerMgr.open(UIConst.SKILLTIP, e._data) : 0 != e._data.type && GameGlobal.layerMgr.open(UIConst.CURRENCYTIP, e._data.type);
                    break;
                case Locate.rolepan:
                    GameGlobal.layerMgr.open(UIConst.ROLEQUIPDETAIL, e._data)
            }
            t.stopImmediatePropagation()
        }
    }, e.prototype.dispose = function () {
        this._isDispose || (this._data = null, this._eff && (EffectMgr.getIns().removeEff(this._eff), this._eff = null), this.imgIcon.visible = !0, this.setName(null), this.disableTip(), this.$setX(0), this.$setY(0), this.tagGrp && this.tagGrp.visible && (this.tagGrp.visible = !0), e.POOL.push(this)), this._isDispose = !0, this.describe.visible = !1, this.describe.text = ""
    }, e.prototype.setDescribe = function (t) {
        this.describe.visible = !0, this.describe.text = t
    }, e.prototype.setName = function (t) {
        this._nameStr != t && (this._nameStr = t, t ? (this._lbName || (this._lbName = new eui.Label, this._lbName.$setTextColor(6835267), this._lbName.$setSize(18), this._lbName.horizontalCenter = 0, this._lbName.bottom = -20, this.addChild(this._lbName)), DisplayUtil.addBy(this._lbName, this), this._lbName.text = t) : this._lbName && (this._lbName.text = "", DisplayUtil.remove(this._lbName)))
    }, e.prototype.updateName = function () {
        this._data && (this.setName(this._data.name), this._lbName && (this._lbName.textColor = Color.getColorInt(this._data.quality)))
    }, e.prototype.setNameBottom = function (t) {
        this._lbName && (this._lbName.bottom = t)
    }, e.prototype.setShowCount = function (t) {
        this._isShowCount = t, this.lbCount.$setVisible(t)
    }, e.prototype.$onAddToStage = function (e, i) {
        t.prototype.$onAddToStage.call(this, e, i), this._isShowEff && !this._eff && this.updateEff()
    }, e.prototype.$onRemoveFromStage = function () {
        t.prototype.$onRemoveFromStage.call(this), this._eff && (EffectMgr.getIns().removeEff(this._eff), this._eff = null)
    }, e.prototype.checkShowSuit = function () {
        if (this.isShowSuit) {
            var t = this._data;
            t && 2 == t.type && t.remakeID ? this.showSuit(t.remakeID) : this.hideSuit()
        } else this.hideSuit()
    }, e.prototype.showSuit = function (t) {
        this.isShowingSuit || (this.isShowingSuit = !0, this.imgRMType || (this.imgRMType = new eui.Image("CMS1_json.labelBGA"), this.imgRMType.x = 2, this.imgRMType.y = 2, this.imgRMType.width = this.imgRMType.height = 50, this.lbRMType = new eui.Label, this.lbRMType.size = 18, this.lbRMType.textColor = 14540253, this.lbRMType.rotation = -45, this.lbRMType.horizontalCenter = -28, this.lbRMType.verticalCenter = -26), DisplayUtil.addBy(this.imgRMType, this), DisplayUtil.addBy(this.lbRMType, this)), this.lbRMType.text = CFG_Equip.LIB_EQREMAKE[t].mc
    }, e.prototype.hideSuit = function () {
        this.isShowingSuit && (this.isShowingSuit = !1, DisplayUtil.remove(this.imgRMType), DisplayUtil.remove(this.lbRMType))
    }, e.prototype.setGray = function (t) {
        this.filters = t ? [FilterColors.FilterGray] : null, this.isShowEff(!t)
    }, e.POOL = [], e
}(eui.Component);
__reflect(ViewGrid.prototype, "ViewGrid", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VItemGive = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curNum = 1, e.skinName = "ItemGiveSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.rectExml), this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onUse, this), this.btnAdd1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnSub1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnMax.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnMin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.listdata = new eui.ArrayCollection, this.friendlist.itemRenderer = VQiXiFriendItem, this.friendlist.dataProvider = this.listdata, this.friendlist.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.listTouchT, this), this.lbselname.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSelnameT, this)
    }, e.prototype.onSelnameT = function () {
        this.lbselname.text = ""
    }, e.prototype.listTouchT = function (t) {
        var e = t.item;
        e ? (this.lbselname.visible = !0, this.lbselname.textFlow = HtmlUtil.underLine(e.name + " X")) : this.lbselname.visible = !1, this.friGrp.visible = !1
    }, e.prototype.onGive = function () {
        var t = this.friGrp;
        if (t.visible) t.visible = !1;
        else {
            var e = this.friendlist.selectedItem;
            if (e && "" != this.lbselname.text) {
                var i = this.getCount();
                return GameGlobal.modelBag.CG209(e.id, this.itemid, i), this.friendlist.selectedIndex = -1, void(this.lbselname.text = "")
            }
            GameGlobal.modelFriend.CG_FriendData(1), t.visible = !0, t.alpha = 0, t.anchorOffsetY = -t.height / 2, egret.Tween.get(t).to({
                anchorOffsetY: 0,
                alpha: 1
            }, 300)
        }
    }, e.prototype.updateFriend = function () {
        for (var t = [], e = GameGlobal.modelFriend.friendList, i = 0; i < e.length; i++) {
            var o = e[i];
            1 == o.friendSt && t.push(o)
        }
        this.lbtipfri.visible = 0 == t.length, DisplayUtil.fillDataAC(this.listdata, t)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.friendlist.selectedIndex = -1, this.lbselname.text = "", this.friGrp.visible = this.lbselname.visible = !1, this.vo = e, this.itemid = this.vo.id, this.lbName.text = this.vo.name, this.grid.setData(this.vo), this.lbDes.text = this.vo.des, this.updateItem(), this.setNum(1), this.lbTitleExml.text = "道具使用", this.btnSure.lbText.text = "赠送", GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onBag, this), GameGlobal.modelFriend.on(ModelFriend.MSG_FLIST, this.updateFriend, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onBag), GameGlobal.modelFriend.off(ModelFriend.MSG_FLIST, this.updateFriend, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.updateItem = function () {
        var t = GameGlobal.modelBag.getItemCount(this.itemid);
        return t ? (this.lbCount.text = "数量:" + t, void(this.lbLevel.text = "等级:" + this.vo.level)) : void this.closeHandler()
    }, e.prototype.onBag = function () {
        this.updateItem(), this.updateUseCount()
    }, e.prototype.onUse = function () {
        var t = (this.itemid, this.getCount());
        if (t > 0) {
            if (GameGlobal.modelRole.voMine.level < this.grid.data.level) return void ViewText.text("等级不足，无法使用");
            this.onGive()
        } else this.closeHandler()
    }, e.prototype.onHand = function (t) {
        var e = this.vo;
        if (1218 != e.id && 1219 != e.id && 1220 != e.id) {
            var i = t.currentTarget;
            switch (i) {
                case this.btnAdd1:
                    this.setNum(this._curNum + 1);
                    break;
                case this.btnSub1:
                    this.setNum(this._curNum - 1);
                    break;
                case this.btnMax:
                    this.setNum(9999999);
                    break;
                case this.btnMin:
                    this.setNum(1)
            }
        }
    }, e.prototype.setNum = function (t) {
        var e = GameGlobal.modelBag.getItemCount(this.itemid);
        1 > t && (t = 1), t > e && (t = e), this._curNum = t, this.updateUseCount()
    }, e.prototype.updateUseCount = function () {
        var t = GameGlobal.modelBag.getItemCount(this.itemid);
        this.lbUseNum.text = this._curNum + "/" + t
    }, e.prototype.getCount = function () {
        var t = this._curNum;
        return t
    }, e
}(BaseEUIView);
__reflect(VItemGive.prototype, "VItemGive");
var VItemHeCheng = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curNum = 1, e.skinName = "resource/eui_skins/game/bag/ItemUseSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.rectExml), this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onUse, this), this.btnAdd1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAdd1, this), this.btnSub1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSub1, this), this.btnMax.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onMax, this), this.btnMin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onMin, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.vo = e, this.itemid = this.vo.id, this.lbName.text = this.vo.name, this.grid.setData(this.vo), this.lbDes.text = this.vo.des, this.updateItem(), this.setNum(this.numOneToolSpend()), this.lbTitleExml.text = "道具合成", this.btnSure.lbText.text = "合成", GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onBag, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onBag)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.updateItem = function () {
        var t = GameGlobal.modelBag.getItemCount(this.itemid);
        return t ? (this.updateUseCount(), this.grid.data = this.vo, this.lbCount.text = "数量:" + t, void(this.lbLevel.text = "等级:" + this.vo.level)) : void this.closeHandler()
    }, e.prototype.onBag = function () {
        this.updateItem()
    }, e.prototype.onUse = function () {
        var t = this.itemid,
            e = this.getCount();
        if (e > 0) {
            if (GameGlobal.modelRole.voMine.level < this.grid.data.level) return void ViewText.text("等级不足，无法使用");
            if (14 == this.vo.cfg.type && this.vo.useParam) {
                var i = this.vo.useParam.huode;
                if (i) {
                    var o = i[0].id,
                        n = i[0].type,
                        a = i[0].num,
                        s = "";
                    if (1 == n) {
                        var r = CFG_Item.LIB[o];
                        r && (s = r.name)
                    } else {
                        var l = CFG_ATTR.LIB[n];
                        l && (s = l.n)
                    }
                    var h = e / this.numOneToolSpend(),
                        c = "合成后,该道具将转化为另一种道具(" + HtmlUtil.color(s + "*" + a * h, "#10a244") + "),确定合成是否继续？";
                    return void ViewAlert.show(c, function () {
                        GameGlobal.modelBag.CG_USEITEM_207(t, e, 0)
                    })
                }
            }
            GameGlobal.modelBag.CG_USEITEM_207(t, e, 0)
        } else this.closeHandler()
    }, e.prototype.onAdd1 = function () {
        var t = this.numOneToolSpend();
        this.setNum(this._curNum + t)
    }, e.prototype.onSub1 = function () {
        var t = this.numOneToolSpend();
        this.setNum(this._curNum - t)
    }, e.prototype.onMax = function () {
        var t = this.numOneToolSpend(),
            e = Math.floor(9999999 / t);
        this.setNum(e)
    }, e.prototype.onMin = function () {
        var t = this.numOneToolSpend(),
            e = Math.floor(1 / t);
        this.setNum(e)
    }, e.prototype.setNum = function (t) {
        var e = GameGlobal.modelBag.getItemCount(this.itemid),
            i = this.numOneToolSpend();
        i > t && (t = i), 1 > t && (t = 1), t > e && (t = e), this._curNum = Math.floor(t / i) * i, this.updateUseCount()
    }, e.prototype.numOneToolSpend = function () {
        var t = this.vo.useParam.xiaohao,
            e = t[0].num;
        return e
    }, e.prototype.updateUseCount = function () {
        var t = GameGlobal.modelBag.getItemCount(this.itemid);
        this.lbUseNum.text = this._curNum + "/" + t
    }, e.prototype.getCount = function () {
        var t = this._curNum;
        return t
    }, e
}(BaseEUIView);
__reflect(VItemHeCheng.prototype, "VItemHeCheng");
var VItemUse = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curNum = 1, e.skinName = "resource/eui_skins/game/bag/ItemUseSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onUse, this), this.btnAdd1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAdd1, this), this.btnSub1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSub1, this), this.btnMax.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onMax, this), this.btnMin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onMin, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.vo = e, this.itemid = this.vo.id, this.lbName.text = this.vo.name, this.grid.setData(this.vo), this.lbDes.text = this.vo.des, this.updateItem(), this.setNum(1), this.lbTitleExml.text = "道具使用", this.btnSure.lbText.text = "使用", GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onBag, this), GameGlobal.modelXSBuff.on(ModelXSBuff.MSG_CANUSEBUFF, this.updateState, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onBag), GameGlobal.modelXSBuff.off(ModelXSBuff.MSG_CANUSEBUFF, this.updateState)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.updateItem = function () {
        var t = GameGlobal.modelBag.getItemCount(this.itemid);
        return t ? (this.lbCount.text = "数量:" + t, void(this.lbLevel.text = "等级:" + this.vo.level)) : void this.closeHandler()
    }, e.prototype.onBag = function () {
        this.updateItem(), this.updateUseCount()
    }, e.prototype.onUse = function () {
        var t = this.itemid,
            e = this.getCount();
        if (e > 0) {
            if (GameGlobal.modelRole.voMine.level < this.grid.data.level) return void ViewText.text("等级不足，无法使用");
            GameGlobal.modelBag.CG_USEITEM_207(t, e, 0), t >= 1714 && 1767 >= t && (GameGlobal.modelXSBuff.CG3633(t, e), GameGlobal.modelXSBuff.once(ModelXSBuff.MSG_CANUSEBUFF, function (i) {
                i && 1 == i ? GameGlobal.modelXSBuff.CG3631(t, e) : i && 5 == i && ViewAlert.show("使用后将顶替当前生效的丹药，<font color='#ff0000'>是否确认使用？</font>", function () {
                    GameGlobal.modelXSBuff.CG3631(t, e)
                })
            }))
        } else this.closeHandler()
    }, e.prototype.updateState = function (t) {
        this.state = t
    }, e.prototype.onAdd1 = function () {
        this.setNum(this._curNum + 1)
    }, e.prototype.onSub1 = function () {
        this.setNum(this._curNum - 1)
    }, e.prototype.onMax = function () {
        this.setNum(9999999)
    }, e.prototype.onMin = function () {
        this.setNum(1)
    }, e.prototype.setNum = function (t) {
        var e = GameGlobal.modelBag.getItemCount(this.itemid);
        1 > t && (t = 1), t > e && (t = e), this._curNum = t, this.updateUseCount()
    }, e.prototype.updateUseCount = function () {
        var t = GameGlobal.modelBag.getItemCount(this.itemid);
        this.lbUseNum.text = this._curNum + "/" + t
    }, e.prototype.getCount = function () {
        var t = this._curNum;
        return t
    }, e
}(BaseEUIView);
__reflect(VItemUse.prototype, "VItemUse");
var VRLGrid = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setVo = function (t) {
        if (this.data = t, t) 1 == t.quality ? this.bg.source = "CM1_json.grid1" : this.bg.source = "CM1_json.bm_gridbg" + t.quality, this.imgIcon.source = IconUtil.getIconUrl(t.icon), 1 == t.type ? this.lbName.text = t.name : this.lbName.text = "Lv." + t.level, t && 1 == t.type && (this.lbNum.text = t.count + ""), this.imgIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onSel, this);
        else {
            this.imgIcon.source = "CMS1_json.bm_Add", this.bg.source = "CM1_json.grid1", this.lbName.text = "", this.lbNum.text = "";
            var e = GameGlobal.modelBag.openType;
            0 == e ? this.imgIcon.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSel, this) : this.imgIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onSel, this)
        }
    }, e.prototype.onSel = function (t) {
        GameGlobal.layerMgr.open(UIConst.VEPCH)
    }, e
}(eui.Component);
__reflect(VRLGrid.prototype, "VRLGrid");
var HuoQuTuJing = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/cailiaohuoqu/HuoQuSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.lb.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return null
        },
        set: function (t) {
            this._v = t;
            var e = CFG_ATTR.LIB_CLHQ[t];
            if (e) {
                var i = e.txt;
                "0" != e.ope ? this.lb.textFlow = HtmlUtil.underLine(i) : this.lb.text = i
            } else i = "敬请期待", this.lb.text = i
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onTouch = function () {
        var t = CFG_ATTR.LIB_CLHQ[this._v],
            e = CFG_ATTR.openBySrc(t);
        if (e) {
            var i = GameGlobal.layerMgr;
            i.close(UIConst.CAILIAOGET), i.close(UIConst.CAILIAOGETS), i.close(UIConst.STORE), i.close(UIConst.FABAO)
        }
    }, e
}(eui.Component);
__reflect(HuoQuTuJing.prototype, "HuoQuTuJing", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VCaiLiaoHuoQu = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.buyNum = 1, e.skinName = "resource/eui_skins/game/cailiaohuoqu/CaiLiaoHuoQu.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.bg), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.addCloseListen(this.btnCancel), this.btnMin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.minT, this), this.btnSub.addEventListener(egret.TouchEvent.TOUCH_TAP, this.subT, this), this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.addT, this), this.btnMax.addEventListener(egret.TouchEvent.TOUCH_TAP, this.maxT, this), this.btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBuyOk, this), this.otherList.itemRenderer = HuoQuTuJing
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i;
        if ("number" == typeof e) {
            if (!(e > 0)) return this.closeHandler(), void ViewText.text("货币不足");
            if (33 == e) return this.closeHandler(), void platform.askOpenRecharge();
            var o = CFG_ATTR.LIB[e];
            o ? (i = VoCurrency.create(), i.init(e), this.src = i.src) : (i = VoItem.create(), i.init(e), this.src = i.cfg.src)
        } else i = e, this.src = i.src;
        if (null == this.src) return ViewText.text(i.name + "不足"), void this.closeHandler();
        this.grid.data = i, this.lbName.text = i.name, this.lbCount.text = "当前拥有:" + i.getOwned();
        var n = this.src.split(","),
            a = n.indexOf("1");
        if (a >= 0) {
            if (GameGlobal.modelShangCheng.CG903(), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_commond, this.onSCInfo, this), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_commond_buy, this.onSCInfo, this), this.storeCFG = CFG_STORE.getStoreItemCFG(i.id), !this.storeCFG) return void this.closeHandler();
            this.termCost = this.storeCFG.xh, this.termCost ? (n.splice(a, 1), DisplayUtil.addBy(this.storeGroup, this.GroupG, 0), this.setBuyNum(1)) : DisplayUtil.remove(this.storeGroup)
        } else DisplayUtil.remove(this.storeGroup);
        n.length ? (this.oterData || (this.oterData = new eui.ArrayCollection, this.otherList.dataProvider = this.oterData), this.oterData.replaceAll(n), DisplayUtil.addBy(this.otherGroup, this.GroupG)) : DisplayUtil.remove(this.otherGroup)
    }, e.prototype.updateCount = function () {
        GameGlobal.modelShangCheng.off(ModelShangCheng.msg_commond, this.onSCInfo, this), GameGlobal.modelShangCheng.off(ModelShangCheng.msg_commond_buy, this.onSCInfo, this)
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.getMaxCount = function () {
        var t = 1e5;
        return t
    }, e.prototype.setBuyNum = function (t) {
        var e = this;
        if (e.termCost) {
            var i = e.grid._data,
                o = Math.min(t, this.getMaxCount());
            if (1 == i.type) {
                var o = GameGlobal.modelBag.getItemCount(i.id);
                e.lbCount.text = "拥有:" + o
            }
            var n = e.termCost[0],
                a = e.termCost[1];
            31 == n ? e.MoneyIcon.source = "MainScreen_json.yl" : 32 == n ? e.MoneyIcon.source = "MainScreen_json.byl" : 33 == n ? e.MoneyIcon.source = "MainScreen_json.bm_yb" : 36 == n ? e.MoneyIcon.source = "icon75_json.36" : 1 == n && (e.MoneyIcon.source = IconUtil.getIconUrl(CFG_Item.LIB[a].icon));
            var s = VoShangCheng.getRemainBuyTimes(this.grid._data.id); - 1 == s ? e.lbBuyNum.text = "" + t : (t = Math.max(1, Math.min(s, t)), e.lbBuyNum.text = t + "/" + s), e.buyNum = t;
            var r = e.termCost[2] * t;
            e.lbCost.text = "" + r
        }
    }, e.prototype.minT = function () {
        var t = this.buyNum - 10;
        this.setBuyNum(t)
    }, e.prototype.subT = function () {
        this.setBuyNum(this.buyNum - 1)
    }, e.prototype.addT = function () {
        this.setBuyNum(this.buyNum + 1)
    }, e.prototype.maxT = function () {
        if (1 == this.buyNum) var t = 10;
        else t = this.buyNum + 10;
        this.setBuyNum(t)
    }, e.prototype.onBuyOk = function () {
        if (this.btnOk.enabled) {
            var t = this.storeCFG;
            t.id >= 1e3 && t.id < 2e3 ? GameGlobal.modelShangCheng.CG905(1, t.id, this.buyNum) : t.id >= 2e3 && t.id < 3e3 ? GameGlobal.modelShangCheng.CG905(2, t.id, this.buyNum) : this.closeHandler(), this.btnOk.enabled = !1, GameGlobal.tick.disableBtn(this.btnOk, 2e3)
        }
    }, e.prototype.onSCInfo = function () {
        GameGlobal.modelShangCheng;
        this.setBuyNum(this.buyNum)
    }, e
}(BaseEUIView);
__reflect(VCaiLiaoHuoQu.prototype, "VCaiLiaoHuoQu");
var VCaiLiaoHuoQuSimple = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "CaiLiaoHuoQuSimple", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.bg), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.otherList.itemRenderer = HuoQuTuJing, this.oterData = new eui.ArrayCollection, this.otherList.dataProvider = this.oterData
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.oterData.source = e
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VCaiLiaoHuoQuSimple.prototype, "VCaiLiaoHuoQuSimple");
var BagEvent = function () {
    function t() {}
    return t.STR = "BAG_EVENT", t.DELETE_ITEM = t.STR + "DELETE", t
}();
__reflect(BagEvent.prototype, "BagEvent");
var GdExtend = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.times = 0, e.skinName = "resource/eui_skins/game/bag/GdExtendSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.addCloseListen(e.btnClose), e.addCloseListen(e.btnCancel), DisplayUtil.popBtnStyle(e.btnDeg), DisplayUtil.popBtnStyle(e.btnAdd), e.btnDeg.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onCh, e), e.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onCh, e), e.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onOpenGd, e)
    }, e.prototype.onOpenGd = function (t) {
        var e = this,
            i = e.times,
            o = CFG_Bag.getCost(GameGlobal.modelBag.capacityTimes, i);
        return GameGlobal.modelRole.voMine.yuanbao < o ? void ViewText.text("元宝不足") : 0 >= o ? void ViewText.text("格子开启已满") : void GameGlobal.modelBag.CG201(5 * i)
    }, e.prototype.onCh = function (t) {
        var e = this;
        parseInt(e.txtInput.text);
        switch (t.currentTarget) {
            case e.btnDeg:
                e.setCurNum(e.times - 1);
                break;
            case e.btnAdd:
                e.setCurNum(e.times + 1)
        }
    }, e.prototype.setCurNum = function (t) {
        var e = 100 - GameGlobal.modelBag.capacityTimes;
        0 > e && (e = 0), t > e && (t = e);
        var i = CFG_Bag.getCost(GameGlobal.modelBag.capacityTimes, t);
        if (!i) {
            t = 1;
            var i = CFG_Bag.getCost(GameGlobal.modelBag.capacityTimes, t);
            i || this.closeHandler()
        }
        GameGlobal.modelRole.voMine.yuanbao < i ? this.lbMoney.textColor = Color.UIRED : this.lbMoney.textColor = Color.UITEXT, i && (this.times = t, this.lbMoney.text = i.toString(), this.txtInput.text = (5 * t).toString())
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.setCurNum(1), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, i.update, i)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.update)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function () {
        this.setCurNum(this.times)
    }, e
}(PopUpUI);
__reflect(GdExtend.prototype, "GdExtend");
var ItemLBUsed = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemLBUsedSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.grid.data = t, this.txtName.text = t.name, this.txtOwn.text = "拥有:" + GameGlobal.modelBag.getItemCount(t.id)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, this.gou.visible = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemLBUsed.prototype, "ItemLBUsed");
var RLItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/bag/RLItemSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        var e = this;
        e.chBox.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onCh, e), e._selected || (e.iconGou.visible = !1)
    }, e.prototype.onCh = function (t) {
        var e = this;
        e.selected = !e.selected
    }, Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            var e = this;
            e._selected = t, e.iconGou.visible = t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            var e = this;
            e._data = t, e.txtLv.text = "Lv." + t.level, e.icon.source = IconUtil.getIconUrl(t.icon)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.dispose = function () {
        var t = this;
        t.selected = !1, t.parent && t.parent.removeChild(t), e.pool.push(t)
    }, e.create = function () {
        return e.pool.pop() || new e
    }, e.pool = [], e
}(eui.Component);
__reflect(RLItem.prototype, "RLItem");
var TipsFuWen = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "TipsItemFWSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.bg)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.txtName.text = e.name, i.txtName.textColor = Color.getColorInt(e.quality), i.txtNum.text = "星级:" + e.xj, i.txtLvl.text = "符文品质:" + e.wb, i.grid.data = e, this.showExtralAtt(e)
    }, e.prototype.showExtralAtt = function (t) {
        var e = t.cfg.tsjin;
        try {
            for (; this.container.numChildren > 0;) this.recover(this.container.getChildAt(0))
        } catch (i) {
            console.log("无视报错!")
        }
        if (e && "0" != e) {
            var o = "附加属性: ",
                n = FWItemAtt.create();
            n.setText(ColorSet(o, "#10a244")), this.container.addChild(n);
            for (var a = VoAttribute.parse(e), s = 0; s < a.length; s++) {
                n = FWItemAtt.create();
                var r = a[s],
                    l = VoHBFuWen.getColorByAttInfo(r.id, r.val),
                    h = l.isFull ? "(满)" : "";
                n.setText(HtmlUtil.color("    " + r.name + "+" + VoHBFuWen.getRealVal(r) + h, l.color)), this.container.addChild(n), this.showStar(n, r.id)
            }
        } else;
    }, e.prototype.showStar = function (t, e) {
        var i = VoHBFuWen.findIdByType(e),
            o = 1 == CFG_HUOBAN1.LIB4[i].xx;
        t.showStar(o)
    }, e.prototype.recover = function (t) {
        t.dispose()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(TipsFuWen.prototype, "TipsFuWen", ["eui.UIComponent", "egret.DisplayObject"]);
var TipsItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.minWIDTH = 350, e.skinName = "resource/eui_skins/TipsItem.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.bg)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.data = e, i.txtName.text = e.name, i.txtName.textColor = Color.getColorInt(e.quality);
        var o = GameGlobal.modelBag.getItemCount(e.id);
        i.txtNum.text = "当前拥有:" + o, i.txtLvl.text = "使用等级:" + (void 0 == e.level ? 1 : e.level), i.grid.data = e, i.txtDes.text = e.des, this.dealWithSpecialItem(e)
    }, e.prototype.dealWithSpecialItem = function (t) {
        var e = VoZhiShengYiJie.isZhiShengDan(t.id);
        if (e) {
            var i = VoZhiShengYiJie.zhiShengDans.indexOf(t.id),
                o = VoZhiShengYiJie.isInActionTime(i);
            o ? this.addTick() : (this.removeTick(), this.txtName.textFlow = HtmlUtil.parse(this.data.name + HtmlUtil.color("(无效)", "#ff0000")))
        } else this.removeTick()
    }, e.prototype.addTick = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(10).getRemainSec();
        this.txtName.textFlow = HtmlUtil.parse(this.data.name + HtmlUtil.color("(倒计时: " + DateUtil.getHMSBySecond2(t) + ")", "#ff0000")), GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onTick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(10).getRemainSec();
        t.txtName.textFlow = HtmlUtil.parse(t.data.name + HtmlUtil.color("(倒计时: " + DateUtil.getHMSBySecond2(e) + ")", "#ff0000")), 0 >= e && (t.removeTick(), t.txtName.textFlow = HtmlUtil.parse(t.data.name + HtmlUtil.color("(无效)", "#ff0000")))
    }, e.prototype.onSize = function () {
        this.fullStage(), this.removeTick()
    }, e
}(BaseEUIView);
__reflect(TipsItem.prototype, "TipsItem", ["eui.UIComponent", "egret.DisplayObject"]);
var VCurrencyTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "CurrencyTip", e
    }
    return __extends(e, t), e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addCloseListen(this);
        var i = CFG_ATTR.LIB[e];
        i ? (this.imgIco.source = IconUtil.getIconUrl(i.ICON), this.lbName.text = i.n, this.txtDes.text = i.des) : this.lbName.text = "errorType:" + e
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VCurrencyTip.prototype, "VCurrencyTip");
var VItemLBUsed = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.max = 1, e.cur = 1, e.mementos = [], e.skinName = "VItemLBUsedSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnHand), DisplayUtil.popBtnStyle(this.btnAdd), DisplayUtil.popBtnStyle(this.btnMinus), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnHand), this.btnHand.label = "领取奖励", this.btn_10.label = "-10", this.btn_A10.label = "+10", this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnMinus.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btn_10.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btn_A10.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemLBUsed, this.container.useVirtualLayout = !1, this.container.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onSel, this)
    }, e.prototype.onSel = function (t) {
        var e = (t.item, t.itemIndex);
        this.setSel(e)
    }, e.prototype.setSel = function (t) {
        this.container.selectedIndex = t
    }, e.prototype.onChange = function (t) {
        var e = t.currentTarget,
            i = this.cur;
        switch (e) {
            case this.btnAdd:
                i++;
                break;
            case this.btn_A10:
                i += 10;
                break;
            case this.btnMinus:
                i--;
                break;
            case this.btn_10:
                i -= 10
        }
        i = Math.max(1, i), i = Math.min(this.max, i), this.cur = i, this.updatePage()
    }, e.prototype.onHand = function () {
        var t = this.container.selectedIndex,
            e = parseInt(this.txtNum.text);
        GameGlobal.modelBag.CG_USEITEM_207(this.item.id, e, t + 1)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.item = e, this.max = e.count, this.cur = 1;
        var i = CFG_Item.LIB[e.id].canshu,
            o = Util.getTempArr();
        this.mementos.length = 0;
        for (var n in i)
            for (var a = i[n], s = 0; s < a.length; s++) {
                var r, l = a[s],
                    h = l.id,
                    c = l.type,
                    p = l.num;
                switch (c) {
                    case 1:
                        r = new VoItem, r.init(h);
                        break;
                    case 2:
                        r = new VoEquip, r.init(h);
                        break;
                    default:
                        r = new VoCurrency, r.init(c)
                }
                r.count = p;
                var u = new Memento(p);
                this.mementos.push(u), o.push(r)
            }
        this.sourceData.source = o.concat(), this.setSel(0), this.updatePage()
    }, e.prototype.updatePage = function () {
        this.txtNum.text = this.cur + "";
        for (var t = this.sourceData.length, e = 0; t > e; e++) {
            var i = this.mementos[e].count,
                o = this.sourceData.getItemAt(e);
            o.count = i * this.cur, this.sourceData.itemUpdated(o)
        }
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VItemLBUsed.prototype, "VItemLBUsed");
var Memento = function () {
    function t(t) {
        this.count = t
    }
    return t
}();
__reflect(Memento.prototype, "Memento");
var VSkillTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "CurrencyTip", e
    }
    return __extends(e, t), e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addCloseListen(this);
        var i = CFG_Skill.LIB[e.id];
        i ? (this.imgIco.source = IconUtil.getIconUrl(e.icon), this.lbName.text = i.n, this.txtDes.text = e.getDes()) : this.lbName.text = "errorType:" + e
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VSkillTip.prototype, "VSkillTip");
var PicGridVo = function () {
    function t() {
        this.type = 0
    }
    return t.create = function () {
        return new t
    }, t.prototype.getAttrDes = function () {
        return ""
    }, t.prototype.dispose = function () {}, t.prototype.init = function (t) {
        this.icon = "" + t
    }, t.prototype.getOwned = function () {
        return 0
    }, t
}();
__reflect(PicGridVo.prototype, "PicGridVo", ["GridImplement"]);
var VoCurrency = function () {
    function t() {
        this.type = 11, this.count = 1, this.quality = 1
    }
    return t.create = function () {
        return new t
    }, t.prototype.init = function (t) {
        var e = CFG_ATTR.LIB[t];
        if (!e) {
            this.type = t, this.icon = null;
            var i = "errorCurrencyType:" + t;
            return this.name = i, void console.error(i)
        }
        this.cfg = e, this.quality = e.q, this.type = e.id, this.name = e.n, this.icon = e.ICON, this.des = "", this.id = t, this.src = e.src
    }, t.prototype.getScore = function () {
        return 0
    }, t.prototype.getAttrDes = function () {
        return ""
    }, t.prototype.getOwned = function () {
        return t.getOwned(this.id)
    }, t.getOwned = function (t) {
        var e, i = GameGlobal.modelRole.voMine;
        return e = 31 == t ? i.yinliang : 32 == t ? i.bYuanbao : 33 == t ? i.yuanbao : 34 == t ? i.yuanbao + i.bYuanbao : 36 == t ? i.xiayi : 38 == t ? VoMember.mineGX : 0
    }, t.prototype.dispose = function () {}, t
}();
__reflect(VoCurrency.prototype, "VoCurrency", ["GridImplement"]);
var VoEquip = function () {
    function t() {
        this.type = 2, this.baseScore = 0, this.count = 1, this.position = 0, this.job = 0, this.level = 0, this.zhanli = 0, this.baseStr = 0, this.extraStr = 0, this.gridIndex = 0, this.dressingpos = -1, this.place = 0
    }
    return t.create = function () {
        return new t
    }, t.prototype.init = function (t) {
        var e = this,
            i = CFG_Equip.LIB[t];
        return e.id = t, e.cfg = i, e.name = i.n, e.attr = Util.strToIntArr(i.attr), e.icon = i.ico, e.position = i.p, e.job = i.occ, e.level = i.lv, e.quality = i.q, e.baseStr = ConfigHelp.caculateStrByIntArr(e.attr), e.zhanli = e.baseStr + e.extraStr, e
    }, t.prototype.getBaseAttrScore = function () {
        return this.baseScore || (this.baseScore = CFG_ATTR.cuculateArrScore(this.attr)), this.baseScore
    }, t.prototype.getAttrDes = function () {
        for (var t = "", e = CFG_ATTR.LIB, i = 0; i < this.attr.length; i += 2) {
            var o = this.attr[i][0],
                n = this.attr[i][1];
            t += (0 == i ? "" : "\n") + e[o].n + ":" + n
        }
        return t
    }, t.prototype.updateStr = function () {
        var t = this;
        t.attrDyn ? t.extraStr = ConfigHelp.caculateStrByIntArr(t.attrDyn) : t.extraStr = 0, t.zhanli = t.baseStr + t.extraStr
    }, t.prototype.dispose = function () {
        this.dressingpos = -1
    }, t.prototype.getOwned = function () {
        return GameGlobal.modelBag.getEquipCount(this.id)
    }, t.prototype.getRemakeCost = function () {
        var t = CFG_Equip.LIB_EQREMAKECOST[10 * Math.floor(this.level / 10)];
        if (!t) return null;
        if (this.remakeID) var e = t.gzcl;
        else e = t.jhcl;
        return e
    }, t
}();
__reflect(VoEquip.prototype, "VoEquip", ["GridImplement"]);
var VoFuWen = function () {
    function t() {
        this.type = 3, this.count = 1, this.des = "", this.quality = 0
    }
    return t.create = function () {
        return new t
    }, t.prototype.init = function (t) {
        var e = this;
        e.id = t;
        var i = CFG_HUOBAN1.LIB3[t];
        return i ? (e.cfg = i, e.name = i.n, e.icon = i.ico, e.wb = i.wb, e.xj = i.xj, e.quality = i.xj + 1, void(e.itemType = i.type)) : void console.log("errorItemID:" + t)
    }, t.prototype.getScore = function () {
        return 0
    }, t.prototype.getAttrDes = function () {
        return ""
    }, t.prototype.getOwned = function () {
        return 0
    }, t.prototype.dispose = function () {}, t
}();
__reflect(VoFuWen.prototype, "VoFuWen", ["GridImplement"]);
var VoItem = function () {
    function t() {
        this.type = 1, this.count = 1, this.quality = 0
    }
    return t.create = function () {
        return new t
    }, t.prototype.init = function (t) {
        var e = this;
        e.id = t;
        var i = CFG_Item.LIB[t];
        return i ? (e.cfg = i, e.name = i.name, e.icon = i.icon, e.des = i.miaoshu, e.level = i.level, e.useParam = i.canshu, e.itemType = i.type, e.quality = i.quality, e.src = i.src, e) : void console.log("errorItemID:" + t)
    }, t.prototype.getScore = function () {
        return 0
    }, t.prototype.getAttrDes = function () {
        return ""
    }, t.prototype.dispose = function () {}, t.prototype.getOwned = function () {
        return GameGlobal.modelBag.getItemCount(this.id)
    }, t.prototype.clone = function () {
        var e = t.create();
        return e.init(this.id), e
    }, t.T_ZQPFK = 19, t.T_CBPFK = 20, t.T_SBPFK = 21, t.T_GHPFK = 22, t.T_CHPFK = 23, t.T_SZPFK = 23, t
}();
__reflect(VoItem.prototype, "VoItem", ["GridImplement", "ICloneAble"]);
var BossPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curst = -1, e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.checkPage = function (t) {
        var e = this._curst == t;
        return e
    }, e.prototype.guidePage = function (t) {
        var e = this.base.getTabByIdx(t);
        e && QuestGuideArrow.getIns().guideTo(e, 40, 20)
    }, e.prototype.guidePerson = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.PERBOSS);
        e && e.guide(t)
    }, e.prototype.exitGuidePersion = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.PERBOSS);
        t && t.exitGuide()
    }, e.prototype.guideFW = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.FWBOSS);
        t && t.guide()
    }, e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideViewCenter(this.base.btnReturn)
    }, e.prototype.initView = function () {
        var t = this,
            e = t.base;
        this.base.createTabGroup().createPageGrp(), GameGlobal.layerMgr.reg(UIConst.PERBOSS, View_PersonBoss, e.pageGrp), GameGlobal.layerMgr.reg(UIConst.QMBOSS, ViewQmBoss, e.pageGrp), GameGlobal.layerMgr.reg(UIConst.FWBOSS, VFuWenBoss, e.pageGrp), GameGlobal.layerMgr.reg(UIConst.MIDFESTBOSS, ViewFestBoss, e.pageGrp), t.base.addTab("个人BOSS", 0, UIConst.PERBOSS), t.base.addTab("全民BOSS", 1, UIConst.QMBOSS), t.base.addTab("符文BOSS", 2, UIConst.FWBOSS), t.base.addTab("节日BOSS", 3, UIConst.MIDFESTBOSS), t.base.listenTabClick(t.onTbtn, t), t.addCloseListen(e.btnClose), t.addCloseListen(e.btnReturn)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelBoss.on(Model_BossData.MSG_PERSONBOSS_UPDATE, this.onNotice, this), GameGlobal.modelBoss.on(Model_BossData.MSG_QMBOSS_UPDATA, this.onNotice, this), GameGlobal.modelBoss.on(Model_BossData.MSG_FWBOSS_UPDATE, this.onNotice, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelBoss.off(Model_BossData.MSG_PERSONBOSS_UPDATE, this.onNotice, this), GameGlobal.modelBoss.off(Model_BossData.MSG_QMBOSS_UPDATA, this.onNotice, this), GameGlobal.modelBoss.off(Model_BossData.MSG_FWBOSS_UPDATE, this.onNotice, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e ? this.base.setTabSelIdx(e, !0) : this.base.setTabSelIdx(0, !0), this.addMsg(), GameGlobal.modelBoss.CG789(), this.onNotice(), this.checkjrbossopen(this), GameGlobal.tick.addInterv(this.checkjrbossopen, 1e3, this)
    }, e.prototype.onNotice = function () {
        var t = GameGlobal.modelBoss,
            e = t.personalNot(),
            i = t.quanMinNot(),
            o = t.fuWenNot(),
            n = this.base;
        n.setNoticByIndex(0, e), n.setNoticByIndex(1, i), n.setNoticByIndex(2, o), n.setNoticByIndex(3, VoFestBoss.fristTip)
    }, e.prototype.onTbtn = function (t) {
        var e = t.sort;
        CFG_COMMOND.canDo(t.bindSysID) && (this.base.title = t.text, this.setCurSt(e))
    }, e.prototype.onClose = function () {
        this.setCurSt(-1), this.removeMsg()
    }, e.prototype.setCurSt = function (t) {
        if (this._curst != t) {
            var e = GameGlobal.layerMgr;
            switch (this._curst) {
                case 0:
                    e.close(UIConst.PERBOSS);
                    break;
                case 1:
                    e.close(UIConst.QMBOSS);
                    break;
                case 2:
                    e.close(UIConst.FWBOSS);
                    break;
                case 3:
                    e.close(UIConst.MIDFESTBOSS)
            }
            switch (this.base.hideQuestBtn(), t) {
                case 0:
                    e.open(UIConst.PERBOSS);
                    break;
                case 1:
                    e.open(UIConst.QMBOSS);
                    break;
                case 2:
                    e.open(UIConst.FWBOSS);
                    break;
                case 3:
                    e.open(UIConst.MIDFESTBOSS), this.base.showQuestBtn(), this.base.createQuestTxt(CFG_COMMOND.LIBWFSM[1106].detail)
            }
            this.base.setTabSelIdx(t), this._curst = t
        }
    }, e.prototype.checkjrbossopen = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(35);
        if (e) {
            var i = e.getChildByID(56);
            if (i) {
                var o = i.getRemainSec();
                if (o >= 0) {
                    var n = t.base.getTabByIdx(3);
                    return void(n.text = "节日BOSS")
                }
            }
        }
        t.base.removeTabByID(UIConst.MIDFESTBOSS), GameGlobal.tick.removeInterv(t.checkjrbossopen, t)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(BossPage.prototype, "BossPage");
var Model_BossData = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (t) {
        this.socket = t;
        var e = this;
        t.regHand(780, e.GC780, e), t.regHand(784, e.GC784, e), t.regHand(790, e.GC790, e), t.regHand(792, e.GC792, e), t.regHand(794, e.GC794, e), t.regHand(796, e.GC796, e), t.regHand(802, e.GC802, e), t.regHand(804, e.GC804, e), t.regHand(806, e.GC806, e), t.regHand(808, e.GC808, e), t.regHand(2852, e.GC2852, e), t.regHand(2856, e.GC2856, e), t.regHand(4152, e.GC4152, e), t.regHand(4154, e.GC4154, e)
    }, e.prototype.GC780 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readInt(),
                s = i.readByte(),
                r = i.readByte(),
                l = new PersonVo;
            l.guanqiaId = a, l.canuseTimes = s, l.sweepingFlag = r, e.record[a] = l
        }
        i.readShort();
        GameGlobal.modelBoss.notify(e.MSG_PERSONBOSS_UPDATE)
    }, e.prototype.CG781 = function (t) {
        var e = GameGlobal.modelBag.checkRLTips();
        if (!e) {
            var i = this.getBytes();
            i.writeInt(t), this.sendSocket(781, i)
        }
    }, e.prototype.CG783 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(783, e)
    }, e.prototype.GC784 = function (t, i) {
        var o = i.readInt();
        if (e.record[o]) {
            var n = e.record[o];
            n.canuseTimes = n.canuseTimes - 1, e.record[o] = n
        }
        var a = ConfigHelp.parseServItems(i);
        GameGlobal.layerMgr.open(UIConst.GKBOSSAWRAD, a), GameGlobal.modelBoss.notify(e.MSG_PERSONBOSS_UPDATE)
    }, e.prototype.CG785 = function (t) {
        var e = GameGlobal.modelBag.checkRLTips();
        if (!e) {
            var i = this.getBytes();
            i.writeInt(t), this.sendSocket(785, i)
        }
    }, e.prototype.CG787 = function () {
        var t = this.getBytes();
        this.sendSocket(787, t)
    }, e.prototype.CG789 = function () {
        var t = this.getBytes();
        this.sendSocket(789, t)
    }, e.prototype.GC790 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readInt(),
                s = i.readByte(),
                r = i.readByte(),
                l = i.readByte(),
                h = i.readInt(),
                c = new QmBossVo;
            c.guanqiaId = a, c.hpPercent = s, c.robNum = r, c.state = l, c.aliveTime = h, e.qmRecord[a] = c
        }
        var p = i.readByte(),
            u = i.readInt(),
            d = i.readByte();
        e.qmChallengeTimes = p, e.qmAddTimes = u, e.qmCanBuyTimes = d, GameGlobal.modelBoss.notify(e.MSG_QMBOSS_UPDATA)
    }, e.prototype.CG791 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(791, e)
    }, e.prototype.GC792 = function (t, e) {
        var i = e.readShort();
        t.myRankData = [];
        for (var o = 0; i > o; o++) t.myRankData.push([e.readByte(), e.readUTF(), e.readInt(), o]);
        var n = GameGlobal.layerMgr.getView(UIConst.QMBOSSRANK);
        n && n.update()
    }, e.prototype.CG793 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(793, e)
    }, e.prototype.GC794 = function (t, e) {
        var i = e.readShort();
        t.killInfo = [];
        for (var o = 0; i > o; o++) {
            var n = e.readLong(),
                a = DateUtils.getFormatByTimeStamp(n, DateFormat.H_M_S);
            t.killInfo.push([a, e.readUTF(), e.readInt()])
        }
        GameGlobal.layerMgr.open(UIConst.QMBOSSKILLINFO);
        var s = GameGlobal.layerMgr.getView(UIConst.QMBOSSKILLINFO);
        s && s.update()
    }, e.prototype.CG795 = function (t) {
        var e = GameGlobal.modelBag.checkRLTips();
        if (!e) {
            var i = this.getBytes();
            i.writeInt(t), this.sendSocket(795, i)
        }
    }, e.prototype.GC796 = function (t, e) {
        var i = e.readByte();
        ViewText.text(["", "成功", "没有挑战次数", "等级不足", "没有复活次数了", "道具不足"][i])
    }, e.prototype.CG797 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(797, e)
    }, e.prototype.CG799 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(799, e)
    }, e.prototype.CG801 = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeByte(e), this.sendSocket(801, i)
    }, e.prototype.GC802 = function (t, i) {
        var o = i.readInt(),
            n = i.readByte();
        if (t.noticeInfo[o - 1]) {
            var a = t.noticeInfo[o - 1];
            a[1] = n
        }
        var s = GameGlobal.layerMgr.getView(UIConst.QMNOTICE);
        s.updateItem(o, n), GameGlobal.modelBoss.notify(e.MSG_QMBOSS_UPDATA)
    }, e.prototype.CG803 = function () {
        var t = this.getBytes();
        this.sendSocket(803, t)
    }, e.prototype.GC804 = function (t, e) {
        var i = e.readShort();
        t.noticeInfo = [];
        for (var o = 0; i > o; o++) {
            var n = e.readByte();
            t.noticeInfo.push([o + 1, n])
        }
    }, e.prototype.GC806 = function (t, e) {
        for (var i = e.readShort(), o = [], n = GameGlobal.modelRole, a = 0; i > a; a++) {
            var s = VoBattleRnkItem.create();
            s.rnk = e.readByte(), s.id = e.readLong(), s.name = e.readUTF(), s.value = e.readInt(), s.id != n.voMine.id && o.push(s)
        }
        var r = VoBattleRnkItem.create();
        r.rnk = e.readByte(), r.value = e.readInt(), r.id = n.voMine.id, r.name = n.voMine.name;
        var l = ModelBattleUI.getIns();
        l.myRnkVo = r, l.otherRnkList = o, l.caculateRnk()
    }, e.prototype.CG807 = function () {
        e.qmChallengeTimes >= 10 && ViewText.text("当前不需要购买次数");
        var t = this.getBytes();
        this.sendSocket(807, t)
    }, e.prototype.GC808 = function (t, i) {
        var o = i.readByte(),
            n = i.readByte();
        e.qmChallengeTimes = o, e.qmCanBuyTimes = n, GameGlobal.modelBoss.notify(e.MSG_QMBOSS_UPDATA), GameGlobal.layerMgr.close(UIConst.QMBUY)
    }, e.prototype.CG2851 = function () {
        var t = this.getBytes();
        this.sendSocket(2851, t)
    }, e.prototype.GC2852 = function (t, i) {
        t.canPoint = i.readByte(), t.canBuy = i.readByte(), t.notify(e.MSG_FWBOSS_UPDATE)
    }, e.prototype.CG2853 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(2853, e)
    }, e.prototype.CG2855 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(2855, e)
    }, e.prototype.GC2856 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                t.canPoint = i.readByte(), t.canBuy++, t.notify(e.MSG_FWBOSS_UPDATE);
                break;
            case 2:
                setTimeout(function () {
                    ViewAlert.show("元宝不足，是否前往充值？", function () {
                        GameGlobal.layerMgr.open(UIConst.RECHARGE)
                    })
                }, 500);
                break;
            case 3:
                ViewText.text("今日的购买次数已满")
        }
    }, e.prototype.CG4151 = function () {
        var t = this.getBytes();
        this.sendSocket(4151, t)
    }, e.prototype.GC4152 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readShort(),
                s = i.readByte(),
                r = new vipBossVo;
            r.guanqiaId = a, r.canuseTimes = s, e.vipRecord[a] = r
        }
        GameGlobal.modelBoss.notify(e.MSG_VIPBOSS_UPDATE)
    }, e.prototype.CG4153 = function (t) {
        var e = GameGlobal.modelBag.checkRLTips();
        if (!e) {
            var i = this.getBytes();
            i.writeShort(t), this.sendSocket(4153, i)
        }
    }, e.prototype.GC4154 = function (t, e) {
        var i = (e.readShort(), e.readByte());
        1 == i ? GameGlobal.modelBoss.CG4151() : 2 == i ? ViewText.text("挑战失败！") : 3 == i ? ViewText.text("已无挑战次数！") : 4 == i ? ViewAlert.show("背包已满，是否前往熔炼?", function () {
            GameGlobal.layerMgr.open(UIConst.EQUIPRL)
        }) : 5 == i && ViewAlert.show("vip等级不足，是否前往充值?", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        })
    }, e.prototype.notice = function () {
        var t = this.personalNot(),
            e = this.quanMinNot(),
            i = this.VIPNot();
        return t || e || i
    }, e.prototype.personalNot = function () {
        var t = e.record,
            i = !1,
            o = null;
        for (var n in t) {
            o = t[n];
            var a = o.canuseTimes,
                s = o.sweepingFlag;
            if (o && a > 0 && 0 == s) {
                i = !0;
                break
            }
        }
        return i
    }, e.prototype.VIPNot = function () {
        var t = e.vipRecord,
            i = !1,
            o = null;
        for (var n in t) {
            o = t[n];
            var a = o.canuseTimes;
            if (o && a > 0 && GameGlobal.modelRole.voMine.vip >= CFG_VIPBOSS.LIB[o.guanqiaId].l) {
                i = !0;
                break
            }
        }
        return i
    }, e.prototype.quanMinNot = function () {
        var t = !1;
        if (e.qmChallengeTimes > 0)
            for (var i in e.qmRecord) {
                var o = e.qmRecord[i];
                if (1 == o.state) {
                    t = !0;
                    break
                }
            }
        return t
    }, e.prototype.fuWenNot = function () {
        var t = GameGlobal.modelBoss.canPoint > 0 ? !0 : !1;
        return t
    }, e.record = {}, e.vipRecord = {}, e.qmRecord = {}, e.MSG_PERSONBOSS_UPDATE = "MSG_PERSONBOSS_UPDATE", e.MSG_VIPBOSS_UPDATE = "MSG_VIPBOSS_UPDATE", e.MSG_QMBOSS_UPDATA = "MSG_QMBOSS_UPDATA", e.MSG_NOTICE_UPDATE = "MSG_NOTICE_UPDATE", e.MSG_FWBOSS_UPDATE = "MSG_FWBOSS_UPDATE", e
}(BaseModel);
__reflect(Model_BossData.prototype, "Model_BossData");
var VFuWenBoss = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/boss/FuWenBossSkin.exml", e
    }
    return __extends(e, t), e.prototype.guide = function () {
        var t = this.dataList.getChildAt(0);
        t && QuestGuideArrow.getIns().guideTo(t, t.btnChallenge.x + 50, t.btnChallenge.y + 20)
    }, e.prototype.initView = function () {
        DisplayUtil.popBtnStyle(this.btnWen), this.data = new eui.ArrayCollection, this.dataList.itemRenderer = VFuWenBossItem, this.dataList.dataProvider = this.data, this.btn_buy.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btnWen.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnWenT, this), Vo_FuWenBossItem.create()
    }, e.prototype.onBtnT = function () {
        e.showBuyTip(1)
    }, e.showBuyTip = function (t) {
        var e = Vo_FuWenBossItem.remainButCnt(),
            i = Math.min(e, t),
            o = this.getNextVipAdd("fwboss");
        if (null == o) var n = "确认花" + 5 * i + "元宝购买" + i + "次挑战点数？\n今日可购买点数:" + ColorSet(e, "#E21414");
        else n = "确认花" + 5 * i + "元宝购买" + i + "次挑战点数？\n" + ("今日可购买点数:" + ColorSet(e, "#E21414") + "\n") + ("达到VIP" + o.vip + "可额外增加" + ColorSet(o.addCnt, "#10a244") + "次\n\n") + ColorSet("快速获取资源可以比别人更快提升实力", "#10a244");
        ViewAlert.show(ColorSet(n, "#684c43"), function () {
            GameGlobal.modelBoss.CG2855(i)
        })
    }, e.getNextVipAdd = function (t) {
        var e = VoVip.getFullVip();
        if (GameGlobal.modelRole.voMine.vip >= e) return null;
        var i = GameGlobal.modelRole.voMine.vip,
            o = {},
            n = VoVip.LIB[i][t];
        return function a(e) {
            return VoVip.LIB[e] ? void(VoVip.LIB[e][t] != n ? (o.addCnt = VoVip.LIB[e][t] - n, o.vip = e) : a(e + 1)) : void(o = null)
        }(GameGlobal.modelRole.voMine.vip + 1), o
    }, e.prototype.btnWenT = function () {
        var t = "1.符文boss每天拥有20点挑战点，可元宝额外购买挑战点；\n2.每次挑战低级符文boss消耗1点挑战点；\n3.每次挑战中级符文boss消耗2点挑战点；\n4.每次挑战高级符文boss消耗5点挑战点；\n5.挑战越高级的符文boss有概率获得高品质符文。";
        ViewWenHao.show(t, 24)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), DisplayUtil.fillDataAC(this.data, Vo_FuWenBossItem.List), GameGlobal.modelBoss.on(Model_BossData.MSG_FWBOSS_UPDATE, this.update, this), GameGlobal.modelBoss.CG2851()
    }, e.prototype.update = function () {
        this.lab_nums.text = GameGlobal.modelBoss.canPoint.toString() + "/20", GameGlobal.modelBoss.canPoint < 20 ? this.btn_buy.visible = !0 : this.btn_buy.visible = !1
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelBoss.off(Model_BossData.MSG_FWBOSS_UPDATE, this.update, this)
    }, e
}(BaseEUIView);
__reflect(VFuWenBoss.prototype, "VFuWenBoss");
var VFuWenBossItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "resource/eui_skins/game/boss/FuWenBossItem.exml", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.boss = UIRole.create(), this.partCont.addChild(this.boss), this.boss.setWay(3), this.boss.scaleX = this.boss.scaleY = .8, this.btnChallenge.label = "挑战", this.btnChallenge.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onT = function () {
        ModelBattle.canEnterBtl() && (GameGlobal.modelBoss.canPoint - this.vo.point < 0 ? VFuWenBoss.showBuyTip(this.vo.point) : (GameGlobal.modelBoss.CG2853(this.vo.id), GameGlobal.layerMgr.close(UIConst.HUOBANPAGE)))
    }, Object.defineProperty(e.prototype, "data", {
        set: function (t) {
            this.vo = t, this.boss.play(700), this.boss.setMonsterID(t.mc), this.boss.validParts(), this.labName.text = t.name, this.point.text = t.point + "点", ConfigHelp.makeStrGrids(t.jl, this.grids, 0, 0, this.group, !0)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.$onRemoveFromStage = function () {
        this.boss.stopAndClear()
    }, e
}(eui.ItemRenderer);
__reflect(VFuWenBossItem.prototype, "VFuWenBossItem");
var Vo_FuWenBossItem = function () {
    function t() {}
    return t.create = function () {
        t.List = [];
        var e = CFG_FuWenBoss.LIB;
        for (var i in e) {
            var o = e[i],
                n = new t;
            n.id = o.id, n.mc = o.gwmx, n.name = o.n, n.jl = o.zsjl, n.point = o.kcds, t.List.push(n)
        }
    }, t.remainButCnt = function () {
        var t = GameGlobal.modelRole.voMine.vip,
            e = VoVip.LIB[t].fwboss,
            i = GameGlobal.modelBoss.canBuy,
            o = Math.max(e - i, 0);
        return o
    }, t
}();
__reflect(Vo_FuWenBossItem.prototype, "Vo_FuWenBossItem");
var ItemBoss = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/boss/BossItem.exml"
    }, e.prototype.partAdded = function (e, i) {
        t.prototype.partAdded.call(this, e, i)
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        var e = this;
        e.platBg.y = 50, this.btnChallenge.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchHandler, this)
    }, e.prototype.onTouchHandler = function () {
        this.sweepFlag > 0 ? GameGlobal.modelBoss.CG785(this.arg.id) : ModelBattle.canEnterBtl() && GameGlobal.modelBoss.CG781(this.arg.id)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.petv
        },
        set: function (t) {
            if (t) {
                this.arg = t.struct, this.chalengeTimes = t.challegeTimes, this.sweepFlag = t.sweepFlag;
                var e = (t.struct.id, t.struct.zsjl);
                this.img_kill.visible = !1, this.btnChallenge.visible = !0, this.lab_tips.visible = !1, this.img_fhl.visible = !1, this.lab_fh.visible = !1;
                var i = this.arg.gwmx;
                if (ConfigHelp.makeStrGrids(e, this.gridArr, 0, 0, this.group, !0, 10, .8), !this.petv) {
                    var o = this.petv = UIRole.create();
                    this.partCont.addChild(o)
                }
                this.petv.play(700), this.petv.setMonsterID(i), this.petv.setWay(3), this.petv.validParts(), this.lab_alive.visible = !1, this.img_xl.visible = !1, this.img_xld.visible = !1, this.lab_hpper.visible = !1;
                var n = t.struct.n.split(/\(|\)|\（|\）/);
                ArrayUtil.cleannull(n), this.labName.textFlow = HtmlUtil.parse(HtmlUtil.color(n[0], "#96403d") + HtmlUtil.color("(" + n[1] + ")", "#684c43")), this.labTimes.textFlow = HtmlUtil.parse("剩余次数:" + HtmlUtil.color(this.chalengeTimes, "#10a244") + "次"), GameGlobal.modelRole.voMine.level >= t.struct.l ? this.chalengeTimes > 0 && 1 == this.sweepFlag ? this.btnChallenge.label = "扫荡" : this.chalengeTimes > 0 && 0 == this.sweepFlag ? this.btnChallenge.label = "挑战" : (this.btnChallenge.visible = !1, this.img_kill.visible = !0) : (this.btnChallenge.visible = !1, this.lab_tips.visible = !0, this.lab_tips.text = t.struct.l + "级开放")
            }
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.bg.source = "CM2_json.bg1" : this.bg.source = "CM2_json.bg2"
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.$onRemoveFromStage = function () {
        this.petv && this.petv.stopAndClear()
    }, e
}(ItemBase);
__reflect(ItemBoss.prototype, "ItemBoss");
var PersonVo = function () {
    function t() {}
    return t
}();
__reflect(PersonVo.prototype, "PersonVo");
var View_PersonBoss = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/boss/PersonSkin.exml", e
    }
    return __extends(e, t), e.prototype.guide = function (t) {
        var e = t,
            i = 148 * e + 73;
        QuestGuideArrow.getIns().guideTo(this.scroll, 520, i), this.scroll.scrollPolicyV = eui.ScrollPolicy.OFF
    }, e.prototype.exitGuide = function () {
        this.scroll.scrollPolicyV = eui.ScrollPolicy.ON
    }, e.prototype.initView = function () {
        this.dataList.itemRenderer = ItemBoss, this.dataCollect = new eui.ArrayCollection, this.dataList.dataProvider = this.dataCollect, this.scroll.scrollPolicyH = eui.ScrollPolicy.OFF, this.scroll.verticalScrollBar.autoVisibility = !1, this.scroll.verticalScrollBar.visible = !1
    }, e.prototype.update = function () {
        var t = [];
        for (var e in CFG_PERSONBOSS.LIB) {
            var i = CFG_PERSONBOSS.LIB[e],
                o = Model_BossData.record[i.id];
            if (o) var n = o.canuseTimes,
                a = o.sweepingFlag;
            var s = 1e3;
            GameGlobal.modelRole.voMine.level >= i.l && (s = n > 0 ? 2e3 : 0), t.push({
                struct: i,
                challegeTimes: n,
                sweepFlag: a,
                sortKey: s
            })
        }
        t.sort(this.sortFunc), DisplayUtil.fillDataAC(this.dataCollect, t)
    }, e.prototype.sortFunc = function (t, e) {
        return e.sortKey == t.sortKey ? t.struct.id - e.struct.id : e.sortKey - t.sortKey
    }, e.prototype.onOpen = function (t) {
        this.update(), GameGlobal.modelBoss.on(Model_BossData.MSG_PERSONBOSS_UPDATE, this.update, this), GameGlobal.modelBoss.CG787()
    }, e.prototype.onClose = function () {
        GameGlobal.modelBoss.off(Model_BossData.MSG_PERSONBOSS_UPDATE, this.update, this)
    }, e
}(BaseEUIView);
__reflect(View_PersonBoss.prototype, "View_PersonBoss");
var ItemQm1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/boss/BossItem.exml"
    }, e.prototype.partAdded = function (e, i) {
        t.prototype.partAdded.call(this, e, i)
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        var e = this;
        e.platBg.y = 35, this.btnChallenge.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchHandler, this), this.labTimes.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchCheck, this), DisplayUtil.popBtnStyle(this.labTimes), Timer.getIns().listen(this.updateTime, this, 1e3)
    }, e.prototype.onTouchHandler = function (t) {
        var e = t.currentTarget.va;
        switch (e) {
            case -1:
                var i = 1026,
                    o = GameGlobal.modelBag.getItemCount(i);
                if (1 > o) return void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, i);
                ModelBattle.canEnterBtl() && GameGlobal.modelBoss.CG795(this.arg.guanqiaId);
                break;
            default:
                if (0 == Model_BossData.qmChallengeTimes) {
                    var n = "确定花" + HtmlUtil.color("20元宝", "#D60A0A") + "购买一次挑战次数?\n今日可购买次数: " + HtmlUtil.color(Model_BossData.qmCanBuyTimes, "#D60A0A");
                    ViewAlert.show(n, function () {
                        return Model_BossData.qmCanBuyTimes <= 0 ? void ViewText.text("今日购买次数不足") : GameGlobal.modelRole.voMine.yuanbao < 20 ? void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, 33) : void GameGlobal.modelBoss.CG807()
                    })
                }
                ModelBattle.canEnterBtl() && GameGlobal.modelBoss.CG795(this.arg.guanqiaId)
        }
    }, e.prototype.onTouchCheck = function () {
        1 == this.state ? (GameGlobal.layerMgr.open(UIConst.QMBOSSRANK), GameGlobal.modelBoss.CG791(this.arg.guanqiaId)) : 2 == this.state && GameGlobal.modelBoss.CG793(this.arg.guanqiaId)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.arg
        },
        set: function (t) {
            if (t) {
                this.arg = t.vo;
                var e = t.vo.guanqiaId,
                    i = CFG_QMBOSS.LIB[e],
                    o = i.zsjl;
                this.img_kill.visible = !1, this.btnChallenge.visible = !0, this.lab_tips.visible = !1, this.img_fhl.visible = !1, this.lab_fh.visible = !1, this.lab_alive.visible = !1;
                var n = i.gwmx;
                if (ConfigHelp.makeStrGrids(o, this.gridArr, 0, 0, this.group, !0, 10, .8), !this.petv) {
                    var a = this.petv = UIRole.create();
                    this.partCont.addChild(a)
                }
                this.petv.play(700), this.petv.setMonsterID(n), this.petv.setWay(3), this.petv.validParts();
                var s = "争夺: " + HtmlUtil.color(t.vo.robNum, Color.GR_STR) + "人";
                this.labTimes.textFlow = HtmlUtil.underLine(s), this.state = 1, this.img_xl.width = 75, this.lab_hpper.text = t.vo.hpPercent + "%", this.img_xl.width = t.vo.hpPercent / 100 * this.img_xl.width;
                var r = i.n.split(/\(|\（|\)|\）/);
                ArrayUtil.cleannull(r), this.btnChallenge.va = 0, this.labName.textFlow = HtmlUtil.parse(HtmlUtil.color(r[0], "#96403d") + HtmlUtil.color("(" + r[1] + ")", "#684c43")), GameGlobal.modelRole.voMine.level >= i.l ? (this.state = t.vo.state, 1 == t.vo.state ? this.btnChallenge.label = "挑战" : (this.btnChallenge.lbText.size = 20, this.btnChallenge.label = "复活并挑战", this.btnChallenge.va = -1, this.labTimes.textFlow = HtmlUtil.underLine("查看击杀记录"), this.lab_alive.text = t.vo.aliveTime + "后重生", this.lab_alive.visible = !0, this.img_fhl.visible = !0, this.lab_fh.visible = !0)) : (this.btnChallenge.visible = !1, this.lab_tips.visible = !0, this.lab_tips.text = i.l + "级开放")
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateTime = function () {
        if (!(this.arg.aliveTime <= 0)) {
            var t = this.arg.aliveTime--;
            this.lab_alive.text = DateUtil.getHMSBySecond2(t, "::") + "后重生"
        }
    }, Object.defineProperty(e.prototype, "itemIndex", {
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.bg.source = "CM2_json.bg1" : this.bg.source = "CM2_json.bg2"
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.$onRemoveFromStage = function () {
        this.petv && this.petv.stopAndClear()
    }, e
}(ItemBase);
__reflect(ItemQm1.prototype, "ItemQm1");
var QmBossVo = function () {
    function t() {}
    return t
}();
__reflect(QmBossVo.prototype, "QmBossVo");
var QmBuyView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/jingjiChang/TBJJC2Skin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.addCloseListen(e.btnClose), e.addCloseListen(e.btnCancle), e.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), e.btnSure.label = "确定", e.btnCancle.label = "取消"
    }, e.prototype.onHand = function (t) {
        return Model_BossData.qmCanBuyTimes <= 0 ? void ViewText.text("今日购买次数不足") : GameGlobal.modelRole.voMine.yuanbao < 20 ? void ViewText.text("元宝不足") : void GameGlobal.modelBoss.CG807()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.txtDes.textFlow = HtmlUtil.parse("确定花" + HtmlUtil.color("20元宝", "#D60A0A") + "购买一次挑战次数？\n今日可购买次数: " + HtmlUtil.color(Model_BossData.qmCanBuyTimes, "#D60A0A"))
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(QmBuyView.prototype, "QmBuyView");
var QmNoticeItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/boss/NoticeItemSkin.exml", e
    }
    return __extends(e, t), e.creatWithData = function (t) {
        return e
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            if (this.arg = t, this._data = t, t) {
                var e = GameGlobal.modelRole.voMine.level,
                    i = t[0];
                this.setIndex(i);
                var o = t[1],
                    n = CFG_QMBOSS.LIB[i];
                n && (this.lbRnk.text = "" + n.n, this.lbName.text = "" + n.l, this.img_select.visible = !1, this.btn_selectBg.visible = !1, n.l > e ? this.lbNum.text = "尊请期待" : (this.lbNum.text = "复活时提醒", this.btn_selectBg.visible = !0, 1 == o && (this.img_select.visible = !0), this.btn_selectBg.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onTouchHandler, this), this.img_select.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onTouchHandler, this)))
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onTouchHandler = function () {
        var t = this.arg[0],
            e = this.arg[1];
        if (0 == e) var i = 1;
        1 == e && (i = 0), GameGlobal.modelBoss.CG801(t, i)
    }, e.prototype.setIndex = function (t) {
        0 != (1 & t) ? this.bg.source = "CM2_json.bg1" : this.bg.source = "CM2_json.bg2"
    }, e
}(eui.Component);
__reflect(QmNoticeItem.prototype, "QmNoticeItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var QmNoticeView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/boss/QmNotice.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnRet), this.addCloseListen(this.btnClose), this.dataList.dataProvider = this.itemListData = new eui.ArrayCollection, this.dataList.itemRendererFunction = QmNoticeItem.creatWithData, this.btnRet.label = "确定"
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), GameGlobal.modelBoss.on(Model_BossData.MSG_NOTICE_UPDATE, this.update, this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.update = function () {
        var t = GameGlobal.modelBoss;
        this.itemListData.source = t.noticeInfo
    }, e.prototype.updateItem = function (t, e) {
        for (var i = this.itemListData.length, o = 0; i > o; o++) {
            var n = this.itemListData.getItemAt(o);
            if (parseInt(n[0]) == t) {
                n[2] = e, this.itemListData.itemUpdated(n);
                break
            }
        }
    }, e
}(PopUpUI);
__reflect(QmNoticeView.prototype, "QmNoticeView");
var QMRank = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/boss/QmBossRankSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnRet), this.addCloseListen(this.btnClose), this.dataList.dataProvider = this.itemListData = new eui.ArrayCollection, this.dataList.itemRendererFunction = QMRankItem.creatWithData, this.btnRet.label = "确定"
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.update = function () {
        var t = GameGlobal.modelBoss;
        this.itemListData.replaceAll(t.myRankData), this.itemListData.refresh()
    }, e
}(PopUpUI);
__reflect(QMRank.prototype, "QMRank");
var QMRankItem = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/boss/BossRankItemSkin.exml"
    }, e.creatWithData = function (t) {
        return e
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, t && (this.lbRnk.text = "" + t[0], this.lbName.text = t[1], this.lbNum.text = "" + t[2])
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.bg.source = "CM2_json.bg1" : this.bg.source = "CM2_json.bg2"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(QMRankItem.prototype, "QMRankItem");
var ViewQmBoss = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/boss/QmBossSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        this.dataList.itemRenderer = ItemQm1, this.dataCollect = new eui.ArrayCollection, this.dataList.dataProvider = this.dataCollect, this.scroll.scrollPolicyH = eui.ScrollPolicy.OFF, this.scroll.verticalScrollBar.autoVisibility = !1, this.scroll.verticalScrollBar.visible = !1, this.lab_remaind.textFlow = HtmlUtil.underLine("BOSS设置提醒"), DisplayUtil.popBtnStyle(this.lab_remaind), this.lab_remaind.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchNotice, this), this.btn_buy.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouAddTimes, this)
    }, e.prototype.onTouchNotice = function () {
        GameGlobal.layerMgr.open(UIConst.QMNOTICE)
    }, e.prototype.onTouAddTimes = function () {
        var t = this.getNextVipAdd("bosstz");
        if (null == t) var e = "确定花" + HtmlUtil.color("20元宝", "#fe0000") + "购买一次挑战次数?\n今日可购买次数: " + HtmlUtil.color(Model_BossData.qmCanBuyTimes, "#fe0000");
        else e = Lang.reTxt("确定花<fontcolor='#fe0000'>{0}元宝</font>购买一次挑战次数?\n今日可购买次数:<font color='#fe0000'>{1}</font>\n达到VIP{2}可额外增加<font color='#10a244'>{3}次</font>\n\n<font color='#10a244'>快速获取资源可以比别人更快提升实力</font>", 20, Model_BossData.qmCanBuyTimes, t.vip, t.addCnt);
        ViewAlert.show(ColorSet(e, "#684c43"), function () {
            return Model_BossData.qmCanBuyTimes <= 0 ? void ViewText.text("今日购买次数不足") : GameGlobal.modelRole.voMine.yuanbao < 20 ? void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, 33) : void GameGlobal.modelBoss.CG807()
        })
    }, e.prototype.getNextVipAdd = function (t) {
        var e = VoVip.getFullVip();
        if (GameGlobal.modelRole.voMine.vip >= e) return null;
        var i = GameGlobal.modelRole.voMine.vip,
            o = Util.getTempObj(),
            n = VoVip.LIB[i][t];
        return function a(e) {
            return VoVip.LIB[e] ? VoVip.LIB[e][t] != n ? (o.addCnt = VoVip.LIB[e][t] - n, void(o.vip = e)) : void a(e + 1) : void(o = null)
        }(GameGlobal.modelRole.voMine.vip + 1), o
    }, e.prototype.update = function () {
        var t = [];
        for (var e in CFG_QMBOSS.LIB) {
            var i = CFG_QMBOSS.LIB[e],
                o = Model_BossData.qmRecord[i.id],
                n = 1e3;
            if (!GameGlobal.modelBoss.noticeInfo) return;
            var a = GameGlobal.modelBoss.noticeInfo[i.id - 1];
            o && (GameGlobal.modelRole.voMine.level >= i.l && (n = 1500, a[1] > 0 && (n = 2e3), 2 == o.state && (n = 1200)), t.push({
                vo: o,
                sortKey: n,
                struct: i
            }))
        }
        t.sort(this.sortFunc), DisplayUtil.fillDataAC(this.dataCollect, t), this.lab_nums.text = Model_BossData.qmChallengeTimes + "/10", Model_BossData.qmChallengeTimes >= 10 ? (this.lab_time.visible = !1, this.lab_huifu.visible = !1, this.btn_buy.visible = !1) : (this.lab_time.visible = !0, this.lab_huifu.visible = !0, this.btn_buy.visible = !0), this.lab_time.text = DateUtil.getHMSBySecond(Model_BossData.qmAddTimes, "::")
    }, e.prototype.sortFunc = function (t, e) {
        return e.sortKey == t.sortKey ? t.struct.id - e.struct.id : e.sortKey - t.sortKey
    }, e.prototype.updateTime = function () {
        Model_BossData.qmAddTimes <= 0 && (Model_BossData.qmAddTimes = 3600, Model_BossData.qmChallengeTimes < 10 && Model_BossData.qmChallengeTimes++, GameGlobal.modelBoss.notify(Model_BossData.MSG_QMBOSS_UPDATA));
        var t = Model_BossData.qmAddTimes--;
        this.lab_time.text = DateUtil.getHMSBySecond2(t, "::")
    }, e.prototype.onOpen = function (t) {
        this.update(), GameGlobal.modelBoss.on(Model_BossData.MSG_QMBOSS_UPDATA, this.update, this), GameGlobal.modelBoss.CG789(), this.updateTime(), Timer.getIns().listen(this.updateTime, this, 1e3)
    }, e.prototype.onClose = function () {
        GameGlobal.modelBoss.off(Model_BossData.MSG_QMBOSS_UPDATA, this.update, this), Timer.getIns().remove(this.updateTime, this)
    }, e
}(BaseEUIView);
__reflect(ViewQmBoss.prototype, "ViewQmBoss");
var ViewQMKill = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/boss/QMKillSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnRet), this.addCloseListen(this.btnClose), this.dataList.dataProvider = this.itemListData = new eui.ArrayCollection, this.dataList.itemRendererFunction = QMRankItem.creatWithData, this.btnRet.label = "确定"
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update()
    }, e.prototype.onClose = function () {}, e.prototype.update = function () {
        var t = GameGlobal.modelBoss;
        this.itemListData.source = t.killInfo
    }, e
}(BaseEUIView);
__reflect(ViewQMKill.prototype, "ViewQMKill");
var ItemVipBoss = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/boss/vipBossItem.exml"
    }, e.prototype.partAdded = function (e, i) {
        t.prototype.partAdded.call(this, e, i)
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        var e = this;
        e.platBg.y = 35, this.btnChallenge.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchHandler, this)
    }, e.prototype.onTouchHandler = function () {
        ModelBattle.canEnterBtl() && GameGlobal.modelBoss.CG4153(this.arg.id)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.petv
        },
        set: function (t) {
            if (t) {
                this.arg = t.struct, this.chalengeTimes = t.challegeTimes;
                var e = (t.struct.id, t.struct.zsjl);
                this.img_kill.visible = !1, this.btnChallenge.visible = !0, this.lab_tips.visible = !1, this.img_fhl.visible = !1, this.lab_fh.visible = !1;
                var i = this.arg.gwmx;
                if (this.vipLevel.text = "vip" + t.struct.l, ConfigHelp.makeStrGrids(e, this.gridArr, 0, 0, this.group, !0, 10, .8), !this.petv) {
                    var o = this.petv = UIRole.create();
                    this.partCont.addChild(o)
                }
                this.petv.play(700), this.petv.setMonsterID(i), this.petv.setWay(3), this.petv.validParts(), this.lab_alive.visible = !1, this.img_xl.visible = !1, this.img_xld.visible = !1, this.lab_hpper.visible = !1;
                var n = t.struct.n.split(/\(|\)|\（|\）/);
                ArrayUtil.cleannull(n), this.labName.textFlow = HtmlUtil.parse(HtmlUtil.color(n[0], "#96403d")), this.labTimes.textFlow = HtmlUtil.parse("剩余挑战次数:" + HtmlUtil.color(this.chalengeTimes, "#10a244")), GameGlobal.modelRole.voMine.vip >= t.struct.l ? this.chalengeTimes > 0 ? this.btnChallenge.label = "挑战" : (this.btnChallenge.visible = !1, this.img_kill.visible = !0) : (this.btnChallenge.visible = !1, this.lab_tips.visible = !0, this.lab_tips.text = "VIP" + t.struct.l + "开启")
            }
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.bg.source = "CM2_json.bg1" : this.bg.source = "CM2_json.bg2"
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.$onRemoveFromStage = function () {
        this.petv && this.petv.stopAndClear()
    }, e
}(ItemBase);
__reflect(ItemVipBoss.prototype, "ItemVipBoss");
var View_vipBoss = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/boss/vipBossSkin.exml", e
    }
    return __extends(e, t), e.prototype.guide = function (t) {
        var e = t,
            i = 148 * e + 73;
        QuestGuideArrow.getIns().guideTo(this.scroll, 520, i), this.scroll.scrollPolicyV = eui.ScrollPolicy.OFF
    }, e.prototype.exitGuide = function () {
        this.scroll.scrollPolicyV = eui.ScrollPolicy.ON
    }, e.prototype.initView = function () {
        this.dataList.itemRenderer = ItemVipBoss, this.dataCollect = new eui.ArrayCollection, this.dataList.dataProvider = this.dataCollect, this.scroll.scrollPolicyH = eui.ScrollPolicy.OFF, this.scroll.verticalScrollBar.autoVisibility = !1, this.scroll.verticalScrollBar.visible = !1;
        var t = this.vipText = new ImageText;
        t.makeContainer(), t.container.y = 107, t.setCharFunc(ImageText.VIPBOSSVIP), this.addChild(t.container);
        var e = this.vipTextNext = new ImageText;
        e.makeContainer(), e.container.y = 107, e.setCharFunc(ImageText.VIPBOSSVIP), this.addChild(e.container);
        var i = this.czNum = new ImageText;
        i.container = this.czNumCont, i.container.y = 152, i.setCharFunc(ImageText.VIEWLITVIPFUNC);
        var o = this.vipLit = new ImageText;
        o.makeContainer(), o.container.y = 187, o.setCharFunc(ImageText.VIEWLITVIPFUNC), this.addChild(o.container);
        var n = this.imgTxtFull = new ImageText;
        n.charFunc = ImageText.VIEWBIGVIPFUNC, n.container = this.fullLevel
    }, e.prototype.update = function () {
        this.updateVip();
        var t = [];
        for (var e in CFG_VIPBOSS.LIB) {
            var i = CFG_VIPBOSS.LIB[e],
                o = Model_BossData.vipRecord[i.id];
            if (o) var n = o.canuseTimes;
            var a = 1e3;
            GameGlobal.modelRole.voMine.vip >= i.l && (a = n > 0 ? 2e3 : 0), t.push({
                struct: i,
                challegeTimes: n,
                sortKey: a
            })
        }
        t.sort(this.sortFunc), DisplayUtil.fillDataAC(this.dataCollect, t)
    }, e.prototype.updateVip = function () {
        var t = (GameGlobal.modelRole.voMine, VoVip.inst),
            e = VoVip.LIB[t.level],
            i = VoVip.LIB[t.level + 1],
            o = t.exp,
            n = o;
        i ? (this.lbVipExp.text = n + "/" + i.topup, this.pbVip.width = 343 * n / i.topup, this.czNum.setText((i.topup - n).toString()), this.czNum.container.x = 204, this.vipLit.setText("V" + (t.level + 1)), this.vipLit.container.x = 323, this.vipTextNext.setText("V" + (t.level + 1)), this.vipTextNext.container.x = 526) : (this.lbVipExp.text = n + "/" + e.topup, this.pbVip.width = 343, this.imgTxtFull.setText("M"), this.imgTxtFull.container.x = 300, this.czText.visible = !1, this.kqText.visible = !1, this.czNumCont.visible = !1, this.vipLit.container.visible = !1), this.vipText.setText("V" + t.level), this.vipText.container.x = 50
    }, e.prototype.sortFunc = function (t, e) {
        return e.sortKey == t.sortKey ? t.struct.id - e.struct.id : e.sortKey - t.sortKey
    }, e.prototype.sizeView = function () {
        this.czNumCont.validateNow(), this.czText.width = 166 + this.czNum.totalWid - 18
    }, e.prototype.onOpen = function (t) {
        this.update(), GameGlobal.modelBoss.on(Model_BossData.MSG_VIPBOSS_UPDATE, this.update, this), GameGlobal.modelVip.on(ModelVIP.msg_data, this.updateVip, this), GameGlobal.modelBoss.CG4151(), this.sizeView()
    }, e.prototype.onClose = function () {
        GameGlobal.modelBoss.off(Model_BossData.MSG_VIPBOSS_UPDATE, this.update, this), GameGlobal.modelVip.off(ModelVIP.msg_data, this.updateVip)
    }, e
}(BaseEUIView);
__reflect(View_vipBoss.prototype, "View_vipBoss");
var vipBossVo = function () {
    function t() {}
    return t
}();
__reflect(vipBossVo.prototype, "vipBossVo");
var vipPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curst = -1, e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.checkPage = function (t) {
        var e = this._curst == t;
        return e
    }, e.prototype.guidePage = function (t) {
        var e = this.base.getTabByIdx(t);
        e && QuestGuideArrow.getIns().guideTo(e, 40, 20)
    }, e.prototype.guideVIP = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.VIPBOSS);
        e && e.guide(t)
    }, e.prototype.exitGuideVIP = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.VIPBOSS);
        t && t.exitGuide()
    }, e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideViewCenter(this.base.btnReturn)
    }, e.prototype.initView = function () {
        var t = this,
            e = t.base;
        this.base.createTabGroup(), GameGlobal.layerMgr.reg(UIConst.VIPGIFTS, VVipGifts, this), GameGlobal.layerMgr.reg(UIConst.VIPBOSS, View_vipBoss, this), t.base.addTab("VIP礼包", 0, UIConst.VIPGIFTS), t.base.addTab("VIP BOSS", 1, UIConst.VIPBOSS), t.base.listenTabClick(t.onTbtn, t), t.addCloseListen(e.btnClose), t.addCloseListen(e.btnReturn)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelBoss.on(Model_BossData.MSG_VIPBOSS_UPDATE, this.onNotice, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelBoss.off(Model_BossData.MSG_VIPBOSS_UPDATE, this.onNotice, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e ? this.base.setTabSelIdx(e, !0) : this.base.setTabSelIdx(0, !0), this.addMsg(), this.onNotice()
    }, e.prototype.onNotice = function () {
        var t = GameGlobal.modelBoss,
            e = t.VIPNot(),
            i = this.base;
        i.setNoticByIndex(1, e)
    }, e.prototype.onTbtn = function (t) {
        var e = t.sort;
        CFG_COMMOND.canDo(t.bindSysID) && (this.base.title = t.text, this.setCurSt(e))
    }, e.prototype.onClose = function () {
        this.setCurSt(-1), this.removeMsg()
    }, e.prototype.setCurSt = function (t) {
        if (this._curst != t) {
            var e = GameGlobal.layerMgr;
            switch (this._curst) {
                case 0:
                    e.close(UIConst.VIPGIFTS);
                    break;
                case 1:
                    e.close(UIConst.VIPBOSS)
            }
            switch (this.base.hideQuestBtn(), t) {
                case 0:
                    e.open(UIConst.VIPGIFTS);
                    break;
                case 1:
                    e.open(UIConst.VIPBOSS)
            }
            this.base.setTabSelIdx(t), this._curst = t
        }
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(vipPage.prototype, "vipPage");
var BroadCastMgr = function () {
    function t() {}
    return t.getFunDic = function () {
        var e = t;
        return e._funDic || (e._funDic = new Object, e._funDic.item = e.getItemName, e._funDic.pName = e.getPlayerName, e._funDic.pNpc = e.getNpcName, e._funDic.pItemArr = e.getItemArr, e._funDic.time = e.getTime, e._funDic.getRankName = e.getRankName, e._funDic.getResult = e.getResult, e._funDic.pointId = e.getPoint, e._funDic.link = e.setLink, e._funDic.zdfbName = e.setZdfbName, e._funDic.bpfbName = e.setBpfbName, e._funDic.gangBossName = e.gangBossName, e._funDic.wdtdName = e.wdtdName, e._funDic.kaifuType = e.kaifuType, e._funDic.pName = e.fuwenInfo, e._funDic.fuWenName = e.fuWenName, e._funDic.fishRoomName = e.getFishRoomName, e._funDic.fishRoomNameL = e.getFishRoomNameL, e._funDic.czwarName = e.czwarName, e._funDic.titleName = e.titleName, e._funDic.fashionID = e.fashionID, e._funDic.petName = e.petName, e._funDic.linkToBH = e.linkToBH, e._funDic.gridNum = e.gridNum, e._funDic.xsID = e.huoBanInfo, e._funDic.yjID = e.getYinJiInfo, e._funDic.weekLBName = e.weekLBName, e._funDic.mpTypeName = e.mpTypeName), e._funDic
    }, t.setLink = function (e) {
        var i = e.split(":"),
            o = i[0];
        if (o == t.TYPE_1_FBQZ) return HtmlUtil.color(HtmlUtil.createLink("进入", !0, e), "#33dd33");
        if (o == t.TYPE_2_PET) {
            var n = parseInt(i[2]),
                a = CFG_Pet.PETLIB[n],
                s = ModelPet.getPetSpecName(a.q),
                r = a.n;
            if (a.q <= 2) var l = Color.UIBLUE_STR;
            else l = 3 == a.q ? Color.OR_STR : Color.RE_STR;
            return HtmlUtil.color(HtmlUtil.createLink(s + r, !0, e), l)
        }
        if (o == t.TYPE_3_ZDFB) return HtmlUtil.color(HtmlUtil.createLink("点击进入", !0, e), "#33dd33");
        if (o == t.TYPE_4_GANGFB) return HtmlUtil.color(HtmlUtil.createLink("进入", !0, e), "#33dd33");
        if (o == t.TYPE_5_GANGZR) return HtmlUtil.color(HtmlUtil.createLink("进入", !0, e), "#33dd33");
        if (o == t.TYPE_6_GANGBOSS) return HtmlUtil.color(HtmlUtil.createLink("前往", !0, e), "#33dd33");
        if (o == t.TYPE_7_WDTD) return HtmlUtil.color(HtmlUtil.createLink("进入", !0, e), "#33dd33");
        if (o == t.TYPE_8_FUWEN) {
            var h = parseInt(i[5]),
                c = CFG_HUOBAN1.LIB3[h].n,
                p = CFG_HUOBAN1.LIB3[h].xj,
                u = CFG_HUOBAN1.LIB3[h].wb;
            return HtmlUtil.color(HtmlUtil.createLink(u + c, !0, e, Color.QUALITYCOLORH[p + 1]), "#33dd33")
        }
        return o == t.TYPE_10_CZWAR ? HtmlUtil.color(HtmlUtil.createLink("我要挑战", !0, e), "#33dd33") : "11" == o ? HtmlUtil.color(HtmlUtil.createLink("立刻加入", !0, e), "#33dd33") : o == t.TYPE_12_SCLQ ? HtmlUtil.color(HtmlUtil.createLink("我也要领", !0, e), "#33dd33") : void 0
    }, t.getPoint = function (t) {
        var e = parseInt(t);
        if (CFG_GuanQia.LIB[e]) {
            var i = CFG_GuanQia.LIB[e];
            return i.n
        }
        return ""
    }, t.getResult = function (t) {
        return "1" == t ? "胜利" : "失败"
    }, t.getItemArr = function (e) {
        for (var i = [], o = e.split(","), n = 0; n < o.length; n++) i.push(t.getItemName(parseInt(o[n])));
        return i.join("，")
    }, t.getPlayerName = function (t) {
        return t
    }, t.getItemName = function (e) {
        var i = e + "";
        if (CFG_Item.LIB[e]) {
            var o = CFG_Item.LIB[e],
                n = o.name,
                a = o.quality;
            i = "<font color='" + Color.getColorStr(a) + "'>" + n + "</font>"
        } else i = t.getEquipName(e);
        return i
    }, t.getEquipName = function (t) {
        var e = t + "";
        if (CFG_Equip.LIB[t]) {
            var i = CFG_Equip.LIB[t],
                o = i.n,
                n = i.q;
            e = "<font color='" + Color.getColorStr(n) + "'>" + o + "</font>"
        }
        return e
    }, t.getNpcName = function (t) {
        if (CFG_Npc.LIB[t]) var e = CFG_Npc.LIB[t].name;
        else e = t + "";
        return e
    }, t.getTime = function (t) {
        return DateUtil.getYMDHM(parseInt(t))
    }, t.getRankName = function (t) {
        return 1 == t ? "战力" : "等级"
    }, t.repText = function (t, e, i, o) {
        if (e && e.length > 0) {
            var n = this.getFunDic(),
                a = e.split("_");
            if (i && "" != i)
                for (var s = i.split("_"), r = 0; r < s.length && !(a.length <= r); r++) n[s[r]] && (a[r] = n[s[r]](a[r]));
            a.unshift(t), t = Lang.reTxt.apply(null, a), -1 != t.indexOf("#name#") && (t = t.replace("#name#", o))
        }
        return t
    }, t.reTxt = function (t) {
        for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
        var o = e.length;
        if (0 == o) return t;
        for (var n = 0; o > n; n += 1) {
            var a = e[n];
            t = t.replace(Lang.getPattern(n), a)
        }
        return t
    }, t.setZdfbName = function (t) {
        var e = CFG_zuduifuben_131.LIB[t];
        return e.n
    }, t.setBpfbName = function (t) {
        var e = CFG_MENPAI.LIB5[t];
        return e.n
    }, t.gangBossName = function (t) {
        var e = CFG_MENPAI.LIB10[t].n;
        return e
    }, t.wdtdName = function (t) {
        var e = CFG_WDTD.LIB1[t].n;
        return e
    }, t.kaifuType = function (t) {
        var e = ArrayUtil.getItemMap(CFG_Act.LIB_ActPH, "idx", parseInt(t));
        return e ? e.mz : t
    }, t.fuwenInfo = function (t) {
        return t
    }, t.fuWenName = function (t) {
        return CFG_HUOBAN1.LIB3[t].n
    }, t.getFishRoomNameL = function (e) {
        var i = HtmlUtil.createLink("欢乐渔场" + (parseInt(e) % 1e3 + 1), !0, t.FISHROOM + ":" + e, "#33dd33");
        return i
    }, t.getFishRoomName = function (t) {
        var e = "欢乐渔场" + (parseInt(t) % 1e3 + 1);
        return e
    }, t.czwarName = function (t) {
        var e = CFG_CZWAR.LIB1[t];
        return e ? e.zw : t
    }, t.weekLBName = function (t) {
        var e = CFG_WEEKENDER.LIB1[t];
        return e ? e.mc : ""
    }, t.titleName = function (t) {
        var e = CFG_Title.LIB[t];
        return e ? e.name : null
    }, t.fashionID = function (t) {
        var e = CFG_Fashion.LIB[t];
        return e ? e.name : null
    }, t.gridNum = function (t) {
        return t
    }, t.petName = function (t) {
        var e = CFG_Pet.PETLIB[t];
        return e ? e.n : "errorPetID:" + t
    }, t.parseTBStr = function (t, e) {
        var i = CFG_Brocast.getCfgByid(t);
        return i ? this.parseStr(i.content, i.key, e) : "errorBCID:" + t
    }, t.parseStr = function (t, e, i) {
        for (var o = e.split("_"), n = i.split("_"), a = 0, s = n.length; s > a; a++) {
            var r = this.getFunDic()[o[a]];
            t = r ? t.replace(Lang.getPattern(a), r(n[a])) : t.replace(Lang.getPattern(a), "errorFuncID:" + o[a])
        }
        return t
    }, t.linkToBH = function (t) {
        return HtmlUtil.createLink("立刻前往", !0, "goToMpBattle", "#84dbFF")
    }, t.huoBanInfo = function (t) {
        return CFG_HUOBAN1.LIB[t].n
    }, t.getYinJiInfo = function (t) {
        return CFG_HuobanJX.LIB2[t].mc
    }, t.mpTypeName = function (t) {
        switch (Number(t)) {
            case 1:
                return "新秀";
            case 2:
                return "群雄";
            case 3:
                return "巅峰"
        }
    }, t.TYPE_1_FBQZ = "1", t.TYPE_2_PET = "2", t.TYPE_3_ZDFB = "3", t.TYPE_4_GANGFB = "4", t.TYPE_5_GANGZR = "5", t.TYPE_6_GANGBOSS = "6", t.TYPE_7_WDTD = "7", t.TYPE_8_FUWEN = "8", t.FISHROOM = "9", t.TYPE_10_CZWAR = "10", t.TYPE_11_ZHUOCHONGXZ = "11", t.TYPE_12_SCLQ = "12", t
}();
__reflect(BroadCastMgr.prototype, "BroadCastMgr");
var ModelBuff = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.buffArr = [], e
    }
    return __extends(e, t), e.prototype.getBuff = function (t) {
        for (var e = 0, i = this.buffArr.length; i > e; e++) {
            var o = this.buffArr[e];
            if (o.id == t) return o
        }
        return null
    }, e.prototype.addBuff = function (t) {
        this.buffArr.push(t), this.notify(e.MSG_ADDBUFF, t)
    }, e.prototype.removeBuff = function (t) {
        var i = this.buffArr.indexOf(t);
        i >= 0 && (this.buffArr.splice(i, 1), this.notify(e.MSG_DELBUFF, t))
    }, e.MSG_ADDBUFF = "1", e.MSG_DELBUFF = "-1", e
}(MsgCenter);
__reflect(ModelBuff.prototype, "ModelBuff");
var ViewBuffIco = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.icon = new eui.Image, e.addChild(e.icon), e.labelBG = new eui.Image, e.addChild(e.labelBG), e.labelBG.source = "MainScreen_json.bm_headRectBG", e.labelBG.$setWidth(70), e.labelBG.$setX(7), e.labelBG.$setY(78), e.labelBG.$setHeight(24), e.labelBG.alpha = .6, e.label = new egret.TextField, e.label.textColor = 3403315, e.label.size = 20, e.addChild(e.label), e.label.$setY(80), e
    }
    return __extends(e, t), e.prototype.$onAddToStage = function (e, i) {
        t.prototype.$onAddToStage.call(this, e, i)
    }, e.prototype.$onRemoveFromStage = function () {
        t.prototype.$onRemoveFromStage.call(this)
    }, e.prototype.setVo = function (t) {
        this._vo = t, this.icon.source = t.getIcon()
    }, e.prototype.updateTime = function () {
        1 == this._vo.id && (this.label.$setText(DateUtil.getMSBySec3(VoVip.getTasteVipRemainSec())), this.label.$setX(85 - this.label.textWidth >> 1))
    }, e
}(eui.Component);
__reflect(ViewBuffIco.prototype, "ViewBuffIco");
var VoBuff = function () {
    function t() {}
    return t.prototype.getIcon = function () {
        return this.icon
    }, t
}();
__reflect(VoBuff.prototype, "VoBuff");
var ItemCaiLiaoFB = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e._20YUANBAO = 20, e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemCaiLiaoFBSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.txtCostYB.text = "x" + this._20YUANBAO, this.btnHand.label = "挑战", this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        var t = this.btnHand.va;
        switch (t) {
            case -1:
            case 0:
                ModelBattle.canEnterBtl() && GameGlobal.modelcailiaoFb.CG1365(this.data.cfg.bianhao, 0);
                break;
            case 1:
                this.dealWithSaoDang(!0) && GameGlobal.modelcailiaoFb.CG1365(this.data.cfg.bianhao, 1)
        }
    }, e.prototype.dealWithSaoDang = function (t) {
        var e = this._20YUANBAO,
            i = GameGlobal.modelRole.voMine.yuanbao,
            o = this.getMaxCount();
        return this.data.tiaoZhanCount >= o ? (ViewText.text("扫荡次数不足"), !1) : e > i ? (t && platform.askOpenRecharge(), !1) : VCaiLiaoFBBuyTip.isCheckboxUp ? !0 : (GameGlobal.layerMgr.open(UIConst.UIID_CAILIAOBUYTIP, this.data.cfg.bianhao), !1)
    }, e.prototype.getMaxCount = function () {
        var t = GameGlobal.modelRole.voMine.vip,
            e = VoVip.LIB[t].clfb;
        return e + this.data.freeCount
    }, e.prototype.updateDynamicAward = function () {
        var t = this.data.tiaoZhanCount;
        if (t > 0 && t < this.getMaxCount()) {
            var e = ConfigHelp.makeVoList(this.data.cfg.ewjl)[0];
            this.dynamicGrid.data = e, DisplayUtil.addBy(this.dynamicGroup, this)
        } else DisplayUtil.remove(this.dynamicGroup)
    }, e.prototype.getVipAddCntInfo = function () {
        var t = this.data.getNextVipAddInfo();
        return t
    }, e.prototype.updateStates = function () {
        var t = this.data.tiaoZhanCount,
            e = GameGlobal.modelRole.voMine.vip;
        switch (t) {
            case -1:
                this.btnHand.label = "挑战", this.btnHand.setNoticeVis(!0), this.btnHand.enabled = !0, this.btnHand.va = -1, this.txtCostYB.text = "x0", DisplayUtil.remove(this.costGroup), this.txtLeftCount.textFlow = HtmlUtil.parse("今日剩余挑战次数: " + HtmlUtil.color(1, "#10a244"));
                break;
            case 0:
                this.btnHand.label = "免费扫荡", this.btnHand.setNoticeVis(!0), this.btnHand.enabled = !0, this.btnHand.va = 0, this.txtCostYB.text = "x0", DisplayUtil.remove(this.costGroup), this.txtLeftCount.textFlow = HtmlUtil.parse("今日剩余扫荡次数: " + HtmlUtil.color(this.getMaxCount(), "#10a244"));
                break;
            default:
                if (this.btnHand.label = "扫荡", this.btnHand.setNoticeVis(!1), this.btnHand.va = 1, t < this.getMaxCount()) this.txtLeftCount.textFlow = HtmlUtil.parse("今日剩余扫荡次数: " + HtmlUtil.color(this.getMaxCount() - t, "#10a244")), this.txtCostYB.text = "x" + this._20YUANBAO, GameGlobal.modelRole.voMine.yuanbao < this._20YUANBAO ? this.txtCostYB.textColor = 16711680 : this.txtCostYB.textColor = 1090116, DisplayUtil.addBy(this.costGroup, this.groupInfo), this.btnHand.enabled = !0;
                else {
                    if (e < VoVip.getFullVip()) {
                        var i = this.getVipAddCntInfo();
                        this.txtLeftCount.textFlow = HtmlUtil.parse(HtmlUtil.color("VIP" + i.vip, "#10a244") + "可再扫荡" + i.count + "次!")
                    } else DisplayUtil.remove(this.txtLeftCount);
                    DisplayUtil.remove(this.costGroup), this.btnHand.enabled = !1, this.txtCostYB.text = "x0"
                }
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = parseInt(t.cfg.bianhao) % 1e3 >> 0;
            this.txtName.text = t.cfg.name, this.txtCostYB.textColor = 1090116, this.txtCurLayer.textFlow = HtmlUtil.parse("第 " + HtmlUtil.color(HtmlUtil.fontSize(e + 1, 30), "#10a244") + " 层");
            var i = ConfigHelp.makeVoList(t.cfg.jl)[0];
            this.staticGrid.data = i;
            var o = GameGlobal.modelRole.voMine.level,
                n = t.cfg.openlv;
            o >= n ? (DisplayUtil.addBy(this.txtLeftCount, this.groupInfo, 0), DisplayUtil.addBy(this.costGroup, this.groupInfo), t.isManJi() ? DisplayUtil.remove(this.txtNextLayer) : (DisplayUtil.addBy(this.txtNextLayer, this.txtLayerContainer), this.txtNextLayer.textFlow = HtmlUtil.parse(HtmlUtil.color(t.getNextOpenLvl() + "级", "#10a244") + "开启下一层")), this.updateStates(), this.updateDynamicAward()) : (DisplayUtil.remove(this.dynamicGroup), DisplayUtil.remove(this.txtNextLayer), DisplayUtil.remove(this.costGroup), this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1), this.btnHand.label = "不可挑战", this.txtLeftCount.textFlow = HtmlUtil.parse(HtmlUtil.color(n + "级开启", "#ff0000"))), this.weekGrp.visible = this.btnHand.enabled && ModelWeekender.time > 0
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.guide = function () {
        QuestGuideArrow.getIns().guideTo(this.btnHand, 50, 20)
    }, e
}(ItemBase);
__reflect(ItemCaiLiaoFB.prototype, "ItemCaiLiaoFB");
var ModelCaiLiaoFB = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1362, this.GC1362, this), e.regHand(1364, this.GC1364, this)
    }, e.prototype.CG1361 = function () {
        this.sendSocket(1361, this.getBytes())
    }, e.prototype.GC1362 = function (t, i) {
        0 == VoCaiLiaoFB.map.getLength() && VoCaiLiaoFB.init();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readShort(),
                s = i.readByte();
            VoCaiLiaoFB.update(a, s)
        }
        t.notify(e.msg_data)
    }, e.prototype.GC1364 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort(),
                a = i.readByte();
            t.getAwards(i);
            var s = VoCaiLiaoFB.update(n, a);
            t.notify(e.msg_updateItem, s)
        } else ViewText.text(["", "", "没有对应关卡", "背包不够", "超过免费挑战次数", "未达到挑战等级", "道具数量异常", "副本ID异常"][o])
    }, e.prototype.CG1365 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeByte(e), this.sendSocket(1365, i)
    }, e.prototype.CG1367 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(1367, e)
    }, e.prototype.getAwards = function (t) {
        var e = ConfigHelp.parseServItems(t);
        e && e.length > 0 && GameGlobal.layerMgr.open(UIConst.GKBOSSAWRAD, e)
    }, e.msg_data = "msg_data", e.msg_updateItem = "msg_updateItem", e
}(BaseModel);
__reflect(ModelCaiLiaoFB.prototype, "ModelCaiLiaoFB");
var VCaiLiaoFB = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.guideing = !1, e.sourceData = new eui.ArrayCollection, e.skinName = "VCaiLiaoFBSkin", e
    }
    return __extends(e, t), e.prototype.guide = function (t) {
        this.guideing = !0;
        var e = t,
            i = 148 * e + 73;
        QuestGuideArrow.getIns().guideTo(this.scroller, 520, i), this.scroller.scrollPolicyV = eui.ScrollPolicy.OFF
    }, e.prototype.exitGuide = function () {
        this.guideing = !1, this.scroller.scrollPolicyV = eui.ScrollPolicy.ON
    }, e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideViewCenter(this.base.btnReturn)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "材料副本", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.container.itemRenderer = ItemCaiLiaoFB, this.container.dataProvider = this.sourceData, 0 == VoCaiLiaoFB.map.getLength() && VoCaiLiaoFB.init()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelcailiaoFb.on(ModelCaiLiaoFB.msg_data, this.onUpdate, this), GameGlobal.modelcailiaoFb.on(ModelCaiLiaoFB.msg_updateItem, this.updateItem, this), GameGlobal.modelcailiaoFb.CG1361()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelcailiaoFb.off(ModelCaiLiaoFB.msg_updateItem, this.updateItem, this), GameGlobal.modelcailiaoFb.off(ModelCaiLiaoFB.msg_data, this.onUpdate, this)
    }, e.prototype.updateItem = function (t) {
        this.sourceData.itemUpdated(t)
    }, e.prototype.onUpdate = function () {
        var t = VoCaiLiaoFB.map.getList();
        t.sort(function (t, e) {
            return t.cfg.px - e.cfg.px
        }), DisplayUtil.fillDataAC(this.sourceData, t)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), "noAlign" != e && (this.scroller.viewport.scrollV = 0)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.prototype.getItemByType = function (t) {
        for (var e = 0, i = this.container.numChildren; i > e; e++) {
            var o = this.container.getChildAt(e);
            if (o._data.cfg.bianhao / 1e3 >> 0 == t) return o
        }
        return null
    }, e
}(BaseEUIView);
__reflect(VCaiLiaoFB.prototype, "VCaiLiaoFB");
var VCaiLiaoFBBuyTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.costYuanBao = 20, e.descrition = "是否消耗{0}元宝扫荡, 扫荡可直接获得奖励!", e.skinName = "VCaiLiaoFBBuyTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.background), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnCancle), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.checkBox), this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.checkBox.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCheck, this), this.btnSure.label = "确定", this.btnCancle.label = "取消", this.iconGou.visible = !1
    }, e.prototype.onCheck = function () {
        this.setCheck(!e.isCheckboxUp)
    }, e.prototype.setCheck = function (t) {
        e.isCheckboxUp = t, this.iconGou.visible = t
    }, e.prototype.onHand = function () {
        var t = GameGlobal.modelRole.voMine.yuanbao;
        t < this.costYuanBao ? (ViewText.text("元宝不足"), platform.askOpenRecharge()) : GameGlobal.modelcailiaoFb.CG1365(this.cfgId, 1), this.closeHandler()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.cfgId = e, this.txtDescription.text = Lang.reTxt(this.descrition, this.costYuanBao)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.isCheckboxUp = !1, e
}(PopUpUI);
__reflect(VCaiLiaoFBBuyTip.prototype, "VCaiLiaoFBBuyTip");
var VoCaiLiaoFB = function () {
    function t() {
        this.tiaoZhanCount = 0, this.freeCount = 0
    }
    return t.init = function () {
        var e = CFG_CLFB.LIB;
        for (var i in e) {
            var o = parseInt(i) / 1e3 >> 0,
                n = this.map.getByKey(o);
            n || (n = new t, n.cfg = e[i], n.freeCount = e[i].num, this.map.add(n, o))
        }
    }, t.update = function (t, e) {
        var i = this.getById(t);
        if (i) {
            var o = CFG_CLFB.LIB[t];
            i.cfg = o, i.tiaoZhanCount = e
        }
        return i
    }, t.getById = function (t) {
        var e = t / 1e3 >> 0;
        return this.map.getByKey(e)
    }, t.prototype.getNextOpenLvl = function () {
        var t = this.cfg.bianhao,
            e = t + 1,
            i = CFG_CLFB.LIB[e];
        return i ? i.openlv : 0
    }, t.prototype.isManJi = function () {
        var t = this.cfg.bianhao,
            e = CFG_CLFB.LIB[t + 1];
        return null == e
    }, t.prototype.getNextVipAddInfo = function () {
        var t = {},
            e = GameGlobal.modelRole.voMine.vip,
            i = VoVip.LIB[e].clfb;
        return t.vip = e, t.count = i, this.setVipAddCntInfo(t, e + 1), t
    }, t.prototype.setVipAddCntInfo = function (t, e) {
        var i = VoVip.LIB[e];
        if (i) {
            var o = i.clfb;
            t.count != o ? (t.vip = e, t.count = o - t.count) : this.setVipAddCntInfo(t, e + 1)
        }
    }, t.map = new CommondMap, t
}();
__reflect(VoCaiLiaoFB.prototype, "VoCaiLiaoFB");
var CampWar;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.grids = [], t.skinName = "WinSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.proxy = this.getProxy(t.Proxy), this.model = this.getModel(t.Model), this.btnok.setNoticeVis(!1), this.btnok.label = "关闭"
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addEvent();
            var o = this.model.battleResult;
            this.titleImg.source = o.isWin ? "fight_json.bm_win" : "fight_json.bm_lose";
            var n = [],
                a = [],
                s = Config.getConfig(zyzjcpz_720).get(1),
                r = o.isWin ? s.Win : s.Lose;
            if (n.push(r), a.push(""), 0 != o.continueWinCount) {
                var l = this.model.getReportConfigData(t.ReportType.CONTINUE_WIN, o.continueWinCount);
                l && "0" != l.extraReward && (n.push(l.extraReward), a.push("连胜奖励"))
            }
            if (0 != o.finalityCount) {
                var l = this.model.getReportConfigData(t.ReportType.FINAL_CONTINUE_WIN, o.finalityCount);
                l && "0" != l.extraReward && (n.push(l.extraReward), a.push("终结奖励"))
            }
            this.setAward(n, a), this.itemGroup.scrollV = 0
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeEvent()
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i.prototype.addEvent = function () {
            this.btnok.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
        }, i.prototype.removeEvent = function () {
            this.btnok.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
        }, i.prototype.onTouch = function (t) {
            switch (t.currentTarget) {
                case this.btnok:
                    this.closeView(i)
            }
        }, i.prototype.setAward = function (t, e) {
            for (var i = "", o = [], n = 0, a = 0, s = t.length; s > a; a++) {
                var r = t[a];
                0 != a && (i += ";"), i += r;
                var l = r.split(";"),
                    h = l.length,
                    c = e[a];
                if (c)
                    for (var p = 0, u = h; u > p; p++) o[n + p] = c;
                n += h
            }
            ConfigHelp.makeDescribeGrids(i, o, this.grids, 0, 0, this.itemGroup, !0)
        }, i
    }(BaseEUIView);
    t.BattleResultView = e, __reflect(e.prototype, "CampWar.BattleResultView")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.grids = [], e.skinName = "CampWarAwardItemSkin", e
        }
        return __extends(e, t), e.prototype.childrenCreated = function () {
            t.prototype.childrenCreated.call(this)
        }, e.prototype.dataChanged = function () {
            var t = this.data;
            "0" != t.icon ? (this.imgRank.visible = !0, this.lb_sort.visible = !1, this.imgRank.source = t.icon) : (this.imgRank.visible = !1, this.lb_sort.visible = !0, this.lb_sort.text = t.description), this.awardGrp.removeChildren(), ConfigHelp.makeStrGrids(t.itemList, this.grids, 0, 0, this.awardGrp, !0, 5, 1)
        }, e
    }(eui.ItemRenderer);
    t.AwardItem = e, __reflect(e.prototype, "CampWar.AwardItem")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "CampWarAwardSkin", t
        }
        return __extends(i, e), i.prototype.init = function () {
            this.arrCollection = new eui.ArrayCollection
        }, i.prototype.initView = function () {
            e.prototype.initView.call(this), this.init(), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.base.title = "阵营奖励", this.list.itemRenderer = t.AwardItem, this.list.dataProvider = this.arrCollection, this.arrCollection.source = this.getModel(t.Model).awardArr
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t)
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this)
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i
    }(BaseEUIView);
    t.AwardView = e, __reflect(e.prototype, "CampWar.AwardView")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.initialize = function () {
            e.prototype.initialize.call(this), this.model = this.getModel(t.Model)
        }, i.prototype.registUI = function () {
            var e = GameGlobal.layerMgr;
            e.regView(t.EnrollView, e.UI_MainMiddle, 1, 1), e.regView(t.LobbyView, e.UI_MainMiddle, 1), e.regView(t.MembersView, e.UI_MainMiddle, 1, 1), e.regView(t.MatchResultView, e.UI_MainMiddle, 1), e.regView(t.BattleResultView, e.UI_MainMiddle, 1), e.regView(t.AwardView, e.UI_Message, 1, 1), e.regView(t.WinRank, e.UI_Message, 1, 1), e.regView(t.PlayerInfoView, e.UI_Message, 1), this.addEventListener()
        }, i.prototype.registProxys = function () {
            var e = GameGlobal.socketMgr;
            this.registSingleProxy(t.Proxy, e), this.proxy = this.getProxy(t.Proxy)
        }, i.prototype.addEventListener = function () {
            EventCenter.addMsg(t.Event.OPEN, this.onOpen, this), EventCenter.addMsg(t.Event.ON_INFO, this.onInfo, this), EventCenter.addMsg(t.Event.ON_STATUS_CHANGE, this.onStatusChange, this), EventCenter.addMsg(t.Event.ON_MATCH_RESULT, this.onMatchResult, this), EventCenter.addMsg(t.Event.ON_ENROLL_SUCCESS, this.onEnrollSuccess, this, null, 99);
            var e = GameCtrlBase.instance;
            e.on(ModelBattle.GC_504, this.onEndBattle, this)
        }, i.prototype.onOpen = function () {
            null == this.model.battleResult.isWin ? this.proxy.getInfo() : ViewText.text("正在战斗...")
        }, i.prototype.onInfo = function () {
            switch (this.model.status) {
                case t.ActivityStatus.START:
                    GameGlobal.layerMgr.close(UIConst.HUODONG), this.model.isEnroll ? this.openView(t.LobbyView) : this.openView(t.EnrollView);
                    break;
                case t.ActivityStatus.OVER:
                    ViewText.text("活动尚未开启，请准时参加！！！")
            }
        }, i.prototype.onEndBattle = function (t) {
            (t == ModelBattle.BT_CAMP_WAR || t == ModelBattle.BT_CAMP_WAR_ROBOT) && (this.proxy.sendBattleEnd(), this.proxy.getInfo())
        }, i.prototype.onStatusChange = function (e) {
            var i = e.data;
            switch (i) {
                case t.ActivityStatus.START:
                    VHuoDongEntry.addHD(1130);
                    break;
                case t.ActivityStatus.OVER:
                    this.model.reset()
            }
        }, i.prototype.onMatchResult = function (e) {
            this.openView(t.MatchResultView, e.data)
        }, i.prototype.onEnrollSuccess = function () {
            this.model.isFirstMatching = !0, this.openView(t.LobbyView)
        }, i
    }(UIAndProxyBaseCtr);
    t.CampWarCtr = e, __reflect(e.prototype, "CampWar.CampWarCtr")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.listData = new eui.ArrayCollection, t.skinName = "CampWarWinRankSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            this.basePanel.title = "上届战况", this.dataList.itemRenderer = t.WinRankItem, this.dataList.dataProvider = this.listData, this.awardLink.textFlow = HtmlUtil.underLine("奖励一览"), this.awardLink.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
        }, i.prototype.addEvent = function () {
            this.addCloseListen(this.basePanel.btnClose), this.addCloseListen(this.basePanel.btnReturn), EventCenter.addMsg(t.Event.ON_CAMP_WIN_RANK, this.onLastSeasonWinCamp, this)
        }, i.prototype.removeEvent = function () {
            EventCenter.removeMsg(t.Event.ON_CAMP_WIN_RANK, this.onLastSeasonWinCamp, this)
        }, i.prototype.onLastSeasonWinCamp = function () {
            var e = this.getModel(t.Model).lastSeasonWinCampList;
            this.listData.source = e
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeEvent()
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addEvent(), this.proxy = this.getProxy(t.Proxy), this.proxy.getLastSeasonWinCamp()
        }, i.prototype.onTouch = function () {
            this.openView(t.AwardView), this.closeView(i)
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i
    }(BaseEUIView);
    t.WinRank = e, __reflect(e.prototype, "CampWar.WinRank")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.skinName = "CampWarWinRankItemSkin", e
        }
        return __extends(e, t), e.prototype.dataChanged = function () {
            var t = this.data;
            this.Label1.text = "" + t.campName, this.Label2.text = "" + (t.nickName + t.zoneName), this.Label3.text = "" + t.prestige, this.Label4.text = "" + t.winCount
        }, e
    }(eui.ItemRenderer);
    t.WinRankItem = e, __reflect(e.prototype, "CampWar.WinRankItem")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.cd = 5, e.curTime = 0, e.skinName = "CmpWarChatSkin", e
        }
        return __extends(e, t), e.prototype.onSend = function () {
            var e = App.serverTimestamp,
                i = this.cd - ((e - this.curTime) / 1e3 >> 0);
            0 >= i ? (this.curTime = e, t.prototype.onSend.call(this)) : ViewText.text("下次发言时间剩余" + i + "秒")
        }, e.prototype.deactive = function () {
            t.prototype.deactive.call(this), this.quitChannel()
        }, e
    }(ChatWinCmp);
    t.CmpWarChatWin = e, __reflect(e.prototype, "CampWar.CmpWarChatWin")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "CampWarEnrollSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.proxy = this.getProxy(t.Proxy), this.model = this.getModel(t.Model), this.enrollBtn.lbText.textColor = 11023619
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t), this.addEvent(), this.enrollBtn.label = this.model.isEnroll ? "已报名" : "报名参加", this.enrollBtn.enabled = !this.model.isEnroll
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeEvent()
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i.prototype.addEvent = function () {
            this.awardBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.enrollBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), EventCenter.addMsg(t.Event.ON_ENROLL_SUCCESS, this.onEnrollSuccess, this, null, 99)
        }, i.prototype.removeEvent = function () {
            this.awardBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.enrollBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), EventCenter.removeMsg(t.Event.ON_ENROLL_SUCCESS, this.onEnrollSuccess, this)
        }, i.prototype.onTouch = function (e) {
            switch (e.currentTarget) {
                case this.enrollBtn:
                    this.model.isEnroll || this.proxy.enroll();
                    break;
                case this.awardBtn:
                    this.openView(t.AwardView);
                    break;
                case this.closeBtn:
                    this.closeView(i)
            }
        }, i.prototype.onEnrollSuccess = function () {
            this.enrollBtn.label = "已报名", this.enrollBtn.enabled = !1, ViewText.text("报名成功！")
        }, i
    }(BaseEUIView);
    t.EnrollView = e, __reflect(e.prototype, "CampWar.EnrollView")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.winListData = new eui.ArrayCollection, t.reportListData = new eui.ArrayCollection, t.skinName = "CampWarLobbySkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.proxy = this.getProxy(t.Proxy), this.model = this.getModel(t.Model), this.hp.setTextSize(18), this.basePanel.title = "阵营战", this.addCloseListen(this.basePanel.btnClose), this.addCloseListen(this.basePanel.btnReturn), this.winList.itemRenderer = t.RankingItemView, this.reportList.itemRenderer = t.ReportItemView, this.winList.dataProvider = this.winListData, this.reportList.dataProvider = this.reportListData, this.cureBtn.label = "治疗", this.warBtn.label = "开始匹配"
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addMatchingEff(), this.addEvent(), this.chatWin.active(), this.chatWin.showCont(EChatChannel.CAMP_WAR), this.isShowChat(!1), this.closeView(t.EnrollView), this.mainGroup.visible = !1, this.winList.visible = !1, this.reportList.visible = !1, this.matchingTimer = 0, this.filterType = t.FilterType.ALL, this.selectTab(0), this.setOverTime(), this.checkMatching(), this.showBattleResult(), this.getAboutData(), TimerManager.doTimer(1e4, -1, this.getAboutData, this)
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.model.isMatching && this.proxy.cancelMatching(), this.removeMatchingEff(), this.removeEvent(), this.chatWin.deactive(), TimerManager.remove(this.updateOverTime, this), TimerManager.remove(this.getAboutData, this), TimerManager.remove(this.setReportToTottom, this)
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i.prototype.addEvent = function () {
            for (var e = 0, i = this.tabGroup.$children.length; i > e; e++) {
                var o = this.tabGroup.$children[e];
                o.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTabTouch, this)
            }
            this.cureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.warBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.kunLunBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.shuShanBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.winList.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onTouchList, this);
            var n = GameCtrlBase.instance;
            n.on(ModelBattle.MSG_BATTLE_BEGIN, this.onStartBattle, this), EventCenter.addMsg(t.Event.ON_SELF_INFO, this.onSelfInfo, this), EventCenter.addMsg(t.Event.ON_WIN_LIST, this.onWinList, this), EventCenter.addMsg(t.Event.ON_CAMP_SCORE, this.onCampScore, this), EventCenter.addMsg(t.Event.ON_WAR_REPORT, this.onWarReport, this), EventCenter.addMsg(t.Event.ON_MATCHING_CHANGE, this.onMatchingChange, this), EventCenter.addMsg(t.Event.ON_CURE, this.onCure, this), EventCenter.addMsg(t.Event.ON_PLAYER_INFO, this.onPlayerInfo, this)
        }, i.prototype.removeEvent = function () {
            for (var e = 0, i = this.tabGroup.$children.length; i > e; e++) {
                var o = this.tabGroup.$children[e];
                o.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTabTouch, this)
            }
            this.cureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.warBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.kunLunBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.shuShanBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.winList.removeEventListener(eui.ItemTapEvent.ITEM_TAP, this.onTouchList, this);
            var n = GameCtrlBase.instance;
            n.off(ModelBattle.MSG_BATTLE_BEGIN, this.onStartBattle, this), EventCenter.removeMsg(t.Event.ON_SELF_INFO, this.onSelfInfo, this), EventCenter.removeMsg(t.Event.ON_WIN_LIST, this.onWinList, this), EventCenter.removeMsg(t.Event.ON_CAMP_SCORE, this.onCampScore, this), EventCenter.removeMsg(t.Event.ON_WAR_REPORT, this.onWarReport, this), EventCenter.removeMsg(t.Event.ON_MATCHING_CHANGE, this.onMatchingChange, this), EventCenter.removeMsg(t.Event.ON_CURE, this.onCure, this), EventCenter.removeMsg(t.Event.ON_PLAYER_INFO, this.onPlayerInfo, this)
        }, i.prototype.setOverTime = function () {
            var t = DateUtils.getFormatByTimeStamp(App.serverTimestamp),
                e = Config.getConfig(zyzjcpz_720).get(1);
            this.surplusSecond = 0;
            for (var i = e.BattleTime.split(","), o = 0, n = i.length; n > o; o++) {
                var a = i[o].split("-");
                if (this.surplusSecond = DateUtils.getSurplusSecond(t, a[1]), this.surplusSecond >= 0) break
            }
            var s = DateUtils.getFormatBySecond(this.surplusSecond);
            this.overTime.text = s, TimerManager.doTimer(1e3, -1, this.updateOverTime, this)
        }, i.prototype.updateOverTime = function () {
            this.surplusSecond--;
            var t = DateUtils.getFormatBySecond(Math.max(0, this.surplusSecond));
            this.overTime.text = t, this.surplusSecond <= 0 && (TimerManager.remove(this.updateOverTime, this), TimerManager.doTimer(2e3, 1, function () {
                this.closeView(i)
            }, this))
        }, i.prototype.onTouchList = function (t) {
            var e = t.currentTarget,
                i = e.getChildAt(e.selectedIndex);
            if (i) {
                var o = i.data;
                this.proxy.getPlayerInfo(o.uid)
            }
        }, i.prototype.onTouch = function (e) {
            var i = this;
            switch (e.currentTarget) {
                case this.cureBtn:
                    var o = Config.getConfig(zyzjcpz_720).get(1),
                        n = o.healConsume.split(","),
                        a = Config.getConfig(attr_115).get(parseInt(n[0]));
                    if (GameGlobal.modelRole.voMine.yuanbao < parseInt(n[2])) return void ViewText.text(a.n + "不足！！！");
                    var s = "是否消耗" + n[2] + a.n + "恢复满血？";
                    ViewAlert.show(s, function () {
                        i.proxy.getCure()
                    });
                    break;
                case this.warBtn:
                    if (egret.getTimer() - this.matchingTimer < 1e3) return;
                    this.matchingTimer = egret.getTimer(), this.model.isMatching ? this.proxy.cancelMatching() : this.proxy.startMatching();
                    break;
                case this.shuShanBtn:
                    this.showCampMenbers(t.CampID.SHU_SAN);
                    break;
                case this.kunLunBtn:
                    this.showCampMenbers(t.CampID.KUN_LUN)
            }
        }, i.prototype.onTabTouch = function (e) {
            var i = this.tabGroup.getChildIndex(e.currentTarget),
                o = [t.FilterType.ALL, t.FilterType.SELF];
            switch (i) {
                case 0:
                case 1:
                    this.isShowChat(!1), this.filterType = o[i], this.proxy.getWarReport(this.filterType);
                    break;
                case 2:
                    this.isShowChat(!0)
            }
            this.selectTab(i)
        }, i.prototype.isShowChat = function (t) {
            this.reportScroller.visible = !t, this.chatWin.visible = t
        }, i.prototype.selectTab = function (t) {
            for (var e = 0, i = this.tabGroup.$children.length; i > e; e++) {
                var o = this.tabGroup.$children[e];
                o.currentState = e == t ? "disabled" : "up"
            }
        }, i.prototype.getCampIcom = function (e) {
            var i;
            switch (e) {
                case t.CampID.SHU_SAN:
                    i = "campWar_json.shu_shan";
                    break;
                case t.CampID.KUN_LUN:
                    i = "campWar_json.kun_lun"
            }
            return i
        }, i.prototype.onSelfInfo = function () {
            var t = this.model.selfData;
            this.mainGroup.visible = !0, this.curContinueWin.text = t.curContinueWin.toString(), this.topContinueWin.text = t.topContinueWin.toString(), this.winCount.text = t.winCount.toString(), this.failCount.text = t.failCount.toString(), this.prestige.text = t.prestige.toString(), this.curCamp.source = this.getCampIcom(t.campID), this.hp.setPercent(t.hp / 100)
        }, i.prototype.onWinList = function (t) {
            var e = t.data;
            this.winList.visible = !0, this.winListData.source = e
        }, i.prototype.onWarReport = function (t) {
            var e = t.data;
            this.reportList.visible = !0, this.reportListData.source = e, TimerManager.remove(this.setReportToTottom, this), TimerManager.doTimer(30, 1, this.setReportToTottom, this)
        }, i.prototype.setReportToTottom = function () {
            this.setScrollerToTottom(this.reportScroller)
        }, i.prototype.onStartBattle = function (t) {
            (67 == t.type || 68 == t.type) && (t.type == ModelBattle.BT_CAMP_WAR || t.type == ModelBattle.BT_CAMP_WAR_ROBOT) && GameGlobal.layerMgr.closePnlByType(1)
        }, i.prototype.onMatchingChange = function (t) {
            this.model.isMatching ? (this.model.isFirstMatching = !1, this.matchingEff.visible = !0, this.warBtn.label = "取消匹配") : (this.matchingEff.visible = !1, this.warBtn.label = "开始匹配")
        }, i.prototype.onCampScore = function () {
            for (var t in this.model.campList) {
                var e = this.model.campList[t];
                this.setCampScore(e.campID, e.score)
            }
        }, i.prototype.setCampScore = function (e, i) {
            var o = "积分:" + i;
            switch (e) {
                case t.CampID.KUN_LUN:
                    this.kunLunScore.text = o;
                    break;
                case t.CampID.SHU_SAN:
                    this.shuShanScore.text = o
            }
        }, i.prototype.onCure = function () {
            this.hp.setPercent(100)
        }, i.prototype.onPlayerInfo = function (e) {
            this.openView(t.PlayerInfoView, e.data)
        }, i.prototype.showBattleResult = function () {
            var e = this.model.battleResult;
            null != e.isWin && (this.openView(t.BattleResultView), e.isWin = null)
        }, i.prototype.showCampMenbers = function (e) {
            this.openView(t.MembersView, e)
        }, i.prototype.setScrollerToTottom = function (t) {
            var e = t.viewport.contentHeight - t.viewport.height;
            e > 0 ? t.viewport.scrollV = e : t.viewport.scrollV = 0
        }, i.prototype.getAboutData = function () {
            this.proxy.getCampScore(), this.proxy.getSelfInfo(), this.proxy.getWarReport(this.filterType), this.proxy.getWinList()
        }, i.prototype.checkMatching = function () {
            this.warBtn.label = this.model.isMatching ? "取消匹配" : "开始匹配", this.matchingEff.visible = this.model.isMatching, (this.model.isFirstMatching || this.model.battleResult.isWin) && this.proxy.startMatching()
        }, i.prototype.addMatchingEff = function () {
            this.matchingEff || (this.matchingEff = EffectMgr.addEff("uieff/matchingEff", this.effGroup, 0, 0, 1e3, -1, !0), this.matchingEff.visible = !1)
        }, i.prototype.removeMatchingEff = function () {
            this.matchingEff && (EffectMgr.getIns().removeEff(this.matchingEff), this.matchingEff = null)
        }, i
    }(BaseEUIView);
    t.LobbyView = e, __reflect(e.prototype, "CampWar.LobbyView")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "ViewMPBatEndSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.proxy = this.getProxy(t.Proxy), this.model = this.getModel(t.Model), this.btnHand.label = "确定", this.btnHand.setNoticeVis(!1), this.awardExplain.text = "（结算奖励以及个人排名奖励通过邮件发放）", this.awardExplain.size = 20, this.txtPersonPM.visible = !1, this.txt1.visible = !0
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t), this.addEvent(), this.iconSuc.source = t.isWin ? "MPBatAtlas_json.shengLiWord" : "MPBatAtlas_json.shiBaiWord", this.iconDescription.source = t.isWin ? "campWar_json.win_tips" : "campWar_json.fail_tips", console.log("阵营积分" + t.campScore), console.log("BattleResultView_getCampScore" + t.isWin), this.txt1.textFlow = [{
                text: "阵营积分: ",
                style: {
                    textColor: 6835267,
                    size: 24
                }
            }, {
                text: t.campScore,
                style: {
                    textColor: 1090084,
                    size: 24
                }
            }], this.txtMenPaiJiFen.textFlow = [{
                text: "个人威望: ",
                style: {
                    textColor: 6835267,
                    size: 24
                }
            }, {
                text: t.prestige,
                style: {
                    textColor: 1090084,
                    size: 24
                }
            }], this.txtPersonJiFen.textFlow = [{
                text: "个人排名: ",
                style: {
                    textColor: 6835267,
                    size: 24
                }
            }, {
                text: t.rankingNum,
                style: {
                    textColor: 1090084,
                    size: 24
                }
            }]
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeEvent()
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i.prototype.addEvent = function () {
            EventCenter.addMsg(t.Event.ON_CAMP_SCORE, this.onCampScore, this), this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
        }, i.prototype.removeEvent = function () {
            EventCenter.removeMsg(t.Event.ON_CAMP_SCORE, this.onCampScore, this), this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.btnHand.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
        }, i.prototype.onTouch = function (t) {
            switch (t.currentTarget) {
                case this.btnClose:
                case this.btnHand:
                    this.closeView(i)
            }
        }, i.prototype.onCampScore = function () {}, i
    }(BaseEUIView);
    t.MatchResultView = e, __reflect(e.prototype, "CampWar.MatchResultView")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.skinName = "ItemMPMembersSkin", e
        }
        return __extends(e, t), e.prototype.dataChanged = function () {
            this.iconDefeat.visible = !1;
            var t = this.data;
            this.iconHead.source = t.sex == Sex.MAN ? "head_1_1_png" : "head_2_2_png", this.txtName.text = t.nickName + t.zoneName, this.txtZhanli.text = "战力: " + t.fightingCapacity, this.txtDefence.text = "威望: " + t.prestige
        }, e
    }(eui.ItemRenderer);
    t.MembersItem = e, __reflect(e.prototype, "CampWar.MembersItem")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.listData = new eui.ArrayCollection, t.skinName = "CampWarMemberSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.proxy = this.getProxy(t.Proxy), this.model = this.getModel(t.Model), this.list.itemRenderer = t.MembersItem, this.list.dataProvider = this.listData
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this), this.addEvent(), this.campID = t, this.proxy.getCampInfo(t), this.basePanel.title = "阵营战"
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeEvent()
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i.prototype.addEvent = function () {
            this.addCloseListen(this.basePanel.btnClose), this.addCloseListen(this.basePanel.btnReturn), EventCenter.addMsg(t.Event.ON_CAMP_INFO, this.onCampInfo, this)
        }, i.prototype.removeEvent = function () {
            EventCenter.removeMsg(t.Event.ON_CAMP_INFO, this.onCampInfo, this)
        }, i.prototype.onCampInfo = function () {
            var t = this.model.getCampData(this.campID),
                e = t.membersList.values.concat();
            e.sort(function (t, e) {
                return e.prestige - t.prestige
            }), this.listData.source = e
        }, i
    }(BaseEUIView);
    t.MembersView = e, __reflect(e.prototype, "CampWar.MembersView")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "CampWarPlayerInfoSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.proxy = this.getProxy(t.Proxy), this.model = this.getModel(t.Model), this.role = UIRole.create(), this.showGroup.addChild(this.role)
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t);
            var i = t.uid,
                o = i + "",
                n = o.slice(1, 5);
            this.nickName.text = t.name + ".S" + parseInt(n), this.level.text = "等级:" + t.level, this.combatEffectiveness.text = "战力:" + t.combatEffectiveness;
            var a = t.showData;
            this.role.setData(a), this.role.setWay(), this.role.validParts(), this.role.play(), this.addEvent()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.role.stopAndClear(), this.removeEvent()
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i.prototype.addEvent = function () {
            this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
        }, i.prototype.removeEvent = function () {
            this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
        }, i.prototype.onTouch = function (t) {
            switch (t.currentTarget) {
                case this.closeBtn:
                    this.closeView(i)
            }
        }, i
    }(BaseEUIView);
    t.PlayerInfoView = e, __reflect(e.prototype, "CampWar.PlayerInfoView")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.skinName = "CampWarRankingItemSkin", e
        }
        return __extends(e, t), e.prototype.dataChanged = function () {
            var t = this.data;
            this.head.source = t.sex == Sex.MAN ? "head_1_1_png" : "head_2_2_png", this.num.source = "num2_json.wd" + t.winRankingNum, this.nickName.text = t.nickName, this.winCount.text = t.curContinueWin + "连胜"
        }, e
    }(eui.ItemRenderer);
    t.RankingItemView = e, __reflect(e.prototype, "CampWar.RankingItemView")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "CampWarReportItemSkin", t
        }
        return __extends(i, e), i.prototype.dataChanged = function () {
            var t = this.data,
                e = this.getReportContent(t.reportType, t.winnerName + t.winnerZoneName, t.loserName + t.loserZoneName, t.curContinueWin, t.finalCount, t.prestige, t.content);
            this.text.textFlow = HtmlUtil.parse(e)
        }, i.prototype.getReportContent = function (e, i, o, n, a, s, r) {
            var l;
            switch (e) {
                case t.ReportType.CONTINUE_WIN:
                    l = r.replace("{0}", i).replace("{1}", o).replace("{2}", n + "").replace("{3}", s + "");
                    break;
                case t.ReportType.FINAL_CONTINUE_WIN:
                    l = r.replace("{0}", i).replace("{1}", o).replace("{2}", a + "")
            }
            return l
        }, i
    }(eui.ItemRenderer);
    t.ReportItemView = e, __reflect(e.prototype, "CampWar.ReportItemView")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function () {
        function t() {
            this.isWin = null
        }
        return t.prototype.reset = function () {
            this.isWin = null, this.finalityCount = 0, this.continueWinCount = 0
        }, t
    }();
    t.BattleResultData = e, __reflect(e.prototype, "CampWar.BattleResultData")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function () {
        function t() {
            this.init()
        }
        return t.prototype.init = function () {
            this.description = "", this.icon = "", this.itemList = ""
        }, t
    }();
    t.AwardData = e, __reflect(e.prototype, "CampWar.AwardData")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function () {
        function e() {
            this.membersList = new Dictionary
        }
        return e.prototype.getMembersData = function (e) {
            var i = this.membersList.get(e);
            return i || (i = new t.PlayerData, i.uid = e, this.membersList.set(e, i)), i
        }, e
    }();
    t.CampData = e, __reflect(e.prototype, "CampWar.CampData")
}(CampWar || (CampWar = {}));
var IconItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "IconItemSkin", e
    }
    return __extends(e, t), e.prototype.dataChanged = function () {
        var t = this.data;
        this.iconBg.source = "CM1_json.bm_gridbg" + t.quality, this.iconHB.source = IconUtil.getIconUrl(t.iconId), this.txtName.textFlow = HtmlUtil.parse(HtmlUtil.color(t.name, t.qualityColor)), this.txtLv.textFlow = HtmlUtil.parse(HtmlUtil.color("Lv." + t.level, t.qualityColor));
        for (var e = this.starGroup.numChildren, i = 0; e > i; i++) this.starGroup.getChildAt(i).visible = i < t.starLevel;
        switch (this.imgup.visible = !1, this.iconNotice.visible = t.isShowRed, t.state) {
            case BattleState.INACTIVATED:
                this.iconMsk.visible = !0, this.iconChuZhan.visible = !1, this.txtJiHuo.visible = t.isCanActive;
                break;
            case BattleState.ON_BATTLE:
                this.iconMsk.visible = !1, this.iconChuZhan.visible = !0, this.txtJiHuo.visible = !1, this.imgup.visible = t.isShowUp;
                break;
            case BattleState.REST:
                this.iconMsk.visible = !1, this.iconChuZhan.visible = !1, this.txtJiHuo.visible = !1
        }
    }, e
}(eui.ItemRenderer);
__reflect(IconItem.prototype, "IconItem");
var CampWar;
! function (t) {
    var e = function (t) {
        function e() {
            return null !== t && t.apply(this, arguments) || this
        }
        return __extends(e, t), Object.defineProperty(e.prototype, "winnerZoneName", {
            get: function () {
                return this._winnerZoneName || "" == this._winnerZoneName || (this._winnerZoneName = this.getZoneNameByUID(this.winnerUID)), this._winnerZoneName
            },
            set: function (t) {
                this._winnerZoneName = t
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e.prototype, "loserZoneName", {
            get: function () {
                return this._loserZoneName || "" == this._loserZoneName || (this._loserZoneName = this.getZoneNameByUID(this.loserUID)), this._loserZoneName
            },
            set: function (t) {
                this._loserZoneName = t
            },
            enumerable: !0,
            configurable: !0
        }), e
    }(t.PlayerData);
    t.ReportData = e, __reflect(e.prototype, "CampWar.ReportData")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (t) {
        function e() {
            return null !== t && t.apply(this, arguments) || this
        }
        return __extends(e, t), e
    }(t.PlayerData);
    t.WinPlayerData = e, __reflect(e.prototype, "CampWar.WinPlayerData")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e;
    ! function (t) {
        t[t.GET_INFO = 4551] = "GET_INFO", t[t.ON_INFO = 4552] = "ON_INFO", t[t.GET_SELF_INFO = 4553] = "GET_SELF_INFO", t[t.ON_SELF_INFO = 4554] = "ON_SELF_INFO", t[t.GET_WAR_REPORT = 4555] = "GET_WAR_REPORT", t[t.ON_WAR_REPORT = 4556] = "ON_WAR_REPORT", t[t.ENROLL = 4557] = "ENROLL", t[t.ON_STATUS_CHANGE = 4558] = "ON_STATUS_CHANGE", t[t.START_MATHING = 4559] = "START_MATHING", t[t.ON_CODE = 4560] = "ON_CODE", t[t.CANCEL_MATHING = 4561] = "CANCEL_MATHING", t[t.GET_CURE = 4563] = "GET_CURE", t[t.GET_CAMP_WIN_RANK = 4567] = "GET_CAMP_WIN_RANK", t[t.ON_CAMP_WIN_RANK = 4568] = "ON_CAMP_WIN_RANK", t[t.GET_CAMP_INFO = 4569] = "GET_CAMP_INFO", t[t.ON_CAMP_INFO = 4570] = "ON_CAMP_INFO", t[t.GET_WIN_LIST = 4571] = "GET_WIN_LIST", t[t.ON_WIN_LIST = 4572] = "ON_WIN_LIST", t[t.GET_CAMP_SCORE = 4573] = "GET_CAMP_SCORE", t[t.ON_CAMP_SCORE = 4574] = "ON_CAMP_SCORE", t[t.ON_MATCH_RESULE = 4576] = "ON_MATCH_RESULE", t[t.SEND_BATTLE_END = 4577] = "SEND_BATTLE_END", t[t.ON_BATTLE_RESULT = 4580] = "ON_BATTLE_RESULT", t[t.GET_PLAYER_INFO = 4581] = "GET_PLAYER_INFO", t[t.ON_PLAYER_INFO = 4582] = "ON_PLAYER_INFO"
    }(e = t.Protocol || (t.Protocol = {}));
    var i;
    ! function (t) {
        t[t.CONTINUE_WIN = 1] = "CONTINUE_WIN", t[t.FINAL_CONTINUE_WIN = 2] = "FINAL_CONTINUE_WIN"
    }(i = t.ReportType || (t.ReportType = {}));
    var o;
    ! function (t) {
        t[t.ALL = 0] = "ALL", t[t.SELF = 1] = "SELF"
    }(o = t.FilterType || (t.FilterType = {}));
    var n;
    ! function (t) {
        t[t.OVER = 0] = "OVER", t[t.START = 1] = "START"
    }(n = t.ActivityStatus || (t.ActivityStatus = {}));
    var a;
    ! function (t) {
        t[t.SUCCESS = 0] = "SUCCESS", t[t.ERROR = 1] = "ERROR", t[t.ENROLLED_OUT_TIME = 2] = "ENROLLED_OUT_TIME", t[t.ENROLLED = 3] = "ENROLLED", t[t.NOT_ENROLL = 4] = "NOT_ENROLL", t[t.NOT_WAR = 5] = "NOT_WAR", t[t.FULL_HP = 6] = "FULL_HP", t[t.NOT_ENOUGH_CURREMCY = 7] = "NOT_ENOUGH_CURREMCY", t[t.NOT_STARTED = 8] = "NOT_STARTED", t[t.SEASON_ERROR = 9] = "SEASON_ERROR", t[t.NOT_MATCH_DATA = 10] = "NOT_MATCH_DATA"
    }(a = t.Code || (t.Code = {}));
    var s;
    ! function (t) {
        t[t.SHU_SAN = 1] = "SHU_SAN", t[t.KUN_LUN = 2] = "KUN_LUN"
    }(s = t.CampID || (t.CampID = {}))
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function () {
        function t() {}
        return t.STR = "CAMP_WAR_", t.OPEN = t.STR + "OPEN", t.ON_INFO = t.STR + "ON_INFO", t.ON_ENROLL_SUCCESS = t.STR + "ON_ENROLL_SUCCESS", t.ON_SELF_INFO = t.STR + "ON_SELF_INFO", t.ON_WAR_REPORT = t.STR + "ON_WAR_REPORT", t.ON_WIN_LIST = t.STR + "ON_WIN_LIST", t.ON_CAMP_SCORE = t.STR + "ON_CAMP_SCORE", t.ON_MATCHING_CHANGE = t.STR + "ON_MATCHING_CHANGE", t.ON_CURE = t.STR + "ON_CURE", t.ON_STATUS_CHANGE = t.STR + "ON_STATUS_CHANGE", t.ON_CAMP_INFO = t.STR + "ON_CAMP_INFO", t.ON_CAMP_WIN_RANK = t.STR + "ON_CAMP_WIN_RANK", t.ON_MATCH_RESULT = t.STR + "ON_MATCH_RESULT", t.ON_PLAYER_INFO = t.STR + "ON_PLAYER_INFO", t
    }();
    t.Event = e, __reflect(e.prototype, "CampWar.Event")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (e) {
        function i() {
            var i = e.call(this) || this;
            return i.selfData = new t.PlayerData, i.battleResult = new t.BattleResultData, i.isMatching = !1, i.isFirstMatching = !1, i.campList = {}, i.lastSeasonWinCampList = [], i._AwardArr = [], i
        }
        return __extends(i, e), Object.defineProperty(i.prototype, "reportConfig", {
            get: function () {
                if (!this._reportConfig) {
                    this._reportConfig = {}, this.reportMaxConditionList = {};
                    for (var t = Config.getConfig(zyzgbb_714).values, e = 0, i = t.length; i > e; e++) {
                        var o = t[e],
                            n = o.type + "_" + o.count;
                        this._reportConfig[n] = o;
                        var a = this.reportMaxConditionList[o.type];
                        void 0 == a ? this.reportMaxConditionList[o.type] = o.count : o.count > a && (this.reportMaxConditionList[o.type] = o.count)
                    }
                }
                return this._reportConfig
            },
            enumerable: !0,
            configurable: !0
        }), i.prototype.getReportConfigData = function (e, i) {
            var o = this.reportConfig,
                n = this.reportMaxConditionList[e];
            switch (e) {
                case t.ReportType.FINAL_CONTINUE_WIN:
                case t.ReportType.CONTINUE_WIN:
                    i = Math.min(i, n)
            }
            var a = e + "_" + i;
            return o[a]
        }, i.prototype.getCampData = function (e) {
            var i = this.campList[e];
            return i || (i = new t.CampData, i.campID = e, this.campList[e] = i), i
        }, i.prototype.reset = function () {
            this.selfData = new t.PlayerData, this.battleResult.reset(), this.isMatching = !1, this.isAutoMatching = !1, this.isFirstMatching = !1, this.campList = {}, this.lastSeasonWinCampList = []
        }, i.prototype.setLastSeasonWinCamp = function (e, i, o, n, a, s) {
            var r = new t.WinPlayerData;
            r.uid = i, r.campName = o, r.nickName = n, r.prestige = a, r.winCount = s, this.lastSeasonWinCampList[e] = r
        }, Object.defineProperty(i.prototype, "awardArr", {
            get: function () {
                if (!this._AwardArr.length) {
                    var e = Config.getConfig(zyzjcpz_720).get(1),
                        i = Config.getConfig(pmjl_808).values,
                        o = [];
                    o = [e.enrollReward + "/报名奖励/campWar_json.sign_up", e.campWinReward + "/阵营获胜奖励/campWar_json.win", e.campLoseReward + "/阵营失败奖励/campWar_json.fail", e.campDrawReward + "/阵营平局奖励/campWar_json.draw"];
                    for (var n = 0; n < o.length; n++) {
                        var a = new t.AwardData,
                            s = o[n].split("/");
                        a.itemList = s[0], a.description = s[1], a.icon = s[2], this._AwardArr.push(a)
                    }
                    for (var n = 0; n < i.length; n++) {
                        var r = i[n],
                            a = new t.AwardData;
                        a.description = r.description, 1 == r.highestRank ? a.icon = "campWar_json.first" : 2 == r.highestRank ? a.icon = "campWar_json.second" : 3 == r.highestRank ? a.icon = "campWar_json.third" : a.icon = "0", a.itemList = r.reward, this._AwardArr.push(a)
                    }
                }
                return this._AwardArr
            },
            enumerable: !0,
            configurable: !0
        }), i
    }(GameCtrlBase);
    t.Model = e, __reflect(e.prototype, "CampWar.Model")
}(CampWar || (CampWar = {}));
var CampWar;
! function (t) {
    var e = function (e) {
        function i() {
            var i = e.call(this) || this;
            return i.model = i.getModel(t.Model), i
        }
        return __extends(i, e), i.prototype.listenServ = function (i) {
            e.prototype.listenServ.call(this, i), i.regHand(t.Protocol.ON_INFO, this.onInfo, this), i.regHand(t.Protocol.ON_STATUS_CHANGE, this.onStatusChange, this), i.regHand(t.Protocol.ON_CODE, this.onCode, this), i.regHand(t.Protocol.ON_CAMP_INFO, this.onCampInfo, this), i.regHand(t.Protocol.ON_SELF_INFO, this.onSelfInfo, this), i.regHand(t.Protocol.ON_WAR_REPORT, this.onWarReport, this), i.regHand(t.Protocol.ON_WIN_LIST, this.onWinList, this), i.regHand(t.Protocol.ON_CAMP_SCORE, this.onCampScore, this), i.regHand(t.Protocol.ON_CAMP_WIN_RANK, this.onWinRank, this), i.regHand(t.Protocol.ON_MATCH_RESULE, this.onMatchResult, this), i.regHand(t.Protocol.ON_BATTLE_RESULT, this.onBattleResult, this), i.regHand(t.Protocol.ON_PLAYER_INFO, this.onPlayerInfo, this)
        }, i.prototype.onInfo = function (e, i) {
            var o = e.model;
            o.status = i.readInt(), o.isEnroll = 1 == i.readInt(), o.campID = i.readInt(), EventCenter.sendMsg(t.Event.ON_INFO)
        }, i.prototype.onStatusChange = function (e, i) {
            var o = e.model;
            o.status = i.readInt(), EventCenter.sendMsg(t.Event.ON_STATUS_CHANGE, o.status)
        }, i.prototype.onCampInfo = function (e, i) {
            var o = i.readInt(),
                n = e.model.getCampData(o);
            n.score = i.readInt();
            for (var a = i.readShort(), s = 0; a > s; s++) {
                var r = i.readLong(),
                    l = n.getMembersData(r);
                l.nickName = i.readUTF(), l.fightingCapacity = i.readLong(), l.prestige = i.readInt(), l.campRankingNum = i.readInt(), l.sex = i.readShort()
            }
            EventCenter.sendMsg(t.Event.ON_CAMP_INFO)
        }, i.prototype.onSelfInfo = function (e, i) {
            var o = e.model.selfData;
            o.uid = GameGlobal.modelRole.voMine.id, o.campID = i.readInt(), o.isMatching = 1 == i.readByte(), o.winCount = i.readInt(), o.failCount = i.readInt(), o.curContinueWin = i.readInt(), o.topContinueWin = i.readInt(), o.prestige = i.readInt(), o.hp = i.readInt(), o.campRankingNum = i.readInt(), EventCenter.sendMsg(t.Event.ON_SELF_INFO)
        }, i.prototype.onWarReport = function (e, i) {
            for (var o = [], n = i.readInt(), a = i.readShort(), s = 0; a > s; s++)
                for (var r = (i.readLong(), i.readLong()), l = i.readUTF(), h = i.readLong(), c = i.readUTF(), p = i.readInt(), u = i.readInt(), d = i.readInt(), f = 0; 2 > f; f++) {
                    var g = f + 1,
                        m = 0;
                    g == t.ReportType.CONTINUE_WIN ? m = p : g == t.ReportType.FINAL_CONTINUE_WIN && (m = u);
                    var y = e.model.getReportConfigData(g, m);
                    if (y) {
                        var v = new t.ReportData;
                        v.filterTtype = n, v.winnerUID = r, v.winnerName = l, v.loserUID = h, v.loserName = c, v.curContinueWin = p, v.finalCount = u, v.prestige = d, v.reportType = g, v.content = y.content, o.push(v)
                    }
                }
            EventCenter.sendMsg(t.Event.ON_WAR_REPORT, o)
        }, i.prototype.onWinList = function (e, i) {
            for (var o = i.readShort(), n = [], a = 0; o > a; a++) {
                var s = new t.PlayerData;
                s.winRankingNum = a + 1, s.uid = i.readLong(), s.sex = i.readShort(), s.nickName = i.readUTF(), s.curContinueWin = i.readShort(), n.push(s)
            }
            n.sort(function (t, e) {
                return e.curContinueWin - t.curContinueWin
            }), EventCenter.sendMsg(t.Event.ON_WIN_LIST, n)
        }, i.prototype.onCampScore = function (e, i) {
            for (var o = i.readShort(), n = 0; o > n; n++) {
                var a = i.readShort(),
                    s = e.model.getCampData(a);
                s.score = i.readInt(), console.log(a + "阵营积分" + s.score)
            }
            EventCenter.sendMsg(t.Event.ON_CAMP_SCORE)
        }, i.prototype.onWinRank = function (e, i) {
            for (var o = (i.readInt(), i.readLong(), i.readShort()), n = 0; o > n; n++) {
                var a = i.readLong(),
                    s = i.readUTF();
                console.log("玩家名:" + s);
                var r = i.readInt(),
                    l = "";
                r == t.CampID.KUN_LUN ? l = "昆仑" : r == t.CampID.SHU_SAN && (l = "蜀山");
                var h = (i.readLong(), i.readInt()),
                    c = (i.readInt(), i.readInt());
                e.model.setLastSeasonWinCamp(n, a, l, s, c, h)
            }
            EventCenter.sendMsg(t.Event.ON_CAMP_WIN_RANK)
        }, i.prototype.onMatchResult = function (e, i) {
            var o = 1 == i.readShort(),
                n = i.readInt(),
                a = i.readInt(),
                s = i.readInt(),
                r = {
                    isWin: o,
                    campScore: n,
                    prestige: a,
                    rankingNum: s
                };
            EventCenter.sendMsg(t.Event.ON_MATCH_RESULT, r)
        }, i.prototype.onBattleResult = function (t, e) {
            var i = t.model.battleResult;
            i.isWin = 1 == e.readByte(), i.finalityCount = e.readInt(), i.continueWinCount = e.readInt()
        }, i.prototype.onPlayerInfo = function (e, i) {
            var o = i.readLong(),
                n = i.readUTF(),
                a = i.readInt(),
                s = i.readLong(),
                r = i.readUTF(),
                l = new RoleShowData(r);
            EventCenter.sendMsg(t.Event.ON_PLAYER_INFO, {
                uid: o,
                name: n,
                level: a,
                combatEffectiveness: s,
                showData: l
            })
        }, i.prototype.onCode = function (e, i) {
            var o = i.readInt(),
                n = i.readInt();
            switch (n) {
                case t.Code.SUCCESS:
                    e.handleSuccessCode(o);
                    break;
                case t.Code.ENROLLED_OUT_TIME:
                    ViewText.text("非报名时间！！！");
                    break;
                case t.Code.ENROLLED:
                    ViewText.text("已报名！！！");
                    break;
                case t.Code.NOT_ENROLL:
                    ViewText.text("未报名！！！");
                    break;
                case t.Code.NOT_WAR:
                    ViewText.text("未参战！！！");
                    break;
                case t.Code.FULL_HP:
                    ViewText.text("已满血！！！");
                    break;
                case t.Code.NOT_ENOUGH_CURREMCY:
                    ViewText.text("货币不足！！！");
                    break;
                case t.Code.NOT_STARTED:
                    ViewText.text("活动尚未开启，请准时参加！");
                    break;
                case t.Code.SEASON_ERROR:
                    ViewText.text("比赛错误！！！");
                    break;
                case t.Code.NOT_MATCH_DATA:
                    ViewText.text("无比赛数据！！！");
                    break;
                default:
                    egret.warn("!!!!!!阵营战活动异常：" + n)
            }
        }, i.prototype.handleSuccessCode = function (e) {
            switch (e) {
                case t.Protocol.ENROLL:
                    EventCenter.sendMsg(t.Event.ON_ENROLL_SUCCESS);
                    break;
                case t.Protocol.START_MATHING:
                    this.model.isMatching = !0, this.model.isAutoMatching = !0, EventCenter.sendMsg(t.Event.ON_MATCHING_CHANGE);
                    break;
                case t.Protocol.CANCEL_MATHING:
                    this.model.isMatching = !1, this.model.isAutoMatching = !1, EventCenter.sendMsg(t.Event.ON_MATCHING_CHANGE);
                    break;
                case t.Protocol.GET_CURE:
                    EventCenter.sendMsg(t.Event.ON_CURE)
            }
        }, i.prototype.getInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_INFO, e)
        }, i.prototype.enroll = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.ENROLL, e)
        }, i.prototype.getCampInfo = function (e) {
            var i = this.getBytes();
            i.writeInt(e), this.sendSocket(t.Protocol.GET_CAMP_INFO, i)
        }, i.prototype.getSelfInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_SELF_INFO, e)
        }, i.prototype.getWarReport = function (e) {
            var i = this.getBytes();
            i.writeInt(e), this.sendSocket(t.Protocol.GET_WAR_REPORT, i)
        }, i.prototype.getWinList = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_WIN_LIST, e)
        }, i.prototype.getCampScore = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_CAMP_SCORE, e)
        }, i.prototype.startMatching = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.START_MATHING, e)
        }, i.prototype.cancelMatching = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.CANCEL_MATHING, e)
        }, i.prototype.getCure = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_CURE, e)
        }, i.prototype.getLastSeasonWinCamp = function (e) {
            void 0 === e && (e = 0);
            var i = this.getBytes();
            i.writeInt(e), this.sendSocket(t.Protocol.GET_CAMP_WIN_RANK, i)
        }, i.prototype.sendBattleEnd = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.SEND_BATTLE_END, e)
        }, i.prototype.getPlayerInfo = function (e) {
            var i = this.getBytes();
            i.writeLong(e), this.sendSocket(t.Protocol.GET_PLAYER_INFO, i)
        }, i
    }(BaseModel);
    t.Proxy = e, __reflect(e.prototype, "CampWar.Proxy")
}(CampWar || (CampWar = {}));
var ModelCZWAR = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.tzNum = 10, e.awardNum = 0, e.myawardNum = 0, e.awards = [], e.zhiweijl = !1, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(2880, i.GC2880, i), e.regHand(2882, i.GC2882, i), e.regHand(2884, i.GC2884, i), e.regHand(2886, i.GC2886, i), e.regHand(2888, i.GC2888, i), e.regHand(2890, i.GC2890, i), e.regHand(2892, i.GC2892, i), e.regHand(2894, i.GC2894, i), e.regHand(2896, i.GC2896, i), e.regHand(2898, i.GC2898, i), e.regHand(2900, i.GC2900, i)
    }, e.prototype.GC2880 = function (t, i) {
        var o = i.readByte();
        t.czName = i.readUTF(), 1 == o ? t.isOpen = !0 : t.isOpen = !1, t.highestLevel = i.readInt(), Vo_CZWARItem.create(), t.notify(e.MSG_OPENCLOSE)
    }, e.prototype.CG2881 = function () {
        var t = this.getBytes();
        this.sendSocket(2881, t)
    }, e.prototype.GC2882 = function (t, i) {
        t.tzNum = i.readByte(), t.awards = [];
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = {};
            a.id = i.readByte(), a.state = i.readByte(), t.awards.push(a)
        }
        for (o = i.readShort(), o > 0 && Vo_CZWARItem.create(), n = 0; o > n; n++) {
            var s = new Vo_CZWARItem;
            s.id = i.readByte(), s.playerId = i.readLong(), s.Occupyer = i.readUTF(), s.OccupyTime = i.readInt(), s.zhanli = i.readInt(), s.horse = i.readInt(), s.wing = i.readInt(), s.weapon = i.readInt(), s.body = i.readInt(), Vo_CZWARItem.setPlayer(s)
        }
        t.zlTimeUDT = egret.getTimer(), t.notify(e.UPDATE), t.notify(e.MSG_NOTICE)
    }, e.prototype.CG2883 = function (t) {
        e.isONE = 1 == t ? !0 : !1;
        var i = this.getBytes();
        i.writeByte(t), this.sendSocket(2883, i)
    }, e.prototype.GC2884 = function (t, i) {
        var o = i.readShort();
        Vo_CZWARrecordItem.bestRecord = [];
        for (var n = 0; o > n; n++) {
            var a = new Vo_CZWARrecordItem;
            a.name = i.readUTF(), a.type = i.readByte(), a.huihe = i.readByte(), Vo_CZWARrecordItem.bestRecord.push(a)
        }
        t.syTzNum = i.readByte(), t.myawardNum = i.readInt(), t.lzNum = i.readShort(), t.remainTime = i.readInt(), t.remainTimeUDT = egret.getTimer(), t.notify(e.MSG_RECORD)
    }, e.prototype.CG2885 = function () {
        var t = this.getBytes();
        this.sendSocket(2885, t)
    }, e.prototype.GC2886 = function (t, i) {
        Vo_CZWARrecordItem.myRecord = [];
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = new Vo_CZWARrecordItem;
            a.result = i.readByte(), a.id = i.readByte(), a.name = i.readUTF(), a.tzORfs = i.readByte(), a.time = i.readInt(), a.index = n, Vo_CZWARrecordItem.myRecord.unshift(a)
        }
        t.notify(e.MSG_MYRECORD)
    }, e.prototype.CG2887 = function (t, e) {
        GameGlobal.layerMgr.close(UIConst.HUOBANPAGE);
        var i = this.getBytes();
        i.writeByte(t), i.writeByte(e), this.sendSocket(2887, i)
    }, e.prototype.GC2888 = function (t, e) {
        var i = e.readByte(),
            o = e.readByte();
        if (3 == o) return void ViewText.text("冷却时间中");
        if (4 == o) return void ViewText.text("次数不足");
        if (5 == o) return void ViewText.text("不能挑战自己");
        if (7 == o) return void ViewText.text("结算期间不可进行此操作");
        if (1 == i) {
            var n = e.readInt(),
                a = e.readInt(),
                s = [];
            s.push(o), s.push(n), s.push(a), 1 == o ? GameGlobal.layerMgr.open(UIConst.CZWARZLTIP, s) : 2 == o ? (GameGlobal.layerMgr.open(UIConst.CZWARZLTIP, s), GameGlobal.modelCZWAR.CG2881()) : 6 == o && (GameGlobal.layerMgr.open(UIConst.BATTLELOSE), GameGlobal.modelCZWAR.CG2881())
        } else 2 == i && (1 == o ? ViewAlert.show("恭喜您，抢夺成功！", null, ViewAlert.OK) : 2 == o && ViewAlert.show("很遗憾，抢夺失败！", null, ViewAlert.OK), GameGlobal.modelCZWAR.CG2881());
        t.awardNum = 0
    }, e.prototype.CG2889 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(2889, e)
    }, e.prototype.GC2890 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                var n = i.readByte();
                e.upBoxStateById(n), t.notify(e.MSG_BOXAWARD), t.notify(e.MSG_NOTICE);
                break;
            case 2:
                ViewText.text("条件未达");
                break;
            case 3:
                GameGlobal.modelBag.checkRLTips(0)
        }
    }, e.prototype.CG2891 = function () {
        var t = this.getBytes();
        this.sendSocket(2891, t)
    }, e.prototype.GC2892 = function (t, i) {
        var o = i.readByte();
        if (0 != o) {
            var n = i.readByte();
            t.zhiweijl = 1 == n ? !0 : !1, Vo_CZWARJLItem.upZwStateById(o, n)
        }
        t.notify(e.MSG_ZWJL), t.notify(e.MSG_NOTICE)
    }, e.prototype.CG2893 = function () {
        var t = this.getBytes();
        this.sendSocket(2893, t)
    }, e.prototype.GC2894 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                var n = i.readByte();
                Vo_CZWARJLItem.upZwStateById(n, 2), t.zhiweijl = !1, t.notify(e.MSG_ZWJL), t.notify(e.MSG_NOTICE);
                break;
            case 2:
                ViewText.text("条件未达");
                break;
            case 3:
                GameGlobal.modelBag.checkRLTips(0)
        }
    }, e.prototype.CG2895 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(2895, e)
    }, e.prototype.GC2896 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                t.zljlId = i.readByte(), t.awardNum = 0, t.notify(e.MSG_ZLJL), t.notify(e.MSG_NOTICE);
                break;
            case 2:
                ViewText.text("条件未达");
                break;
            case 3:
                GameGlobal.modelBag.checkRLTips(0)
        }
    }, e.prototype.CG2897 = function () {
        var t = this.getBytes();
        this.sendSocket(2897, t)
    }, e.prototype.GC2898 = function (t, i) {
        var o = i.readByte();
        1 == o ? (t.remainTime = 0, t.notify(e.MSG_REMOVETIME)) : 2 == o && setTimeout(function () {
            platform.askOpenRecharge()
        }, 500)
    }, e.prototype.GC2900 = function (t, i) {
        var o = t.zljlId = i.readByte();
        Vo_CZWARItem.setIsZLjlById(o), t.awardNum++, t.notify(e.MSG_ZLJL), t.notify(e.MSG_NOTICE)
    }, e.upBoxStateById = function (t) {
        for (var e = GameGlobal.modelCZWAR.awards, i = 0; i < e.length; i++)
            if (t == e[i].id) {
                e[i].state = 2;
                break
            }
    }, e.Notice = function () {
        for (var t = GameGlobal.modelCZWAR, e = 0; e < t.awards.length; e++)
            if (1 == t.awards[e].state) return !0;
        return 0 == t.tzNum ? !0 : t.zhiweijl ? !0 : t.awardNum > 0 ? !0 : !1
    }, e.isONE = !1, e.UPDATE = "UPDATE", e.MSG_RECORD = "MSG_RECORD", e.MSG_MYRECORD = "MSG_MYRECORD", e.MSG_BOXAWARD = "MSG_BOXAWARD", e.MSG_ZWJL = "MSG_ZWJL", e.MSG_ZLJL = "MSG_ZLJL", e.MSG_REMOVETIME = "MSG_REMOVETIME", e.MSG_SHOP = "MSG_SHOP", e.MSG_NOTICE = "MSG_NOTICE", e.MSG_OPENCLOSE = "MSG_OPENCLOSE", e
}(BaseModel);
__reflect(ModelCZWAR.prototype, "ModelCZWAR");
var VChengZhuWarPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._oldSysID = -1, e.skinName = "ChengZhuWarPnlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.createPageGrp().createTabGroup(), this.base.createQuestBtn(), this.base.btnQuest.visible = !0, this.base.btnQuest.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onQuestT, this), this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.base.listenTabClick(this.onSel, this);
        var e = GameGlobal.layerMgr;
        e.reg(UIConst.CHENGZHUWAR, VCZWAR, this.base.pageGrp), e.reg(UIConst.CZWARZWJL, VCZWARZWJL, this.base.pageGrp), e.reg(UIConst.CZWARJSJL, VCZWARJSJL, this.base.pageGrp), e.reg(UIConst.CZWARSHOP, VCZWARShop, this.base.pageGrp), e.reg(UIConst.CZWARZLTIP, VCZWARZLTip, e.UI_Message), e.reg(UIConst.CZWARBXTIP, VCZWARBXTip, e.UI_Message), e.reg(UIConst.CZWARDIAN, VCZWARDian, e.UI_MainMiddle, 1), e.reg(UIConst.CZWARPKRECORD, VCZWARPkRecord, e.UI_Message), e.reg(UIConst.CZWARJL, VCZWARJL, e.UI_Message)
    }, e.prototype.onSel = function (t) {
        this.setSelSysID(t.bindSysID)
    }, e.prototype.setSelSysID = function (t) {
        switch (this._oldSysID) {
            case UIConst.CHENGZHUWAR:
                GameGlobal.layerMgr.close(UIConst.CHENGZHUWAR);
                break;
            case UIConst.CZWARZWJL:
                GameGlobal.layerMgr.close(UIConst.CZWARZWJL);
                break;
            case UIConst.CZWARJSJL:
                GameGlobal.layerMgr.close(UIConst.CZWARJSJL);
                break;
            case UIConst.CZWARSHOP:
                GameGlobal.layerMgr.close(UIConst.CZWARSHOP)
        }
        switch (t) {
            case UIConst.CHENGZHUWAR:
                this.base.title = "城主争夺", GameGlobal.layerMgr.open(UIConst.CHENGZHUWAR);
                break;
            case UIConst.CZWARZWJL:
                this.base.title = "职位奖励", GameGlobal.layerMgr.open(UIConst.CZWARZWJL);
                break;
            case UIConst.CZWARJSJL:
                this.base.title = "结算奖励", GameGlobal.layerMgr.open(UIConst.CZWARJSJL);
                break;
            case UIConst.CZWARSHOP:
                this.base.title = "勋章商店", GameGlobal.layerMgr.open(UIConst.CZWARSHOP)
        }
        this._oldSysID = t, this.base.setTabSelSys(t)
    }, e.prototype.updateTabs = function () {
        this.base.addTab("城主争夺", 1, UIConst.CHENGZHUWAR), this.base.addTab("职位奖励", 2, UIConst.CZWARZWJL), this.base.addTab("结算奖励", 3, UIConst.CZWARJSJL), this.base.addTab("勋章商店", 4, UIConst.CZWARSHOP)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.updateTabs(), e ? this.base.getTabBySysID(e) && this.base.setTabSelSys(e, !0) : this.base.setTabSelIdx(0, !0), this.upNotice(), GameGlobal.modelCZWAR.on(ModelCZWAR.UPDATE, this.upPage1, this), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_ZLJL, this.upPage1, this), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_ZWJL, this.upPage2, this)
    }, e.prototype.onClose = function () {
        this.setSelSysID(-1), GameGlobal.modelCZWAR.off(ModelCZWAR.UPDATE, this.upPage1, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_ZLJL, this.upPage1, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_ZWJL, this.upPage2, this)
    }, e.prototype.upNotice = function () {
        this.upPage1(), this.upPage2()
    }, e.prototype.upPage1 = function () {
        var t = GameGlobal.modelCZWAR;
        0 == t.tzNum || t.awardNum > 0 ? this.base.getTabByIdx(0).setNoticVis(!0) : this.base.getTabByIdx(0).setNoticVis(!1)
    }, e.prototype.upPage2 = function () {
        var t = GameGlobal.modelCZWAR;
        t.zhiweijl ? this.base.getTabByIdx(1).setNoticVis(!0) : this.base.getTabByIdx(1).setNoticVis(!1)
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.prototype.onQuestT = function () {
        ViewWenHao.show(CFG_COMMOND.LIBWFSM[1074].detail, 24)
    }, e
}(BaseEUIView);
__reflect(VChengZhuWarPnl.prototype, "VChengZhuWarPnl");
var VCZWAR = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ChengZhuWarSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = GameGlobal.layerMgr;
        t.reg(UIConst.CZWARPAGE1, VCZWARPage1, this.GroupPage), t.reg(UIConst.CZWARPAGE2, VCZWARPage2, this.GroupPage), t.reg(UIConst.CZWARPAGE3, VCZWARPage3, this.GroupPage), this.btnYin.setType(2), this.btnGold.setType(3);
        var e = 5;
        this.btnTong.setTextBottom(e), this.btnYin.setTextBottom(e), this.btnGold.setTextBottom(e), this.btnTong.setText("2次"), this.btnYin.setText("5次"), this.btnGold.setText("10次"), this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnLeftT, this), this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnRightT, this), this.btnTong.addEventListener(egret.TouchEvent.TOUCH_TAP, this.touchT, this), this.btnYin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.touchT, this), this.btnGold.addEventListener(egret.TouchEvent.TOUCH_TAP, this.touchT, this), this.rightRed.visible = !1, this.leftRed.visible = !1, DisplayUtil.popBtnStyle(this.btnLeft), DisplayUtil.popBtnStyle(this.btnRight), this.setPositionX()
    }, e.prototype.setPositionX = function () {
        var t = this.g_progress;
        this.btnTong.x = t.x + .2 * t.width - .1 * t.width / 2, this.btnYin.x = t.x + .5 * t.width - .1 * t.width / 2, this.btnGold.x = t.x + t.width - .1 * t.width / 2
    }, e.prototype.touchT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnTong:
                var i = 1;
                break;
            case this.btnYin:
                i = 2;
                break;
            case this.btnGold:
                i = 3
        }
        GameGlobal.layerMgr.open(UIConst.CZWARBXTIP, GameGlobal.modelCZWAR.awards[i - 1])
    }, e.prototype.btnLeftT = function () {
        1 != this._nowsel && (this._nowsel--, this.setSel(this._nowsel), GameGlobal.modelCZWAR.CG2881())
    }, e.prototype.btnRightT = function () {
        4 != this._nowsel && (this._nowsel++, this.setSel(this._nowsel), GameGlobal.modelCZWAR.CG2881())
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setSel(this._nowsel = 1), GameGlobal.modelCZWAR.on(ModelCZWAR.UPDATE, this.getProgress, this), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_BOXAWARD, this.getProgress, this), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_RECORD, this.getProgress, this), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_ZLJL, this.upNotice, this), GameGlobal.modelCZWAR.CG2881()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelCZWAR.off(ModelCZWAR.UPDATE, this.getProgress, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_BOXAWARD, this.getProgress, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_RECORD, this.getProgress, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_ZLJL, this.upNotice, this)
    }, e.prototype.upNotice = function () {
        var t = GameGlobal.modelCZWAR;
        if (t.awardNum > 0) {
            var e = Vo_CZWARItem.zlIndex;
            switch (this._nowsel) {
                case 1:
                    0 == e ? this.rightRed.visible = !1 : this.rightRed.visible = !0;
                    break;
                case 2:
                    0 == e ? this.leftRed.visible = !0 : e > 0 && 5 > e ? (this.leftRed.visible = !1, this.rightRed.visible = !1) : e > 4 && 9 > e && (this.rightRed.visible = !0);
                    break;
                case 3:
                    5 > e ? this.leftRed.visible = !0 : e > 4 && 9 > e ? (this.leftRed.visible = !1, this.rightRed.visible = !1) : e > 8 && (this.rightRed.visible = !0);
                    break;
                case 4:
                    9 > e ? this.leftRed.visible = !0 : this.leftRed.visible = !1
            }
        } else this.leftRed.visible = this.rightRed.visible = !1
    }, e.prototype.setSel = function (t) {
        1 == t ? (GameGlobal.layerMgr.close(UIConst.CZWARPAGE2), GameGlobal.layerMgr.close(UIConst.CZWARPAGE3), GameGlobal.layerMgr.open(UIConst.CZWARPAGE1), this.btnLeft.visible = !1, this.btnRight.visible = !0) : (GameGlobal.layerMgr.close(UIConst.CZWARPAGE1), GameGlobal.layerMgr.close(UIConst.CZWARPAGE2), GameGlobal.layerMgr.close(UIConst.CZWARPAGE3), this.btnLeft.visible = !0, this.btnRight.visible = !0, 2 == t ? GameGlobal.layerMgr.open(UIConst.CZWARPAGE2, 2) : 3 == t ? GameGlobal.layerMgr.open(UIConst.CZWARPAGE2, 3) : 4 == t && (GameGlobal.layerMgr.open(UIConst.CZWARPAGE3), this.btnRight.visible = !1)), this.upNotice()
    }, e.prototype.getProgress = function () {
        for (var t = GameGlobal.modelCZWAR.tzNum, e = GameGlobal.modelCZWAR.awards, i = 0; i < e.length; i++) {
            var o = e[i].id,
                n = e[i].state;
            this.setState(o, n)
        }
        this.progress.width = t / 10 * this.g_progress.width
    }, e.prototype.setState = function (t, e) {
        switch (t) {
            case 1:
                this.btnTong.setState(e);
                break;
            case 2:
                this.btnYin.setState(e);
                break;
            case 3:
                this.btnGold.setState(e)
        }
    }, e
}(BaseEUIView);
__reflect(VCZWAR.prototype, "VCZWAR");
var VCZWARBXTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.cfg = {}, e.skinName = "VZTFS3StarAwardSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.addCloseListen(this.background), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.txtTitle.text = "挑战奖励", this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        0 != this.btnHand.enabled && GameGlobal.modelCZWAR.CG2889(this.cfg.id)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_BOXAWARD, this.onUpdate, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_BOXAWARD, this.onUpdate, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.getDataById(e), this.cfg = this.getDataById(e.id), this.txtInfos.textFlow = HtmlUtil.parse("挑战次数达到" + HtmlUtil.color(this.cfg.cs + "次", "#10a244") + "可领取"), this.upState(e.state), ConfigHelp.makeStrGrids(this.cfg.zhjl, this.gridArr, 0, 0, this.gridAwards, !0), this.addMsg()
    }, e.prototype.onUpdate = function () {
        this.btnHand.enabled = !1, this.closeHandler()
    }, e.prototype.upState = function (t) {
        switch (this.btnHand.enabled = !1, t) {
            case 0:
                this.btnHand.label = "不可领取";
                break;
            case 1:
                this.btnHand.label = "领取奖励", this.btnHand.enabled = !0;
                break;
            case 2:
                this.btnHand.label = "已领取"
        }
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.getDataById = function (t) {
        var e = CFG_CZWAR.LIB2[t];
        return e ? e : null
    }, e
}(PopUpUI);
__reflect(VCZWARBXTip.prototype, "VCZWARBXTip");
var VCZWARDian = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.imglz = [], e.skinName = "ChengZhuDianSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this;
        t.base.title = "城主殿", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), DisplayUtil.popBtnStyle(t.btnPkrecord), DisplayUtil.popBtnStyle(t.btnTitle), DisplayUtil.popBtnStyle(t.btnGetAward), DisplayUtil.popBtnStyle(t.btnRob), DisplayUtil.popBtnStyle(t.btnChallenge), DisplayUtil.popBtnStyle(t.btnLeft), DisplayUtil.popBtnStyle(t.btnRight), t.btnChallenge.label = "挑战", t.btnRob.label = "抢夺", t.btnGetAward.label = "领取", t.btnRemove.label = "消除", t.btnDo.label = "抢占", t.btnAward.textFlow = [{
            text: "占领奖励",
            style: {
                underline: !0
            }
        }], this.imgText = new ImageText, this.imgText.container = this.zhanli, this.imgText.charFunc = ImageText.STRFUNC, t.role = UIRole.create(), t.part.addChild(this.role), t.part.scaleX = t.part.scaleY = 1.2, this.txtOccupyTime.text = "", this.lqTime.visible = this.btnRemove.visible = !1, t.btnPkrecord.addEventListener(egret.TouchEvent.TOUCH_TAP, t.pkrecordT, t), t.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP, t.leftT, t), t.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP, t.rightT, t), t.btnTitle.addEventListener(egret.TouchEvent.TOUCH_TAP, t.titleT, t), t.btnAward.addEventListener(egret.TouchEvent.TOUCH_TAP, t.awardT, t), t.btnGetAward.addEventListener(egret.TouchEvent.TOUCH_TAP, t.getawardT, t), t.btnChallenge.addEventListener(egret.TouchEvent.TOUCH_TAP, t.challengeT, t), t.btnRob.addEventListener(egret.TouchEvent.TOUCH_TAP, t.robT, t), t.btnRemove.addEventListener(egret.TouchEvent.TOUCH_TAP, t.btnRemoveT, t), t.btnDo.addEventListener(egret.TouchEvent.TOUCH_TAP, t.btnDoT, t)
    }, e.prototype.btnDoT = function () {
        var t = this._nowSel;
        if (Vo_CZWARItem.isZL()) {
            var e = "抢占成功会自动退出当前职位<font color='#d83535'>(失败则\n不改变占领状态),是否继续？</font>";
            ViewAlert.show(e, function () {
                GameGlobal.modelCZWAR.CG2887(Vo_CZWARItem.List[t].id, 2)
            })
        } else GameGlobal.modelCZWAR.CG2887(Vo_CZWARItem.List[t].id, 2)
    }, e.prototype.btnRemoveT = function () {
        var t = e.oldMin = e.nowMin,
            i = 2 * t,
            o = "是否使用<font color='#10a244'>" + i.toString() + "元宝</font>消除冷却时间";
        ViewAlert.show(o, function () {
            e.oldMin == e.nowMin ? GameGlobal.modelCZWAR.CG2897() : ViewText.text("需消耗的元宝已重新计算，请重新操作")
        })
    }, e.prototype.pkrecordT = function () {
        GameGlobal.layerMgr.open(UIConst.CZWARPKRECORD)
    }, e.prototype.leftT = function () {
        this._nowSel--;
        var t = this._nowSel;
        GameGlobal.modelCZWAR.CG2883(Vo_CZWARItem.List[t].id), this.setSel(Vo_CZWARItem.List[t])
    }, e.prototype.rightT = function () {
        this._nowSel++;
        var t = this._nowSel;
        GameGlobal.modelCZWAR.CG2883(Vo_CZWARItem.List[t].id), this.setSel(Vo_CZWARItem.List[t])
    }, e.prototype.titleT = function () {
        GameGlobal.layerMgr.open(UIConst.TITLEFASH, 0), GameGlobal.layerMgr.open(UIConst.TITLE, Vo_CZWARItem.List[this._nowSel].titleid)
    }, e.prototype.awardT = function () {
        GameGlobal.layerMgr.open(UIConst.CZWARJL)
    }, e.prototype.getawardT = function () {
        var t = this._nowSel;
        GameGlobal.modelCZWAR.CG2895(Vo_CZWARItem.List[t].id)
    }, e.prototype.challengeT = function () {
        var t = this._nowSel;
        if (Vo_CZWARItem.isZL()) {
            var e = "抢占成功会自动退出当前职位<font color='#d83535'>(失败则\n不改变占领状态),是否继续？</font>";
            ViewAlert.show(e, function () {
                GameGlobal.modelCZWAR.CG2887(Vo_CZWARItem.List[t].id, 1)
            })
        } else GameGlobal.modelCZWAR.CG2887(Vo_CZWARItem.List[t].id, 1)
    }, e.prototype.robT = function () {
        var t = this._nowSel;
        if (-1 != Vo_CZWARItem.List[t].monster) return void ViewText.text("当前职位无占领玩家，无法抢夺！");
        if (Vo_CZWARItem.isZL()) {
            var e = "抢占成功会自动退出当前职位<font color='#d83535'>(失败则\n不改变占领状态),是否继续？</font>";
            ViewAlert.show(e, function () {
                GameGlobal.modelCZWAR.CG2887(Vo_CZWARItem.List[t].id, 2)
            })
        } else GameGlobal.modelCZWAR.CG2887(Vo_CZWARItem.List[t].id, 2)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setSel(e), this.addtime(), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_OPENCLOSE, this.addtime, this), GameGlobal.modelCZWAR.on(ModelCZWAR.UPDATE, this.update, this), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_RECORD, this.upRecord, this), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_REMOVETIME, this.uplqTime, this), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_ZLJL, this.upZljl, this), GameGlobal.modelCZWAR.CG2883(e.id)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.tick.removeInterv(this.getRemainSec, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_OPENCLOSE, this.addtime, this), GameGlobal.modelCZWAR.off(ModelCZWAR.UPDATE, this.update, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_RECORD, this.upRecord, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_REMOVETIME, this.uplqTime, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_ZLJL, this.upZljl, this)
    }, e.prototype.addtime = function () {
        var t = GameGlobal.modelCZWAR.isOpen;
        t ? GameGlobal.tick.addInterv(this.getRemainSec, 1e3, this) : (GameGlobal.tick.removeInterv(this.getRemainSec, this), this.getRemainSec(this))
    }, e.prototype.update = function () {
        this.setSel(Vo_CZWARItem.List[this._nowSel])
    }, e.prototype.setSel = function (t) {
        var e = t.id > 9 ? !0 : !1;
        this.btnDo.visible = e, this.btnChallenge.visible = !e, this.btnRob.visible = !e, this.btnTitle.visible = !e, t.zhanli ? this.imgText.setText("z" + t.zhanli.toString()) : this.imgText.setText(""), e ? this.txtTitle.text = "无" : this.txtTitle.text = t.zhiwei, this.setMc(t), this.setPageVis(t), this.txtOccupyer.text = t.Occupyer
    }, e.prototype.setPageVis = function (t) {
        var e = this._nowSel = t.id - 1;
        0 == e ? (this.btnLeft.visible = !1, this.btnRight.visible = !0) : e == Vo_CZWARItem.List.length - 1 ? (this.btnLeft.visible = !0, this.btnRight.visible = !1) : (this.btnLeft.visible = !0, this.btnRight.visible = !0)
    }, e.prototype.setMc = function (t) {
        var e = this;
        return this.imgWait.visible = !1, e.role && e.role.stopAndClear(), t.id > 9 && -1 == t.playerId ? void(this.imgWait.visible = !0) : (e.role.play(700), -1 != t.monster ? e.role.setMonsterID(t.monster) : (e.role.setWeapon(t.weapon), e.role.setHorse(t.horse), e.role.setWing(t.wing), e.role.setBody(t.body)), e.role.setWay(3), void e.role.validParts())
    }, e.prototype.upLZ = function () {
        var t = GameGlobal.modelCZWAR.lzNum;
        if (0 == t) this.lzGroup.visible = !1;
        else {
            this.lzGroup.visible = !0;
            for (var e = t.toString().split(""), i = 0; i < e.length; i++) {
                var o = this.imglz[i];
                if (!o) {
                    var o = new eui.Image;
                    o.x = 90 + 35 * i, o.verticalCenter = 0, this.lzGroup.addChild(o), this.imglz.push(o)
                }
                o.source = "CZWAR_json.lz" + e[i]
            }
            for (; i < this.imglz.length; i++) {
                var o = this.imglz[i],
                    n = o.$parent.$children.indexOf(o);
                o.parent.$doRemoveChild(n, !1), this.imglz.splice(i, 1), i--
            }
        }
    }, e.prototype.upRecord = function () {
        var t = GameGlobal.modelCZWAR;
        Vo_CZWARItem.List[this._nowSel].playerId == GameGlobal.modelRole.voMine.id && 0 == t.myawardNum && (t.awardNum = 0), this.upLZ(), this.txtShengyu.text = "剩余挑战次数:" + t.syTzNum, t.myawardNum > 0 ? (this.btnGetAward.enabled = !0, this.btnGetAward.setNoticeVis(!0)) : (this.btnGetAward.enabled = !1, this.btnGetAward.setNoticeVis(!1));
        var e = Vo_CZWARItem.List[this._nowSel];
        if (e.id > 9) {
            this.txtzltj.textFlow = HtmlUtil.parse(HtmlUtil.color("抢占成功", "#B85E0E") + "<font size='20' color='#10a244'> (无人占领时可直接占领)</font>"), this.txtZLDes.visible = !1;
            for (var i = 0; 3 > i; i++) {
                var o = this["txtRecord" + i];
                o.text = ""
            }
        } else {
            this.txtzltj.textFlow = HtmlUtil.parse(HtmlUtil.color("20回合内", "#10a244") + "挑战成功或抢夺成功");
            for (var n = Vo_CZWARrecordItem.bestRecord, i = 0; 3 > i; i++) {
                var o = this["txtRecord" + i];
                n[i] ? o.textFlow = HtmlUtil.parse(HtmlUtil.color(n[i].name, "#d82424") + HtmlUtil.color(n[i].huihe.toString() + "回合内", "#10a244") + HtmlUtil.color("挑战成功，占领成功", "#684C43")) : o.text = 0 == i ? "暂无记录" : ""
            }
            if (this.txtZLDes.visible = !0, 0 == n.length) var a = 20;
            else n[0].huihe <= 1 ? (this.txtzltj.text = "抢夺成功", this.txtZLDes.visible = !1) : (a = n[0].huihe - 1, this.txtzltj.textFlow = HtmlUtil.parse(HtmlUtil.color(a + "回合内", "#10a244") + "挑战成功或抢夺成功"))
        }
    }, e.prototype.getRemainSec = function (t) {
        var i = GameGlobal.modelCZWAR,
            o = egret.getTimer();
        if (i.remainTime || GameGlobal.modelCZWAR.syTzNum > 0) {
            var n = i.remainTime - (o - i.remainTimeUDT) / 1e3 >> 0;
            0 >= n ? t.lqTime.visible = t.btnRemove.visible = !1 : (t.lqTime.visible = t.btnRemove.visible = !0, e.nowMin = Math.ceil(n / 60)), t.lqTime.textFlow = HtmlUtil.parse("挑战/抢夺冷却时间：" + HtmlUtil.color(DateUtil.getHMSBySecond2(n), "#d83535")), i.isOpen || (t.lqTime.visible = t.btnRemove.visible = !1)
        } else t.lqTime.visible = t.btnRemove.visible = !1;
        var a = Vo_CZWARItem.List[t._nowSel].OccupyTime;
        if (-1 == a) t.txtOccupyTime.text = "无";
        else if (i.isOpen) {
            var s = a + (o - i.zlTimeUDT) / 1e3 >> 0;
            t.txtOccupyTime.text = DateUtil.getHMSBySecond2(s)
        } else t.txtOccupyTime.textFlow = HtmlUtil.parse(DateUtil.getHMSBySecond2(a) + HtmlUtil.color(" (结算期间不计算时间)", "#d83535"))
    }, e.prototype.uplqTime = function () {
        this.lqTime.visible = this.btnRemove.visible = !1
    }, e.prototype.upZljl = function () {
        var t = this._nowSel;
        Vo_CZWARItem.List[t].id == GameGlobal.modelCZWAR.zljlId && (GameGlobal.modelCZWAR.awardNum > 0 ? (this.btnGetAward.enabled = !0, this.btnGetAward.setNoticeVis(!0)) : (this.btnGetAward.enabled = !1, this.btnGetAward.setNoticeVis(!1)))
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.$onRemoveFromStage = function () {
        this.role.stopAndClear()
    }, e.nowMin = -1, e.oldMin = -1, e
}(BaseEUIView);
__reflect(VCZWARDian.prototype, "VCZWARDian");
var VCZWARItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Child_expGiftSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this);
        var e = this;
        this.txtName.size = this.txtLevel.size = 20, e.role = UIRole.create(), e.partContainer.addChild(this.role), e.partContainer.scaleX = e.partContainer.scaleY = 1, e.btnTz.label = "挑战/抢夺", e.btnTz.visible = !0, e.btnTz.labelSize = 19
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.setMc(t), this.textUpdate(), this.txtName.textFlow = HtmlUtil.parse(HtmlUtil.color(t.Occupyer, "#ffffff")), -1 != t.monster ? this.txtLevel.textFlow = HtmlUtil.parse(HtmlUtil.color("推荐战力", "#fff600") + HtmlUtil.color(t.zhanli, "#08ef5b")) : this.txtLevel.textFlow = HtmlUtil.parse(HtmlUtil.color("战力", "#fff600") + HtmlUtil.color(t.zhanli, "#08ef5b"))
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.textUpdate = function () {
        switch (this.vo.infoCount) {
            case 2:
                this.infoGroup2.visible = !0, this.infoGroup3.visible = !1;
                break;
            case 3:
                this.infoGroup2.visible = !1, this.infoGroup3.visible = !0
        }
    }, e.prototype.setMc = function (t) {
        var e = this;
        e.role.stopAndClear(), e.role.play(700), -1 != t.monster ? e.role.setMonsterID(t.monster) : (e.role.setWeapon(t.weapon), e.role.setHorse(t.horse), e.role.setWing(t.wing), e.role.setBody(t.body)), e.role.setTitle(t.title), e.role.setWay(3), e.role.validParts()
    }, e.prototype.$onRemoveFromStage = function () {
        this.role.stopAndClear()
    }, e
}(eui.Component);
__reflect(VCZWARItem.prototype, "VCZWARItem");
var VCZWARJL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "FishMsg", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.txtTitle.text = "职位占领奖励", this.txtDes.visible = !0, this.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.color("注:", "#ff0000") + HtmlUtil.color("占领职位满30分钟即可领取一份占领奖励", "#684c43")), this.list.itemRenderer = VCZWARJLItem, this.data = new eui.ArrayCollection, this.list.dataProvider = this.data, Vo_CZWARJLItem.initZljl()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.update = function () {
        DisplayUtil.fillDataAC(this.data, Vo_CZWARJLItem.zljl)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VCZWARJL.prototype, "VCZWARJL");
var VCZWARJLItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "ChengZhuAwardItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.bg.source = t.index % 2 == 0 ? "CM2_json.bg1" : "CM2_json.bg2", this.imgTitle.source = t.title, ConfigHelp.makeStrGrids(t.jl, this.grids, 0, 0, this.group, !0)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VCZWARJLItem.prototype, "VCZWARJLItem");
var VCZWARJSJL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ChengZhuJSJLSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.data = new eui.ArrayCollection, this.list.itemRenderer = VCZWARJSJLItem, this.list.dataProvider = this.data, Vo_CZWARJLItem.initJsjl()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.update = function () {
        DisplayUtil.fillDataAC(this.data, Vo_CZWARJLItem.jsjl)
    }, e
}(BaseEUIView);
__reflect(VCZWARJSJL.prototype, "VCZWARJSJL");
var VCZWARJSJLItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "ChengZhuZWJLItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.btnGet.visible = !1, this.scrol.width = 416
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.bg.source = t.index % 2 == 0 ? "CM2_json.bg1" : "CM2_json.bg2", this.imgTitle.source = t.title, ConfigHelp.makeStrGrids(t.jl, this.grids, 0, 0, this.group, !0)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VCZWARJSJLItem.prototype, "VCZWARJSJLItem");
var VCZWARPage1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.imglz = [], e.imgRed = new eui.Image, e.skinName = "ChengZhuWarPage1Skin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this;
        t.role = UIRole.create(), t.part.addChild(this.role), t.part.scaleX = t.part.scaleY = 1.4, this.imgText = new ImageText, this.imgText.container = this.txtTjzl, this.imgText.charFunc = ImageText.STRFUNC, this.part.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnTz.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), t.btnTz.label = "挑战/抢夺"
    }, e.prototype.onT = function () {
        GameGlobal.layerMgr.open(UIConst.CZWARDIAN, Vo_CZWARItem.List[0])
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addtime(), this.update(), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_OPENCLOSE, this.addtime, this), GameGlobal.modelCZWAR.on(ModelCZWAR.UPDATE, this.update, this), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_ZLJL, this.upNotice, this), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_RECORD, this.upLZ, this), GameGlobal.modelCZWAR.CG2883(Vo_CZWARItem.List[0].id), this.upNotice()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.tick.removeInterv(this.getRemainSec, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_OPENCLOSE, this.addtime, this), GameGlobal.modelCZWAR.off(ModelCZWAR.UPDATE, this.update, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_ZLJL, this.upNotice, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_RECORD, this.upLZ, this)
    }, e.prototype.addtime = function () {
        var t = GameGlobal.modelCZWAR.isOpen;
        t ? GameGlobal.tick.addInterv(this.getRemainSec, 1e3, this) : (GameGlobal.tick.removeInterv(this.getRemainSec, this), this.getRemainSec(this))
    }, e.prototype.getRemainSec = function (t) {
        var e = Vo_CZWARItem.List[0].OccupyTime,
            i = GameGlobal.modelCZWAR,
            o = egret.getTimer();
        if (-1 == e) t.txtOccupyTime.text = "无";
        else if (i.isOpen) {
            var n = e + (o - i.zlTimeUDT) / 1e3 >> 0;
            t.txtOccupyTime.text = DateUtil.getHMSBySecond2(n)
        } else t.txtOccupyTime.textFlow = HtmlUtil.parse(DateUtil.getHMSBySecond2(e) + HtmlUtil.color("(结算期间不计算时间)", "#d83535"))
    }, e.prototype.upLZ = function () {
        if (ModelCZWAR.isONE) {
            var t = GameGlobal.modelCZWAR.lzNum;
            if (0 == t) this.lzGroup.visible = !1;
            else {
                this.lzGroup.visible = !0;
                for (var e = t.toString().split(""), i = 0; i < e.length; i++) {
                    var o = this.imglz[i];
                    if (!o) {
                        var o = new eui.Image;
                        o.x = 90 + 35 * i, o.verticalCenter = 0, this.lzGroup.addChild(o), this.imglz.push(o)
                    }
                    o.source = "CZWAR_json.lz" + e[i]
                }
                for (; i < this.imglz.length; i++) {
                    var o = this.imglz[i],
                        n = o.$parent.$children.indexOf(o);
                    o.parent.$doRemoveChild(n, !1), this.imglz.splice(i, 1), i--
                }
            }
        }
    }, e.prototype.update = function () {
        var t = Vo_CZWARItem.List[0];
        this.getRemainSec(this), this.setMc(t), this.txtTitle.text = t.zhiwei, this.txtOccupyer.text = t.Occupyer, this.imgText.setText(t.zhanli.toString())
    }, e.prototype.setMc = function (t) {
        var e = this;
        e.role.stopAndClear(), e.role.play(700), -1 != t.monster ? e.role.setMonsterID(t.monster) : (e.role.setWeapon(t.weapon), e.role.setHorse(t.horse), e.role.setWing(t.wing), e.role.setBody(t.body)), e.role.setTitle(t.title, -160), e.role.setWay(3), e.role.validParts()
    }, e.prototype.upNotice = function () {
        this.imgRed.source = "MainScreen_json.bm_red", this.imgRed.x = 20, this.imgRed.y = -130;
        var t = GameGlobal.modelCZWAR;
        t.awardNum > 0 && t.zljlId == Vo_CZWARItem.List[0].id ? (this.part.addChild(this.imgRed), this.btnTz.setNoticeVis(!0)) : (this.part.$children.indexOf(this.imgRed) > -1 && this.part.removeChild(this.imgRed), this.btnTz.setNoticeVis(!1))
    }, e.prototype.$onRemoveFromStage = function () {
        this.role.stopAndClear()
    }, e
}(BaseEUIView);
__reflect(VCZWARPage1.prototype, "VCZWARPage1");
var VCZWARPage2 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.imgRed = new eui.Image, e.skinName = "ChengZhuWarPage2Skin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        for (var t = 0; 4 > t; t++) {
            var e = this["item" + t];
            e.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.grids.push(e)
        }
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget;
        GameGlobal.layerMgr.open(UIConst.CZWARDIAN, e.vo)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this._nowPage = e, GameGlobal.modelCZWAR.on(ModelCZWAR.UPDATE, this.update, this), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_ZLJL, this.upNotice, this), this.update(), this.upNotice()
    }, e.prototype.update = function () {
        var t = Vo_CZWARItem.List,
            e = this._nowPage;
        if (2 == e)
            for (var i = 1; i < t.length && 5 != i; i++) this.grids[i - 1].data = t[i];
        else if (3 == e)
            for (var i = 5; i < t.length && 9 != i; i++) this.grids[i - 5].data = t[i]
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelCZWAR.off(ModelCZWAR.UPDATE, this.update, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_ZLJL, this.upNotice, this)
    }, e.prototype.upNotice = function () {
        this.imgRed.source = "MainScreen_json.bm_red", this.imgRed.x = 20, this.imgRed.y = -130;
        for (var t = GameGlobal.modelCZWAR, e = this.grids, i = 0; i < e.length; i++) {
            var o = e[i];
            if (o.vo.id == t.zljlId && t.awardNum > 0) {
                o.partContainer.addChild(this.imgRed), o.btnTz.setNoticeVis(!0);
                break
            }
            o.partContainer.$children.indexOf(this.imgRed) > -1 && o.partContainer.removeChild(this.imgRed), o.btnTz.setNoticeVis(!1)
        }
    }, e
}(BaseEUIView);
__reflect(VCZWARPage2.prototype, "VCZWARPage2");
var VCZWARPage3 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ChengZhuWarPage3Skin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.data = new eui.ArrayCollection, this.List.itemRenderer = VCZWARPage3Item, this.List.dataProvider = this.data
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.updateView(), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_ZLJL, this.updateView, this), GameGlobal.modelCZWAR.on(ModelCZWAR.UPDATE, this.updateView, this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_ZLJL, this.updateView, this), GameGlobal.modelCZWAR.off(ModelCZWAR.UPDATE, this.updateView, this)
    }, e.prototype.updateView = function () {
        for (var t = [], e = Vo_CZWARItem.List, i = 9; i < e.length; i++) t.push(e[i]);
        DisplayUtil.fillDataAC(this.data, t)
    }, e
}(BaseEUIView);
__reflect(VCZWARPage3.prototype, "VCZWARPage3");
var VCZWARPage3Item = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ChengZhuWarPage3ItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.btnDo.label = "抢占", this.btnDo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.imgNo.visible = !1
    }, e.prototype.onT = function () {
        GameGlobal.layerMgr.open(UIConst.CZWARDIAN, this.vo)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.bg.source = (t.id - 10) % 2 == 0 ? "CM2_json.bg3" : "CM2_json.bg2", this.txtNo.text = (t.id - 9).toString(), this.txtName.text = t.Occupyer;
            var e = GameGlobal.modelCZWAR;
            t.id == e.zljlId && e.awardNum > 0 ? this.btnDo.setNoticeVis(!0) : this.btnDo.setNoticeVis(!1)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VCZWARPage3Item.prototype, "VCZWARPage3Item");
var VCZWARPkRecord = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.label = new eui.Label, e.skinName = "FishMsg", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.txtTitle.text = "战斗记录", this.list.itemRenderer = VCZWARPkRecordItem, this.data = new eui.ArrayCollection, this.list.dataProvider = this.data, this.label.text = "暂无记录", this.label.textColor = 16777215, this.label.verticalCenter = 0, this.label.horizontalCenter = 0, this.label.size = 30
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_MYRECORD, this.update, this), GameGlobal.modelCZWAR.CG2885()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_MYRECORD, this.update, this)
    }, e.prototype.update = function () {
        0 == Vo_CZWARrecordItem.myRecord.length ? this.label.parent || this.addChild(this.label) : this.label.parent && this.label.parent.removeChild(this.label), DisplayUtil.fillDataAC(this.data, Vo_CZWARrecordItem.myRecord)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VCZWARPkRecord.prototype, "VCZWARPkRecord");
var VCZWARPkRecordItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ChengZhuMsgItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.bg.source = t.index % 2 == 0 ? "CM2_json.bg1" : "CM2_json.bg2", this.imgResult.source = 1 == t.result ? "JJCAtlas2_json.suc" : "JJCAtlas2_json.fail", this.imgTitle.source = Vo_CZWARItem.getTitleSourById(t.id), 1 == t.tzORfs ? this.lb.textFlow = HtmlUtil.parse(HtmlUtil.color("你", "#10a244") + HtmlUtil.color("挑战", "#684c43") + HtmlUtil.color(t.name, "#d82424")) : this.lb.textFlow = HtmlUtil.parse(HtmlUtil.color(t.name, "#d82424") + HtmlUtil.color("挑战", "#684c43") + HtmlUtil.color("你", "#10a244")), this.lbTime.text = DateUtil.getYMDHM(t.time)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VCZWARPkRecordItem.prototype, "VCZWARPkRecordItem");
var VCZWARShop = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ChengZhuShopSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.data = new eui.ArrayCollection, this.list.itemRenderer = VCZWARShopItem, this.list.dataProvider = this.data
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), this.upXZNum(), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.upXZNum, this), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_commond, this.update, this), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_commond_buy, this.update, this), GameGlobal.modelShangCheng.CG903()
    }, e.prototype.upXZNum = function () {
        this.xzNum.text = GameGlobal.modelBag.getItemCount(1208).toString()
    }, e.prototype.update = function () {
        DisplayUtil.fillDataAC(this.data, VoShangCheng.getDatasByType(6))
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.upXZNum, this), GameGlobal.modelShangCheng.off(ModelShangCheng.msg_commond, this.update, this)
    }, e
}(BaseEUIView);
__reflect(VCZWARShop.prototype, "VCZWARShop");
var VCZWARShopItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.notxg = !1, e.skinName = "WDTDShopItem", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.xg.visible = !1, this.st.textColor = 1090116, this.icon.source = "101208_png", this.icon.height = 40, this.icon.y -= 5, this.item.enableTip(), this.shoeSel2.width += 20, this.price.width += 15, this.price.x += 3
    }, e.prototype.onT = function () {
        return this.vo.boughtNum != this.xgnum || this.notxg ? void GameGlobal.layerMgr.open(UIConst.JJCSTORETIPS, this.vo) : void ViewText.text("已达到购买上限")
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.price.text = "x" + t.cfg.xh[2], this.setXg(t.cfg.dayxg, t.cfg.fxg);
            var e = this.dayorf ? "每日" : "永久";
            this.st.text = e + "限购(" + t.boughtNum + "/" + this.xgnum + ")", t.boughtNum == this.xgnum ? this.st.textColor = 14165028 : this.st.textColor = 1090116, this.st.visible = this.notxg ? !1 : !0;
            var i = ConfigHelp.makeVoList(this.setStrItem())[0];
            this.item.setData(i), this.lname.text = i.name
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setXg = function (t, e) {
        0 != e ? (this.xgnum = e, this.dayorf = !1) : (this.xgnum = t, this.dayorf = !0), 0 == t && 0 == e && (this.notxg = !0)
    }, e.prototype.setStrItem = function () {
        for (var t = this.vo.cfg.wpid, e = "", i = 0; i < t.length; i++) {
            var o = ",";
            e += i == t.length - 1 ? t[i].toString() : t[i].toString() + o
        }
        return e
    }, Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel != t && (this._sel = t, t ? (this.shoeSel1.source = "CM2_json.chosen", this.shoeSel2.source = "WDTD_json.seldi") : (this.shoeSel1.source = "CM2_json.nChosen", this.shoeSel2.source = "WDTD_json.noseldi"))
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VCZWARShopItem.prototype, "VCZWARShopItem");
var VCZWARZLTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ChengZhuZLTipSKin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP, this.closeT, this), this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP, this.closeT, this), this.least = new ImageText, this.least.container = this.txtLeast, this.least.charFunc = ImageText.STRFUNC, this.now = new ImageText, this.now.container = this.txtNow, this.now.charFunc = ImageText.STRFUNC, this.btnOK.label = "确定"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), 1 == e[0] ? (this.txtTitleTip.text = "占领成功", this.txtDes.text = "恭喜你,您挑战所需的最低回合数少于第一名,占领成功", this.txtDes.textColor = 1090116) : 2 == e[0] && (this.txtTitleTip.text = "占领失败", this.txtDes.text = "很遗憾,您挑战所需的最低回合数未少于第一名,占领失败", this.txtDes.textColor = 14165028), this.least.setText(e[1].toString()), this.now.setText(e[2].toString())
    }, e.prototype.closeT = function () {
        this.closeHandler()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VCZWARZLTip.prototype, "VCZWARZLTip");
var VCZWARZWJL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ChengZhuAwardSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.data = new eui.ArrayCollection, this.list.itemRenderer = VCZWARZWJLItem, this.list.dataProvider = this.data, Vo_CZWARJLItem.initZwjl()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_ZWJL, this.update, this), GameGlobal.modelCZWAR.CG2891()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_ZWJL, this.update, this)
    }, e.prototype.update = function () {
        DisplayUtil.fillDataAC(this.data, Vo_CZWARJLItem.zwjl)
    }, e
}(BaseEUIView);
__reflect(VCZWARZWJL.prototype, "VCZWARZWJL");
var VCZWARZWJLItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "ChengZhuZWJLItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.btnGet.labelColor = 11023619, this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onT = function () {
        GameGlobal.modelCZWAR.CG2893()
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.bg.source = t.index % 2 == 0 ? "CM2_json.bg1" : "CM2_json.bg2", this.imgTitle.source = t.title, ConfigHelp.makeStrGrids(t.jl, this.grids, 0, 0, this.group, !0), this.upBtnState(t.state)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.upBtnState = function (t) {
        switch (this.btnGet.setNoticeVis(!1), t) {
            case 0:
                this.btnGet.enabled = !1, this.btnGet.label = "不可领";
                break;
            case 1:
                this.btnGet.enabled = !0, this.btnGet.label = "领取", this.btnGet.setNoticeVis(!0);
                break;
            case 2:
                this.btnGet.enabled = !1, this.btnGet.label = "已领取"
        }
    }, e
}(eui.ItemRenderer);
__reflect(VCZWARZWJLItem.prototype, "VCZWARZWJLItem");
var Vo_CZWARItem = function () {
    function t() {
        this.monster = -1, this.OccupyTime = -1, this.playerId = -1, this.level = 0, this.infoCount = 2
    }
    return t.create = function () {
        t.List = [];
        var e = CFG_CZWAR.LIB1,
            i = CFG_CZWAR.LIB3[GameGlobal.modelCZWAR.highestLevel];
        for (var o in e) {
            var n = new t;
            if (n.id = e[o].id, n.zhiwei = e[o].zw, n.Occupyer = "无", n.titleid = e[o].chid, n.title = t.getTitleById(e[o].chid), i) {
                var a = t.cfgName[n.id];
                a && (n.zhanli = i[a + "zl"], n.monster = i[a + "mx"])
            } else console.log("error:highestLevel");
            t.List.push(n)
        }
    }, t.setPlayer = function (e) {
        for (var i = t.List, o = 0; o < i.length; o++)
            if (e.id == i[o].id) {
                e.titleid = i[o].titleid, e.title = i[o].title, e.zhiwei = i[o].zhiwei, i.splice(o, 1), i.splice(o, 0, e);
                break
            }
    }, t.getTitleById = function (t) {
        var e = CFG_Title.LIB[t];
        return e ? e.icon : null
    }, t.getTitleSourById = function (e) {
        var i = CFG_CZWAR.LIB1[e];
        if (i) {
            if (e > 9) var o = "CZWAR_json.ptgs";
            else o = "CZWAR_json." + t.cfgName[i.id] + "zz";
            return o
        }
        return ""
    }, t.setIsZLjlById = function (e) {
        for (var i = t.List, o = 0; o < i.length; o++)
            if (e == i[o].id) {
                t.zlIndex = o;
                break
            }
    }, t.isZL = function () {
        for (var e = GameGlobal.modelRole.voMine.id, i = t.List, o = 0; o < i.length; o++)
            if (e == i[o].playerId) return !0;
        return !1
    }, t.List = [], t.cfgName = {
        1: "cz",
        2: "ql",
        3: "zq",
        4: "bh",
        5: "xw",
        6: "sl",
        7: "hl",
        8: "fl",
        9: "dl"
    }, t
}();
__reflect(Vo_CZWARItem.prototype, "Vo_CZWARItem");
var Vo_CZWARJLItem = function () {
    function t() {}
    return t.initZljl = function () {
        var e = CFG_CZWAR.LIB1,
            i = 0;
        for (var o in e) {
            if (10 == i) break;
            var n = new t;
            n.id = e[o].id, n.title = Vo_CZWARItem.getTitleSourById(e[o].id), n.jl = e[o].zljl, n.index = i, t.zljl.push(n), i++
        }
    }, t.initZwjl = function () {
        var e = CFG_CZWAR.LIB1,
            i = 0;
        for (var o in e) {
            if (10 == i) break;
            var n = new t;
            n.id = e[o].id, n.title = Vo_CZWARItem.getTitleSourById(e[o].id), n.jl = e[o].zwjl, n.index = i, n.state = 0, t.zwjl.push(n), i++
        }
    }, t.initJsjl = function () {
        var e = CFG_CZWAR.LIB1,
            i = 0;
        for (var o in e) {
            if (10 == i) break;
            var n = new t;
            n.id = e[o].id, n.title = Vo_CZWARItem.getTitleSourById(e[o].id), n.jl = e[o].zs, n.index = i, t.jsjl.push(n), i++
        }
    }, t.upZwStateById = function (e, i) {
        for (var o = t.zwjl, n = 0; n < o.length; n++) {
            if (e == o[n].id) {
                o[n].state = i;
                break
            }
            if (e > 10) {
                o[9].state = i;
                break
            }
        }
    }, t.zljl = [], t.zwjl = [], t.jsjl = [], t
}();
__reflect(Vo_CZWARJLItem.prototype, "Vo_CZWARJLItem");
var Vo_CZWARrecordItem = function () {
    function t() {
        this.huihe = -1
    }
    return t.bestRecord = [], t.myRecord = [], t
}();
__reflect(Vo_CZWARrecordItem.prototype, "Vo_CZWARrecordItem");
var ItemJRDH = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.labelList = [], e.btnDuiHuan.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onT, e), e.labelList.push(e.chongCount), e.labelList.push(e.yangCount), e.labelList.push(e.jieCount), e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemJRDHSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this._id = t.itemId;
            var e = CFG_CYDH.LIB[t.itemId].jl,
                i = ConfigHelp.makeVoList(e)[0];
            i.quality < 5 && (i.quality = 5), this.grid.data = i, this.grid.enableTip(), this.grid.isShowEff(!0);
            var o = CFG_CYDH.LIB[t.itemId].xhdj;
            ConfigHelp.makeStrGrids(o, this.grids, 0, 0, this.Container, !0, 10, .75), this.duiHuanNum.text = (CFG_CYDH.LIB[t.itemId].dhcs - t.duiHuanCount).toString();
            for (var n = !0, a = CFG_CYDH.LIB[t.itemId].xhdj.split(";"), s = 0; s < this.labelList.length; s++)
                if (a[s]) {
                    this.labelList[s].visible = !0;
                    var r = a[s].split(",")[2],
                        l = GameGlobal.modelBag.getItemCount(a[s].split(",")[1]);
                    l >= parseInt(r) ? this.labelList[s].textFlow = HtmlUtil.parse(HtmlUtil.color(l + "/" + r, "#10a244")) : (this.labelList[s].textFlow = HtmlUtil.parse(l + "/" + HtmlUtil.color(r, "#10a244")), n = !1)
                } else this.labelList[s].visible = !1;
            2 == a.length ? (this.plus02.visible = !1, this.cardBg02.visible = !1) : 1 == a.length && (this.plus01.visible = !1, this.cardBg01.visible = !1, this.plus02.visible = !1, this.cardBg02.visible = !1), n && 0 != parseInt(this.duiHuanNum.text) ? this.iconNotice.visible = !0 : this.iconNotice.visible = !1
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onT = function () {
        GameGlobal.modelCYJ.CG3993(this._id)
    }, Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemJRDH.prototype, "ItemJRDH");
var ModelCYJ = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(3992, i.GC3992, i), e.regHand(3994, i.GC3994, i)
    }, e.prototype.CG3991 = function () {
        var t = this.getBytes();
        this.sendSocket(3991, t)
    }, e.prototype.GC3992 = function (t, i) {
        for (var o = i.readShort(), n = [], a = 0; o > a; a++) {
            var s = i.readByte(),
                r = i.readByte(),
                l = {
                    itemId: s,
                    duiHuanCount: r
                };
            n.push(l)
        }
        t.notify(e.MSG_JRDH, n)
    }, e.prototype.CG3993 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3993, e)
    }, e.prototype.GC3994 = function (t, e) {
        var i = (e.readByte(), e.readByte());
        1 == i ? (ViewText.text("兑换成功！"), GameGlobal.modelCYJ.CG3991()) : 2 == i ? ViewText.text("材料不足！") : 3 == i ? ViewText.text("今日已无兑换次数！") : 4 == i && ViewAlert.show("背包已满，是否前往熔炼?", function () {
            GameGlobal.layerMgr.open(UIConst.EQUIPRL)
        })
    }, e.MSG_JRDH = "MSG_JRDH", e
}(BaseModel);
__reflect(ModelCYJ.prototype, "ModelCYJ");
var ViewCYJ_jieRiDuiHuan = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "chongYang_JRDHSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.Container.dataProvider = this.sourceData, this.Container.itemRenderer = ItemJRDH, this.Scroller.scrollPolicyH = eui.ScrollPolicy.OFF, this.Scroller.verticalScrollBar.autoVisibility = !1, this.Scroller.verticalScrollBar.visible = !1, this.btn_jieRiBoss.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelCYJ.CG3991(), this.addMsg(), IconUtil.setIconSrc(this.bg, "commonAct_json.15_jrdhBg");
        var i = GameGlobal.modelAct.actData.getChildByID(35);
        if (i) {
            var o = i.getChildByID(56);
            o ? this.btn_jieRiBoss.visible = !0 : this.btn_jieRiBoss.visible = !1
        } else this.btn_jieRiBoss.visible = !0
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), IconUtil.setIconSrc(this.bg)
    }, e.prototype.onT = function () {
        CFG_COMMOND.isOpen(UIConst.CYDH, !0) && CFG_COMMOND.isOpen(UIConst.MIDFESTBOSS, !0) && (GameGlobal.layerMgr.open(UIConst.BOSSPAGE, 3), GameGlobal.layerMgr.close(UIConst.THANKSGIVINGDAY))
    }, e.prototype.update = function () {}, e.prototype.addMsg = function () {
        GameGlobal.modelCYJ.on(ModelCYJ.MSG_JRDH, this.onUpdate, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelCYJ.off(ModelCYJ.MSG_JRDH, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        if (0 != t.itemId) {
            for (var e = [], i = 0; i < t.length; i++) e.push(t[i]);
            DisplayUtil.fillDataAC(this.sourceData, e)
        }
    }, e
}(BaseEUIView);
__reflect(ViewCYJ_jieRiDuiHuan.prototype, "ViewCYJ_jieRiDuiHuan");
var choukaGezi = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/chouka/chouka_gezi.exml", e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.item.data = t.awards, this.hb_name.text = t.name, this.guangxiao.visible = t.isHB, this.ewjlGrp.visible = !1;
            var e = GameGlobal.modelAct.actData.getChildByID(13);
            if (e) {
                var i = CFG_ZHAOMU.LIB;
                for (var o in i) {
                    var n = i[o].xsdl,
                        a = Util.parseIntStr(n);
                    break
                }
                this.ewjlGrp.visible = t.id == a[1] && t.num == a[2] ? !0 : !1
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.initView = function () {
        this.item.enableTip()
    }, e.create = function () {
        var t = this.List[this.n];
        return t || (t = new e, this.List.push(t)), this.n++, t
    }, e.clear = function () {
        for (var t = this.n; t < this.List.length; t++) {
            this.List[t].parent && this.List[t].parent.removeChild(this.List[t]);
            var e = this.List.splice(t, 1);
            t--, e = null
        }
        this.n = 0
    }, e.n = 0, e.List = [], e
}(BaseEUIView);
__reflect(choukaGezi.prototype, "choukaGezi");
var choukaGoods = function () {
    function t() {
        this.isHB = !1, this.have = !1, this.xsid = 0, this.open = !0
    }
    return t.prototype.resolve = function () {
        this.awards = VoItem.create(), this.awards.init(this.id), this.awards.count = this.num, this.setActItem();
        this.setisHbHave();
        this.isHB ? this.have ? (this.gongXi = "chouka_json.huodexs", this.name = this.setNa(this.id), this.textTle = "该仙神已可激活或已激活,\n将自动转换为" + this.num.toString() + "个" + this.name, this.Mc = this.setMc(this.xsid), this.textLevel = this.pzWitch(this.setPz(this.xsid))) : (this.gongXi = "chouka_json.huodexxs", this.name = this.setNa(this.id), this.textTle = "成功获得仙神." + this.name, this.Mc = this.setMc(this.xsid), this.textLevel = this.pzWitch(this.setPz(this.xsid))) : (this.gongXi = "chouka_json.huode", this.name = this.setNa(this.id))
    }, t.prototype.setActItem = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(13);
        if (t) {
            var e = CFG_ZHAOMU.LIB;
            for (var i in e) {
                var o = e[i].xsljdl,
                    n = Util.parseIntStr(o);
                break
            }
            if (this.isHB = this.id == n[1] && this.num == n[2] ? !0 : !1, this.isHB) {
                var a = CFG_ZHAOMU.LIB1;
                for (var i in a) {
                    var s = a[i];
                    if (s.ssid == n[1]) {
                        this.xsid = s.xsid;
                        break
                    }
                }
            }
        }
    }, t.prototype.pzWitch = function (t) {
        switch (t) {
            case 3:
                return "HBAtlas2_json.R";
            case 4:
                return "HBAtlas2_json.SR";
            case 5:
                return "HBAtlas2_json.SSR";
            case 6:
                return "HBAtlas2_json.SSSR"
        }
    }, t.prototype.setisHbHave = function () {
        var t = CFG_ZHAOMU.LIB1,
            e = t[this.id];
        if (e) this.isHB = !0, this.xsid = e.xsid;
        else
            for (var i in t) {
                var o = Util.parseIntStr(t[i].zm),
                    n = o[1],
                    a = o[2];
                if (n == this.id && a == this.num) return this.isHB = !0, this.have = !0, this.xsid = t[i].xsid, t[i].id
            }
        return -1
    }, t.prototype.setPz = function (t) {
        var e = CFG_HUOBAN1.LIB[t];
        return e ? e.pz : 0
    }, t.prototype.setMc = function (t) {
        var e = CFG_HUOBAN1.LIB[t];
        return e ? e.m : 0
    }, t.prototype.setNa = function (t) {
        var e = CFG_Item.LIB[t];
        return e ? e.name : ""
    }, t.List = [], t
}();
__reflect(choukaGoods.prototype, "choukaGoods");
var choukaPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.actljnum = 0, e.skinName = "choukaSkin", e
    }
    return __extends(e, t), e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.btnreturn, 30, 30)
    }, e.prototype.guideZM = function () {
        QuestGuideArrow.getIns().guideViewCenter(this.ck_ten)
    }, e.prototype.initView = function () {
        this.addCloseListen(this.btnclose), this.addCloseListen(this.btnreturn), DisplayUtil.popBtnStyle(this.btnRecharge), this.btnRecharge.textFlow = HtmlUtil.underLine("前往充值"), this.btnRecharge.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            platform.openRecharge()
        }, this), this.ck_one.addEventListener(egret.TouchEvent.TOUCH_TAP, this.ckoneT, this), this.ck_ten.addEventListener(egret.TouchEvent.TOUCH_TAP, this.cktenT, this), this.bjGrp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.cktenT, this), this.ck_ten.lbText.text = "连招十次", this.ck_one.lbText.text = "招募", this.txtdes.textFlow = HtmlUtil.parse("必出一个" + HtmlUtil.color("SR仙神", "#b4ff00")), this.setZktxt(), this.imgTxtVIP = new ImageText, this.imgTxtVIP.charFunc = ImageText.VIEWBIGVIPFUNC, this.imgTxtVIP.container = this.vipGrp, this.imgTextCS = new ImageText, this.imgTextCS.charFunc = ImageText.VIEWLITVIPFUNC, this.imgTextCS.container = this.csGrp
    }, e.prototype.getActLjNum = function () {
        var t = CFG_ZHAOMU.LIB;
        for (var e in t) {
            this.actljnum = t[e].xszmcs;
            break
        }
    }, e.prototype.isVipLevel = function () {
        var t, e = GameGlobal.modelRole.voMine.vip,
            i = VoVip.LIB[e].bjcs;
        for (var o in VoVip.LIB) {
            var n = VoVip.LIB[o];
            if (n.vip > e && n.bjcs > i) {
                t = n;
                break
            }
        }
        if (!t) return this.imgforever.visible = !0, this.lessThanVip3.visible = !1, Modelchouka.setYbXh(Modelchouka.isZkOpen, .5), void(this.bjGrp.visible = !0);
        var a = t.vip.toString();
        if (this.imgTxtVIP.setText(a), 999 == t.bjcs) this.imgCS.visible = !1, this.imgBJforever.visible = !0;
        else {
            var s = t.bjcs.toString();
            this.imgTextCS.setText(s)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), Modelchouka.xszmIconTip = !1, this.isVipLevel(), this.isXSZM(), this.isZkTime(), GameGlobal.tick.addInterv(this.getTime, 1e3, this), GameGlobal.modelchouka.on(Modelchouka.CHOUKA, this.onUpdata, this), GameGlobal.modelchouka.on(Modelchouka.BJCSUPDATE, this.updateZheKou, this), GameGlobal.modelchouka.CG1307(), GameGlobal.modelchouka.openUi()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.tick.removeInterv(this.getTime, 1e3), GameGlobal.modelchouka.off(Modelchouka.CHOUKA, this.onUpdata, this), GameGlobal.modelchouka.off(Modelchouka.BJCSUPDATE, this.updateZheKou, this)
    }, e.prototype.updateZheKou = function (t) {
        var e = t > 0 ? .5 : 1;
        t > 0 && Modelchouka.isBuyTen ? this.bjGrp.visible = !0 : this.bjGrp.visible = !1, Modelchouka.setYbXh(Modelchouka.isZkOpen, e), EventCenter.sendMsg(choukaView.ON_YB_CHANGE), this.textTen.text = Modelchouka.yuanBaoXh[1]
    }, e.prototype.getTime = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(13),
            i = GameGlobal.modelAct.actData.getChildByID(36),
            o = e ? e : i;
        if (o) {
            var n = o.getRemainSec();
            n >= 0 ? t.lbtime.text = "倒计时:" + DateUtil.getHMSBySecond2(n) : t.currentState = "noxs"
        }
        var a = Modelchouka.sTime,
            s = egret.getTimer(),
            n = a - (s - Modelchouka.retimeUTD) / 1e3 >> 0;
        if (n >= 0) t.stime.text = DateUtil.getHMSBySecond2(n);
        else {
            if (!t.stime.visible) return;
            t.setTimeOver()
        }
    }, e.prototype.isZml = function () {
        var t = GameGlobal.modelBag.getItemCount(1016);
        t > 0 ? (this.yuanbao.source = "chouka_json.zhaomuling", this.textOne.text = "x " + t.toString(), this.ck_one.setNoticeVis(!0), this.ck_one.removeIconZk()) : (this.yuanbao.source = "MainScreen_json.bm_yb", this.textOne.text = Modelchouka.yuanBaoXh[0], Modelchouka.isZkOpen ? this.oneZk() : this.ck_one.removeIconZk())
    }, e.prototype.isFree = function () {
        0 == Modelchouka.sTime ? this.setTimeOver() : (this.ck_one.lbText.text = "招募", this.ck_one.setNoticeVis(!1), this.nexttime.visible = !0, this.stime.visible = !0, this.yuanbao.visible = !0, this.textOne.visible = !0, this.isZml())
    }, e.prototype.setTimeOver = function () {
        this.ck_one.lbText.text = "免费招募", this.ck_one.setNoticeVis(!0), this.nexttime.visible = !1, this.stime.visible = !1, this.yuanbao.visible = !1, this.textOne.visible = !1, this.ck_one.removeIconZk()
    }, e.prototype.ckoneT = function () {
        GameGlobal.modelchouka.sigle()
    }, e.prototype.cktenT = function () {
        GameGlobal.modelchouka.tenLottery()
    }, e.prototype.onSize = function () {
        var t = GameGlobal.stage,
            e = 42 + platform.deviceTopPX,
            i = 75;
        this.y = e, this.$setHeight(t.stageHeight - i - e)
    }, e.prototype.isXSZM = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(13),
            e = GameGlobal.modelAct.actData.getChildByID(36),
            i = t ? t : e;
        i ? (this.currentState = "xs", this.img_springGift.visible = !0, this.getActLjNum(), this.lbtime.text = "倒计时:" + DateUtil.getHMSBySecond2(i.getRemainSec())) : (this.img_springGift.visible = !1, this.currentState = "noxs")
    }, e.prototype.onUpdata = function () {
        this.cishu.textFlow = HtmlUtil.parse("还有" + HtmlUtil.color(GameGlobal.modelchouka.cishu.toString() + "次", "#b4ff00") + "必出仙神");
        var t = GameGlobal.modelAct.actData.getChildByID(13),
            e = GameGlobal.modelAct.actData.getChildByID(36),
            i = t ? t : e;
        if (i) {
            var o = this.actljnum - Modelchouka.actljnum;
            o > 0 ? this.lbActcs.textFlow = HtmlUtil.parse("激活二郎真君还需招募" + HtmlUtil.color(o + "次", "#ff8400")) : this.lbActcs.textFlow = HtmlUtil.parse("获得二郎真君.魂还需招募" + HtmlUtil.color(Modelchouka.xscs + "次", "#ff8400"))
        }
        this.textTen.text = Modelchouka.yuanBaoXh[1], this.isFree(), this.isFristTen()
    }, e.prototype.setZktxt = function () {
        var t = CFG_ZHAOMU.LIB,
            e = 1;
        for (var i in t) 1 == e ? Modelchouka.onetxtZk = t[i].zk : Modelchouka.tentxtZk = t[i].zk, e++
    }, e.prototype.oneZk = function () {
        this.ck_one.addIconZk(Modelchouka.onetxtZk)
    }, e.prototype.tenZk = function () {
        this.ck_ten.addIconZk(Modelchouka.tentxtZk)
    }, e.prototype.isZkTime = function () {
        Modelchouka.isZkOpen ? this.tenZk() : this.ck_ten.removeIconZk()
    }, e.prototype.isFristTen = function () {
        Modelchouka.isBuyTen ? (this.ck_ten.label = "连抽十次", Modelchouka.isZkOpen ? this.tenZk() : this.ck_ten.removeIconZk()) : (this.ck_ten.removeIconZk(), this.ck_ten.label = "免费十次"), this.ck_ten.setNoticeVis(!Modelchouka.isBuyTen), this.ybTen.visible = this.textTen.visible = Modelchouka.isBuyTen
    }, e.prototype.guideChouKa = function () {
        QuestGuideArrow.getIns().guideTo(this.ck_one, 70, 25)
    }, e
}(BaseEUIView);
__reflect(choukaPnl.prototype, "choukaPnl");
var choukaTle = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.time = 4, e.skinName = "resource/eui_skins/game/chouka/choukaTle.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onT = function () {
        this.closeHandler()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.time = 4, GameGlobal.tick.addInterv(this.timeTick, 1e3, this), this.showHB(e)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.timeTick), this.role.stopAndClear(), choukaView.isTleOpen = !1
    }, e.prototype.timeTick = function (t) {
        0 == t.time && t.closeHandler(), t.btnSure.label = "确定(" + t.time + "s)", t.time--
    }, e.prototype.showHB = function (t) {
        this.btnSure.label = "确定(5s)";
        var e = choukaGoods.List;
        this.gongXi.source = e[t].gongXi, this.textTle.text = e[t].textTle, this.textLevel.source = e[t].textLevel, this.role = UIRole.create(), this.hbpart.addChild(this.role), this.role.scaleX = this.role.scaleY = 1.3, this.role.setBody(e[t].Mc), this.role.setVal(3), this.role.validParts(), this.role.play(700)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(choukaTle.prototype, "choukaTle");
var choukaView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isTenAni = !1, e.tn = 0, e.qf = !1, e.skinName = "resource/eui_skins/game/chouka/choukaView.exml", e
    }
    return __extends(e, t), e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.btnSure, 60, 25)
    }, e.prototype.initView = function () {
        this.btnAgain.label = "再招一次", this.btnSure.label = "确定", this.role = UIRole.create(), this.hbpart.addChild(this.role), this.role.scaleX = this.role.scaleY = 1.3, this.btnAgain.addEventListener(egret.TouchEvent.TOUCH_TAP, this.againT, this), this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.sureT, this)
    }, e.prototype.againZk = function () {
        this.btnAgain.addIconZk(Modelchouka.onetxtZk)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addEvent(), GameGlobal.modelchouka.on(Modelchouka.CHOUKAUPDATE, this.update, this);
        var i = GameGlobal.tick.addInterv(this.timeTick, 500, this);
        i && (this.retime = i), GameGlobal.modelchouka.CG1307()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeEvent(), GameGlobal.modelchouka.off(Modelchouka.CHOUKAUPDATE, this.update, this), GameGlobal.tick.removeInterv(this.timeTick), this.role.stopAndClear()
    }, e.prototype.isZml = function (t) {
        this._curI = t;
        var e = GameGlobal.modelBag.getItemCount(1016);
        this.zml.source = "MainScreen_json.bm_yb", 1 == t ? e > 0 ? (this.zml.source = "chouka_json.zhaomuling", this.zmlNum.text = "x " + e, this.btnAgain.removeIconZk()) : this.zmlNum.text = Modelchouka.yuanBaoXh[0] : 2 == t && (this.zmlNum.text = Modelchouka.yuanBaoXh[1])
    }, e.prototype.againT = function () {
        1 == Modelchouka.oneTen ? GameGlobal.modelchouka.sigle() : 2 == Modelchouka.oneTen && GameGlobal.modelchouka.tenLottery()
    }, e.prototype.sureT = function () {
        choukaGoods.List.length == this.container.numChildren || "xs" == this.currentState ? this.closeHandler() : 2 == Modelchouka.oneTen && (this.retime.interv = 1)
    }, e.prototype.update = function () {
        this.container.removeChildren(), this.setVisHb(!1);
        var t = Modelchouka.oneTen;
        Modelchouka.isZkOpen ? 1 == t ? this.btnAgain.addIconZk(Modelchouka.onetxtZk) : 2 == t && this.btnAgain.addIconZk(Modelchouka.tentxtZk) : this.btnAgain.removeIconZk(), this.setBtnVis(!1), 1 == t ? (this.postOne(), this.isZml(1)) : 2 == t && (this.postTen(), this.isZml(2))
    }, e.prototype.setBtnVis = function (t) {
        this.btnAgain.visible = this.zml.visible = this.zmlNum.visible = t
    }, e.prototype.setVisHb = function (t) {
        t ? (this.currentState = "xs", this.role.play(700)) : (this.currentState = "noxs", this.role.stopAndClear())
    }, e.prototype.setHbShowOne = function (t) {
        this.gongXi.source = t.gongXi, this.textTle.text = t.textTle, this.textLevel.source = t.textLevel, this.role.setBody(t.Mc), this.role.setVal(3), this.role.validParts(), this.setVisHb(!0), this.setBtnVis(!0)
    }, e.prototype.actTenShow = function () {
        this.postTen()
    }, e.prototype.postOne = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(13),
            e = choukaGoods.List;
        if (t && e.length > 1) return void this.actTenShow();
        var i = choukaGoods.List[0];
        if (this.gongXi.source = i.gongXi, i.isHB) return void this.setHbShowOne(i);
        var o = choukaGezi.create();
        choukaGezi.clear(), o.x = (this.container.width - o.width) / 2, o.y = (this.container.height - o.height) / 2, o.data = i, this.slowShowOne()
    }, e.prototype.postTen = function () {
        this.gongXi.source = "chouka_json.huode";
        for (var t = choukaGoods.List, i = 0; i < t.length; i++) {
            var o = choukaGezi.create();
            t.length >= 10 ? this.TenWeiZhi(o, i) : this.OneWeiZhi(o, i)
        }
        choukaGezi.clear(), this.retime.interv = 500, e.isTleOpen = this.qf = !1, this.tn = 0, this.isTenAni = !0
    }, e.prototype.OneWeiZhi = function (t, e) {
        t.x = (this.container.width - t.width * choukaGoods.List.length) / 2 + e * t.width, t.y = (this.container.height - t.height) / 2
    }, e.prototype.TenWeiZhi = function (t, e) {
        4 > e && (t.x = (this.container.width - 4 * t.width) / 2 + e * t.width, t.y = 0), e > 3 && 8 > e && (t.x = (this.container.width - 4 * t.width) / 2 + (e - 4) * t.width, t.y = t.height), e > 7 && (t.x = (this.container.width - 4 * t.width) / 2 + (e - 8) * t.width, t.y = 2 * t.height)
    }, e.prototype.slowShowOne = function () {
        for (var t = choukaGezi.List, e = 0; e < t.length; e++) t[e].alpha = 0, this.container.addChild(t[e]), egret.Tween.get(t[e]).to({
            alpha: 1
        }, 500);
        this.setBtnVis(!0)
    }, e.prototype.timeTick = function (t) {
        if (t.isTenAni) {
            var i = choukaGoods.List,
                o = choukaGezi.List,
                n = o[t.tn],
                a = i[t.tn];
            if (!e.isTleOpen)
                if (t.qf) n.alpha = 0, t.container.addChild(n), n.data = a, t.timeFun(n), t.tn == o.length - 1 && (t.setBtnVis(!0), t.isTenAni = !1), t.tn++;
                else {
                    if (a.isHB && a.open) return 1 == t.retime.interv ? void(t.qf = !0) : (e.isTleOpen = !0, a.open = !1, void GameGlobal.layerMgr.open(UIConst.CHOUKATLE, t.tn));
                    n.alpha = 0, t.container.addChild(n), n.data = a, t.timeFun(n), t.tn == o.length - 1 && (t.setBtnVis(!0), t.isTenAni = !1), t.tn++
                }
        }
    }, e.prototype.timeFun = function (t) {
        egret.Tween.get(t).to({
            alpha: 1
        }, 500)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onUpateYB = function () {
        2 == this._curI && (this.zmlNum.text = Modelchouka.yuanBaoXh[1])
    }, e.prototype.addEvent = function () {
        EventCenter.addMsg(e.ON_YB_CHANGE, this.onUpateYB, this)
    }, e.prototype.removeEvent = function () {
        EventCenter.removeMsg(e.ON_YB_CHANGE, this.onUpateYB, this)
    }, e.isTleOpen = !1, e.ON_YB_CHANGE = "ON_YB_CHANGE", e
}(BaseEUIView);
__reflect(choukaView.prototype, "choukaView");
var Modelchouka = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.cishu = 9, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1300, this.GC_uiInfo, this), e.regHand(1302, this.GC_sigle, this), e.regHand(1304, this.GC_tenLottery, this), e.regHand(1306, this.GC1306, this), e.regHand(1308, this.GC1308, this)
    }, e.setYbXh = function (t, i) {
        var o = CFG_ZHAOMU.LIB,
            n = [];
        for (var a in o) {
            if (t) var s = o[a].cj2.split(",")[2];
            else s = o[a].cj.split(",")[2];
            2 == o[a].zm && (s = Math.round(s * i)), n.push(s)
        }
        e.yuanBaoXh = n
    }, e.prototype.openUi = function () {
        var t = this.getBytes();
        this.sendSocket(1305, t)
    }, e.prototype.GC_uiInfo = function (t, i) {
        t.cishu = i.readByte(), e.sTime = i.readInt(), e.retimeUTD = egret.getTimer(), e.xscs = i.readByte(), e.actljnum = i.readInt();
        var o = i.readByte();
        e.isBuyTen = 1 == o, t.notify(e.CHOUKA)
    }, e.prototype.sigle = function () {
        var t = this.getBytes();
        this.sendSocket(1301, t)
    }, e.prototype.GC_sigle = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            e.oneTen = 1, choukaGoods.List = [];
            for (var n = i.readShort(), a = 0; n > a; a++) {
                var s = new choukaGoods;
                s.id = i.readInt(), s.num = i.readByte(), s.resolve(), choukaGoods.List.push(s)
            }
            GameGlobal.layerMgr.isOpenView(UIConst.CHOUKAVIEW) || GameGlobal.layerMgr.open(UIConst.CHOUKAVIEW), t.notify(e.CHOUKAUPDATE), GameGlobal.modelchouka.openUi()
        } else platform.askOpenRecharge(function () {
            GameGlobal.layerMgr.close(UIConst.CHOUKAVIEW)
        })
    }, e.prototype.tenLottery = function () {
        var t = this.getBytes();
        this.sendSocket(1303, t)
    }, e.prototype.GC_tenLottery = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            e.oneTen = 2, choukaGoods.List = [];
            for (var n = i.readShort(), a = 0; n > a; a++) {
                var s = new choukaGoods;
                s.id = i.readInt(), s.num = i.readByte(), s.resolve(), choukaGoods.List.push(s)
            }
            GameGlobal.layerMgr.isOpenView(UIConst.CHOUKAVIEW) || GameGlobal.layerMgr.open(UIConst.CHOUKAVIEW), t.notify(e.CHOUKAUPDATE), GameGlobal.modelchouka.openUi(), GameGlobal.modelchouka.CG1307()
        } else platform.askOpenRecharge(function () {
            GameGlobal.layerMgr.close(UIConst.CHOUKAVIEW)
        })
    }, e.prototype.GC1306 = function (t, e) {
        e.readByte()
    }, e.prototype.CG1307 = function () {
        var t = this.getBytes();
        this.sendSocket(1307, t)
    }, e.prototype.GC1308 = function (t, i) {
        var o = i.readByte();
        t.notify(e.BJCSUPDATE, o)
    }, e.CHOUKA = "CHOUKA", e.CHOUKAUPDATE = "CHOUKAUPDATE", e.BJCSUPDATE = "BJCSUPDATE", e.sTime = 0, e.oneTen = -1, e.yuanBaoXh = [], e.isZkOpen = !1, e.retimeUTD = 0, e.xscs = 9, e.xszmIconTip = !0, e.xszmTip = !0, e.actljnum = 0, e.isBuyTen = !1, e
}(BaseModel);
__reflect(Modelchouka.prototype, "Modelchouka");
var VZhaoMuXS = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ZhaoMuXSSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "天神降临", this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.imgtxt = new ImageText, this.imgtxt.container = this.timeGroup, this.imgtxt.charFunc = ImageText.STRFUNC, this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onT = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.CHOUKA, !0) && (GameGlobal.layerMgr.open(UIConst.CHOUKA), this.closeHandler())
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), Modelchouka.xszmIconTip = !1;
        var i = GameGlobal.modelAct.actData.getChildByID(13);
        if (i) {
            this.imgtxt.setText(DateUtil.getHMSBySecond2(i.getRemainSec()));
            var o = i.getBtn();
            o.setNoticVis(Modelchouka.xszmIconTip)
        }
        GameGlobal.tick.addInterv(this.timeSec, 1e3, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.timeSec, 1e3)
    }, e.setZktxt = function () {
        var t = CFG_ZHAOMU.LIB[1];
        return t ? t.zk : 0
    }, e.prototype.timeSec = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(13);
        if (e) {
            var i = e.getRemainSec();
            i >= 0 ? t.imgtxt.setText(DateUtil.getHMSBySecond2(i)) : this.closeHandler()
        }
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VZhaoMuXS.prototype, "VZhaoMuXS");
var VZhaoMuXSTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ShouChongTip", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.bg.source = "chouka_json.tc", this.btn.label = "前往招募", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.cont.scaleX = i.cont.scaleY = 0, egret.Tween.get(i.cont).to({
            scaleX: 1,
            scaleY: 1
        }, 500, egret.Ease.cubicInOut), this.remainSec = 15, GameGlobal.tick.addInterv(this.onTick, 1e3, this), GameGlobal.modelsevenlogin.on(ModelSevenLogin.GOTOVER, this.onSize, this)
    }, e.prototype.onClose = function () {
        egret.Tween.removeTweens(this.cont), GameGlobal.modelsevenlogin.off(ModelSevenLogin.GOTOVER, this.onSize, this), GameGlobal.tick.removeInterv(this.onTick, this), this.closeTip()
    }, e.prototype.closeHand = function () {
        var t = this;
        egret.Tween.get(t.cont).to({
            scaleX: 0,
            scaleY: 0
        }, 500, egret.Ease.cubicInOut).call(t.closeHandler, t)
    }, e.prototype.closeTip = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.LEFTUI);
        t && (egret.Tween.get(t.btnZM).to({
            alpha: .5,
            scaleX: .97,
            scaleY: .97
        }, 200, egret.Ease.backOut).to({
            alpha: .95,
            scaleX: 1,
            scaleY: 1
        }, 200, egret.Ease.backOut).to({
            alpha: .7,
            scaleX: .98,
            scaleY: .98
        }, 150, egret.Ease.backOut).to({
            alpha: 1,
            scaleX: .99,
            scaleY: .99
        }, 150, egret.Ease.backOut).to({
            alpha: .8,
            scaleX: .99,
            scaleY: .99
        }, 100, egret.Ease.backOut).to({
            alpha: 1,
            scaleX: 1,
            scaleY: 1
        }, 100, egret.Ease.backOut).to({
            alpha: .8,
            scaleX: .995,
            scaleY: .995
        }, 50, egret.Ease.backOut).to({
            alpha: 1,
            scaleX: 1,
            scaleY: 1
        }, 50, egret.Ease.backOut), t.checkShowWeekTip())
    }, e.prototype.onSize = function () {
        this.cont.anchorOffsetY = this.skin.height / 2;
        var t = GameGlobal.layerMgr.getView(UIConst.LEFTUI);
        if (this.x = 75, t) {
            var e = t.btnZM;
            if (e.parent) return void(this.y = GameGlobal.stage.stageHeight - 560 - (425 - e.y))
        }
        this.y = GameGlobal.stage.stageHeight - 480 - 340 - this.cont.anchorOffsetY
    }, e.prototype.onBtnT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btn:
                GameGlobal.layerMgr.open(UIConst.CHOUKA)
        }
        this.closeHand()
    }, e.prototype.onTick = function (t) {
        t.remainSec--, t.remainSec <= 0 && t.closeHand()
    }, e
}(BaseEUIView);
__reflect(VZhaoMuXSTip.prototype, "VZhaoMuXSTip");
var VZhaoMuZk = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ZhaoMuZkSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "限时打折", this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.imgtxt = new ImageText, this.imgtxt.container = this.timeGroup, this.imgtxt.charFunc = ImageText.STRFUNC, this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onT = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.CHOUKA, !0) && (GameGlobal.layerMgr.open(UIConst.CHOUKA), this.closeHandler())
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i), this.imgzk.source = "chouka_json.g" + e.setZktxt();
        var o = GameGlobal.modelAct.actData.getChildByID(11);
        o && this.imgtxt.setText(DateUtil.getHMSBySecond2(o.getRemainSec())), GameGlobal.tick.addInterv(this.timeSec, 1e3, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.timeSec, 1e3)
    }, e.setZktxt = function () {
        var t = CFG_ZHAOMU.LIB[1];
        return t ? t.zk : 0
    }, e.prototype.timeSec = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(11);
        if (e) {
            var i = e.getRemainSec();
            i >= 0 ? t.imgtxt.setText(DateUtil.getHMSBySecond2(i)) : t.closeHandler()
        }
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VZhaoMuZk.prototype, "VZhaoMuZk");
var ECodeType;
! function (t) {
    t[t.undefined = -1] = "undefined", t[t.SUCCESS = 0] = "SUCCESS", t[t.FAIL = 1] = "FAIL"
}(ECodeType || (ECodeType = {}));
var EGetGiftStatus;
! function (t) {
    t[t.NONE = -1] = "NONE", t[t.SUCCESS = 1] = "SUCCESS", t[t.NOT_SUFFICIENT = 2] = "NOT_SUFFICIENT", t[t.HAD_RECIEVED = 3] = "HAD_RECIEVED"
}(EGetGiftStatus || (EGetGiftStatus = {}));
var EAwardStatus;
! function (t) {
    t[t.NONE = -1] = "NONE", t[t.NOT_ALLOW = 0] = "NOT_ALLOW", t[t.ALLOW = 1] = "ALLOW", t[t.RECIEVED = 2] = "RECIEVED"
}(EAwardStatus || (EAwardStatus = {}));
var EGetAwardResultSatus;
! function (t) {
    t[t.NONE = -1] = "NONE", t[t.SUCCESS = 1] = "SUCCESS", t[t.NOT_REACH_CONDITION = 2] = "NOT_REACH_CONDITION", t[t.BAG_FULL = 3] = "BAG_FULL", t[t.RECIEVED = 4] = "RECIEVED"
}(EGetAwardResultSatus || (EGetAwardResultSatus = {}));
var EPlayRuleType;
! function (t) {
    t[t.NONE = -1] = "NONE", t[t.BUY_ONE_GIVE_ONE = 1125] = "BUY_ONE_GIVE_ONE"
}(EPlayRuleType || (EPlayRuleType = {}));
var ModelCommond = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.levelTriggleQueue = [60], e.shareCDSec = 0, e.shareCDSecDt = 0, e.totalTimes = 0, e.todayTimes = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(256, i.GC256, i), e.regHand(262, i.GC262, i), e.regHand(270, i.GC_COMMON, i), e.regHand(272, i.GC_COMOONGETAWD, i), e.regHand(4050, i.GC_SHAREINFO, i), e.regHand(4052, i.GC_SHARETIMES, i), e.regHand(4054, i.GC_GETSHARAWDRET, i), e.regHand(4060, i.GC_SHAREPLAYERDETAIL, i), e.regHand(4062, i.GC_CZHONGBAO, i), e.regHand(4064, i.GC_GETCZHONGBAO, i), e.regHand(4066, i.GC_GETSHAREPLAYERAWD, i)
    }, e.prototype.GC256 = function (t, e) {
        var i = e.readShort(),
            o = e.readInt(),
            n = CFG_COMMOND.LIB[o].name;
        1 == i ? ViewText.text("等级不够进行此" + n + "操作") : 2 == i && ViewText.text(n + "已屏蔽")
    }, e.prototype.GC262 = function (t, e) {
        var i = (e.readByte(), ConfigHelp.parseServItems(e));
        GameGlobal.layerMgr.open(UIConst.GKBOSSAWRAD, i), GameGlobal.modelBoss.notify(Model_BossData.MSG_PERSONBOSS_UPDATE)
    }, e.prototype.checkLv = function (t) {
        for (var e = 0, i = this.levelTriggleQueue.length; i > e;) {
            var o = this.levelTriggleQueue[e];
            t >= o ? (60 == o && ViewRightUI.addBtn(ERightButton.STRONGER, "menu_wybq_png", this.onWYBQT, this), this.levelTriggleQueue.shift()) : e++
        }
    }, e.prototype.GC_COMMON = function (t, e) {
        var i = e.readUTF();
        try {
            var o = JSON.parse(i);
            t.commonArg = o
        } catch (n) {
            t.commonArg = {}
        }
    }, e.prototype.CG_COMMONGETAWD = function (t) {
        var e = this.getBytes();
        e.writeUTF(t), this.sendSocket(271, e)
    }, e.prototype.GC_COMOONGETAWD = function (t, i) {
        var o = i.readByte(),
            n = i.readUTF();
        console.log("GC_COMOONGETAWD:key=" + n + ",result=" + o), 1 == o ? ("fav" == n ? t.commonArg[n] = 1 : "fShare" == n && (t.commonArg[n] = 1), t.notify(e.MSG_COMMONARG)) : 3 == o && GameGlobal.modelBag.checkRLTips(0)
    }, e.prototype.GC_SHAREINFO = function (t, i) {
        for (var o = i.readShort(), n = (i.readByte(), {}), a = 0, s = i.readShort(); s > a; a++) {
            var r = i.readByte(),
                l = i.readByte();
            n[r] = l
        }
        var h = i.readInt();
        t.shareCDSec = h, t.shareCDSecDt = egret.getTimer(), t.totalTimes = o, t.shareAwardStatus = n, t.notify(e.MSG_SHARE)
    }, e.prototype.getRemainShareSec = function () {
        var t = this.shareCDSec - (egret.getTimer() - this.shareCDSecDt) / 1e3 >> 0;
        return 0 > t && (t = 0), t
    }, e.prototype.CG_SHARESUCCESS = function () {
        var t = this.getBytes();
        this.sendSocket(4051, t)
    }, e.prototype.recordSucces = function () {
        this.CG_SHARESUCCESS()
    }, e.prototype.GC_SHARETIMES = function (t, i) {
        t.totalTimes = i.readByte(), t.todayTimes = i.readByte();
        var o = 300;
        t.shareCDSec = o, t.shareCDSecDt = egret.getTimer(), t.notify(e.MSG_SHARE)
    }, e.prototype.CG_GETSHAREAWARD = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(4053, e)
    }, e.prototype.GC_GETSHARAWDRET = function (t, i) {
        var o = i.readByte(),
            n = i.readByte();
        i.readInt();
        1 == n ? (t.shareAwardStatus[o] = 1, t.notify(e.MSG_SHARE)) : 2 == n && GameGlobal.modelBag.checkRLTips(0)
    }, e.prototype.GC_SHAREPLAYERDETAIL = function (t, i) {
        t.invitePlayers = [];
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = {
                index: o,
                head: "",
                roleid: i.readLong(),
                name: i.readUTF(),
                job: i.readByte(),
                zoneid: i.readInt(),
                lv: i.readShort(),
                rwlv45: i.readByte(),
                rwlv100: i.readByte()
            };
            t.invitePlayers.push(a)
        }
        t.notify(e.MSG_SHARE)
    }, e.prototype.CG_GETSHAREPLAYERAWD = function (t, e) {
        var i = this.getBytes();
        i.writeLong(t), i.writeByte(e), this.sendSocket(4061, i)
    }, e.prototype.GC_GETSHAREPLAYERAWD = function (t, i) {
        var o = i.readByte(),
            n = i.readLong(),
            a = i.readByte();
        if (1 == o) {
            var s = ArrayUtil.getItem(t.invitePlayers, "roleid", n);
            s && (1 == a ? s.rwlv45 = 1 : 2 == a && (s.rwlv100 = 1), t.notify(e.MSG_SHARE))
        } else 3 == o && GameGlobal.modelBag.checkRLTips(0)
    }, e.prototype.GC_CZHONGBAO = function (t, i) {
        t.hongbaoList = [];
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = i.readShort(),
                s = i.readUTF(),
                r = i.readByte(),
                l = i.readInt(),
                h = i.readByte(),
                c = {
                    index: 1,
                    id: a,
                    name: s,
                    job: r,
                    money: l,
                    hadGet: h
                };
            t.hongbaoList.push(c)
        }
        t.notify(e.MSG_SHARE)
    }, e.prototype.CG_GETCZHONGBAO = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(4063, e)
    }, e.prototype.GC_GETCZHONGBAO = function (t, i) {
        var o = i.readInt(),
            n = i.readByte();
        if (1 == n) {
            var a = ArrayUtil.getItem(t.hongbaoList, "id", o);
            a && (a.hadGet = 1), t.notify(e.MSG_SHARE)
        }
    }, e.prototype.onWYBQT = function () {
        GameGlobal.layerMgr.open(UIConst.WYBQ)
    }, e.prototype.isShareNumRed = function () {
        var t = !1,
            e = this.totalTimes;
        if (this.shareAwardStatus)
            for (var i in CFG_COMMOND.LIBSHARE) {
                var o = CFG_COMMOND.LIBSHARE[i];
                if (e >= o.leijicishu && !this.shareAwardStatus[i]) {
                    t = !0;
                    break
                }
            }
        return t
    }, e.prototype.isLevelRed = function (t, e) {
        void 0 === t && (t = !0), void 0 === e && (e = !0);
        var i = !1,
            o = this.invitePlayers;
        if (o)
            for (var n = 0, a = o.length; a > n && !i; n++) {
                var s = o[n];
                if (t && (i = !s.rwlv45 && s.lv >= 45), !i && e && (i = !s.rwlv100 && s.lv >= 100), i) break
            }
        return i
    }, e.prototype.isHongBaoRed = function () {
        var t = !1,
            e = this.hongbaoList;
        if (e)
            for (var i = 0, o = e.length; o > i; i++) {
                var n = e[i];
                if (!n.hadGet) {
                    t = !0;
                    break
                }
            }
        return t
    }, e.prototype.isShareRed = function () {
        return this.isShareNumRed() || this.isLevelRed() || this.isHongBaoRed()
    }, e.MSG_COMMONARG = "MSG_COMMONARG", e.MSG_SHARE = "MSG_SHARE", e
}(BaseModel);
__reflect(ModelCommond.prototype, "ModelCommond");
var VAwardPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.remainTime = 1e5, e.grids = [], e.skinName = "AwardSkin", e
    }
    return __extends(e, t), e.show = function (t, e, i, o, n, a, s, r) {
        void 0 === e && (e = "确定"), void 0 === i && (i = null), void 0 === o && (o = null), void 0 === n && (n = null), void 0 === a && (a = 1e4), void 0 === s && (s = null), void 0 === r && (r = null);
        var l = GameGlobal.layerMgr.isOpenView(UIConst.AWARD);
        l || GameGlobal.layerMgr.open(UIConst.AWARD);
        var h = GameGlobal.layerMgr.getView(UIConst.AWARD);
        h.show(t, e, i, o, n, a, s, r)
    }, e.prototype.show = function (t, e, i, o, n, a, s, r) {
        if (t.sort(ConfigHelp.ITEMSORT), ConfigHelp.makeVoGrids(t, this.grids, 0, 0, this.itemGroup, !0, 0, 1, 2), this.itemGroup.scrollV = 0, e)
            if (this.btn0.label = e, DisplayUtil.addBy(this.g0, this.btnGrp, 0), s) {
                DisplayUtil.addBy(this.cost0, this.g0);
                var l = Util.parseIntStr(s),
                    h = ConfigHelp.makeVoByArr(l);
                this.iconCost0.source = IconUtil.getIconUrl(h.icon), this.txtCost0.text = "" + l[2]
            } else DisplayUtil.remove(this.cost0);
        else DisplayUtil.remove(this.g0);
        if (i)
            if (this.btn1.label = i, DisplayUtil.addBy(this.g1, this.btnGrp, 1), r) {
                DisplayUtil.addBy(this.cost1, this.g1);
                var c = Util.parseIntStr(r),
                    p = ConfigHelp.makeVoByArr(c);
                this.iconCost1.source = IconUtil.getIconUrl(p.icon), this.txtCost1.text = "" + c[2]
            } else DisplayUtil.remove(this.cost1);
        else DisplayUtil.remove(this.g1);
        this.cb0 = o, this.cb1 = n, this.remainTime = a, this.updateTime(), GameGlobal.tick.addInterv(this.onTimeTick, 1e3, this, !1, null, !0)
    }, e.prototype.onTimeTick = function (t) {
        t.remainTime -= 1e3, t.updateTime()
    }, e.prototype.updateTime = function () {
        this.remainTime <= 0 ? this.closeHandler() : this.lbRemain.text = Lang.reTxt("{0}秒后自动关闭", this.remainTime / 1e3 >> 0)
    }, e.prototype.initView = function () {
        this.btn0.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtn0T, this), this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtn1T, this), this.addCloseListen(this.bg)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e)
    }, e.prototype.onClose = function () {
        ConfigHelp.clearGrids(this.grids), GameGlobal.tick.removeInterv(this.onTimeTick, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onBtn0T = function () {
        this.cb0 ? this.cb0() : this.closeHandler()
    }, e.prototype.onBtn1T = function () {
        this.cb1 ? this.cb1() : this.closeHandler()
    }, e
}(BaseEUIView);
__reflect(VAwardPnl.prototype, "VAwardPnl");
var VoAttribute = function () {
    function t() {
        this.addVal = -1
    }
    return t.parse = function (e, i) {
        var o;
        o = "string" == typeof e ? e.split(/\;|\,/) : e;
        var n = o.length,
            a = (CFG_ATTR.LIB, t.tempArr);
        a.length = 0, i || (i = t.getName);
        for (var s = 0; n > s; s += 2) {
            var r = new t;
            r.id = parseInt(o[s]), r.val = parseInt(o[s + 1]), r.name = i(r.id), a.push(r)
        }
        return a.concat()
    }, t.add = function (e, i) {
        var o = new t;
        return o.id = e, o.val = i, o.name = t.getName(e), o
    }, t.caculateArrScore = function (t) {
        if (!t) return 0;
        for (var e = 0, i = CFG_ATTR.LIB, o = 0; o < t.length; o++) {
            var n = t[o],
                a = n.id,
                s = n.val,
                r = i[a].xishu;
            e += s * r / 1e3 >> 0
        }
        return e
    }, t.getName = function (t) {
        switch (t) {
            case 101:
                return "气血";
            case 102:
                return "气血";
            case 103:
                return "攻击";
            case 105:
                return "物防";
            case 106:
                return "法防";
            case 119:
                return "速度";
            case 115:
                return "伤害";
            case 151:
                return "免伤";
            case 152:
                return "生命百分比";
            case 153:
                return "攻击百分比";
            case 154:
                return "物理防御百分比";
            case 155:
                return "法术防御百分比";
            case 156:
                return "速度百分比";
            default:
                return CFG_ATTR.LIB[t].n
        }
    }, t.getNameHB = function (t) {
        switch (parseInt(t)) {
            case 101:
                return "气       血";
            case 102:
                return "气       血";
            case 103:
                return "攻       击";
            case 105:
                return "物理防御";
            case 106:
                return "法术防御";
            case 107:
                return "暴       击";
            case 109:
                return "抗       暴";
            case 119:
                return "速       度"
        }
    }, t.checkEnough = function (t, e, i) {
        for (var o = Util.strToIntArr(t), n = GameGlobal.modelBag, a = GameGlobal.modelRole.voMine, s = !0, r = 0; r < o.length; r++) {
            var l = o[r],
                h = l[0],
                c = l[1],
                p = l[2],
                u = 0;
            switch (h) {
                case 1:
                    u = n.getItemCount(c);
                    break;
                case 2:
                    u = n.getEquipCount(c);
                    break;
                case 31:
                    c = 31, u = a.yinliang;
                    break;
                case 32:
                    c = 32, u = a.bYuanbao;
                    break;
                case 33:
                    c = 33, u = a.yuanbao;
                    break;
                case 36:
                    c = 36, u = a.xiayi;
                    break;
                case 38:
                    c = 38, u = VoMember.mineGX;
                    break;
                case 1001:
                    c = 1001, u = VoXDDZ.getInst().mineJiFen
            }
            if (p > u) {
                e && ViewText.text(CFG_ATTR.LIB[h].n + "不足"), i && (3 == h ? platform.openRecharge() : GameGlobal.layerMgr.open(UIConst.CAILIAOGET, c)), s = !1;
                break
            }
        }
        return s
    }, t.tempArr = [], t
}();
__reflect(VoAttribute.prototype, "VoAttribute");
var VStringTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "StringTip", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.lbText.multiline = !0, this.lbText.lineSpacing = 5, this.addCloseListen(this)
    }, e.prototype.onOpen = function (t) {
        this.lbText.textFlow = HtmlUtil.parse(t)
    }, e
}(BaseEUIView);
__reflect(VStringTip.prototype, "VStringTip");
var attr_115 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "q", "srt", "key", "n", "fn", "nn", "sb", "src", "xishu", "ICON", "des"]
    }, t
}();
__reflect(attr_115.prototype, "attr_115"), window.attr_115 = attr_115;
var bagkuozhan_104 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["n", "p"]
    }, t
}();
__reflect(bagkuozhan_104.prototype, "bagkuozhan_104"), window.bagkuozhan_104 = bagkuozhan_104;
var baoshi_103 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bianhao", "bw", "level", "xiaohao", "shuxing", "stone", "cpower"]
    }, t
}();
__reflect(baoshi_103.prototype, "baoshi_103"), window.baoshi_103 = baoshi_103;
var battleType_118 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "name", "maxRound", "ee", "bg", "rtText", "sl", "skip", "skip2", "skip3"]
    }, t
}();
__reflect(battleType_118.prototype, "battleType_118"), window.battleType_118 = battleType_118;
var bsdashi_133 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["dj", "level", "bsshuxing"]
    }, t
}();
__reflect(bsdashi_133.prototype, "bsdashi_133"), window.bsdashi_133 = bsdashi_133;
var buff_102 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "mingcheng", "miaoshu", "leixing", "leibie", "chuxianshunxu", "xiaoguo", "zengyijianyi", "chixushijian", "chixuleixing", "BUFFjieshu", "tupian", "text", "effv", "rflag", "daojuID", "xianshi", "BUFFtuceng", "ext"]
    }, t
}();
__reflect(buff_102.prototype, "buff_102"), window.buff_102 = buff_102;
var buff_891 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bh", "xh", "cxsj", "dj", "lx", "sx", "ms", "zcdj"]
    }, t
}();
__reflect(buff_891.prototype, "buff_891"), window.buff_891 = buff_891;
var cailiaofuben_137 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bianhao", "name", "px", "openlv", "num", "jl", "ewjl"]
    }, t
}();
__reflect(cailiaofuben_137.prototype, "cailiaofuben_137"), window.cailiaofuben_137 = cailiaofuben_137;
var cailiaohuoqu = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "txt", "ui", "act", "sysid", "ope"]
    }, t
}();
__reflect(cailiaohuoqu.prototype, "cailiaohuoqu"), window.cailiaohuoqu = cailiaohuoqu;
var CampMatch_514 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "dateLeast", "dateMost"]
    }, t
}();
__reflect(CampMatch_514.prototype, "CampMatch_514"), window.CampMatch_514 = CampMatch_514;
var canshu_143 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "key", "qd"]
    }, t
}();
__reflect(canshu_143.prototype, "canshu_143"), window.canshu_143 = canshu_143;
var chenghaoxitong_250 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "icon", "name", "t", "attr", "des", "item", "eff", "src", "qd"]
    }, t
}();
__reflect(chenghaoxitong_250.prototype, "chenghaoxitong_250"), window.chenghaoxitong_250 = chenghaoxitong_250;
var chengjiulv_144 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "cj", "jl", "wb", "ico1", "ico2"]
    }, t
}();
__reflect(chengjiulv_144.prototype, "chengjiulv_144"), window.chengjiulv_144 = chengjiulv_144;
var chengzhangjijin_304 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "level", "jl"]
    }, t
}();
__reflect(chengzhangjijin_304.prototype, "chengzhangjijin_304"), window.chengzhangjijin_304 = chengzhangjijin_304;
var chibangpeiyangbiao_214 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "js", "jy", "xiaohao", "sx", "jjsx", "mx", "mc", "zdl", "jnnan", "jnnv"]
    }, t
}();
__reflect(chibangpeiyangbiao_214.prototype, "chibangpeiyangbiao_214"), window.chibangpeiyangbiao_214 = chibangpeiyangbiao_214;
var chibangpifubiao_215 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "dj", "ly", "sx"]
    }, t
}();
__reflect(chibangpifubiao_215.prototype, "chibangpifubiao_215"), window.chibangpifubiao_215 = chibangpifubiao_215;
var chongwu_122 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "src", "nextid", "jnk", "classtype", "p", "t", "v", "q", "ys", "d", "nlv", "level", "item", "item2", "xsitem", "inq", "ind", "hpql", "hpqu", "attql", "attqu", "phydql", "phydqu", "magdql", "magdqu", "spedql", "spedqu", "grovdql", "grovdqu", "wz", "pgskill", "zdgl", "bdjn", "icon", "m", "cha", "tj", "tjs", "ny"]
    }, t
}();
__reflect(chongwu_122.prototype, "chongwu_122"), window.chongwu_122 = chongwu_122;
var chongwupos_123 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["pos", "petId", "upgrade"]
    }, t
}();
__reflect(chongwupos_123.prototype, "chongwupos_123"), window.chongwupos_123 = chongwupos_123;
var chuangtianguan_138 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bianhao", "jl", "words", "mx"]
    }, t
}();
__reflect(chuangtianguan_138.prototype, "chuangtianguan_138"), window.chuangtianguan_138 = chuangtianguan_138;
var chushishuxing_218 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bh", "sx"]
    }, t
}();
__reflect(chushishuxing_218.prototype, "chushishuxing_218"), window.chushishuxing_218 = chushishuxing_218;
var cj_140 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "rw", "px", "ms", "olv", "type", "pa", "cjdj", "par", "cjd", "cjjl", "cjbyjl", "lj", "t", "oper"]
    }, t
}();
__reflect(cj_140.prototype, "cj_140"), window.cj_140 = cj_140;
var cjmrhuoyue_169 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "exp", "jl"]
    }, t
}();
__reflect(cjmrhuoyue_169.prototype, "cjmrhuoyue_169"), window.cjmrhuoyue_169 = cjmrhuoyue_169;
var commonactivities_150 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "describe", "modMale", "modFemale"]
    }, t
}();
__reflect(commonactivities_150.prototype, "commonactivities_150"), window.commonactivities_150 = commonactivities_150;
var Cumulative_120 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "yb", "jl"]
    }, t
}();
__reflect(Cumulative_120.prototype, "Cumulative_120"), window.Cumulative_120 = Cumulative_120;
var cyjl_817 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "xhdj", "jl", "dhcs"]
    }, t
}();
__reflect(cyjl_817.prototype, "cyjl_817"), window.cyjl_817 = cyjl_817;
var czduihuan_105 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["xuhao", "toolData", "number", "dayxg", "fxg", "tongguan"]
    }, t
}();
__reflect(czduihuan_105.prototype, "czduihuan_105"), window.czduihuan_105 = czduihuan_105;
var czfenjie_117 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "name", "level", "number"]
    }, t
}();
__reflect(czfenjie_117.prototype, "czfenjie_117"), window.czfenjie_117 = czfenjie_117;
var czjiangli_507 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "zw", "zljl", "zwjl", "zhjl", "zs", "chid"]
    }, t
}();
__reflect(czjiangli_507.prototype, "czjiangli_507"), window.czjiangli_507 = czjiangli_507;
var cztzjiangli_326 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "mc", "jl90", "jl100", "jl110", "jl120", "jl130", "jl140", "jl150", "jl160", "jl170", "jl180", "jl190"]
    }, t
}();
__reflect(cztzjiangli_326.prototype, "cztzjiangli_326"), window.cztzjiangli_326 = cztzjiangli_326;
var cztzjiangli_507 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "cs", "zhjl"]
    }, t
}();
__reflect(cztzjiangli_507.prototype, "cztzjiangli_507"), window.cztzjiangli_507 = cztzjiangli_507;
var czzdguaiwu_507 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "czzl", "czmx", "qlzl", "qlmx", "zqzl", "zqmx", "bhzl", "bhmx", "xwzl", "xwmx", "slzl", "slmx", "hlzl", "hlmx", "flzl", "flmx", "dlzl", "dlmx"]
    }, t
}();
__reflect(czzdguaiwu_507.prototype, "czzdguaiwu_507"), window.czzdguaiwu_507 = czzdguaiwu_507;
var danbichongzhihuikui_323 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "czed", "cs", "jl"]
    }, t
}();
__reflect(danbichongzhihuikui_323.prototype, "danbichongzhihuikui_323"), window.danbichongzhihuikui_323 = danbichongzhihuikui_323;
var dashi_132 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["dj", "level", "qhshuxing", "jlshuxing"]
    }, t
}();
__reflect(dashi_132.prototype, "dashi_132"), window.dashi_132 = dashi_132;
var dengjilibao_158 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "day", "reward"]
    }, t
}();
__reflect(dengjilibao_158.prototype, "dengjilibao_158"), window.dengjilibao_158 = dengjilibao_158;
var dianjingAward401 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jiangli"]
    }, t
}();
__reflect(dianjingAward401.prototype, "dianjingAward401"), window.dianjingAward401 = dianjingAward401;
var diaoyu_x = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "bw", "gl"]
    }, t
}();
__reflect(diaoyu_x.prototype, "diaoyu_x"), window.diaoyu_x = diaoyu_x;
var drop_149 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id"]
    }, t
}();
__reflect(drop_149.prototype, "drop_149"), window.drop_149 = drop_149;
var duizhanhuodong_101 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "score", "name", "awards", "time"]
    }, t
}();
__reflect(duizhanhuodong_101.prototype, "duizhanhuodong_101"), window.duizhanhuodong_101 = duizhanhuodong_101;
var equip_120 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "lv", "occ", "n", "p", "q", "ico", "attr"]
    }, t
}();
__reflect(equip_120.prototype, "equip_120"), window.equip_120 = equip_120;
var FairySkin_871 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "replace", "name", "need", "attribute", "from", "basic", "level", "skillOne", "skillTwo"]
    }, t
}();
__reflect(FairySkin_871.prototype, "FairySkin_871"), window.FairySkin_871 = FairySkin_871;
var fbew_404 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "fbid", "lv", "att", "sx", "xjlv", "need", "zdl"]
    }, t
}();
__reflect(fbew_404.prototype, "fbew_404"), window.fbew_404 = fbew_404;
var fbjh_401 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "name", "lv", "effId", "ICONId", "need", "att", "from", "zlz", "jh"]
    }, t
}();
__reflect(fbjh_401.prototype, "fbjh_401"), window.fbjh_401 = fbjh_401;
var fbjl_402 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "fbid", "duixiang", "lv", "need", "per", "zhanli"]
    }, t
}();
__reflect(fbjl_402.prototype, "fbjl_402"), window.fbjl_402 = fbjl_402;
var fengmolu_141 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bianhao", "stjl", "ewjl", "sdjl", "mx", "gb"]
    }, t
}();
__reflect(fengmolu_141.prototype, "fengmolu_141"), window.fengmolu_141 = fengmolu_141;
var fengmoluxh_333 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["cs", "xh"]
    }, t
}();
__reflect(fengmoluxh_333.prototype, "fengmoluxh_333"), window.fengmoluxh_333 = fengmoluxh_333;
var fRank_771 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "rank", "reward", "des"]
    }, t
}();
__reflect(fRank_771.prototype, "fRank_771"), window.fRank_771 = fRank_771;
var fuwenboss_318 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "kcds", "gwmx", "zsjl"]
    }, t
}();
__reflect(fuwenboss_318.prototype, "fuwenboss_318"), window.fuwenboss_318 = fuwenboss_318;
var fuwenfujiashuxing_611 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "sx", "ysxs", "xx"]
    }, t
}();
__reflect(fuwenfujiashuxing_611.prototype, "fuwenfujiashuxing_611"), window.fuwenfujiashuxing_611 = fuwenfujiashuxing_611;
var fuwenjichushuxing_610 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "xj", "type", "cdbw", "ts", "n", "wbbs", "wb", "ico", "tx", "tsjin"]
    }, t
}();
__reflect(fuwenjichushuxing_610.prototype, "fuwenjichushuxing_610"), window.fuwenjichushuxing_610 = fuwenjichushuxing_610;
var fuwenjikaifanglv_616 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["fwkid", "kflv"]
    }, t
}();
__reflect(fuwenjikaifanglv_616.prototype, "fuwenjikaifanglv_616"), window.fuwenjikaifanglv_616 = fuwenjikaifanglv_616;
var fuwenteshushuxing_612 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "sxxs"]
    }, t
}();
__reflect(fuwenteshushuxing_612.prototype, "fuwenteshushuxing_612"), window.fuwenteshushuxing_612 = fuwenteshushuxing_612;
var fWorld_770 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "number", "next", "monster", "reward", "buff", "card"]
    }, t
}();
__reflect(fWorld_770.prototype, "fWorld_770"), window.fWorld_770 = fWorld_770;
var fWorldbuff_772 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "number", "attribute", "type", "reward", "zcdj", "icon", "buff"]
    }, t
}();
__reflect(fWorldbuff_772.prototype, "fWorldbuff_772"), window.fWorldbuff_772 = fWorldbuff_772;
var fwzhuanpanjl_321 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["xh", "sid", "dj"]
    }, t
}();
__reflect(fwzhuanpanjl_321.prototype, "fwzhuanpanjl_321"), window.fwzhuanpanjl_321 = fwzhuanpanjl_321;
var fwzhuanpanxh_321 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "t", "xh", "xh2", "s", "dzcs", "zk", "xh3"]
    }, t
}();
__reflect(fwzhuanpanxh_321.prototype, "fwzhuanpanxh_321"), window.fwzhuanpanxh_321 = fwzhuanpanxh_321;
var fwzhuanpanzs_321 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jl", "wzbq"]
    }, t
}();
__reflect(fwzhuanpanzs_321.prototype, "fwzhuanpanzs_321"), window.fwzhuanpanzs_321 = fwzhuanpanzs_321;
var gbxs_603 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "content", "type"]
    }, t
}();
__reflect(gbxs_603.prototype, "gbxs_603"), window.gbxs_603 = gbxs_603;
var gerenboss_301 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "l", "sd", "n", "gwmx", "zsjl"]
    }, t
}();
__reflect(gerenboss_301.prototype, "gerenboss_301"), window.gerenboss_301 = gerenboss_301;
var giftBag_840 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "rechargeid", "type", "man", "woman", "reward", "order", "sysID"]
    }, t
}();
__reflect(giftBag_840.prototype, "giftBag_840"), window.giftBag_840 = giftBag_840;
var gqbg_105 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "mrcs", "jy", "jl", "sbxh", "pmjl", "yjjs", "bgsj"]
    }, t
}();
__reflect(gqbg_105.prototype, "gqbg_105"), window.gqbg_105 = gqbg_105;
var gqbz_111 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "qs", "sx", "rw", "zdjl", "kqxcjl", "bzjl", "kxxh"]
    }, t
}();
__reflect(gqbz_111.prototype, "gqbz_111"), window.gqbz_111 = gqbz_111;
var gqczxl_110 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "mrcz", "mrjl", "ts", "ljjl"]
    }, t
}();
__reflect(gqczxl_110.prototype, "gqczxl_110"), window.gqczxl_110 = gqczxl_110;
var gqmysy_106 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "qs", "hrksl", "sp", "xh", "qmd", "xzgm"]
    }, t
}();
__reflect(gqmysy_106.prototype, "gqmysy_106"), window.gqmysy_106 = gqmysy_106;
var gqqd_103 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["day", "reward"]
    }, t
}();
__reflect(gqqd_103.prototype, "gqqd_103"), window.gqqd_103 = gqqd_103;
var gqyykpm_101 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "mc", "pmjl", "qs"]
    }, t
}();
__reflect(gqyykpm_101.prototype, "gqyykpm_101"), window.gqyykpm_101 = gqyykpm_101;
var gqzh_104 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "xh", "pycs", "pycd", "jf"]
    }, t
}();
__reflect(gqzh_104.prototype, "gqzh_104"), window.gqzh_104 = gqzh_104;
var gqzhjf_102 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jfqj", "pmjl"]
    }, t
}();
__reflect(gqzhjf_102.prototype, "gqzhjf_102"), window.gqzhjf_102 = gqzhjf_102;
var guangbo_601 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "systemid", "leixing", "show", "content", "type", "key", "qudaoid"]
    }, t
}();
__reflect(guangbo_601.prototype, "guangbo_601"), window.guangbo_601 = guangbo_601;
var guanghuangpifubiao_320 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "dj", "ly", "sx"]
    }, t
}();
__reflect(guanghuangpifubiao_320.prototype, "guanghuangpifubiao_320"), window.guanghuangpifubiao_320 = guanghuangpifubiao_320;
var guanghuanpeiyangbiao_319 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "js", "jy", "xiaohao", "sx", "jjsx", "mx", "mc", "zdl", "jnnan", "jnnv"]
    }, t
}();
__reflect(guanghuanpeiyangbiao_319.prototype, "guanghuanpeiyangbiao_319"), window.guanghuanpeiyangbiao_319 = guanghuanpeiyangbiao_319;
var guanqia119 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "m", "en", "bb"]
    }, t
}();
__reflect(guanqia119.prototype, "guanqia119"), window.guanqia119 = guanqia119;
var guanqiaChapter119 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n"]
    }, t
}();
__reflect(guanqiaChapter119.prototype, "guanqiaChapter119"), window.guanqiaChapter119 = guanqiaChapter119;
var gudinghuodong_101 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "score", "name", "awards", "time"]
    }, t
}();
__reflect(gudinghuodong_101.prototype, "gudinghuodong_101"), window.gudinghuodong_101 = gudinghuodong_101;
var haoyoujineng_779 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jntb", "hysl", "jnxg", "gdz", "gdz2", "bfb", "zqmd"]
    }, t
}();
__reflect(haoyoujineng_779.prototype, "haoyoujineng_779"), window.haoyoujineng_779 = haoyoujineng_779;
var hbzfjihuo_111 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "item", "icon"]
    }, t
}();
__reflect(hbzfjihuo_111.prototype, "hbzfjihuo_111"), window.hbzfjihuo_111 = hbzfjihuo_111;
var hbzhuangbei_110 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "l", "fattr", "minat", "maxat", "sjxh", "xlxh", "sdxlxh", "icon"]
    }, t
}();
__reflect(hbzhuangbei_110.prototype, "hbzhuangbei_110"), window.hbzhuangbei_110 = hbzhuangbei_110;
var hdico_116 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "ui", "eff", "st", "lv", "ico", "s", "ope"]
    }, t
}();
__reflect(hdico_116.prototype, "hdico_116"), window.hdico_116 = hdico_116;
var hecheng_931 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "type", "tname", "xdj", "name", "cl"]
    }, t
}();
__reflect(hecheng_931.prototype, "hecheng_931"), window.hecheng_931 = hecheng_931;
var hefubuchang_799 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "kftsce", "hfjl"]
    }, t
}();
__reflect(hefubuchang_799.prototype, "hefubuchang_799"), window.hefubuchang_799 = hefubuchang_799;
var hfcbyj_481 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "qj", "nanjl", "nvjl"]
    }, t
}();
__reflect(hfcbyj_481.prototype, "hfcbyj_481"), window.hfcbyj_481 = hfcbyj_481;
var hfcbyjmap_481 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "idx"]
    }, t
}();
__reflect(hfcbyjmap_481.prototype, "hfcbyjmap_481"), window.hfcbyjmap_481 = hfcbyjmap_481;
var hfdl_486 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["day", "reward"]
    }, t
}();
__reflect(hfdl_486.prototype, "hfdl_486"), window.hfdl_486 = hfdl_486;
var hfjjhl_482 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "type", "tj", "tjxs", "jl"]
    }, t
}();
__reflect(hfjjhl_482.prototype, "hfjjhl_482"), window.hfjjhl_482 = hfjjhl_482;
var hfjjhlmap_482 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "idx"]
    }, t
}();
__reflect(hfjjhlmap_482.prototype, "hfjjhlmap_482"), window.hfjjhlmap_482 = hfjjhlmap_482;
var hfljcz_484 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "czed", "jl"]
    }, t
}();
__reflect(hfljcz_484.prototype, "hfljcz_484"), window.hfljcz_484 = hfljcz_484;
var hftz_480 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["day", "jl"]
    }, t
}();
__reflect(hftz_480.prototype, "hftz_480"), window.hftz_480 = hftz_480;
var hfzksd_485 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "tjxs", "xj", "yj", "zk", "xg"]
    }, t
}();
__reflect(hfzksd_485.prototype, "hfzksd_485"), window.hfzksd_485 = hfzksd_485;
var hongzhuangtz_336 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "mc", "gslv", "tzwz", "sx1", "sx2", "sx3"]
    }, t
}();
__reflect(hongzhuangtz_336.prototype, "hongzhuangtz_336"), window.hongzhuangtz_336 = hongzhuangtz_336;
var huoban_108 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "px", "t", "pz", "level", "con", "battr", "attav", "jnzs", "jtjn", "icon", "m", "cha", "tj", "i", "ny", "skin"]
    }, t
}();
__reflect(huoban_108.prototype, "huoban_108"), window.huoban_108 = huoban_108;
var huobansuipian_164 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "xsid", "zm", "ssid"]
    }, t
}();
__reflect(huobansuipian_164.prototype, "huobansuipian_164"), window.huobansuipian_164 = huobansuipian_164;
var huobanzf_109 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "l", "zfttr", "exp", "icon", "item"]
    }, t
}();
__reflect(huobanzf_109.prototype, "huobanzf_109"), window.huobanzf_109 = huobanzf_109;
var huodongc_116 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "ui", "opStr", "arg", "ope", "txt", "tbg", "t", "px"]
    }, t
}();
__reflect(huodongc_116.prototype, "huodongc_116"), window.huodongc_116 = huodongc_116;
var hydt_876 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "xyfs", "xydj", "ms1", "xyjljz", "bdjl2", "gmxh", "zfs", "xgmfs", "bd"]
    }, t
}();
__reflect(hydt_876.prototype, "hydt_876"), window.hydt_876 = hydt_876;
var hzhecheng_506 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "lv", "occ", "cl", "sx"]
    }, t
}();
__reflect(hzhecheng_506.prototype, "hzhecheng_506"), window.hzhecheng_506 = hzhecheng_506;
var item_106 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "icon", "level", "name", "quality", "number", "type", "src", "canshu", "ope", "miaoshu"]
    }, t
}();
__reflect(item_106.prototype, "item_106"), window.item_106 = item_106;
var jiaoshijiejiangli_910 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jl"]
    }, t
}();
__reflect(jiaoshijiejiangli_910.prototype, "jiaoshijiejiangli_910"), window.jiaoshijiejiangli_910 = jiaoshijiejiangli_910;
var jiaoshijiezengli_912 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "mc", "ms2", "lbnr", "lbnr2", "cs", "xj"]
    }, t
}();
__reflect(jiaoshijiezengli_912.prototype, "jiaoshijiezengli_912"), window.jiaoshijiezengli_912 = jiaoshijiezengli_912;
var jichushuxingqianghua_614 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "xj", "level", "sxexp", "sxexp2", "smsx", "gjsx", "wfsx", "ffsx"]
    }, t
}();
__reflect(jichushuxingqianghua_614.prototype, "jichushuxingqianghua_614"), window.jichushuxingqianghua_614 = jichushuxingqianghua_614;
var jieriboss_924 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "cssj", "czsj", "gwmx", "tzdl", "zsjl", "one", "two", "three", "cyjl"]
    }, t
}();
__reflect(jieriboss_924.prototype, "jieriboss_924"), window.jieriboss_924 = jieriboss_924;
var jinengqianghua_509 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["lv", "xh"]
    }, t
}();
__reflect(jinengqianghua_509.prototype, "jinengqianghua_509"), window.jinengqianghua_509 = jinengqianghua_509;
var jinglian_113 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bianhao", "bw", "level", "xiaohao", "shuxing", "cpower"]
    }, t
}();
__reflect(jinglian_113.prototype, "jinglian_113"), window.jinglian_113 = jinglian_113;
var jingyandafangsong_330 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["l", "exp"]
    }, t
}();
__reflect(jingyandafangsong_330.prototype, "jingyandafangsong_330"), window.jingyandafangsong_330 = jingyandafangsong_330;
var jingyanzhaohui_125 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["level"]
    }, t
}();
__reflect(jingyanzhaohui_125.prototype, "jingyanzhaohui_125"), window.jingyanzhaohui_125 = jingyanzhaohui_125;
var jiqiren_134 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "jqr", "mx", "bq", "ce"]
    }, t
}();
__reflect(jiqiren_134.prototype, "jiqiren_134"), window.jiqiren_134 = jiqiren_134;
var jjcjiangli_135 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "pm", "mrjl", "mzjl", "mcjl"]
    }, t
}();
__reflect(jjcjiangli_135.prototype, "jjcjiangli_135"), window.jjcjiangli_135 = jjcjiangli_135;
var jjshangdian_136 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "mrjl", "ryz", "dayxg", "fxg", "tiaojian"]
    }, t
}();
__reflect(jjshangdian_136.prototype, "jjshangdian_136"), window.jjshangdian_136 = jjshangdian_136;
var jrqd_910 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jl"]
    }, t
}();
__reflect(jrqd_910.prototype, "jrqd_910"), window.jrqd_910 = jrqd_910;
var jsjky_911 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "lv", "monster1", "monster2", "monster3"]
    }, t
}();
__reflect(jsjky_911.prototype, "jsjky_911"), window.jsjky_911 = jsjky_911;
var jsjnj_914 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bh", "xh", "dd", "bz"]
    }, t
}();
__reflect(jsjnj_914.prototype, "jsjnj_914"), window.jsjnj_914 = jsjnj_914;
var jsjqf_913 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "qfz", "jl"]
    }, t
}();
__reflect(jsjqf_913.prototype, "jsjqf_913"), window.jsjqf_913 = jsjqf_913;
var jsjssfb_911 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "lv", "monster1"]
    }, t
}();
__reflect(jsjssfb_911.prototype, "jsjssfb_911"), window.jsjssfb_911 = jsjssfb_911;
var kaifu_306 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "idx", "mz"]
    }, t
}();
__reflect(kaifu_306.prototype, "kaifu_306"), window.kaifu_306 = kaifu_306;
var kaifuchongzhi_315 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "czed", "jl"]
    }, t
}();
__reflect(kaifuchongzhi_315.prototype, "kaifuchongzhi_315"), window.kaifuchongzhi_315 = kaifuchongzhi_315;
var kaifujinjie_312 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "type", "tj", "p", "tjxs", "jl"]
    }, t
}();
__reflect(kaifujinjie_312.prototype, "kaifujinjie_312"), window.kaifujinjie_312 = kaifujinjie_312;
var kaifuphjl_307 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "qj", "nanjl", "nvjl"]
    }, t
}();
__reflect(kaifuphjl_307.prototype, "kaifuphjl_307"), window.kaifuphjl_307 = kaifuphjl_307;
var kaifuzhekou_314 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "tjxs", "xj", "yj", "zk", "xg"]
    }, t
}();
__reflect(kaifuzhekou_314.prototype, "kaifuzhekou_314"), window.kaifuzhekou_314 = kaifuzhekou_314;
var kaifuzhuti_308 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "idx"]
    }, t
}();
__reflect(kaifuzhuti_308.prototype, "kaifuzhuti_308"), window.kaifuzhuti_308 = kaifuzhuti_308;
var kaifuzhuxian_311 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "tg", "tjxs", "jl"]
    }, t
}();
__reflect(kaifuzhuxian_311.prototype, "kaifuzhuxian_311"), window.kaifuzhuxian_311 = kaifuzhuxian_311;
var kaifuztjl_309 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "type", "tj", "tjxs", "jl"]
    }, t
}();
__reflect(kaifuztjl_309.prototype, "kaifuztjl_309"), window.kaifuztjl_309 = kaifuztjl_309;
var kfttpz_511 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "minimum", "match", "repeatPeople", "time", "reward", "loseReward"]
    }, t
}();
__reflect(kfttpz_511.prototype, "kfttpz_511"), window.kfttpz_511 = kfttpz_511;
var kjmrlb_358 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "type", "xq", "mc", "jl"]
    }, t
}();
__reflect(kjmrlb_358.prototype, "kjmrlb_358"), window.kjmrlb_358 = kjmrlb_358;
var leijihudp_317 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "leijicishu", "jl"]
    }, t
}();
__reflect(leijihudp_317.prototype, "leijihudp_317"), window.leijihudp_317 = leijihudp_317;
var leijiqiandao_163 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "count", "reward"]
    }, t
}();
__reflect(leijiqiandao_163.prototype, "leijiqiandao_163"), window.leijiqiandao_163 = leijiqiandao_163;
var leijixiaofei_317 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "yb", "jl"]
    }, t
}();
__reflect(leijixiaofei_317.prototype, "leijixiaofei_317"), window.leijixiaofei_317 = leijixiaofei_317;
var lstf_512 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "jn", "pdjn", "jhtj"]
    }, t
}();
__reflect(lstf_512.prototype, "lstf_512"), window.lstf_512 = lstf_512;
var lstfdfj_512 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["itemid", "item", "tfd"]
    }, t
}();
__reflect(lstfdfj_512.prototype, "lstfdfj_512"), window.lstfdfj_512 = lstfdfj_512;
var lstfdhq_512 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["l", "tfd"]
    }, t
}();
__reflect(lstfdhq_512.prototype, "lstfdhq_512"), window.lstfdhq_512 = lstfdhq_512;
var lstfjn_512 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "x", "y", "jstj", "icon", "zd", "ms", "type", "dx", "osz", "parm", "tfd", "jnid", "ddtfd"]
    }, t
}();
__reflect(lstfjn_512.prototype, "lstfjn_512"), window.lstfjn_512 = lstfjn_512;
var map_107 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "name", "olv", "res", "gk", "bgm", "t", "initx", "inity", "sysID"]
    }, t
}();
__reflect(map_107.prototype, "map_107"), window.map_107 = map_107;
var meiridati_606 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["lv", "right", "wrong"]
    }, t
}();
__reflect(meiridati_606.prototype, "meiridati_606"), window.meiridati_606 = meiridati_606;
var meiriqiandao_162 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "day", "reward1", "reward3"]
    }, t
}();
__reflect(meiriqiandao_162.prototype, "meiriqiandao_162"), window.meiriqiandao_162 = meiriqiandao_162;
var menpai_405 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["level", "mpsw", "fubangzhu", "zhanglao", "hufa", "chengyuan", "count"]
    }, t
}();
__reflect(menpai_405.prototype, "menpai_405"), window.menpai_405 = menpai_405;
var mod_308 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "mid", "n", "scale", "ny", "ico"]
    }, t
}();
__reflect(mod_308.prototype, "mod_308"), window.mod_308 = mod_308;
var monster_307 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "n", "mx", "t", "level", "qixue"]
    }, t
}();
__reflect(monster_307.prototype, "monster_307"), window.monster_307 = monster_307;
var mpboss_416 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "l", "boss", "jsjl", "gwmx"]
    }, t
}();
__reflect(mpboss_416.prototype, "mpboss_416"), window.mpboss_416 = mpboss_416;
var mpfuben_408 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["l", "n", "stjl", "tzjl", "jlzs", "gwmx"]
    }, t
}();
__reflect(mpfuben_408.prototype, "mpfuben_408"), window.mpfuben_408 = mpfuben_408;
var mphuoyuedu_413 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["level", "exp", "jl", "attr"]
    }, t
}();
__reflect(mphuoyuedu_413.prototype, "mphuoyuedu_413"), window.mphuoyuedu_413 = mphuoyuedu_413;
var mphuoyuerw_414 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "name", "count", "exp"]
    }, t
}();
__reflect(mphuoyuerw_414.prototype, "mphuoyuerw_414"), window.mphuoyuerw_414 = mphuoyuerw_414;
var mpjiesuanjl_409 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "mzwin", "cywin", "mzfail", "cyfail"]
    }, t
}();
__reflect(mpjiesuanjl_409.prototype, "mpjiesuanjl_409"), window.mpjiesuanjl_409 = mpjiesuanjl_409;
var mpjineng_410 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "gz", "mpsw", "level", "onesx", "xh", "icon"]
    }, t
}();
__reflect(mpjineng_410.prototype, "mpjineng_410"), window.mpjineng_410 = mpjineng_410;
var mpmrhuoyue_415 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "exp", "jl"]
    }, t
}();
__reflect(mpmrhuoyue_415.prototype, "mpmrhuoyue_415"), window.mpmrhuoyue_415 = mpmrhuoyue_415;
var mppaijianzhu_409 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "zd", "mpjl", "rjd", "ljd", "xjd"]
    }, t
}();
__reflect(mppaijianzhu_409.prototype, "mppaijianzhu_409"), window.mppaijianzhu_409 = mppaijianzhu_409;
var mppaimingjl_409 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "pm", "grjl", "mpjl"]
    }, t
}();
__reflect(mppaimingjl_409.prototype, "mppaimingjl_409"), window.mppaimingjl_409 = mppaimingjl_409;
var mpshangdian_412 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "wpid", "xh", "px", "dayxg", "fxg", "tiaojian"]
    }, t
}();
__reflect(mpshangdian_412.prototype, "mpshangdian_412"), window.mpshangdian_412 = mpshangdian_412;
var mpsx_406 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["q", "name", "mpsw", "mpgx", "xhz", "xh"]
    }, t
}();
__reflect(mpsx_406.prototype, "mpsx_406"), window.mpsx_406 = mpsx_406;
var mpsxjiangli_407 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "xhz", "jl"]
    }, t
}();
__reflect(mpsxjiangli_407.prototype, "mpsxjiangli_407"), window.mpsxjiangli_407 = mpsxjiangli_407;
var mrdtpaiming_607 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "pm", "jl"]
    }, t
}();
__reflect(mrdtpaiming_607.prototype, "mrdtpaiming_607"), window.mrdtpaiming_607 = mrdtpaiming_607;
var mrdttiku_605 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "title", "one", "two", "three", "four", "right"]
    }, t
}();
__reflect(mrdttiku_605.prototype, "mrdttiku_605"), window.mrdttiku_605 = mrdttiku_605;
var mrhl_322 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bh", "lc", "zt", "jl", "zs", "zl", "mod", "txt"]
    }, t
}();
__reflect(mrhl_322.prototype, "mrhl_322"), window.mrhl_322 = mrhl_322;
var mrsc_302 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bh", "lc", "jl"]
    }, t
}();
__reflect(mrsc_302.prototype, "mrsc_302"), window.mrsc_302 = mrsc_302;
var mysydj_148 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "qs", "reward", "consume"]
    }, t
}();
__reflect(mysydj_148.prototype, "mysydj_148"), window.mysydj_148 = mysydj_148;
var nianBoss_126 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "qs", "cs", "gwmx", "tzdl", "zsjl", "ewjl"]
    }, t
}();
__reflect(nianBoss_126.prototype, "nianBoss_126"), window.nianBoss_126 = nianBoss_126;
var petlv_130 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["level", "exp", "arrt"]
    }, t
}();
__reflect(petlv_130.prototype, "petlv_130"), window.petlv_130 = petlv_130;
var petskill_131 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["pos", "asp", "asp2", "asp3", "asp4", "oplv", "classtype1", "classtype2", "lockingmaximum"]
    }, t
}();
__reflect(petskill_131.prototype, "petskill_131"), window.petskill_131 = petskill_131;
var phchongbai_160 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bh", "sy"]
    }, t
}();
__reflect(phchongbai_160.prototype, "phchongbai_160"), window.phchongbai_160 = phchongbai_160;
var pmjl_808 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "highestRank", "lowestRank", "reward", "description"]
    }, t
}();
__reflect(pmjl_808.prototype, "pmjl_808"), window.pmjl_808 = pmjl_808;
var qianghua_114 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bianhao", "bw", "level", "xiaohao", "shuxing", "cpower"]
    }, t
}();
__reflect(qianghua_114.prototype, "qianghua_114"), window.qianghua_114 = qianghua_114;
var qiridenglu_159 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["day", "reward"]
    }, t
}();
__reflect(qiridenglu_159.prototype, "qiridenglu_159"), window.qiridenglu_159 = qiridenglu_159;
var qixihaorenkapaiming_798 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "pmjl"]
    }, t
}();
__reflect(qixihaorenkapaiming_798.prototype, "qixihaorenkapaiming_798"), window.qixihaorenkapaiming_798 = qixihaorenkapaiming_798;
var qmdjl_777 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "cj", "ljqmd", "jl"]
    }, t
}();
__reflect(qmdjl_777.prototype, "qmdjl_777"), window.qmdjl_777 = qmdjl_777;
var qmdrwjl_778 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "rw", "type", "rwcs", "qmd"]
    }, t
}();
__reflect(qmdrwjl_778.prototype, "qmdrwjl_778"), window.qmdrwjl_778 = qmdrwjl_778;
var qNpc = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "res", "t", "far", "name", "defTxt", "map", "mlist"]
    }, t
}();
__reflect(qNpc.prototype, "qNpc"), window.qNpc = qNpc;
var quanminboss_302 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "l", "n", "time", "gwmx", "zsjl"]
    }, t
}();
__reflect(quanminboss_302.prototype, "quanminboss_302"), window.quanminboss_302 = quanminboss_302;
var quanminchongji_310 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "qj", "jl"]
    }, t
}();
__reflect(quanminchongji_310.prototype, "quanminchongji_310"), window.quanminchongji_310 = quanminchongji_310;
var qujiangailv_321 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "zzfg", "zzgl", "czfg", "czgl"]
    }, t
}();
__reflect(qujiangailv_321.prototype, "qujiangailv_321"), window.qujiangailv_321 = qujiangailv_321;
var qxyn_718 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "hrksl", "sp", "xh", "qmd", "xzgm"]
    }, t
}();
__reflect(qxyn_718.prototype, "qxyn_718"), window.qxyn_718 = qxyn_718;
var rclljiangli_350 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["level", "ys_jl", "ys_jl2", "zd_jl", "mr_jl"]
    }, t
}();
__reflect(rclljiangli_350.prototype, "rclljiangli_350"), window.rclljiangli_350 = rclljiangli_350;
var rcyaoshou_351 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["level", "boss", "xg", "jsjl"]
    }, t
}();
__reflect(rcyaoshou_351.prototype, "rcyaoshou_351"), window.rcyaoshou_351 = rcyaoshou_351;
var recharge_200 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "ui", "ico", "name", "des", "money", "yb", "cp", "scsb", "sysId", "px"]
    }, t
}();
__reflect(recharge_200.prototype, "recharge_200"), window.recharge_200 = recharge_200;
var renwu_140 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "rw", "ms", "olv", "type", "par", "xj", "hy", "jl", "lj", "tj", "ys", "oper"]
    }, t
}();
__reflect(renwu_140.prototype, "renwu_140"), window.renwu_140 = renwu_140;
var returnChest_100 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "exp", "jl1", "jl2"]
    }, t
}();
__reflect(returnChest_100.prototype, "returnChest_100"), window.returnChest_100 = returnChest_100;
var returnPush_100 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "title", "channel", "text", "link", "describe", "text1", "text2", "text3", "text4", "pic"]
    }, t
}();
__reflect(returnPush_100.prototype, "returnPush_100"), window.returnPush_100 = returnPush_100;
var returnRebate_102 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "recharge", "rebate"]
    }, t
}();
__reflect(returnRebate_102.prototype, "returnRebate_102"), window.returnRebate_102 = returnRebate_102;
var returnTask_103 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "rw", "sum", "par", "hg", "oper", "order", "sysId"]
    }, t
}();
__reflect(returnTask_103.prototype, "returnTask_103"), window.returnTask_103 = returnTask_103;
var ronglian_121 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["xuhao", "level", "type", "q", "sold", "rl"]
    }, t
}();
__reflect(ronglian_121.prototype, "ronglian_121"), window.ronglian_121 = ronglian_121;
var scfx_322 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "jl"]
    }, t
}();
__reflect(scfx_322.prototype, "scfx_322"), window.scfx_322 = scfx_322;
var scwbjl_555 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "px", "czje", "kdyb", "lb", "jzyb", "sysId"]
    }, t
}();
__reflect(scwbjl_555.prototype, "scwbjl_555"), window.scwbjl_555 = scwbjl_555;
var scyl_356 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "jl"]
    }, t
}();
__reflect(scyl_356.prototype, "scyl_356"), window.scyl_356 = scyl_356;
var sdbz_668 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "rw", "zdjl", "bzjl", "kxxh"]
    }, t
}();
__reflect(sdbz_668.prototype, "sdbz_668"), window.sdbz_668 = sdbz_668;
var sdcz_670 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "mrcz", "mrjl", "ts", "ljjl"]
    }, t
}();
__reflect(sdcz_670.prototype, "sdcz_670"), window.sdcz_670 = sdcz_670;
var sdhl_669 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "fbid", "lv", "monster1", "monster2", "monster3"]
    }, t
}();
__reflect(sdhl_669.prototype, "sdhl_669"), window.sdhl_669 = sdhl_669;
var sdjl_667 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jf", "jl"]
    }, t
}();
__reflect(sdjl_667.prototype, "sdjl_667"), window.sdjl_667 = sdjl_667;
var sdry_666 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "rw", "djt", "type", "par", "jf", "jl", "oper"]
    }, t
}();
__reflect(sdry_666.prototype, "sdry_666"), window.sdry_666 = sdry_666;
var shangcheng_150 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "px", "wpid", "xh", "dayxg", "fxg", "glhd", "level"]
    }, t
}();
__reflect(shangcheng_150.prototype, "shangcheng_150"), window.shangcheng_150 = shangcheng_150;
var shenbinpeiyangbiao_212 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "js", "jy", "xiaohao", "sx", "jjsx", "mx", "mc", "mxv", "mcv", "zdl", "jnnan", "jnnv"]
    }, t
}();
__reflect(shenbinpeiyangbiao_212.prototype, "shenbinpeiyangbiao_212"), window.shenbinpeiyangbiao_212 = shenbinpeiyangbiao_212;
var shenbinpifubiao_213 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "mx", "mxv", "n", "dj", "ly", "sx"]
    }, t
}();
__reflect(shenbinpifubiao_213.prototype, "shenbinpifubiao_213"), window.shenbinpifubiao_213 = shenbinpifubiao_213;
var shengxin_165 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bianhao", "xiaohao", "sx", "jtjn", "shuxing", "jn", "hblevel", "jnlevel"]
    }, t
}();
__reflect(shengxin_165.prototype, "shengxin_165"), window.shengxin_165 = shengxin_165;
var shengxing_171 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["level", "sxgl", "xhyb", "xiaohao", "shuxing", "shuxing2", "shuxing3", "shuxing4"]
    }, t
}();
__reflect(shengxing_171.prototype, "shengxing_171"), window.shengxing_171 = shengxing_171;
var shenshizhuanhua_615 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "zm"]
    }, t
}();
__reflect(shenshizhuanhua_615.prototype, "shenshizhuanhua_615"), window.shenshizhuanhua_615 = shenshizhuanhua_615;
var shizhuangxitong_216 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "szn", "szv", "name", "attr", "t", "item", "des", "eff"]
    }, t
}();
__reflect(shizhuangxitong_216.prototype, "shizhuangxitong_216"), window.shizhuangxitong_216 = shizhuangxitong_216;
var shouchongjiangli_301 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "money", "key", "zl", "jzyb", "mjl", "wjl", "weizhi"]
    }, t
}();
__reflect(shouchongjiangli_301.prototype, "shouchongjiangli_301"), window.shouchongjiangli_301 = shouchongjiangli_301;
var shouchongtuangou_313 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "p", "tj", "tjxs", "jl"]
    }, t
}();
__reflect(shouchongtuangou_313.prototype, "shouchongtuangou_313"), window.shouchongtuangou_313 = shouchongtuangou_313;
var shoulingpeiyangbiao_510 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "js", "jy", "xiaohao", "sx", "jjsx", "mx", "mc", "zdl"]
    }, t
}();
__reflect(shoulingpeiyangbiao_510.prototype, "shoulingpeiyangbiao_510"), window.shoulingpeiyangbiao_510 = shoulingpeiyangbiao_510;
var shoulingpifubiao_511 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "dj", "ly", "sx"]
    }, t
}();
__reflect(shoulingpifubiao_511.prototype, "shoulingpifubiao_511"), window.shoulingpifubiao_511 = shoulingpifubiao_511;
var shuxing_112 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["level", "exp", "arrt"]
    }, t
}();
__reflect(shuxing_112.prototype, "shuxing_112"), window.shuxing_112 = shuxing_112;
var skill_111 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "maxlv", "n", "g", "des", "lid", "roletype", "roleocc", "efftype", "tartype", "functype", "tar", "times", "attr", "sktype", "attp", "attpg", "bp", "pg", "buff", "rlv", "str", "strg", "exp", "expp", "pos", "ico", "bico", "style", "scfg", "eff0", "eff1", "en", "heff", "q", "tj"]
    }, t
}();
__reflect(skill_111.prototype, "skill_111"), window.skill_111 = skill_111;
var skillRelate_118 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "ids"]
    }, t
}();
__reflect(skillRelate_118.prototype, "skillRelate_118"), window.skillRelate_118 = skillRelate_118;
var SkinUpgrade_872 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "skinID", "level", "nextId", "addexp", "exp", "attribute", "totalAttribute", "addAttribute", "need", "capability"]
    }, t
}();
__reflect(SkinUpgrade_872.prototype, "SkinUpgrade_872"), window.SkinUpgrade_872 = SkinUpgrade_872;
var slfbkaiqi_170 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "name", "openlv", "tp", "wz", "seday"]
    }, t
}();
__reflect(slfbkaiqi_170.prototype, "slfbkaiqi_170"), window.slfbkaiqi_170 = slfbkaiqi_170;
var smrw_001 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "type", "sz", "mz", "nanjl", "rwid", "vip"]
    }, t
}();
__reflect(smrw_001.prototype, "smrw_001"), window.smrw_001 = smrw_001;
var ssyjrsz_124 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "qs", "cs", "gwmx", "tzdl", "zsjl", "ewjl"]
    }, t
}();
__reflect(ssyjrsz_124.prototype, "ssyjrsz_124"), window.ssyjrsz_124 = ssyjrsz_124;
var ssyljcz_217 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "czed", "ms", "jl"]
    }, t
}();
__reflect(ssyljcz_217.prototype, "ssyljcz_217"), window.ssyljcz_217 = ssyljcz_217;
var ssymrcg_123 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "lv", "monster1", "jl2"]
    }, t
}();
__reflect(ssymrcg_123.prototype, "ssymrcg_123"), window.ssymrcg_123 = ssymrcg_123;
var ssyphjl_126 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "zs", "qj", "jl"]
    }, t
}();
__reflect(ssyphjl_126.prototype, "ssyphjl_126"), window.ssyphjl_126 = ssyphjl_126;
var ssysc_125 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "wpid", "xh", "zkgl"]
    }, t
}();
__reflect(ssysc_125.prototype, "ssysc_125"), window.ssysc_125 = ssysc_125;
var suoyaota_139 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bianhao", "stjl", "ewjl", "sdjl", "words", "mx"]
    }, t
}();
__reflect(suoyaota_139.prototype, "suoyaota_139"), window.suoyaota_139 = suoyaota_139;
var suoyaotaxh_333 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["cs", "xh"]
    }, t
}();
__reflect(suoyaotaxh_333.prototype, "suoyaotaxh_333"), window.suoyaotaxh_333 = suoyaotaxh_333;
var sxdashi_182 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["dj", "level", "sxshuxing"]
    }, t
}();
__reflect(sxdashi_182.prototype, "sxdashi_182"), window.sxdashi_182 = sxdashi_182;
var taozhuanggaizhaoxh_336 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["lv", "jhcl", "gzcl"]
    }, t
}();
__reflect(taozhuanggaizhaoxh_336.prototype, "taozhuanggaizhaoxh_336"), window.taozhuanggaizhaoxh_336 = taozhuanggaizhaoxh_336;
var tdjl_544 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "tj", "tjer", "st", "xz", "cgjl"]
    }, t
}();
__reflect(tdjl_544.prototype, "tdjl_544"), window.tdjl_544 = tdjl_544;
var teshushuxingqianghua_613 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "tssx", "level", "sx"]
    }, t
}();
__reflect(teshushuxingqianghua_613.prototype, "teshushuxingqianghua_613"), window.teshushuxingqianghua_613 = teshushuxingqianghua_613;
var tjxcx_322 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "jl"]
    }, t
}();
__reflect(tjxcx_322.prototype, "tjxcx_322"), window.tjxcx_322 = tjxcx_322;
var touzifanli_305 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["day", "jl"]
    }, t
}();
__reflect(touzifanli_305.prototype, "touzifanli_305"), window.touzifanli_305 = touzifanli_305;
var ttdw_510 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "honour", "number", "sj", "honourNew", "lowest", "highest", "reward", "seasonReward", "show", "nextID"]
    }, t
}();
__reflect(ttdw_510.prototype, "ttdw_510"), window.ttdw_510 = ttdw_510;
var ttfl_610 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "ljczts", "jl"]
    }, t
}();
__reflect(ttfl_610.prototype, "ttfl_610"), window.ttfl_610 = ttfl_610;
var ttfljl_611 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "ljczts", "kljl", "mc", "jlzs", "words", "oper"]
    }, t
}();
__reflect(ttfljl_611.prototype, "ttfljl_611"), window.ttfljl_611 = ttfljl_611;
var ttpmjl_514 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "qj", "reward1"]
    }, t
}();
__reflect(ttpmjl_514.prototype, "ttpmjl_514"), window.ttpmjl_514 = ttpmjl_514;
var tujian_180 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "t", "s", "q", "xjsx", "jh", "jhjc"]
    }, t
}();
__reflect(tujian_180.prototype, "tujian_180"), window.tujian_180 = tujian_180;
var tujiansx_180 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["sxid", "level", "jy", "pysx", "sjattr", "sjbuff", "num", "parm"]
    }, t
}();
__reflect(tujiansx_180.prototype, "tujiansx_180"), window.tujiansx_180 = tujiansx_180;
var updateNotice_899 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "detail"]
    }, t
}();
__reflect(updateNotice_899.prototype, "updateNotice_899"), window.updateNotice_899 = updateNotice_899;
var vip_155 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["vip", "topup", "jl", "gjjs", "syt", "fml", "jjc", "clfb", "bosstz", "bosstg", "fsh", "mpboss", "fwboss", "fscs", "xksd", "bewrite", "bjcs"]
    }, t
}();
__reflect(vip_155.prototype, "vip_155"), window.vip_155 = vip_155;
var VIPBOSS_301 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "l", "n", "cs", "gwmx", "zsjl"]
    }, t
}();
__reflect(VIPBOSS_301.prototype, "VIPBOSS_301"), window.VIPBOSS_301 = VIPBOSS_301;
var vipqiandao_167 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "day", "reward1", "reward2", "reward3", "reward4", "reward5", "reward6", "reward7", "reward8", "reward9", "reward10", "reward11", "reward12", "reward13", "reward14", "reward15"]
    }, t
}();
__reflect(vipqiandao_167.prototype, "vipqiandao_167"), window.vipqiandao_167 = vipqiandao_167;
var viprichanglibao_324 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "viplv", "mc", "jl", "cs", "yj", "xj", "bq"]
    }, t
}();
__reflect(viprichanglibao_324.prototype, "viprichanglibao_324"), window.viprichanglibao_324 = viprichanglibao_324;
var viptq_357 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "viplv", "jl"]
    }, t
}();
__reflect(viptq_357.prototype, "viptq_357"), window.viptq_357 = viptq_357;
var wanfasm_116 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "detail"]
    }, t
}();
__reflect(wanfasm_116.prototype, "wanfasm_116"), window.wanfasm_116 = wanfasm_116;
var wdtdshangdian_504 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["px", "id", "item", "xh", "dayxg", "fxg", "count"]
    }, t
}();
__reflect(wdtdshangdian_504.prototype, "wdtdshangdian_504"), window.wdtdshangdian_504 = wdtdshangdian_504;
var wendingcengji_502 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "l", "n", "gwmx", "fb"]
    }, t
}();
__reflect(wendingcengji_502.prototype, "wendingcengji_502"), window.wendingcengji_502 = wendingcengji_502;
var wendingtiandao_501 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "l", "n", "stjl", "tzjl", "jlzs", "gwmx", "jl", "bx", "bxzs"]
    }, t
}();
__reflect(wendingtiandao_501.prototype, "wendingtiandao_501"), window.wendingtiandao_501 = wendingtiandao_501;
var wybq_518 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jsdj", "ms1", "zl1", "tj1", "ms2", "zl2", "tj2", "ms3", "zl3", "tj3", "ms4", "zl4", "tj4", "ms5", "zl5", "tj5", "ms6", "zl6", "tj6", "ms7", "zl7", "t7", "ms8", "zl8", "tj8", "ms9", "zl9", "tj9", "ms10", "zl10", "tj10", "tjzzl"]
    }, t
}();
__reflect(wybq_518.prototype, "wybq_518"), window.wybq_518 = wybq_518;
var wybqpd_519 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "lx", "min", "max", "pd"]
    }, t
}();
__reflect(wybqpd_519.prototype, "wybqpd_519"), window.wybqpd_519 = wybqpd_519;
var wyzy_517 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "t", "xq", "rk", "lv", "tjzs", "tj", "ope"]
    }, t
}();
__reflect(wyzy_517.prototype, "wyzy_517"), window.wyzy_517 = wyzy_517;
var xddzyz_327 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jd", "lx", "yzxh", "cgjl", "sbjl"]
    }, t
}();
__reflect(xddzyz_327.prototype, "xddzyz_327"), window.xddzyz_327 = xddzyz_327;
var xiandingbiao_988 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "type", "pos", "type_name", "mc", "xdzh", "lx", "tj", "sx", "source"]
    }, t
}();
__reflect(xiandingbiao_988.prototype, "xiandingbiao_988"), window.xiandingbiao_988 = xiandingbiao_988;
var xianjie_147 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "cj", "c", "xj", "sx", "xl", "jl", "dt"]
    }, t
}();
__reflect(xianjie_147.prototype, "xianjie_147"), window.xianjie_147 = xianjie_147;
var xianshifubennvdi_487 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jlzs", "gqwin", "yjsd", "tjzl", "xt"]
    }, t
}();
__reflect(xianshifubennvdi_487.prototype, "xianshifubennvdi_487"), window.xianshifubennvdi_487 = xianshifubennvdi_487;
var xianshifubenshaohao_488 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jlzs", "gqwin", "yjsd", "tjzl", "xt"]
    }, t
}();
__reflect(xianshifubenshaohao_488.prototype, "xianshifubenshaohao_488"), window.xianshifubenshaohao_488 = xianshifubenshaohao_488;
var xianshinvdi_489 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["Sdcs", "Sdxh"]
    }, t
}();
__reflect(xianshinvdi_489.prototype, "xianshinvdi_489"), window.xianshinvdi_489 = xianshinvdi_489;
var xianshishaohao_490 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["Sdcs", "Sdxh"]
    }, t
}();
__reflect(xianshishaohao_490.prototype, "xianshishaohao_490"), window.xianshishaohao_490 = xianshishaohao_490;
var xinshourenwu_157 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "na", "lx", "li", "qz", "hz", "tj", "dj", "g", "tm", "anpc", "npc", "ico", "p", "tp", "tpn"]
    }, t
}();
__reflect(xinshourenwu_157.prototype, "xinshourenwu_157"), window.xinshourenwu_157 = xinshourenwu_157;
var xinshourenwuico_157 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "p", "tp"]
    }, t
}();
__reflect(xinshourenwuico_157.prototype, "xinshourenwuico_157"), window.xinshourenwuico_157 = xinshourenwuico_157;
var xinshouyindaowenzi_365 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "ydwz", "pos", "pos2"]
    }, t
}();
__reflect(xinshouyindaowenzi_365.prototype, "xinshouyindaowenzi_365"), window.xinshouyindaowenzi_365 = xinshouyindaowenzi_365;
var xitongkaiqi_116 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "name", "openlv", "ygLv", "seday", "award", "str", "arg", "tip"]
    }, t
}();
__reflect(xitongkaiqi_116.prototype, "xitongkaiqi_116"), window.xitongkaiqi_116 = xitongkaiqi_116;
var xitongxianzhi_116 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "xz"]
    }, t
}();
__reflect(xitongxianzhi_116.prototype, "xitongxianzhi_116"), window.xitongxianzhi_116 = xitongxianzhi_116;
var xiulianlv_146 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "xz", "exp", "xh", "zjgf", "zjwf", "zjff", "lsgf", "lsfy", "hbgf", "hbwf", "hbff"]
    }, t
}();
__reflect(xiulianlv_146.prototype, "xiulianlv_146"), window.xiulianlv_146 = xiulianlv_146;
var xkshendian_560 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "level", "stjl", "tzjl", "sxjl", "gwmx", "tdjs", "tj", "cjjs"]
    }, t
}();
__reflect(xkshendian_560.prototype, "xkshendian_560"), window.xkshendian_560 = xkshendian_560;
var xsbdjn_690 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "yjid", "xs", "dj", "xsdj", "jnqd", "parm1", "parm2", "yj", "sjxh", "tb"]
    }, t
}();
__reflect(xsbdjn_690.prototype, "xsbdjn_690"), window.xsbdjn_690 = xsbdjn_690;
var xsfb_329 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jlzs", "gqwin", "yjsd", "tjzl", "xt"]
    }, t
}();
__reflect(xsfb_329.prototype, "xsfb_329"), window.xsfb_329 = xsfb_329;
var xsjx_609 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "parm", "level", "sx", "ms", "jxsz", "xhid", "icon"]
    }, t
}();
__reflect(xsjx_609.prototype, "xsjx_609"), window.xsjx_609 = xsjx_609;
var xsplot = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n0", "recive", "comp", "n1", "commit"]
    }, t
}();
__reflect(xsplot.prototype, "xsplot"), window.xsplot = xsplot;
var xsxt_328 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["Sdcs", "Sdxh"]
    }, t
}();
__reflect(xsxt_328.prototype, "xsxt_328"), window.xsxt_328 = xsxt_328;
var xsyj_610 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "mc", "xsid", "parm", "ms", "jxsz", "src", "yjzlzs"]
    }, t
}();
__reflect(xsyj_610.prototype, "xsyj_610"), window.xsyj_610 = xsyj_610;
var xymrlq_356 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "jl"]
    }, t
}();
__reflect(xymrlq_356.prototype, "xymrlq_356"), window.xymrlq_356 = xymrlq_356;
var yaoqianshujl_162 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["cs", "jl"]
    }, t
}();
__reflect(yaoqianshujl_162.prototype, "yaoqianshujl_162"), window.yaoqianshujl_162 = yaoqianshujl_162;
var yaoqianshuxh_161 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["cs", "yl"]
    }, t
}();
__reflect(yaoqianshuxh_161.prototype, "yaoqianshuxh_161"), window.yaoqianshuxh_161 = yaoqianshuxh_161;
var yaoqianshuxh_166 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["cs", "xh"]
    }, t
}();
__reflect(yaoqianshuxh_166.prototype, "yaoqianshuxh_166"), window.yaoqianshuxh_166 = yaoqianshuxh_166;
var yaoshouxj_352 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["star", "gl"]
    }, t
}();
__reflect(yaoshouxj_352.prototype, "yaoshouxj_352"), window.yaoshouxj_352 = yaoshouxj_352;
var youjianbiao_201 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["mailid", "title", "content", "paramCall"]
    }, t
}();
__reflect(youjianbiao_201.prototype, "youjianbiao_201"), window.youjianbiao_201 = youjianbiao_201;
var yyfd_555 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bh", "dd", "mx1", "mx2", "jl"]
    }, t
}();
__reflect(yyfd_555.prototype, "yyfd_555"), window.yyfd_555 = yyfd_555;
var zcjbjl_212 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["xh", "sid", "dj"]
    }, t
}();
__reflect(zcjbjl_212.prototype, "zcjbjl_212"), window.zcjbjl_212 = zcjbjl_212;
var zcjbxh_213 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "t", "xh", "xh2", "s"]
    }, t
}();
__reflect(zcjbxh_213.prototype, "zcjbxh_213"), window.zcjbxh_213 = zcjbxh_213;
var zcjbzs_214 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jl", "wzbq"]
    }, t
}();
__reflect(zcjbzs_214.prototype, "zcjbzs_214"), window.zcjbzs_214 = zcjbzs_214;
var zhaomu_150 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "zm", "cj", "s", "zk", "cj2", "xsdl", "xszmcs", "xsljdl", "cj3", "cj4"]
    }, t
}();
__reflect(zhaomu_150.prototype, "zhaomu_150"), window.zhaomu_150 = zhaomu_150;
var zhenlongge_151 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "wpid", "xh", "zkgl"]
    }, t
}();
__reflect(zhenlongge_151.prototype, "zhenlongge_151"), window.zhenlongge_151 = zhenlongge_151;
var zhiyousongli_318 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "dlts", "jl"]
    }, t
}();
__reflect(zhiyousongli_318.prototype, "zhiyousongli_318"), window.zhiyousongli_318 = zhiyousongli_318;
var zhoumolibao_611 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "spid", "px", "mc", "ms2", "lbnr", "lbnr2", "cs", "xj", "sysId", "qishu"]
    }, t
}();
__reflect(zhoumolibao_611.prototype, "zhoumolibao_611"), window.zhoumolibao_611 = zhoumolibao_611;
var zhuanpanjl_316 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["xh", "sid", "dj"]
    }, t
}();
__reflect(zhuanpanjl_316.prototype, "zhuanpanjl_316"), window.zhuanpanjl_316 = zhuanpanjl_316;
var zhuanpanxh_316 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "t", "xh", "xh2", "xh3", "s", "mfcs", "bjcs"]
    }, t
}();
__reflect(zhuanpanxh_316.prototype, "zhuanpanxh_316"), window.zhuanpanxh_316 = zhuanpanxh_316;
var zhuanpanzs_316 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "jl", "wzbq"]
    }, t
}();
__reflect(zhuanpanzs_316.prototype, "zhuanpanzs_316"), window.zhuanpanzs_316 = zhuanpanzs_316;
var zhuochonggl_181 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["petid", "sxgl", "sfsx", "cggl", "item", "jl"]
    }, t
}();
__reflect(zhuochonggl_181.prototype, "zhuochonggl_181"), window.zhuochonggl_181 = zhuochonggl_181;
var zhutianfengshen_508 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "level", "stjl", "tzjl", "sxjl", "gwmx", "tdjs", "tj", "cjjs", "djjs", "gsbj"]
    }, t
}();
__reflect(zhutianfengshen_508.prototype, "zhutianfengshen_508"), window.zhutianfengshen_508 = zhutianfengshen_508;
var zlgexiaohao_168 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["cs", "xh"]
    }, t
}();
__reflect(zlgexiaohao_168.prototype, "zlgexiaohao_168"), window.zlgexiaohao_168 = zlgexiaohao_168;
var zmljcz_612 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "czed", "jl"]
    }, t
}();
__reflect(zmljcz_612.prototype, "zmljcz_612"), window.zmljcz_612 = zmljcz_612;
var zqlb_927 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["spid", "mc", "ms2", "lbnr", "lbnr2", "cs", "xj", "sysId", "modType", "modMale", "modFemale"]
    }, t
}();
__reflect(zqlb_927.prototype, "zqlb_927"), window.zqlb_927 = zqlb_927;
var zqqfjl_928 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bh", "jssl", "jl"]
    }, t
}();
__reflect(zqqfjl_928.prototype, "zqqfjl_928"), window.zqqfjl_928 = zqqfjl_928;
var zqzt_926 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "sx", "qs", "jl"]
    }, t
}();
__reflect(zqzt_926.prototype, "zqzt_926"), window.zqzt_926 = zqzt_926;
var zqztjl_925 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "qs", "sx", "sl", "jl"]
    }, t
}();
__reflect(zqztjl_925.prototype, "zqztjl_925"), window.zqztjl_925 = zqztjl_925;
var zsyj_322 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["bh", "lc", "zt", "jl", "zs", "icon"]
    }, t
}();
__reflect(zsyj_322.prototype, "zsyj_322"), window.zsyj_322 = zsyj_322;
var ztczxiaohao_508 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["cs", "xh"]
    }, t
}();
__reflect(ztczxiaohao_508.prototype, "ztczxiaohao_508"), window.ztczxiaohao_508 = ztczxiaohao_508;
var ztfsshangdian_508 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "px", "item", "xh", "dayxg", "fxg", "tiaojian"]
    }, t
}();
__reflect(ztfsshangdian_508.prototype, "ztfsshangdian_508"), window.ztfsshangdian_508 = ztfsshangdian_508;
var ztjj_331 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "idx", "mz"]
    }, t
}();
__reflect(ztjj_331.prototype, "ztjj_331"), window.ztjj_331 = ztjj_331;
var ztjjjl_331 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "type", "tj", "tjxs", "jl"]
    }, t
}();
__reflect(ztjjjl_331.prototype, "ztjjjl_331"), window.ztjjjl_331 = ztjjjl_331;
var zuduifuben_131 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["l", "n", "stjl", "tzjl", "jlzs", "gwmx"]
    }, t
}();
__reflect(zuduifuben_131.prototype, "zuduifuben_131"), window.zuduifuben_131 = zuduifuben_131;
var zuoqipeiyangbiao_210 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "js", "jy", "xiaohao", "sx", "jjsx", "mx", "mc", "zdl", "jnnan", "jnnv", "shadow"]
    }, t
}();
__reflect(zuoqipeiyangbiao_210.prototype, "zuoqipeiyangbiao_210"), window.zuoqipeiyangbiao_210 = zuoqipeiyangbiao_210;
var zuoqipifubiao_211 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["id", "n", "dj", "ly", "sx", "shadow"]
    }, t
}();
__reflect(zuoqipifubiao_211.prototype, "zuoqipifubiao_211"), window.zuoqipifubiao_211 = zuoqipifubiao_211;
var zyzgbb_714 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "type", "count", "content", "log", "extraReward"]
    }, t
}();
__reflect(zyzgbb_714.prototype, "zyzgbb_714"), window.zyzgbb_714 = zyzgbb_714;
var zyzjcpz_720 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "campWinReward", "campLoseReward", "campDrawReward", "healConsume", "enrollReward", "Win", "Lose", "historyRank", "presentRank", "RegistrationTime", "PreparationTime", "BattleTime"]
    }, t
}();
__reflect(zyzjcpz_720.prototype, "zyzjcpz_720"), window.zyzjcpz_720 = zyzjcpz_720;
var zyzjqr_715 = function () {
    function t() {}
    return t.prototype.attrs = function () {
        return ["ID", "name", "camp", "minLevel", "maxLevel", "monsterlist", "combatcapability", "modle", "weapon"]
    }, t
}();
__reflect(zyzjqr_715.prototype, "zyzjqr_715"), window.zyzjqr_715 = zyzjqr_715;
var Cover;
! function (t) {
    var e = function (e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.initialize = function () {
            e.prototype.initialize.call(this), this.model = this.getModel(t.Model)
        }, i.prototype.registUI = function () {
            var e = GameGlobal.layerMgr;
            e.regView(t.GiftView, e.UI_MainMiddle, 1, 1), this.addEventListener()
        }, i.prototype.registProxys = function () {
            var e = GameGlobal.socketMgr;
            this.registSingleProxy(t.Proxy, e), this.proxy = this.getProxy(t.Proxy)
        }, i.prototype.addEventListener = function () {
            EventCenter.addMsg(t.Event.CHECK, this.onCheck, this)
        }, i.prototype.onCheck = function () {
            this.proxy.getGiftStatus()
        }, i
    }(UIAndProxyBaseCtr);
    t.Ctr = e, __reflect(e.prototype, "Cover.Ctr")
}(Cover || (Cover = {}));
var Cover;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.gridArr = [], t.skinName = "CoverGiftSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.proxy = this.getProxy(t.Proxy), this.model = this.getModel(t.Model);
            var i = Config.getConfig(canshu_143).get(46);
            i && ConfigHelp.makeStrGrids(i.key, this.gridArr, 20, 15, this.giftGroup, !0)
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t), this.addEvent(), this.getBtn.visible = !1, this.got.visible = !1, this.checkStatus()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeEvent()
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i.prototype.addEvent = function () {
            this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), EventCenter.addMsg(t.Event.ON_RECEIVE_SUCCESS, this.onReceiveSuccess, this, null, 99)
        }, i.prototype.removeEvent = function () {
            this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), EventCenter.removeMsg(t.Event.ON_RECEIVE_SUCCESS, this.onReceiveSuccess, this)
        }, i.prototype.onTouch = function (e) {
            switch (e.currentTarget) {
                case this.closeBtn:
                    this.closeView(i);
                    break;
                case this.getBtn:
                    switch (this.model.giftStatus) {
                        case t.GiftStatus.NOT_GET:
                            0 == this.model.isSetting && (window.location.href = "https://h5.qzone.qq.com/bgstore/detail/133348?_wv=2098179&from=adv&page=1&router=detail&coverid=133348&_proxy=1");
                            break;
                        case t.GiftStatus.GOT:
                            window.location.href = "https://h5.qzone.qq.com/bgstore/detail/133348?_wv=2098179&from=adv&page=1&router=detail&coverid=133348&_proxy=1";
                            break;
                        case t.GiftStatus.CAN_GET:
                            this.proxy.getGift()
                    }
            }
        }, i.prototype.checkStatus = function () {
            switch (this.model.giftStatus) {
                case t.GiftStatus.NOT_GET:
                    null == this.model.isSetting ? this.checkSetting() : this.model.isSetting || (this.getBtn.label = "前往设置", this.getBtn.visible = !0);
                    break;
                case t.GiftStatus.GOT:
                    this.got.visible = !0, this.getBtn.label = "前往设置", this.getBtn.visible = !0;
                    break;
                case t.GiftStatus.CAN_GET:
                    this.getBtn.label = "立即领取", this.getBtn.visible = !0
            }
        }, i.prototype.checkSetting = function () {
            var e = this,
                i = 133348;
            CommonWanba.checkCover(i, function (i) {
                if ("0" == i.code) {
                    var o = e.model;
                    o.isSetting = i.data.isUsed, o.isSetting && (o.giftStatus = t.GiftStatus.CAN_GET), e.checkStatus()
                } else egret.error("Get cover setting erro:" + i.obj.message)
            }, this)
        }, i.prototype.onReceiveSuccess = function () {
            this.model.giftStatus = t.GiftStatus.GOT, this.got.visible = !0, this.getBtn.label = "前往设置", ViewText.text("领取成功！！！")
        }, i
    }(BaseEUIView);
    t.GiftView = e, __reflect(e.prototype, "Cover.GiftView")
}(Cover || (Cover = {}));
var Cover;
! function (t) {
    var e;
    ! function (t) {
        t[t.GET_GIFT_STATUS = 4611] = "GET_GIFT_STATUS", t[t.ON_GIFT_STATUS = 4612] = "ON_GIFT_STATUS", t[t.GET_GIFT = 4613] = "GET_GIFT", t[t.ON_GIFT_RESULT = 4614] = "ON_GIFT_RESULT"
    }(e = t.Protocol || (t.Protocol = {}));
    var i;
    ! function (t) {
        t[t.NOT_GET = 0] = "NOT_GET", t[t.GOT = 1] = "GOT", t[t.CAN_GET = 2] = "CAN_GET"
    }(i = t.GiftStatus || (t.GiftStatus = {}))
}(Cover || (Cover = {}));
var Cover;
! function (t) {
    var e = function () {
        function t() {}
        return t.STR = "COVER_", t.CHECK = t.STR + "CHECK", t.ON_GIFT_STATUS = t.STR + "ON_GIFT_STATUS", t.ON_RECEIVE_SUCCESS = t.STR + "ON_RECEIVE_SUCCESS", t
    }();
    t.Event = e, __reflect(e.prototype, "Cover.Event")
}(Cover || (Cover = {}));
var Cover;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.isSetting = null, t
        }
        return __extends(i, e), i.prototype.isRedPoint = function () {
            var e = this.giftStatus == t.GiftStatus.NOT_GET || this.giftStatus == t.GiftStatus.CAN_GET;
            return e
        }, i
    }(GameCtrlBase);
    t.Model = e, __reflect(e.prototype, "Cover.Model")
}(Cover || (Cover = {}));
var Cover;
! function (t) {
    var e = function (e) {
        function i() {
            var i = e.call(this) || this;
            return i.model = i.getModel(t.Model), i
        }
        return __extends(i, e), i.prototype.listenServ = function (i) {
            e.prototype.listenServ.call(this, i), i.regHand(t.Protocol.ON_GIFT_STATUS, this.onGiftStatus, this), i.regHand(t.Protocol.ON_GIFT_RESULT, this.onGiftResult, this)
        }, i.prototype.onGiftStatus = function (e, i) {
            var o = e.model;
            o.giftStatus = i.readByte(), EventCenter.sendMsg(t.Event.ON_GIFT_STATUS)
        }, i.prototype.onGiftResult = function (e, i) {
            var o = i.readByte();
            switch (o) {
                case 1:
                    EventCenter.sendMsg(t.Event.ON_RECEIVE_SUCCESS);
                    break;
                case 2:
                    ViewText.text("已领取！！！");
                    break;
                case 3:
                    ViewText.text("背包已满！！！"), GameGlobal.layerMgr.open(UIConst.EQUIPRL)
            }
        }, i.prototype.getGiftStatus = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_GIFT_STATUS, e)
        }, i.prototype.getGift = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_GIFT, e)
        }, i
    }(BaseModel);
    t.Proxy = e, __reflect(e.prototype, "Cover.Proxy")
}(Cover || (Cover = {}));
var ViewCreateRole = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.curSex = 2, e.nameUrl = "resource/config/random_name.json", e._remainTime = 3e4, e.init(), e
    }
    return __extends(e, t), e.prototype.init = function () {
        this.bg = new eui.Image, this.addChild(this.bg), RES.getResByUrl("localRes/login/BMcreateRoleBG.jpg", function (t) {
            this.bg.texture = t
        }, this, RES.ResourceItem.TYPE_IMAGE);
        var t = new eui.Image;
        this.addChild(t), t.source = "createRoleAtlas_json.upHead", t.x = 127, t.y = 3;
        var e = new eui.Label;
        this.addChild(e), e.size = 30, e.textColor = 7360517, e.horizontalCenter = -25, e.y = 9, e.text = "创建角色", this.contentGroup = new eui.Group, this.addChild(this.contentGroup), this.contentGroup.width = 720, this.contentGroup.height = 870, this.contentGroup.x = -9.5, this.contentGroup.bottom = 144;
        var i = new eui.Image;
        i.source = "mainPlat_png", this.contentGroup.addChild(i), i.x = 63, i.y = 353, this.imgRole = new eui.Image, this.contentGroup.addChild(this.imgRole), this.imgRole.x = 100, this.imgRole.top = -15, this.imgRole.source = "big_1_1_png";
        var o = new eui.Image;
        this.contentGroup.addChild(o), o.x = 185, o.top = 634, o.source = "createRoleAtlas_json.wordBg", o.width = 306, o.height = 59, this.imgRoll = new eui.Image, this.contentGroup.addChild(this.imgRoll), this.imgRoll.x = 470, this.imgRoll.top = 617, this.imgRoll.source = "createRoleAtlas_json.shaizi", this.g1 = new eui.Group, this.contentGroup.addChild(this.g1), this.g1.x = 22, this.g1.y = 370;
        var n = new eui.Image;
        this.g1.addChild(n), n.source = "CM1_json.grid1", n.top = n.bottom = n.left = n.right = 10;
        var a = new eui.Image;
        this.g1.addChild(a), a.source = "head_1_1_png", a.top = a.bottom = a.left = a.right = 15, this.chose1 = this.createGroupCh(), this.g1.addChild(this.chose1), this.g2 = new eui.Group, this.contentGroup.addChild(this.g2), this.g2.x = 528, this.g2.y = 366, n = new eui.Image, this.g2.addChild(n), n.source = "CM1_json.grid1", n.top = n.bottom = n.left = n.right = 10;
        var a = new eui.Image;
        this.g2.addChild(a), a.source = "head_2_2_png", a.top = a.bottom = a.left = a.right = 15, this.chose2 = this.createGroupCh(), this.g2.addChild(this.chose2);
        var s = new eui.Image;
        s.x = 80, s.y = 290, s.source = "createRoleAtlas_json.fale", this.contentGroup.addChild(s);
        var r = new eui.Image;
        r.x = 570, r.y = 290, this.contentGroup.addChild(r), r.source = "createRoleAtlas_json.female", this.lbRemain = new eui.Label, this.lbRemain.size = 20, this.lbRemain.textColor = 16777215, this.contentGroup.addChild(this.lbRemain), this.lbRemain.horizontalCenter = -12, this.lbRemain.top = 604, this.lbName = new eui.EditableText, this.contentGroup.addChild(this.lbName), this.lbName.x = 200, this.lbName.top = 652, this.lbName.size = 28, this.lbName.textColor = 16777215, this.lbName.width = 250, this.lbName.textAlign = "center", this.txtCZ = new eui.Label, this.contentGroup.addChild(this.txtCZ), this.txtCZ.horizontalCenter = -8.5, this.txtCZ.top = 711, this.txtCZ.textColor = 9175040, this.txtCZ.size = 22, this.txtCZ.text = "(名字已存在)", this.btnGroup = new eui.Group, this.contentGroup.addChild(this.btnGroup), this.btnGroup.y = 711, this.btnGroup.horizontalCenter = 1;
        var l = new eui.Image;
        this.btnGroup.addChild(l), RES.getResByUrl("localRes/login/btnLogin.png", function (t) {
            l.texture = t, l.scaleX = l.scaleY = 1.2
        }, this, RES.ResourceItem.TYPE_IMAGE);
        var h = new eui.Label;
        this.btnGroup.addChild(h), h.horizontalCenter = h.verticalCenter = 0, h.textColor = 4990720, h.size = 30, h.text = "进入游戏", this.g1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onImgSel, this), this.g2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onImgSel, this), this.btnGroup.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnHand, this), this.btnGroup.touchChildren = !1, this.imgRoll.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onRoll, this), this.txtCZ.visible = !1, DisplayUtil.popBtnStyle(this.btnGroup), RES.getResByUrl(this.nameUrl, this.onComp, this, RES.ResourceItem.TYPE_JSON)
    }, e.prototype.createGroupCh = function () {
        var t = new eui.Group;
        t.width = 172, t.height = 170;
        var e = new eui.Image;
        e.source = "createRoleAtlas_json.chosen1", e.left = e.bottom = 0;
        var i = new eui.Image;
        return i.source = "createRoleAtlas_json.chosen2", i.top = i.right = 0, t.addChild(e), t.addChild(i), t
    }, e.prototype.onComp = function (t) {
        this.namecfg = t, this.lbName.text = this.randomName(this.curSex)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.curSex = MathUtil.rndInt(1, 2), this.updateJob(), GameGlobal.tick.addInterv(this.onTick, 500, this), this.resetRemain(), this.namecfg && (this.lbName.text = this.randomName(1))
    }, e.prototype.onClose = function () {
        this.destoryView();
        var t = this;
        GameGlobal.tick.removeInterv(t.onTick, t)
    }, e.prototype.updateJob = function () {
        var t = this.curSex;
        this.chose1.visible = this.chose2.visible = !1, 1 == t ? (this.chose1.visible = !0, this.imgRole.x = -190, this.imgRole.source = "big_1_1_png", this.imgRole.anchorOffsetX = 50, egret.Tween.get(this.imgRole).to({
            x: 100
        }, 300, egret.Ease.circOut)) : (this.chose2.visible = !0, this.imgRole.x = 210, this.imgRole.source = "big_2_2_png", this.imgRole.anchorOffsetX = -50, egret.Tween.get(this.imgRole).to({
            x: 100
        }, 300, egret.Ease.circOut))
    }, e.prototype.randomName = function (t) {
        var e = this.namecfg,
            i = e.x[Math.random() * e.x.length >> 0],
            o = e.m[Math.random() * e.m.length >> 0];
        return i + o
    }, e.prototype.onImgSel = function (t) {
        switch (t.currentTarget) {
            case this.g1:
                this.setSex(1);
                break;
            case this.g2:
                this.setSex(2)
        }
        this.resetRemain()
    }, e.prototype.btnHand = function (t) {
        this.onOk()
    }, e.prototype.onOk = function () {
        if (!this.namecfg) return void ViewText.text("上仙，您的名称还没有呢!");
        var t = this.lbName.text;
        return this.resetRemain(), t.length ? void GameGlobal.modelLogin.createRole(this.curSex, t, 1) : void(this.lbName.text = this.randomName(1))
    }, e.prototype.onRoll = function (t) {
        this.namecfg && (this.lbName.text = this.randomName(this.curSex), this.resetRemain())
    }, e.prototype.setSex = function (t) {
        this.curSex != t && (this.curSex = t, this.updateJob())
    }, e.prototype.destoryView = function () {
        RES.destroyRes("localRes/login/BMcreateRoleBG.jpg")
    }, e.prototype.onTick = function (t, e) {
        t._remainTime > 0 && t._remainTime - e <= 0 && t.onOk(), t._remainTime -= e, t._remainTime < 0 && (t._remainTime = 0), t.updateRemain()
    }, e.prototype.resetRemain = function () {
        this._remainTime = 3e4, this.updateRemain()
    }, e.prototype.updateRemain = function () {
        var t = Math.ceil(this._remainTime / 1e3);
        this.lbRemain.text = Lang.reTxt("{0}秒后自动进入游戏", t)
    }, e.prototype.onSize = function () {
        var t = (this.bg, GameGlobal.stage),
            e = t.stageHeight / 1062;
        this.bg.scaleX = this.bg.scaleY = e, this.bg.x = t.stageWidth - 700 * e >> 1, this.height = t.stageHeight
    }, e
}(BaseEUIView);
__reflect(ViewCreateRole.prototype, "ViewCreateRole");
var VWellcomeUI = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.time = 10, e.skinName = "resource/eui_skins/game/createRole/WellcomeSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btn), DisplayUtil.popBtnStyle(this.btn)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.layerMgr.addUIHideF(UIConst.QUESTDLG, "wellcome")
    }, e.prototype.onClose = function () {
        RES.destroyRes("wellcomBG_png"), GameGlobal.layerMgr.delUIHideF(UIConst.QUESTDLG, "wellcome")
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.updateTime = function () {
        this.lbTime.text = Lang.reTxt("{0}秒后自动关闭", this.time)
    }, e.prototype.tick = function (t) {
        t.time -= 1, t.time <= 0 ? t.closeHandler() : t.updateTime()
    }, e
}(BaseEUIView);
__reflect(VWellcomeUI.prototype, "VWellcomeUI");
var CrossServiceLadder;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.grids = [], e.skinName = "LadderSeasonAwardItemSkin", e
        }
        return __extends(e, t), e.prototype.childrenCreated = function () {
            t.prototype.childrenCreated.call(this)
        }, e.prototype.dataChanged = function () {
            var t = this.data;
            this.lb_sort.text = t.description, this.imgRank.source = t.icon, ConfigHelp.makeStrGrids(t.itemList, this.grids, 0, 0, this.awardGrp, !0, 5, .75)
        }, e
    }(eui.ItemRenderer);
    t.AwardItem = e, __reflect(e.prototype, "CrossServiceLadder.AwardItem")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "LadderSeasonAwardSkin", t
        }
        return __extends(i, e), i.prototype.init = function () {
            this.arrCollection = new eui.ArrayCollection
        }, i.prototype.initView = function () {
            e.prototype.initView.call(this), this.init(), this.list.itemRenderer = t.AwardItem, this.list.dataProvider = this.arrCollection, this.arrCollection.source = this.getModel(t.Model).awardArr
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t), this.addCloseListen(this.btnClose)
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeCloseListen(this.btnClose)
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i
    }(BaseEUIView);
    t.AwardView = e, __reflect(e.prototype, "CrossServiceLadder.AwardView")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.grids = [], t.skinName = "LadderWinSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.proxy = this.getProxy(t.Proxy), this.model = this.getModel(t.Model), this.btnok.setNoticeVis(!1), this.btnok.label = "确定", DisplayUtil.popBtnStyle(this.btnClose), this.numberText = new ImageText, this.numberText.charFunc = ImageText.STRFUNC, this.numberText.container = this.numGroup, this.greenBar.setTextSize(20), this.greenBar.setTextStroke(1193728, 1)
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t), this.addEvent(), this.titleBg.source = this.model.isWin ? "crossServiceLadder_json.21_winBg" : "crossServiceLadder_json.21_loseBg", this.titleBg.y = this.model.isWin ? -128 : -90, this.title.source = this.model.isWin ? "crossServiceLadder_json.21_winTitle" : "crossServiceLadder_json.21_loseTitle", this.text.source = this.model.isWin ? "crossServiceLadder_json.21_winText " : "crossServiceLadder_json.21_loseText";
            var i = Config.getConfig(kfttpz_511).get(1),
                o = this.model.isWin ? i.reward : i.loseReward;
            ConfigHelp.makeStrGrids(o, this.grids, 0, 0, this.itemGroup, !0), this.itemGroup.scrollV = 0, this.closeTime = 3, this.lbTime.text = this.closeTime + "秒后自动关闭", TimerManager.doTimer(1e3, -1, this.updateCloseTime, this), this.proxy.getMyInfo()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeEvent()
        }, i.prototype.updateMyInfo = function () {
            var t = this.model.myRank,
                e = Config.getConfig(ttdw_510),
                i = e.get(t);
            if (i) {
                var o = i.nextID;
                if (o > 0) {
                    var n = e.get(o).lowest;
                    this.greenBar.curValue = this.model.myScore, this.greenBar.totalValue = n
                } else this.greenBar.setText(this.model.myScore.toString()), this.greenBar.curValue = this.model.myScore, this.greenBar.totalValue = this.model.myScore;
                var a = i.show;
                this.rankIcon.source = "crossServiceLadder_json.21_" + a + "Icon", this.rankText.source = "crossServiceLadder_json.21_" + a + "Text", this.numberText.setText(i.number + "")
            } else console.error("~~~~错误的段位表id:" + t);
            this.model.scoreChange >= 0 ? this.lbScoreChange.text = "+" + this.model.scoreChange : this.lbScoreChange.text = "" + this.model.scoreChange
        }, i.prototype.updateCloseTime = function () {
            this.closeTime -= 1, this.lbTime.text = this.closeTime + "秒后自动关闭", this.closeTime <= 0 && (TimerManager.doTimer(50, 1, function () {
                this.closeView(i)
            }, this), TimerManager.remove(this.updateCloseTime, this))
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i.prototype.addEvent = function () {
            this.btnok.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), EventCenter.addMsg(t.Event.UPDATE_MY_INFO, this.updateMyInfo, this)
        }, i.prototype.removeEvent = function () {
            this.btnok.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), EventCenter.removeMsg(t.Event.UPDATE_MY_INFO, this.updateMyInfo, this)
        }, i.prototype.onTouch = function (t) {
            switch (t.currentTarget) {
                case this.btnok:
                    this.closeView(i);
                    break;
                case this.btnClose:
                    this.closeView(i)
            }
        }, i
    }(BaseEUIView);
    t.BattleResultView = e, __reflect(e.prototype, "CrossServiceLadder.BattleResultView")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.skinName = "LadderBillboardItemSkin", e
        }
        return __extends(e, t), e.prototype.childrenCreated = function () {
            t.prototype.childrenCreated.call(this), this.numberText = new ImageText, this.numberText.charFunc = ImageText.RECHARGEFUN, this.numberText.container = this.numGroup
        }, e.prototype.dataChanged = function () {
            var t = this.data;
            this.rankIcon.source = t.rankIcon, this.playerName.text = t.name, this.lb_sort.text = t.rankLable, this.currentScore.text = String(t.currentScore), t.ranking > 3 ? (this.numLable.text = String(t.ranking), this.numLable.visible = !0, this.numGroup.visible = !1) : (this.numberText.setText(t.ranking + ""), this.numLable.visible = !1, this.numGroup.visible = !0)
        }, e
    }(eui.ItemRenderer);
    t.BillboardItem = e, __reflect(e.prototype, "CrossServiceLadder.BillboardItem")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "LadderBillboardSkin", t
        }
        return __extends(i, e), i.prototype.init = function () {
            this.listData = new eui.ArrayCollection
        }, i.prototype.initView = function () {
            e.prototype.initView.call(this), this.init(), this.list.itemRenderer = t.BillboardItem, this.list.dataProvider = this.listData
        }, i.prototype.addEvent = function () {
            this.addCloseListen(this.btnClose), EventCenter.addMsg(t.Event.UPDATE_RANK_INFO, this.updateRankInfo, this)
        }, i.prototype.removeEvent = function () {
            this.removeCloseListen(this.btnClose), EventCenter.removeMsg(t.Event.UPDATE_RANK_INFO, this.updateRankInfo, this)
        }, i.prototype.updateRankInfo = function () {
            var e = this.getModel(t.Model).getRankData();
            0 == e.length ? (this.notice.visible = !0, this.notice.text = "暂无赛季数据", this.lbMySort.visible = !1) : (this.notice.visible = !1, this.notice.text = "", this.lbMySort.visible = !0, this.lbMySort.text = "我的排名：" + this.getModel(t.Model).mySort), this.listData.source = e
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addEvent(), this.proxy = this.getProxy(t.Proxy), this.proxy.getRankInfo()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeEvent()
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i
    }(BaseEUIView);
    t.BillboardView = e, __reflect(e.prototype, "CrossServiceLadder.BillboardView")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function (e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.registUI = function () {
            var e = GameGlobal.layerMgr;
            e.regView(t.AwardView, e.UI_MainMiddle, 1, 1), e.regView(t.BillboardView, e.UI_MainMiddle, 1, 1), e.regView(t.MissionView, e.UI_MainMiddle, 1, 1), e.regView(t.LobbyView, e.UI_MainMiddle, 1), e.regView(t.BattleResultView, e.UI_Message, 1)
        }, i.prototype.registProxys = function () {
            var e = GameGlobal.socketMgr;
            this.registSingleProxy(t.Proxy, e)
        }, i.prototype.addMsgListeners = function () {
            var e = GameCtrlBase.instance;
            e.on(ModelBattle.GC_504, this.onEndBattle, this), e.on(ModelBattle.MSG_BATTLE_BEGIN, this.onStartBattle, this), EventCenter.addMsg(t.Event.OPEN, this.onOpen, this), EventCenter.addMsg(t.Event.ON_ACTIVITY_INFO, this.onActivityInfo, this)
        }, i.prototype.removeMsgListeners = function () {
            var e = GameCtrlBase.instance;
            e.off(ModelBattle.GC_504, this.onEndBattle, this), e.off(ModelBattle.MSG_BATTLE_BEGIN, this.onStartBattle, this), EventCenter.removeMsg(t.Event.OPEN, this.onOpen, this), EventCenter.removeMsg(t.Event.ON_ACTIVITY_INFO, this.onActivityInfo, this)
        }, i.prototype.onOpen = function () {
            this.getProxy(t.Proxy).getActivityInfo()
        }, i.prototype.onActivityInfo = function () {
            switch (this.getModel(t.Model).activityState) {
                case t.ActivityStatus.START:
                    GameGlobal.layerMgr.close(UIConst.HUODONG), this.openView(t.LobbyView);
                    break;
                case t.ActivityStatus.OVER:
                    ViewText.text("活动尚未开启，请准时参加！！！")
            }
        }, i.prototype.onStartBattle = function (e) {
            e.type == ModelBattle.BT_CROSS_SERVICE_LADDER && this.getModel(t.Model).updateBattleResult(e.isMineWin())
        }, i.prototype.onEndBattle = function (e) {
            e == ModelBattle.BT_CROSS_SERVICE_LADDER && (this.openView(t.BattleResultView), this.openView(t.LobbyView))
        }, i
    }(UIAndProxyBaseCtr);
    t.CrossServiceLadderCtr = e, __reflect(e.prototype, "CrossServiceLadder.CrossServiceLadderCtr")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "LadderLobbySkin", t
        }
        return __extends(i, e), i.prototype.init = function () {
            this.myRole = UIRole.create(), this.myRoleGroup.addChild(this.myRole), this.enemyRole = UIRole.create(), this.enemyRoleGroup.addChild(this.enemyRole), this.model = this.getModel(t.Model), this.proxy = this.getProxy(t.Proxy), this.numberText = new ImageText, this.numberText.charFunc = ImageText.STRFUNC, this.numberText.container = this.numGroup, this.timeText = new ImageText, this.timeText.charFunc = ImageText.STRFUNC, this.timeText.container = this.timeGrp
        }, i.prototype.initView = function () {
            e.prototype.initView.call(this), this.init(), DisplayUtil.popBtnStyle(this.btnClose), this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnTask), DisplayUtil.popBtnStyle(this.btnAward), this.btnMatch.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.btnTask.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.btnAward.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t), this.addMsg(), this.enemyInfo.visible = !1, this.imageShadow.visible = !0, this.imageTime.visible = !1, this.btnMatch.visible = !0, this.btnMatch.label = "开始匹配", this.lb_season.text = "第" + this.model.currentSeason + "赛季", this.timeGrp.visible = !1, this.sendProxyTime = 0, this.proxy.getMyInfo(), this.proxy.getAwardInfo()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeMsg(), this.myRole.stopAndClear(), this.enemyRole.stopAndClear()
        }, i.prototype.onTouch = function (e) {
            switch (e.currentTarget) {
                case this.btnMatch:
                    if (egret.getTimer() - this.sendProxyTime < 1e3) return;
                    this.sendProxyTime = egret.getTimer(), this.proxy.askMatch();
                    break;
                case this.btnTask:
                    this.openView(t.MissionView);
                    break;
                case this.btnAward:
                    this.openView(t.AwardView)
            }
        }, i.prototype.updateMyInfo = function () {
            this.myRole.setData(this.model.myRoleInfo), this.myRole.setWay(3), this.myRole.play();
            var t = this.model.myRank,
                e = Config.getConfig(ttdw_510),
                i = e.get(t);
            if (i) {
                var o = i.nextID;
                if (o > 0) {
                    var n = e.get(o).lowest;
                    this.lb_score.text = this.model.myScore.toString() + "/" + n.toString()
                } else this.lb_score.text = this.model.myScore.toString();
                var a = i.show;
                this.imageRank.source = "crossServiceLadder_json.21_" + a + "Icon", this.RankText.source = "crossServiceLadder_json.21_" + a + "Text", this.lb_battleCount.text = this.model.myBattleCount + "", this.lb_winRank.text = this.myWinRate.text = this.model.myWinRate / 100 + "%", this.myName.text = this.model.myRoleInfo.name, this.myStr.text = "战力:" + this.model.myRoleInfo.str, this.numberText.setText(i.number + "")
            } else console.error("~~~~错误的段位表id:" + t)
        }, i.prototype.updateEnemyInfo = function () {
            this.enemyInfo.visible = !0, this.imageShadow.visible = !1, this.enemyRole.setData(this.model.enemyRoleInfo), this.enemyRole.setWay(3), this.enemyRole.play(), this.enemyName.text = this.model.enemyRoleInfo.name + ".S" + this.model.enemyZone, this.enemyStr.text = "战力:" + this.model.enemyRoleInfo.str, this.enemyWinRate.text = this.model.enemyWinRate / 100 + "%"
        }, i.prototype.onStartBattle = function (t) {
            this.btnMatch.visible = !1, this.imageTime.visible = !0, this.timeGrp.visible = !0, this.battleStartTime = 5, this.battleInfo = t.data, this.timeText.setText(this.battleStartTime + ""), TimerManager.doTimer(1e3, -1, this.updateStartBattleTime, this)
        }, i.prototype.updateStartBattleTime = function () {
            this.battleStartTime -= 1, this.timeText.setText(this.battleStartTime + ""), this.battleStartTime <= 0 && (this.battleStartTime = 0, TimerManager.doTimer(50, 1, function () {
                var t = this.battleInfo[EnumBattleKey.BATTLETYPE];
                t == ModelBattle.BT_CROSS_SERVICE_LADDER && (GameGlobal.layerMgr.closePnlByType(1), GameGlobal.modelBattle.enterBattle(this.battleInfo))
            }, this), TimerManager.remove(this.updateStartBattleTime, this))
        }, i.prototype.addMsg = function () {
            EventCenter.addMsg(t.Event.UPDATE_MY_INFO, this.updateMyInfo, this), EventCenter.addMsg(t.Event.UPDATE_ENEMY_INFO, this.updateEnemyInfo, this), EventCenter.addMsg(t.Event.START_TIME_COUNT, this.onStartBattle, this), EventCenter.addMsg(t.Event.UPDATE_MISSION_STATE, this.updateMissionState, this)
        }, i.prototype.removeMsg = function () {
            EventCenter.removeMsg(t.Event.UPDATE_MY_INFO, this.updateMyInfo, this), EventCenter.removeMsg(t.Event.UPDATE_ENEMY_INFO, this.updateEnemyInfo, this), EventCenter.removeMsg(t.Event.START_TIME_COUNT, this.onStartBattle, this), EventCenter.removeMsg(t.Event.UPDATE_MISSION_STATE, this.updateMissionState, this)
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i.prototype.updateMissionState = function () {
            this.model.hadAward ? this.iconNotice.visible = !0 : this.iconNotice.visible = !1
        }, i
    }(BaseEUIView);
    t.LobbyView = e, __reflect(e.prototype, "CrossServiceLadder.LobbyView")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.grids = [], t.skinName = "LadderMissionItemSkin", t
        }
        return __extends(i, e), i.prototype.childrenCreated = function () {
            e.prototype.childrenCreated.call(this), DisplayUtil.popBtnStyle(this.btGetAwardsExml), this.btGetAwardsExml.addEventListener(egret.TouchEvent.TOUCH_TAP, this.requestAward, this)
        }, i.prototype.requestAward = function () {
            GameCtrlBase.instance.getProxy(t.Proxy).getAward(this.data.rankId)
        }, i.prototype.dataChanged = function () {
            if (this.data) {
                var e = this.data;
                this.rankIcon.source = e.rankIcon, this.txtRank.text = e.missionScore + "积分", e.state == t.AwardState.AWARDABLE ? (this.btGetAwardsExml.enabled = !0, this.btGetAwardsExml.lbText.text = "领取", this.notice(!0)) : e.state == t.AwardState.NOT_REACHED ? (this.btGetAwardsExml.enabled = !1, this.btGetAwardsExml.lbText.text = "未达成", this.notice(!1)) : e.state == t.AwardState.AWARDED && (this.btGetAwardsExml.enabled = !1, this.btGetAwardsExml.lbText.text = "已领取", this.notice(!1)), ConfigHelp.makeStrGrids(e.missionReward, this.grids, 0, 0, this.awardGrp, !0, 1, .7)
            }
        }, i.prototype.notice = function (t) {
            this.btGetAwardsExml.setNoticeVis(t)
        }, i
    }(eui.ItemRenderer);
    t.MissionItem = e, __reflect(e.prototype, "CrossServiceLadder.MissionItem")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "LadderMissionSkin", t
        }
        return __extends(i, e), i.prototype.init = function () {
            this.listData = new eui.ArrayCollection
        }, i.prototype.initView = function () {
            e.prototype.initView.call(this), this.init(), this.list.itemRenderer = t.MissionItem, this.list.dataProvider = this.listData, this.listData.source = this.getModel(t.Model).initMissionArr()
        }, i.prototype.addEvent = function () {
            this.addCloseListen(this.btnClose), this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onTouchList, this), EventCenter.addMsg(t.Event.UPDATE_MISSION_STATE, this.updateMyInfo, this)
        }, i.prototype.removeEvent = function () {
            this.removeCloseListen(this.btnClose), this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP, this.onTouchList, this), EventCenter.removeMsg(t.Event.UPDATE_MISSION_STATE, this.updateMyInfo, this)
        }, i.prototype.updateMyInfo = function () {
            var e = this.getModel(t.Model).missionArr;
            this.listData.replaceAll(e)
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addEvent(), this.proxy = this.getProxy(t.Proxy), this.proxy.getAwardInfo()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeEvent()
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i.prototype.onTouchList = function (t) {}, i
    }(BaseEUIView);
    t.MissionView = e, __reflect(e.prototype, "CrossServiceLadder.MissionView")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function () {
        function e() {
            this.init()
        }
        return e.prototype.init = function () {
            this.description = "", this.icon = "", this.itemList = "", this.sort = 0, this.isPaiMing = t.IsPaiMingAward.NOT
        }, e
    }();
    t.AwardData = e, __reflect(e.prototype, "CrossServiceLadder.AwardData")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function () {
        function e() {
            this.init()
        }
        return e.prototype.init = function () {
            this.missionScore = "", this.missionReward = "", this.rankId = 0, this.sort = 0, this.rankIcon = "", this.state = t.AwardState.NOT_REACHED
        }, e
    }();
    t.MissionData = e, __reflect(e.prototype, "CrossServiceLadder.MissionData")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function () {
        function t() {
            this.init()
        }
        return t.prototype.init = function () {}, t
    }();
    t.RankData = e, __reflect(e.prototype, "CrossServiceLadder.RankData")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e;
    ! function (t) {
        t[t.GET_MY_INFO = 4621] = "GET_MY_INFO", t[t.ON_MY_INFO = 4622] = "ON_MY_INFO", t[t.ASK_MATCH = 4623] = "ASK_MATCH", t[t.ON_ENEMY_INFO = 4624] = "ON_ENEMY_INFO", t[t.CANCEL_MATCH = 4625] = "CANCEL_MATCH", t[t.ON_CODE = 4626] = "ON_CODE", t[t.GET_AWARD_INFO = 4627] = "GET_AWARD_INFO", t[t.ON_AWARD_INFO = 4628] = "ON_AWARD_INFO", t[t.GET_AWARD = 4629] = "GET_AWARD", t[t.GET_RANK_INFO = 4631] = "GET_RANK_INFO", t[t.ON_RANK_INFO = 4632] = "ON_RANK_INFO", t[t.GET_ACTIVITY_INFO = 4633] = "GET_ACTIVITY_INFO", t[t.ON_ACTIVITY_INFO = 4634] = "ON_ACTIVITY_INFO", t[t.ON_COLD_TIME = 4636] = "ON_COLD_TIME"
    }(e = t.Protocol || (t.Protocol = {}));
    var i;
    ! function (t) {
        t[t.OVER = 0] = "OVER", t[t.START = 1] = "START"
    }(i = t.ActivityStatus || (t.ActivityStatus = {}));
    var o;
    ! function (t) {
        t[t.SUCCESS = 1] = "SUCCESS", t[t.IS_GET = 2] = "IS_GET", t[t.NOT_ENOUGH_SCORE = 3] = "NOT_ENOUGH_SCORE", t[t.FULL_BAG = 4] = "FULL_BAG", t[t.MATCH_FAIL = 5] = "MATCH_FAIL", t[t.NOT_AT_TIME = 6] = "NOT_AT_TIME"
    }(o = t.Code || (t.Code = {}));
    var n;
    ! function (t) {
        t[t.NOT_REACHED = 0] = "NOT_REACHED", t[t.AWARDABLE = 1] = "AWARDABLE", t[t.AWARDED = 2] = "AWARDED"
    }(n = t.AwardState || (t.AwardState = {}));
    var a;
    ! function (t) {
        t[t.NOT = 0] = "NOT", t[t.IS = 1] = "IS"
    }(a = t.IsPaiMingAward || (t.IsPaiMingAward = {}))
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function () {
        function t() {}
        return t.STR = "CROSS_SERVICR_LADDER", t.UPDATE_MY_INFO = t.STR + "UPDATE_MY_INFO", t.UPDATE_ENEMY_INFO = t.STR + "UPDATE_ENEMY_INFO", t.UPDATE_BATTLE = t.STR + "UPDATE_BATTLE", t.OPEN = t.STR + "OPEN", t.ON_ACTIVITY_INFO = t.STR + "ON_ACTIVITY_INFO", t.START_TIME_COUNT = t.STR + "START_TIME_COUNT", t.UPDATE_RANK_INFO = t.STR + "UPDATE_RANK_INFO", t.UPDATE_AWARD_INFO = t.STR + "UPDATE_AWARD_INFO", t.UPDATE_AWARD = t.STR + "UPDATE_AWARD", t.UPDATE_MISSION_STATE = t.STR + "UPDATE_MISSION_STATE", t
    }();
    t.Event = e, __reflect(e.prototype, "CrossServiceLadder.Event")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t._AwardArr = [], t._RankArr = [], t.missionArr = [], t.hadAward = !1, t._isWin = !1, t.mySort = 0, t.scoreChange = 0, t
        }
        return __extends(i, e), i.prototype.updateBattleResult = function (t) {
            this._isWin = t
        }, Object.defineProperty(i.prototype, "isWin", {
            get: function () {
                return this._isWin
            },
            enumerable: !0,
            configurable: !0
        }), i.prototype.updateMyInfo = function (t) {
            this.myRoleInfo = t
        }, i.prototype.updateEnemyInfo = function (t) {
            this.enemyRoleInfo = t
        }, Object.defineProperty(i.prototype, "awardArr", {
            get: function () {
                if (!this._AwardArr.length) {
                    for (var e = Config.getConfig(ttpmjl_514).values, i = 0; i < e.length; i++) {
                        var o = e[i].reward1,
                            n = "第" + e[i].qj.replace(/,/g, "-") + "名",
                            a = "crossServiceLadder_json.21_rank_" + e[i].qj.replace(/,/g, "-"),
                            s = new t.AwardData;
                        s.itemList = o, s.description = n, s.icon = a, s.isPaiMing = t.IsPaiMingAward.IS, s.sort = e[i].id, this._AwardArr.push(s)
                    }
                    for (var r = Config.getConfig(ttdw_510).values, i = 0; i < r.length; i++) {
                        var l = r[i],
                            h = l.sj.split(","),
                            c = parseInt(h[0]),
                            p = parseInt(h[1]);
                        if (this.currentSeason >= c && this.currentSeason <= p) {
                            var s = new t.AwardData;
                            s.sort = l.honourNew, s.isPaiMing = t.IsPaiMingAward.NOT, s.description = l.honour, s.icon = "crossServiceLadder_json.21_" + l.show + "Bg", s.itemList = l.seasonReward, this._AwardArr.push(s)
                        }
                    }
                    this._AwardArr.sort(function (e, i) {
                        return e.isPaiMing == t.IsPaiMingAward.IS && i.isPaiMing == t.IsPaiMingAward.IS ? e.sort - i.sort : e.isPaiMing == t.IsPaiMingAward.NOT && i.isPaiMing == t.IsPaiMingAward.NOT ? i.sort - e.sort : i.isPaiMing - e.isPaiMing
                    })
                }
                return this._AwardArr
            },
            enumerable: !0,
            configurable: !0
        }), i.prototype.updateRankData = function (t) {
            this._RankArr = t
        }, i.prototype.getRankData = function () {
            return this._RankArr
        }, i.prototype.initMissionArr = function () {
            if (!this.missionArr.length) {
                for (var e = Config.getConfig(ttdw_510).values, i = e.length, o = 0; i > o; o++) {
                    var n = e[o],
                        a = n.reward;
                    if ("0" != a) {
                        var s = n.sj.split(","),
                            r = parseInt(s[0]),
                            l = parseInt(s[1]);
                        if (this.currentSeason >= r && this.currentSeason <= l) {
                            var h = new t.MissionData;
                            h.missionReward = n.reward, h.missionScore = n.lowest + "", h.rankId = n.id, h.sort = n.honourNew, h.rankIcon = "crossServiceLadder_json.21_" + n.show + "Icon", h.state = t.AwardState.NOT_REACHED, this.missionArr.push(h)
                        }
                    }
                }
                this.missionArr.sort(function (t, e) {
                    return t.sort - e.sort
                })
            }
            return this.missionArr
        }, i.prototype.sortMissionList = function (t) {
            var e = t.slice(0),
                i = function (t, e) {
                    var i = t.state,
                        o = e.state;
                    if (i == o) return t.sort - e.sort;
                    var n = 0 == i ? 1.5 : i,
                        a = 0 == o ? 1.5 : o;
                    return n - a
                };
            return e.sort(i)
        }, i
    }(GameCtrlBase);
    t.Model = e, __reflect(e.prototype, "CrossServiceLadder.Model")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var CrossServiceLadder;
! function (t) {
    var e = function (e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.listenServ = function (i) {
            e.prototype.listenServ.call(this, i), i.regHand(t.Protocol.ON_MY_INFO, this.onMyInfo, this), i.regHand(t.Protocol.ON_ENEMY_INFO, this.onEnemyInfo, this), i.regHand(t.Protocol.ON_CODE, this.onCode, this), i.regHand(t.Protocol.ON_AWARD_INFO, this.onAwardInfo, this), i.regHand(t.Protocol.ON_RANK_INFO, this.onRankInfo, this), i.regHand(t.Protocol.ON_ACTIVITY_INFO, this.onActivityInfo, this), i.regHand(t.Protocol.ON_COLD_TIME, this.onColdTime, this)
        }, i.prototype.onMyInfo = function (e, i) {
            var o = e.getModel(t.Model);
            o.myRank = i.readInt(), o.myBattleCount = i.readInt(), o.myScore = i.readInt(), o.myWinRate = i.readInt();
            var n = i.readUTF(),
                a = new RoleShowData(n);
            o.myRoleInfo = a, EventCenter.sendMsg(t.Event.UPDATE_MY_INFO)
        }, i.prototype.onEnemyInfo = function (e, i) {
            var o = e.getModel(t.Model),
                n = i.readUTF(),
                a = new RoleShowData(n);
            o.enemyRoleInfo = a, o.enemyZone = i.readInt(), o.enemyWinRate = i.readInt(), o.scoreChange = i.readInt(), ViewText.text("匹配成功！"), EventCenter.sendMsg(t.Event.UPDATE_ENEMY_INFO)
        }, i.prototype.onCode = function (e, i) {
            var o = (e.getModel(t.Model), i.readInt()),
                n = i.readInt();
            switch (n) {
                case t.Code.SUCCESS:
                    e.handleSuccessCode(o);
                    break;
                case t.Code.IS_GET:
                    ViewText.text("已领取过！");
                    break;
                case t.Code.NOT_ENOUGH_SCORE:
                    ViewText.text("积分不足！");
                    break;
                case t.Code.FULL_BAG:
                    GameGlobal.layerMgr.open(UIConst.EQUIPRL);
                    break;
                case t.Code.MATCH_FAIL:
                    ViewText.text("未匹配到对手！");
                    break;
                case t.Code.NOT_AT_TIME:
                    ViewText.text("不在活动时间！");
                    break;
                default:
                    egret.warn("!!!!!!跨服天梯活动异常：" + n)
            }
        }, i.prototype.handleSuccessCode = function (e) {
            switch (e) {
                case t.Protocol.GET_AWARD:
                    this.getProxy(i).getAwardInfo()
            }
        }, i.prototype.onAwardInfo = function (e, i) {
            var o = e.getModel(t.Model);
            o.hadAward = !1;
            for (var n = i.readShort(), a = 0; n > a; a++) {
                var s = i.readInt(),
                    r = i.readShort();
                r == t.AwardState.AWARDABLE && (o.hadAward = !0);
                for (var l in o.missionArr) o.missionArr[l].rankId == s && (o.missionArr[l].state = r)
            }
            o.missionArr = o.sortMissionList(o.missionArr), EventCenter.sendMsg(t.Event.UPDATE_MISSION_STATE)
        }, i.prototype.onRankInfo = function (e, i) {
            for (var o = e.getModel(t.Model), n = [], a = i.readShort(), s = 0; a > s; s++) {
                var r = i.readInt(),
                    l = i.readInt(),
                    h = i.readUTF(),
                    c = i.readInt(),
                    p = new t.RankData;
                p.name = h, p.currentScore = c, p.rankId = l, p.ranking = r;
                var u = Config.getConfig(ttdw_510).get(l);
                u ? (p.rankLable = u.honour, p.rankIcon = "crossServiceLadder_json.21_" + Config.getConfig(ttdw_510).get(l).show + "Icon") : console.error("~~~~错误的段位表id:" + l), n.push(p)
            }
            o.mySort = i.readInt(), o.updateRankData(n), EventCenter.sendMsg(t.Event.UPDATE_RANK_INFO)
        }, i.prototype.onActivityInfo = function (e, i) {
            var o = e.getModel(t.Model);
            o.activityState = i.readByte(), o.currentSeason = i.readInt(), EventCenter.sendMsg(t.Event.ON_ACTIVITY_INFO)
        }, i.prototype.onColdTime = function (t, e) {
            var i = e.readLong(),
                o = Math.floor(App.serverTimestamp / 1e3),
                n = i - o;
            ViewText.text(n + "秒冷却后可进行匹配！")
        }, i.prototype.getMyInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_MY_INFO, e)
        }, i.prototype.askMatch = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.ASK_MATCH, e)
        }, i.prototype.getAwardInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_AWARD_INFO, e)
        }, i.prototype.getAward = function (e) {
            var i = this.getBytes();
            i.writeInt(e), this.sendSocket(t.Protocol.GET_AWARD, i)
        }, i.prototype.getRankInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_RANK_INFO, e)
        }, i.prototype.getActivityInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_ACTIVITY_INFO, e)
        }, i
    }(BaseModel);
    t.Proxy = e, __reflect(e.prototype, "CrossServiceLadder.Proxy")
}(CrossServiceLadder || (CrossServiceLadder = {}));
var Model_CrossTeamFuBen = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.fubenData = [], e.teamData = [], e.memberData = [], e.typeMember = 0, e.battleTimes = 0, e.xiayi = 0, e.idTeam = 0, e.lvFuBen = 0, e.lvTeam = 0, e.lvMapTongGuan = {}, e.lvMaxExcel = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (t) {
        this.socket = t;
        var e = this;
        t.regHand(1250, e.GC1250, e), t.regHand(1252, e.GC1252, e), t.regHand(1254, e.GC1254, e), t.regHand(1256, e.GC1256, e), t.regHand(1258, e.GC1258, e), t.regHand(1260, e.GC1260, e), t.regHand(1262, e.GC1262, e)
    }, e.prototype.CG1251 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(1251, e), GameGlobal.modelCrossTeam.lvFuBen = t
    }, e.prototype.GC1250 = function (t, i) {
        for (var o = i.readByte(), n = i.readInt(), a = i.readShort(), s = {}, r = 0; a > r; r++) {
            var l = i.readShort();
            s[l] = 1
        }
        GameGlobal.modelCrossTeam.lvMapTongGuan = s, GameGlobal.modelCrossTeam.battleTimes = o, GameGlobal.modelCrossTeam.xiayi = n, GameGlobal.modelCrossTeam.notify(e.MSG_REFLASH_TIMES_XIAYI)
    }, e.prototype.GC1252 = function (t, i) {
        var o = i.readByte(),
            n = i.readShort();
        n > 0 && (GameGlobal.modelCrossTeam.teamData = []);
        for (var a = 0; n > a; a++) {
            var s = i.readInt(),
                r = i.readUTF(),
                l = i.readByte(),
                h = i.readByte(),
                c = new Vo_CrossTeamTeamData;
            c.idTeam = s, c.nameLeader = r, c.numMember = l, c.type = h, GameGlobal.modelCrossTeam.teamData.push(c)
        }
        1 == o ? GameGlobal.modelCrossTeam.notify(e.MSG_REFLASH_ALL_TEAM) : ViewText.text(["", "", "没有[" + GameGlobal.modelCrossTeam.lvFuBen + "]级副本"][o])
    }, e.prototype.CG1253 = function (t, e) {
        var i = GameGlobal.modelBag.checkRLTips();
        if (!i) {
            var o = this.getBytes();
            o.writeByte(t), o.writeShort(e), this.sendSocket(1253, o)
        }
    }, e.prototype.GC1254 = function (t, i) {
        var o = i.readByte(),
            n = i.readInt(),
            a = i.readShort();
        a > 0 && (GameGlobal.modelCrossTeam.memberData = []);
        for (var s = GameGlobal.modelCrossTeam.memberData, r = GameGlobal.modelRole.voMine.id, l = 0; a > l; l++) {
            var h = i.readByte(),
                c = i.readLong(),
                p = i.readUTF(),
                u = i.readShort(),
                d = i.readInt(),
                f = i.readByte(),
                g = new Vo_CrossTeamMemberData;
            g.type = h, g.idHero = c, g.nameHero = p, g.levelHero = u, g.strengthHero = d, g.job = f, s.push(g), r == c && 1 == h ? GameGlobal.modelCrossTeam.typeMember = 1 : r == c && 2 == h && (GameGlobal.modelCrossTeam.typeMember = 2)
        }
        for (var m = i.readShort(), y = s.length; a > 0 && 3 > y;) {
            var g = new Vo_CrossTeamMemberData;
            g.idHero = 0, s.push(g), y = s.length
        }
        1 == o || 2 == o ? (GameGlobal.layerMgr.isOpenView(UIConst.ZDFBPAGE) || (VCrossTeamFuBenMain.levelSel = m, GameGlobal.layerMgr.open(UIConst.ZDFBPAGE)), GameGlobal.modelCrossTeam.lvTeam = m, GameGlobal.modelCrossTeam.notify(e.MSG_REFLASH_MY_TEAM), GameGlobal.modelCrossTeam.idTeam = n, GameGlobal.modelCrossTeam.notify(e.MSG_BT_REFLASH), 2 == o && ViewText.text("")) : ViewText.text(["", "", "", "配置表没配该等级副本", "玩家等级不够，不能挑战该副本", "你已经有队伍，不能重复加入"][o])
    }, e.prototype.CG1255 = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(1255, e)
    }, e.prototype.GC1256 = function (t, e) {
        var i = e.readByte();
        ViewText.text(["", "队伍信息更新", "你没在队伍中", "队伍缓存异常", "你不是队长", "该队员不存在"][i])
    }, e.prototype.CG1257 = function () {
        var t = this.getBytes();
        this.sendSocket(1257, t)
    }, e.prototype.GC1258 = function (t, i) {
        var o = i.readByte();
        ViewText.text(["", "", "没有队伍", "两个缓存不同步，没有队伍缓存", "队长才能开启战斗"][o]), 1 == o && GameGlobal.modelCrossTeam.notify(e.MSG_BT_REFLASH)
    }, e.prototype.CG1259 = function () {
        var t = this.getBytes();
        this.sendSocket(1259, t)
    }, e.prototype.GC1260 = function (t, i) {
        var o = i.readByte();
        0 != o && ViewText.text(["", "", "你没在队伍中", "队伍缓存异常", "队长抛弃你啦"][o]), (0 == o || 1 == o || 4 == o) && (GameGlobal.modelCrossTeam.lvTeam = 0, GameGlobal.modelCrossTeam.typeMember = 0, GameGlobal.modelCrossTeam.notify(e.MSG_BT_REFLASH))
    }, e.prototype.CG1261 = function (t) {
        var e = GameGlobal.modelBag.checkRL();
        if (e) {
            VCrossTeamFuBenMain.joinSel = !1;
            var i = "背包空间不足50，请先清理背包，以免不能获得副本掉落物品";
            return void ViewAlert.show(i, function () {
                GameGlobal.layerMgr.open(UIConst.EQUIPRL)
            }, ViewAlert.OK)
        }
        var o = this.getBytes();
        o.writeInt(t), this.sendSocket(1261, o)
    }, e.prototype.GC1262 = function (t, e) {
        var i = e.readByte();
        ViewText.text(["", "成功加入战队", "你已经有队伍，不能重复加入", "队伍不存在", "队伍已满", "你等级不足"][i]);
        var o = GameGlobal.layerMgr.isShowing(UIConst.ZDFBPAGE);
        1 != i || o || GameGlobal.layerMgr.open(UIConst.ZDFBPAGE)
    }, e.prototype.CG1263 = function () {
        var t = this.getBytes();
        this.sendSocket(1263, t)
    }, e.MSG_BT_REFLASH = "MSG_BT_REFLASH", e.MSG_AWARDS_REFLASH = "MSG_AWARDS_REFLASH", e.MSG_REFLASH_FUBEN = "MSG_REFLASH_FUBEN", e.MSG_REFLASH_ALL_TEAM = "MSG_REFLASH_ALL_TEAM", e.MSG_REFLASH_MY_TEAM = "MSG_REFLASH_MY_TEAM", e.MSG_REFLASH_TIMES_XIAYI = "MSG_REFLASH_TIMES_XIAYI", e
}(BaseModel);
__reflect(Model_CrossTeamFuBen.prototype, "Model_CrossTeamFuBen");
var VCrossTeamFuBenDataItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "resource/eui_skins/game/crossteamfuben/CrossTeamFuBenPage.exml", e
    }
    return __extends(e, t), e.prototype.partAdded = function (e, i) {
        t.prototype.partAdded.call(this, e, i)
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        var e = this;
        e.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onTouchHandler, e), e.boss = UIRole.create(), e.gpBossExml.addChild(e.boss), e.boss.setWay(1)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.v
        },
        set: function (t) {
            if (t) {
                this.v = t, this.lbFuBenNameExml.text = t.name, this.boss.setMonsterID(t.bossModel), this.boss.validParts();
                var e = GameGlobal.modelRole.voMine.level,
                    i = t.level,
                    o = GameGlobal.modelCrossTeam.lvMapTongGuan;
                e >= i ? this.gpNoOpenExml.visible = !1 : (this.gpNoOpenExml.visible = !0, this.lbLevelOpenExml.text = i + "级开启"), VCrossTeamFuBenMain.levelSel == i ? this.imgSelExml.visible = !0 : this.imgSelExml.visible = !1;
                var n = t.awardsST;
                this.lbAwardsExml.text = "首通奖励", o[i] && (n = t.awardsTG, this.lbAwardsExml.text = "通关奖励"), ConfigHelp.makeStrGrids(n, this.gridArr, 0, 0, this.gpAwardsExml, !0, 10, .75);
                var i = t.level;
                VCrossTeamFuBenMain.levelSel == i && GameGlobal.modelCrossTeam.notify(Model_CrossTeamFuBen.MSG_AWARDS_REFLASH, i), this.boss.play()
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.$onRemoveFromStage = function () {
        this.boss.stopAndClear()
    }, e.prototype.onTouchHandler = function () {
        var t = this.v,
            e = t.level,
            i = GameGlobal.modelRole.voMine.level;
        e > i && ViewText.text("该副本" + e + "级开启 o(≧v≦)o~~"), VCrossTeamFuBenMain.levelSel != e && (VCrossTeamFuBenMain.levelSel = e, GameGlobal.modelCrossTeam.notify(Model_CrossTeamFuBen.MSG_REFLASH_FUBEN), GameGlobal.modelCrossTeam.CG1251(e))
    }, e
}(eui.ItemRenderer);
__reflect(VCrossTeamFuBenDataItem.prototype, "VCrossTeamFuBenDataItem");
var VCrossTeamFuBenMain = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "resource/eui_skins/game/crossteamfuben/CrossTeamFuBenMain.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.lbdes.textFlow = HtmlUtil.parse("注:开服前7天,经验和银两全天双倍;" + HtmlUtil.color("经验银两无收益后,还有\n     额外5次侠义值收益", "#516201")), this.base.title = "组队副本";
        var i = egret.TouchEvent.TOUCH_TAP;
        this.scrFuBenDataExml.scrollPolicyV = eui.ScrollPolicy.OFF, this.listFuBenDataExml.itemRenderer = VCrossTeamFuBenDataItem, this.arrayColFuBenData = new eui.ArrayCollection, this.listFuBenDataExml.dataProvider = this.arrayColFuBenData, this.ScrTeamExml.scrollPolicyV = eui.ScrollPolicy.OFF, this.ListTeamExml.itemRenderer = VCrossTeamTeamDataItem, this.arrayColTeamData = new eui.ArrayCollection, this.ListTeamExml.dataProvider = this.arrayColTeamData, this.ScrMemberExml.scrollPolicyV = eui.ScrollPolicy.OFF, this.ListMemberExml.itemRenderer = VCrossTeamMemberDataItem, this.arrayColMemberData = new eui.ArrayCollection, this.ListMemberExml.dataProvider = this.arrayColMemberData, this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.gpJoinSelExml.addEventListener(i, this.touchJoin15, this), this.gp60AutoBattleExml.addEventListener(i, this.touchAutoBattle60, this), this.gpAutoBattleExml.addEventListener(i, this.touchAutoBattle, this), e.autoBattle60SelTime = e.TIME_60, this.btCreateTeamExml.addEventListener(i, this.touchCreateTeam, this), this.btLeaveTeamExml.addEventListener(i, this.touchLeaveTeam, this), this.btJoinExml.addEventListener(i, this.touchJoin, this), this.btBattleExml.addEventListener(i, this.touchBattle, this), this.btnShop.addEventListener(i, this.onShopT, this)
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i);
        var o = this,
            n = CFG_Param.LIB[44];
        n && (e.TIME_15 = n.key / 1e3, this.lbJoinExml.text = e.TIME_15 + "秒自动快速加入"), ModelWeekender.time > 0 ? (this.lbdes1.visible = this.imgweek.visible = !0, this.lbdes2.text = "银两和经验双倍收益，3人组队时再加成30%") : (this.lbdes1.visible = this.imgweek.visible = !1, this.lbdes2.text = "11:00-13:00和23:00-1:00银两和经验双倍收益，3人组队时再加成30%");
        var a = GameGlobal.modelRole.voMine.level;
        if (70 > a) {
            var s = o.getLvMaxExcel();
            a > s && (a = s), e.levelSel = 10 * (a / 10 >> 0)
        } else {
            var s = o.getLvMaxExcel();
            a > s && (a = s);
            var r = e.levelSel;
            r && 0 != r || (e.levelSel = 10 * (a / 10 >> 0))
        }
        e.joinSelTime = e.TIME_15, e.autoBattle60SelTime = e.TIME_60, GameGlobal.modelCrossTeam.CG1251(e.levelSel), o.initFuBenData(), o.reflashFuBenData(), o.showFuBenIndex(), o.reflashBT(), o.reflashTimesAndXiaYi(), GameGlobal.modelCrossTeam.on(Model_CrossTeamFuBen.MSG_REFLASH_FUBEN, o.reflashFuBenData, o), GameGlobal.modelCrossTeam.on(Model_CrossTeamFuBen.MSG_BT_REFLASH, o.reflashBT, o), GameGlobal.modelCrossTeam.on(Model_CrossTeamFuBen.MSG_AWARDS_REFLASH, o.reflashAwards, o), GameGlobal.modelCrossTeam.on(Model_CrossTeamFuBen.MSG_REFLASH_ALL_TEAM, o.initTeamData, o), GameGlobal.modelCrossTeam.on(Model_CrossTeamFuBen.MSG_REFLASH_MY_TEAM, o.initMemberData, o), GameGlobal.modelCrossTeam.on(Model_CrossTeamFuBen.MSG_REFLASH_TIMES_XIAYI, o.reflashTimesAndXiaYi, o), GameGlobal.tick.addInterv(o.reflashTime, 1e3, o), GameGlobal.modelGuanqia.setAutoBoss(!1)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this);
        var e = this;
        GameGlobal.modelCrossTeam.off(Model_CrossTeamFuBen.MSG_REFLASH_FUBEN, e.reflashFuBenData, e), GameGlobal.modelCrossTeam.off(Model_CrossTeamFuBen.MSG_BT_REFLASH, e.reflashBT, e), GameGlobal.modelCrossTeam.off(Model_CrossTeamFuBen.MSG_AWARDS_REFLASH, e.reflashAwards, e), GameGlobal.modelCrossTeam.off(Model_CrossTeamFuBen.MSG_REFLASH_ALL_TEAM, e.initTeamData, e), GameGlobal.modelCrossTeam.off(Model_CrossTeamFuBen.MSG_REFLASH_MY_TEAM, e.initMemberData, e), GameGlobal.modelCrossTeam.off(Model_CrossTeamFuBen.MSG_REFLASH_TIMES_XIAYI, e.reflashTimesAndXiaYi, e), GameGlobal.tick.removeInterv(e.reflashTime, e), this.arrayColFuBenData.removeAll()
    }, e.prototype.initFuBenData = function () {
        var t = GameGlobal.modelCrossTeam.fubenData;
        if (!(t && t.length > 1))
            for (var e in CFG_zuduifuben_131.LIB) {
                var i = CFG_zuduifuben_131.LIB[e],
                    o = new Vo_CrossTeamFuBenData;
                o.level = i.l, o.name = i.n, o.bossModel = i.gwmx, o.awardsST = i.stjl, o.awardsTG = i.tzjl, t.push(o)
            }
    }, e.prototype.reflashFuBenData = function () {
        var t = GameGlobal.modelCrossTeam.fubenData;
        this.arrayColFuBenData.replaceAll(t)
    }, e.prototype.showFuBenIndex = function () {
        var t = this;
        this.arrayColFuBenData.refresh(), GameGlobal.tick.addInterv(t.delayFunc, 100, t, !0)
    }, e.prototype.delayFunc = function (t) {
        var i = 0,
            o = 0,
            n = e.levelSel;
        for (var a in CFG_zuduifuben_131.LIB) {
            var s = CFG_zuduifuben_131.LIB[a];
            s.l < n && i++, o++
        }
        var r = 582,
            l = r / 3,
            h = l * i;
        i > o - 3 && (h = l * (o - 3)), t.scrFuBenDataExml.viewport.scrollH = h
    }, e.prototype.initTeamData = function () {
        var t = GameGlobal.modelCrossTeam.teamData;
        t.sort(this.sortFunc), DisplayUtil.fillDataAC(this.arrayColTeamData, t)
    }, e.prototype.sortFunc = function (t, e) {
        return e.type - t.type
    }, e.prototype.initMemberData = function () {
        var t = GameGlobal.modelCrossTeam.memberData;
        t.sort(this.sortFuncMember), this.arrayColMemberData.replaceAll(t), this.arrayColMemberData.refresh()
    }, e.prototype.sortFuncMember = function (t, e) {
        return t.type - e.type
    }, e.prototype.reflashAwards = function (t) {
        var e = CFG_zuduifuben_131.LIB[t],
            i = e.jlzs,
            o = ConfigHelp.makeToolByIds(1, i);
        ConfigHelp.makeVoGrids(o, this.gridArr, 0, 0, this.gpAwardsExml, !0, 10, .85);
        var n = GameGlobal.modelCrossTeam.lvTeam;
        this.lbFuBenNameExml.text = e.n, 0 != n && (e = CFG_zuduifuben_131.LIB[n], this.lbFuBenNameExml.text = e.n)
    }, e.prototype.reflashBT = function () {
        var t = GameGlobal.modelCrossTeam.typeMember;
        this.btCreateTeamExml.visible = !1, this.btJoinExml.visible = !1, this.btLeaveTeamExml.visible = !1, this.btBattleExml.visible = !1, this.gpJoinSelExml.visible = !1, this.gp60AutoBattleExml.visible = !1, this.gpAutoBattleExml.visible = !1, this.imgJoinSelExml.visible = !1, this.img60AutoBattleExml.visible = !1, this.imgAutoBattleExml.visible = !1, this.ScrTeamExml.visible = !1, this.ScrMemberExml.visible = !1, 0 == t ? (this.btCreateTeamExml.visible = !0, this.btJoinExml.visible = !0, this.gpJoinSelExml.visible = !0, e.joinSel && (this.imgJoinSelExml.visible = !0), this.ScrTeamExml.visible = !0) : 1 == t ? (this.btLeaveTeamExml.visible = !0, this.btBattleExml.visible = !0, this.gp60AutoBattleExml.visible = !0, this.gpAutoBattleExml.visible = !0, e.autoBattle60Sel && (this.img60AutoBattleExml.visible = !0), e.autoBattleSel && (this.imgAutoBattleExml.visible = !0), this.ScrMemberExml.visible = !0) : (this.btLeaveTeamExml.visible = !0, this.ScrMemberExml.visible = !0)
    }, e.prototype.reflashTime = function (t) {
        var i = GameGlobal.layerMgr.isShowing(UIConst.ZDFBPAGE);
        if (i) {
            var o = GameGlobal.modelCrossTeam.typeMember;
            e.joinSel && 0 == o && (e.joinSelTime = e.joinSelTime - 1, t.lbJoinExml.text = e.joinSelTime + "秒自动快速加入", e.joinSelTime <= 0 && (GameGlobal.modelCrossTeam.CG1253(2, e.levelSel), e.joinSelTime = e.TIME_15)), e.autoBattle60Sel && 0 != o && (e.autoBattle60SelTime = e.autoBattle60SelTime - 1, t.lb60AutoBattleExml.text = e.autoBattle60SelTime + "秒自动开始战斗", e.autoBattle60SelTime <= 0 && (GameGlobal.modelCrossTeam.CG1257(), e.autoBattle60SelTime = e.TIME_60));
            var n = GameGlobal.modelCrossTeam.memberData,
                a = 0;
            for (var s in n) {
                var r = n[s];
                r.idHero > 0 && a++
            }
            e.autoBattleSel && 1 == o && a >= 3 && e.autoBattle5SelTime--, e.autoBattleSel && 1 == o && a >= 3 && e.autoBattle5SelTime <= 0 && (GameGlobal.modelCrossTeam.CG1257(), e.autoBattle5SelTime = 5), e.autoAddMemberTime--, 0 != o && 3 > a && e.autoAddMemberTime <= 0 && (GameGlobal.modelCrossTeam.CG1263(), e.autoAddMemberTime = 6), 0 == o && e.autoAddMemberTime <= 0 && (GameGlobal.modelCrossTeam.CG1251(GameGlobal.modelCrossTeam.lvFuBen), e.autoAddMemberTime = 6)
        }
    }, e.prototype.touchJoin15 = function () {
        var t = e.joinSel;
        t ? (this.imgJoinSelExml.visible = !1, e.joinSel = !1, e.joinSelTime = e.TIME_15, this.lbJoinExml.text = e.joinSelTime + "秒自动快速加入") : (this.imgJoinSelExml.visible = !0, e.joinSel = !0)
    }, e.prototype.touchAutoBattle60 = function () {
        var t = e.autoBattle60Sel;
        t ? (this.img60AutoBattleExml.visible = !1, e.autoBattle60Sel = !1, e.autoBattle60SelTime = e.TIME_60, this.lb60AutoBattleExml.text = e.autoBattle60SelTime + "秒自动开始战斗") : (this.img60AutoBattleExml.visible = !0, e.autoBattle60Sel = !0)
    }, e.prototype.touchAutoBattle = function () {
        var t = e.autoBattleSel;
        t ? (this.imgAutoBattleExml.visible = !1, e.autoBattleSel = !1) : (this.imgAutoBattleExml.visible = !0, e.autoBattleSel = !0)
    }, e.prototype.reflashTimesAndXiaYi = function () {
        this.lbXiaYiExml.text = "侠义值:" + GameGlobal.modelCrossTeam.xiayi;
        var t = GameGlobal.modelCrossTeam.battleTimes - 5;
        if (0 >= t && (t = 0), GameGlobal.modelCrossTeam.battleTimes <= 5) var e = GameGlobal.modelCrossTeam.battleTimes;
        else e = 5;
        this.lbShengYuExml.text = "经验银两次数:" + t + "/30", this.lbShengYuxyz.text = "侠义值次数:" + e + "/5"
    }, e.prototype.touchCreateTeam = function () {
        var t = e.levelSel;
        GameGlobal.modelCrossTeam.CG1253(1, t)
    }, e.prototype.touchLeaveTeam = function () {
        GameGlobal.modelCrossTeam.CG1259()
    }, e.prototype.touchJoin = function () {
        var t = e.levelSel;
        GameGlobal.modelCrossTeam.CG1253(2, t)
    }, e.prototype.touchBattle = function () {
        GameGlobal.modelCrossTeam.CG1257()
    }, e.prototype.onShopT = function () {
        GameGlobal.layerMgr.open(UIConst.STORE, Enum_shangChengType.ZHENXI)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.getLvMaxExcel = function () {
        var t = GameGlobal.modelCrossTeam.lvMaxExcel;
        if (0 == t) {
            t = 0;
            for (var e in CFG_zuduifuben_131.LIB) {
                var i = CFG_zuduifuben_131.LIB[e],
                    o = i.l;
                o > t && (t = o)
            }
            GameGlobal.modelCrossTeam.lvMaxExcel = t
        }
        return t
    }, e.joinSel = !0, e.joinSelTime = 0, e.TIME_15 = 15, e.autoBattle60Sel = !0, e.autoBattle60SelTime = 0, e.TIME_60 = 60, e.autoBattle5SelTime = 5, e.autoBattleSel = !0, e.autoAddMemberTime = 6, e
}(BaseEUIView);
__reflect(VCrossTeamFuBenMain.prototype, "VCrossTeamFuBenMain");
var VCrossTeamMemberDataItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.imgHead = new eui.Image, e.skinName = "resource/eui_skins/game/crossteamfuben/CrossTeamMemberPage.exml", e
    }
    return __extends(e, t), e.prototype.partAdded = function (e, i) {
        t.prototype.partAdded.call(this, e, i)
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        this.imgCloseExml.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onTouchHandler, this), this.gpHeadExml.addChild(this.imgHead)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.v
        },
        set: function (t) {
            if (t) {
                this.v = t, this.lbWaitJoinExml.visible = !1, this.gpMemberDataExml.visible = !1, this.imgLeaderExml.visible = !1, this.imgCloseExml.visible = !1;
                var e = t.idHero;
                if (0 != e) {
                    this.gpMemberDataExml.visible = !0;
                    var i = IconUtil.getRoleHead(t.job);
                    this.imgHead.source = i, this.lbNameExml.text = t.nameHero, this.lbLevelExml.text = "等级：" + t.levelHero, this.lbStrengthExml.text = "战力：" + t.strengthHero;
                    var o = GameGlobal.modelRole.voMine.id,
                        n = GameGlobal.modelCrossTeam.memberData,
                        a = 0;
                    for (var s in n) {
                        var r = n[s],
                            l = r.idHero,
                            h = r.type;
                        if (1 == h) {
                            a = l;
                            break
                        }
                    }
                    var c = t.type;
                    1 == c ? (this.imgLeaderExml.visible = !0, this.imgCloseExml.visible = !1) : 2 == c && a == o && (this.imgLeaderExml.visible = !1, this.imgCloseExml.visible = !0)
                } else this.lbWaitJoinExml.visible = !0
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onTouchHandler = function () {
        var t = this.v.idHero;
        this.v.type;
        GameGlobal.modelCrossTeam.CG1255(t)
    }, e
}(eui.ItemRenderer);
__reflect(VCrossTeamMemberDataItem.prototype, "VCrossTeamMemberDataItem");
var VCrossTeamTeamDataItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/crossteamfuben/CrossTeamTeamPage.exml", e
    }
    return __extends(e, t), e.prototype.partAdded = function (e, i) {
        t.prototype.partAdded.call(this, e, i)
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        this.btJoinExml.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onTouchHandler, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.v
        },
        set: function (t) {
            if (t) {
                this.v = t, this.lbLeaderNameExml.text = t.nameLeader, this.lbNumMemberExml.text = "人数:" + t.numMember + "/3";
                var e = t.type;
                1 == e ? (this.imgBattlingExml.visible = !0, this.btJoinExml.visible = !1) : (this.imgBattlingExml.visible = !1, this.btJoinExml.visible = !0)
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onTouchHandler = function () {
        var t = this.v.idTeam;
        GameGlobal.modelCrossTeam.CG1261(t)
    }, e
}(eui.ItemRenderer);
__reflect(VCrossTeamTeamDataItem.prototype, "VCrossTeamTeamDataItem");
var Vo_CrossTeamFuBenData = function () {
    function t() {}
    return t
}();
__reflect(Vo_CrossTeamFuBenData.prototype, "Vo_CrossTeamFuBenData");
var Vo_CrossTeamMemberData = function () {
    function t() {}
    return t
}();
__reflect(Vo_CrossTeamMemberData.prototype, "Vo_CrossTeamMemberData");
var Vo_CrossTeamTeamData = function () {
    function t() {}
    return t
}();
__reflect(Vo_CrossTeamTeamData.prototype, "Vo_CrossTeamTeamData");
var ModelDaliy = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.YsNum = 0, e.YsTime = 0, e.YsHuan = 0, e.Ys5Award = 0, e.Ys10Award = 0, e.ZdIncome = 0, e.ZdHuan = 0, e.ZdAward = 0, e.MrHuan = 0, e.MrAward = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1550, this.GC1550, this), e.regHand(1552, this.GC1552, this), e.regHand(1554, this.GC1554, this), e.regHand(1556, this.GC1556, this), e.regHand(1558, this.GC1558, this), e.regHand(1560, this.GC1560, this), e.regHand(1562, this.GC1562, this)
    }, e.prototype.CG1551 = function () {
        var t = this.getBytes();
        this.sendSocket(1551, t)
    }, e.prototype.CG1553 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1553, e)
    }, e.prototype.CG1555 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1555, e)
    }, e.prototype.CG1557 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1557, e)
    }, e.prototype.CG1559 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1559, e)
    }, e.prototype.CG1561 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1561, e)
    }, e.prototype.GC1550 = function (t, i) {
        var o = GameGlobal.modelDaliy;
        o.YsNum = i.readByte(), o.YsTime = i.readInt();
        for (var n = i.readShort(), a = 0; n > a; a++) {
            var s = i.readInt(),
                r = i.readInt(),
                l = i.readByte();
            if (!Vo_YaoShou.Map[s]) {
                var h = new Vo_YaoShou;
                h.id = s, h.sysid = r, h.star = l, Vo_YaoShou.Map[s] = h
            }
        }
        o.YsHuan = i.readByte(), o.Ys5Award = i.readByte(), o.ZdIncome = i.readByte(), o.ZdHuan = i.readByte(), o.ZdAward = i.readByte(), o.MrHuan = i.readByte(), o.MrAward = i.readByte(), o.Ys10Award = i.readByte(), GameGlobal.modelDaliy.notify(e.UPDATE), e.setNotice()
    }, e.prototype.GC1552 = function (t, i) {
        var o = GameGlobal.modelDaliy,
            n = i.readInt(),
            a = i.readInt(),
            s = i.readByte();
        if (!Vo_YaoShou.Map[n]) {
            var r = new Vo_YaoShou;
            r.id = n, r.sysid = a, r.star = s, Vo_YaoShou.Map[n] = r
        }
        o.YsNum = i.readByte(), r && (GameGlobal.modelDaliy.notify(e.YS, r), e.setNotice())
    }, e.prototype.GC1554 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt();
            Vo_YaoShou.setXinById(n), GameGlobal.modelDaliy.notify(e.STAR)
        } else platform.askOpenRecharge()
    }, e.prototype.GC1556 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt();
            Vo_YaoShou.Map[n] && delete Vo_YaoShou.Map[n], GameGlobal.modelDaliy.notify(e.REMOVEYS, n), GameGlobal.modelDaliy.CG1551()
        }
    }, e.prototype.GC1558 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte();
            e.setComple(n, 1), GameGlobal.modelDaliy.notify(e.FINISH), e.setNotice()
        } else platform.askOpenRecharge()
    }, e.prototype.GC1560 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte();
            e.setAward(n, 2), GameGlobal.modelDaliy.notify(e.FINISH), e.setNotice()
        } else GameGlobal.modelBag.checkRLTips(0)
    }, e.prototype.GC1562 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte();
            e.setAward(n, 2), GameGlobal.modelDaliy.notify(e.FINISH), e.setNotice()
        } else 2 == o ? GameGlobal.modelBag.checkRLTips(0) : 3 == o && platform.askOpenRecharge()
    }, e.setAward = function (t, e) {
        var i = GameGlobal.modelDaliy;
        switch (t) {
            case 1:
                i.Ys5Award = e;
                break;
            case 2:
                i.ZdAward = e, i.ZdHuan = 10;
                break;
            case 3:
                i.MrAward = e, i.MrHuan = 100;
                break;
            case 4:
                i.Ys10Award = e, i.YsHuan = 10
        }
    }, e.setComple = function (t, e) {
        var i = GameGlobal.modelDaliy;
        switch (t) {
            case 1:
                2 != i.Ys5Award && (i.Ys5Award = e), i.Ys10Award = e, i.YsHuan = 10;
                break;
            case 2:
                i.ZdAward = e, i.ZdHuan = 10;
                break;
            case 3:
                i.MrAward = e, i.MrHuan = 100
        }
    }, e.setNotice = function () {
        for (var t = GameGlobal.modelDaliy, i = [t.Ys5Award, t.ZdAward, t.MrAward], o = 0; o < i.length; o++) switch (o) {
            case 0:
                e.setYsNo();
                break;
            case 1:
                e.setZdNo();
                break;
            case 2:
                e.setMrNO()
        }
        e.Notice = VYaoShouLL.Notice || VZhuDuiLL.NoticeRed || VMeiRi100.Notice, GameGlobal.modelDaliy.notify(e.NOTICE)
    }, e.setYsNo = function () {
        var t = GameGlobal.modelDaliy;
        0 == t.Ys5Award ? t.YsHuan < 10 && t.YsNum > 0 ? VYaoShouLL.Notice = !0 : VYaoShouLL.Notice = !1 : 1 == t.Ys5Award ? VYaoShouLL.Notice = !0 : 2 == t.Ys5Award && (0 == t.Ys10Award ? VYaoShouLL.Notice = !1 : 1 == t.Ys10Award ? VYaoShouLL.Notice = !0 : 2 == t.Ys10Award && (VYaoShouLL.Notice = !1))
    }, e.setZdNo = function () {
        var t = GameGlobal.modelDaliy,
            e = GameGlobal.modelShiLian.systemIDShowRadMap[1018];
        0 == t.ZdAward ? VZhuDuiLL.NoticeRed = !1 : 1 == t.ZdAward ? VZhuDuiLL.NoticeRed = !0 : 2 == t.ZdAward && (VZhuDuiLL.NoticeRed = !1);
        var i = !1,
            o = GameGlobal.modelAct.actData.getChildByID(1);
        o && (o = o.getChildByID(40), o && (i = !0)), VZhuDuiLL.NoticeDo = !1, t.ZdIncome > 0 && ((2 & e) > 0 || i) && (VZhuDuiLL.NoticeDo = !0)
    }, e.setMrNO = function () {
        var t = GameGlobal.modelDaliy;
        0 == t.MrAward ? VMeiRi100.Notice = !1 : 1 == t.MrAward ? VMeiRi100.Notice = !0 : 2 == t.MrAward && (VMeiRi100.Notice = !1)
    }, e.DoubleTime = !1, e.Notice = !1, e.InitFinish = !1, e.UPDATE = "UPDATE", e.STAR = "STAR", e.FINISH = "FINISH", e.NOTICE = "NOTICE", e.YS = "YS", e.REMOVEYS = "REMOVEYS", e
}(BaseModel);
__reflect(ModelDaliy.prototype, "ModelDaliy");
var VDaliy = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = -1, e.skinName = "resource/eui_skins/game/daliy/DaliyPnl.exml", e
    }
    return __extends(e, t), e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.base.btnReturn, 30, 30)
    }, e.prototype.guidePage = function (t) {
        var e = this["tbtn" + t];
        e && QuestGuideArrow.getIns().guideTo(e, 55, 30)
    }, e.prototype.checkPage = function (t) {
        return this._sel == t
    }, e.prototype.initView = function () {
        this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), GameGlobal.layerMgr.reg(UIConst.YAOSHOULL, VYaoShouLL, this.PageGroup), GameGlobal.layerMgr.reg(UIConst.ZHUDUILL, VZhuDuiLL, this.PageGroup), GameGlobal.layerMgr.reg(UIConst.MEIRI100, VMeiRi100, this.PageGroup), GameGlobal.layerMgr.reg(UIConst.ZHUACHONG, VZhuaChongPage, this.PageGroup), this.tbtn0.label = "妖兽历练", this.tbtn1.label = "组队历练", this.tbtn2.label = "每日100", this.tbtn3.label = "捕捉灵兽", this.tbtn0.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.tbtn1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.tbtn2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.tbtn3.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.tbtn0:
                this.setSel(0);
                break;
            case this.tbtn1:
                this.setSel(1);
                break;
            case this.tbtn2:
                this.setSel(2);
                break;
            case this.tbtn3:
                CFG_COMMOND.isOpen(UIConst.ZHUACHONG, !0) && this.setSel(3)
        }
    }, e.prototype.setSel = function (t) {
        switch (this._sel) {
            case 0:
                this.tbtn0.selected = !1, GameGlobal.layerMgr.close(UIConst.YAOSHOULL);
                break;
            case 1:
                this.tbtn1.selected = !1, GameGlobal.layerMgr.close(UIConst.ZHUDUILL);
                break;
            case 2:
                this.tbtn2.selected = !1, GameGlobal.layerMgr.close(UIConst.MEIRI100);
                break;
            case 3:
                this.tbtn3.selected = !1, GameGlobal.layerMgr.close(UIConst.ZHUACHONG)
        }
        switch (t) {
            case 0:
                this.tbtn0.selected = !0, GameGlobal.layerMgr.open(UIConst.YAOSHOULL), this.base.title = "妖兽历练";
                break;
            case 1:
                this.tbtn1.selected = !0, GameGlobal.layerMgr.open(UIConst.ZHUDUILL), this.base.title = "组队历练";
                break;
            case 2:
                this.tbtn2.selected = !0, GameGlobal.layerMgr.open(UIConst.MEIRI100), this.base.title = "每日100";
                break;
            case 3:
                this.tbtn3.selected = !0, GameGlobal.layerMgr.open(UIConst.ZHUACHONG), this.base.title = "捕捉灵兽"
        }
        this._sel = t
    }, e.prototype.setNotice = function () {
        this.tbtn0.setNoticVis(VYaoShouLL.Notice), this.tbtn1.setNoticVis(VZhuDuiLL.NoticeRed), this.tbtn1_double.visible = VZhuDuiLL.NoticeDo, this.tbtn2.setNoticVis(VMeiRi100.Notice), this.tbtn3.setNoticVis(GameGlobal.modelPet.hasCatchPet)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e > 0 ? this.setSel(e) : this.setSel(0), this.setNotice(), GameGlobal.modelDaliy.on(ModelDaliy.NOTICE, this.setNotice, this), GameGlobal.modelDaliy.CG1551()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelDaliy.off(ModelDaliy.NOTICE, this.setNotice, this), this.setSel(-1)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VDaliy.prototype, "VDaliy");
var VDaliyTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/daliy/DaliyTip.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.btnEsc.label = "取消", this.btnSure.label = "确定", this.btnEsc.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnEscT, this), this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnSureT, this)
    }, e.prototype.btnEscT = function () {
        this.closeHandler()
    }, e.prototype.btnSureT = function (t) {
        this.funSure.apply(this.caller, t), this.closeHandler()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.txt.textFlow = HtmlUtil.parse(e.text), this.funSure = e.funSure, this.caller = e.caller
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.show = function (t, e, i) {
        void 0 === i && (i = null);
        var o = {
            text: t,
            funSure: e,
            caller: i
        };
        GameGlobal.layerMgr.open(UIConst.DALIYTIP, o)
    }, e
}(PopUpUI);
__reflect(VDaliyTip.prototype, "VDaliyTip");
var VMeiRi100 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e._x = -1, e.skinName = "resource/eui_skins/game/daliy/MeiRi.exml", e
    }
    return __extends(e, t), e.prototype.guideGetAwd = function () {
        var t = this.btnFinish;
        t && QuestGuideArrow.getIns().guideViewCenter(t)
    }, e.prototype.initView = function () {
        this.txtdes.textFlow = [{
            text: "击杀",
            style: {
                textColor: 16712194
            }
        }, {
            text: "100",
            style: {
                textColor: 1090116
            }
        }, {
            text: "波怪物可获得额外奖励",
            style: {
                textColor: 16712194
            }
        }], this.btnFinish.label = "一键完成", this.btn12.label = "1.2倍领取", this.btn12.setNoticeVis(!0), this._x = this.nGroup.x, this.btnFinish.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnFT, this), this.btn12.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btn12T, this)
    }, e.prototype.btn12T = function () {
        VDaliyTip.show("是否花费:" + HtmlUtil.color("50元宝", "#10a244") + "额外获得20%经验奖励？", function () {
            GameGlobal.modelDaliy.CG1561(3)
        })
    }, e.prototype.btnFT = function () {
        var t = GameGlobal.modelRole.voMine.vip,
            e = GameGlobal.modelDaliy.MrAward;
        if (0 == e) {
            if (4 > t) return void ViewText.text("VIP4开启一键完成");
            var i = 1 * (100 - GameGlobal.modelDaliy.MrHuan);
            VDaliyTip.show("是否花费:" + HtmlUtil.color(i + "元宝", "#10a244") + "直接完成剩余环数?", function () {
                GameGlobal.modelDaliy.CG1557(3)
            })
        } else 1 == e && GameGlobal.modelDaliy.CG1559(3)
    }, e.prototype.setGrid = function () {
        var t = CFG_DALIY.LIB1,
            e = GameGlobal.modelRole.voMine.level;
        for (var i in t)
            if (e == parseInt(i)) {
                var o = t[i].mr_jl;
                break
            } var n = ConfigHelp.makeVoList(o),
            a = n.length,
            s = (this.container.width - 90 * a) / (a - 1);
        ConfigHelp.makeVoGrids(n, this.grids, 0, 0, this.container, !0, s)
    }, e.prototype.update = function () {
        this.upProgress(), this.upNum(), this.upBtn()
    }, e.prototype.upBtn = function () {
        var t = GameGlobal.modelDaliy.MrAward;
        switch (t) {
            case 0:
                this.btnFinish.label = "一键完成", this.btnFinish.enabled = !0, this.btnFinish.setNoticeVis(!1), this.Group12.visible = !1, this.btnFinish.horizontalCenter = 0;
                break;
            case 1:
                this.btnFinish.label = "领取奖励", this.btnFinish.enabled = !0, this.btnFinish.setNoticeVis(!0), this.Group12.visible = !0, this.btnFinish.horizontalCenter = 0 / 0, this.btnFinish.left = 130;
                break;
            case 2:
                this.btnFinish.label = "已领取", this.btnFinish.enabled = !1, this.btnFinish.setNoticeVis(!1), this.Group12.visible = !1, this.btnFinish.horizontalCenter = 0
        }
    }, e.prototype.upProgress = function () {
        var t = GameGlobal.modelDaliy.MrHuan,
            e = this.g_progress.width / 100;
        this.progress.width = e * t
    }, e.prototype.upNum = function () {
        var t = "num_json.y",
            e = GameGlobal.modelDaliy.MrHuan;
        if (e >= 10)
            if (e >= 100) this.huan0.source = t + 1, this.huan1.source = t + 0, this.huan1.visible = !0, this.huan2.visible = !0, this.nGroup.x = this._x + 2 * this.huan1.width;
            else {
                var i = e.toString().split("");
                this.huan0.source = t + i[0], this.huan1.source = t + i[1], this.huan1.visible = !0, this.huan2.visible = !1, this.nGroup.x = this._x + this.huan1.width
            }
        else this.huan0.source = t + e.toString(), this.huan1.visible = !1, this.huan2.visible = !1, this.nGroup.x = this._x
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), GameGlobal.modelDaliy.on(ModelDaliy.UPDATE, this.update, this), GameGlobal.modelDaliy.on(ModelDaliy.FINISH, this.update, this), this.setGrid()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelDaliy.off(ModelDaliy.UPDATE, this.update, this), GameGlobal.modelDaliy.off(ModelDaliy.FINISH, this.update, this)
    }, e.Notice = !1, e
}(BaseEUIView);
__reflect(VMeiRi100.prototype, "VMeiRi100");
var Vo_YaoShou = function () {
    function t() {}
    return t.getFristVo = function () {
        for (var e in t.Map) return t.Map[e]
    }, t.setXinById = function (e) {
        var i = t.Map[e];
        i && (i.star = 7)
    }, t.getXinById = function (e) {
        var i = t.Map[e];
        return i ? i.star : null
    }, t.getMapStrById = function (t) {
        var e = CFG_MAP.LIB[t];
        return e ? e.name : null
    }, t.isYs = function (e) {
        var i = parseInt(e.split("ys")[1]);
        return t.Map[i] ? !0 : !1
    }, t.Map = {}, t
}();
__reflect(Vo_YaoShou.prototype, "Vo_YaoShou");
var VYaoShou = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "resource/eui_skins/game/daliy/YaoShou.exml", e
    }
    return __extends(e, t), e.prototype.guideChallenge = function () {
        QuestGuideArrow.getIns().guideViewCenter(this.btnGo)
    }, e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideViewCenter(this.base.btnClose)
    }, e.prototype.initView = function () {
        this.base.title = "妖兽", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.txt0.textFlow = [{
            text: "5回合",
            style: {
                textColor: 1090116
            }
        }, {
            text: "内击败妖兽",
            style: {
                textColor: 12082702
            }
        }], this.txt1.textFlow = [{
            text: "消耗",
            style: {
                textColor: 6835267
            }
        }, {
            text: "5绑元",
            style: {
                textColor: 1090116
            }
        }, {
            text: "可提升至:",
            style: {
                textColor: 6835267
            }
        }, {
            text: "七星奖励",
            style: {
                textColor: 12082702
            }
        }], this.txt2.textFlow = [{
            text: "一星奖励:",
            style: {
                textColor: 6835267
            }
        }, {
            text: "100%奖励\n",
            style: {
                textColor: 1090116
            }
        }, {
            text: "二星奖励:",
            style: {
                textColor: 6835267
            }
        }, {
            text: "115%奖励\n",
            style: {
                textColor: 1090116
            }
        }, {
            text: "三星奖励:",
            style: {
                textColor: 6835267
            }
        }, {
            text: "130%奖励\n",
            style: {
                textColor: 1090116
            }
        }, {
            text: "四星奖励:",
            style: {
                textColor: 6835267
            }
        }, {
            text: "145%奖励\n",
            style: {
                textColor: 1090116
            }
        }, {
            text: "五星奖励:",
            style: {
                textColor: 6835267
            }
        }, {
            text: "160%奖励\n",
            style: {
                textColor: 1090116
            }
        }, {
            text: "六星奖励:",
            style: {
                textColor: 6835267
            }
        }, {
            text: "180%奖励\n",
            style: {
                textColor: 1090116
            }
        }, {
            text: "七星奖励:",
            style: {
                textColor: 6835267
            }
        }, {
            text: "200%奖励\n",
            style: {
                textColor: 1090116
            }
        }], this.btnGo.label = "挑战", this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnGoT, this), this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnAddT, this)
    }, e.prototype.btnGoT = function () {
        GameGlobal.modelDaliy.CG1555(this.ys.id), this.closeHandler()
    }, e.prototype.btnAddT = function () {
        var t = this,
            e = Vo_YaoShou.getXinById(this.ys.id);
        return 7 == e ? void ViewText.text("妖兽星级已满级，无法再提升！") : void VDaliyTip.show("是否消耗" + HtmlUtil.color("5绑定元宝", "#10a244") + ",将该妖兽星级提升至满级", function () {
            GameGlobal.modelDaliy.CG1553(t.ys.id)
        })
    }, e.prototype.upStar = function () {
        for (var t = Vo_YaoShou.getXinById(this.ys.id), e = 0; 7 > e; e++) {
            var i = this.xinGroup.getChildAt(e);
            i.source = "CMS1_json.bm_star3", t + 1 == e + 1 && (i.source = "CMS1_json.bm_star0", t++)
        }
        this.setGrid()
    }, e.prototype.setGrid = function () {
        var t = CFG_DALIY.LIB2,
            e = GameGlobal.modelRole.voMine.level;
        for (var i in t)
            if (e == parseInt(i)) {
                var o = t[i].jsjl;
                break
            } for (var n = Vo_YaoShou.getXinById(this.ys.id), a = [0, 1, 1.15, 1.3, 1.45, 1.6, 1.8, 2], s = ConfigHelp.makeVoList(o), r = 0; r < s.length; r++) {
            var l = s[r];
            l.count = l.count * a[n] >> 0
        }
        var h = s.length,
            c = (this.gridGroup.width - 90 * h) / (h - 1);
        ConfigHelp.makeVoGrids(s, this.grids, 0, 0, this.gridGroup, !0, c)
    }, e.prototype.setPart = function (t) {
        if (!this.petv) {
            var e = this.petv = UIRole.create();
            this.part.addChild(e)
        }
        this.petv.play(700), this.petv.setMonsterID(t), this.petv.setWay(3), this.petv.validParts(), this.petv.scaleX = 1.2, this.petv.scaleY = 1.2
    }, e.prototype.onOpen = function (e) {
        return t.prototype.onOpen.call(this, e), null != e ? this.ys = e : this.ys = Vo_YaoShou.getFristVo(), this.ys ? (this.setPart(this.ys.sysid), this.txtmap.text = Vo_YaoShou.getMapStrById(GameGlobal.modelGuanqia.getCurSceneID()), this.setGrid(), this.upStar(), void GameGlobal.modelDaliy.on(ModelDaliy.STAR, this.upStar, this)) : void this.closeHandler()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelDaliy.off(ModelDaliy.STAR, this.upStar, this)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.$onRemoveFromStage = function () {
        this.petv && this.petv.stopAndClear()
    }, e
}(BaseEUIView);
__reflect(VYaoShou.prototype, "VYaoShou");
var IconList = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "IconListSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.souceData == new eui.ArrayCollection, this.list.dataProvider = this.souceData, this.list.itemRenderer = IconItem, this.leftButton.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.rightButton.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), DisplayUtil.popBtnStyle(this.leftButton), DisplayUtil.popBtnStyle(this.rightButton), this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onListTouch, this)
    }, e.prototype.setData = function (t) {
        this.souceData.source = t
    }, e.prototype.onTouch = function (t) {
        switch (t.currentTarget) {
            case this.leftButton:
                break;
            case this.rightButton:
                break;
            case this.list:
        }
    }, e.prototype.getLeftBtnP = function () {
        return this.leftBtnP || (this.leftBtnP = new egret.Point, this.leftBtnP.x = this.x + this.leftButton.x), this.leftBtnP
    }, e.prototype.getRightBtnP = function () {
        return this.rightBtnP || (this.rightBtnP = new egret.Point, this.rightBtnP.x = this.x + this.rightButton.x), this.rightBtnP
    }, e.prototype.onListTouch = function () {
        this.selectItem(this.list.selectedIndex)
    }, e.prototype.selectItem = function (t) {
        this.list.getChildAt(t);
        this.callFunc && this.callFunc.call(this.thisObj, t)
    }, e.prototype.addSelectListener = function (t, e) {
        this.callFunc = t, this.thisObj = e
    }, e
}(eui.Component);
__reflect(IconList.prototype, "IconList");
var VZhuaChongPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "ZhuaChongSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnLib.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLibT, this), this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGoT, this), ConfigHelp.makeStrGrids("1,950;1,951;1,952", this.gridArr, 190, 310, this, !0, 15)
    }, e.prototype.onOpen = function (t) {
        GameGlobal.tick.addInterv(this.updateTime, 1e3, this), this.update(), this.updateTime(this), this.checkNotic(), GameGlobal.modelDaliy.on(ModelDaliy.NOTICE, this.onChange, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.updateTime), GameGlobal.modelDaliy.off(ModelDaliy.NOTICE, this.onChange)
    }, e.prototype.onLibT = function () {
        GameGlobal.layerMgr.open(UIConst.TUJIAN)
    }, e.prototype.onGoT = function () {
        var t = GameGlobal.mapScene;
        t.changeMap(SceneCtrl.PETID), GameGlobal.layerMgr.close(UIConst.DALIY)
    }, e.prototype.update = function () {
        var t = GameGlobal.modelPet,
            e = t.catchingPets.length;
        this.lbPetNum.text = e + "/5", this.lbAssRemain.textFlow = HtmlUtil.parse(Lang.reTxt("今日协助剩余次数:{0}", HtmlUtil.fontNoSize(t.remainAssistTimes + "/5", t.remainAssistTimes ? Color.UIGREEN2_STR : Color.UIRED_STR)))
    }, e.prototype.updateTime = function (t) {
        var e = GameGlobal.modelPet;
        if (e.catchingPets.length >= 5) i = 1800;
        else var i = e.getNxtCatchPetSec() >> 0;
        var o = DateUtil.getHMSBySecond2(i);
        t.lbTime.text = o
    }, e.prototype.onChange = function () {
        this.checkNotic(), this.update()
    }, e.prototype.checkNotic = function () {
        this.btnGo.setNoticeVis(GameGlobal.modelPet.hasCatchPet)
    }, e
}(BaseEUIView);
__reflect(VZhuaChongPage.prototype, "VZhuaChongPage");
var VZhuDuiLL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._x = -1, e.grids = [], e.skinName = "resource/eui_skins/game/daliy/ZhuDui.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.txtdes.textFlow = [{
            text: "完成",
            style: {
                textColor: 16712194
            }
        }, {
            text: "10",
            style: {
                textColor: 1090116
            }
        }, {
            text: "次组队副本可获得额外奖励",
            style: {
                textColor: 16712194
            }
        }], this.txtdes1.textFlow = [{
            text: "11:00-13:00",
            style: {
                textColor: 1090116
            }
        }, {
            text: "和",
            style: {
                textColor: 6835267
            }
        }, {
            text: "23:00-1:00",
            style: {
                textColor: 1090116
            }
        }, {
            text: "经验和银两双倍收益",
            style: {
                textColor: 6835267
            }
        }], this.btnFinish.label = "一键完成", this.btnGo.label = "前往击杀", this.btn12.label = "1.2倍领取", this.btn12.setNoticeVis(!0), this._x = this.nGroup.x, this.btnFinish.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnFT, this), this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnGoT, this), this.btn12.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btn12T, this)
    }, e.prototype.btn12T = function () {
        VDaliyTip.show("是否花费:" + HtmlUtil.color("50元宝", "#10a244") + "额外获得20%经验奖励？", function () {
            GameGlobal.modelDaliy.CG1561(2)
        })
    }, e.prototype.btnFT = function () {
        var t = GameGlobal.modelRole.voMine.vip,
            e = GameGlobal.modelDaliy.ZdAward;
        if (0 == e) {
            if (4 > t) return void ViewText.text("VIP4开启一键完成");
            var i = 10 * (10 - GameGlobal.modelDaliy.ZdHuan);
            VDaliyTip.show("是否花费:" + HtmlUtil.color(i + "元宝", "#10a244") + "直接完成剩余环数?", function () {
                GameGlobal.modelDaliy.CG1557(2)
            })
        } else 1 == e && GameGlobal.modelDaliy.CG1559(2)
    }, e.prototype.btnGoT = function () {
        CFG_COMMOND.isOpen(1018, !0) && (GameGlobal.layerMgr.open(UIConst.ZDFBPAGE), GameGlobal.layerMgr.close(UIConst.DALIY))
    }, e.prototype.update = function () {
        var t = GameGlobal.modelDaliy.ZdIncome - 5;
        if (0 >= t && (t = 0), GameGlobal.modelDaliy.ZdIncome <= 5) var e = GameGlobal.modelDaliy.ZdIncome;
        else e = 5;
        this.txtys.text = t + "/30", this.txtys1.text = e + "/5", this.upProgress(), this.upNum(), this.upBtn(), this.setNotice()
    }, e.prototype.upBtn = function () {
        var t = GameGlobal.modelDaliy.ZdAward;
        switch (t) {
            case 0:
                this.btnFinish.label = "一键完成", this.btnFinish.enabled = !0, this.Group12.visible = !1;
                break;
            case 1:
                this.btnFinish.label = "领取奖励", this.btnFinish.enabled = !0, this.Group12.visible = !0;
                break;
            case 2:
                this.btnFinish.label = "已领取", this.btnFinish.enabled = !1, this.Group12.visible = !1
        }
    }, e.prototype.upProgress = function () {
        var t = GameGlobal.modelDaliy.ZdHuan,
            e = this.g_progress.width / 10;
        this.progress.width = e * t
    }, e.prototype.upNum = function () {
        var t = "num_json.y",
            e = GameGlobal.modelDaliy.ZdHuan;
        e >= 10 ? (this.huan0.source = t + 1, this.huan1.visible = !0, this.nGroup.x = this._x + this.huan1.width) : (this.huan0.source = t + e.toString(), this.huan1.visible = !1, this.nGroup.x = this._x)
    }, e.prototype.setGrid = function () {
        var t = CFG_DALIY.LIB1,
            e = GameGlobal.modelRole.voMine.level;
        for (var i in t)
            if (e == parseInt(i)) {
                var o = t[i].zd_jl;
                break
            } var n = ConfigHelp.makeVoListByArr(Util.strToArr(o)),
            a = n.length,
            s = (this.container.width - 90 * a) / (a - 1);
        ConfigHelp.makeVoGrids(n, this.grids, 0, 0, this.container, !0, s)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), GameGlobal.modelDaliy.on(ModelDaliy.UPDATE, this.update, this), GameGlobal.modelDaliy.on(ModelDaliy.FINISH, this.update, this), this.setGrid()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelDaliy.off(ModelDaliy.UPDATE, this.update, this), GameGlobal.modelDaliy.off(ModelDaliy.FINISH, this.update, this)
    }, e.prototype.setNotice = function () {
        var t = GameGlobal.modelDaliy,
            e = GameGlobal.modelShiLian.systemIDShowRadMap[1018];
        0 == t.ZdAward ? this.btnFinish.setNoticeVis(!1) : 1 == t.ZdAward ? (this.btnFinish.setNoticeVis(!0), this.bg_double.visible = !1) : 2 == t.ZdAward && (this.btnFinish.setNoticeVis(!1), this.bg_double.visible = !1);
        var i = !1,
            o = GameGlobal.modelAct.actData.getChildByID(1);
        o && (o = o.getChildByID(40), o && (i = !0)), this.bg_double.visible = !1, t.ZdIncome > 0 && ((2 & e) > 0 || i) && (this.bg_double.visible = !0)
    }, e.NoticeRed = !1, e.NoticeDo = !1, e
}(BaseEUIView);
__reflect(VZhuDuiLL.prototype, "VZhuDuiLL");
var ModelDairyAnswer = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1930, this.GC1930, this), e.regHand(1932, this.GC1932, this), e.regHand(1934, this.GC1934, this), e.regHand(1936, this.GC1936, this), e.regHand(1938, this.GC1938, this), e.regHand(1940, this.GC1940, this), e.regHand(1942, this.GC1942, this), e.regHand(1944, this.GC1944, this)
    }, e.prototype.GC1930 = function (t, e) {
        var i = e.readUTF();
        if (VoDairyPM.preChamName = i, GameGlobal.layerMgr.isOpenView(UIConst.HUODONG)) {
            var o = GameGlobal.layerMgr.getView(UIConst.HUODONG);
            o && o.update()
        }
    }, e.prototype.CG1931 = function () {
        this.sendSocket(1931, this.getBytes())
    }, e.prototype.GC1932 = function (t, i) {
        var o = t.readPaiHangInfo(i);
        VoDairyPM.updateQianSan(o), VoDairyPM.mineScore = i.readShort(), VoDairyPM.minePaiming = i.readShort(), VoAnswer.curId = i.readShort(), VoAnswer.mySelIndex = i.readByte(), VoAnswer.leftTime = i.readByte(), VoAnswer.progressNum = i.readByte(), t.notify(e.msg_answerData)
    }, e.prototype.CG1933 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1933, e)
    }, e.prototype.GC1934 = function (t, e) {
        var i = e.readByte(),
            o = e.readByte(),
            n = e.readByte();
        if (1 == i) {
            var a = GameGlobal.layerMgr.getView(UIConst.DAIRYANSWER);
            a && a.setSel(o, n);
            var s = Util.getTempObj();
            1 == n ? s.source = "uieff/datiCG" : s.source = "uieff/daTiSB", GameGlobal.layerMgr.open(UIConst.EFFGLOBALCONT, s)
        } else 2 == i && ViewText.text("你已经回答了该题")
    }, e.prototype.CG1935 = function () {
        this.sendSocket(1935, this.getBytes())
    }, e.prototype.GC1936 = function (t, i) {
        var o = t.readPaiHangInfo(i);
        VoDairyPM.updatePaiHang(o), t.notify(e.msg_answerPaiHang)
    }, e.prototype.GC1938 = function (t, e) {
        var i = e.readByte();
        if (VoAnswer.actLeftime = i, GameGlobal.layerMgr.isOpenView(UIConst.MAINMENU)) {
            var o = GameGlobal.layerMgr.getView(UIConst.MAINMENU);
            o.checkDairyAnswer()
        }
        NoticeHDMgr.noticeDairy = !0, t.updateLeftUIRed()
    }, e.prototype.GC1940 = function (t, e) {
        var i = e.readByte(),
            o = e.readByte();
        if (VoAnswer.progressNum = i, VoAnswer.leftTime = o, VoAnswer.actLeftime = -1, VoAnswer.refTitleTime = -1, GameGlobal.layerMgr.isOpenView(UIConst.MAINMENU)) {
            var n = GameGlobal.layerMgr.getView(UIConst.MAINMENU);
            n.checkDairyAnswer()
        }
        if (GameGlobal.layerMgr.isOpenView(UIConst.DAIRYANSWER)) {
            var a = GameGlobal.layerMgr.getView(UIConst.DAIRYANSWER);
            a.setState("st1")
        }
        NoticeHDMgr.noticeDairy = !0, t.updateLeftUIRed()
    }, e.prototype.GC1942 = function (t, e) {
        var i = e.readShort(),
            o = e.readShort();
        VoAnswer.actLeftime = -1, VoAnswer.progressNum = -1, VoAnswer.refTitleTime = -1, ItemAnswer._isSel = -1, GameGlobal.layerMgr.isOpenView(UIConst.DAIRYANSWER) && GameGlobal.layerMgr.close(UIConst.DAIRYANSWER), GameGlobal.layerMgr.isOpenView(UIConst.DAIRYPAIHANG) && GameGlobal.layerMgr.close(UIConst.DAIRYPAIHANG), GameGlobal.layerMgr.isOpenView(UIConst.DAIRYCOUNT) && GameGlobal.layerMgr.close(UIConst.DAIRYCOUNT), o > 0 && i > 0 && GameGlobal.layerMgr.open(UIConst.DAIRYJIESUAN, [i, o]), NoticeHDMgr.noticeDairy = !1, t.updateLeftUIRed()
    }, e.prototype.GC1944 = function (t, e) {
        var i = e.readByte();
        if (VoAnswer.refTitleTime = i, VoAnswer.maxRefTlTime = i, VoAnswer.actLeftime = -1, VoAnswer.progressNum = -1, GameGlobal.layerMgr.isOpenView(UIConst.MAINMENU)) {
            var o = GameGlobal.layerMgr.getView(UIConst.MAINMENU);
            o.checkDairyAnswer()
        }
        NoticeHDMgr.noticeDairy = !0, t.updateLeftUIRed()
    }, e.prototype.updateLeftUIRed = function () {
        if (GameGlobal.layerMgr.isOpenView(UIConst.MAINTOWN)) {
            var t = GameGlobal.layerMgr.getView(UIConst.MAINTOWN);
            t.checkHuodongRed()
        }
        if (GameGlobal.layerMgr.isOpenView(UIConst.HUODONG)) {
            var e = GameGlobal.layerMgr.getView(UIConst.HUODONG);
            e.updateNoticeDyAns()
        }
    }, e.prototype.readPaiHangInfo = function (t) {
        for (var e = t.readShort(), i = Util.getTempArr(), o = 0; e > o; o++) {
            var n = t.readByte(),
                a = t.readUTF(),
                s = t.readShort();
            i.push(n, a, s)
        }
        return i
    }, e.msg_answerData = "msg_answerData", e.msg_answerPaiHang = "msg_answerPaiHang", e
}(BaseModel);
__reflect(ModelDairyAnswer.prototype, "ModelDairyAnswer");
var NoticeHDMgr = function () {
    function t() {}
    return t.getDairyNotice = function () {
        return t.noticeDairy
    }, t.getAllNotice = function () {
        return t.getDairyNotice() || GameGlobal.modelExpGift.notice || GameGlobal.modelFish.checkNotic() || GameCtrlBase.instance.getModel(CrossServiceLadder.Model).hadAward
    }, t.noticeDairy = !1, t
}();
__reflect(NoticeHDMgr.prototype, "NoticeHDMgr");
var VDairyAnsPH = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "resource/eui_skins/game/dairyAnswer/VDairyAnsPHSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "答题排行", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.container.itemRenderer = ItemDairyAnsPH, this.container.dataProvider = this.sourceData
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modeldairyAns.on(ModelDairyAnswer.msg_answerPaiHang, this.onUpdate, this), GameGlobal.modeldairyAns.CG1935()
    }, e.prototype.onUpdate = function () {
        this.sourceData.source = VoDairyPM.listPaiHang;
        var t = VoDairyPM.getAwards(VoDairyPM.minePaiming);
        if (t) {
            this.txtMine.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color(VoDairyPM.minePaiming, "#10a244")), this.txtScore.textFlow = HtmlUtil.parse("我的分数: " + HtmlUtil.color(VoDairyPM.mineScore, "#10a244"));
            var e = ConfigHelp.makeVoList(t)[0];
            this.txtAward.text = "x" + e.count
        } else this.txtMine.text = "我的排名: 无", this.txtScore.text = "我的分数: 0", this.txtAward.text = "x0"
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modeldairyAns.off(ModelDairyAnswer.msg_answerPaiHang, this.onUpdate, this)
    }, e
}(BaseEUIView);
__reflect(VDairyAnsPH.prototype, "VDairyAnsPH");
var VDairyAnswer = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData1 = new eui.ArrayCollection, e.sourceData2 = new eui.ArrayCollection, e.sourceDataWord = new eui.ArrayCollection, e.curId = -1, e.isTicking = !1, e.skinName = "resource/eui_skins/game/dairyAnswer/VDairyAnswerSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.txtCheck), this.base.title = "每日答题", this.txtCheck.textFlow = HtmlUtil.underLine(this.txtCheck.text), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.base.createQuestTxt("1.活动每日12:00开启，所有玩家皆可参加；\n2.题目总共设置30题，玩家根据题目来选择答案；\n3.每道题目答对可获得分值，并且答题越快，答对时获得的分值越高，答错只有1分；\n4.题目答完后，根据所有玩家的分值进行排行，然后根据排行通过邮件方式发放奖励；\n5.答题获得的智慧符可在【答题商店】中购买道具；"), this.txtCheck.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPH, this), this.listQustions.useVirtualLayout = !1, this.listPaiMing.itemRenderer = ItemSmallPM, this.listPaiMing.dataProvider = this.sourceData1, this.listQustions.itemRenderer = ItemAnswer, this.listQustions.dataProvider = this.sourceData2, this.listCount.useVirtualLayout = !1, this.listCount.itemRenderer = ItemImage, this.listCount.dataProvider = this.sourceDataWord, this.ringMask = new RingMask(this.ring, this), this.ringMask.setRightInfo(68, 8, 20, !0)
    }, e.prototype.onPH = function () {
        GameGlobal.layerMgr.open(UIConst.DAIRYPAIHANG)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = "";
        i = void 0 == e ? "st1" : e, this.setState(i)
    }, e.prototype.setState = function (t) {
        switch (this.currentState = t, t) {
            case "st1":
                GameGlobal.modeldairyAns.on(ModelDairyAnswer.msg_answerData, this.onUpdate, this), GameGlobal.modeldairyAns.CG1931();
                break;
            case "st2":
                this.onUpdate()
        }
    }, e.prototype.onUpdate = function () {
        switch (this.txtMine.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color(VoDairyPM.minePaiming > 0 ? VoDairyPM.minePaiming : "无", "#08ef5b")), this.txtScore.textFlow = HtmlUtil.parse("我的分数: " + HtmlUtil.color(VoDairyPM.mineScore, "#08ef5b")), this.sourceData1.source = VoDairyPM.listQianSan, this.currentState) {
            case "st1":
                try {
                    var t = CFG_HUODONG.LIB2[VoAnswer.curId].title;
                    this.txtTitle.text = VoAnswer.progressNum + ". " + t, this.txtLeftTitle.text = VoAnswer.progressNum + "/" + VoAnswer.getMaxNum(), this.txtLeftTm.text = VoAnswer.leftTime + "s"
                } catch (e) {
                    console.log("答题ID：" + VoAnswer.curId)
                }
                if (VoAnswer.leftTime > 0 ? this.addTick() : this.removeTick(), VoAnswer.curId != this.curId) {
                    ItemAnswer._isSel = -1, this.curId = VoAnswer.curId;
                    var i = VoAnswer.getAnswers(VoAnswer.curId);
                    this.sourceData2.source = i.concat()
                }
                break;
            case "st2":
                VoAnswer.refTitleTime > 0 ? this.addTick() : this.removeTick()
        }
    }, e.prototype.setSel = function (t, e) {
        var i = this.listQustions.numChildren;
        ItemAnswer._isSel = t;
        for (var o = 0; i > o; o++) {
            var n = this.listQustions.getChildAt(o);
            n.showRight_WrongAns()
        }
    }, e.prototype.addTick = function () {
        this.isTicking || (this.isTicking = !0, GameGlobal.tick.addInterv(this.onTick, 1e3, this))
    }, e.prototype.removeTick = function () {
        this.isTicking = !1, GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onTick = function (t) {
        switch (t.currentState) {
            case "st1":
                if (t.txtLeftTm.text = VoAnswer.leftTime + "s", 1 == VoAnswer.leftTime && -1 == ItemAnswer._isSel) {
                    var e = t.listQustions.$children[0];
                    e.onSel()
                }
                VoAnswer.leftTime <= 0 && t.removeTick();
                break;
            case "st2":
                for (var i = VoAnswer.refTitleTime.toString(), o = Util.getTempArr(), n = 0; n < i.length; n++) {
                    var a = i.charAt(n),
                        s = "dairyAnsAtlas_json." + a;
                    o.push(s)
                }
                o.push("dairyAnsAtlas_json.S"), t.sourceDataWord.source = o, VoAnswer.refTitleTime <= 0 && t.removeTick(), t.ringMask.setPer(VoAnswer.refTitleTime / VoAnswer.maxRefTlTime)
        }
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeTick(), this.sourceData1.removeAll(), GameGlobal.modeldairyAns.off(ModelDairyAnswer.msg_answerData, this.onUpdate, this)
    }, e
}(BaseEUIView);
__reflect(VDairyAnswer.prototype, "VDairyAnswer");
var VEffGlobalCont = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.efftCount = 0, e.skinName = "EffGlobalContSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = e.source,
            o = e.position;
        i && (o || (o = new egret.Point(350, 450)), EffectMgr.addEff(i, this, o.x, o.y, 800, 800).completeHand(Handler.create(this, this.effEnd)), this.efftCount++)
    }, e.prototype.effEnd = function () {
        this.efftCount--, this.efftCount <= 0 && this.closeHandler()
    }, e
}(BaseEUIView);
__reflect(VEffGlobalCont.prototype, "VEffGlobalCont");
var VHuoDong = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "resource/eui_skins/game/dairyAnswer/VHuoDongSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "活动", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemHuoDong, this.initHuoDong()
    }, e.prototype.initHuoDong = function () {
        var t = CFG_HUODONG.LIB;
        for (var e in t) {
            t[e];
            VoHuoDong.add(parseInt(e))
        }
        VoHuoDong.list.sort(VoHuoDong.onSort), this.sourceData.source = VoHuoDong.list
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelExpGift.on(ModelExpGift.msg_notice, this.onNotice, this), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_NOTICE, this.onNotice, this), EventCenter.addMsg(CrossServiceLadder.Event.UPDATE_MISSION_STATE, this.updateMissionState, this), CFG_COMMOND.isOpen(CFG_COMMOND.CROSS_SERVICE_lADDER, !1) && this.getProxy(CrossServiceLadder.Proxy).getAwardInfo(), this.onNotice()
    }, e.prototype.onNotice = function () {
        this.updateExpNot(), this.updateCZWARNot()
    }, e.prototype.update = function () {
        this.sourceData.refresh()
    }, e.prototype.updateNoticeDyAns = function () {
        var t = this.sourceData.getItemAt(0);
        t && this.sourceData.itemUpdated(t)
    }, e.prototype.updateExpNot = function () {
        var t = (GameGlobal.modelExpGift.notice, this.sourceData.getItemAt(1));
        t && this.sourceData.itemUpdated(t)
    }, e.prototype.updateCZWARNot = function () {
        var t = (ModelCZWAR.Notice(), this.sourceData.getItemAt(3));
        t && this.sourceData.itemUpdated(t)
    }, e.prototype.updateMissionState = function () {
        var t = this.sourceData.getItemAt(5);
        t && this.sourceData.itemUpdated(t)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelExpGift.off(ModelExpGift.msg_notice, this.onNotice, this), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_NOTICE, this.onNotice, this), EventCenter.removeMsg(CrossServiceLadder.Event.UPDATE_MISSION_STATE, this.updateMissionState, this)
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(VHuoDong.prototype, "VHuoDong");
var VHuoDongEntry = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "HuoDongEntry", e
    }
    return __extends(e, t), e.removeHD = function (t) {
        this._curVo && this._curVo.xitongid == t && (this._curVo = null, GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.onRoleLv, this)), GameGlobal.layerMgr.close(UIConst.HUODONGENTRY)
    }, e.addHD = function (t) {
        GameGlobal.layerMgr.dynamicReg(UIConst.HUODONGENTRY, e, GameGlobal.layerMgr.UI_MainMiddle);
        var i = VoHuoDongEntry.create(t);
        this._curVo = i, GameGlobal.modelRole.voMine.level >= i.requireLv ? (GameGlobal.layerMgr.open(UIConst.HUODONGENTRY, i), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.onRoleLv, this)) : GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.onRoleLv, this)
    }, e.onRoleLv = function () {
        return this._curVo ? void(GameGlobal.modelRole.voMine.level >= this._curVo.requireLv && (GameGlobal.layerMgr.open(UIConst.HUODONGENTRY, this._curVo), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.onRoleLv, this))) : void GameGlobal.modelRole.off(ModelRole.MSG_CHANGE, this.onRoleLv, this)
    }, e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this._vo = e;
        var i = e.getIcoImg();
        if (i) {
            this.imgIco.source = i, DisplayUtil.addBy(this.imgIco, this.conGrp, 0);
            var o = 299
        } else DisplayUtil.remove(this.imgIco), o = 214;
        this.lb.text = e.getDes(), this.x = GameGlobal.stage.stageWidth - o
    }, e.prototype.onSize = function () {
        this.y = GameGlobal.stage.stageHeight - 350
    }, e.prototype.onBtnT = function () {
        this._vo.onClick()
    }, e
}(BaseEUIView);
__reflect(VHuoDongEntry.prototype, "VHuoDongEntry");
var VoHuoDongEntry = function () {
    function t() {}
    return t.create = function (e) {
        var i = new t,
            o = CFG_COMMOND.LIB[e];
        return i.xitongid = e, i.requireLv = o.openlv, i
    }, t.prototype.onClick = function () {
        var t = this.xitongid;
        1072 == t ? GameGlobal.modelFish.showEntry() : 1080 == t ? (GameGlobal.modelMPBattle.tryToJoinMpBattle(), VHuoDongEntry.removeHD(1080)) : 1064 == t ? GameGlobal.layerMgr.open(UIConst.EXPGIFT) : 1091 == t ? (GameGlobal.layerMgr.open(UIConst.CHOUKA), VHuoDongEntry.removeHD(1091)) : 1092 == t ? (GameGlobal.layerMgr.open(UIConst.XSFB, 14), VHuoDongEntry.removeHD(1092)) : 1089 == t ? (1 == GameGlobal.modelxddz.state ? GameGlobal.layerMgr.open(UIConst.VIEWCHALLENGEBOOK) : GameGlobal.layerMgr.open(UIConst.VIEWXDDZMAIN, UIConst.VIEWXDDZYZHU), VHuoDongEntry.removeHD(1089)) : 1099 == t ? (GameGlobal.layerMgr.open(UIConst.XSFB, 19), VHuoDongEntry.removeHD(1099)) : 1100 == t ? (GameGlobal.layerMgr.open(UIConst.XSFB, 20), VHuoDongEntry.removeHD(1100)) : 1130 == t && (EventCenter.sendMsg(CampWar.Event.OPEN), VHuoDongEntry.removeHD(1130))
    }, t.prototype.getIcoImg = function () {
        var t = this.xitongid;
        if (1072 == t);
        else if (1080 == t);
        else if (1064 == t);
        else {
            if (1092 == t) return "MainScreen_json.xsfbzsxt";
            if (1089 == t) return "MainScreen_json.bm_xddz";
            if (1099 == t) return "MainScreen_json.xsfbnd";
            if (1100 == t) return "MainScreen_json.xsfbsh"
        }
        return null
    }, t.prototype.getDes = function () {
        var t = this.xitongid;
        return 1072 == t ? "钓鱼活动已开启" : 1080 == t ? "门派战已开启" : 1064 == t ? "经验大放送" : 1091 == t ? "天神降临" : 1092 == t ? "限时刑天副本已开启" : 1089 == t ? "仙道独尊" : 1099 == t ? "限时女帝副本已开启" : 1100 == t ? "限时少昊副本已开启" : 1130 == t ? "阵营战已开启" : ""
    }, t
}();
__reflect(VoHuoDongEntry.prototype, "VoHuoDongEntry");
var ItemAnswer = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.indexToWords = ["A", "B", "C", "D"], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/dairyAnswer/ItemAnswerSkin.exml"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.cont.$setAnchorOffsetY(30), this.cont.y = 30, this.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onBegin, this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        this.onSel()
    }, e.prototype.onSel = function () {
        var t = this.data.index;
        GameGlobal.modeldairyAns.CG1933(t)
    }, e.prototype.onBegin = function () {
        e._isSel || (this.bg.source = "dairyAnsAtlas_json.chosen1", GameGlobal.stage.once(egret.TouchEvent.TOUCH_END, this.onEnd, this))
    }, e.prototype.onEnd = function () {
        this.bg.source = "dairyAnsAtlas_json.pangHangBg1"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (e) {
            t.prototype.onData.call(this), this._data = e;
            var i = this.indexToWords[this.itemIndex];
            this.txtTitle.text = i + ". " + e.answer, this.iconRight_Wrong.source = null
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.showRight_WrongAns = function () {
        this.data.index == e._isSel && (this.bg.source = "dairyAnsAtlas_json.chosen1");
        var t = this.data.cfg.right;
        this.data.index == t ? (this.iconRight_Wrong.source = "dairyAnsAtlas_json.gou", this.txtTitle.textFlow = HtmlUtil.parse(HtmlUtil.color(this.txtTitle.text, "#2C9B00"))) : (this.iconRight_Wrong.source = "dairyAnsAtlas_json.cha", this.txtTitle.textFlow = HtmlUtil.parse(HtmlUtil.color(this.txtTitle.text, "#fe0000")))
    }, e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.cont.skewX = -80;
        var e = 200 + 200 * this.itemIndex;
        egret.Tween.get(this.cont).to({
            skewX: 0
        }, e)
    }, e._isSel = -1, e
}(ItemBase);
__reflect(ItemAnswer.prototype, "ItemAnswer");
var ItemDairyAnsPH = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/dairyAnswer/ItemDairyAnsPHSkin.exml"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtPaiMing.text = t.paiming + "", this.txtName.text = t.name, this.txtScore.text = t.score + "";
            var e = VoDairyPM.getAwards(t.paiming),
                i = ConfigHelp.makeVoList(e)[0];
            this.txtAd.text = "x" + i.count
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this.$itemIndex
        },
        set: function (t) {
            this.$itemIndex = t, 0 == (1 & t) ? this.bg.source = "dairyAnsAtlas_json.pangHangBg3" : this.bg.source = "dairyAnsAtlas_json.pangHangBg1"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemDairyAnsPH.prototype, "ItemDairyAnsPH");
var ItemHuoDong = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemHuoDongSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnHand.label = "立即参加", DisplayUtil.popBtnStyle(this.btnHand), DisplayUtil.popBtnStyle(this.iconStore);
        var e = egret.TouchEvent.TOUCH_TAP;
        this.btnHand.addEventListener(e, this.onHand, this), this.iconStore.addEventListener(e, this.onStore, this), this.lbDetail.addEventListener(e, this.onDLink, this), this.lbDetail.touchEnabled = !0
    }, e.prototype.onStore = function () {
        var t = this.data.cfg.id;
        switch (t) {
            case 1:
                GameGlobal.layerMgr.open(UIConst.STORE, Enum_shangChengType.ZHENXI + "_2");
                break;
            case 2:
                break;
            case 5:
                GameCtrlBase.instance.openView(CampWar.WinRank);
                break;
            case 6:
                GameCtrlBase.instance.openView(CrossServiceLadder.BillboardView)
        }
    }, e.prototype.onHand = function () {
        var t = (GameGlobal.modelRole.voMine.level, GameGlobal.layerMgr);
        switch (this.data.uiconst) {
            case UIConst.DAIRYANSWER:
                if (!CFG_COMMOND.isOpen(CFG_COMMOND.DAIRYANSWER, !0)) return;
                var e = VoAnswer.actLeftime,
                    i = VoAnswer.progressNum;
                e > 0 ? ViewText.text("活动尚未开启,请准时参加") : VoAnswer.refTitleTime >= 0 ? (t.open(UIConst.DAIRYANSWER, "st2"), t.close(UIConst.HUODONG)) : i >= 0 ? (t.open(UIConst.DAIRYANSWER, "st1"), t.close(UIConst.HUODONG)) : ViewText.text("活动尚未开启,请准时参加");
                break;
            case UIConst.EXPGIFT:
                CFG_COMMOND.isOpen(UIConst.EXPGIFT, !0) && (t.open(this.data.uiconst), t.close(UIConst.HUODONG));
                break;
            case UIConst.FISHSCENE:
                CFG_COMMOND.isOpen(1072, !0) && (GameGlobal.modelFish.getActRTime() <= 10 ? ViewText.text("活动尚未开启,请准时参加") : (GameGlobal.modelFish.showEntry(), t.close(UIConst.HUODONG)));
                break;
            case UIConst.CHENGZHUWARPNL:
                CFG_COMMOND.isOpen(CFG_COMMOND.CZWAR, !0) && (t.open(UIConst.CHENGZHUWARPNL), t.close(UIConst.HUODONG));
                break;
            case UIConst.CAMP_WAR:
                CFG_COMMOND.isOpen(CFG_COMMOND.CAMP_WAR, !0) && EventCenter.sendMsg(CampWar.Event.OPEN);
                break;
            case UIConst.CROSS_SERVICE_lADDER:
                CFG_COMMOND.isOpen(CFG_COMMOND.CROSS_SERVICE_lADDER, !0) && EventCenter.sendMsg(CrossServiceLadder.Event.OPEN)
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.cfg.id,
                i = GameGlobal.modelRole.voMine.level;
            switch (e) {
                case 1:
                    this.weekGrp.visible = ModelWeekender.time > 0, this.backGround.source = "dairyAnsAtlas_json.huodongBg", this.iconType.source = "dairyAnsAtlas_json.dayAnswer", this.iconStore.source = "dairyAnsAtlas_json.answerIcon", this.txtInfo.textFlow = HtmlUtil.parse("活动时间:" + HtmlUtil.color("每天", "#684c43") + HtmlUtil.color(t.cfg.time, "#10a244") + HtmlUtil.color("开始\n", "#684c43") + "上届冠军名字:" + HtmlUtil.color(VoDairyPM.preChamName ? VoDairyPM.preChamName : "无", "#10a244")), ConfigHelp.makeStrGrids(t.cfg.awards, this.grids, 10, 75, this, !0);
                    var o = NoticeHDMgr.getDairyNotice();
                    this.notice(o), this.lbDetail.text = "";
                    break;
                case 2:
                    this.weekGrp.visible = ModelWeekender.time > 0, this.backGround.source = "ExpGiftAtlas_json.expBg", this.iconType.source = "ExpGiftAtlas_json.expword", this.iconStore.source = null, this.txtInfo.textFlow = HtmlUtil.parse(Lang.reTxt("活动时间:<font color='#684c43'>每天</font>\n<font color='#10a244'>{0}</font>", t.cfg.time)), ConfigHelp.makeStrGrids(t.cfg.awards, this.grids, 10, 75, this, !0), o = GameGlobal.modelExpGift.notice, this.notice(o && i > CFG_COMMOND.getOpenLevel(CFG_COMMOND.EXPGIFT)), this.lbDetail.text = "";
                    break;
                case 3:
                    this.backGround.source = "dairyAnsAtlas_json.huodongBg", this.iconType.source = "guDingAct_json.fishText", this.iconStore.source = null, this.txtInfo.textFlow = HtmlUtil.parse(Lang.reTxt("活动时间:<font color='#10a244'>{0}</font>", t.cfg.time)), ConfigHelp.makeStrGrids(t.cfg.awards, this.grids, 10, 75, this, !0), this.notice(GameGlobal.modelFish.checkNotic()), this.lbDetail.textFlow = HtmlUtil.underLine("点我了解");
                    break;
                case 4:
                    if (this.backGround.source = "dairyAnsAtlas_json.huodongBg", this.iconType.source = "CZWAR_json.titleczzd", this.iconStore.visible = !1, this.txtInfo.textAlign = egret.HorizontalAlign.LEFT, GameGlobal.modelCZWAR.czName) var n = GameGlobal.modelCZWAR.czName;
                    else n = "无";
                    this.txtInfo.textFlow = HtmlUtil.parse(HtmlUtil.color("挑战时间:", "#A83503") + HtmlUtil.color(t.cfg.time + "\n", "#10a244") + HtmlUtil.color("上届城主:", "#A83503") + HtmlUtil.color(n, "#10a244")), ConfigHelp.makeStrGrids(t.cfg.awards, this.grids, 10, 75, this, !0), this.lbDetail.textFlow = HtmlUtil.underLine("点我了解"), CFG_COMMOND.isOpen(CFG_COMMOND.CZWAR, !1) ? this.notice(ModelCZWAR.Notice()) : this.notice(!1);
                    break;
                case 5:
                    if (this.backGround.source = "dairyAnsAtlas_json.huodongBg", this.iconType.source = "campWar_json.title", this.iconStore.source = "campWar_json.info", this.txtInfo.textAlign = egret.HorizontalAlign.LEFT, GameGlobal.modelCZWAR.czName) var n = GameGlobal.modelCZWAR.czName;
                    else n = "无";
                    this.txtInfo.textFlow = HtmlUtil.parse(t.cfg.time), ConfigHelp.makeStrGrids(t.cfg.awards, this.grids, 10, 75, this, !0), this.lbDetail.textFlow = HtmlUtil.underLine("点我了解");
                    var a = new eui.Image;
                    a.source = "campWar_json.campWarStore", a.x = 230, a.y = 86, DisplayUtil.popBtnStyle(a), a.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCampWarStore, this), this.addChild(a);
                    break;
                case 6:
                    if (this.backGround.source = "crossServiceLadder_json.21_EnterBg", this.iconType.source = "crossServiceLadder_json.21_jzjxEnter", this.iconStore.source = "JJCAtlas2_json.pPM", this.txtInfo.textAlign = egret.HorizontalAlign.LEFT, GameGlobal.modelCZWAR.czName) var n = GameGlobal.modelCZWAR.czName;
                    else n = "无";
                    this.txtInfo.textFlow = HtmlUtil.parse(t.cfg.time), ConfigHelp.makeStrGrids(t.cfg.awards, this.grids, 10, 75, this, !0), this.lbDetail.textFlow = HtmlUtil.underLine("点我了解"), GameCtrlBase.instance.getModel(CrossServiceLadder.Model).hadAward ? this.notice(!0) : this.notice(!1), this.weekGrp.visible = !1
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onCampWarStore = function () {
        GameGlobal.layerMgr.open(UIConst.STORE, Enum_shangChengType.ZHENYING)
    }, e.prototype.notice = function (t) {
        this.btnHand.setNoticeVis(t)
    }, e.prototype.onDLink = function () {
        3 == this._data.cfg.id ? ViewWenHao.show(CFG_COMMOND.LIBWFSM[1072].detail) : 4 == this._data.cfg.id ? ViewWenHao.show(CFG_COMMOND.LIBWFSM[1074].detail, 24) : 5 == this._data.cfg.id ? ViewWenHao.show(CFG_COMMOND.LIBWFSM[1124].detail, 24) : 6 == this._data.cfg.id && ViewWenHao.show(CFG_COMMOND.LIBWFSM[1126].detail, 24)
    }, e
}(ItemBase);
__reflect(ItemHuoDong.prototype, "ItemHuoDong");
var ItemImage = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.img = new eui.Image, this.addChild(this.img)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.img.source = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemImage.prototype, "ItemImage");
var ItemSmallPM = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.colors = [16772701, 15500297, 14231771], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/dairyAnswer/ItemSmallPMSkin.exml"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtPM.textColor = this.colors[t.paiming - 1], this.txtPM.text = t.paiming + "", this.txtName.text = t.name, this.txtScore.text = t.score + "分"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemSmallPM.prototype, "ItemSmallPM");
var VDairyAwards = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.sourceUrl = new eui.ArrayCollection, e.weekgrids = [], e.skinName = "resource/eui_skins/game/dairyAnswer/VDairyAwardsSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), DisplayUtil.popBtnStyle(this.btnHand), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.addCloseListen(this.btnHand), this.btnHand.label = "确定", this.container.useVirtualLayout = !1, this.listPM.useVirtualLayout = !1, this.listPM.itemRenderer = ItemImage, this.listPM.dataProvider = this.sourceUrl
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        for (var i = e[0], o = e[1], n = VoDairyPM.getAwards(i), a = i.toString(), s = Util.getTempArr(), r = 0; r < a.length; r++) {
            var l = parseInt(a.charAt(r)),
                h = "dairyAnsAtlas_json." + l;
            s.push(h)
        }
        if (this.sourceUrl.source = s.concat(), ConfigHelp.makeStrGrids(n, this.grids, 0, 0, this.container, !0), this.txtScore.textFlow = HtmlUtil.parse("今日分数: " + HtmlUtil.color(o + "分", "#10a244")), ModelWeekender.time > 0) {
            ConfigHelp.makeStrGrids(n, this.weekgrids, 0, 0, this.container, !0);
            for (var c = 0; c < this.weekgrids.length; c++) {
                var p = this.weekgrids[c];
                p.showTagGrp()
            }
            DisplayUtil.addBy(this.weekewjlGrp, this.container)
        } else {
            for (var c = 0; c < this.weekgrids.length; c++) {
                var p = this.weekgrids[c];
                DisplayUtil.remove(p)
            }
            DisplayUtil.remove(this.weekewjlGrp)
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VDairyAwards.prototype, "VDairyAwards");
var VDairyCount = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.isActTime = !1, e.skinName = "resource/eui_skins/game/dairyAnswer/VDairyCountSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.listWords.itemRenderer = ItemImage, this.listWords.dataProvider = this.sourceData, this.listWords.useVirtualLayout = !1
    }, e.prototype.onHand = function () {
        if (GameGlobal.modelRole.voMine.level < 45) return void ViewText.text("角色等级需要45级才能参加答题系统");
        switch (this.currentState) {
            case "st1":
                this.isActTime ? ViewText.text("活动还没开始，请稍等") : GameGlobal.layerMgr.open(UIConst.DAIRYANSWER, "st2");
                break;
            case "st2":
                GameGlobal.layerMgr.open(UIConst.DAIRYANSWER, "st1")
        }
    }, e.prototype.addTick = function () {
        GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onTick = function (t) {
        switch (t.currentState) {
            case "st1":
                var e = "",
                    i = 0;
                t.isActTime ? (VoAnswer.actLeftime--, i = VoAnswer.actLeftime, e = VoAnswer.actLeftime.toString()) : (VoAnswer.refTitleTime--, i = VoAnswer.refTitleTime, e = VoAnswer.refTitleTime.toString());
                for (var o = [], n = 0; n < e.length; n++) {
                    var a = e.charAt(n),
                        s = "dairyAnsAtlas_json." + a;
                    o.push(s)
                }
                o.push("dairyAnsAtlas_json.S"), t.sourceData.source = o, 0 >= i && t.removeTick();
                break;
            case "st2":
                VoAnswer.leftTime--, t.txtTime.textFlow = HtmlUtil.parse("答题中" + HtmlUtil.color(VoAnswer.leftTime + "秒", "#10a244")), VoAnswer.leftTime <= 0 && t.removeTick()
        }
    }, e.prototype.addMsg = function () {
        GameGlobal.modeldairyAns.on(ModelDairyAnswer.msg_answerData, this.update, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modeldairyAns.off(ModelDairyAnswer.msg_answerData, this.update, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = "";
        i = void 0 == e ? "st1" : e, this.updateState(i), this.addMsg()
    }, e.prototype.updateState = function (t) {
        switch (this.isActTime = !1, this.currentState = t, this.currentState) {
            case "st1":
                VoAnswer.actLeftime >= 0 ? (this.isActTime = !0, this.imgIcon.source = "dairyAnsAtlas_json.daojiShi", this.addTick()) : VoAnswer.refTitleTime >= 0 ? (this.isActTime = !1, this.imgIcon.source = "dairyAnsAtlas_json.refresh", this.addTick()) : this.removeTick();
                break;
            case "st2":
                this.txtProgress.text = VoAnswer.progressNum + "/" + VoAnswer.getMaxNum(), this.txtTime.textFlow = HtmlUtil.parse("答题中" + HtmlUtil.color(VoAnswer.leftTime + "秒", "#10a244")), VoAnswer.leftTime > 0 ? this.addTick() : this.removeTick()
        }
    }, e.prototype.update = function () {
        this.txtProgress.text = VoAnswer.progressNum + "/" + VoAnswer.getMaxNum(), this.txtTime.textFlow = HtmlUtil.parse("答题中" + HtmlUtil.color(VoAnswer.leftTime + "秒", "#10a244")), VoAnswer.leftTime > 0 && this.addTick()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.tick.removeInterv(this.onTick), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(VDairyCount.prototype, "VDairyCount");
var VoAnswer = function () {
    function t() {}
    return t.getRightAnswer = function (t) {
        CFG_HUODONG.LIB2
    }, t.getAnswers = function (e) {
        var i = Util.getTempArr(),
            o = CFG_HUODONG.LIB2[e];
        t.hasNums = [0, 1, 2, 3];
        for (var n = t.answerIndexs.length, a = 0; n > a; a++) {
            var s = new t;
            s.cfg = o, s.index = a + 1;
            var r = t.answerIndexs[a];
            s.answer = o[r];
            var l = t.pickIndex();
            i[l] = s
        }
        return i
    }, t.pickIndex = function () {
        var e = 0;
        if (0 == t.hasNums.length) return 0;
        var i = t.hasNums.length,
            o = Math.random() * i >> 0;
        return e = t.hasNums[o], t.hasNums.splice(o, 1), e
    }, t.getMaxNum = function () {
        if (t.maxNum > 0) return t.maxNum;
        var e = CFG_HUODONG.LIB2,
            i = 0;
        for (var o in e) i++;
        return t.maxNum = i, i
    }, t.curId = 0, t.actLeftime = -1, t.progressNum = -1, t.refTitleTime = -1, t.maxRefTlTime = -1, t.answerIndexs = ["one", "two", "three", "four"], t.hasNums = [], t.maxNum = 30, t
}();
__reflect(VoAnswer.prototype, "VoAnswer");
var VoDairyPM = function () {
    function t() {}
    return t.updateQianSan = function (e) {
        var i = e.length;
        t.listQianSan.length = 0;
        for (var o = 0; i > o; o += 3) {
            var n = new t;
            n.paiming = e[o], n.name = e[o + 1], n.score = e[o + 2], t.listQianSan.push(n)
        }
    }, t.updatePaiHang = function (e) {
        var i = e.length;
        t.listPaiHang.length = 0;
        for (var o = 0; i > o; o += 3) {
            var n = new t;
            n.paiming = e[o], n.name = e[o + 1], n.score = e[o + 2], t.listPaiHang.push(n)
        }
    }, t.getAwards = function (t) {
        var e = CFG_HUODONG.LIB4;
        for (var i in e) {
            var o = e[i],
                n = o.pm,
                a = n.split(","),
                s = parseInt(a[0]),
                r = parseInt(a[1]);
            if (t >= s && r >= t) return o.jl
        }
        return null
    }, t.mineScore = 0, t.listQianSan = [], t.listPaiHang = [], t
}();
__reflect(VoDairyPM.prototype, "VoDairyPM");
var VoHuoDong = function () {
    function t() {}
    return t.add = function (e) {
        for (var i = t.list, o = i.length, n = 0; o > n; n++)
            if (parseInt(i[n].cfg.id) == e) return;
        var a = CFG_HUODONG.LIB,
            s = new t;
        s.cfg = a[e], s.uiconst = t.getuiConst(e), i.push(s)
    }, t.getuiConst = function (t) {
        switch (t) {
            case 1:
                return UIConst.DAIRYANSWER;
            case 2:
                return UIConst.EXPGIFT;
            case 3:
                return UIConst.FISHSCENE;
            case 4:
                return UIConst.CHENGZHUWARPNL;
            case 5:
                return UIConst.CAMP_WAR;
            case 6:
                return UIConst.CROSS_SERVICE_lADDER
        }
    }, t.get = function (e) {
        for (var i = t.list, o = i.length, n = 0; o > n; n++) {
            var a = i[n];
            if (parseInt(a.cfg.id) == e) return a
        }
        return null
    }, t.onSort = function (t, e) {
        var i = t.cfg.score,
            o = e.cfg.score;
        return i - o
    }, t.list = [], t
}();
__reflect(VoHuoDong.prototype, "VoHuoDong");
var ItemDaydayFL = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.gridArr = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemDaydayFLSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        switch (this.btnHand.va) {
            case 0:
                GameGlobal.modelDayDayFL.CG3605(this.data.cfg.id);
                break;
            case 1:
                platform.openRecharge();
                break;
            case 2:
                ViewText.text("明日充值, 继续领好礼哦!")
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, ConfigHelp.makeStrGrids(t.cfg.jl, this.gridArr, 0, 0, this.gridContainer, !0), this.txtDay.text = "累计充值" + t.cfg.ljczts + "天";
            var e = this.getState();
            switch (e) {
                case 0:
                    this.btnHand.enabled = !0, this.btnHand.label = "领取", this.btnHand.setNoticeVis(!0), this.btnHand.va = 0;
                    break;
                case 1:
                    this.btnHand.enabled = !0, this.btnHand.label = "前往", this.btnHand.setNoticeVis(!1), this.btnHand.va = 1;
                    break;
                case 2:
                    this.btnHand.enabled = !0, this.btnHand.label = "明日再领", this.btnHand.setNoticeVis(!1), this.btnHand.va = 2;
                    break;
                case 3:
                    this.btnHand.enabled = !1, this.btnHand.label = "领取", this.btnHand.setNoticeVis(!1), this.btnHand.va = 3;
                    break;
                case 4:
                    this.btnHand.enabled = !1, this.btnHand.label = "已领取", this.btnHand.setNoticeVis(!1), this.btnHand.va = 4
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.getState = function () {
        var t = this.data.cfg.ljczts,
            e = GameGlobal.modelDayDayFL;
        return e.leiJiDays >= t ? this.data.active ? 0 : 4 : 0 == e.leiJiDays && t == e.leiJiDays + 1 ? 1 : t == e.leiJiDays + 1 && e.hasGotAllAward() ? 1 == e.toDayHasGot ? 1 : 2 : 3
    }, e
}(ItemBase);
__reflect(ItemDaydayFL.prototype, "ItemDaydayFL");
var ModelDayDayFL = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.leiJiDays = 0, e.ewaiId = 0, e.toDayHasGot = 0, e.awardsHasGotLen = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(3602, this.GC3602, this), e.regHand(3604, this.GC3604, this), e.regHand(3606, this.GC3606, this)
    }, e.prototype.initCfgDatas = function () {
        if (this.cfgDatas)
            for (var t = this.cfgDatas.length - 1; t >= 0; t--) this.cfgDatas[t].active = !0;
        else {
            this.cfgDatas = [];
            var e = CFG_DAYDAYFL.LIB1;
            for (var i in e) {
                var o = {};
                o.cfg = e[i], o.active = !0, this.cfgDatas.push(o)
            }
        }
    }, e.prototype.ensureNotActive = function (t) {
        for (var e = this.cfgDatas.length - 1; e >= 0; e--) {
            var i = parseInt(this.cfgDatas[e].cfg.id);
            if (i == t) {
                this.cfgDatas[e].active = !1;
                break
            }
        }
    }, e.prototype.CG3601 = function () {
        this.sendSocket(3601, this.getBytes())
    }, e.prototype.GC3602 = function (t, i) {
        t.initCfgDatas(), t.awardsHasGotLen = 0, t.leiJiDays = i.readShort(), t.ewaiId = i.readShort() + 1;
        for (var o = i.readShort(), n = 0; o > n; n++) t.ensureNotActive(i.readShort()), t.awardsHasGotLen++;
        t.toDayHasGot = i.readByte(), t.notify(e.msg_datas), t.noticeHandler()
    }, e.prototype.onSort = function (t, e) {
        var i = t.active ? -1 : 1,
            o = e.active ? -1 : 1;
        return 1 == i && 1 == o ? i + t.cfg.ljczts - (o + e.cfg.ljczts) : i - o
    }, e.prototype.filteringDatas = function () {
        var t = [],
            e = 7;
        if (this.awardsHasGotLen >= e) {
            var i = this.awardsHasGotLen / e >> 0,
                o = i * e;
            o >= this.cfgDatas.length && (o = (i - 1) * e);
            for (var n = 0, a = 0; n < this.cfgDatas.length && e > a; n++) {
                var s = this.cfgDatas[n],
                    r = s.cfg.ljczts,
                    l = r - o;
                r > o && e >= l && (t.push(s), a++)
            }
        } else
            for (var n = 0, a = 0; n < this.cfgDatas.length && e > a; n++) {
                var s = this.cfgDatas[n];
                s.cfg.ljczts <= e && (t.push(s), a++)
            }
        return t.sort(this.onSort), t
    }, e.prototype.CG3603 = function () {
        this.sendSocket(3603, this.getBytes())
    }, e.prototype.GC3604 = function (t, e) {
        var i = e.readByte();
        1 == i ? t.CG3601() : (ViewText.text([null, null, "所有奖励都领取完了", "充值天数不足", "活动已结束", "背包不足"][i]), 5 == i && GameGlobal.layerMgr.open(UIConst.EQUIPRL))
    }, e.prototype.CG3605 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(3605, e)
    }, e.prototype.GC3606 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            e.readShort();
            t.CG3601()
        } else ViewText.text([null, null, "不能重复领取", "该奖励不存在", "充值天数不足", "背包不足"][i]), 5 == i && GameGlobal.layerMgr.open(UIConst.EQUIPRL)
    }, e.prototype.getMaxDays = function () {
        var t = CFG_DAYDAYFL.LIB2[this.ewaiId];
        return t ? t.ljczts : -1
    }, e.prototype.hasGotAllAward = function () {
        return this.leiJiDays > 0 && this.awardsHasGotLen >= this.leiJiDays
    }, e.prototype.noticeHandler = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(16);
        if (t) {
            var e = t.childs && t.childs[0];
            if (e) {
                var i = this.leiJiDays > 0 && this.awardsHasGotLen < this.leiJiDays;
                e.setRed(i)
            }
        }
    }, e.prototype.getOper = function () {
        var t = CFG_DAYDAYFL.LIB2[this.ewaiId];
        return t ? t.oper : ""
    }, e.prototype.get_kljl = function () {
        var t = CFG_DAYDAYFL.LIB2[this.ewaiId];
        return t ? t.kljl : ""
    }, e.prototype.getVoHorseSkinId = function (t) {
        var e = CFG_PeiYang.LIB_HORSESKIN;
        for (var i in e)
            if (e[i].dj == t) return i
    }, e.prototype.getVoWingSkinId = function (t) {
        var e = CFG_PeiYang.LIB_WINGSKIN;
        for (var i in e)
            if (e[i].dj == t) return i
    }, e.prototype.getVoHaloSkinId = function (t) {
        var e = CFG_PeiYang.LIB_HALOSKIN;
        for (var i in e)
            if (e[i].dj == t) return i
    }, e.prototype.getVoWeaponSkinId = function (t) {
        var e = CFG_PeiYang.LIB_WEAPONSKIN;
        for (var i in e)
            if (e[i].dj == t) return i
    }, e.prototype.getTitleId = function (t) {
        var e = CFG_Title.LIB;
        for (var i in e)
            if (e[i].item == t) return i
    }, e.prototype.createTitleItem = function (t) {
        var e = this.getTitleId(t),
            i = CFG_Title.LIB[e];
        if (i.qd == E_PF_CONFIG_TYPE.LOCAL || i.qd == AppConfig.pftype) {
            var o = i.id,
                n = i.icon,
                a = i.name,
                s = i.t,
                r = i.attr,
                l = Vo_TitleItem.ZhanLi(r),
                h = i.des,
                c = CFG_Title.getTItem(e),
                p = i.eff,
                u = i.src,
                d = Vo_TitleItem.create(o, n, a, s, r, h, c, p, l, u);
            return d
        }
    }, e.prototype.getFashId = function (t) {
        var e = CFG_Fashion.LIB;
        for (var i in e)
            if (e[i].item == t) return i
    }, e.prototype.createFashItem = function (t) {
        var e = this.getFashId(t),
            i = CFG_Fashion.LIB[e],
            o = i.id,
            n = GameGlobal.modelRole.voMine.job;
        if (1 == n) var a = i.szn;
        else a = i.szv;
        var s = i.name,
            r = i.t,
            l = i.attr,
            h = Vo_Fashion.ZhanLi(l),
            c = i.des,
            p = CFG_Fashion.getTItem(e),
            u = i.eff,
            d = Vo_Fashion.create(o, a, s, r, l, c, p, u, h);
        return d
    }, e.prototype.getVoFaBaoId = function (t) {
        var e = CFG_FABAO.LIB1;
        for (var i in e)
            if (e[i].need == t) return i
    }, e.prototype.createFabaoItem = function (t) {
        var e = this.getVoFaBaoId(t),
            i = CFG_FABAO.LIB1,
            o = i[e],
            n = new VoFaBao;
        return n.id = o.id, n.name = o.name, n.level = o.lv, n.eff = o.effId, n.icon = o.ICONId, n.jhItem = o.need, n.attr = o.att, n.tjDes = o.from, n.basezl = o.zlz, n.getQhMaxLev(), n
    }, e.msg_datas = "msg_datas", e
}(BaseModel);
__reflect(ModelDayDayFL.prototype, "ModelDayDayFL");
var ViewDayDayFL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.WIDTH = 367, e.skinName = "ViewDayDayFLSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "天天返利", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.list.dataProvider = this.sourceData = new eui.ArrayCollection, this.list.itemRenderer = ItemDaydayFL, this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.txtAwardPreview.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAwardPreview, this), this.uirole = new UIRole, this.txtAwardPreview.textFlow = HtmlUtil.underLine("奖励预览")
    }, e.prototype.onHand = function () {
        this.btnHand.enabled && GameGlobal.modelDayDayFL.CG3603()
    }, e.prototype.onAwardPreview = function () {
        var t = GameGlobal.modelDayDayFL,
            e = t.getOper();
        if ("" != e)
            if ("0" == e) {
                var i = t.get_kljl(),
                    o = ConfigHelp.makeVoList(i)[0];
                GameGlobal.layerMgr.open(UIConst.ITEMTIP, o)
            } else {
                var n = e.split(/\;|\,/),
                    a = Number(t.get_kljl().split(/\;|\,/)[1]);
                switch (n[3]) {
                    case "VoHorse":
                        var s = t.getVoHorseSkinId(a),
                            r = VoHorse.getInst().skinMap.getByKey(s),
                            l = {
                                vo: VoHorse.getInst(),
                                skin: r
                            };
                        GameGlobal.layerMgr.open(n[1], l);
                        break;
                    case "VoWing":
                        var h = t.getVoWingSkinId(a),
                            c = VoWing.getInst().skinMap.getByKey(h),
                            p = {
                                vo: VoWing.getInst(),
                                skin: c
                            };
                        GameGlobal.layerMgr.open(n[1], p);
                        break;
                    case "VoHalo":
                        var u = t.getVoHaloSkinId(a),
                            d = VoHalo.getInst().skinMap.getByKey(u),
                            f = {
                                vo: VoHalo.getInst(),
                                skin: d
                            };
                        GameGlobal.layerMgr.open(n[1], f);
                        break;
                    case "VoWeapon":
                        var g = t.getVoWeaponSkinId(a),
                            m = VoWeapon.getInst().skinMap.getByKey(g),
                            y = {
                                vo: VoWeapon.getInst(),
                                skin: m
                            };
                        GameGlobal.layerMgr.open(n[1], y);
                        break;
                    case "Title":
                        GameGlobal.layerMgr.open(UIConst.TITLEFASH, 0);
                        var v = t.createTitleItem(t.get_kljl());
                        GameGlobal.layerMgr.open(UIConst.TITLE, v);
                        break;
                    case "Fashion":
                        GameGlobal.layerMgr.open(UIConst.TITLEFASH, 1);
                        var _ = t.createFashItem(t.get_kljl());
                        GameGlobal.layerMgr.open(UIConst.FASHION, _);
                        break;
                    case "FaBao":
                        var G = t.createFabaoItem(t.get_kljl());
                        GameGlobal.layerMgr.open(UIConst.FABAO, VoFaBao.getDataByCfgId(G.id))
                }
            }
    }, e.prototype.addMsg = function () {
        GameGlobal.modelDayDayFL.on(ModelDayDayFL.msg_datas, this.onUpdate, this), GameGlobal.modelDayDayFL.CG3601()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelDayDayFL.off(ModelDayDayFL.msg_datas, this.onUpdate, this)
    }, e.prototype.onUpdate = function () {
        var t = GameGlobal.modelDayDayFL,
            e = t.getMaxDays();
        if (-1 == e) {
            this.progressBar.width = this.WIDTH;
            var i = CFG_DAYDAYFL.LIB2[t.ewaiId - 1].ljczts;
            this.txtProgress.text = i + "/" + i
        } else {
            this.progressBar.width = this.WIDTH * Math.min(t.leiJiDays / e, 1);
            var o = e - t.leiJiDays;
            this.txtProgress.text = t.leiJiDays + "/" + e
        }
        this.txtDesrition.textFlow = HtmlUtil.parse("每天充值" + ColorSet("任意金额", "#b2fe3a") + "即可领取充值" + ColorSet("返利", "#b2fe3a") + "!"), o > 0 || -1 == e ? (this.btnHand.enabled = !1, this.btnHand.label = "领取", this.btnHand.setNoticeVis(!1)) : (this.btnHand.enabled = !0, this.btnHand.label = "领取", this.btnHand.setNoticeVis(!0));
        var n = t.filteringDatas();
        DisplayUtil.fillDataAC(this.sourceData, n), this.showIcon()
    }, e.prototype.showIcon = function () {
        this.uirole.stopAndClear();
        var t, e = GameGlobal.modelDayDayFL,
            i = e.getMaxDays();
        t = -1 == i ? CFG_DAYDAYFL.LIB2[GameGlobal.modelDayDayFL.ewaiId - 1] : CFG_DAYDAYFL.LIB2[GameGlobal.modelDayDayFL.ewaiId];
        var o = t.mc;
        if (t.jlzs) {
            var n = 1,
                a = 0,
                s = 0,
                r = 1,
                l = t.jlzs;
            if (1 == t.id) n = 3;
            else if (2 == t.id) r = 1.5;
            else if (5 == t.id) o = "", a = -50;
            else if (6 == t.id) {
                if (1 == GameGlobal.modelRole.voMine.job) var h = 10103;
                else h = 10203;
                a = -50, this.uirole.setBody(h), this.uirole.setHorse(GameGlobal.modelRole.voMine.mainRole.horseMod), o = "", a = -50, s = 40, n = 3, l = null
            } else 8 == t.id ? (a = -50, s = 70, n = 3) : 9 == t.id && (a = -20, s = -100, n = 3);
            this.effContainer.addChild(this.uirole), this.uirole.x = a, this.uirole.y = s, this.uirole.setWay(n), this.uirole.play(1e3), this.uirole.validParts(), this.uirole.setAny1(l), this.effContainer.scaleX = this.effContainer.scaleY = r
        }
        IconUtil.setIconSrc(this.background, t.words + "_png"), this.txtHorseName.text = o
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), IconUtil.setIconSrc(this.background, null)
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewDayDayFL.prototype, "ViewDayDayFL");
var ModelDianJing = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.state = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(4002, this.GC4002, this), e.regHand(4004, this.GC4004, this)
    }, e.prototype.GC4002 = function (t, e) {
        t.state = e.readByte(), 0 == t.state
    }, e.prototype.CG4003 = function () {
        this.sendSocket(4003, this.getBytes())
    }, e.prototype.GC4004 = function (t, i) {
        var o = i.readByte();
        1 == o ? (t.state = 1, t.notify(e.msg_data)) : ViewText.text([null, null, "已领取", "背包已满"][o])
    }, e.prototype.isComeFromDJ = function () {
        if (AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_WAN) try {
            var t = window.GameStatusInfo.src.toString();
            return "314" == t || "316" == t
        } catch (e) {
            return !1
        } else try {
            var i = window;
            return "QQEGame" === i.OPEN_DATA.qua.app
        } catch (e) {
            return !1
        }
    }, e.msg_data = "msg_data", e
}(BaseModel);
__reflect(ModelDianJing.prototype, "ModelDianJing");
var ViewDianJing = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "ViewDianJingSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose).addCloseListen(this.background), this.btnGetAward.label = "免费领取", this.btnLink.label = "去看一看", this.btnGetAward.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnLink.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnGetAward:
                GameGlobal.modelDJ.isComeFromDJ() && this.btnGetAward.enabled && GameGlobal.modelDJ.CG4003();
                break;
            case this.btnLink:
                var i = "https://m.egame.qq.com/download/app?channel=h5ldy&type=act&url=qgameap";
                try {
                    if (AppConfig.pftype != E_PF_CONFIG_TYPE.WAN_WAN) {
                        var o = window.mqq;
                        o.invoke("ui", "openUrl", {
                            url: i,
                            target: 1,
                            style: 1
                        })
                    } else {
                        var n = window.BK;
                        n.MQQ.Webview.open("https://m.egame.qq.com/download/app?channel=h5ldy&type=act&url=qgameap")
                    }
                } catch (a) {}
        }
    }, e.prototype.showDetail = function () {
        0 == GameGlobal.modelDJ.state && GameGlobal.modelDJ.isComeFromDJ() ? (this.btnGetAward.enabled = !0, this.btnGetAward.setNoticeVis(!0)) : (this.btnGetAward.enabled = !1, this.btnGetAward.setNoticeVis(!1));
        var t = e.LIB[1];
        ConfigHelp.makeStrGrids(t.jiangli, this.gridArr, 0, 0, this.gridContainer, !0, 0, .9)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.showDetail(), GameGlobal.modelDJ.on(ModelDianJing.msg_data, this.showDetail, this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelDJ.off(ModelDianJing.msg_data, this.showDetail, this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewDianJing.prototype, "ViewDianJing");
var ChildDuanZao = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.masterTypeUrls = ["cast_json.bm_qhdstext", "cast_json.bm_jldstext", "cast_json.bm_bsdstext", "cast_json.sxDS"], e.baoshis = [], e.isCheckUp = !1, e.jihuoDescriptions = ["未激活", "宝石25级激活", "宝石50级激活", "宝石75级激活"], e.skinName = "ChildDuanZaoSkin", e
    }
    return __extends(e, t), e.prototype.guideQH = function () {
        QuestGuideArrow.getIns().guideTo(this.btnHand2, 72, 28)
    }, e.prototype.guideJL = function () {
        QuestGuideArrow.getIns().guideTo(this.btnHand2, 72, 28)
    }, e.prototype.guideBS = function () {
        QuestGuideArrow.getIns().guideTo(this.btnHand3, 72, 28)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.checkBox), this.btnHand1.visible = !1, this.btnHand2.visible = !1, this.btnHand3.visible = !1, this.iconGou.visible = !1, this.btnHand1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHand2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHand3.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.checkBox.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCheck, this), this.masterGroup.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onMaster, this), this.zhanliImg = new ImageText, this.zhanliImg.container = this.zhanliContainer, this.zhanliImg.charFunc = ImageText.STRFUNC, this.iconGou.visible = !1, this.costGrid.setShowCount(!1), this.costGrid.enableTip();
        for (var e = 0; e < this.baoShiContainer.$children.length; e++) this.baoshis.push(this.baoShiContainer.getChildAt(e))
    }, e.prototype.onMaster = function () {
        GameGlobal.layerMgr.open(UIConst.DUANZAO_MASTER)
    }, e.prototype.onCheck = function () {
        this.isCheckUp = !this.isCheckUp, this.iconGou.visible = this.isCheckUp, this.updateSXYuanBao()
    }, e.prototype.updateSXYuanBao = function () {
        var t = ViewDuanZao.getSelItem();
        if (this.isCheckUp && t.getShengXingLv() < VoDuanZao.getMaxShengXingLevel()) {
            var e = t.shengXingCfg.xhyb;
            this.txtCostYB.text = "x" + e, GameGlobal.modelRole.voMine.yuanbao >= e ? this.txtCostYB.textColor = 1090116 : this.txtCostYB.textColor = 16646144, this.txtRate.text = "100%"
        } else {
            this.txtCostYB.text = "x0";
            var i = t.shengXingCfg.sxgl,
                o = i / 1e4 * 100 >> 0;
            this.txtRate.text = o + "%"
        }
    }, e.prototype.showEff = function () {
        EffectMgr.addEff("uieff/dzsuccess", this, this.grid.x + 50, this.grid.y + 50, 500, 500)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget,
            i = ViewDuanZao.getSelItem();
        switch (e.va) {
            case 1:
                VoAttribute.checkEnough(i.qianghuaCfg.xiaohao, !0, !0) && GameGlobal.modelDuanZao.CG553(2, i.position);
                break;
            case 2:
                this.hasEnoughMeterial(0) && GameGlobal.modelDuanZao.CG553(1, i.position);
                break;
            case 3:
                VoAttribute.checkEnough(i.jinglianCfg.xiaohao, !0, !0) && GameGlobal.modelDuanZao.CG555(2, i.position);
                break;
            case 4:
                this.hasEnoughMeterial(1) && GameGlobal.modelDuanZao.CG555(1, i.position);
                break;
            case 5:
                VoAttribute.checkEnough(i.baoshiCfg.xiaohao, !0, !0) && GameGlobal.modelDuanZao.CG557(i.position);
                break;
            case 6:
                this.shengXingMetCheck(i) && GameGlobal.modelDuanZao.CG559(i.position, this.isCheckUp ? 2 : 1)
        }
    }, e.prototype.shengXingMetCheck = function (t) {
        var e = VoAttribute.checkEnough(t.shengXingCfg.xiaohao, !0, !0),
            i = !0;
        if (this.isCheckUp) {
            var o = t.shengXingCfg.xhyb;
            GameGlobal.modelRole.voMine.yuanbao < o && (i = !1, platform.askOpenRecharge())
        }
        return e && i
    }, e.prototype.hasEnoughMeterial = function (t) {
        var e, i = VoDuanZao.getNotice(t),
            o = GameGlobal.modelRole.voMine.level;
        if (!i) switch (t) {
            case 0:
                e = VoMaster.getInst().getCurQHLevel(), o > e ? GameGlobal.layerMgr.open(UIConst.CAILIAOGET, 31) : ViewText.text("不能大于主角等级");
                break;
            case 1:
                e = VoMaster.getInst().getCurJLLevel(), o > e ? GameGlobal.layerMgr.open(UIConst.CAILIAOGET, 1001) : ViewText.text("不能大于主角等级")
        }
        return i
    }, e.prototype.setState = function (t) {
        this.currentState = t
    }, e.prototype.updateDetail = function () {
        var t = ViewDuanZao.getSelItem();
        if (t) {
            var e = ViewDuanZao.getType();
            this.grid.data = t.equip;
            var i;
            switch (e) {
                case 0:
                    this.txtLeft.text = "强化" + t.getQiangHuaLv() + "级", this.txtAttLeft.lineSpacing = 20, this.txtAttRight.lineSpacing = 20, this.txtAttLeft.textFlow = HtmlUtil.parse(VoDuanZao.parseAttStr(t.qianghuaCfg.shuxing)), t.getQiangHuaLv() >= VoDuanZao.getMaxQiangHuaLevel() ? (this.isManJi(!0), this.costTxt.text = "0", this.costGrid.data = null) : (this.txtRight.text = "强化" + (t.getQiangHuaLv() + 1) + "级", this.txtAttRight.textFlow = HtmlUtil.parse(VoDuanZao.parseAttStr(t.getNextQHCfg().shuxing)), i = ConfigHelp.makeVoList(t.qianghuaCfg.xiaohao)[0], this.costGrid.data = i, this.costTxt.textFlow = ConfigHelp.costTxt(i, "#10a244"), this.isManJi(!1)), this.btnHand1.va = 1, this.btnHand2.va = 2, this.btnHand1.setNoticeVis(t.notice(0)), this.btnHand2.setNoticeVis(t.notice(0)), this.btnHand1.label = "强化", this.btnHand2.label = "一键强化", this.btnHand1.visible = !0, this.btnHand2.visible = !0, this.btnHand3.visible = !1, this.baoShiContainer.visible = !1, this.zhanliContainer.visible = !0, this.icon1.visible = !0, this.icon2.visible = !0, this.icon3.visible = !0, this.icon4.visible = !0, this.zhanliImg.setText("z" + t.qianghuaCfg.cpower), this.setState("st1");
                    break;
                case 1:
                    this.txtLeft.text = "精炼" + t.getJingLianLv() + "级", this.txtAttLeft.lineSpacing = 20, this.txtAttRight.lineSpacing = 20, this.txtAttLeft.textFlow = HtmlUtil.parse(VoDuanZao.parseAttStr(t.jinglianCfg.shuxing)), t.getJingLianLv() >= VoDuanZao.getMaxJingLianLevel() ? (this.isManJi(!0), this.costTxt.text = "0", this.costGrid.data = null) : (this.txtRight.text = "精炼" + (t.getJingLianLv() + 1) + "级", this.txtAttRight.textFlow = HtmlUtil.parse(VoDuanZao.parseAttStr(t.getNextJLCfg().shuxing)), i = ConfigHelp.makeVoList(t.jinglianCfg.xiaohao)[0], this.costGrid.data = i, this.costTxt.textFlow = ConfigHelp.costTxt(i, "#10a244"), this.isManJi(!1)), this.btnHand1.va = 3, this.btnHand2.va = 4, this.btnHand1.setNoticeVis(t.notice(1)), this.btnHand2.setNoticeVis(t.notice(1)), this.btnHand1.label = "精炼", this.btnHand2.label = "一键精炼", this.btnHand1.visible = !0, this.btnHand2.visible = !0, this.btnHand3.visible = !1, this.baoShiContainer.visible = !1, this.zhanliContainer.visible = !0, this.icon1.visible = !0, this.icon2.visible = !0, this.icon3.visible = !0, this.icon4.visible = !0, this.zhanliImg.setText("z" + t.jinglianCfg.cpower), this.setState("st1");
                    break;
                case 2:
                    this.updateStoneInfo(), this.updateStoneAtt(), this.txtAttLeft.lineSpacing = 10, this.txtAttRight.lineSpacing = 10, t.getBaoShiLv() >= VoDuanZao.getMaxBaoShiLevel() ? (this.isManJi(!0, !1), this.costTxt.text = "0", this.costGrid.data = null) : (i = ConfigHelp.makeVoList(t.baoshiCfg.xiaohao)[0], this.costGrid.data = i, this.costTxt.textFlow = ConfigHelp.costTxt(i, "#10a244"), this.isManJi(!1)), this.btnHand3.va = 5, this.btnHand3.setNoticeVis(t.notice(2)), this.btnHand3.label = "升级", this.btnHand1.visible = !1, this.btnHand2.visible = !1, this.btnHand3.visible = !0, this.baoShiContainer.visible = !0, this.zhanliContainer.visible = !0, this.icon1.visible = !1, this.icon2.visible = !1, this.icon3.visible = !1, this.icon4.visible = !1, this.txtLeft.text = "", this.txtRight.text = "", this.zhanliImg.setText("z" + t.baoshiCfg.cpower), this.setState("st1");
                    break;
                case 3:
                    if (VoDuanZao.updateXingXing(t, this.starContainer), this.txtLeft.text = "升星" + t.getShengXingLv() + "级", this.txtAttLeft.lineSpacing = 10, this.txtAttRight.lineSpacing = 10, this.txtAttLeft.textFlow = HtmlUtil.parse(HtmlUtil.color("装备属性", "#684c43") + HtmlUtil.color("+" + VoDuanZao.parseXingXingAtt(t.shengXingCfg.shuxing), "#a83503") + "\n" + HtmlUtil.color("装备强化", "#684c43") + HtmlUtil.color("+" + VoDuanZao.parseXingXingAtt(t.shengXingCfg.shuxing2), "#a83503") + "\n" + HtmlUtil.color("装备精炼", "#684c43") + HtmlUtil.color("+" + VoDuanZao.parseXingXingAtt(t.shengXingCfg.shuxing3), "#a83503") + "\n" + HtmlUtil.color("装备宝石", "#684c43") + HtmlUtil.color("+" + VoDuanZao.parseXingXingAtt(t.shengXingCfg.shuxing4), "#a83503")), t.getShengXingLv() >= VoDuanZao.getMaxShengXingLevel()) this.isManJi(!0), this.costTxt.text = "0", this.costGrid.data = null, this.txtCostYB.text = "0";
                    else {
                        this.txtRight.text = "升星" + (t.getShengXingLv() + 1) + "级", this.txtAttRight.textFlow = HtmlUtil.parse(HtmlUtil.color("装备属性", "#684c43") + HtmlUtil.color("+" + VoDuanZao.parseXingXingAtt(t.getNextXingXingCfg().shuxing), "#0CD102") + "\n" + HtmlUtil.color("装备强化", "#684c43") + HtmlUtil.color("+" + VoDuanZao.parseXingXingAtt(t.getNextXingXingCfg().shuxing2), "#0CD102") + "\n" + HtmlUtil.color("装备精炼", "#684c43") + HtmlUtil.color("+" + VoDuanZao.parseXingXingAtt(t.getNextXingXingCfg().shuxing3), "#0CD102") + "\n" + HtmlUtil.color("装备宝石", "#684c43") + HtmlUtil.color("+" + VoDuanZao.parseXingXingAtt(t.getNextXingXingCfg().shuxing4), "#0CD102"));
                        var i = ConfigHelp.makeVoList(t.shengXingCfg.xiaohao)[0];
                        this.costGrid.data = i, this.costTxt.textFlow = ConfigHelp.costTxt(i, "#10a244"), this.updateSXYuanBao(), this.isManJi(!1)
                    }
                    this.btnHand3.va = 6, this.btnHand3.setNoticeVis(t.notice(3)), this.btnHand3.label = "升星", this.btnHand1.visible = !1, this.btnHand2.visible = !1, this.btnHand3.visible = !0, this.baoShiContainer.visible = !1, this.zhanliContainer.visible = !1, this.icon1.visible = !0, this.icon2.visible = !0, this.icon3.visible = !0, this.icon4.visible = !0, this.setState("st2")
            }
            this.updateMasterInfo()
        }
    }, e.prototype.updateMasterInfo = function () {
        var t = (ViewDuanZao.getSelItem(), ViewDuanZao.getType());
        this.masterType.source = this.masterTypeUrls[t];
        var e = 0,
            i = 0,
            o = 0;
        switch (t) {
            case 0:
                e = VoMaster.getInst().getQHDengJie(), i = VoMaster.getInst().getCurQHLevel(), o = VoMaster.getInst().getQHFullLevel();
                break;
            case 1:
                e = VoMaster.getInst().getJLDengJie(), i = VoMaster.getInst().getCurJLLevel(), o = VoMaster.getInst().getJLFullLevel();
                break;
            case 2:
                e = VoMaster.getInst().getBSDengJie(), i = VoMaster.getInst().getCurBSLevel(), o = VoMaster.getInst().getBSFullLevel();
                break;
            case 3:
                e = VoMaster.getInst().getXXDengJie(), i = VoMaster.getInst().getCurXXLevel(), o = VoMaster.getInst().getXXFullLevel()
        }
        0 == e ? (this.txtMasterJie.text = "", this.txtMaterInfo.text = "未激活", this.txtMaterInfo.textColor = 10066329) : 0 == o ? (this.txtMasterJie.text = e + "阶", this.txtMaterInfo.textColor = 1090116, this.txtMaterInfo.text = "已满级") : (this.txtMasterJie.text = e + "阶", this.txtMaterInfo.text = i + "/" + o, this.txtMaterInfo.textColor = 6835267)
    }, e.prototype.updateStoneInfo = function () {
        for (var t = ViewDuanZao.getSelItem(), e = 0; 4 > e; e++) {
            var i = this.baoshis[e];
            i.setStoneSource(t.getStoneSource(e)), i.setLevel(t.getStoneLabel(e))
        }
    }, e.prototype.updateStoneAtt = function () {
        var t = ViewDuanZao.getSelItem(),
            e = Util.strToIntArr(t.baoshiCfg.shuxing),
            i = t.getNextBaoShiCfg(),
            o = [];
        i && (o = Util.strToIntArr(i.shuxing));
        for (var n = "", a = "", s = 0; 4 > s; s++) {
            var r = VoDuanZao.stoneTypes[t.baoshiCfg.stone - 1],
                l = t.getStoneLabel(s);
            if (l > 0) {
                var h = e[s],
                    c = h[1];
                if (n += HtmlUtil.color(r + "宝石", "#684c43") + HtmlUtil.color("Lv." + l, "#0CD102") + "\n", l % 25 == 0) a += r + HtmlUtil.color("+" + h[1], "#a83503") + "\n";
                else {
                    var p = o[s],
                        u = p[1],
                        d = u - c;
                    a += r + HtmlUtil.color("+" + h[1], "#a83503") + HtmlUtil.color("+" + d, "#0CD102") + "\n"
                }
            } else n += HtmlUtil.color(r + "宝石Lv.0", "#999999") + "\n", a += HtmlUtil.color(this.jihuoDescriptions[s], "#ff0000") + "\n"
        }
        this.txtAttLeft.textFlow = HtmlUtil.parse(n), this.txtAttRight.textFlow = HtmlUtil.parse(a)
    }, e.prototype.isManJi = function (t, e) {
        void 0 === e && (e = !0), t ? (this.txtRight.text = "已满级", e ? (this.txtAttRight.text = "", this.txtManji.visible = !0) : this.txtManji.visible = !1) : this.txtManji.visible = !1
    }, e.prototype.addMsg = function () {
        GameGlobal.modelDuanZao.on(ModelDuanZao.msg_qiangHua, this.updateDetail, this), GameGlobal.modelDuanZao.on(ModelDuanZao.msg_jingLiang, this.updateDetail, this), GameGlobal.modelDuanZao.on(ModelDuanZao.msg_baoShi, this.updateDetail, this), GameGlobal.modelDuanZao.on(ModelDuanZao.msg_shengXing, this.updateDetail, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateDetail, this), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.updateDetail, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelDuanZao.off(ModelDuanZao.msg_qiangHua, this.updateDetail, this), GameGlobal.modelDuanZao.off(ModelDuanZao.msg_jingLiang, this.updateDetail, this), GameGlobal.modelDuanZao.off(ModelDuanZao.msg_baoShi, this.updateDetail, this), GameGlobal.modelDuanZao.off(ModelDuanZao.msg_shengXing, this.updateDetail, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateDetail, this), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.updateDetail, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.onSize.call(this)
    }, e
}(BaseEUIView);
__reflect(ChildDuanZao.prototype, "ChildDuanZao");
var ModelDuanZao = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(552, this.GC552, this), e.regHand(554, this.GC554, this), e.regHand(556, this.GC556, this), e.regHand(558, this.GC558, this), e.regHand(560, this.GC560, this)
    }, e.prototype.GC552 = function (t, i) {
        t.updateQiangHua(i), t.updateJingLian(i), t.updateBaoShi(i);
        for (var o = i.readShort(), n = 0; o > n; n++) t.updateShengXing(i);
        VoDuanZao.initEmptyPositionData(), VoMaster.getInst().updateQianHua(), VoMaster.getInst().updateJingLian(), VoMaster.getInst().updateBaoShi(), VoMaster.getInst().updateXingXing(), t.notify(e.msg_datas)
    }, e.prototype.CG553 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeByte(e), this.sendSocket(553, i)
    }, e.prototype.GC554 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = VoMaster.getInst().getQHDengJie(),
                a = t.updateQiangHua(i);
            VoMaster.getInst().updateQianHua(), t.notify(e.msg_qiangHua), t.showEff(a);
            var s = VoMaster.getInst().getQHDengJie();
            n != s && t.show1JieMasterPan()
        } else ViewText.text(["", "", "没有对应职业的英雄", "已经满级", "消耗物品不够", "不能大于角色等级", "传入参数异常"][o])
    }, e.prototype.CG555 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeByte(e), this.sendSocket(555, i)
    }, e.prototype.GC556 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = VoMaster.getInst().getJLDengJie(),
                a = t.updateJingLian(i);
            VoMaster.getInst().updateJingLian(), t.notify(e.msg_jingLiang), t.showEff(a);
            var s = VoMaster.getInst().getJLDengJie();
            n != s && t.show1JieMasterPan()
        } else ViewText.text(["", "", "传入参数异常", "身上有装备才能升级", "已经是最高级", "不能大于角色等级", "道具不足"][o])
    }, e.prototype.CG557 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(557, e)
    }, e.prototype.GC558 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = VoMaster.getInst().getBSDengJie(),
                a = t.updateBaoShi(i);
            VoMaster.getInst().updateBaoShi(), t.notify(e.msg_baoShi), t.showEff(a);
            var s = VoMaster.getInst().getBSDengJie();
            n != s && t.show1JieMasterPan()
        } else ViewText.text(["", "", "传入参数异常", "身上有装备才能升级", "已是最高级", "不能大于角色等级", "道具不足"][o])
    }, e.prototype.CG559 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeByte(e), this.sendSocket(559, i)
    }, e.prototype.GC560 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = VoMaster.getInst().getXXDengJie(),
                a = t.updateShengXing(i);
            VoMaster.getInst().updateXingXing(), t.notify(e.msg_shengXing), t.showEff(a);
            var s = VoMaster.getInst().getXXDengJie();
            n != s && t.show1JieMasterPan()
        } else ViewText.text(["", "", "升星失败", "传入参数异常", "身上有装备才能升级", "已经是最高级", "道具不足", "元宝不足"][o])
    }, e.prototype.updateQiangHua = function (t) {
        for (var e = t.readShort(), i = Util.getTempArr(), o = 0; e > o; o++) {
            var n = t.readByte(),
                a = t.readShort();
            VoDuanZao.updateQiangHua(n, a), i.push(n)
        }
        return i
    }, e.prototype.updateJingLian = function (t) {
        for (var e = t.readShort(), i = Util.getTempArr(), o = 0; e > o; o++) {
            var n = t.readByte(),
                a = t.readShort();
            VoDuanZao.updateJingLian(n, a), i.push(n)
        }
        return i
    }, e.prototype.updateBaoShi = function (t) {
        for (var e = t.readShort(), i = Util.getTempArr(), o = 0; e > o; o++) {
            var n = t.readByte(),
                a = t.readShort();
            VoDuanZao.updateBaoshi(n, a), i.push(n)
        }
        return i
    }, e.prototype.updateShengXing = function (t) {
        var e = Util.getTempArr(),
            i = t.readByte(),
            o = t.readByte();
        return VoDuanZao.updateShengXing(i, o), e.push(i), e
    }, e.prototype.showEff = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.CAST);
        e && e.showEff(t);
        var i = GameGlobal.layerMgr.getView(UIConst.UIID_CHILDDUANZAO);
        i && i.showEff()
    }, e.prototype.allNotice = function () {
        return VoDuanZao.getNotice(0) || VoDuanZao.getNotice(1) || VoDuanZao.getNotice(2) || VoDuanZao.getNotice(3)
    }, e.prototype.show1JieMasterPan = function () {
        GameGlobal.layerMgr.open(UIConst.DUANZAO_MASTER)
    }, e.prototype.calculateTotalStr = function () {
        for (var t = 0, e = VoDuanZao.map.getList(), i = 0, o = e.length; o > i; i++) {
            var n = e[i];
            t += n.qianghuaCfg.cpower, t += n.jinglianCfg.cpower, t += n.baoshiCfg.cpower
        }
        var a = VoMaster.getInst();
        return a.qiangHuaCfg && (t += ConfigHelp.caculateStrByIntArr(Util.strToIntArr(a.qiangHuaCfg.qhshuxing))), a.jingLianCfg && (t += ConfigHelp.caculateStrByIntArr(Util.strToIntArr(a.jingLianCfg.jlshuxing))), a.baoShiCfg && (t += ConfigHelp.caculateStrByIntArr(Util.strToIntArr(a.baoShiCfg.bsshuxing))), t
    }, e.msg_datas = "msg_datas", e.msg_qiangHua = "msg_qiangHua", e.msg_jingLiang = "msg_jingLiang", e.msg_baoShi = "msg_baoShi", e.msg_shengXing = "msg_shengXing", e
}(BaseModel);
__reflect(ModelDuanZao.prototype, "ModelDuanZao");
var VDuanZaoMaster = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.description = "全身装备强化到10级，可激活下一级强化大师", e.statisStr = "(装备强化等级越高，则加成越高)", e.skinName = "VDuanZaoMasterSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnClose), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnHand), this.btnHand.label = "确定", this.imgText = new ImageText, this.imgText.container = this.strContainer, this.imgText.charFunc = ImageText.STRFUNC
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.displayNormalOP()
    }, e.prototype.displayTxts = function (t) {
        for (var e = "", i = "", o = 0, n = t.length; n > o; o++) {
            var a = t[o],
                s = (a.id, a.name),
                r = a.val;
            0 == (1 & o) ? e += HtmlUtil.color(s, "#684c43") + HtmlUtil.color("+" + this.fixValue(r), "#10a244") + "\n" : i += HtmlUtil.color(s, "#684c43") + HtmlUtil.color("+" + this.fixValue(r), "#10a244") + "\n"
        }
        this.txtAttLeft.textFlow = HtmlUtil.parse(e), this.txtAttRight.textFlow = HtmlUtil.parse(i)
    }, e.prototype.getStrength = function (t) {
        return t && 0 != t.length ? VoAttribute.caculateArrScore(t) : 0
    }, e.prototype.displayNormalOP = function () {
        this.currentState = "st1", this.validateNow(), this.updateNormal()
    }, e.prototype.updateNormal = function () {
        var t = ViewDuanZao.getType(),
            e = VoMaster.getInst();
        this.txtTitle.text = e.getTypeString(t) + "大师";
        var i = e.getDengJie(t);
        if (e.isManji(t)) this.descriptTxt(0, ""), this.txtManJi.visible = !0, this.txtAttLeft.textFlow = this.parseAtts(e.getAttsByDengJie(t, i)), this.txtAttRight.text = "已满级", this.attGroupLeft.layout.paddingTop = 20, this.attGroupRight.layout.paddingTop = 0, this.strContainer.visible = !1;
        else {
            this.descriptTxt(e.getFullLevel(t), e.getTypeString(t)), this.txtManJi.visible = !1;
            var o = 0,
                n = 0;
            if (0 == i) this.txtAttLeft.text = "未激活", this.attGroupLeft.layout.paddingTop = 0, this.attGroupRight.layout.paddingTop = 20, o = 0;
            else {
                var a = e.getAttsByDengJie(t, i);
                this.txtAttLeft.textFlow = this.parseAtts(a), this.attGroupLeft.layout.paddingTop = 20, this.attGroupRight.layout.paddingTop = 20, o = this.getStrength(a)
            }
            var s = e.getAttsByDengJie(t, i + 1);
            this.txtAttRight.textFlow = this.parseAtts(s), n = this.getStrength(s), this.imgText.setText("c" + (n - o)), this.strContainer.visible = !0
        }
    }, e.prototype.parseAtts = function (t) {
        for (var e = "", i = 0; i < t.length; i++) {
            var o = t[i],
                n = (o.id, o.name),
                a = o.val;
            e += HtmlUtil.color(n, "#b85e0e") + HtmlUtil.color("+" + this.fixValue(a), "#10a244") + "\n"
        }
        return HtmlUtil.parse(e)
    }, e.prototype.fixValue = function (t) {
        var e = 2 == ViewDuanZao.getType() || 3 == ViewDuanZao.getType();
        return e ? MathUtil.floor2Fix(100 * t / 1e4) + "%" : t
    }, e.prototype.descriptTxt = function (t, e) {
        void 0 === e && (e = "强化"), "" == e ? this.txtDescription.text = "" : this.txtDescription.textFlow = HtmlUtil.parse("全身装备" + e + "到" + HtmlUtil.color(t + "级", "#10a244") + "，可提升")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VDuanZaoMaster.prototype, "VDuanZaoMaster");
var ViewDuanZao = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "VDuanZaoSkin", e
    }
    return __extends(e, t), e.prototype.checkPage = function (t) {
        var e = this._page == t;
        return e
    }, e.prototype.guidePage = function (t) {
        var e;
        e = this.base.getTabByIdx(t), e && QuestGuideArrow.getIns().guideTo(e, 55, 30)
    }, e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.base.btnReturn, 30, 30)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.base.createTabGroup(), e.base.addTab("强化", 0, 1), e.base.addTab("精炼", 1, 2), e.base.addTab("宝石", 2, 3), e.base.addTab("升星", 3, 4), e.base.listenTabClick(e.onPageSel, e), e.addCloseListen(e.base.btnClose), e.addCloseListen(e.base.btnReturn), e.container.itemRenderer = ItemDuanZao, e.container.dataProvider = e.sourceData, e.container.addEventListener(eui.ItemTapEvent.ITEM_TAP, e.onEquipSel, e), GameGlobal.layerMgr.reg(UIConst.UIID_CHILDDUANZAO, ChildDuanZao, e)
    }, e.prototype.onEquipSel = function (t) {
        var e = t.itemIndex;
        this.setEquipSel(e)
    }, e.prototype.setEquipSel = function (t) {
        this.container.selectedIndex = t, this._selVo = this.container.selectedItem, this._selIndex = t, this._selVo ? this.updateDetail() : (this.closeHandler(), ViewText.text("身上还没有装备，不能打开锻造系统！"))
    }, e.getSelItem = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.CAST);
        return t ? t._selVo : void 0
    }, e.getType = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.CAST);
        return t ? t._page : void 0
    }, e.prototype.onPageSel = function (t) {
        this.setPage(t.sort)
    }, e.prototype.canOpen = function (t) {
        switch (t) {
            case 3:
                return CFG_COMMOND.isOpen(CFG_COMMOND.EQUIPSX, !0)
        }
        return !0
    }, e.prototype.setPage = function (t) {
        if (-1 == t || this.canOpen(t)) {
            switch (this._page) {
                case 0:
                    GameGlobal.layerMgr.close(UIConst.UIID_CHILDDUANZAO);
                    break;
                case 1:
                    GameGlobal.layerMgr.close(UIConst.UIID_CHILDDUANZAO);
                    break;
                case 2:
                    GameGlobal.layerMgr.close(UIConst.UIID_CHILDDUANZAO);
                    break;
                case 3:
                    GameGlobal.layerMgr.close(UIConst.UIID_CHILDDUANZAO)
            }
            switch (t) {
                case 0:
                    this.base.title = "装备强化", this.txtType.text = "选择装备进行强化", GameGlobal.layerMgr.open(UIConst.UIID_CHILDDUANZAO);
                    break;
                case 1:
                    this.base.title = "装备精炼", this.txtType.text = "选择装备进行精炼", GameGlobal.layerMgr.open(UIConst.UIID_CHILDDUANZAO);
                    break;
                case 2:
                    this.base.title = "装备宝石", this.txtType.text = "选择装备进行宝石升级", GameGlobal.layerMgr.open(UIConst.UIID_CHILDDUANZAO);
                    break;
                case 3:
                    this.base.title = "装备升星", this.txtType.text = "选择装备进行升星", GameGlobal.layerMgr.open(UIConst.UIID_CHILDDUANZAO)
            }
            this.base.setTabSelIdx(t), this._page = t, -1 != t && (this.showEquips(), this._selIndex >= 0 ? this.setEquipSel(this._selIndex) : this.setEquipSel(0))
        }
    }, e.prototype.showEff = function (t) {
        for (var e = 0; e < t.length; e++) {
            var i = t[e],
                o = this.getChildByPostion(i);
            o && o.showEff()
        }
    }, e.prototype.getChildByPostion = function (t) {
        for (var e = this.container.numChildren, i = 0; e > i; i++) {
            var o = this.container.$children[i];
            if (o && o.data.position == t) return o
        }
        return null
    }, e.prototype.showEquips = function () {
        var t = (this._page, VoDuanZao.getEquipsInRoleBody());
        this.sourceData.source = t
    }, e.prototype.updateDetail = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.UIID_CHILDDUANZAO);
        t && t.updateDetail()
    }, e.prototype.onNotice = function () {
        for (var t = this.sourceData.length, e = 0; t > e; e++) {
            var i = this.sourceData.getItemAt(e);
            this.sourceData.itemUpdated(i)
        }
        for (var o = this.base.tabGrp.$children, e = 0; e < o.length; e++) {
            var n = e,
                a = o[e];
            a.setNoticVis(VoDuanZao.getNotice(n))
        }
    }, e.prototype.addMsg = function () {
        GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onNotice, this), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.onNotice, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onNotice, this), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.onNotice, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setPage(e || 0), this.onNotice(), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewDuanZao.prototype, "ViewDuanZao");
var VEqHeCheng = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curSt = -1, e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this;
        GameGlobal.layerMgr.reg(UIConst.CLHECHENGPAGE, VClHeChengPage, t), GameGlobal.layerMgr.reg(UIConst.EQHECHENGPAGE, VEqHeChengPage, t), GameGlobal.layerMgr.reg(UIConst.EQREMAKE, VEqRemake, t), t.addCloseListen(t.base.btnReturn), t.addCloseListen(t.base.btnClose)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.base.createTabGroup(), i.base.addTab("材料合成", 0, 1), CFG_COMMOND.isOpen(UIConst.EQHECHENGPAGE, !0) && i.base.addTab("红装合成", 1, 2), i.base.listenTabClick(i.onTbtnT, i), this.updateTbtns(), GameGlobal.modelEquip.on(ModelEquip.MSG_COMBIN, this.updateTbtns, this), this.setCurSt(0)
    }, e.prototype.updateTbtns = function () {
        GameGlobal.modelEquip.hasAnyEqByQuality(6) && CFG_COMMOND.isOpen(UIConst.EQHECHENGPAGE, !0) && this.base.addTab("套装改造", 2, 3)
    }, e.prototype.onClose = function () {
        this.setCurSt(-1), GameGlobal.modelEquip.off(ModelEquip.MSG_COMBIN, this.updateTbtns)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.onTbtnT = function (t) {
        var e = t.sort;
        e >= 0 && this.setCurSt(e)
    }, e.prototype.setCurSt = function (t) {
        switch (this._curSt) {
            case 0:
                GameGlobal.layerMgr.close(UIConst.CLHECHENGPAGE);
                break;
            case 1:
                GameGlobal.layerMgr.close(UIConst.EQHECHENGPAGE);
            case 2:
                GameGlobal.layerMgr.close(UIConst.EQREMAKE)
        }
        switch (t) {
            case 0:
                GameGlobal.layerMgr.open(UIConst.CLHECHENGPAGE), this.base.hideQuestBtn();
                break;
            case 1:
                GameGlobal.layerMgr.open(UIConst.EQHECHENGPAGE), this.base.hideQuestBtn();
                break;
            case 2:
                GameGlobal.layerMgr.open(UIConst.EQREMAKE), this.base.createQuestTxt(CFG_COMMOND.LIBWFSM[106601].detail), this.base.showQuestBtn()
        }
        this.base.setTabSelBySort(t), this.base.title = this.base.getTbtnTextBySort(t), this._curSt = t
    }, e
}(BaseEUIView);
__reflect(VEqHeCheng.prototype, "VEqHeCheng");
var VEqHeChengCL = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.setID = function (t) {
        var e = CFG_Equip.LIB[t];
        e ? this.imgIcon.source = IconUtil.getIconUrl(e.ico) : this.imgIcon.source = null
    }, e.prototype.setData = function (t) {
        this._data = t, t ? this.imgIcon.source = IconUtil.getIconUrl(t.icon) : this.imgIcon.source = null
    }, e.prototype.onT = function () {
        var t = this._data;
        t && (1 == t.type ? GameGlobal.layerMgr.open(UIConst.ITEMTIP, t) : GameGlobal.layerMgr.open(UIConst.EQUIPTIP, t))
    }, e
}(eui.Component);
__reflect(VEqHeChengCL.prototype, "VEqHeChengCL");
var VEqHeChengItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel != t && (this._sel = t, t ? this.currentState = "sel" : this.currentState = "nor")
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = CFG_Equip.LIB[t.id];
            this.lb.text = e ? e.n + "(" + e.lv + "级)" : "errorID:" + t.id
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.$onRemoveFromStage = function () {
        this.selected = !1
    }, e
}(eui.Component);
__reflect(VEqHeChengItem.prototype, "VEqHeChengItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VEqHeChengLv = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.skinName = "resource/eui_skins/game/eqhecheng/EqHeChengLvSkin.exml", e
    }
    return __extends(e, t), e.create = function () {
        var t = new e;
        return t
    }, Object.defineProperty(e.prototype, "selected", {
        set: function (t) {
            this._sel != t && (this._sel = t, t ? this.currentState = "sel" : this.currentState = "nor")
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.lbLv.text = t.lv + "级"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(BaseEUIView);
__reflect(VEqHeChengLv.prototype, "VEqHeChengLv", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VEqHeChengPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.lvItems = [], e.onlyShowCanHC = !1, e.skinName = "resource/eui_skins/game/eqhecheng/EqHeChengPSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this,
            e = t.eqListDataAC = new eui.ArrayCollection;
        t.preViewList0.dataProvider = e, t.preViewList0.addEventListener(egret.Event.CHANGE, this.onItemListC, this), t.preViewList0.itemRenderer = VEqHeChengItem, t.imgSel.visible = !1, t.selGrp.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onImgSel, t), t.eq.enableTip(), t.eq.showZero = !1, t.eq.bg.visible = !1, t.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onBtnT, t), t.onlyShowCanHC = !1, t.updateLvList(), DisplayUtil.remove(t.preViewList0), t.bg = new Part, t.bg.x = 35, t.bg.y = 75, t.addChildAt(this.bg, 0)
    }, e.prototype.updateLvList = function () {
        var t = {},
            e = CFG_Equip.LIBREDEQ;
        for (var i in e) {
            var o = e[i];
            if (!t[o.lv]) {
                t[o.lv] = !0;
                var n = VEqHeChengLv.create();
                n.data = o, this.treeGroup.addChild(n), this.lvItems.push(n), n.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTreeLBT, this)
            }
        }
    }, e.prototype.onTreeLBT = function (t) {
        var e = t.currentTarget;
        if (e != this._oldItem) var i = this.lvItems.indexOf(e);
        else i = -1;
        this.setTreeIndex(i, this.preViewList0), this.updateListIndex()
    }, e.prototype.setTreeIndex = function (t, e) {
        var i = this.lvItems[t];
        this._oldItem && (this._oldItem.selected = !1), i ? (i.selected = !0, DisplayUtil.addBy(e, this.treeGroup, t + 1), this.showList(i._data.lv), this.updateListIndex()) : (DisplayUtil.remove(e), this.treeGroup.scrollV = 0, e.selectedItem = null, this.scroller.stopAnimation()), this._oldItem = i
    }, e.prototype.updateListIndex = function () {
        var t = this.curEq;
        t ? this.preViewList0.selectedItem = CFG_Equip.LIBREDEQ[t.id] : this.preViewList0.selectedItem = null
    }, e.prototype.setSelItem = function () {}, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.bg.setVal("uibg/hecheng"), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onBagC, this), this.onlyShowCanHC = !1, this.imgSel.visible = !1, this.showAutoEq(), GameGlobal.modelEquip.on(ModelEquip.MSG_COMBIN, this.onCombin, this)
    }, e.prototype.onClose = function () {
        this.bg.setVal(null), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onBagC, this), GameGlobal.modelEquip.on(ModelEquip.MSG_COMBIN, this.onCombin, this)
    }, e.prototype.onSize = function () {}, e.prototype.update = function () {}, e.prototype.showList = function (t) {
        var e = CFG_Equip.LIBREDEQ,
            i = [],
            o = GameGlobal.modelRole.voMine.job;
        this.curEq;
        for (var n in e) {
            var a = e[n];
            a.lv != t || 3 != a.occ && a.occ != o || (!this.onlyShowCanHC || this.isCanHC(a.id)) && i.push(a)
        }
        this.eqListDataAC.source = i
    }, e.prototype.onItemListC = function (t) {
        var e = t.target,
            i = e.selectedItem;
        i && this.showEq(i)
    }, e.prototype.showEq = function (t) {
        if (this.curEq = t, t) {
            var e = t.id,
                i = this.eq._data ? this.eq._data : new VoEquip;
            i.init(e), this.eq.setData(i), this.eq.updateName();
            for (var o = CFG_Equip.getRedEQCLArr(e), n = 0; 4 > n; n++) {
                var a = this["cl" + n];
                a.setData(o[n]), a._data || (a.imgIcon.source = "CMS1_json.bm_close")
            }
            var s = this.getLvIndex(t.lv);
            this.setTreeIndex(s, this.preViewList0);
            CFG_Equip.LIBREDEQ[t.id]
        } else {
            this.eq.setData(null), this.eq.setName("");
            for (var n = 0; 4 > n; n++) {
                var a = this["cl" + n];
                a.setData(null)
            }
        }
        this.updateCount(), this.updateListIndex()
    }, e.prototype.getLvIndex = function (t) {
        for (var e = 0, i = this.lvItems.length; i > e; e++)
            if (this.lvItems[e].data.lv == t) return e;
        return -1
    }, e.prototype.updateCount = function () {
        for (var t = Util.getTempObj(), e = 0; 4 > e; e++) {
            var i = this["cl" + e],
                o = i._data;
            if (o) {
                if (1 == o.type) var n = GameGlobal.modelBag.getItemCount(o.id);
                else {
                    t[o.id] || (t[o.id] = 0);
                    var a = GameGlobal.modelRole.getDressEqCount(o.id) > 0 ? 1 : 0,
                        n = GameGlobal.modelBag.getEquipCount(o.id) + a - t[o.id];
                    n = Math.max(0, Math.min(o.count, n)), t[o.id] += n
                }
                n >= o.count ? i.lbCount.textColor = 16773120 : i.lbCount.textColor = 16773120, i.lbCount.text = n + "/" + o.count
            } else i.lbCount.text = ""
        }
    }, e.prototype.isTermMatch = function (t) {
        return 1 == t.type ? GameGlobal.modelBag.getItemCount(t.id) >= t.count : GameGlobal.modelBag.getEquipCount(t.id) >= t.count
    }, e.prototype.isCanHC = function (t) {
        var e = 1,
            i = CFG_Equip.getRedEQCLArr(t),
            o = Util.getTempObj();
        if (i)
            for (var n = 0, a = i.length; a > n; n++) {
                var s = i[n],
                    r = !0;
                if (1 == s.type) r = GameGlobal.modelBag.getItemCount(s.id) >= s.count;
                else {
                    o[s.id] || (o[s.id] = 0), o[s.id] += s.count;
                    var l = GameGlobal.modelRole.getDressEqCount(s.id) > 0 ? 1 : 0,
                        h = GameGlobal.modelBag.getEquipCount(s.id);
                    r = h + l >= o[s.id]
                }
                if (!r) {
                    e = 0;
                    break
                }
            } else e = 0;
        if (e)
            for (var c in o) GameGlobal.modelBag.getEquipCount(parseInt(c)) < o[c] && (e = 2 | e);
        return e
    }, e.prototype.onImgSel = function (t) {
        this.onlyShowCanHC = !this.onlyShowCanHC, this.onOnlyShow()
    }, e.prototype.onOnlyShow = function () {
        if (this.imgSel.visible = this.onlyShowCanHC, this._oldItem && this.showList(this._oldItem._data.lv), this.onlyShowCanHC) {
            var t = this.getAutoShowCFG();
            t ? (this.showEq(CFG_Equip.LIB[t.id]), this.updateListIndex()) : this.showEq(null)
        }
    }, e.prototype.showAutoEq = function () {
        var t = this.getAutoShowCFG();
        t ? this.showEq(CFG_Equip.LIB[t.id]) : this.showEq(null)
    }, e.prototype.getAutoShowCFG = function () {
        var t = CFG_Equip.LIBREDEQ,
            e = GameGlobal.modelRole.voMine.job;
        for (var i in t) {
            var o = t[i];
            if (3 == o.occ || o.occ == e) {
                if (!this.onlyShowCanHC) return o;
                if (this.isCanHC(o.id)) return o
            }
        }
        return null
    }, e.prototype.onBtnT = function (t) {
        var e = this,
            i = GameGlobal;
        if (!e.eq._data) return void ViewText.text("请选择红装合成");
        var o = e.isCanHC(e.eq._data.id);
        return o ? i.modelBag.getIdleCapacity() <= 0 ? void GameGlobal.modelBag.checkRLTips(0) : void(2 & o ? ViewAlert.show("当前合成材料中包括了穿在身上的红装,\n确定是否作为材料进行合成新红装？", function () {
            e.eq && e.eq._data && i.modelEquip.CG_REDEQCOMBIN(e.eq._data.id)
        }) : i.modelEquip.CG_REDEQCOMBIN(e.eq._data.id)) : void ViewText.text("合成材料不足")
    }, e.prototype.onBagC = function () {
        this.updateCount()
    }, e.prototype.onCombin = function () {
        EffectMgr.addEff("uieff/hcsuccess", this, this.eq.x + 50, this.eq.y + 50, 500, 500)
    }, e
}(BaseEUIView);
__reflect(VEqHeChengPage.prototype, "VEqHeChengPage");
var VEqRemake = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "RedEqRemakeSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this;
        t.lbDes.text = "1.套装改造:改变当前红装的套装类型,不同的套装类型拥有不同的套装属性;\n2.您可根据自身需求,对当前红装进行改造;当身上同一套装备类型的红装数达到3件、5件、8件时,分别激活相应的套装属性", t.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onBtnT, t), t.eqListData = new eui.ArrayCollection, t.eqList.itemRenderer = VRedEqRemakeItem, t.eqList.dataProvider = t.eqListData, t.eqList.addEventListener(eui.UIEvent.CHANGE, t.onHeadEqSel, t), t.itemCost.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onItemT, t), t.bg = new Part, t.bg.x = 35, t.bg.y = 75, t.addChildAt(t.bg, 0), t.eq.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onEqT, this)
    }, e.prototype.onOpen = function (t) {
        this.updateList(), this.bg.setVal("uibg/hecheng"), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onBagC, this), GameGlobal.modelEquip.on(ModelEquip.MSG_REMAKERET, this.onEqUpdate, this), GameGlobal.modelRole.on(ModelRole.MSG_ROLEEQUIPCHANGE, this.onEqChange, this), this.scroller.viewport.scrollV = 0, this.eqListData.length ? (this.eqList.selectedIndex = 0, this.updateSelItem(this.eqList.selectedItem)) : (this.eqList.selectedIndex = -1, this.updateSelItem(null)), this.circleEff || (this.circleEff = EffectMgr.addEff("uieff/circleBig", null, 240, 325, 800, -1, !0), this.addChildAt(this.circleEff, 1))
    }, e.prototype.onClose = function () {
        this.bg.setVal(null), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onBagC), GameGlobal.modelEquip.off(ModelEquip.MSG_REMAKERET, this.onEqUpdate), GameGlobal.modelRole.off(ModelRole.MSG_ROLEEQUIPCHANGE, this.onEqChange), this.circleEff && (EffectMgr.getIns().removeEff(this.circleEff), this.circleEff = null)
    }, e.prototype.onBagC = function () {
        this.updateCost()
    }, e.prototype.onEqChange = function () {
        var t = this.eqList.selectedItem;
        this.updateList(), this.eqList.selectedItem = t
    }, e.prototype.onEqUpdate = function () {
        EffectMgr.addEff("uieff/hcsuccess", this, this.eq.x + 50, this.eq.y + 50, 500, 500);
        var t = this.eqList.selectedItem;
        this.updateList(), this.eqList.selectedItem = t, this.updateSelItem(t)
    }, e.prototype.updateList = function () {
        var t = [],
            e = GameGlobal.modelRole.eqDts;
        for (var i in e) {
            var o = e[i];
            o && o.quality >= 6 && t.push(o)
        }
        for (var n = GameGlobal.modelBag.equips, a = 0, s = n.length; s > a; a++) {
            var o = n[a];
            o && o.quality >= 6 && t.push(o)
        }
        DisplayUtil.fillDataAC(this.eqListData, t)
    }, e.prototype.sortFunc = function (t, e) {
        return 0
    }, e.prototype.onBtnT = function () {
        var t = this.eq._data;
        if (t) {
            var e = this.itemCost._data;
            if (GameGlobal.modelBag.getItemCount(e.id) < e.count) return void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, e);
            t.remakeID ? ViewAlert.show(Lang.reTxt("当前装备套装为{0},是否继续改造?\n<font color='#dd3333' size=22>(改造可随机获得新的套装属性)</font>", CFG_Equip.LIB_EQREMAKE[t.remakeID].mc), function () {
                GameGlobal.modelEquip.CG_REMAKE(t.lid)
            }) : GameGlobal.modelEquip.CG_REMAKE(t.lid)
        }
    }, e.prototype.onHeadEqSel = function (t) {
        var e = t.target.selectedItem;
        this.updateSelItem(e)
    }, e.prototype.updateSelItem = function (t) {
        if (this.eq.setData(t), t)
            if (t.remakeID) {
                this.btn.va = 2, this.btn.label = "改造", this.attrGrp.visible = !0;
                var e = CFG_Equip.LIB_EQREMAKE[t.remakeID],
                    i = ConfigHelp.getRoleAttrText(Util.strToIntArr(e.sx1), "\n"),
                    o = ConfigHelp.getRoleAttrText(Util.strToIntArr(e.sx2), "\n"),
                    n = ConfigHelp.getRoleAttrText(Util.strToIntArr(e.sx3), "\n");
                this.lbSuitName.text = e.mc + "套装", this.lbAttr3.text = i, this.lbAttr5.text = o, this.lbAttr8.text = n
            } else this.btn.va = 1, this.btn.label = "激活", this.lbSuitName.text = "1:可通过激活来获得随机一种套装类型；\n2:当激活身上红装的套装属性时，可获得大量的属性加成", this.attrGrp.visible = !1;
        else this.lbSuitName.text = "1:可通过激活来获得随机一种套装类型；\n2:当激活身上红装的套装属性时，可获得大量的属性加成", this.attrGrp.visible = !1;
        this.updateCost()
    }, e.prototype.onItemT = function () {
        var t = this.eq._data;
        return t ? void GameGlobal.layerMgr.open(UIConst.ITEMTIP, this.itemCost._data) : void ViewText.text("请选择装备")
    }, e.prototype.updateCost = function () {
        var t = this.eq._data;
        if (t) {
            var e = t.getRemakeCost(),
                i = ConfigHelp.makeVoByArr(Util.parseIntStr(e));
            this.itemCost.setData(i);
            var o = GameGlobal.modelBag.getItemCount(i.id);
            this.itemCost.lbCount.text = o + "/" + i.count
        } else this.itemCost.lbCount.text = ""
    }, e.prototype.onEqT = function () {
        var t = this.eq._data;
        t && (-1 == t.dressingpos && (t.uiArg = 1), GameGlobal.layerMgr.open(UIConst.EQUIPTIP, t))
    }, e
}(BaseEUIView);
__reflect(VEqRemake.prototype, "VEqRemake");
var VRedEqRemakeItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._vo
        },
        set: function (t) {
            this._vo = t, this.grid.setData(t), this.lbName.text = t.name, this.lbTZName.text = ModelEquip.getRemakeTName(t.remakeID), this.nowEq.visible = -1 != t.dressingpos
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this.currentState = t ? "sel" : "nor"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VRedEqRemakeItem.prototype, "VRedEqRemakeItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VClHeChengCL = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.setID = function (t) {
        var e = CFG_Item.LIB[t];
        e ? (this.imgIcon.source = IconUtil.getIconUrl(e.icon), this.imgIcon.scaleX = .5, this.imgIcon.scaleY = .5) : this.imgIcon.source = null
    }, e.prototype.setData = function (t) {
        this._data = t, t ? this.imgIcon.source = IconUtil.getIconUrl(t.icon) : this.imgIcon.source = null
    }, e.prototype.onT = function () {
        var t = this._data;
        t && (1 == t.type ? GameGlobal.layerMgr.open(UIConst.ITEMTIP, t) : GameGlobal.layerMgr.open(UIConst.EQUIPTIP, t))
    }, e
}(eui.Component);
__reflect(VClHeChengCL.prototype, "VClHeChengCL");
var VClHeChengItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel != t && (this._sel = t, t ? this.currentState = "sel" : this.currentState = "nor")
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = CFG_Equip.LIB_CLHECHENG[t.id];
            this.lb.text = e ? e.name : "errorID:" + t.id
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.$onRemoveFromStage = function () {
        this.selected = !1
    }, e
}(eui.Component);
__reflect(VClHeChengItem.prototype, "VClHeChengItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VClHeChengPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.typeItems = [], e._curNum = 1, e.onlyShowCanHC = !1, e.skinName = "resource/eui_skins/game/eqhecheng/ClHeChengPSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this,
            e = t.eqListDataAC = new eui.ArrayCollection;
        t.preViewList0.dataProvider = e, t.preViewList0.addEventListener(egret.Event.CHANGE, this.onItemListC, this), t.preViewList0.itemRenderer = VClHeChengItem, t.imgSel.visible = !1, t.selGrp.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onImgSel, t), t.eq.enableTip(), t.eq.showZero = !1, t.eq.bg.visible = !1, t.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onBtnT, t), t.onlyShowCanHC = !1, t.updatetypeList(), DisplayUtil.remove(t.preViewList0), t.bg = new Part, t.bg.x = 35, t.bg.y = 75, t.addChildAt(this.bg, 0), this.btnAdd1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAdd1, this), this.btnSub1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSub1, this), this.btnMax.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onMax, this), this.btnMin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onMin, this)
    }, e.prototype.updatetypeList = function () {
        var t = {},
            e = CFG_Equip.LIB_CLHECHENG;
        for (var i in e) {
            var o = e[i];
            if (!t[o.tname]) {
                t[o.tname] = !0;
                var n = VClHeChengType.create();
                n.data = o, this.treeGroup.addChild(n), this.typeItems.push(n), n.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTreeLBT, this)
            }
        }
    }, e.prototype.onTreeLBT = function (t) {
        var e = t.currentTarget;
        if (e != this._oldItem) var i = this.typeItems.indexOf(e);
        else i = -1;
        this.setTreeIndex(i, this.preViewList0), this.updateListIndex()
    }, e.prototype.setTreeIndex = function (t, e) {
        var i = this.typeItems[t];
        this._oldItem && (this._oldItem.selected = !1), i ? (i.selected = !0, DisplayUtil.addBy(e, this.treeGroup, t + 1), this.showList(i._data.tname), this.updateListIndex()) : (DisplayUtil.remove(e), this.treeGroup.scrollV = 0, e.selectedItem = null, this.scroller.stopAnimation()), this._oldItem = i
    }, e.prototype.updateListIndex = function () {
        var t = this.curEq;
        t ? this.preViewList0.selectedItem = CFG_Equip.LIB_CLHECHENG[t.id] : this.preViewList0.selectedItem = null
    }, e.prototype.setSelItem = function () {}, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.bg.setVal("uibg/hecheng"), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onBagC, this), this.onlyShowCanHC = !1, this.imgSel.visible = !1, this.showAutoEq(), GameGlobal.modelEquip.on(ModelEquip.MSG_CAILIAOCOMBIN, this.onCombin, this)
    }, e.prototype.onClose = function () {
        this.bg.setVal(null), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onBagC, this), GameGlobal.modelEquip.off(ModelEquip.MSG_CAILIAOCOMBIN, this.onCombin, this)
    }, e.prototype.onAdd1 = function () {
        this.setNum(this._curNum + 1)
    }, e.prototype.onSub1 = function () {
        this.setNum(this._curNum - 1)
    }, e.prototype.onMax = function () {
        this.setNum(9999999)
    }, e.prototype.onMin = function () {
        this.setNum(1)
    }, e.prototype.setNum = function (t) {
        for (var e = this.curEq.cl.split(";"), i = [], o = 0; o < e.length; o++) {
            var n = parseInt(e[o].split(",")[1]),
                a = GameGlobal.modelBag.getItemCount(n),
                s = this.numOneToolSpend()[o];
            i.push(Math.floor(a / s))
        }
        for (var r = i[0], o = 0; o < i.length; o++) i[o] < r && (r = i[o]);
        var l = r;
        t > l && (t = l), 1 > t && (t = 1), this._curNum = t, this.updateUseCount()
    }, e.prototype.numOneToolSpend = function () {
        for (var t = [], e = this.curEq.cl.split(";"), i = 0; i < e.length; i++) {
            var o = e[i].split(","),
                n = parseInt(o[2]);
            t.push(n)
        }
        return t
    }, e.prototype.updateUseCount = function () {
        this.lbUseNum.text = this._curNum + ""
    }, e.prototype.onSize = function () {}, e.prototype.update = function () {}, e.prototype.showList = function (t) {
        var e = CFG_Equip.LIB_CLHECHENG,
            i = [];
        this.curEq;
        for (var o in e) {
            var n = e[o];
            n.tname == t && (!this.onlyShowCanHC || this.isCanHC(n.id)) && i.push(n)
        }
        this.eqListDataAC.source = i
    }, e.prototype.onItemListC = function (t) {
        var e = t.target,
            i = e.selectedItem;
        i && this.showEq(i)
    }, e.prototype.showEq = function (t) {
        if (null == t ? (this.newItemName.visible = !1, this.lbBg.visible = !1) : (this.newItemName.visible = !0, this.lbBg.visible = !0), this.curEq = t, t) {
            var e = t.xdj,
                i = ConfigHelp.makeVoList(e)[0];
            i.quality < 5 && (i.quality = 5), this.eq.data = i, this.eq.enableTip(), this.eq.isShowEff(!1), this.newItemName.text = i.name;
            for (var o = t.id, n = CFG_Equip.getCLEQCLArr(o), a = 0; 4 > a; a++) {
                var s = this["cl" + a];
                s.setData(n[a]), s._data || (s.imgIcon.source = "CMS1_json.bm_close")
            }
            var r = this.getTypeIndex(t.tname);
            this.setTreeIndex(r, this.preViewList0)
        } else {
            this.eq.setData(null), this.eq.setName("");
            for (var a = 0; 4 > a; a++) {
                var s = this["cl" + a];
                s.setData(null)
            }
        }
        this.updateCount(), this.updateListIndex()
    }, e.prototype.getTypeIndex = function (t) {
        for (var e = 0, i = this.typeItems.length; i > e; e++)
            if (this.typeItems[e].data.tname == t) return e;
        return -1
    }, e.prototype.updateCount = function () {
        for (var t = Util.getTempObj(), e = 0; 4 > e; e++) {
            var i = this["cl" + e],
                o = i._data;
            if (o) {
                if (1 == o.type) var n = GameGlobal.modelBag.getItemCount(o.id);
                else {
                    t[o.id] || (t[o.id] = 0);
                    var a = GameGlobal.modelRole.getDressEqCount(o.id) > 0 ? 1 : 0,
                        n = GameGlobal.modelBag.getEquipCount(o.id) + a - t[o.id];
                    n = Math.max(0, Math.min(o.count, n)), t[o.id] += n
                }
                n >= o.count ? i.lbCount.textColor = 16773120 : i.lbCount.textColor = 16773120, i.lbCount.text = n + "/" + o.count
            } else i.lbCount.text = ""
        }
    }, e.prototype.isTermMatch = function (t) {
        return 1 == t.type ? GameGlobal.modelBag.getItemCount(t.id) >= t.count : GameGlobal.modelBag.getEquipCount(t.id) >= t.count
    }, e.prototype.isCanHC = function (t) {
        var e = 1,
            i = CFG_Equip.getCLEQCLArr(t),
            o = Util.getTempObj();
        if (i)
            for (var n = 0, a = i.length; a > n; n++) {
                var s = i[n],
                    r = !0;
                if (1 == s.type) r = GameGlobal.modelBag.getItemCount(s.id) >= s.count;
                else {
                    o[s.id] || (o[s.id] = 0), o[s.id] += s.count;
                    var l = GameGlobal.modelRole.getDressEqCount(s.id) > 0 ? 1 : 0,
                        h = GameGlobal.modelBag.getEquipCount(s.id);
                    r = h + l >= o[s.id]
                }
                if (!r) {
                    e = 0;
                    break
                }
            } else e = 0;
        if (e)
            for (var c in o) GameGlobal.modelBag.getEquipCount(parseInt(c)) < o[c] && (e = 2 | e);
        return e
    }, e.prototype.onImgSel = function (t) {
        this.onlyShowCanHC = !this.onlyShowCanHC, this.onOnlyShow()
    }, e.prototype.onOnlyShow = function () {
        if (this.imgSel.visible = this.onlyShowCanHC, this._oldItem && this.showList(this._oldItem._data.tname), this.onlyShowCanHC) {
            var t = this.getAutoShowCFG();
            t ? (this.showEq(CFG_Equip.LIB_CLHECHENG[t.id]), this.updateListIndex()) : this.showEq(null)
        }
    }, e.prototype.showAutoEq = function () {
        var t = this.getAutoShowCFG();
        t ? this.showEq(CFG_Equip.LIB_CLHECHENG[t.id]) : this.showEq(null)
    }, e.prototype.getAutoShowCFG = function () {
        var t = CFG_Equip.LIB_CLHECHENG;
        for (var e in t) {
            var i = t[e];
            if (!this.onlyShowCanHC) return i;
            if (this.isCanHC(i.id)) return i
        }
        return null
    }, e.prototype.onBtnT = function (t) {
        var e = this,
            i = GameGlobal;
        if (!e.eq._data) return void ViewText.text("请选材料合成");
        var o = e.isCanHC(this.curEq.id);
        return o ? i.modelBag.getIdleCapacity() <= 0 ? void GameGlobal.modelBag.checkRLTips(0) : void(o && i.modelEquip.CG4321(this.curEq.id, parseInt(this.lbUseNum.text))) : void ViewText.text("合成材料不足")
    }, e.prototype.onBagC = function () {
        this.updateCount()
    }, e.prototype.onCombin = function () {
        EffectMgr.addEff("uieff/hcsuccess", this, this.eq.x + 50, this.eq.y + 50, 500, 500)
    }, e
}(BaseEUIView);
__reflect(VClHeChengPage.prototype, "VClHeChengPage");
var VClHeChengType = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.skinName = "resource/eui_skins/game/eqhecheng/EqHeChengLvSkin.exml", e
    }
    return __extends(e, t), e.create = function () {
        var t = new e;
        return t
    }, Object.defineProperty(e.prototype, "selected", {
        set: function (t) {
            this._sel != t && (this._sel = t, t ? this.currentState = "sel" : this.currentState = "nor")
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.lbLv.text = t.tname
        },
        enumerable: !0,
        configurable: !0
    }), e
}(BaseEUIView);
__reflect(VClHeChengType.prototype, "VClHeChengType", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var ItemBaoShi = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ItemBaoShiSkin", e
    }
    return __extends(e, t), e.prototype.setStoneSource = function (t) {
        this.iconStone.source = t
    }, e.prototype.setLevel = function (t) {
        this.txtLevel.text = "Lv." + t
    }, e
}(eui.Component);
__reflect(ItemBaoShi.prototype, "ItemBaoShi");
var ItemDuanZao = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemDuanZaoSkin"
    }, e.prototype.setState = function (t) {
        this.currentState = t
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.equip;
            this.txtName.text = e.name, 1 == e.quality ? this.txtName.textColor = 6835267 : this.txtName.textColor = Color.getColorInt(e.quality), this.grid.data = e;
            var i = ViewDuanZao.getType();
            switch (i) {
                case 0:
                    this.setState("st1"), this.txtInfo.text = "强化" + t.getQiangHuaLv() + "级";
                    break;
                case 1:
                    this.setState("st1"), this.txtInfo.text = "精炼" + t.getJingLianLv() + "级";
                    break;
                case 2:
                    this.setState("st2"), this.updateBaoShi(t.getBaoShiLv());
                    break;
                case 3:
                    this.setState("st1"), this.txtInfo.text = "升星" + t.getShengXingLv() + "级"
            }
            this.setNotice()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateBaoShi = function (t) {
        var e = 0,
            i = this.data;
        e = t % 25 == 0 ? t / 25 >> 0 : (t / 25 >> 0) + 1;
        for (var o = 0; 4 > o; o++) {
            var n = this.baoshiGroup.getChildAt(o);
            e > o ? n.source = "CMS1_json.bm_gem" + i.baoshiCfg.stone : n.source = null
        }
    }, e.prototype.setNotice = function () {
        var t = this.data;
        this.iconNotice.visible = t.notice(ViewDuanZao.getType())
    }, e.prototype.showEff = function () {
        EffectMgr.addEff("uieff/dzsuccess", this, 55, 55, 500, 500)
    }, Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, t ? this.background.source = "CM2_json.chosen" : this.background.source = "CM2_json.nChosen"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemDuanZao.prototype, "ItemDuanZao");
var VoDuanZao = function () {
    function t() {}
    return t.initEmptyPositionData = function () {
        for (var e = t, i = 0; 8 > i; i++) {
            var o = i,
                n = e.map.getByKey(o);
            n || (n = new t, n.position = o, n.equip = null, e.map.add(n, o)), n.qianghuaCfg || e.initQHData(o, n), n.jinglianCfg || e.initJLData(o, n), n.baoshiCfg || e.initBSData(o, n), n.shengXingCfg || e.initXXData(n)
        }
    }, t.initQHData = function (t, e) {
        var i = CFG_DUANZAO.LIB_QIANGHUA;
        for (var o in i) {
            var n = i[o],
                a = n.bw - 1,
                s = n.level;
            if (a == t && 0 == s) {
                e.qianghuaCfg = n;
                break
            }
        }
    }, t.initJLData = function (t, e) {
        var i = CFG_DUANZAO.LIB_JINGLIAN;
        for (var o in i) {
            var n = i[o],
                a = n.bw - 1,
                s = n.level;
            if (a == t && 0 == s) {
                e.jinglianCfg = n;
                break
            }
        }
    }, t.initBSData = function (t, e) {
        var i = CFG_DUANZAO.LIB_BAOSHI;
        for (var o in i) {
            var n = i[o],
                a = n.bw - 1,
                s = n.level;
            if (a == t && 0 == s) {
                e.baoshiCfg = n;
                break
            }
        }
    }, t.initXXData = function (t) {
        var e = CFG_DUANZAO.LIB_SHENGXING,
            i = e[0];
        t.shengXingCfg = i
    }, t.updateQiangHua = function (t, e) {
        var i = this.getDataByPosition(t);
        i.qianghuaCfg = CFG_DUANZAO.LIB_QIANGHUA[e]
    }, t.updateJingLian = function (t, e) {
        var i = this.getDataByPosition(t);
        i.jinglianCfg = CFG_DUANZAO.LIB_JINGLIAN[e]
    }, t.updateBaoshi = function (t, e) {
        var i = this.getDataByPosition(t);
        i.baoshiCfg = CFG_DUANZAO.LIB_BAOSHI[e]
    }, t.updateShengXing = function (t, e) {
        var i = e,
            o = this.getDataByPosition(t);
        o.shengXingCfg = CFG_DUANZAO.LIB_SHENGXING[i]
    }, t.getDataByPosition = function (e) {
        var i = this.map.getByKey(e);
        return i || (i = new t, i.position = e, i.equip = null, this.map.add(i, e)), i
    }, t.getEquipsInRoleBody = function () {
        var e = GameGlobal.modelRole.eqDts,
            i = [];
        for (var o in e) {
            var n = e[o],
                a = parseInt(o),
                s = t.map.getByKey(a);
            n && s && (s.equip = n, i.push(s))
        }
        return i.sort(t.sortOnPosition), i
    }, t.sortOnPosition = function (t, e) {
        return t.position - e.position
    }, t.getNotice = function (e) {
        for (var i = !1, o = CFG_COMMOND.getOpenLevel(CFG_COMMOND.EQUIPSX), n = GameGlobal.modelRole.voMine.level, a = GameGlobal.modelRole.eqDts, s = 0, r = t.map.getLength(); r > s; s++) {
            var l = t.map.getByIndex(s),
                h = a[l.position];
            if (h) {
                var c = l.notice(e);
                if (i = c) break
            }
        }
        return 3 == e ? i && n >= o : i
    }, t.parseAttStr = function (t, e, i) {
        void 0 === e && (e = "#684c43"), void 0 === i && (i = 0);
        for (var o = Util.strToIntArr(t), n = "", a = "\n", s = 0, r = o.length; r > s; s++) {
            var l = o[s],
                h = l[0],
                c = PeiYangAttObject.attObjs[h],
                p = PeiYangAttObject.clone(c);
            p.val = l[1], s == r - 1 && (a = ""), n += i > 0 ? HtmlUtil.color(p.name + "", e) + HtmlUtil.color("：" + p.val, e) + HtmlUtil.color("+" + (p.val * i >> 0) + "(升星加成)", "#0CD102") + a : HtmlUtil.color(p.name + "", e) + HtmlUtil.color("+" + p.val, "#0CD102") + a
        }
        return n
    }, t.parseXingXingAtt = function (t) {
        var e = (100 * t / 1e4).toFixed(0);
        return e + "%"
    }, t.getMaxQiangHuaLevel = function () {
        return 200
    }, t.getMaxJingLianLevel = function () {
        return 200
    }, t.getMaxBaoShiLevel = function () {
        return 100
    }, t.getMaxShengXingLevel = function () {
        return 50
    }, t.prototype.getQiangHuaLv = function () {
        return this.qianghuaCfg.level
    }, t.prototype.getJingLianLv = function () {
        return this.jinglianCfg.level
    }, t.prototype.getBaoShiLv = function () {
        return this.baoshiCfg.level
    }, t.prototype.getShengXingLv = function () {
        return this.shengXingCfg.level
    }, t.prototype.getNextQHCfg = function () {
        var t = this.qianghuaCfg.bianhao,
            e = t + 1;
        return CFG_DUANZAO.LIB_QIANGHUA[e]
    }, t.prototype.getNextXingXingCfg = function () {
        var t = this.shengXingCfg.level,
            e = t + 1;
        return CFG_DUANZAO.LIB_SHENGXING[e]
    }, t.prototype.getNextJLCfg = function () {
        var t = this.jinglianCfg.bianhao,
            e = t + 1;
        return CFG_DUANZAO.LIB_JINGLIAN[e]
    }, t.prototype.getNextBaoShiCfg = function () {
        var t = this.baoshiCfg.bianhao,
            e = t + 1;
        return CFG_DUANZAO.LIB_BAOSHI[e]
    }, t.prototype.notice = function (t) {
        var e = !1;
        switch (t) {
            case 0:
                e = this.getQiangHuaNotice();
                break;
            case 1:
                e = this.getJingLianNotice();
                break;
            case 2:
                e = this.getBaoShiNotice();
                break;
            case 3:
                e = this.getShengXingNotice()
        }
        return e
    }, t.prototype.getQiangHuaNotice = function () {
        var e = !1,
            i = (t.getMaxQiangHuaLevel(), this.qianghuaCfg.level),
            o = GameGlobal.modelRole.voMine.level;
        return 200 > i && o > i && (e = VoAttribute.checkEnough(this.qianghuaCfg.xiaohao)), e
    }, t.prototype.getJingLianNotice = function () {
        var e = !1,
            i = t.getMaxJingLianLevel(),
            o = this.jinglianCfg.level,
            n = GameGlobal.modelRole.voMine.level;
        return i > o && n > o && (e = VoAttribute.checkEnough(this.jinglianCfg.xiaohao)), e
    }, t.prototype.getBaoShiNotice = function () {
        var e = !1,
            i = t.getMaxBaoShiLevel(),
            o = this.baoshiCfg.level;
        return i > o && (e = VoAttribute.checkEnough(this.baoshiCfg.xiaohao)), e
    }, t.prototype.getShengXingNotice = function () {
        var e = !1,
            i = t.getMaxShengXingLevel(),
            o = this.shengXingCfg.level;
        return i > o && (e = VoAttribute.checkEnough(this.shengXingCfg.xiaohao)), e
    }, t.prototype.getStoneSource = function (t) {
        var e = this.baoshiCfg.level,
            i = e / 25 >> 0,
            o = e % 25 >> 0;
        return (0 != i || 0 != o) && i >= t ? "cast_json.bm_castGem" + this.baoshiCfg.stone : "cast_json.bm_castGem0"
    }, t.prototype.getStoneLabel = function (t) {
        var e = this.baoshiCfg.level,
            i = e / 25 >> 0,
            o = e % 25 >> 0;
        return i > t ? 25 : t == i ? o : 0
    }, t.updateXingXing = function (t, e) {
        var i = t.getShengXingLv();
        if (0 == i)
            for (var o = 0; 10 > o; o++) {
                var n = e.getChildAt(o);
                n.source = this.xingXing[0]
            } else {
                var a, s, r, l, h = i % 10 >> 0;
                0 == h ? (r = i / 10 >> 0, l = 10) : (r = (i / 10 >> 0) + 1, l = i % 10 >> 0), a = r - 1, s = 10 - l;
                for (var c = this.xingXing[a], p = this.xingXing[r], o = 0; 10 > o; o++) n = e.getChildAt(o), l > o ? n.source = p : n.source = c
            }
    }, t.map = new CommondMap, t.baoshiSQLevel = 25, t.xingXing = ["CMS1_json.bm_star0", "CMS1_json.bm_star1", "CMS1_json.bm_starLan", "CMS1_json.bm_star2", "CMS1_json.bm_star3", "CMS1_json.bm_starRed"], t.stoneTypes = ["气血", "攻击", "物防", "法防"], t
}();
__reflect(VoDuanZao.prototype, "VoDuanZao");
var VoMaster = function () {
    function t() {}
    return t.getInst = function () {
        return t._inst || (t._inst = new t)
    }, t.prototype.updateQianHua = function () {
        var t = this.getCurQHLevel();
        this.updateQHCfg(t)
    }, t.prototype.updateQHCfg = function (t) {
        var e = CFG_DUANZAO.LIB_MASTER_QHJL,
            i = e[1].level;
        if (i > t) this.qiangHuaCfg = null;
        else
            for (var o in e) t >= e[o].level && (this.qiangHuaCfg = e[o])
    }, t.prototype.getCurQHLevel = function () {
        for (var t = 1e4, e = 0; 8 > e; e++) {
            var i = e,
                o = GameGlobal.modelRole.eqDts[i],
                n = VoDuanZao.map.getByKey(i);
            if (!o) return 0;
            n.getQiangHuaLv() < t && (t = n.getQiangHuaLv())
        }
        return t
    }, t.prototype.getQHDengJie = function () {
        return null == this.qiangHuaCfg ? 0 : this.qiangHuaCfg.dj
    }, t.prototype.updateJingLian = function () {
        var t = this.getCurJLLevel();
        this.updateJLCfg(t)
    }, t.prototype.updateJLCfg = function (t) {
        var e = CFG_DUANZAO.LIB_MASTER_QHJL,
            i = e[1].level;
        if (i > t) this.jingLianCfg = null;
        else
            for (var o in e) t >= e[o].level && (this.jingLianCfg = e[o])
    }, t.prototype.getCurJLLevel = function () {
        for (var t = 1e4, e = 0; 8 > e; e++) {
            var i = e,
                o = GameGlobal.modelRole.eqDts[i],
                n = VoDuanZao.map.getByKey(i);
            if (!o) return 0;
            n.getJingLianLv() < t && (t = n.getJingLianLv())
        }
        return t
    }, t.prototype.getJLDengJie = function () {
        return null == this.jingLianCfg ? 0 : this.jingLianCfg.dj
    }, t.prototype.updateBaoShi = function () {
        var t = this.getCurBSLevel();
        this.updateBaoShiCfg(t)
    }, t.prototype.getCurBSLevel = function () {
        for (var t = 1e4, e = 0; 8 > e; e++) {
            var i = e,
                o = GameGlobal.modelRole.eqDts[i],
                n = VoDuanZao.map.getByKey(i);
            if (!o) return 0;
            n.getBaoShiLv() < t && (t = n.getBaoShiLv())
        }
        return t
    }, t.prototype.updateBaoShiCfg = function (t) {
        var e = CFG_DUANZAO.LIB_MASTER_BAOSHI,
            i = e[1].level;
        if (i > t) this.baoShiCfg = null;
        else
            for (var o in e) t >= e[o].level && (this.baoShiCfg = e[o])
    }, t.prototype.getBSDengJie = function () {
        return null == this.baoShiCfg ? 0 : this.baoShiCfg.dj
    }, t.prototype.updateXingXing = function () {
        var t = this.getCurXXLevel();
        this.updateXingXingCfg(t)
    }, t.prototype.getCurXXLevel = function () {
        for (var t = 1e4, e = 0; 8 > e; e++) {
            var i = e,
                o = GameGlobal.modelRole.eqDts[i],
                n = VoDuanZao.map.getByKey(i);
            if (!o) return 0;
            n.getShengXingLv() < t && (t = n.getShengXingLv())
        }
        return t
    }, t.prototype.updateXingXingCfg = function (t) {
        var e = CFG_DUANZAO.LIB_MASTER_SHENGXING,
            i = e[1].level;
        if (i > t) this.xingXingCfg = null;
        else
            for (var o in e) t >= e[o].level && (this.xingXingCfg = e[o])
    }, t.prototype.getXXDengJie = function () {
        return null == this.xingXingCfg ? 0 : this.xingXingCfg.dj
    }, t.prototype.getDengJie = function (t) {
        switch (t) {
            case 0:
                return this.getQHDengJie();
            case 1:
                return this.getJLDengJie();
            case 2:
                return this.getBSDengJie();
            case 3:
                return this.getXXDengJie()
        }
    }, t.prototype.getQHFullLevel = function () {
        var t = this.getQHDengJie(),
            e = CFG_DUANZAO.LIB_MASTER_QHJL[t + 1];
        return e ? e.level : 0
    }, t.prototype.getJLFullLevel = function () {
        var t = this.getJLDengJie(),
            e = CFG_DUANZAO.LIB_MASTER_QHJL[t + 1];
        return e ? e.level : 0
    }, t.prototype.getBSFullLevel = function () {
        var t = this.getBSDengJie(),
            e = CFG_DUANZAO.LIB_MASTER_BAOSHI[t + 1];
        return e ? e.level : 0
    }, t.prototype.getXXFullLevel = function () {
        var t = this.getXXDengJie(),
            e = CFG_DUANZAO.LIB_MASTER_SHENGXING[t + 1];
        return e ? e.level : 0
    }, t.prototype.getFullLevel = function (t) {
        switch (t) {
            case 0:
                return this.getQHFullLevel();
            case 1:
                return this.getJLFullLevel();
            case 2:
                return this.getBSFullLevel();
            case 3:
                return this.getXXFullLevel()
        }
    }, t.prototype.isQHManJi = function () {
        var t = this.getQHDengJie(),
            e = t + 1,
            i = CFG_DUANZAO.LIB_MASTER_QHJL[e];
        return i ? !1 : !0
    }, t.prototype.isJLManJi = function () {
        var t = this.getJLDengJie(),
            e = t + 1,
            i = CFG_DUANZAO.LIB_MASTER_QHJL[e];
        return i ? !1 : !0
    }, t.prototype.isBSManJi = function () {
        var t = this.getBSDengJie(),
            e = t + 1,
            i = CFG_DUANZAO.LIB_MASTER_BAOSHI[e];
        return i ? !1 : !0
    }, t.prototype.isXXManJi = function () {
        var t = this.getXXDengJie(),
            e = t + 1,
            i = CFG_DUANZAO.LIB_MASTER_SHENGXING[e];
        return i ? !1 : !0
    }, t.prototype.isManji = function (t) {
        switch (t) {
            case 0:
                return this.isQHManJi();
            case 1:
                return this.isJLManJi();
            case 2:
                return this.isBSManJi();
            case 3:
                return this.isXXManJi()
        }
    }, t.prototype.getTypeString = function (t) {
        switch (t) {
            case 0:
                return "强化";
            case 1:
                return "精炼";
            case 2:
                return "宝石";
            case 3:
                return "升星"
        }
    }, t.prototype.getQHAttByJie = function (e) {
        for (var i = [], o = t, n = Util.strToIntArr(CFG_DUANZAO.LIB_MASTER_QHJL[e].qhshuxing), a = 0; a < n.length; a++) {
            var s = n[a],
                r = s[0],
                l = s[1],
                h = o.attObjs[r].name;
            i.push({
                id: r,
                name: h,
                val: l
            })
        }
        return i
    }, t.prototype.getJLAttByJie = function (e) {
        for (var i = [], o = t, n = Util.strToIntArr(CFG_DUANZAO.LIB_MASTER_QHJL[e].jlshuxing), a = 0; a < n.length; a++) {
            var s = n[a],
                r = s[0],
                l = s[1],
                h = o.attObjs[r].name;
            i.push({
                id: r,
                name: h,
                val: l
            })
        }
        return i
    }, t.prototype.getBSAttByJie = function (e) {
        for (var i = [], o = t, n = Util.strToIntArr(CFG_DUANZAO.LIB_MASTER_BAOSHI[e].bsshuxing), a = 0; a < n.length; a++) {
            var s = n[a],
                r = s[0],
                l = s[1],
                h = o.attObjs2[r].name;
            i.push({
                id: r,
                name: h,
                val: l
            })
        }
        return i
    }, t.prototype.getXXAttByJie = function (e) {
        for (var i = [], o = t, n = Util.strToIntArr(CFG_DUANZAO.LIB_MASTER_SHENGXING[e].sxshuxing), a = 0; a < n.length; a++) {
            var s = n[a],
                r = s[0],
                l = s[1],
                h = o.attObjs2[r].name;
            i.push({
                id: r,
                name: h,
                val: l
            })
        }
        return i
    }, t.prototype.getAttsByDengJie = function (t, e) {
        switch (t) {
            case 0:
                return this.getQHAttByJie(e);
            case 1:
                return this.getJLAttByJie(e);
            case 2:
                return this.getBSAttByJie(e);
            case 3:
                return this.getXXAttByJie(e)
        }
    }, t.attObjs = {
        102: {
            id: 102,
            name: "气血",
            val: 0
        },
        103: {
            id: 103,
            name: "攻击",
            val: 0
        },
        105: {
            id: 105,
            name: "物防",
            val: 0
        },
        106: {
            id: 106,
            name: "法防",
            val: 0
        }
    }, t.attObjs2 = {
        115: {
            id: 115,
            name: "伤害增加",
            val: 0
        },
        117: {
            id: 117,
            name: "物伤减少",
            val: 0
        },
        118: {
            id: 118,
            name: "法伤减少",
            val: 0
        }
    }, t
}();
__reflect(VoMaster.prototype, "VoMaster");
var EightYuanGift;
! function (t) {
    var e = function (e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.initialize = function () {
            e.prototype.initialize.call(this)
        }, i.prototype.registUI = function () {
            var e = GameGlobal.layerMgr;
            e.regView(t.GiftView, e.UI_MainMiddle, 1, 1)
        }, i.prototype.registProxys = function () {
            var e = GameGlobal.socketMgr;
            this.registSingleProxy(t.Proxy, e), this.proxy = this.getProxy(t.Proxy)
        }, i
    }(UIAndProxyBaseCtr);
    t.EightYuanGiftCtr = e, __reflect(e.prototype, "EightYuanGift.EightYuanGiftCtr")
}(EightYuanGift || (EightYuanGift = {}));
var EightYuanGift;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "EightYuanGiftItemSkin", t
        }
        return __extends(i, e), i.prototype.childrenCreated = function () {
            e.prototype.childrenCreated.call(this)
        }, i.prototype.dataChanged = function () {
            var e = this.data,
                i = ConfigHelp.makeVoList(e.reward)[0];
            i.quality < 5 && (i.quality = 5), this.itemGrid.data = i, this.itemGrid.enableTip(), this.itemGrid.isShowEff(!0), e.boughtState == t.GiftState.NOT_BOUGHT ? (this.imageIsBought.visible = !1, this.itemGrid.setGray(!0)) : e.boughtState == t.GiftState.IS_BOUGHT && (this.imageIsBought.visible = !0, this.itemGrid.setGray(!1));
            var o = GameCtrlBase.instance.getModel(t.Model),
                n = o.giftList.length;
            1 == e.sort ? (this.gridBg.source = "eightYuanGift_json.22_itemBox01", this.boxGroup.x = -4) : e.sort == n ? (this.gridBg.source = "eightYuanGift_json.22_itemBox03", this.boxGroup.x = 11) : this.gridBg.source = "eightYuanGift_json.22_itemBox02"
        }, i
    }(eui.ItemRenderer);
    t.GiftItem = e, __reflect(e.prototype, "EightYuanGift.GiftItem")
}(EightYuanGift || (EightYuanGift = {}));
var EightYuanGift;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "EightYuanGiftViewSkin", t
        }
        return __extends(i, e), i.prototype.init = function () {
            this.arrCollection = new eui.ArrayCollection, this.uiRole = new UIRole, this.model = this.getModel(t.Model), this.lastHavedBuyCount = 0
        }, i.prototype.initView = function () {
            e.prototype.initView.call(this), this.init(), this.rolePart.addChild(this.uiRole), this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btn_help), this.btn_help.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.btnRecharge.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.btnRecharge.label = "立即购买", this.item = VoItem.create(), this.giftList.itemRenderer = t.GiftItem, this.giftList.dataProvider = this.arrCollection, this.arrCollection.source = this.getModel(t.Model).giftList.values
        }, i.prototype.onTouch = function (e) {
            switch (e.currentTarget) {
                case this.btn_help:
                    ViewWenHao.show(CFG_COMMOND.LIBWFSM[1127].detail, 24);
                    break;
                case this.btnRecharge:
                    if (this.lastHavedBuyCount != this.model.curHavedBuyCount || 0 == this.sendProxyTime || egret.getTimer() - this.sendProxyTime > 1e4) {
                        this.lastHavedBuyCount = this.model.curHavedBuyCount, this.sendProxyTime = egret.getTimer();
                        var i = this.model.getCanBuyGiftId();
                        0 != i ? this.getProxy(t.Proxy).buyGift(i) : ViewText.text("所有礼包已购买！！！")
                    } else ViewText.text("服务器正忙，请稍候！！！")
            }
        }, i.prototype.onBuyGift = function (e) {
            var i = e.data,
                o = i.id;
            if (i.state == t.BuyState.BAG_FULL) GameGlobal.layerMgr.open(UIConst.EQUIPRL);
            else if (i.state == t.BuyState.CAN_RECHARGE) {
                var n = this.model.giftList.get(o).rechargeId,
                    a = CFG_Recharge.LIB[n];
                a && platform.recharge(a.id)
            }
        }, i.prototype.updateGift = function () {
            var e = Config.getConfig(giftBag_840),
                i = this.model.getCanBuyGiftId(),
                o = this.getModel(t.Model).giftList.values;
            if (0 != i) {
                var n = parseInt(e.get(i).reward.split(",")[1]);
                this.item.init(n)
            } else {
                var a = o[o.length - 1].id,
                    n = parseInt(e.get(a).reward.split(",")[1]);
                this.item.init(n)
            }
            this.lb_name.text = this.item.name, this.arrCollection.source = o
        }, i.prototype.addMsg = function () {
            EventCenter.addMsg(t.Event.UPDATE_GIFT, this.updateGift, this), EventCenter.addMsg(t.Event.UPDATE_BUY, this.onBuyGift, this)
        }, i.prototype.removeMsg = function () {
            EventCenter.removeMsg(t.Event.UPDATE_GIFT, this.updateGift, this), EventCenter.removeMsg(t.Event.UPDATE_BUY, this.onBuyGift, this)
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addMsg(), this.getProxy(t.Proxy).getGiftInfo(), this.uiRole.setData(this.model.roleShowData), this.uiRole.setWay(3), this.uiRole.play(), this.sendProxyTime = 0
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeMsg(), this.uiRole.stopAndClear()
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i
    }(BaseEUIView);
    t.GiftView = e, __reflect(e.prototype, "EightYuanGift.GiftView")
}(EightYuanGift || (EightYuanGift = {}));
var EightYuanGift;
! function (t) {
    var e = function () {
        function t() {
            this.init()
        }
        return t.prototype.init = function () {
            this.boughtState = 0, this.reward = "", this.canRequestRecharge = !1
        }, t
    }();
    t.GiftData = e, __reflect(e.prototype, "EightYuanGift.GiftData")
}(EightYuanGift || (EightYuanGift = {}));
var EightYuanGift;
! function (t) {
    var e;
    ! function (t) {
        t[t.GET_GIFT_INFO = 4651] = "GET_GIFT_INFO", t[t.ON_GIFT_INFO = 4652] = "ON_GIFT_INFO", t[t.BUY_GIFT = 4653] = "BUY_GIFT", t[t.ON_BUY_GIFT = 4654] = "ON_BUY_GIFT"
    }(e = t.Protocol || (t.Protocol = {}));
    var i;
    ! function (t) {
        t[t.NOT_BOUGHT = 0] = "NOT_BOUGHT", t[t.IS_BOUGHT = 1] = "IS_BOUGHT"
    }(i = t.GiftState || (t.GiftState = {}));
    var o;
    ! function (t) {
        t[t.CAN_RECHARGE = 1] = "CAN_RECHARGE", t[t.HAVED_BOUGHT = 2] = "HAVED_BOUGHT", t[t.BAG_FULL = 3] = "BAG_FULL"
    }(o = t.BuyState || (t.BuyState = {}));
    var n;
    ! function (t) {
        t[t.ANDROID = 1] = "ANDROID", t[t.IOS = 2] = "IOS"
    }(n = t.Platform || (t.Platform = {}))
}(EightYuanGift || (EightYuanGift = {}));
var EightYuanGift;
! function (t) {
    var e = function () {
        function t() {}
        return t.STR = "EIGHT_YUAN_GIFT", t.UPDATE_GIFT = t.STR + "UPDATE_GIFT", t.UPDATE_BUY = t.STR + "UPDATE_BUY", t
    }();
    t.Event = e, __reflect(e.prototype, "EightYuanGift.Event")
}(EightYuanGift || (EightYuanGift = {}));
var EightYuanGift;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.init(), t
        }
        return __extends(i, e), i.prototype.init = function () {
            this._roleShowData = new RoleShowData;
            var e = GameGlobal.modelRole.voMine.job;
            this._curHavedBuyCount = 0, this._sysId = platform.isIOS ? t.Platform.IOS : t.Platform.ANDROID, this._giftList = new Dictionary;
            var i = Config.getConfig(giftBag_840).values.concat();
            i.sort(function (t, e) {
                return t.order - e.order
            });
            for (var o = 0; o < i.length; o++) {
                var n = i[o];
                if (n.sysID == this._sysId) {
                    var a = new t.GiftData;
                    a.reward = n.reward, a.id = n.id, a.sort = n.order, a.rechargeId = n.rechargeid, this._giftList.set(n.id, a);
                    var s = parseInt(e == Sex.MAN ? n.man : n.woman);
                    this._roleShowData.setRoleShowIdByType(n.type, s)
                }
            }
        }, Object.defineProperty(i.prototype, "giftList", {
            get: function () {
                return this._giftList
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "roleShowData", {
            get: function () {
                return this._roleShowData
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "sysId", {
            get: function () {
                return this._sysId
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "curHavedBuyCount", {
            get: function () {
                return this._curHavedBuyCount
            },
            enumerable: !0,
            configurable: !0
        }), i.prototype.updateHavedBuyCount = function (t) {
            this._curHavedBuyCount = t
        }, i.prototype.getCanBuyGiftId = function () {
            var e = 0;
            return this._giftList.forEach(function (i, o, n) {
                return n.boughtState == t.GiftState.NOT_BOUGHT ? (e = n.id, !1) : !0
            }), e
        }, i.prototype.updateGiftMap = function (t, e) {
            var i = this._giftList.get(t);
            i && (i.boughtState = e)
        }, i
    }(GameCtrlBase);
    t.Model = e, __reflect(e.prototype, "EightYuanGift.Model")
}(EightYuanGift || (EightYuanGift = {}));
var EightYuanGift;
! function (t) {
    var e = function (e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.listenServ = function (i) {
            e.prototype.listenServ.call(this, i), i.regHand(t.Protocol.ON_GIFT_INFO, this.onGiftInfo, this), i.regHand(t.Protocol.ON_BUY_GIFT, this.onBuyGift, this)
        }, i.prototype.onGiftInfo = function (e, i) {
            for (var o = e.getModel(t.Model), n = i.readShort(), a = 0, s = 0; n > s; s++) {
                var r = i.readInt(),
                    l = i.readByte();
                o.updateGiftMap(r, l), l == t.GiftState.IS_BOUGHT && a++
            }
            o.updateHavedBuyCount(a), EventCenter.sendMsg(t.Event.UPDATE_GIFT)
        }, i.prototype.onBuyGift = function (e, i) {
            var o = (e.getModel(t.Model), i.readByte()),
                n = i.readInt();
            EventCenter.sendMsg(t.Event.UPDATE_BUY, {
                id: n,
                state: o
            })
        }, i.prototype.getGiftInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_GIFT_INFO, e)
        }, i.prototype.buyGift = function (e) {
            var i = this.getBytes();
            i.writeInt(e), this.sendSocket(t.Protocol.BUY_GIFT, i)
        }, i
    }(BaseModel);
    t.Proxy = e, __reflect(e.prototype, "EightYuanGift.Proxy")
}(EightYuanGift || (EightYuanGift = {}));
var ModelEmail = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(302, i.GC302, i), e.regHand(304, i.GC304, i), e.regHand(306, i.GC306, i), e.regHand(308, i.GC308, i), e.regHand(310, i.GC310, i), e.regHand(312, i.GC312, i), e.regHand(314, i.GC314, i)
    }, e.prototype.GC302 = function (t, i) {
        e.redSign = !0, t.notify(e.REDNOTICE)
    }, e.prototype.CG303 = function () {
        this.sendSocket(303, this.getBytes())
    }, e.prototype.GC304 = function (t, i) {
        for (var o = (i.readByte(), i.readShort()), n = [], a = 0; o > a; a++) {
            var s = i.readLong(),
                r = i.readInt(),
                l = i.readInt(),
                h = i.readByte(),
                c = i.readByte();
            n.push([s, l, r, h, c])
        }
        var p = ProxyEmail.exCh1(n);
        GameGlobal.modelEmail.notify(e.EMAILDT, p)
    }, e.prototype.CG305 = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(305, e)
    }, e.prototype.GC306 = function (t, i) {
        for (var o = (i.readByte(), i.readLong()), n = i.readShort(), a = [], s = 0; n > s; s++) {
            var r = i.readByte(),
                l = i.readInt(),
                h = i.readInt();
            a.push([r, l, h])
        }
        var c = i.readUTF(),
            p = i.readByte(),
            u = i.readByte(),
            d = ProxyEmail.updateItm(o, a, c, p, u);
        GameGlobal.modelEmail.notify(e.EMAILITEM, d)
    }, e.prototype.CG307 = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(307, e)
    }, e.prototype.GC308 = function (t, i) {
        var o = i.readByte(),
            n = i.readLong();
        if (1 == o) {
            var a = ProxyEmail.findById(n);
            a.fujian = 0;
            var s = GameGlobal.layerMgr.getView(UIConst.EMAILGET);
            s.toBagEff();
            for (var r = ProxyEmail.allEmails, l = !1, h = 0; h < r.length; h++) {
                var c = r[h];
                if (1 == c.fujian) {
                    l = !0;
                    break
                }
            }
            e.redSign = l, t.notify(e.REDNOTICE), t.notify(e.EMAILITEM, a)
        } else 4 == o ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["失败", "成功", "邮件不存在", "附件没物品", null, "飞本人邮件", "邮件已领取"][o])
    }, e.prototype.CG309 = function () {
        this.sendSocket(309, this.getBytes())
    }, e.prototype.GC310 = function (t, i) {
        var o = i.readByte();
        1 == o ? (ViewText.text("您领取了所有邮件"), e.redSign = !1, t.notify(e.REDNOTICE)) : 2 == o ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["", "成功", null, "已达到金钱上限", "没有可提取的附件"][o])
    }, e.prototype.CG313 = function () {
        this.sendSocket(313, this.getBytes())
    }, e.prototype.GC314 = function (t, i) {
        var o = i.readByte();
        1 == o ? (ViewText.text("您删除了所有邮件"), e.redSign = !1, t.notify(e.REDNOTICE)) : ViewText.text(["", "成功", "没有邮件"][o])
    }, e.prototype.GC312 = function (t, i) {
        var o = i.readLong(),
            n = i.readInt(),
            a = i.readInt(),
            s = i.readByte(),
            r = i.readByte(),
            l = ProxyEmail.findById(o);
        l.excId = n, l.time = a, l.isRead = s, l.fujian = r, l.name = CFG_EMAIL.LIB[n].title, l.content = CFG_EMAIL.LIB[n].content, GameGlobal.modelEmail.notify(e.EMAILITEM, l)
    }, e.EMAILDT = "EMAILDT", e.EMAILITEM = "EMAILITEM", e.REDNOTICE = "REDNOTICE", e.redSign = !1, e
}(BaseModel);
__reflect(ModelEmail.prototype, "ModelEmail");
var ProxyEmail = function () {
    function t() {}
    return t.exCh1 = function (e) {
        var i = e.length,
            o = CFG_EMAIL.LIB;
        t.allEmails.length = 0;
        for (var n = 0; i > n; n++) {
            var a = new VoEmail;
            a.lid = e[n][0], a.time = e[n][1], a.excId = e[n][2], a.isRead = e[n][3], a.fujian = e[n][4];
            var s = o[a.excId];
            s ? (a.name = o[a.excId].title, a.content = o[a.excId].content) : (a.name = "errorID:", a.content = ""), t.allEmails.push(a)
        }
        return t.allEmails
    }, t.findById = function (e) {
        var i = t.allEmails,
            o = void 0;
        !i && (i = []);
        var n = i.some(function (t) {
            return t.lid == e ? (o = t, !0) : void 0
        });
        return n || (o = new VoEmail, o.lid = e, t.allEmails.push(o)), o
    }, t.getParam_1 = function (t) {
        if (2036 == parseInt(t[0]) || 2037 == parseInt(t[0])) switch (parseInt(t[1])) {
            case 1:
                return "十六强";
            case 2:
                return "八强赛";
            case 3:
                return "四强赛";
            case 4:
                return "决赛";
            case 5:
                return "亚军"
        }
        return t[1]
    }, t.updateItm = function (e, i, o, n, a) {
        var s = t.findById(e),
            r = o.split("_");
        r[1] = this.getParam_1(r);
        var l = r[0],
            h = CFG_EMAIL.LIB[l];
        if (h) {
            var c, p = t.funDic;
            if (h.paramCall) {
                c = h.paramCall.split("_");
                for (var u = 0; u < c.length; u++) p[c[u]] && (r[u + 1] = p[c[u]](r[u + 1]))
            }
            s.content = Lang.reTxtMail(h.content, r), s.isRead = n, s.fujian = a, s.awards.length = 0;
            for (var d = 0; d < i.length; d++) {
                var f = t.parseItem(i[d]);
                s.awards.push(f)
            }
        } else {
            var g = "邮件表中找到不到【" + l + "】这个id，别找程序找策划";
            ViewText.text(g), ViewText.text(g)
        }
        return s
    }, t.parseAtt = function (t) {
        switch (parseInt(t)) {
            case 101:
                return "生命";
            case 103:
                return "攻击";
            case 105:
                return "物防";
            case 106:
                return "法防"
        }
    }, t.parseItem = function (t) {
        var e, i = t[0],
            o = t[1],
            n = t[2];
        return 1 == i ? (e = new VoItem, e.init(o), e.count = n) : 2 == i ? (e = new VoEquip, e.init(o), e.count = n) : 3 == i ? (e = VoFuWen.create(), e.init(o)) : (e = new VoCurrency, e.init(i), e.count = n, e.quality = 1), e
    }, Object.defineProperty(t, "funDic", {
        get: function () {
            return BroadCastMgr.getFunDic()
        },
        enumerable: !0,
        configurable: !0
    }), t.allEmails = [], t
}();
__reflect(ProxyEmail.prototype, "ProxyEmail");
var VEmail = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "resource/eui_skins/game/email/VEmailSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.base.title = "邮件", e.addCloseListen(e.base.btnClose), e.addCloseListen(e.base.btnReturn), e.btn1.label = "一键删除", e.btn2.label = "一键领取", e.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.modelEmail.CG313()
        }, e), e.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.modelEmail.CG309()
        }, e), this.gps.itemRenderer = EmItem, this.gps.dataProvider = this.sourceData
    }, e.prototype.onOpen = function (e) {
        var i = this;
        t.prototype.onOpen.call(this, e), GameGlobal.modelEmail.on(ModelEmail.EMAILDT, i.onUpdate, i), GameGlobal.modelEmail.on(ModelEmail.EMAILITEM, i.upDateItm, i), GameGlobal.modelEmail.CG303()
    }, e.prototype.onClose = function () {
        var t = this;
        GameGlobal.modelEmail.off(ModelEmail.EMAILDT, t.onUpdate, t), GameGlobal.modelEmail.off(ModelEmail.EMAILITEM, t.upDateItm, t)
    }, e.prototype.onUpdate = function (t) {
        var e = this;
        e.sourceData.source = t, e.sourceData.refresh()
    }, e.prototype.upDateItm = function (t) {
        this.sourceData.itemUpdated(t)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VEmail.prototype, "VEmail");
var VEmailBox = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/email/VTipsBoxSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.addCloseListen(e.btnClose), e.btnGet.label = "领取附件", e.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.modelEmail.CG307(e.data.lid)
        }, e), e.effMove = new MoveEff(e.items)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.data = e, GameGlobal.modelEmail.on(ModelEmail.EMAILITEM, i.onUpdate, i), GameGlobal.modelEmail.CG305(e.lid), i.onUpdate(e)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this);
        var e = this;
        GameGlobal.modelEmail.off(ModelEmail.EMAILITEM, e.onUpdate, e)
    }, e.prototype.onUpdate = function (t) {
        var e = this;
        for (e.data = t; e.items.numChildren;) e.items.getChildAt(0).dispose();
        e.txtContent.textFlow = HtmlUtil.parse("      " + t.content);
        for (var i = t.awards.length, o = 0; i > o; o++) {
            var n = EmailGd.create();
            e.items.addChild(n);
            var a = t.awards[o];
            n.data = a
        }
        e.effMove.move(), 1 == t.fujian ? (e.btnGet.visible = !0, e.iconGot.visible = !1) : (e.btnGet.visible = !1, e.iconGot.visible = !0)
    }, e.prototype.toBagEff = function () {
        this.btnGet.visible = !1, this.iconGot.visible = !0;
        for (var t = this.items.$children, e = [], i = 0; i < t.length; i++) {
            var o = t[i],
                n = o.grid;
            e.push(n)
        }
        DisplayUtil.toBag(e), GameGlobal.tick.addInterv(function (t) {
            t.closeHandler()
        }, 500, this, !0)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VEmailBox.prototype, "VEmailBox");
var EmailGd = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/email/GDItemSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.grid.setTxtVis1(!0), this.grid.showOne = !0
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            var e = this;
            e._data = t, e.grid.data = t, e.txt1.text = t.name
        },
        enumerable: !0,
        configurable: !0
    }), e.create = function () {
        return e.pool.pop() || new e
    }, e.prototype.dispose = function () {
        this.parent && this.parent.removeChild(this), e.pool.push(this)
    }, e.pool = [], e
}(MoveItem2);
__reflect(EmailGd.prototype, "EmailGd");
var EmItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/email/EmItemSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTap, this)
    }, e.prototype.onTap = function (t) {
        var i = this,
            o = t.currentTarget;
        e.now && (e.now.selected = !1), e.now = o, o.selected = !0, GameGlobal.layerMgr.open(UIConst.EMAILGET, i.data)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            var e = this;
            e._data = t, e.txtName.textFlow = HtmlUtil.parse(t.name + (1 == t.isRead ? HtmlUtil.color("(已读)", Color.GR_STR) : HtmlUtil.color("(未读)", Color.RE_STR))), e.txtTime.text = Util.parseTime1(void 0 == t.time ? 0 : 1e3 * t.time), e.imIcon.visible = 1 == t.fujian, e.NIcon.visible = 0 == t.isRead
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel = t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.bg.source = "JJCAtlas_json.bg9" : this.bg.source = "JJCAtlas_json.bg10"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(EmItem.prototype, "EmItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VoEmail = function () {
    function t() {
        this.awards = []
    }
    return t
}();
__reflect(VoEmail.prototype, "VoEmail");
var ViewRoleEquipTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/equip/RoleEquipTip.exml", e.touchChildren = !1, e.addCloseListen(e), e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.textStr = new ImageText, this.textStr.fx = 5, this.textStr.fy = 145, this.textStr.container = this.group1, this.textStr.charFunc = ImageText.STRFUNC, DisplayUtil.remove(this.starAttrGroup)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        GameGlobal.stage.addEventListener(egret.TouchEvent.TOUCH_TAP, i.onClose, i);
        var o = e;
        i.vo = e, i.tName.text = o.name, i.tName.textColor = Color.getColorInt(o.quality), i.grid.data = o, i.tpos.text = ModelEquip.getEquipTName(o.position), i.tlvl.text = o.level + "", i.lbJob.text = ModelRole.jobs[o.job];
        var n = o.zhanli;
        i.textStr.setText("z" + n);
        var a = VoDuanZao.map.getByKey(o.gridIndex);
        i.qt0.textFlow = HtmlUtil.parse(VoDuanZao.parseAttStr(a.qianghuaCfg.shuxing, "#ffffff", this.addQHAttribute(a))), i.jt0.textFlow = HtmlUtil.parse(VoDuanZao.parseAttStr(a.jinglianCfg.shuxing, "#ffffff", this.addJLAttribute(a)));
        var s = a.baoshiCfg.stone;
        if (0 == a.getBaoShiLv()) this.fillGemAttr(null, s, 0), this.fillGemAttr(null, s, 1), this.fillGemAttr(null, s, 2), this.fillGemAttr(null, s, 3);
        else {
            var r = Util.strToArr(a.baoshiCfg.shuxing);
            this.fillGemAttr(r[0], s, 0), this.fillGemAttr(r[1], s, 1), this.fillGemAttr(r[2], s, 2), this.fillGemAttr(r[3], s, 3)
        }
        var l = 0;
        if (VoDuanZao.updateXingXing(a, i.groupStar), a.getShengXingLv() > 0) {
            var h = a.shengXingCfg.shuxing;
            l = h / 1e4 * 100, this.st0.text = "装备基础属性+" + MathUtil.floor2Fix(l) + "%", DisplayUtil.addBy(i.groupStar, i.attrGroup, 0)
        } else DisplayUtil.remove(i.groupStar);
        for (var c = 0; c < e.attr.length; c++) {
            var p = e.attr[c][0],
                u = e.attr[c][1],
                d = u * l / 100 >> 0,
                f = CFG_ATTR.LIB[p];
            f.xishu;
            d > 0 ? i["bt" + c].textFlow = HtmlUtil.parse(f.n + "：" + u + HtmlUtil.color("+" + d + "(升星加成)", "#0CD102")) : i["bt" + c].text = f.n + ": " + u
        }
        this.updateRed(e, i.attrGroup), this.fillSuitAttr(i.attrGroup)
    }, e.prototype.addQHAttribute = function (t) {
        var e = t.shengXingCfg.shuxing2;
        return e / 1e4
    }, e.prototype.addJLAttribute = function (t) {
        var e = t.shengXingCfg.shuxing3;
        return e / 1e4
    }, e.prototype.addBSAttribute = function () {
        var t = VoDuanZao.map.getByKey(this.vo.gridIndex),
            e = parseInt(t.shengXingCfg.shuxing4);
        return e / 1e4
    }, e.prototype.updateRed = function (t, e) {
        var i = this,
            o = DisplayUtil;
        if (t.quality >= 6) {
            if (t.attrDyn && t.attrDyn.length) var n = ConfigHelp.getAttrText(t.attrDyn, "\n");
            else n = CFG_Equip.getEQExtraAttrStr(t.id);
            i.txtAttExtra.text = n, o.addBy(i.extraGrp, e), t.roleName && (i.lbRoleName.text = t.roleName), t.extraStr && (i.lbScore.text = t.extraStr + "")
        } else o.remove(i.extraGrp)
    }, e.prototype.fillGemAttr = function (t, e, i) {
        var o = VoDuanZao.stoneTypes[e - 1],
            n = this["gem" + i],
            a = this["bst" + i];
        if (t && t.length && t[1]) {
            var s = this.addBSAttribute();
            if (s > 0) {
                var r = parseInt(t[1]) * s >> 0;
                a.textFlow = HtmlUtil.parse(o + "宝石  " + HtmlUtil.color("+" + t[1], "#ffffff") + HtmlUtil.color("+" + r + "(升星加成)", "#0CD102"))
            } else a.textFlow = HtmlUtil.parse(o + "宝石  " + HtmlUtil.color("+" + t[1], "#0CD102"));
            n.source = "CMS1_json.bm_gem" + e, n.filters = null
        } else a.textFlow = HtmlUtil.parse(o + "宝石" + HtmlUtil.color("  未激活", "#9B8B8B")), n.source = "CMS1_json.bm_gem" + e, n.filters = Color.getDisabled()
    }, e.prototype.fillSuitAttr = function (t) {
        if (this.vo.remakeID) {
            DisplayUtil.addBy(this.suitGrp, t), this.lbSuitName.text = CFG_Equip.LIB_EQREMAKE[this.vo.remakeID].mc + "套装", this.lbSuitDes.text = CFG_Equip.LIB_EQREMAKE[this.vo.remakeID].tzwz;
            var e = GameGlobal.modelRole.getSuitNum(this.vo.remakeID),
                i = Util.getTempArr(),
                o = CFG_Equip.LIB_EQREMAKE[this.vo.remakeID];
            e >= 8 ? i.push(3, o.sx1, 1, 5, o.sx2, 1, 8, o.sx3, 1) : e >= 5 ? i.push(3, o.sx1, 1, 5, o.sx2, 1, 8, o.sx3, 0) : e >= 3 ? i.push(3, o.sx1, 1, 5, o.sx2, 0, 8, o.sx3, 0) : i.push(3, o.sx1, 0, 5, o.sx2, 0, 8, o.sx3, 0);
            for (var n = "", a = 0, s = i.length; s > a; a += 3) {
                for (var r = i[a + 1], l = i[a + 2], h = r.split(/;|,/), c = "", p = 0, u = h.length; u > p; p += 2) {
                    var d = CFG_ATTR.LIB[h[p]],
                        f = d.n;
                    if (d.sb > 1) var g = 100 * parseInt(h[p + 1]) / d.sb;
                    else var g = parseInt(h[p + 1]);
                    var m = g >= 0 ? "+" + g : String(g);
                    d.sb > 1 && (m += "%");
                    var y = g > 0 ? "33dd33" : "dd3333";
                    if (l) var v = Lang.reTxt("<font color='#{0}'>{1}{2}</font>", y, f, m);
                    else var v = f + m;
                    c += 0 != p ? " " + v : v
                }
                var _ = 0 != a ? "\n" : "",
                    G = i[a] + "件效果";
                l && (G = HtmlUtil.fontNoSize(G, "#EAD131")), n += _ + G + " " + c
            }
            this.lbSuitAttr.textFlow = HtmlUtil.parse(n)
        } else DisplayUtil.remove(this.suitGrp)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onClose, this)
    }, e.prototype.onSize = function () {
        this.fullStageH()
    }, e
}(BaseEUIView);
__reflect(ViewRoleEquipTip.prototype, "ViewRoleEquipTip");
var FaBaoEvent = function () {
    function t() {}
    return t.pre = "FA_BAO_EVENT_", t.ON_FA_BAO_QH_LEVEL_CHANGE = t.pre + "ON_FA_BAO_QH_LEVEL_CHANGE", t
}();
__reflect(FaBaoEvent.prototype, "FaBaoEvent");
var ModelFaBao = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(3160, this.GC3160, this), e.regHand(3162, this.GC3162, this), e.regHand(3164, this.GC3164, this), e.regHand(3166, this.GC3166, this), e.regHand(3168, this.GC3168, this)
    }, e.prototype.GC3160 = function (t, e) {
        VoFaBao.init();
        for (var i = e.readShort(), o = 0; i > o; o++) {
            var n = e.readInt(),
                a = e.readShort(),
                s = e.readShort(),
                r = e.readShort(),
                l = e.readShort(),
                h = e.readShort(),
                c = e.readInt();
            VoFaBao.upItem(n, a, s, r, l, h, c)
        }
        var p = e.readInt();
        VoFaBao.upItemHH(p), VoFaBao.Sort(), VoFaBao._nowSel = VoFaBao.List[0]
    }, e.prototype.CG3161 = function (t) {
        var i = this.getBytes();
        i.writeInt(t);
        e.autoBuy ? 1 : 0;
        i.writeByte(0), this.sendSocket(3161, i)
    }, e.prototype.GC3162 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = i.readShort();
            a > VoFaBao._nowSel.QHlev && (e.oneKey && (e.oneKey = !1), e.update = !0);
            var s = i.readShort(),
                r = i.readInt();
            VoFaBao.upItemQHlev(n, a, s, r), e.dynamic = !0, t.notify(e.MSG_UPDATE), e.oneKey && setTimeout(function () {
                e.oneKey ? t.CG3161(n) : t.notify(e.MSG_ALRTE)
            }, 400)
        } else if (2 == o) ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        }), t.notify(e.MSG_ALRTE);
        else if (3 == o) {
            var l = VoFaBao.getLIB3CFG(),
                h = ConfigHelp.makeVoList(l.need)[0];
            GameGlobal.layerMgr.open(UIConst.CAILIAOGET, h), t.notify(e.MSG_ALRTE)
        }
    }, e.prototype.CG3163 = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeShort(e), this.sendSocket(3163, i)
    }, e.prototype.GC3164 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = i.readShort(),
                s = i.readShort(),
                r = i.readInt();
            VoFaBao.upItemJLlev(n, a, s, r), t.notify(e.MSG_UPDATE)
        } else 2 == o ? ViewText.text("材料不足！") : 3 == o && ViewText.text("已满级！")
    }, e.prototype.CG3165 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(3165, e)
    }, e.prototype.GC3166 = function (t, i) {
        var o = i.readInt();
        VoFaBao.upItemHH(o), VoFaBao.followFaBao ? VoFaBao.followFaBao.setModID(o) : VoFaBao.updateFollowFaBao(), t.notify(e.MSG_HH)
    }, e.prototype.CG3167 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(3167, e)
    }, e.prototype.GC3168 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = i.readInt();
            VoFaBao.upItemJh(n, a), t.notify(e.MSG_UPDATE)
        }
    }, e.MSG_SELCHANGE = "MSG_SELCHANGE", e.MSG_UPDATE = "MSG_UPDATE", e.MSG_HH = "MSG_HH", e.MSG_ALRTE = "MSG_ALRTE", e.oneKey = !1, e.autoBuy = !1, e.dynamic = !1, e.update = !1, e
}(BaseModel);
__reflect(ModelFaBao.prototype, "ModelFaBao");
var VFaBaoHead = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.skinName = "FaBaoHeadSkin", e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel = t, this.currentState = t ? "sel" : "nor"
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.imgbg.source = "CM1_json.bm_gridbg" + (t.level + 2), this.imghead.source = IconUtil.getIconUrl(t.icon), this.lbName.text = t.name, this.lbName.textColor = Color.getColorInt(t.level + 2), this.imgGrey.visible = !t.jh, this.imgTip.visible = VoFaBao.getItemNotice(t)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VFaBaoHead.prototype, "VFaBaoHead");
var VFaBaoJL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "FaBaoJLSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        DisplayUtil.popBtnStyle(this.btnJl), DisplayUtil.popBtnStyle(this.btnHH), DisplayUtil.popBtnStyle(this.btnDao), DisplayUtil.popBtnStyle(this.btnMo), DisplayUtil.popBtnStyle(this.btnXian), this.btnJl.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onbtnJL, this), this.btnHH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onbtnHH, this), this.btnDao.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onbtnDao, this), this.btnMo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onbtnMo, this), this.btnXian.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onbtnXian, this), this.btnJl.label = "精炼", this.btnHH.label = "幻化", this.imgText = new ImageText, this.imgText.container = this.ZlGroup, this.imgText.charFunc = ImageText.STRFUNC, this.imgText2 = new ImageText, this.imgText2.container = this.ZlGroup2, this.imgText2.charFunc = ImageText.STRFUNC, this.role = UIRole.create(), this.role.scaleX = this.role.scaleY = 1.3, this.partGroup.addChild(this.role)
    }, e.prototype.onbtnDao = function () {
        this._curSelPart = 1, this.updateView()
    }, e.prototype.onbtnXian = function () {
        this._curSelPart = 2, this.updateView()
    }, e.prototype.onbtnMo = function () {
        this._curSelPart = 3, this.updateView()
    }, e.prototype.onbtnHH = function () {
        GameGlobal.modelFaBao.CG3165(VoFaBao._nowSel.id)
    }, e.prototype.onbtnJL = function () {
        if (this.btnJl.enabled) {
            var t = VoFaBao._nowSel;
            if (1 == this._curSelPart) {
                var e = ConfigHelp.makeVoList(t.jlItemDao)[0],
                    i = VoFaBao.getTypeItemCount(t.jlItemDao.split(";")[0]),
                    o = ConfigHelp.makeVoList(t.jlItemDao)[1],
                    n = VoFaBao.getTypeItemCount(t.jlItemDao.split(";")[1]);
                i >= e.count && n >= o.count ? GameGlobal.modelFaBao.CG3163(t.id, 1) : ViewText.text("道具不足")
            } else if (2 == this._curSelPart) {
                var e = ConfigHelp.makeVoList(t.jlItemMo)[0],
                    i = VoFaBao.getTypeItemCount(t.jlItemMo.split(";")[0]),
                    o = ConfigHelp.makeVoList(t.jlItemMo)[1],
                    n = VoFaBao.getTypeItemCount(t.jlItemMo.split(";")[1]);
                i >= e.count && n >= o.count ? GameGlobal.modelFaBao.CG3163(t.id, 2) : ViewText.text("道具不足")
            } else if (3 == this._curSelPart) {
                var e = ConfigHelp.makeVoList(t.jlItemXian)[0],
                    i = VoFaBao.getTypeItemCount(t.jlItemXian.split(";")[0]),
                    o = ConfigHelp.makeVoList(t.jlItemXian)[1],
                    n = VoFaBao.getTypeItemCount(t.jlItemXian.split(";")[1]);
                i >= e.count && n >= o.count ? GameGlobal.modelFaBao.CG3163(t.id, 3) : ViewText.text("道具不足")
            }
        }
    }, e.prototype.onOpen = function (t) {
        this._curSelPart = 1, this.updateView(), GameGlobal.modelFaBao.on(ModelFaBao.MSG_SELCHANGE, this.updateView, this), GameGlobal.modelFaBao.on(ModelFaBao.MSG_UPDATE, this.updateView, this), GameGlobal.modelFaBao.on(ModelFaBao.MSG_HH, this.upHH, this)
    }, e.prototype.onClose = function () {
        this.role.stopAndClear(), GameGlobal.modelFaBao.off(ModelFaBao.MSG_SELCHANGE, this.updateView, this), GameGlobal.modelFaBao.off(ModelFaBao.MSG_UPDATE, this.updateView, this), GameGlobal.modelFaBao.off(ModelFaBao.MSG_HH, this.upHH, this)
    }, e.prototype.upHH = function () {
        this.imghh.visible = !0, this.btnHH.visible = !1
    }, e.prototype.updateView = function () {
        var t = VoFaBao._nowSel;
        this.btnHH.visible = this.imghh.visible = !1, t.jh && (t.hh ? this.imghh.visible = !0 : this.btnHH.visible = !0), this.role.play(700), this.role.setFaBao(t.eff), this.role.setWay(1), this.role.validParts(), this.txtName.text = t.name, this.txtName.textColor = Color.getColorInt(t.level + 2), this.lbDaoJLLv.text = "Lv." + t.JLlevDao, this.lbXianJLLv.text = "Lv." + t.JLlevMo, this.lbMoJLLv.text = "Lv." + t.JLlevXian;
        var e = CFG_COMMOND.LIB[CFG_COMMOND.FBJL].arg.openLv,
            t = VoFaBao._nowSel;
        if (t.QHlev == e - 1) return this.txtmax.visible = !1, this.xhclGroup.visible = !1, this.btnJl.visible = !1, this.ZlGroup2.visible = !1, this.imgUp.visible = !1, this.nextArrow.visible = !1, this.nextGrp.visible = !1, this.nextLb.visible = !1, this.curGrp.visible = !1, this.curLb.visible = !1, this.lbselPartValue.visible = !1, this.lbYugao.visible = !0, this.iconNoticeDao.visible = !1, this.iconNoticeMo.visible = !1, void(this.iconNoticeXian.visible = !1);
        if (this.txtmax.visible = !0, this.xhclGroup.visible = !0, this.btnJl.visible = !0, this.ZlGroup2.visible = !0, this.imgUp.visible = !0, this.nextArrow.visible = !0, this.nextGrp.visible = !0, this.nextLb.visible = !0, this.curGrp.visible = !0, this.curLb.visible = !0, this.lbselPartValue.visible = !0, this.lbYugao.visible = !1, this.updateIconNotice(), this.imgText.setText("z" + t.zhanLi), 1 == this._curSelPart) {
            this.groupName.removeChildren(), this.groupVal.removeChildren(), this.groupName0.removeChildren(), this.groupVal0.removeChildren(), this.btnDao.source = "faBaoJingLian_json.14_daoChoose", this.btnMo.source = "faBaoJingLian_json.14_moUnChoose", this.btnXian.source = "faBaoJingLian_json.14_xianUnChoose", this.lbselPart.text = "道器", this.lbselPartValue.text = "升级提升全队战力";
            var i = VoFaBao.getJlBiaoId(t.id, 1, t.JLlevDao);
            if (i) var o = CFG_FABAO.LIB4[i + 1];
            for (var n = VoFaBao.getBaiAttrText(1, t.id, t.JLlevDao), a = 0; a < n.length; a++) {
                var s = n[a],
                    r = TxtLabel.getText(18, 7952973);
                r.text = s.name + ":", this.groupName.addChild(r);
                var l = TxtLabel.getText(18, 4928044);
                l.text = this.getRealVal(s), this.groupVal.addChild(l)
            }
            if (o)
                for (var h = VoFaBao.getBaiAttrText(1, t.id, t.JLlevDao + 1), a = 0; a < h.length; a++) {
                    var s = h[a],
                        r = TxtLabel.getText(18, 7952973);
                    r.text = s.name + ":", this.groupName0.addChild(r);
                    var l = TxtLabel.getText(18, 38709);
                    l.text = this.getRealVal(s), this.groupVal0.addChild(l)
                }
            if (i) var c = CFG_FABAO.LIB4[i].zhanli;
            if (t.JLlevDao == VoFaBao.getMaxJlLv(t.id, 1)) return this.txtmax.visible = !0, this.xhclGroup.visible = !1, this.btnJl.enabled = !1, this.btnJl.setNoticeVis(!1), this.imgText2.setText("z" + c), this.ZlGroup2.visible = !1, this.imgUp.visible = !1, this.nextArrow.visible = !1, this.nextGrp.visible = !1, this.nextLb.visible = !1, void(this.curGrp.x = 273);
            this.txtmax.visible = !1, this.xhclGroup.visible = !0, this.btnJl.enabled = !0, this.btnJl.setNoticeVis(!0), this.imgText2.setText("z" + c), this.ZlGroup2.visible = !0, this.imgUp.visible = !0, this.imgUp.x = this.ZlGroup2.x + this.imgText2.totalWid, this.nextArrow.visible = !0, this.nextGrp.visible = !0, this.nextLb.visible = !0, this.curGrp.x = 73, this.upGrid(t.jlItemDao)
        } else if (2 == this._curSelPart) {
            this.groupName.removeChildren(), this.groupVal.removeChildren(), this.groupName0.removeChildren(), this.groupVal0.removeChildren(), this.btnDao.source = "faBaoJingLian_json.14_daoUnChoose", this.btnMo.source = "faBaoJingLian_json.14_moUnChoose", this.btnXian.source = "faBaoJingLian_json.14_xianChoose", this.lbselPart.text = "仙器", this.lbselPartValue.text = "升级提升仙神战力";
            var i = VoFaBao.getJlBiaoId(t.id, 2, t.JLlevMo);
            if (i) var o = CFG_FABAO.LIB4[i + 1];
            for (var n = VoFaBao.getBaiAttrText(2, t.id, t.JLlevMo), a = 0; a < n.length; a++) {
                var s = n[a],
                    r = TxtLabel.getText(18, 7952973);
                r.text = s.name + ":", this.groupName.addChild(r);
                var l = TxtLabel.getText(18, 4928044);
                l.text = this.getRealVal(s), this.groupVal.addChild(l)
            }
            if (o)
                for (var h = VoFaBao.getBaiAttrText(2, t.id, t.JLlevMo + 1), a = 0; a < h.length; a++) {
                    var s = h[a],
                        r = TxtLabel.getText(18, 7952973);
                    r.text = s.name + ":", this.groupName0.addChild(r);
                    var l = TxtLabel.getText(18, 38709);
                    l.text = this.getRealVal(s), this.groupVal0.addChild(l)
                }
            if (i) var c = CFG_FABAO.LIB4[i].zhanli;
            if (t.JLlevMo == VoFaBao.getMaxJlLv(t.id, 2)) return this.txtmax.visible = !0, this.xhclGroup.visible = !1, this.btnJl.enabled = !1, this.btnJl.setNoticeVis(!1), this.imgText2.setText("z" + c), this.ZlGroup2.visible = !1, this.imgUp.visible = !1, this.nextArrow.visible = !1, this.nextGrp.visible = !1, this.nextLb.visible = !1, void(this.curGrp.x = 273);
            this.txtmax.visible = !1, this.xhclGroup.visible = !0, this.btnJl.enabled = !0, this.btnJl.setNoticeVis(!0), this.imgText2.setText("z" + c), this.ZlGroup2.visible = !0, this.imgUp.visible = !0, this.imgUp.x = this.ZlGroup2.x + this.imgText2.totalWid, this.nextArrow.visible = !0, this.nextGrp.visible = !0, this.nextLb.visible = !0, this.curGrp.x = 73, this.upGrid(t.jlItemMo)
        } else if (3 == this._curSelPart) {
            this.groupName.removeChildren(), this.groupVal.removeChildren(), this.groupName0.removeChildren(), this.groupVal0.removeChildren(), this.btnDao.source = "faBaoJingLian_json.14_daoUnChoose", this.btnMo.source = "faBaoJingLian_json.14_moChoose", this.btnXian.source = "faBaoJingLian_json.14_xianUnChoose", this.lbselPart.text = "魔器", this.lbselPartValue.text = "升级提升灵兽战力";
            var i = VoFaBao.getJlBiaoId(t.id, 3, t.JLlevXian);
            if (i) var o = CFG_FABAO.LIB4[i + 1];
            for (var n = VoFaBao.getBaiAttrText(3, t.id, t.JLlevXian), a = 0; a < n.length; a++) {
                var s = n[a],
                    r = TxtLabel.getText(18, 7952973);
                r.text = s.name + ":", this.groupName.addChild(r);
                var l = TxtLabel.getText(18, 4928044);
                l.text = this.getRealVal(s), this.groupVal.addChild(l)
            }
            if (o)
                for (var h = VoFaBao.getBaiAttrText(3, t.id, t.JLlevXian + 1), a = 0; a < h.length; a++) {
                    var s = h[a],
                        r = TxtLabel.getText(18, 7952973);
                    r.text = s.name + ":", this.groupName0.addChild(r);
                    var l = TxtLabel.getText(18, 38709);
                    l.text = this.getRealVal(s), this.groupVal0.addChild(l)
                }
            if (i) var c = CFG_FABAO.LIB4[i].zhanli;
            if (t.JLlevXian == VoFaBao.getMaxJlLv(t.id, 3)) return this.txtmax.visible = !0, this.xhclGroup.visible = !1, this.btnJl.enabled = !1, this.btnJl.setNoticeVis(!1), this.imgText2.setText("z" + c), this.ZlGroup2.visible = !1, this.imgUp.visible = !1, this.nextArrow.visible = !1, this.nextGrp.visible = !1, this.nextLb.visible = !1, void(this.curGrp.x = 273);
            this.txtmax.visible = !1, this.xhclGroup.visible = !0, this.btnJl.enabled = !0, this.btnJl.setNoticeVis(!0), this.imgText2.setText("z" + c), this.ZlGroup2.visible = !0, this.imgUp.visible = !0, this.imgUp.x = this.ZlGroup2.x + this.imgText2.totalWid, this.nextArrow.visible = !0, this.nextGrp.visible = !0, this.nextLb.visible = !0, this.curGrp.x = 73, this.upGrid(t.jlItemXian)
        }
    }, e.prototype.getRealVal = function (t) {
        var e = CFG_ATTR.LIB[t.id],
            i = "";
        return e && (i = e.sb > 1 ? t.val / 100 + "%" : t.val + ""), i
    }, e.prototype.upGrid = function (t) {
        var e = ConfigHelp.makeVoList(t)[0];
        this.xhCL.setShowCount(!1), this.xhCL.enableTip(), this.xhCL.setData(e);
        var i = ConfigHelp.makeVoList(t)[1];
        this.xhCL2.setShowCount(!1), this.xhCL2.enableTip(), this.xhCL2.setData(i);
        var o = VoFaBao.getTypeItemCount(t.split(";")[0]);
        this.xhCLnum.text = ConfigHelp.getNumText(o) + "/" + e.count;
        var n = VoFaBao.getTypeItemCount(t.split(";")[1]);
        this.xhCLnum2.text = ConfigHelp.getNumText(n) + "/" + i.count, o >= e.count ? this.xhCLnum.textColor = 1090116 : this.xhCLnum.textColor = 16711680, n >= i.count ? this.xhCLnum2.textColor = 1090116 : this.xhCLnum2.textColor = 16711680, o >= e.count && n >= i.count ? this.btnJl.setNoticeVis(!0) : this.btnJl.setNoticeVis(!1)
    }, e.prototype.updateIconNotice = function () {
        var t = VoFaBao._nowSel,
            e = ConfigHelp.makeVoList(t.jlItemDao)[0],
            i = VoFaBao.getTypeItemCount(t.jlItemDao.split(";")[0]),
            o = ConfigHelp.makeVoList(t.jlItemDao)[1],
            n = VoFaBao.getTypeItemCount(t.jlItemDao.split(";")[1]),
            e = ConfigHelp.makeVoList(t.jlItemDao)[0],
            i = VoFaBao.getTypeItemCount(t.jlItemDao.split(";")[0]),
            o = ConfigHelp.makeVoList(t.jlItemDao)[1],
            n = VoFaBao.getTypeItemCount(t.jlItemDao.split(";")[1]),
            a = ConfigHelp.makeVoList(t.jlItemMo)[0],
            s = VoFaBao.getTypeItemCount(t.jlItemMo.split(";")[0]),
            r = ConfigHelp.makeVoList(t.jlItemMo)[1],
            l = VoFaBao.getTypeItemCount(t.jlItemMo.split(";")[1]),
            h = ConfigHelp.makeVoList(t.jlItemXian)[0],
            c = VoFaBao.getTypeItemCount(t.jlItemXian.split(";")[0]),
            p = ConfigHelp.makeVoList(t.jlItemXian)[1],
            u = VoFaBao.getTypeItemCount(t.jlItemXian.split(";")[1]);
        i >= e.count && n >= o.count ? this.iconNoticeDao.visible = !0 : this.iconNoticeDao.visible = !1, s >= a.count && l >= r.count ? this.iconNoticeXian.visible = !0 : this.iconNoticeXian.visible = !1, c >= h.count && u >= p.count ? this.iconNoticeMo.visible = !0 : this.iconNoticeMo.visible = !1, t.JLlevDao == VoFaBao.getMaxJlLv(t.id, 1) && (this.iconNoticeDao.visible = !1), t.JLlevMo == VoFaBao.getMaxJlLv(t.id, 2) && (this.iconNoticeXian.visible = !1), t.JLlevXian == VoFaBao.getMaxJlLv(t.id, 3) && (this.iconNoticeMo.visible = !1)
    }, e
}(BaseEUIView);
__reflect(VFaBaoJL.prototype, "VFaBaoJL");
var VFaBaoPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curst = -1, e.tabUIArr = [UIConst.FABAOQH, UIConst.FABAOJL], e.skinName = "FaBaoPnlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.base.createPageGrp().createTabGroup(), this.addCloseListen(this.base.btnReturn).addCloseListen(this.base.btnClose), GameGlobal.layerMgr.reg(UIConst.FABAOQH, VFaBaoQH, this.base.pageGrp), GameGlobal.layerMgr.reg(UIConst.FABAOJL, VFaBaoJL, this.base.pageGrp), this.base.listenTabClick(this.onTbtnTouch, this), this.base.title = "法宝", this.headList.itemRenderer = VFaBaoHead, this.headList.dataProvider = this.headListAC = new eui.ArrayCollection, this.headList.addEventListener(egret.Event.CHANGE, this.onHeadChange, this), new ScrollMove(this.btnRight, this.btnLeft, this.headList, "width"), this.base.addTab("强化", 0, UIConst.FABAOQH), this.btn_jingLian = this.base.addTab("精炼", 1, UIConst.FABAOJL)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addEvnet(), this.updateList(), this.updateTbtns(), e && this.setSel(this.headListAC.getItemIndex(e)), this.setNotice(), GameGlobal.modelFaBao.on(ModelFaBao.MSG_UPDATE, this.updateView, this), GameGlobal.modelFaBao.on(ModelFaBao.MSG_SELCHANGE, this.setNotice, this)
    }, e.prototype.onClose = function () {
        this.removeEvent(), GameGlobal.modelFaBao.off(ModelFaBao.MSG_UPDATE, this.updateView, this), GameGlobal.modelFaBao.off(ModelFaBao.MSG_SELCHANGE, this.setNotice, this)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.updateView = function () {
        var t = this.headList.selectedIndex;
        this.headListAC.replaceAll(VoFaBao.List), this.headList.selectedIndex = t, this.setNotice()
    }, e.prototype.setNotice = function () {
        var t = VoFaBao._nowSel;
        if (t)
            if (t.jh) {
                this.base.setNoticBySysID(UIConst.FABAOQH, !0);
                var e = VoFaBao.getLIB3CFG();
                if (e) {
                    var i = e.need,
                        o = Util.parseIntStr(i)[2],
                        n = VoFaBao.getTypeItemCount(i);
                    n >= o ? this.base.setNoticBySysID(UIConst.FABAOQH, !0) : this.base.setNoticBySysID(UIConst.FABAOQH, !1)
                } else this.base.setNoticBySysID(UIConst.FABAOQH, !1);
                if (t.JLlevDao == VoFaBao.getMaxJlLv(t.id, 1) && t.JLlevMo == VoFaBao.getMaxJlLv(t.id, 2) && t.JLlevXian == VoFaBao.getMaxJlLv(t.id, 3)) return void this.base.setNoticBySysID(UIConst.FABAOJL, !1);
                var a = ConfigHelp.makeVoList(t.jlItemDao)[0],
                    s = VoFaBao.getTypeItemCount(t.jlItemDao.split(";")[0]),
                    r = ConfigHelp.makeVoList(t.jlItemDao)[1],
                    l = VoFaBao.getTypeItemCount(t.jlItemDao.split(";")[1]),
                    a = ConfigHelp.makeVoList(t.jlItemDao)[0],
                    s = VoFaBao.getTypeItemCount(t.jlItemDao.split(";")[0]),
                    r = ConfigHelp.makeVoList(t.jlItemDao)[1],
                    l = VoFaBao.getTypeItemCount(t.jlItemDao.split(";")[1]),
                    h = ConfigHelp.makeVoList(t.jlItemMo)[0],
                    c = VoFaBao.getTypeItemCount(t.jlItemMo.split(";")[0]),
                    p = ConfigHelp.makeVoList(t.jlItemMo)[1],
                    u = VoFaBao.getTypeItemCount(t.jlItemMo.split(";")[1]),
                    d = ConfigHelp.makeVoList(t.jlItemXian)[0],
                    f = VoFaBao.getTypeItemCount(t.jlItemXian.split(";")[0]),
                    g = ConfigHelp.makeVoList(t.jlItemXian)[1],
                    m = VoFaBao.getTypeItemCount(t.jlItemXian.split(";")[1]),
                    y = CFG_COMMOND.LIB[CFG_COMMOND.FBJL].arg.openLv;
                s >= a.count && l >= r.count && t.QHlev >= y && t.JLlevDao < VoFaBao.getMaxJlLv(t.id, 1) || c >= h.count && u >= p.count && t.QHlev >= y && t.JLlevMo < VoFaBao.getMaxJlLv(t.id, 2) || f >= d.count && m >= g.count && t.QHlev >= y && t.JLlevXian < VoFaBao.getMaxJlLv(t.id, 3) ? this.base.setNoticBySysID(UIConst.FABAOJL, !0) : this.base.setNoticBySysID(UIConst.FABAOJL, !1)
            } else o = Util.parseIntStr(t.jhItem)[2], n = VoFaBao.getTypeItemCount(t.jhItem), n >= o ? this.base.setNoticBySysID(UIConst.FABAOQH, !0) : this.base.setNoticBySysID(UIConst.FABAOQH, !1), this.base.setNoticBySysID(UIConst.FABAOJL, !1)
    }, e.prototype.updateTbtns = function () {
        if (this.btn_jingLian.visible = !1, CFG_COMMOND.isOpen(CFG_COMMOND.FBJL, !1)) {
            var t = CFG_COMMOND.LIB[CFG_COMMOND.FBJL].arg.openLv - 1,
                e = VoFaBao._nowSel;
            e.QHlev >= t && (this.btn_jingLian.visible = !0)
        }
        this.setCurSt(0)
    }, e.prototype.onTbtnTouch = function (t) {
        this.setCurSt(t.index)
    }, e.prototype.setCurSt = function (t) {
        if (0 != t || VoFaBao._nowSel.jh || ViewText.text("该法宝尚未激活"), this._curst != t) {
            var e = GameGlobal.layerMgr; - 1 != this._curst && e.close(this.tabUIArr[this._curst]), e.open(this.tabUIArr[t]), this.base.setTabSelIdx(t), this._curst = t
        }
    }, e.prototype.onHeadChange = function (t) {
        var e = t.target;
        this.setSel(e.selectedIndex)
    }, e.prototype.setSel = function (t) {
        if ("number" == typeof t) {
            var e = Number(t);
            this.headList.selectedIndex = e, VoFaBao._nowSel = this.headListAC.getItemAt(e)
        } else this.headList.selectedItem = t, VoFaBao._nowSel = t;
        this.updateTbtns(), this.setNotice(), GameGlobal.modelFaBao.notify(ModelFaBao.MSG_SELCHANGE)
    }, e.prototype.updateList = function () {
        VoFaBao.Sort(), DisplayUtil.fillDataAC(this.headListAC, VoFaBao.List), this.headListAC.refresh(), VoFaBao._nowSel = VoFaBao.List[0], this.headList.selectedIndex = 0, GameGlobal.modelFaBao.notify(ModelFaBao.MSG_SELCHANGE)
    }, e.prototype.onQHLevelChange = function () {
        this.btn_jingLian.visible = !0
    }, e.prototype.addEvnet = function () {
        EventCenter.addMsg(FaBaoEvent.ON_FA_BAO_QH_LEVEL_CHANGE, this.onQHLevelChange, this)
    }, e.prototype.removeEvent = function () {
        EventCenter.removeMsg(FaBaoEvent.ON_FA_BAO_QH_LEVEL_CHANGE, this.onQHLevelChange, this)
    }, e
}(BaseEUIView);
__reflect(VFaBaoPnl.prototype, "VFaBaoPnl");
var VFaBaoQH = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.lbl = [], e.lblnum = 0, e.imgstarl = [], e.skinName = "FaBaoQHSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.grid.enableTip(), DisplayUtil.popBtnStyle(this.btnJH), DisplayUtil.popBtnStyle(this.btnHH), DisplayUtil.popBtnStyle(this.btnQH0), DisplayUtil.popBtnStyle(this.btnQH1), this.btnJH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onbtnJH, this), this.btnHH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onbtnHH, this), this.btnQH0.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnqh0T, this), this.btnQH1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnqh1T, this), this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnCheckT, this), this.provis = new ProgressVisitor(this.pro, this.lbpro, 480), this.btnHH.label = "幻化", this.imgText = new ImageText, this.imgText.container = this.ZlGroup, this.imgText.charFunc = ImageText.STRFUNC, this.role = UIRole.create(), this.role.scaleX = this.role.scaleY = 1.3, this.partGroup.addChild(this.role), VoFaBao.init()
    }, e.prototype.btnqh0T = function () {
        if (this.btnQH0.enabled) {
            var t = VoFaBao._nowSel.id;
            GameGlobal.modelFaBao.CG3161(t)
        }
    }, e.prototype.btnqh1T = function () {
        if (ModelFaBao.oneKey = !ModelFaBao.oneKey, ModelFaBao.oneKey) {
            var t = VoFaBao._nowSel.id;
            GameGlobal.modelFaBao.CG3161(t)
        }
    }, e.prototype.btnCheckT = function () {
        ModelFaBao.autoBuy = !ModelFaBao.autoBuy, this.iconGou.visible = ModelFaBao.autoBuy, ModelFaBao.autoBuy || this.upBtn()
    }, e.prototype.onbtnHH = function () {
        GameGlobal.modelFaBao.CG3165(VoFaBao._nowSel.id)
    }, e.prototype.onbtnJH = function () {
        if (this.btnJH.enabled) {
            var t = VoFaBao._nowSel;
            if (!t.jh) {
                var e = ConfigHelp.makeVoList(t.jhItem)[0],
                    i = VoFaBao.getTypeItemCount(t.jhItem);
                i >= e.count ? GameGlobal.modelFaBao.CG3167(t.id) : GameGlobal.layerMgr.open(UIConst.CAILIAOGET, e)
            }
        }
    }, e.prototype.onOpen = function (t) {
        this.iconGou.visible = ModelFaBao.oneKey = ModelFaBao.autoBuy = !1, this.staticPro(), this.updateView(), GameGlobal.modelFaBao.on(ModelFaBao.MSG_SELCHANGE, this.upSelChange, this), GameGlobal.modelFaBao.on(ModelFaBao.MSG_UPDATE, this.updateView, this), GameGlobal.modelFaBao.on(ModelFaBao.MSG_HH, this.upHH, this), GameGlobal.modelFaBao.on(ModelFaBao.MSG_ALRTE, this.upBtn, this)
    }, e.prototype.onClose = function () {
        ModelFaBao.oneKey = !1, this.role.stopAndClear(), GameGlobal.modelFaBao.off(ModelFaBao.MSG_SELCHANGE, this.upSelChange, this), GameGlobal.modelFaBao.off(ModelFaBao.MSG_UPDATE, this.updateView, this), GameGlobal.modelFaBao.off(ModelFaBao.MSG_HH, this.upHH, this), GameGlobal.modelFaBao.off(ModelFaBao.MSG_ALRTE, this.upBtn, this)
    }, e.prototype.upBtn = function () {
        this.btnQH1.label = "一键强化", this.btnQH0.enabled = !0, ModelFaBao.oneKey = !1
    }, e.prototype.upHH = function () {
        this.imghh.visible = !0, this.btnHH.visible = !1
    }, e.prototype.upSelChange = function () {
        this.iconGou.visible = ModelFaBao.oneKey = ModelFaBao.autoBuy = !1, this.staticPro(), this.updateView()
    }, e.prototype.updateView = function () {
        var t = VoFaBao._nowSel;
        ModelFaBao.oneKey ? (this.btnQH1.label = "取消", this.btnQH0.enabled = !1) : (this.btnQH1.label = "一键强化", this.btnQH0.enabled = !0), this.btnHH.visible = this.imghh.visible = this.lbsource.visible = !1, this.btnJH.label = "激活", t.jh ? (t.hh ? this.imghh.visible = !0 : this.btnHH.visible = !0, this.imgText.setText("z" + t.zhanLi)) : this.imgText.setText("z" + t.basezl), this.role.play(700), this.role.setFaBao(t.eff), this.role.setWay(1), this.role.validParts(), this.txtName.text = t.name, this.txtName.textColor = Color.getColorInt(t.level + 2), ModelFaBao.dynamic && (ModelFaBao.dynamic = !1, this.dynamicPro()), this.setPage(t)
    }, e.prototype.setPage = function (t) {
        if (t.jh ? this.currentState = "qh" : (this.currentState = "jh", this.upgrid(t.jhItem)), this.upStar(), t.MAXQH <= t.QHlev) {
            var e = VoFaBao.getLIB3MaxCFG();
            this.upAttr(e.sx, VoFaBao.getNowAtt(), !0);
            var i = this.lbdes.visible = this.gridGrp.visible = this.btnQH0.visible = this.btnQH1.visible = !1;
            this.btnQH0.setNoticeVis(i), this.btnQH1.setNoticeVis(i)
        } else {
            var o = VoFaBao.getLIB3CFG();
            o && (this.lbdes.visible = this.gridGrp.visible = this.btnQH0.visible = this.btnQH1.visible = !0, t.jh ? (this.lbdes.textFlow = HtmlUtil.parse("升星可提升" + HtmlUtil.color(o.zdl, "#ffe400") + "战力" + HtmlUtil.colorSize("(属性对全体队伍生效)", "#ffe400", 20)), this.upAttr(o.sx, VoFaBao.getNowAtt(), !1), this.upgrid(o.need)) : (this.lbdes.textFlow = HtmlUtil.parse("激活可提升" + HtmlUtil.color(t.basezl, "#ffe400") + "战力" + HtmlUtil.colorSize("(属性对全体队伍生效)", "#ffe400", 20)), this.upAttr(o.sx, VoFaBao.getNowAtt(), !0)))
        }
    }, e.prototype.createlb = function (t) {
        var e = this.lbl[this.lblnum];
        return e || (e = new eui.Label, this.lbl.push(e), e.size = 22), e.textColor = t, this.lblnum++, e
    }, e.prototype.upAttr = function (t, e, i) {
        this.lblnum = 0, this.groupName.removeChildren(), this.groupVal.removeChildren(), this.groupAddVal.removeChildren();
        for (var o = t.split(";"), n = VoFaBao._nowSel.attr.split(";"), a = VoFaBao.getBaseAttr(), s = 0; s < n.length; s++) {
            var r = o[s].split(","),
                l = n[s].split(","),
                h = parseInt(l[1]),
                c = parseInt(r[1]),
                p = this.createlb(16638137);
            p.text = CFG_ATTR.LIB[l[0]].n + ":", this.groupName.addChild(p);
            var u = this.createlb(16773120);
            if (u.text = Math.floor(h + a[s]).toString(), this.groupVal.addChild(u), !i) {
                var d = this.createlb(1090116);
                d.text = "+" + Math.floor(c / 100), this.groupAddVal.addChild(d)
            }
        }
        if (e) {
            var f = e.split(";"),
                g = VoFaBao.getBaseAtt();
            for (s = 0; s < f.length; s++) {
                var m = f[s].split(","),
                    y = this.createlb(16638137);
                y.text = CFG_ATTR.LIB[m[0]].n + ":", this.groupName.addChild(y);
                var v = this.createlb(16773120);
                v.text = (parseInt(m[1]) + g[s]) / 100 + "%", this.groupVal.addChild(v);
                var _ = this.createlb(1090116);
                _.text = " ", this.groupAddVal.addChild(_)
            }
        }
    }, e.prototype.upStar = function () {
        this.xinGrp.removeChildren();
        var t = VoFaBao._nowSel.MAXQH,
            e = VoFaBao._nowSel.QHlev;
        e >= 2 && EventCenter.sendMsg(FaBaoEvent.ON_FA_BAO_QH_LEVEL_CHANGE);
        for (var i = 0; t > i; i++) {
            var o = this.imgstarl[i];
            o || (o = new eui.Image, this.imgstarl.push(o)), o.source = "CMS1_json.bm_star3", e == i && (o.source = "CMS1_json.bm_star0", e++), DisplayUtil.addBy(o, this.xinGrp)
        }
    }, e.prototype.staticPro = function () {
        var t = VoFaBao._nowSel;
        if (t.MAXQH <= t.QHlev) return void this.provis.setManji(!0);
        var e = VoFaBao.getLIB3CFG();
        if (e) {
            var i = e.lv,
                o = VoFaBao._nowSel.qhexp;
            this.provis.staticToValue(o, i)
        }
    }, e.prototype.dynamicPro = function () {
        var t = VoFaBao._nowSel,
            e = VoFaBao.getLIB3CFG();
        if (e) {
            var i = e.lv,
                o = VoFaBao._nowSel.qhexp;
            ModelFaBao.update ? (ModelFaBao.update = !1, this.provis.stop(), this.provis.showFire(), this.provis.staticToValue(o, i)) : this.provis.dynamicToValue(o, i)
        } else t.MAXQH <= t.QHlev && (this.provis.stop(), this.provis.showFire(), this.provis.setManji(!0))
    }, e.prototype.upgrid = function (t) {
        var e = VoFaBao._nowSel,
            i = ConfigHelp.makeVoList(t)[0],
            o = VoFaBao.getTypeItemCount(t);
        this.grid.data = i, this.lbgrid.text = o + "/" + i.count;
        var n = o >= i.count;
        this.lbgrid.textColor = n ? 1090116 : 14165028, e.jh ? (this.lbgrid1.text = "强化消耗:", this.btnQH0.setNoticeVis(n), this.btnQH1.setNoticeVis(n)) : (this.lbgrid1.text = "激活消耗:", this.btnJH.setNoticeVis(n), n || (this.lbsource.visible = !0, this.lbsource.textFlow = HtmlUtil.parse(HtmlUtil.color("获取途径:", "#684c43") + e.tjDes), this.btnJH.label = "前往获取"))
    }, e
}(BaseEUIView);
__reflect(VFaBaoQH.prototype, "VFaBaoQH");
var VoFaBao = function () {
    function t() {
        this.QHlev = 0, this.JLlevDao = 0, this.JLlevMo = 0, this.JLlevXian = 0, this.zhanLi = 0, this.jh = !1, this.hh = !1, this.qhexp = 0, this.MAXQH = 200
    }
    return t.init = function () {
        if (!t.jlLvList) {
            t.jlLvList = {};
            var e = CFG_FABAO.LIB4;
            for (var i in e) {
                var o = e[i],
                    n = o.fbid + "_" + o.duixiang,
                    a = t.jlLvList[n];
                a ? o.lv > a && (t.jlLvList[n] = o.lv) : t.jlLvList[n] = o.lv
            }
        }
        if (!t.fabaoJlList) {
            t.fabaoJlList = {};
            var e = CFG_FABAO.LIB4;
            for (var s in e) {
                var o = e[s],
                    r = o.fbid,
                    l = o.duixiang,
                    h = o.lv,
                    c = r + "_" + l + "_" + h;
                t.fabaoJlList[c] = o.id
            }
        }
        if (0 == this.List.length) {
            var e = CFG_FABAO.LIB1;
            for (var p in e) {
                var o = e[p],
                    u = new t;
                u.id = o.id, u.name = o.name, u.level = o.lv, u.eff = o.effId, u.icon = o.ICONId, u.jhItem = o.need, u.attr = o.att, u.tjDes = o.from, u.basezl = o.zlz, u.getQhMaxLev(), this.List.push(u), this.Map[o.id] = u
            }
            this.Sort(), this._nowSel = t.List[0]
        }
    }, t.getJlBiaoId = function (e, i, o) {
        var n = e + "_" + i + "_" + o;
        return t.fabaoJlList[n]
    }, t.getMaxJlLv = function (e, i) {
        var o = e + "_" + i;
        return t.jlLvList[o]
    }, t.Sort = function () {
        this.List.sort(this.sortFunc)
    }, t.sortFunc = function (t, e) {
        var i = (t.hh ? 0 : 1e5) + (t.jh ? 0 : 1e4) + 100 * t.level + t.id,
            o = (e.hh ? 0 : 1e5) + (e.jh ? 0 : 1e4) + 100 * e.level + e.id;
        return i - o
    }, t.prototype.getQhMaxLev = function () {
        for (var t = 0, e = 1e4 * this.id + t, i = CFG_FABAO.LIB3[e]; i;) {
            t++;
            var e = 1e4 * this.id + t,
                i = CFG_FABAO.LIB3[e]
        }
        this.MAXQH = t
    }, t.getBaseAttr = function () {
        for (var e = [0, 0, 0, 0], i = t._nowSel, o = 0; o <= i.QHlev;) {
            var n = 1e4 * i.id + o,
                a = CFG_FABAO.LIB3[n];
            if (a)
                for (var s = a.sx.split(";"), r = 0; r < s.length; r++) {
                    if (o == i.QHlev) var l = parseInt(s[r].split(",")[1]) / 100 * (i.qhexp / 10);
                    else l = parseInt(s[r].split(",")[1]) / 100 * (a.lv / 10);
                    e[r] += l
                }
            o++
        }
        return e
    }, t.getLIB3CFG = function () {
        var e = t._nowSel,
            i = 1e4 * e.id + e.QHlev,
            o = CFG_FABAO.LIB3[i];
        return o
    }, t.getLIB3MaxCFG = function () {
        var e = t._nowSel,
            i = 1e4 * e.id + e.MAXQH - 1,
            o = CFG_FABAO.LIB3[i];
        return o
    }, t.getNowAtt = function () {
        var e = t._nowSel,
            i = 1e4 * e.id + e.QHlev - 1,
            o = CFG_FABAO.LIB3[i];
        return o ? o.att : null
    }, t.getBaseAtt = function () {
        for (var e = t._nowSel, i = 1e4 * e.id, o = CFG_FABAO.LIB3[i], n = o.att.split(";").length, a = [], s = 0; n > s; s++) a.push(0);
        for (var r = 0; r < e.QHlev - 1;) {
            var i = 1e4 * e.id + r,
                o = CFG_FABAO.LIB3[i];
            if (o)
                for (var l = o.att.split(";"), s = 0; s < l.length; s++) {
                    var h = parseInt(l[s].split(",")[1]);
                    a[s] += h
                }
            r++
        }
        return a
    }, t.getBaiAttrText = function (e, i, o) {
        this.voAttr = [];
        var n = t.getJlBiaoId(i, e, o),
            a = CFG_FABAO.LIB4[n];
        if (!a) return void(s = "");
        for (var s = a.per, r = s.split(";"), l = 0; l < r.length; l++) {
            var h = r[l].split(","),
                c = VoAttribute.add(parseInt(h[0]), parseInt(h[1]));
            this.voAttr.push(c)
        }
        return this.voAttr
    }, t.upItem = function (e, i, o, n, a, s, r) {
        var l = t.Map[e];
        if (l) {
            l.jh = !0, l.QHlev = i, l.qhexp = o, l.JLlevDao = n, l.JLlevMo = a, l.JLlevXian = s, l.zhanLi = r;
            var h = t.getJlBiaoId(l.id, 1, n),
                c = t.getJlBiaoId(l.id, 2, a),
                p = t.getJlBiaoId(l.id, 3, s),
                u = CFG_FABAO.LIB4[h],
                d = CFG_FABAO.LIB4[c],
                f = CFG_FABAO.LIB4[p];
            u ? l.jlItemDao = u.need : (l.jlItemDao = "", console.log("error item")), d ? l.jlItemMo = d.need : (l.jlItemMo = "", console.log("error item")), f ? l.jlItemXian = f.need : (l.jlItemXian = "", console.log("error item"))
        }
    }, t.upItemQHlev = function (e, i, o, n) {
        var a = t.Map[e];
        a && (a.QHlev = i, a.qhexp = o, a.zhanLi = n)
    }, t.upItemJLlev = function (e, i, o, n) {
        var a = t.Map[e];
        if (a) {
            1 == i ? a.JLlevDao = o : 2 == i ? a.JLlevMo = o : 3 == i && (a.JLlevXian = o), a.zhanLi = n;
            var s = t.getJlBiaoId(a.id, i, o),
                r = CFG_FABAO.LIB4[s];
            r ? 1 == i ? a.jlItemDao = r.need : 2 == i ? a.jlItemMo = r.need : 3 == i && (a.jlItemXian = r.need) : 1 == i ? (a.jlItemDao = "", console.log("error item")) : 2 == i ? (a.jlItemMo = "", console.log("error item")) : 3 == i && (a.jlItemXian = "", console.log("error item"))
        }
    }, t.upItemJh = function (e, i) {
        var o = t.Map[e];
        if (o) {
            o.jh = !0, o.zhanLi = i;
            var n = t.getJlBiaoId(o.id, 1, o.JLlevDao),
                a = CFG_FABAO.LIB4[n];
            a ? o.jlItemDao = a.need : (o.jlItemDao = "", console.log("error item"));
            var s = t.getJlBiaoId(o.id, 2, o.JLlevMo),
                r = CFG_FABAO.LIB4[s];
            r ? o.jlItemMo = r.need : (o.jlItemMo = "", console.log("error item"));
            var l = t.getJlBiaoId(o.id, 3, o.JLlevXian),
                h = CFG_FABAO.LIB4[l];
            h ? o.jlItemXian = h.need : (o.jlItemXian = "", console.log("error item"))
        }
    }, t.upItemHH = function (e) {
        var i = t.Map[e];
        if (this.HHID) {
            var o = t.Map[this.HHID];
            o && (o.hh = !1)
        }
        i && (i.hh = !0, this.HHID = e)
    }, t.getFaBaoNotice = function () {
        this.init();
        for (var t = this.List, e = 0; e < t.length; e++) {
            var i = t[e];
            if (this.getItemNotice(i)) return !0
        }
        return !1
    }, t.getItemNotice = function (e) {
        if (e.jh) {
            if (e.QHlev == t.MAXQHLV && e.JLlevDao == t.getMaxJlLv(e.id, 1) && e.JLlevMo == t.getMaxJlLv(e.id, 2) && e.JLlevXian == t.getMaxJlLv(e.id, 3)) return !1;
            var i = !1,
                o = !1,
                n = 1e4 * e.id + e.QHlev,
                a = CFG_FABAO.LIB3[n];
            if (a) {
                var s = a.need,
                    r = Util.parseIntStr(s)[2],
                    l = t.getTypeItemCount(s);
                i = l >= r
            } else i = !1;
            var h = CFG_COMMOND.LIB[CFG_COMMOND.FBJL].arg.openLv;
            r = ConfigHelp.makeVoList(e.jlItemDao)[0];
            var c = ConfigHelp.makeVoList(e.jlItemMo)[0],
                p = ConfigHelp.makeVoList(e.jlItemXian)[0],
                u = ConfigHelp.makeVoList(e.jlItemDao)[1],
                d = ConfigHelp.makeVoList(e.jlItemMo)[1],
                f = ConfigHelp.makeVoList(e.jlItemXian)[1];
            l = t.getTypeItemCount(e.jlItemDao.split(";")[0]);
            var g = t.getTypeItemCount(e.jlItemMo.split(";")[0]),
                m = t.getTypeItemCount(e.jlItemXian.split(";")[0]),
                y = t.getTypeItemCount(e.jlItemDao.split(";")[1]),
                v = t.getTypeItemCount(e.jlItemMo.split(";")[1]),
                _ = t.getTypeItemCount(e.jlItemXian.split(";")[1]);
            return r && u && d && p && f ? o = l >= r.count && y >= u.count && e.QHlev >= h && e.JLlevDao < t.getMaxJlLv(e.id, 1) || g >= c.count && v >= d.count && e.QHlev >= h && e.JLlevMo < t.getMaxJlLv(e.id, 2) || m >= p.count && _ >= f.count && e.QHlev >= h && e.JLlevXian < t.getMaxJlLv(e.id, 3) : console.error("读不到法宝精炼表的精炼等级"), i || o ? !0 : !1
        }
        return r = Util.parseIntStr(e.jhItem)[2], l = t.getTypeItemCount(e.jhItem), l >= r
    }, t.getTypeItemCount = function (t) {
        if (t) {
            var e = t.split(","),
                i = parseInt(e[0]),
                o = parseInt(e[1]),
                n = 0;
            switch (i) {
                case 31:
                    n = GameGlobal.modelRole.voMine.yinliang;
                    break;
                case 32:
                    n = GameGlobal.modelRole.voMine.bYuanbao;
                    break;
                case 33:
                    n = GameGlobal.modelRole.voMine.yuanbao;
                    break;
                case 1:
                    n = GameGlobal.modelBag.getItemCount(o)
            }
            return n
        }
    }, t.updateFollowFaBao = function () {
        if (this.HHID) {
            var e = GameGlobal.modelRole.voMine.sceneChars[0];
            e ? (t.followFaBao || (t.followFaBao = SceneFaBao.create()), t.followFaBao.setModID(this.HHID), t.followFaBao.mapScene || (t.followFaBao.tar = e, t.followFaBao.x = e.x + 30, t.followFaBao.y = e.y + 30, GameGlobal.mapScene.addUnit(t.followFaBao))) : t.followFaBao && GameGlobal.mapScene.removeUnit(t.followFaBao)
        }
    }, t.getDataByCfgId = function (t) {
        return this.Map[t]
    }, t.getTotalStr = function () {
        for (var e = 0, i = t.List, o = 0, n = i.length; n > o; o++) i[o].jh && (e += i[o].zhanLi);
        return e
    }, t.List = [], t.Map = {}, t.MAXQHLV = 200, t.voAttr = [], t
}();
__reflect(VoFaBao.prototype, "VoFaBao");
var ModelFashion = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.IDMap = {}, e.xsidMap = {}, e.xstimeMap = {}, e.zhZhanLi = -1, e.curHHId = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1782, this.GC1782, this), e.regHand(1784, this.GC1784, this), e.regHand(1786, this.GC1786, this)
    }, e.prototype.CG1781 = function () {
        var t = this.getBytes();
        this.sendSocket(1781, t)
    }, e.prototype.CG1783 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1783, e)
    }, e.prototype.CG1785 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1785, e)
    }, e.prototype.GC1782 = function (t, i) {
        Util.clearKeys(t.IDMap), Util.clearKeys(t.xsidMap), Util.clearKeys(t.xstimeMap);
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readShort();
            GameGlobal.modelFashion.IDMap[a] = a
        }
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readShort(),
                s = i.readInt();
            GameGlobal.modelFashion.IDMap[a] = a, GameGlobal.modelFashion.xsidMap[a] = a, GameGlobal.modelFashion.xstimeMap[a] = s
        }
        if (t.timeUDT = egret.getTimer(), t.curHHId = i.readShort(), Vo_Fashion.setJH(), 0 != t.curHHId) {
            var r = e.getIcon(t.curHHId);
            GameGlobal.modelSetting.setBody(r)
        } else {
            var l = GameGlobal.modelRole.voMine.job,
                h = GameGlobal.modelRole.voMine.sceneChars[0];
            h.setBody(l)
        }
        t.zhZhanLi = e.getZhanli(), GameGlobal.modelFashion.notify(e.UPDATE)
    }, e.prototype.GC1784 = function (t, e) {
        var i = e.readByte();
        1 == i || (2 == i ? ViewText.text("该时装已激活") : 3 == i ? ViewText.text("该时装不存在") : 4 == i && ViewText.text("道具不足"))
    }, e.prototype.GC1786 = function (t, e) {
        var i = e.readByte();
        1 == i || 2 == i && ViewText.text("未激活")
    }, e.getIcon = function (t) {
        var e = CFG_Fashion.LIB[t];
        if (e) {
            var i = GameGlobal.modelRole.voMine.job;
            if (1 == i) var o = e.szn;
            else o = e.szv;
            return o
        }
        return null
    }, e.getZhanli = function () {
        var t = GameGlobal.modelFashion.IDMap,
            e = CFG_Fashion.LIB,
            i = 0;
        for (var o in t)
            for (var n in e)
                if (parseInt(n) == t[o]) {
                    i += Vo_Fashion.ZhanLi(e[n].attr);
                    break
                } return i
    }, e.UPDATE = "UPDATE", e
}(BaseModel);
__reflect(ModelFashion.prototype, "ModelFashion");
var VFashionPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.listAC = new eui.ArrayCollection, e.skinName = "FashionSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this;
        t.des.text = "(时装提升的属性对所有角色加成)", t.role = UIRole.create(), t.partCont.addChildAt(t.role, 0), t.partCont.scaleX = t.partCont.scaleY = 1.5, DisplayUtil.popBtnStyle(t.btnSearch), t.textStr = new ImageText, t.textStr.container = t.strCont, t.textStr.charFunc = ImageText.STRFUNC, t.btnSearch.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIConst.TITLETB, 2)
        }, this), this.btnHH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnHHT, this), this.btnJH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnJHT, this), new ScrollMove(this.btnR, this.btnL, this.list, "width"), this.p1btn.label = "脱下", this.p1btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.p1btnT, this), this.list.itemRenderer = VFashionItem, this.list.dataProvider = this.listAC, this.list.addEventListener(egret.Event.CHANGE, this.onT, this), this.txtTime.visible = !1, Vo_Fashion.init()
    }, e.prototype.p1btnT = function () {
        GameGlobal.modelFashion.CG1785(0)
    }, e.prototype.btnHHT = function (t) {
        var e = this.list.selectedItem;
        GameGlobal.modelFashion.CG1785(e.id)
    }, e.prototype.btnJHT = function (t) {
        var e = this.list.selectedItem;
        GameGlobal.modelFashion.CG1783(e.id)
    }, e.prototype.createVItem = function () {
        DisplayUtil.fillDataAC(this.listAC, Vo_Fashion.List)
    }, e.prototype.onT = function (t) {
        var e = t.target;
        this.setSel(e.selectedIndex)
    }, e.prototype.setSel = function (t) {
        var e = this.listAC.getItemAt(t);
        e && this.onUpdate(e)
    }, e.prototype.isHH = function (t) {
        return t == GameGlobal.modelFashion.curHHId ? !0 : !1
    }, e.prototype.setAttrText = function (t) {
        for (var e = [], i = [], o = t.attr.split(";"), n = 0; n < o.length; n++) {
            var a = o[n].split(",");
            for (var s in CFG_ATTR.LIB) a[0] == s && e.push(CFG_ATTR.LIB[s].n);
            i.push(a[1])
        }
        this.lbAttr.lineSpacing = 10, this.lbAttr.textFlow = [{
            text: e[0] + " ",
            style: {
                textColor: 5782836
            }
        }, {
            text: "+" + i[0] + "\n",
            style: {
                textColor: 1090116
            }
        }, {
            text: e[1] + " ",
            style: {
                textColor: 5782836
            }
        }, {
            text: "+" + i[1] + "\n",
            style: {
                textColor: 1090116
            }
        }, {
            text: e[2] + " ",
            style: {
                textColor: 5782836
            }
        }, {
            text: "+" + i[2] + "\n",
            style: {
                textColor: 1090116
            }
        }, {
            text: e[3] + " ",
            style: {
                textColor: 5782836
            }
        }, {
            text: "+" + i[3] + "\n",
            style: {
                textColor: 1090116
            }
        }]
    }, e.prototype.onUpdate = function (t) {
        var e = this;
        if (e.vo = t, this.setAttrText(t), e.textStr.setText("z" + t.zhanli), this.fashionName.text = t.name, t.jh) this.txtwjh.visible = !1, this.isHH(t.id) ? this.setHhVis() : this.setNoHhVis();
        else {
            this.txtwjh.visible = !0, this.setNoJhVis(), this.grid.enableTip();
            var i = ConfigHelp.makeVoByArr(t.item);
            this.grid.setData(i), this.txtName.text = t.name, this.txtSource.text = t.des, VTitleItem.Noitce(t) ? (this.jh_bg.source = "CM1_json.BT_y1_up", this.jh_red.visible = !0) : (this.jh_bg.source = "CM1_json.disabled2", this.jh_red.visible = !1)
        }
        e.role.play(700);
        var o = GameGlobal.modelRole.voMine.sceneChars[0],
            n = (o._body, o._horse),
            a = o._wing,
            s = o._weapon,
            r = o._title;
        e.role.setWeapon(s), e.role.setHorse(n), e.role.setWing(a), e.role.setTitle(r), e.role.setBody(t.icon), e.role.setWay(3), e.role.validParts(), e.strCont.addChild(e.btnSearch)
    }, e.prototype.modelInit = function () {
        this.createVItem();
        var t = Vo_Fashion.getVIndexById(GameGlobal.modelFashion.curHHId);
        if (t >= 0)
            if (this.indexID) {
                var e = Vo_Fashion.getVIndexById(this.indexID);
                this.list.selectedIndex = e, this.setSel(e)
            } else this.list.selectedIndex = t, this.setSel(t);
        this.showZhZhanLi(), this.CHnotice()
    }, e.prototype.showZhZhanLi = function () {
        var t = GameGlobal.modelFashion.zhZhanLi.toString(),
            e = 0;
        for (var i in GameGlobal.modelFashion.IDMap) e++;
        this.txtZhanli.textFlow = [{
            text: "时装总战力:",
            style: {
                textColor: 5782836
            }
        }, {
            text: t,
            style: {
                textColor: 1090116
            }
        }], this.txtSkin.textFlow = [{
            text: "已激活时装数:",
            style: {
                textColor: 5782836
            }
        }, {
            text: e.toString(),
            style: {
                textColor: 1090116
            }
        }]
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.indexID = void 0, e && ("number" == typeof e ? this.indexID = e : this.indexID = e.id), this.CHnotice, GameGlobal.tick.addInterv(this.onTick, 1e3, this), GameGlobal.modelFashion.on(ModelFashion.UPDATE, this.modelInit, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.CHnotice, this), GameGlobal.modelFashion.CG1781()
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.onTick, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.CHnotice, this), GameGlobal.modelFashion.off(ModelFashion.UPDATE, this.modelInit, this)
    }, e.prototype.CHnotice = function () {
        for (var t = Vo_Fashion.List, e = t.length, i = !1, o = 0; e > o; o++) {
            var n = t[o];
            if (VTitleItem.Noitce(n)) {
                i = !0;
                break
            }
        }
        var a = this.list.selectedIndex;
        this.listAC.refresh(), this.list.selectedIndex = a;
        var s = GameGlobal.layerMgr.getView(UIConst.TITLEFASH);
        s && (i ? s.base.setNoticBySort(1, !0) : s.base.setNoticBySort(1, !1))
    }, e.prototype.setNoJhVis = function () {
        this.p1.visible = !1, this.p2.visible = !0, this.btnHH.visible = !1
    }, e.prototype.setNoHhVis = function () {
        this.p1.visible = !1, this.p2.visible = !1, this.btnHH.visible = !0
    }, e.prototype.setHhVis = function () {
        this.p1img.visible = !1, this.p1btn.visible = !0, this.p1.visible = !0, this.p2.visible = !1, this.btnHH.visible = !1
    }, e.prototype.onTick = function (t) {
        var e = egret.getTimer();
        if (t.vo)
            if (t.vo.jh && 0 != t.vo.time) {
                var i = Vo_Fashion.getTimeById(t.vo.id),
                    o = i - (e - GameGlobal.modelFashion.timeUDT) / 1e3 >> 0;
                t.txtTime.visible = 0 >= o ? !1 : !0, t.txtTime.text = "倒计时:" + DateUtil.getHMSBySecond2(o)
            } else t.txtTime.visible = !1;
        else t.txtTime.visible = !1
    }, e
}(BaseEUIView);
__reflect(VFashionPnl.prototype, "VFashionPnl");
var Vo_Fashion = function () {
    function t() {}
    return t.create = function (e, i, o, n, a, s, r, l, h) {
        var c = new t;
        return c.id = e, c.icon = i, c.name = o, c.time = n, c.attr = a, c.des = s, c.item = r, c.eff = l, c.zhanli = h, c
    }, t.init = function () {
        t.List = [];
        for (var e in CFG_Fashion.LIB) {
            var i = CFG_Fashion.LIB[e],
                o = i.id,
                n = GameGlobal.modelRole.voMine.job;
            if (1 == n) var a = i.szn;
            else a = i.szv;
            var s = i.name,
                r = i.t,
                l = i.attr,
                h = t.ZhanLi(l),
                c = i.des,
                p = CFG_Fashion.getTItem(e),
                u = i.eff,
                d = t.create(o, a, s, r, l, c, p, u, h);
            t.List.push(d)
        }
    }, t.setJH = function () {
        for (var e = t.List, i = 0; i < e.length; i++) e[i].jh = t.isJH(e[i].id), e[i].notice = e[i].Noitce();
        t.Sort()
    }, t.prototype.Noitce = function () {
        if (0 != this.item) {
            var t = this.item[1],
                e = GameGlobal.modelBag.getItemCount(t);
            return e > 0 ? !0 : !1
        }
        return !1
    }, t.getVIndexById = function (e) {
        for (var i = t.List, o = 0; o < i.length; o++)
            if (e == i[o].id) return o;
        return 0
    }, t.getVo = function (e) {
        for (var i = t.List, o = 0; o < i.length; o++)
            if (e == i[o].id) return i[o];
        return null
    }, t.isJH = function (t) {
        var e = GameGlobal.modelFashion.IDMap;
        return e[t] ? !0 : !1
    }, t.getTimeById = function (t) {
        var e = GameGlobal.modelFashion.xstimeMap;
        return e[t] ? e[t] : 0
    }, t.ZhanLi = function (t) {
        for (var e = [], i = t.split(";"), o = 0; o < i.length; o++)
            for (var n = i[o].split(","), a = 0; a < n.length; a++) e.push(parseInt(n[a]));
        var s = CFG_ATTR.cuculateArrScore(e);
        return s
    }, t.notice = function () {
        if (!CFG_COMMOND.isOpen(CFG_COMMOND.FASHION, !1)) return !1;
        var t = CFG_Fashion.LIB;
        for (var e in t) {
            var i = GameGlobal.modelFashion.IDMap[e];
            if (!i) {
                var o = CFG_Fashion.getTItem(e);
                if (0 != o) {
                    var n = o[1],
                        a = GameGlobal.modelBag.getItemCount(n);
                    if (a > 0) return !0
                }
            }
        }
        return !1
    }, t.Sort = function () {
        t.List.sort(this.sortFunc)
    }, t.sortFunc = function (t, e) {
        var i = (t.id == GameGlobal.modelFashion.curHHId ? 0 : 1e8) + (t.jh ? 0 : 1e7) + (t.notice ? 0 : 1e6) + t.id,
            o = (e.id == GameGlobal.modelFashion.curHHId ? 0 : 1e8) + (e.jh ? 0 : 1e7) + (e.notice ? 0 : 1e6) + e.id;
        return i - o
    }, t.getModById = function (t) {
        var e = CFG_Fashion.LIB[t];
        if (e) {
            var i = GameGlobal.modelRole.voMine.job;
            if (1 == i) var o = e.szn;
            else o = e.szv;
            return o
        }
        return null
    }, t.List = [], t
}();
__reflect(Vo_Fashion.prototype, "Vo_Fashion");
var ModelBattle = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.timeScaleText = 1, e.timeScale = 1.2, e.pauseMul = 1, e.isInBattleIndeed = !1, e.isInbattle = !1, e.curBattleType = 0, e.setTimeScale(2, 1.5), egret.localStorage.setItem("battleScale", "2"), e
    }
    return __extends(e, t), e.isInSpecBattle = function () {
        var t = GameGlobal.modelBattle,
            i = t.curBattleType,
            o = t.isInbattle && i != e.BT_GUANQIAMONSTER && i != e.BT_GUANQIABOSS,
            n = !o;
        return n
    }, e.isInSpecBattleWLV = function (t) {
        return void 0 === t && (t = 45), GameGlobal.modelRole.voMine.level <= t ? !0 : this.isInSpecBattle()
    }, e.canEnterBtl = function (t, e) {
        void 0 === t && (t = 0), void 0 === e && (e = !0);
        var i = this.isInSpecBattleWLV();
        return !i && e && ViewText.text("正在战斗中，不能进入"), i
    }, e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(502, this.GC_BATTLE, this), e.regHand(504, this.GC_BATTLEFINISH, this), e.regHand(506, this.GC_BATTLEDATATEST, this)
    }, e.prototype.GC_BATTLE = function (t, e) {
        var i = e.readUTF(),
            o = JSON.parse(i);
        t.enterBattle(o)
    }, e.prototype.isChangePosition = function (t) {
        for (var e = 0, i = t.length; i > e; e++) {
            var o = t[e];
            if (o.id == GameGlobal.modelRole.voMine.id && 1 != o[EnumBattleKey.R_FORCE]) return !0
        }
        return !1
    }, e.prototype.enterBattle = function (t) {
        var i = t[EnumBattleKey.OPERA][0][EnumBattleKey.VAL_INIT],
            o = this.isChangePosition(i);
        if (o) {
            t.winner = 1 == t.winner ? 2 : 1;
            for (var n = 0, a = i.length; a > n; n++) {
                var s = i[n];
                s[EnumBattleKey.R_FORCE] = 1 == s[EnumBattleKey.R_FORCE] ? 2 : 1
            }
        }
        GameGlobal.modelRole.voMine.sceneChars[0].stand();
        var r = VoBattle.create(t),
            l = t[EnumBattleKey.BATTLETYPE];
        switch (l) {
            case e.BT_GUANQIAMONSTER:
                if (this.isInbattle) return;
                break;
            case e.BT_GUANQIABOSS:
                r.finishCB = Handler.create(GameGlobal.modelGuanqia, GameGlobal.modelGuanqia.onBossEnd)
        }
        GameGlobal.layerMgr.open(UIConst.BATTLESCENE, r), GameGlobal.modelBattle.notify(e.MSG_BATTLE_BEGIN, r)
    }, e.prototype.setTimeScale = function (t, i) {
        this.timeScaleText = t, this.timeScale = i, this.notify(e.MSG_BTIMESCALE)
    }, e.prototype.defBattleEnd = function (t) {}, e.prototype.defBttleInterrupt = function (t) {}, e.prototype.CG_BATTLEFINISH = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(503, e)
    }, e.prototype.GC_BATTLEFINISH = function (t, i) {
        var o = i.readByte();
        t.notify(e.GC_504, o)
    }, e.prototype.GC_BATTLEDATATEST = function (t, i) {
        var o = LFormat.getInstance().read(i),
            n = o[EnumBattleKey.BATTLETYPE];
        n == e.BT_CROSS_SERVICE_LADDER ? EventCenter.sendMsg(CrossServiceLadder.Event.START_TIME_COUNT, o) : t.enterBattle(o)
    }, e.BT_NEWER = 1, e.BT_GUANQIAMONSTER = 11, e.BT_GUANQIABOSS = 12, e.BT_GQHELP = 12, e.BT_JJCPVP = 22, e.BT_JJCPVE = 23, e.BT_PERSONBOSS = 31, e.BT_QMBOSS = 32, e.BT_FWBOSS = 48, e.BT_SYT = 33, e.BT_CTG = 34, e.BT_CAILIAO = 41, e.BT_TEAMFB = 42, e.BT_MPFB = 43, e.BT_MPBOSS = 45, e.BT_WDTD = 46, e.BT_QIANGYU = 47, e.BT_CZZ_PVE = 49, e.BT_CZZ_PVP = 50, e.BT_FENGSHEN = 51, e.BT_MPBAT = 52, e.BT_MPBAT_BOSS = 53, e.BT_FENGMO = 54, e.BT_XSFBZSXT = 55, e.BT_XSFBND = 57, e.BT_XSFBSH = 58, e.BT_SDQD = 56, e.BT_XDDZ = 59, e.BT_JYKX = 60, e.BT_SSFB = 61, e.BT_FESTBOSS = 62, e.BT_VIPBOSS = 63, e.BT_XKSD = 64, e.BT_S11QD = 65, e.BT_EMISSARY = 66, e.BT_CAMP_WAR = 67, e.BT_CAMP_WAR_ROBOT = 68, e.BT_CROSS_SERVICE_LADDER = 69, e.BT_SPRING_EMISSARY = 70, e.BT_SPRING_DAILY = 71, e.BT_F_WORLD = 72, e.MSG_BATTLE_BEGIN = "MSG_BATTLE_BEGIN", e.MSG_BTIMESCALE = "MSG_BTIMESCALE", e.MSG_BATTLEEND = "MSG_BATTLEEND", e.MSG_BATTLEENDED = "MSG_BATTLEENDED", e.GC_504 = "GC_504", e.MSG_MINEWIN = "MSG_MINEWIN", e.MSG_ROLETAKEDMG = "MSG_ROLETAKEDMG", e
}(BaseModel);
__reflect(ModelBattle.prototype, "ModelBattle");
var ModelBattleUI = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.regUI(), e
    }
    return __extends(e, t), e.getIns = function () {
        return this._ins || (this._ins = new e), this._ins
    }, e.prototype.regUI = function () {
        var t = GameGlobal.layerMgr;
        t.reg(UIConst.BOTTOMBOSSHP, VBottomBossHPUI, t.UI_floorUI), t.reg(UIConst.LEFTBOSSRNK, VBossLeftRnk, t.UI_floorUI), t.reg(UIConst.BATTLEEXIT, VBattleExit, t.UI_floorUI)
    }, e.prototype.setBossName = function (t) {}, e.prototype.openBossHp = function (t) {
        var e = GameGlobal.layerMgr;
        this.scene = t, e.open(UIConst.BOTTOMBOSSHP)
    }, e.prototype.openLeftRnl = function (t) {
        var e = GameGlobal.layerMgr;
        this.scene = t, e.open(UIConst.LEFTBOSSRNK), GameGlobal.modelBattle.on(ModelBattle.MSG_ROLETAKEDMG, this.onRoleTakeDmg, this)
    }, e.prototype.checkRound = function (t) {
        var e = this.scene.runningPlug.roundIndex;
        return e >= t
    }, e.prototype.onRound = function (t) {
        this.notify(e.MSG_ROUND);
        var i = GameGlobal.layerMgr.getView(UIConst.BATTLEEXIT);
        if (i) {
            var o = t.battleData.checkSkipEnable(t.roundid);
            i.setEnable(o)
        }
    }, e.prototype.checkShowExit = function (t) {
        var e = GameGlobal.layerMgr;
        t.battleData.checkSkipVis() ? e.isOpenView(UIConst.BATTLEEXIT) || e.open(UIConst.BATTLEEXIT, t) : e.close(UIConst.BATTLEEXIT)
    }, e.prototype.setBottomBossHp = function (t, i) {
        this.curBottomBossHp = t, this.curBottomBossHpmax = i, this.notify(e.MSG_BOTTOMBOSSHP)
    }, e.prototype.close = function () {
        this.myRnkVo = null;
        var t = GameGlobal.layerMgr;
        t.close(UIConst.BOTTOMBOSSHP), t.close(UIConst.LEFTBOSSRNK), t.close(UIConst.BATTLEEXIT), GameGlobal.modelBattle.off(ModelBattle.MSG_ROLETAKEDMG, this.onRoleTakeDmg)
    }, e.prototype.updateRnk = function () {
        var t = this.scene.battleData;
        (t.type == ModelBattle.BT_QMBOSS || t.type == ModelBattle.BT_FESTBOSS) && this.notify(e.MSG_RNKCHANGE)
    }, e.prototype.onRoleTakeDmg = function (t) {
        var e = t.role;
        if (e.isBoss) {
            var i = t.value;
            this.myRnkVo && (this.myRnkVo.value += i, this.caculateRnk())
        }
    }, e.prototype.caculateRnk = function () {
        this.otherRnkList && this.notify(e.MSG_RNKCHANGE)
    }, e.prototype.sort = function (t, e) {
        return e.value - t.value
    }, e.MSG_BOTTOMBOSSHP = 1, e.MSG_RNKCHANGE = 2, e.MSG_ROUND = 3, e
}(MsgCenter);
__reflect(ModelBattleUI.prototype, "ModelBattleUI");
var VBattleTLUI = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/huihezhi/BattleTLUI.exml", e
    }
    return __extends(e, t), e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = e;
        this.lbName.text = i.battleCFG.name, this.lbContent.text = i.battleCFG.rtText
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.x = GameGlobal.stage.stageWidth - this.skin.width, this.y = 16 + platform.deviceTopPX
    }, e
}(BaseEUIView);
__reflect(VBattleTLUI.prototype, "VBattleTLUI");
var VFightBossLX = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/fight/BossLaiXi.exml", e
    }
    return __extends(e, t), e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this._cb || (this._cb = !0, GameGlobal.tick.addInterv(this.onTimeOut, 900, this, !0))
    }, e.prototype.onTimeOut = function (t) {
        t._cb && (t._cb = !1, t.closeHandler())
    }, e.prototype.onSize = function () {
        this.y = .35 * (GameGlobal.stage.stageHeight - this.skin.height)
    }, e
}(BaseEUIView);
__reflect(VFightBossLX.prototype, "VFightBossLX");
var VoBattle = function () {
    function t() {}
    return t.create = function (e) {
        var i = new t;
        return i.data = e, i.type = e[EnumBattleKey.BATTLETYPE], i.battleCFG = CFG_Battle.LIB[i.type], i
    }, t.prototype.checkSkipVis = function () {
        var t = 0 != this.battleCFG.skip || 0 != this.battleCFG.skip2 || 0 != this.battleCFG.skip3;
        return t
    }, t.prototype.checkSkipEnable = function (t) {
        return this.checkSkipCond(this.battleCFG.skip, t) || this.checkSkipCond(this.battleCFG.skip2, t) || this.checkSkipCond(this.battleCFG.skip3, t) ? !0 : !1
    }, t.prototype.checkSkipCond = function (t, e) {
        if (!t) return !1;
        for (var i = 0, o = t.length; o > i; i++) {
            var n = t[i][0],
                a = t[i][1];
            if (1 == n) return GameGlobal.modelRole.voMine.level >= a;
            if (2 == n) return GameGlobal.modelRole.voMine.vip >= a;
            if (3 == n) return this.type == ModelBattle.BT_XDDZ && GameGlobal.modelxddz.isWatchBattle ? !0 : e >= a;
            if (4 == n && this.type == ModelBattle.BT_FENGSHEN) return ModelZhuTianFengShen.isSkips
        }
        return !1
    }, t.prototype.getSkipWarnStr = function (t) {
        var e = this.battleCFG.skip,
            i = this.battleCFG.skip2,
            o = this.battleCFG.skip3;
        if (this.checkSkipCond(e, t) || this.checkSkipCond(i, t) || this.checkSkipCond(o, t)) return null;
        var n = this.getSkipWarnStr1(e, t),
            a = this.getSkipWarnStr1(i, t),
            s = this.getSkipWarnStr1(o, t),
            r = Util.getTempArr();
        n && r.push(n), a && r.push(a), s && r.push(s);
        var l = r.join("或");
        return l + "可跳过此战斗"
    }, t.prototype.getSkipWarnStr1 = function (t, e) {
        if (!t) return null;
        for (var i = "", o = 0, n = t.length; n > o; o++) {
            var a = t[o][0],
                s = t[o][1];
            1 == a ? i += GameGlobal.modelRole.voMine.level >= s ? "" : Lang.reTxt("{0}级", s) : 2 == a ? i += GameGlobal.modelRole.voMine.vip >= s ? "" : Lang.reTxt("VIP{0}", s) : 3 == a ? i += e >= s ? "" : Lang.reTxt("{0}回合后", s) : 4 == a && this.type == ModelBattle.BT_FENGSHEN && (i += "通过此关后")
        }
        return i
    }, t.prototype.isMineWin = function () {
        return this.isPlayerWin(GameGlobal.modelRole.voMine.id)
    }, t.prototype.isPlayerWin = function (t) {
        var e = this.data.send[0];
        if (e)
            for (var i = 0; i < e.init.length; i++) {
                var o = e.init[i];
                if (o[EnumBattleKey.R_TYPE] && o[EnumBattleKey.R_ID] == t) {
                    var n = o[EnumBattleKey.R_FORCE];
                    return n == this.data.winner ? !0 : !1
                }
            }
        return !1
    }, t.prototype.isMineLose = function () {
        return this.isPlayerLose(GameGlobal.modelRole.voMine.id)
    }, t.prototype.isPlayerLose = function (t) {
        var e = this.data.send[0];
        if (e)
            for (var i = 0; i < e.init.length; i++) {
                var o = e.init[i];
                if (o[EnumBattleKey.R_TYPE] && o[EnumBattleKey.R_ID] == t) {
                    var n = o[EnumBattleKey.R_FORCE];
                    return n != this.data.winner ? !0 : !1
                }
            }
        return !1
    }, t.prototype.clear = function () {
        var t = this;
        t.interruptCB && t.interruptCB.recover(), t.finishCB && t.finishCB.recover()
    }, t
}();
__reflect(VoBattle.prototype, "VoBattle");
var ModelFishing = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.actReminTime = 0, e.actReminTimeDt = 0, e.rt = 6e4, e.rt1 = 0, e.mineRoomID = 0, e.mineRoomType = 0, e.actState = 1, e.fishingMap = {}, e.roles = [], e.numMap = {}, e.typeMap = {}, e.roomIDS = [], e
    }
    return __extends(e, t), e.prototype.getXiaGanRTime = function () {
        var t = this.rt - (egret.getTimer() - this.rt1);
        return 0 > t && (t = 0), t
    }, e.prototype.getActRTime = function () {
        var t = this.actReminTime - (egret.getTimer() - this.actReminTimeDt);
        return 0 > t && (t = 0), t
    }, e.prototype.showEntry = function () {
        GameGlobal.layerMgr.openX(UIConst.FISHENTRY)
    }, e.prototype.checkNotic = function () {
        return this.getActRTime() >= 2e4 && GameGlobal.modelRole.voMine.level >= CFG_COMMOND.LIB[1072].openlv
    }, e.prototype.restXiaGanTTime = function () {
        this.rt1 = egret.getTimer()
    }, e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(2800, this.GC_ACTINFO, this), e.regHand(2802, this.GC_JOINFISHING, this), e.regHand(2804, this.GC_XIAGAN, this), e.regHand(2806, this.GC_SHOUGAN, this), e.regHand(2808, this.GC_ADDPLAYER, this), e.regHand(2810, this.GC_REMOVEP, this), e.regHand(2812, this.GC_MOVE, this), e.regHand(2818, this.GC_ROOM, this), e.regHand(2820, this.GC_PBASKET, this), e.regHand(2824, this.GC_SNATCHBTL, this), e.regHand(2826, this.GC_CHECK, this), e.regHand(2830, this.GC_TIP, this)
    }, e.prototype.clear = function () {
        this.roles.length = 0, this.curCheckBasket = null
    }, e.prototype.tryJoinFishing = function () {
        GameGlobal.modelFish.checkScene() ? ViewText.text("已在钓鱼房间") : this.getActRTime() >= 5e3 ? GameGlobal.modelWorldNet.CG_Cross_askCross_2301(4, "") : ViewText.text("活动未开启")
    }, e.prototype.GC_ACTINFO = function (t, i) {
        var o = i.readInt();
        t.actReminTime = 1e3 * o, t.actReminTimeDt = egret.getTimer(), o ? VHuoDongEntry.addHD(1072) : (VHuoDongEntry.removeHD(1072), t.checkScene() && (GameGlobal.modelFish.CG_LEAVE(), WorldSocketMgr.instance.close(!0), GameGlobal.mapScene.changeMap(GameGlobal.modelGuanqia.getCurSceneID()))), t.notify(e.MSG_ACTINFO), GameGlobal.modelExpGift.notify(ModelExpGift.msg_notice)
    }, e.prototype.CG_JOINFISHIG = function () {
        var t = this.getBytes();
        this.sendSocket(2801, t)
    }, e.prototype.GC_JOINFISHING = function (t, e) {
        t.mineRoomType = e.readByte(), t.mineRoomID = e.readShort(), 1 == t.mineRoomType ? GameGlobal.mapScene.changeMap(SceneCtrl.FISHID1) : 2 == t.mineRoomType && GameGlobal.mapScene.changeMap(SceneCtrl.FISHID2)
    }, e.prototype.CG_XIAGAN = function () {
        var t = GameGlobal.modelRole.voMine.sceneChars[0],
            e = this.getBytes();
        e.writeShort(t.x), e.writeShort(t.y), this.sendSocket(2803, e)
    }, e.prototype.GC_SHOUGAN = function (t, i) {
        if (t.checkScene()) {
            var o = i.readByte(),
                n = i.readInt(),
                a = i.readLong(),
                s = GameGlobal.mapScene.getRole(a);
            s && (1 == o ? (s.setSpecState(1), s.va || (s.va = []), n && (s.va.length >= 5 && s.va.shift(), s.va.push(n))) : s.setSpecState(0)), a == GameGlobal.modelRole.voMine.id && t.notify(e.MSG_FISHST), t.notify(e.MSG_BASKETC, a)
        }
    }, e.prototype.GC_XIAGAN = function (t, i) {
        var o = i.readByte(),
            n = i.readShort(),
            a = i.readShort(),
            s = i.readLong();
        if (o >= 2) return void ViewText.text([null, null, "未参加活动", "活动未开启", "钓鱼人数已满15"][o]);
        var r = GameGlobal.mapScene.getUnitByID(s);
        r && (1 == o ? (r.stand(), r.setSpecState(1)) : 0 == o && (r.stand(), r.setSpecState(0)), s == GameGlobal.modelRole.voMine.id ? (t.rt1 = egret.getTimer(), t.notify(e.MSG_FISHST)) : r.x != n && r.y != a && r.directMoveTo(n, a))
    }, e.prototype.CG_SHOUGAN = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(2805, e)
    }, e.prototype.CG_ENTERSCENEFIN = function () {
        this.roles.length = 0;
        var t = GameGlobal.modelRole.voMine,
            e = t.sceneChars[0];
        e.job = e.sex = t.job, this.roles.push(e);
        var i = this.getBytes();
        i.writeShort(this.mineRoomID), i.writeByte(this.mineRoomType), i.writeShort(e.x), i.writeShort(e.y), this.sendSocket(2807, i)
    }, e.prototype.GC_ADDPLAYER = function (t, i) {
        if (!GameGlobal.mapScene.map.isLoading && t.checkScene()) {
            for (var o = 0, n = i.readShort(); n > o; o++) {
                for (var a = i.readLong(), s = i.readByte(), r = i.readShort(), l = i.readShort(), h = i.readUTF(), c = i.readByte(), p = i.readInt(), u = i.readShort(), d = i.readShort(), f = i.readShort(), g = i.readShort(), m = (i.readShort(), []), y = 0, v = i.readShort(); v > y; y++) {
                    var _ = (i.readByte(), i.readInt());
                    i.readByte();
                    m[y] = _
                }
                var G = i.readByte(),
                    b = i.readByte(),
                    C = i.readShort(),
                    T = GameGlobal.mapScene,
                    S = T.getUnitByID(a);
                if (!S) {
                    var S = Role.create();
                    S.id = a, S.job = c, S.sex = c, S.str = p, S.setBody(u), S.setHorse(d), S.setWing(f), S.setWeapon(g), S.setName(h), S.x = r, S.y = l, T.correctRoleValidPos(S), GameGlobal.mapScene.addUnit(S), S.addMovePlug(), t.roles.push(S)
                }
                S.va = m, S.vb = G, S.vc = b, S && S.setSpecState(s)
            }
            S.setBattleRemain(1e3 * C), t.notify(e.MSG_PLAYER)
        }
    }, e.prototype.checkScene = function () {
        return GameGlobal.mapScene && GameGlobal.mapScene._curSt == SceneCtrl.T_FISH
    }, e.prototype.GC_REMOVEP = function (t, i) {
        var o = i.readLong();
        if (o != GameGlobal.modelRole.voMine.id && t.checkScene()) {
            var n = GameGlobal.mapScene.getRole(o);
            if (n) {
                GameGlobal.mapScene.removeUnit(n);
                var a = t.roles.indexOf(n);
                a >= 0 && t.roles.splice(a, 1), t.notify(e.MSG_PLAYER)
            }
        }
    }, e.prototype.myFishState = function () {
        return GameGlobal.modelRole.voMine.sceneChars[0].specState
    }, e.prototype.isRoleFishing = function (t) {}, e.prototype.GC_MOVE = function (t, e) {
        var i = e.readShort(),
            o = e.readShort(),
            n = e.readShort(),
            a = GameGlobal.mapScene.getRole(i);
        a && a.directMoveTo(o, n)
    }, e.prototype.CG_ROOM = function () {
        var t = this.getBytes();
        this.sendSocket(2817, t)
    }, e.prototype.GC_ROOM = function (t, i) {
        t.roomIDS.length = 0;
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = i.readByte(),
                s = i.readShort(),
                r = i.readByte();
            t.typeMap[s] = a, t.numMap[s] = r, t.roomIDS[o] = s
        }
        t.notify(e.MSG_ROOMLIST)
    }, e.prototype.CG_CHANGEROOM = function (t) {
        if (!this.isFlag(2815)) {
            this.addDelayFlag(2815, 1e3);
            var e = this.getBytes();
            e.writeByte(1), e.writeShort(t), this.sendSocket(2815, e)
        }
    }, e.prototype.CG_LEAVE = function () {
        var t = this.getBytes();
        this.sendSocket(2813, t)
    }, e.prototype.CG_PBASKET = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(2819, e)
    }, e.prototype.GC_PBASKET = function (t, i) {
        for (var o = i.readLong(), n = i.readByte(), a = i.readByte(), s = [], r = 0, l = i.readShort(); l > r; r++) {
            var h = (i.readByte(), i.readInt());
            i.readByte();
            s[r] = h
        }
        var c = GameGlobal.mapScene.getUnitByID(o);
        c && (c.va = s), c.vb = n, c.vc = a, t.notify(e.MSG_BASKETC, o)
    }, e.prototype.GC_SNATCHBTL = function (t, e) {
        var i = e.readLong(),
            o = e.readLong(),
            n = 1e3 * e.readShort(),
            a = GameGlobal.mapScene.getUnitByID(i);
        a && a.setBattleRemain(n);
        var s = GameGlobal.mapScene.getUnitByID(o);
        s && s.setBattleRemain(n)
    }, e.prototype.CG_SHOUYU = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(2821, e)
    }, e.prototype.CG_SNATCH = function (t, e, i) {
        var o = this.getBytes();
        o.writeLong(t), o.writeByte(e), o.writeInt(i), this.sendSocket(2823, o)
    }, e.prototype.CG_CHECK = function () {
        var t = this.getBytes();
        this.sendSocket(2825, t)
    }, e.prototype.GC_CHECK = function (t, i) {
        for (var o = [], n = 0, a = i.readShort(); a > n; n++) {
            var s = i.readByte(),
                r = i.readUTF(),
                l = i.readInt(),
                h = i.readByte(),
                c = i.readInt();
            o[n] = [s, r, l, h, c]
        }
        t.recordList = o, t.notify(e.MSG_RECORD, o)
    }, e.prototype.GC_TIP = function (t, e) {
        var i = e.readByte();
        t.tip(i)
    }, e.prototype.tip = function (t) {
        ViewText.text([null, "动未开启", "该房间活动人数已达20,不能进入", "该玩家正在战斗中", "正在战斗中,不能抢夺", "该玩家被抢已满3次,不能抢夺", "抢夺次数已满5次,不能抢夺"][t])
    }, e.MSG_ACTINFO = 1, e.MSG_FISHST = 2, e.MSG_ROOMLIST = 3, e.MSG_BASKETC = 4, e.MSG_PLAYER = 5, e.MSG_RECORD = 6, e
}(BaseModel);
__reflect(ModelFishing.prototype, "ModelFishing");
var VFishBasket = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "FishBasket", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.list.itemRenderer = VFishBasketItem, this.listDataAC = new eui.ArrayCollection, this.list.dataProvider = this.listDataAC, this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.base.btnReturn.bottom = 22, this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i), this.hideWhenBattle(), this.role = i, e.roleID = i.id, this.update(), GameGlobal.modelFish.on(ModelFishing.MSG_BASKETC, this.onBas, this), GameGlobal.modelFish.on(ModelFishing.MSG_PLAYER, this.onP, this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelFish.off(ModelFishing.MSG_BASKETC, this.onBas), GameGlobal.modelFish.off(ModelFishing.MSG_PLAYER, this.onP)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function () {
        var t = (GameGlobal.modelFish, GameGlobal.modelRole.voMine),
            i = t.sceneChars[0],
            o = this.role.id == t.id;
        this.base.title = Lang.reTxt("{0}的鱼篮", o ? "我" : this.role.name);
        var n = this.role.va;
        n = n ? this.role.va.concat() : [], 5 != n.length && (n.length = 5), DisplayUtil.fillDataAC(this.listDataAC, n), this.listDataAC.refresh();
        var a = 5 - i.vb;
        o ? (e.isMineBasket = !0, this.btn.visible = !0, this.btn.label = "一键收鱼", this.lbWarn.text = Lang.reTxt("{0}已被抢{1}/3次\n我的剩余抢鱼次数{2}", this.role.name, this.role.vc, a), this.lbStr.text = "") : (this.btn.visible = !1, e.isMineBasket = !1, this.lbWarn.text = Lang.reTxt("{0}已被抢{1}/3次\n我的剩余抢鱼次数{2}", this.role.name, this.role.vc, a), this.lbStr.textFlow = HtmlUtil.parse(Lang.reTxt("战力:<font color='#0A6D00'>{0}</font>", this.role.str)))
    }, e.prototype.onBas = function (t) {
        this.role.id == t && this.update()
    }, e.prototype.onP = function () {
        GameGlobal.mapScene.getUnitByID(e.roleID) || (this.closeHandler(), ViewText.text("该玩家已离开房间"))
    }, e.prototype.onBtnT = function () {
        e.isMineBasket && this.listDataAC.length && GameGlobal.modelFish.CG_SHOUYU(0)
    }, e.roleID = 0, e
}(BaseEUIView);
__reflect(VFishBasket.prototype, "VFishBasket");
var VFishBasketItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "FishBasketItem", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.grid.isShowEff(!0), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.grid.enableTip()
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            if (this._data = t, t) {
                this.grid._data && this.grid._data.dispose();
                var e = VoItem.create();
                e.init(t), this.grid.setData(e), this.lbName.text = e.name, this.lbName.textColor = Color.getColorInt(e.quality), this.grid.visible = !0, this.btn.enabled = !0
            } else this.grid.visible = !1, this.lbName.textColor = Color.UIBLACKTEXT, this.lbName.text = "沒有鱼苗", this.btn.enabled = !1;
            VFishBasket.isMineBasket ? this.btn.label = "收鱼" : this.btn.label = "抢夺"
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onBtnT = function (t) {
        this._data && (VFishBasket.isMineBasket ? GameGlobal.modelFish.CG_SHOUYU(this.itemIndex + 1) : GameGlobal.modelFish.CG_SNATCH(VFishBasket.roleID, this.itemIndex + 1, this.grid._data.id))
    }, e
}(eui.Component);
__reflect(VFishBasketItem.prototype, "VFishBasketItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VFishEntry = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "FishEntry", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.base.createQuestBtn(), this.base.btnQuest.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onQuestT, this), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn);
        var t = "周一、三、五、日21:05-21:26";
        this.lbTimeDes.text = t, this.base.title = "渔场"
    }, e.prototype.onQuestT = function () {
        GameGlobal.layerMgr.open(UIConst.UIID_INTRODUCE, CFG_COMMOND.LIBWFSM[1072].detail)
    }, e.prototype.onBtnT = function () {
        GameGlobal.modelFish.tryJoinFishing()
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VFishEntry.prototype, "VFishEntry");
var VFishMsg = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "FishMsg", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose).addCloseListen(this.btnReturn), this.list.itemRenderer = VFishMsgItem, this.listAC = new eui.ArrayCollection, this.list.dataProvider = this.listAC
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelFish.on(ModelFishing.MSG_RECORD, this.onData, this), this.onData(), null == GameGlobal.modelFish.recordList && GameGlobal.modelFish.CG_CHECK()
    }, e.prototype.onClose = function () {
        GameGlobal.modelFish.off(ModelFishing.MSG_RECORD, this.onData)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onData = function () {
        var t = GameGlobal.modelFish;
        this.listAC.source = t.recordList
    }, e
}(BaseEUIView);
__reflect(VFishMsg.prototype, "VFishMsg");
var VFishMsgItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._index = 0, e.skinName = "FishMsgItem", e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._index
        },
        set: function (t) {
            this._index = t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t[0],
                i = t[1],
                o = ConfigHelp.getToolTextByInt(1, t[2], 1, !0),
                n = t[3],
                a = DateUtil.getYMDHMS(t[4]);
            this.lbTime.text = a;
            var s;
            s = 1 == e ? 1 == n ? HtmlUtil.fontNoSize("抢夺成功", Color.UIGREEN2_STR) : HtmlUtil.fontNoSize("抢夺失败", Color.UIRED_STR) : 1 == n ? HtmlUtil.fontNoSize("守护失败", Color.UIRED_STR) : HtmlUtil.fontNoSize("守护成功", Color.UIGREEN2_STR), 1 == e ? this.lb.textFlow = HtmlUtil.parse(Lang.reTxt("你抢夺{0}的{1} {2}", i, o, s)) : this.lb.textFlow = HtmlUtil.parse(Lang.reTxt("{0}抢夺你的{1} {2}", i, o, s))
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VFishMsgItem.prototype, "VFishMsgItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VFishPlayerHead = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "FishPlayerHead", e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.lbName.text = t.name, this.imgHead.source = IconUtil.getRoleHead(t.sex), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), t.id == GameGlobal.modelRole.voMine.id ? this.lbStr.text = "战:" + GameGlobal.modelRole.voMine.str : this.lbStr.text = "战:" + t.str
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onT = function () {
        var t = GameGlobal.mapScene.getRole(this._data.id);
        t && GameGlobal.layerMgr.open(UIConst.FISHBASKET, t)
    }, e
}(eui.Component);
__reflect(VFishPlayerHead.prototype, "VFishPlayerHead", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VFishRoom = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "FishRoom", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.base.createTabGroup(), this.base.title = "更换房间", this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.itemAC = new eui.ArrayCollection, this.list.dataProvider = this.itemAC, this.list.itemRenderer = VFishRoomItem
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelFish.CG_ROOM(), DisplayUtil.resetScroller(this.scorl), this.update(), GameGlobal.modelFish.on(ModelFishing.MSG_ROOMLIST, this.update, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelFish.off(ModelFishing.MSG_ROOMLIST, this.update)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function () {
        var t = GameGlobal.modelFish.roomIDS;
        DisplayUtil.fillDataAC(this.itemAC, t)
    }, e
}(BaseEUIView);
__reflect(VFishRoom.prototype, "VFishRoom");
var VFishRoomItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "FishRoomItem", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onT = function () {
        var t = GameGlobal.modelFish,
            e = this;
        t.mineRoomID != e._data && this._data >= 0 && ViewAlert.show("切换房间会取消钓鱼状态,\n是否切换钓鱼房间?", function () {
            t.checkScene() && GameGlobal.modelFish.CG_CHANGEROOM(e._data)
        })
    }, Object.defineProperty(e.prototype, "data", {
        set: function (t) {
            this._data = t;
            var e = GameGlobal.modelFish,
                i = e.numMap[t] ? e.numMap[t] : 0,
                o = e.typeMap[t];
            1 == o ? this.lbName.text = "房间:" + (t % 1e3 + 1) : this.lbName.text = "房间:" + (t % 1e3 + 1);
            var n = 15;
            this.lbNum.text = i + "/" + n, this.lbNum.textColor = i >= n ? Color.UIRED : Color.UIGREEN2, this.imgSel.visible = e.mineRoomID == this._data
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VFishRoomItem.prototype, "VFishRoomItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VFishSceneUI = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "FishSceneUI", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = egret.TouchEvent.TOUCH_TAP;
        this.btnGan.addEventListener(t, this.onGanT, this), this.btnExit.addEventListener(t, this.onExitT, this), this.btnRoom.addEventListener(t, this.onRoomT, this), this.btnFBag.addEventListener(t, this.onBagT, this), this.btnMsg.addEventListener(t, this.onMsgT, this), this.roleList.itemRenderer = VFishPlayerHead, this.roleListAC = new eui.ArrayCollection, this.roleList.dataProvider = this.roleListAC, this.btnRoleUp.addEventListener(t, this.onRUpT, this), this.btnRoleDown.addEventListener(t, this.onRDownT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelFish.on(ModelFishing.MSG_PLAYER, this.updaPList, this), GameGlobal.modelFish.on(ModelFishing.MSG_FISHST, this.updatSt, this), GameGlobal.tick.addInterv(this.onInterv, 1e3, this), this.hideWhenBattle(), this.parent && this.parent.setChildIndex(this, 0), this.roleList.scrollV = 0, this.updateSceneName(), this.updatSt()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelFish.off(ModelFishing.MSG_PLAYER, this.updaPList, this), GameGlobal.tick.removeInterv(this.onInterv, this), GameGlobal.modelFish.off(ModelFishing.MSG_FISHST, this.updatSt)
    }, e.prototype.onGanT = function () {
        GameGlobal.modelFish.myFishState() ? GameGlobal.modelFish.CG_SHOUGAN(0) : GameGlobal.modelFish.CG_XIAGAN()
    }, e.prototype.onExitT = function () {
        ViewAlert.show("是否退出钓鱼地图?", function () {
            GameGlobal.modelFish.checkScene() && (GameGlobal.modelFish.CG_LEAVE(), WorldSocketMgr.instance.close(!0), GameGlobal.mapScene.changeMap(GameGlobal.modelGuanqia.getCurSceneID()))
        })
    }, e.prototype.onRoomT = function () {
        GameGlobal.layerMgr.open(UIConst.FISHROOM)
    }, e.prototype.onBagT = function () {
        var t = GameGlobal.modelRole.voMine.sceneChars[0];
        GameGlobal.layerMgr.open(UIConst.FISHBASKET, t)
    }, e.prototype.onMsgT = function () {
        GameGlobal.layerMgr.open(UIConst.FISHMSG)
    }, e.prototype.onInterv = function (t) {
        var e = GameGlobal.modelFish.myFishState();
        if (1 == e) {
            var i = GameGlobal.modelFish.getXiaGanRTime();
            0 >= i && (GameGlobal.modelFish.restXiaGanTTime(), GameGlobal.modelFish.CG_SHOUGAN(1)), t.lbRemain.text = DateUtil.getMSBySec3(i / 1e3 >> 0)
        } else t.lbRemain.text = "";
        var o = GameGlobal.modelFish.getActRTime();
        t.lbActRemain.text = "剩余时间:" + DateUtil.getMSBySec3(Math.ceil(o / 1e3))
    }, e.prototype.onSize = function () {
        this.fullStageWXWithPX()
    }, e.prototype.updaPList = function () {
        var t = GameGlobal.modelFish;
        DisplayUtil.fillDataAC(this.roleListAC, t.roles), this.roleListAC.refresh()
    }, e.prototype.updatSt = function () {
        var t = GameGlobal.modelFish.myFishState();
        1 == t ? (this.btnGan.label = "停止钓鱼", this.onInterv(this)) : this.btnGan.label = "开始钓鱼"
    }, e.prototype.updateSceneName = function () {
        this.lbSceneName.text = BroadCastMgr.getFishRoomName("" + GameGlobal.modelFish.mineRoomID)
    }, e.prototype.onRUpT = function () {
        this.roleList.scrollV = 0
    }, e.prototype.onRDownT = function () {
        this.roleList.measuredHeight < this.roelScrol.height ? this.roleList.scrollV = 0 : this.roleList.scrollV = this.roleList.measuredHeight - this.roelScrol.height
    }, e
}(BaseEUIView);
__reflect(VFishSceneUI.prototype, "VFishSceneUI");
var ModelFriend = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.tjLastRemain = 0, e.tjFreshTime = 0, e.friendPnlSt = -1, e.sendTimes = 20, e.giveTimes = 20, e._canSendGift = !1, e._canGetGift = !1, e._canGetcjjl = !1, e.numFriend = 20, e.curPageIndex = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (t) {
        this.socket = t, t.regHand(400, this.GC_UITIP, this), t.regHand(402, this.GC_FriendData, this), t.regHand(404, this.GC_ADDFRIENDRET, this), t.regHand(412, this.GC_GIFTTIMIES, this), t.regHand(426, this.GC426, this), t.regHand(428, this.GC428, this), t.regHand(430, this.GC430, this), t.regHand(432, this.GC432, this)
    }, e.prototype.getTJRemainSec = function () {
        return this.tjLastRemain - (egret.getTimer() - this.tjFreshTime)
    }, e.prototype.GC_UITIP = function (t, e) {
        var i = e.readByte();
        t._canSendGift = 0 != (2 & i), t._canGetGift = 0 != (4 & i), t._canGetcjjl = 0 != (8 & i), t.notifyRedTip()
    }, e.prototype.notifyRedTip = function () {
        this.notify(e.MSG_UITIP)
    }, e.prototype.canGetGift1 = function () {
        var t = this._canGetGift && this.giveTimes > 0,
            e = this._canGetcjjl;
        return t || e
    }, e.prototype.CG_FriendData = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(401, e)
    }, e.prototype.GC_FriendData = function (t, i) {
        for (var o = 200, n = i.readByte(), o = i.readShort(), a = [], s = 0; o > s; s++) {
            var r = new VoFriend;
            r.id = i.readLong(), r.name = i.readUTF(), r.level = i.readInt(), r.job = i.readByte(), r.sex = i.readByte(), r.str = i.readLong(), r.lineSt = i.readByte(), r.offLineTime = i.readInt(), r.lineSt && (r.offLineTime = 0), r.friendSt = i.readByte(), r.sendState = i.readByte(), r.vip = i.readByte(), r.qmd = i.readInt(), r.cjjl = i.readByte(), a[s] = r
        }
        1 == n ? (t.friendList = a, t.numFriend = a.length) : 2 == n ? t.fansList = a : 3 == n && (t.tuijianList = a), t.notify(e.MSG_FLIST)
    }, e.prototype.refreshTJ = function () {
        var t = this.getBytes();
        this.sendSocket(407, t)
    }, e.prototype.getListData = function (t) {
        switch (t) {
            case 0:
                return this.friendList && this.friendList.sort(this.FRIENDSORT), this.friendList;
            case 1:
                return this.fansList;
            case 2:
                return this.tuijianList;
            case 3:
                return this.friendList && this.friendList.sort(this.DELETESORT), this.friendList
        }
    }, e.prototype.getEndPageIndex = function (t) {
        var e = this.getListData(t);
        if (e) {
            var i = (e.length - 1) / 4 >> 0;
            return 0 > i && (i = 0), i
        }
        return 0
    }, e.prototype.setCurPageIndex = function (t) {
        this.curPageIndex = t, this.notify(e.MSG_FLIST)
    }, e.prototype.deleteFriend = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(405, e), this.deleteFriendIDNow(0, t)
    }, e.prototype.deleteFriendIDNow = function (t, i) {
        var o, n = this.getListData(t);
        if (n)
            for (var a = 0, s = n.length; s > a; a++)
                if (n[a].id == i) {
                    n.splice(a, 1), this.notify(e.MSG_FLIST);
                    break
                } return o
    }, e.prototype.addOneFriend = function (t) {
        this.friendList;
        if (this.numFriend >= 20) return this.WARNTXT(1), !1;
        this.numFriend++;
        var e = Util.getTempArr();
        return e[0] = t, this.addFriends(e), !0
    }, e.prototype.addFriends = function (t) {
        var e = this.getBytes();
        e.writeShort(t.length);
        for (var i = 0, o = t.length; o > i; i++) e.writeLong(t[i]);
        this.sendSocket(403, e)
    }, e.prototype.CG_SENDGIFT = function (t) {
        var e = this.getBytes();
        e.writeShort(t.length);
        for (var i = 0, o = t.length; o > i; i++) e.writeLong(t[i]);
        this.sendSocket(409, e)
    }, e.prototype.CG_GETGIFT = function (t) {
        var e = this.getBytes();
        e.writeShort(t.length);
        for (var i = 0, o = t.length; o > i; i++) e.writeLong(t[i]);
        this.sendSocket(411, e)
    }, e.prototype.GC_ADDFRIENDRET = function (t, e) {
        var i = e.readByte();
        5 == i && t.WARNTXT(2), 6 == i && t.WARNTXT(1)
    }, e.prototype.GC_GIFTTIMIES = function (t, i) {
        t.sendTimes = i.readByte(), t.giveTimes = i.readByte(), t.notify(e.MSG_GIFTTIME)
    }, e.prototype.changeTermSt = function (t, i, o) {
        var n, a = this.getListData(t);
        if (a)
            for (var s = 0, r = a.length; r > s; s++)
                if (a[s].id == i) {
                    a[s].friendSt = o, this.notify(e.MSG_FLIST);
                    break
                } return n
    }, e.prototype.WARNTXT = function (t) {
        var e;
        1 == t ? e = "关注已满" : 2 == t && (e = "已关注,不能重复关注"), e && ViewText.text(e)
    }, e.prototype.FRIENDSORT = function (t, e) {
        return t.offLineTime && e.offLineTime ? t.offLineTime - e.offLineTime : t.offLineTime ? e.offLineTime ? e.str - t.str : 1 : -1
    }, e.prototype.DELETESORT = function (t, e) {
        return e.offLineTime - t.offLineTime
    }, e.prototype.findFriend = function (t) {
        for (var e = 0, i = this.friendList.length; i > e; e++) {
            var o = this.friendList[e];
            if (o.id == t) return o
        }
        return null
    }, e.prototype.CG425 = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(425, e)
    }, e.prototype.GC426 = function (t, i) {
        Vo_GoodFeelJL.create();
        i.readLong();
        Vo_GoodFeelJL.clear();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte(),
                s = Vo_GoodFeelJL.Map[a];
            s && (s.isget = !0)
        }
        t.notify(e.MSG_GOODFEEL_FRIST)
    }, e.prototype.GC428 = function (t, e) {
        for (var i = Vo_GoodFeelFlower.List, o = e.readShort(), n = 0; o > n; n++) {
            var a = i[n];
            a || (a = new Vo_GoodFeelFlower, i.push(a)), a.name = e.readUTF(), a.shopid = e.readInt(), a.id = e.readLong()
        }
        for (; n < i.length; n++) {
            var s = i.splice(n, 1);
            s = null
        }
        GameGlobal.layerMgr.open(UIConst.GOODFEELFLOWER)
    }, e.prototype.CG429 = function (t, e) {
        var i = this.getBytes();
        i.writeLong(t), i.writeByte(e), this.sendSocket(429, i)
    }, e.prototype.GC430 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = (i.readLong(), i.readByte()),
                a = Vo_GoodFeelJL.Map[n];
            a && (a.isget = !0), t.notify(e.MSG_GOODFEEL)
        }
        var s = ["", "", "已领取", "亲密度未达到", "背包已满"];
        ViewText.text(s[o])
    }, e.prototype.CG431 = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(431, e)
    }, e.prototype.GC432 = function (t, i) {
        Vo_GoodFeelJL.jnlev = i.readShort(), Vo_GoodFeelJL.qmd = i.readInt(), t.notify(e.MSG_GOODFEELSKILL)
    }, e.MSG_UITIP = "1", e.MSG_FLIST = "friendList", e.MSG_GIFTTIME = "MSG_GIFTTIME", e.MSG_GOODFEEL = "MSG_GOODFEEL", e.MSG_GOODFEEL_FRIST = "MSG_GOODFEEL_FRIST", e.MSG_GOODFEELSKILL = "MSG_GOODFEELSKILL", e
}(BaseModel);
__reflect(ModelFriend.prototype, "ModelFriend");
var VFriendListItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.itemIndex = -1, e.skinName = "resource/eui_skins/game/friend/FriendListItem.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.txtVip = new ImageText, this.txtVip.charFunc = ImageText.VIPFUNC, this.txtVip.makeContainer(), this.txtVip.container.y = 83, this.addChild(this.txtVip.container), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtn1T, this), this.imgHead.addEventListener(egret.TouchEvent.TOUCH_TAP, this.lookOthHero, this), this.vipbg.addEventListener(egret.TouchEvent.TOUCH_TAP, this.lookOthHero, this), this.lbName.addEventListener(egret.TouchEvent.TOUCH_TAP, this.lookOthHero, this), this.lbLevel.addEventListener(egret.TouchEvent.TOUCH_TAP, this.lookOthHero, this), this.lbStr.addEventListener(egret.TouchEvent.TOUCH_TAP, this.lookOthHero, this), this.btnGoodFeel.addEventListener(egret.TouchEvent.TOUCH_TAP, this.goodfeelT, this), DisplayUtil.popBtnStyle(this.btnGoodFeel)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            if (this._data = t, this.lbName.text = t.name, this.lbLevel.text = "等级:" + t.level.toString(), this.lbStr.text = "战力:" + t.str.toString(), 1 == t.lineSt) this.lbLineSt.text = "在线";
            else {
                var e = t.offLineTime / 86400 >> 0;
                1 > e ? this.lbLineSt.text = "离线" : this.lbLineSt.text = Lang.reTxt("离线{0}天", e)
            }
            t.vip > 0 ? (this.vipbg.visible = !0, this.txtVip.setText("v" + t.vip), this.txtVip.container.x = 82 - (this.txtVip.totalWid >> 1)) : (this.vipbg.visible = !1, this.txtVip.setText("")), this.imgHead.source = IconUtil.getRoleHead(t.job), this.btnGoodFeel.visible = 1 == t.friendSt, this.lbqmd.text = t.qmd.toString();
            var i = GameGlobal.layerMgr.getView(UIConst.FRIEND);
            switch (i && "粉丝" == i.base.title && (this.btnGoodFeel.visible = !1), this.imgred.visible = 1 == t.cjjl, this.twoWay.x = this.lbName.x + this.lbName.width + 15, this.twoWay.visible = 1 == t.friendSt, GameGlobal.modelFriend.friendPnlSt) {
                case 0:
                    t.sendState ? (DisplayUtil.addBy(this.btn, this.btnGroup, 0), this.btn.label = "赠送") : DisplayUtil.remove(this.btn), DisplayUtil.remove(this.btn1);
                    break;
                case 1:
                    t.friendSt ? DisplayUtil.remove(this.btn) : (DisplayUtil.addBy(this.btn, this.btnGroup, 0), this.btn.label = "加好友"), t.sendState ? (DisplayUtil.addBy(this.btn1, this.btnGroup, 1), this.btn1.label = "领取") : DisplayUtil.remove(this.btn1);
                    break;
                case 2:
                    t.friendSt ? DisplayUtil.remove(this.btn) : (DisplayUtil.addBy(this.btn, this.btnGroup, 0), this.btn.label = "加好友"), DisplayUtil.remove(this.btn1);
                    break;
                case 3:
                    DisplayUtil.addBy(this.btn, this.btnGroup, 0), DisplayUtil.remove(this.btn1), this.btn.label = "删除"
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onBtnT = function () {
        var t = GameGlobal.modelFriend,
            e = this._data;
        if (0 == t.friendPnlSt) t.sendTimes ? 1 == e.sendState && (t.CG_SENDGIFT([e.id]), e.sendState = 0, GameGlobal.modelFriend.notify(ModelFriend.MSG_FLIST)) : ViewText.text("没有赠送次数");
        else if (3 == t.friendPnlSt) {
            var i = Lang.reTxt("确定要删除{0}?", e.name) + HtmlUtil.color("\n(取关后双方亲密度将清零)", "#d83503");
            ViewAlert.show(i, function () {
                t.deleteFriend(e.id)
            })
        } else 1 == t.friendPnlSt ? t.addOneFriend(e.id) && t.changeTermSt(t.friendPnlSt, e.id, 1) : t.friendPnlSt && t.addOneFriend(e.id) && t.deleteFriendIDNow(t.friendPnlSt, e.id)
    }, e.prototype.onBtn1T = function () {
        var t = GameGlobal.modelFriend,
            e = this._data;
        if (1 == t.friendPnlSt)
            if (1 == e.sendState)
                if (t.giveTimes) {
                    var i = [e.id];
                    t.CG_GETGIFT(i)
                } else ViewText.text("今日没有接受次数");
        else ViewText.text("今日已接受该好友赠送")
    }, e.prototype.lookOthHero = function () {
        GameGlobal.modelChat.CG473(this._data.id)
    }, e.prototype.goodfeelT = function () {
        GameGlobal.modelFriend.CG425(this._data.id)
    }, e
}(eui.Component);
__reflect(VFriendListItem.prototype, "VFriendListItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VFriendPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.curData = [], e._curst = -1, e.skinName = "resource/eui_skins/game/friend/FriendPanel.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this.base;
        t.title = "好友", this.base.createTabGroup(), this.addCloseListen(t.btnClose), this.addCloseListen(t.btnReturn), t.addTab("我的关注", 0, 1), t.addTab("粉丝", 1, 2), t.addTab("推荐", 2, 3), this.base.listenTabClick(this.tbtnT, this), this.listDatas = new eui.ArrayCollection, this.list.itemRenderer = VFriendListItem, this.list.dataProvider = this.listDatas, this.leftBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLBtn2T, this), this.lbSendTimes.visible = !1, this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChangeT, this), this.prePage.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPageT, this), this.nextPage.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPageT, this), DisplayUtil.remove(this.leftBtn1), this.leftBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLBtn1T, this), GameGlobal.layerMgr.reg(UIConst.GOODFEELSKILL, VGoodFeelSkill, GameGlobal.layerMgr.UI_Message)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setCurSt(0), GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.modelFriend.on(ModelFriend.MSG_FLIST, this.onFriendList, this), GameGlobal.modelFriend.on(ModelFriend.MSG_GIFTTIME, this.onGiftTimes, this), GameGlobal.modelFriend.on(ModelFriend.MSG_UITIP, this.checkFriendTip, this), GameGlobal.modelFriend.on(ModelFriend.MSG_GOODFEEL_FRIST, this.checkGoodfeel, this), this._updateGT(), this.checkFriendTip()
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.tick), GameGlobal.modelFriend.off(ModelFriend.MSG_FLIST, this.onFriendList), GameGlobal.modelFriend.off(ModelFriend.MSG_GIFTTIME, this.onGiftTimes), GameGlobal.modelFriend.off(ModelFriend.MSG_UITIP, this.checkFriendTip, this), GameGlobal.modelFriend.off(ModelFriend.MSG_GOODFEEL_FRIST, this.checkGoodfeel, this)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.checkGoodfeel = function () {
        var t = this.list.selectedItem;
        if (t) {
            var e = Vo_GoodFeelJL.isAllGet();
            e ? GameGlobal.layerMgr.open(UIConst.GOODFEELSKILL, t.id) : GameGlobal.layerMgr.open(UIConst.GOODFEEL, t)
        }
    }, e.prototype.setCurSt = function (t) {
        var e = t;
        switch (this._curst) {
            case 0:
                this.lbSendTimes.visible = !1, DisplayUtil.remove(this.leftBtn1), DisplayUtil.remove(this.leftBtn2);
                break;
            case 1:
                this.lbSendTimes.visible = !1, DisplayUtil.remove(this.leftBtn1);
                break;
            case 2:
                DisplayUtil.remove(this.leftBtn1);
                break;
            case 3:
                DisplayUtil.remove(this.leftBtn1)
        }
        this.rightBtn.visible = !1, this.lbCD.visible = !1;
        GameGlobal.modelFriend;
        switch (t) {
            case 0:
                this.base.title = "好友", this.leftBtn2.label = "取消关注", GameGlobal.modelFriend.CG_FriendData(1), this.lbSendTimes.visible = !0, DisplayUtil.addBy(this.leftBtn1, this.leftBtnGroup, 0), DisplayUtil.addBy(this.leftBtn2, this.leftBtnGroup, 1), this.leftBtn1.label = "一键赠送";
                break;
            case 1:
                this.base.title = "粉丝", GameGlobal.modelFriend.CG_FriendData(2), DisplayUtil.addBy(this.leftBtn1, this.leftBtnGroup, 0), this.lbSendTimes.visible = !0, this.leftBtn1.label = "一键领取";
                break;
            case 2:
                this.base.title = "推荐", this.leftBtn1.label = "一键添加", this.rightBtn.label = "换一批", this.lbCD.visible = !0, this.updateCD(), GameGlobal.modelFriend.CG_FriendData(3), DisplayUtil.addBy(this.leftBtn1, this.leftBtnGroup, 0), this.rightBtn.visible = !0;
                break;
            case 3:
                this.base.title = "删除好友", e = 0, this.leftBtn1.label = "退出", DisplayUtil.addBy(this.leftBtn1, this.leftBtnGroup, 0)
        }
        this.base.setTabSelIdx(e), this._curst = t, GameGlobal.modelFriend.friendPnlSt = t, GameGlobal.modelFriend.setCurPageIndex(0), this.updateList()
    }, e.prototype.updateList = function () {
        GameGlobal.tick.addInterv(this._updateList, 1, this, !0)
    }, e.prototype._updateList = function (t) {
        var e = GameGlobal.modelFriend;
        t.listDatas.source = e.friendList;
        var i = e.getListData(e.friendPnlSt),
            o = 4;
        if (i) {
            var n = e.curPageIndex * o,
                a = Math.min(n + o, i.length);
            t.listDatas.removeAll();
            for (var s = n; a > s; s++) t.listDatas.addItem(i[s]);
            var r = e.getEndPageIndex(e.friendPnlSt);
            t.lbPage.text = e.curPageIndex + 1 + "/" + (r + 1)
        } else t.lbPage.text = "1/1";
        var l = e.friendList ? e.friendList.length : 0;
        t.lbCount.text = "我的好友:" + l + "/20"
    }, e.prototype.tbtnT = function (t) {
        t.sort >= 0 && t.sort != this._curst && this.setCurSt(t.sort)
    }, e.prototype.onLBtn1T = function (t) {
        var e = GameGlobal.modelFriend;
        if (2 == this._curst) return void this.onKeyAdd();
        if (3 == this._curst) return void this.setCurSt(0);
        if (0 == this._curst) {
            var i = e.getListData(0);
            if (!i) return;
            var o = e.sendTimes,
                n = [];
            if (i.length)
                for (var a = Util.getTempArr(), s = 0, r = i.length; r > s && o > 0; s++) {
                    var l = i[s];
                    a[s] = l.id, 1 == l.sendState && (n.push(l.id), l.sendState = 0, o--)
                }
            e.sendTimes = o, n.length ? (e.CG_SENDGIFT(a), GameGlobal.modelFriend.notify(ModelFriend.MSG_FLIST), GameGlobal.modelFriend.notify(ModelFriend.MSG_GIFTTIME)) : ViewText.text("没有可赠送好友")
        } else if (1 == this._curst) {
            var i = e.getListData(1);
            if (!i) return;
            var o = e.giveTimes,
                n = [];
            if (i.length)
                for (var a = Util.getTempArr(), s = 0, r = i.length; r > s && o > 0; s++) {
                    var l = i[s];
                    a[s] = l.id, 1 == l.sendState && (n.push(l.id), l.sendState = 0, o--)
                }
            e.giveTimes != o && (e.giveTimes = o, e.notifyRedTip()), n.length ? (e.CG_GETGIFT(a), GameGlobal.modelFriend.notify(ModelFriend.MSG_FLIST), GameGlobal.modelFriend.notify(ModelFriend.MSG_GIFTTIME)) : ViewText.text("没有可领取物品")
        }
    }, e.prototype.onLBtn2T = function (t) {
        GameGlobal.modelFriend;
        0 == this._curst ? this.setCurSt(3) : 2 == this._curst
    }, e.prototype.onKeyAdd = function () {
        var t = GameGlobal.modelFriend,
            e = 20 - t.numFriend;
        if (!e) return void GameGlobal.modelFriend.WARNTXT(1);
        var i = this.listDatas;
        if (i.length) {
            for (var o = Util.getTempArr(), n = 0; n < i.length && e > 0; n++) {
                var a = this.listDatas.getItemAt(n);
                o[n] = a.id, t.deleteFriendIDNow(t.friendPnlSt, a.id), t.numFriend++, e--
            }
            t.addFriends(o)
        }
    }, e.prototype.onChangeT = function (t) {
        var e = GameGlobal.modelFriend;
        return e.getTJRemainSec() > 0 ? void ViewText.text("冷却中,请稍后再试") : (e.refreshTJ(), e.tjLastRemain = 3e5, void(e.tjFreshTime = egret.getTimer()))
    }, e.prototype.onPageT = function (t) {
        var e = GameGlobal.modelFriend;
        if (t.target == this.prePage) {
            var i = e.curPageIndex - 1;
            i >= 0 && e.setCurPageIndex(i)
        } else {
            var i = e.curPageIndex + 1,
                o = e.getEndPageIndex(e.friendPnlSt);
            o >= i && e.setCurPageIndex(i)
        }
    }, e.prototype.tick = function (t, e) {
        2 == t._curst && t.updateCD()
    }, e.prototype.onFriendList = function () {
        this.updateList()
    }, e.prototype.onGiftTimes = function () {
        this._updateGT()
    }, e.prototype._updateGT = function () {
        var t = GameGlobal.modelFriend;
        this.lbSendTimes.text = Lang.reTxt("赠送次数:{0}/20\n接受次数:{1}/20", t.sendTimes, t.giveTimes)
    }, e.prototype.updateCD = function () {
        var t = GameGlobal.modelFriend.getTJRemainSec();
        0 >= t ? (this.lbCD.text = "可刷新", this.lbCD.textColor = Color.UIGREEN) : (this.lbCD.text = "刷新倒计时:" + DateUtil.getMSBySec3(t / 1e3), this.lbCD.textColor = Color.UIRED)
    }, e.prototype.checkFriendTip = function () {
        var t = GameGlobal.modelFriend;
        t._canGetcjjl ? this.base.setNoticByIndex(0, !0) : this.base.setNoticByIndex(0, !1), t._canGetGift && t.giveTimes > 0 ? this.base.setNoticByIndex(1, !0) : this.base.setNoticByIndex(1, !1)
    }, e
}(BaseEUIView);
__reflect(VFriendPnl.prototype, "VFriendPnl");
var VoFriend = function () {
    function t() {
        this.qmd = 0, this.cjjl = 0
    }
    return t.prototype.random = function () {
        this.id = MathUtil.rndInt(0, 1e7), this.sex = MathUtil.rndInt(1, 2), this.job = MathUtil.rndInt(1, 2), this.lineSt = MathUtil.rndInt(0, 1), this.name = "aa" + MathUtil.rndInt(1e3, 9999), this.level = MathUtil.rndInt(1, 100), this.str = MathUtil.rndInt(1e4, 99999), this.vip = MathUtil.rndInt(0, 15)
    }, t
}();
__reflect(VoFriend.prototype, "VoFriend");
var ItemFriendHead = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemFriendHeadSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.iconClose.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCloseSelf, this)
    }, e.prototype.onCloseSelf = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.SI_LIAO);
        e && e.removeItem(this.data), t.stopImmediatePropagation()
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = IconUtil.getRoleHead(t.job);
            this.iconHead.source = e, this.iconNotice.visible = 1 != t.hasRead, this.txtName.text = t.name, t.isOnline ? (this.iconMask.visible = !1, this.txtOnline.text = "在线", this.txtOnline.textColor = 1090116) : (this.iconMask.visible = !0, this.txtOnline.text = "离线", this.txtOnline.textColor = 16711680)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, this.chosen.visible = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemFriendHead.prototype, "ItemFriendHead");
var ItemSLContent = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemSLContentSkin"
    }, e.prototype.childrenCreated = function () {
        this.txtLeft.addEventListener(egret.TextEvent.LINK, this.onLink, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = (t[2], t[3]);
            1 == e ? this.currentState = "right" : this.currentState = "left", this.update()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.update = function () {
        var t = this,
            e = t.data[0];
        if (e) var i = BroadCastMgr.parseTBStr(e, t.data[1]);
        else i = t.data[1];
        try {
            i.indexOf("</font>") >= 0 ? t.txtLeft.textFlow = HtmlUtil.parse(i) : t.txtLeft.text = i, t.txtTime.text = DateUtil.getMDHM(t.data[2])
        } catch (o) {
            t.txtLeft.text = i
        }
    }, e.prototype.onLink = function (t) {
        ChatItem.onCommonLink(t.text)
    }, e
}(ItemBase);
__reflect(ItemSLContent.prototype, "ItemSLContent");
var ModelSiLiao = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.hasSiLiaoTip = !1, e.redPoint = !1, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(414, this.GC414, this), e.regHand(416, this.GC416, this), e.regHand(418, this.GC418, this), e.regHand(420, this.GC420, this), e.regHand(422, this.GC422, this), e.regHand(424, this.GC424, this)
    }, e.prototype.CG413 = function () {
        this.sendSocket(413, this.getBytes())
    }, e.prototype.GC414 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            for (var a = i.readLong(), s = i.readByte(), r = i.readUTF(), l = i.readByte(), h = i.readShort(), c = [], p = 0; h > p; p++) {
                var u = i.readShort(),
                    d = i.readUTF(),
                    f = i.readInt(),
                    g = i.readByte();
                c.push([u, d, f, g])
            }
            VoSiLiao.clearContents(a), VoSiLiao.update(a, s, r, l, c)
        }
        t.checkNewMessage(), VoSiLiao.sortDatas(), t.notify(e.msg_data)
    }, e.prototype.CG415 = function (t, e) {
        var i = this.getBytes();
        i.writeLong(t), i.writeUTF(e), i.writeInt(0), this.sendSocket(415, i)
    }, e.prototype.GC416 = function (t, e) {
        var i = e.readByte();
        1 != i && ViewText.text(["广告号", "成功", "违规信息", "内容过长", "没有该玩家", "对方未达私聊等级", "双方70级可非好友私聊", "特殊字符不能发送"][i])
    }, e.prototype.GC418 = function (t, i) {
        var o = i.readLong(),
            n = i.readByte(),
            a = i.readUTF(),
            s = [i.readShort(), i.readUTF(), i.readInt(), i.readByte()],
            r = s[3];
        if (1 == r) var l = 1;
        else l = 2;
        var h = VoSiLiao.map.getByKey(o);
        if (h) GameGlobal.layerMgr.isOpenView(UIConst.SI_LIAO) ? t.notify(e.msg_newMessage, {
            content: s,
            vo: h
        }) : VoSiLiao.update(o, n, a, l, [s]);
        else {
            var h = VoSiLiao.update(o, n, a, l, [s]);
            if (h.isOnline = !0, VoSiLiao.sortDatas(), GameGlobal.layerMgr.isOpenView(UIConst.SI_LIAO)) {
                var c = GameGlobal.layerMgr.getView(UIConst.SI_LIAO);
                c && c.addNewFriend()
            }
        }
        t.checkNewMessage()
    }, e.prototype.CG419 = function () {
        this.sendSocket(419, this.getBytes())
    }, e.prototype.GC420 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readLong();
            VoSiLiao.updateOnline(a, !0)
        }
        VoSiLiao.sortDatas(), t.notify(e.msg_checkOnlineFriends)
    }, e.prototype.CG421 = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(421, e)
    }, e.prototype.GC422 = function (t, e) {
        var i = e.readByte();
        ViewText.text(["", "", "没有私聊数据", "没有跟该玩家私聊"][i])
    }, e.prototype.CG423 = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(423, e)
    }, e.prototype.GC424 = function (t, i) {
        t.hasSiLiaoTip = !0, t.notify(e.msg_siliaoTip)
    }, e.prototype.checkNewMessage = function () {
        var t = VoSiLiao.map.getLength() > 0;
        this.hasSiLiaoTip = t;
        for (var i = !1, o = 0, n = VoSiLiao.map.getLength(); n > o; o++) {
            var a = VoSiLiao.map.getByIndex(o);
            if (1 != a.hasRead) {
                i = !0;
                break
            }
        }
        this.redPoint = i, this.notify(e.msg_siliaoTip)
    }, e.msg_siliaoTip = "msg_siliaoTip", e.msg_data = "msg_data", e.msg_newMessage = "msg_newMessage", e.msg_checkOnlineFriends = "msg_checkOnlineFriends", e
}(BaseModel);
__reflect(ModelSiLiao.prototype, "ModelSiLiao");
var ViewSiLiao = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData1 = new eui.ArrayCollection, e.sourceData2 = new eui.ArrayCollection, e.skinName = "ViewSiLiaoSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.background), this.addCloseListen(this.btnReturn), this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), this.btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSend, this), this.friendHeads.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onSel, this), this.friendHeads.itemRenderer = ItemFriendHead, this.friendHeads.dataProvider = this.sourceData1, this.contents.itemRenderer = ItemSLContent, this.contents.dataProvider = this.sourceData2, this.btnSend.label = "发送"
    }, e.prototype.onSel = function (t) {
        var e = t.item;
        e != this._selVo && this.setSel(e)
    }, e.prototype.setSel = function (t) {
        var e;
        e = "number" == typeof t ? VoSiLiao.map.getByIndex(t) : t, this._selVo = e, e && (this.friendHeads.selectedItem = e, this.setReadState(e, 1), this.showContents())
    }, e.prototype.setReadState = function (t, e) {
        1 != t.hasRead && (t.hasRead = e, this.sourceData1.itemUpdated(t), GameGlobal.modelsiliao.CG423(t.friendId), GameGlobal.modelsiliao.checkNewMessage())
    }, e.prototype.onSend = function () {
        return this.txtInput.text ? (GameGlobal.modelsiliao.CG415(this._selVo.friendId, this.txtInput.text), void this.emptyText()) : void ViewText.text("不能发送空内容")
    }, e.prototype.emptyText = function () {
        this.txtInput.text = ""
    }, e.prototype.addMsg = function () {
        GameGlobal.modelsiliao.on(ModelSiLiao.msg_data, this.showHeads, this), GameGlobal.modelsiliao.on(ModelSiLiao.msg_newMessage, this.onNewMessage, this), GameGlobal.modelsiliao.on(ModelSiLiao.msg_checkOnlineFriends, this.onCheckOnline, this), GameGlobal.modelsiliao.CG413(), GameGlobal.modelsiliao.CG419()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelsiliao.off(ModelSiLiao.msg_data, this.showHeads, this), GameGlobal.modelsiliao.off(ModelSiLiao.msg_newMessage, this.onNewMessage, this), GameGlobal.modelsiliao.off(ModelSiLiao.msg_checkOnlineFriends, this.onCheckOnline, this)
    }, e.prototype.showHeads = function () {
        this.sourceData1.source = VoSiLiao.map.getList()
    }, e.prototype.addNewFriend = function () {
        var t = this;
        this.sourceData1.source = VoSiLiao.map.getList(), GameGlobal.tick.addInterv(function () {
            t._selVo && t.reSetVo(t._selVo)
        }, 100, this, !0)
    }, e.prototype.reSetVo = function (t) {
        this.setSel(t)
    }, e.prototype.showContents = function () {
        this.sourceData2.source = this._selVo.contents, this.resizeContents()
    }, e.prototype.onNewMessage = function (t) {
        var e = t.vo,
            i = t.content;
        this._selVo == e ? (this.sourceData2.length >= VoSiLiao.MAX_CHATITEMS && this.sourceData2.removeItemAt(0), this.sourceData2.addItem(i), this.resizeContents()) : (e.hasRead = 2, this.sourceData1.itemUpdated(e), VoSiLiao.addContent(e, i))
    }, e.prototype.onCheckOnline = function () {
        for (var t = 0, e = this.sourceData1.length; e > t; t++) {
            var i = this.sourceData1.getItemAt(t),
                o = this.friendHeads.$children[t];
            o && (o.data = i)
        }
    }, e.prototype.removeItem = function (t) {
        VoSiLiao.removeToPool(t), GameGlobal.modelsiliao.CG421(t.friendId), GameGlobal.modelsiliao.checkNewMessage(), this.refresh(), 0 == this.sourceData1.length ? this.closeHandler() : this.setSel(0)
    }, e.prototype.refresh = function () {
        this.sourceData1.refresh(), this.sourceData1.length > 0 && (this.setSel(this._selVo || 0), this.resizeContents())
    }, e.prototype.resizeContents = function () {
        var t = this;
        t.contentScrol.validateNow();
        var e = t.contentScrol.viewport.height,
            i = t.contents.measuredHeight,
            o = Math.max(0, i - e);
        t.contents.scrollV != o && (t.contents.scrollV = o), t.contentScrol.validateNow()
    }, e.prototype.checkSelecttion = function (t) {
        var e = this;
        e.showHeads(), GameGlobal.tick.addInterv(function () {
            e._selVo ? e.setSel(e._selVo) : e.setSel(t || 0)
        }, 500, this, !0)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.checkSelecttion(e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.setSel(null), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewSiLiao.prototype, "ViewSiLiao");
var VoSiLiao = function () {
    function t() {
        this.hasRead = 2, this.isOnline = !1
    }
    return t.update = function (e, i, o, n, a) {
        var s = this.map.getByKey(e);
        if (s) {
            this.removeContents(a.length, s);
            for (var r = 0, l = a.length; l > r; r++) {
                var h = a[r];
                h && s.contents.push(h)
            }
        } else s = t.create(), s.friendId = e, s.job = i, s.name = o, s.contents = a, s.isOnline = !1, this.map.add(s, e);
        return ArrayUtil.cleannull(s.contents), s.hasRead = n, s
    }, t.clearContents = function (e) {
        var i = t.map.getByKey(e);
        i && (i.contents.length = 0)
    }, t.removeContents = function (t, e) {
        var i = e.contents.length,
            o = i + t,
            n = o - this.MAX_CHATITEMS;
        if (n > 0)
            for (var a = 0; n > a; a++) e.contents.shift()
    }, t.addContent = function (t, e) {
        t && (this.removeContents(1, t), e && t.contents.push(e))
    }, t.updateOnline = function (t, e) {
        var i = this.map.getByKey(t);
        i && (i.isOnline = e)
    }, t.sortDatas = function () {
        var e = t.map.getList();
        e.sort(this.sortByOnline)
    }, t.sortByOnline = function (t, e) {
        var i = t.isOnline ? 1 : 0,
            o = e.isOnline ? 1 : 0;
        return o - i
    }, t.create = function () {
        return this.pool.pop() || new t
    }, t.removeToPool = function (t) {
        this.map.remove(t.friendId), this.pool.push(t)
    }, t.map = new CommondMap, t.MAX_CHATITEMS = 20, t.pool = [], t
}();
__reflect(VoSiLiao.prototype, "VoSiLiao");
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.registUI = function () {
            var e = GameGlobal.layerMgr;
            e.regView(t.FriendBackView, e.UI_MainMiddle, 1), e.regView(t.FriendWatchGiftView, e.UI_Message, 1), e.regView(t.FriendListView, e.UI_Message, 1), e.reg(t.FriendBackUI.FRIEND_RETURN, t.FriendReturnView, e.UI_MainMiddle, 1), e.regView(t.FriendReturnAward, e.UI_MainMiddle, 1), e.regView(t.FriendReturnMission, e.UI_MainMiddle, 1)
        }, i.prototype.registProxys = function () {
            var e = GameGlobal.socketMgr;
            this.registSingleProxy(t.Proxy, e)
        }, i.prototype.addMsgListeners = function () {
            var t = GameCtrlBase.instance;
            t.on(ModelBattle.GC_504, this.onEndBattle, this), t.on(ModelBattle.MSG_BATTLE_BEGIN, this.onStartBattle, this)
        }, i.prototype.removeMsgListeners = function () {
            var t = GameCtrlBase.instance;
            t.off(ModelBattle.GC_504, this.onEndBattle, this), t.off(ModelBattle.MSG_BATTLE_BEGIN, this.onStartBattle, this)
        }, i.prototype.onStartBattle = function (e) {
            if (e.type != ModelBattle.BT_GUANQIAMONSTER) {
                var i = GameGlobal.layerMgr,
                    o = "battle";
                i.addUIHideF(t.FriendBackUI.FRIEND_RETURN, o)
            }
        }, i.prototype.onEndBattle = function (e) {
            if (e != ModelBattle.BT_GUANQIAMONSTER) {
                var i = GameGlobal.layerMgr,
                    o = "battle";
                i.delUIHideF(t.FriendBackUI.FRIEND_RETURN, o)
            }
        }, i
    }(UIAndProxyBaseCtr);
    t.FriendBackCtr = e, __reflect(e.prototype, "FriendBack.FriendBackCtr")
}(FriendBack || (FriendBack = {}));
var AwardIcon = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "AwardIconSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, e.prototype.setData = function (t) {
        var e = ConfigHelp.makeVoList(t)[0];
        this.grid.data = e, this.grid.bg.visible = !1, this.grid.enableTip()
    }, e
}(eui.Component);
__reflect(AwardIcon.prototype, "AwardIcon");
var FriendBack;
! function (t) {
    var e = function () {
        function t() {
            this.init()
        }
        return t.prototype.init = function () {
            this.name = "", this.point = 0
        }, t
    }();
    t.FriendData = e, __reflect(e.prototype, "FriendBack.FriendData")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function () {
        function e() {
            this.init()
        }
        return e.prototype.init = function () {
            this.state = t.AwardState.CAN_NOT_GET, this.point = 0, this.award = "", this.id = 0
        }, e
    }();
    t.GiftData = e, __reflect(e.prototype, "FriendBack.GiftData")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function () {
        function t() {
            this.init()
        }
        return t.prototype.init = function () {
            this.mId = 0, this.count = 0, this.total = 0, this.mName = "", this.point = 0, this.oper = "", this.state = 0, this.sort = 0
        }, t
    }();
    t.FriendMission = e, __reflect(e.prototype, "FriendBack.FriendMission")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function () {
        function e() {
            this.init()
        }
        return e.prototype.init = function () {
            this.id = 0, this.money = 0, this.state = t.AwardState.CAN_NOT_GET, this.award = ""
        }, e
    }();
    t.FriendRechargeData = e, __reflect(e.prototype, "FriendBack.FriendRechargeData")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function () {
        function t() {
            this.init()
        }
        return t.prototype.init = function () {
            this.id = 0, this.name = "", this.money = 0, this.time = 0, this.isEmpty = !1
        }, t
    }();
    t.RedBagData = e, __reflect(e.prototype, "FriendBack.RedBagData")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e;
    ! function (t) {
        t[t.GET_CALL_INFO = 4801] = "GET_CALL_INFO", t[t.ON_CALL_INFO = 4802] = "ON_CALL_INFO", t[t.GET_BIG_AWARD_INFO = 4803] = "GET_BIG_AWARD_INFO", t[t.ON_BIG_AWARD_INFO = 4804] = "ON_BIG_AWARD_INFO", t[t.GET_REBATE_INFO = 4805] = "GET_REBATE_INFO", t[t.ON_REBATE_INFO = 4806] = "ON_REBATE_INFO", t[t.OPEN_RED_BAG = 4807] = "OPEN_RED_BAG", t[t.ON_RED_BAG = 4808] = "ON_RED_BAG", t[t.GET_GIFT_INFO = 4809] = "GET_GIFT_INFO", t[t.ON_GIFT_INFO = 4810] = "ON_GIFT_INFO", t[t.OPEN_BOX = 4811] = "OPEN_BOX", t[t.ON_OPEN_BOX = 4812] = "ON_OPEN_BOX", t[t.GET_FRIEND_LIST = 4813] = "GET_FRIEND_LIST", t[t.ON_FRIEND_LIST = 4814] = "ON_FRIEND_LIST", t[t.SEND_RETURN_AWARD_OPEN = 4815] = "SEND_RETURN_AWARD_OPEN", t[t.GET_RETURN_AWARD_OPEN = 4817] = "GET_RETURN_AWARD_OPEN", t[t.ON_RETURN_AWARD_OPEN = 4818] = "ON_RETURN_AWARD_OPEN", t[t.GET_RFETURN_AWARD_INFO = 4819] = "GET_RFETURN_AWARD_INFO", t[t.ON_RETURN_AWARD_INFO = 4820] = "ON_RETURN_AWARD_INFO", t[t.GET_RETURN_AWARD = 4821] = "GET_RETURN_AWARD", t[t.ON_RETURN_AWARD = 4822] = "ON_RETURN_AWARD", t[t.GET_INVITE_AWARD = 4823] = "GET_INVITE_AWARD", t[t.ON_INVITE_AWARD = 4824] = "ON_INVITE_AWARD", t[t.GET_MISSION_INFO = 4825] = "GET_MISSION_INFO", t[t.ON_MISSION_INFO = 4826] = "ON_MISSION_INFO", t[t.GET_CONSUME_INFO = 4827] = "GET_CONSUME_INFO", t[t.ON_CONSUME_INFO = 4828] = "ON_CONSUME_INFO", t[t.SEND_CODE = 4829] = "SEND_CODE", t[t.ON_CODE = 4830] = "ON_CODE", t[t.GET_BIG_AWARD = 4831] = "GET_BIG_AWARD", t[t.ON_BIG_AWARD = 4832] = "ON_BIG_AWARD", t[t.GET_RETURN_BOX = 4833] = "GET_RETURN_BOX", t[t.ON_RETURN_BOX = 4834] = "ON_RETURN_BOX", t[t.GET_CONSUME_AWARD = 4835] = "GET_CONSUME_AWARD", t[t.ON_CONSUME_AWARD = 4836] = "ON_CONSUME_AWARD", t[t.GET_MISSION_AWARD = 4837] = "GET_MISSION_AWARD", t[t.ON_MISSION_AWARD = 4838] = "ON_MISSION_AWARD", t[t.GET_BACK_MISSION_NOTICE = 4839] = "GET_BACK_MISSION_NOTICE", t[t.ON_BACK_MISSION_NOTICE = 4840] = "ON_BACK_MISSION_NOTICE", t[t.GET_FRIEND_CALL_NOTICE = 4841] = "GET_FRIEND_CALL_NOTICE", t[t.ON_FRIEND_CALL_NOTICE = 4842] = "ON_FRIEND_CALL_NOTICE"
    }(e = t.Protocol || (t.Protocol = {}));
    var i;
    ! function (t) {
        t[t.CAN_NOT_GET = 0] = "CAN_NOT_GET", t[t.CAN_GET = 1] = "CAN_GET", t[t.IS_GET = 2] = "IS_GET"
    }(i = t.AwardState || (t.AwardState = {}));
    var o;
    ! function (t) {
        t[t.SUCCESS = 1] = "SUCCESS", t[t.NOT_ACCHIEVE = 2] = "NOT_ACCHIEVE", t[t.HAVED_GET = 3] = "HAVED_GET"
    }(o = t.AwardCode || (t.AwardCode = {}));
    var n;
    ! function (t) {
        t[t.HAVE_NOT_OPEN = 0] = "HAVE_NOT_OPEN", t[t.HAVED_OPEN = 1] = "HAVED_OPEN"
    }(n = t.OpenState || (t.OpenState = {}));
    var a;
    ! function (t) {
        t[t.HAVE_NOT_RECEIVE = 1] = "HAVE_NOT_RECEIVE", t[t.HAVED_RECEIVE = 2] = "HAVED_RECEIVE"
    }(a = t.FriendReturnState || (t.FriendReturnState = {}));
    var s;
    ! function (t) {
        t[t.HAVE_NOT_RECEIVE = 1] = "HAVE_NOT_RECEIVE", t[t.HAVED_RECEIVE = 2] = "HAVED_RECEIVE"
    }(s = t.InviteCodeState || (t.InviteCodeState = {}));
    var r;
    ! function (t) {
        t[t.HAVE_NOT_BIND = 0] = "HAVE_NOT_BIND", t[t.HAVED_BIND = 1] = "HAVED_BIND"
    }(r = t.InviteBindState || (t.InviteBindState = {}));
    var l;
    ! function (t) {
        t[t.SUCCESS = 1] = "SUCCESS", t[t.WRONG_CODE = 2] = "WRONG_CODE", t[t.HAVE_BIND = 3] = "HAVE_BIND", t[t.NOT_AT_TIME = 4] = "NOT_AT_TIME", t[t.CAN_NOT_BIND_SELF = 5] = "CAN_NOT_BIND_SELF"
    }(l = t.SendCodeReturn || (t.SendCodeReturn = {}));
    var h;
    ! function (t) {
        t[t.HAVE_NOT_RECEIVE = 1] = "HAVE_NOT_RECEIVE", t[t.HAVED_RECEIVE = 2] = "HAVED_RECEIVE"
    }(h = t.MissionAwardState || (t.MissionAwardState = {}))
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function () {
        function t() {}
        return t.STR = "FriendBack_", t.UPDATE_CALL_INFO = t.STR + "UPDATE_CALL_INFO", t.UPDATE_BIG_AWARD_INFO = t.STR + "UPDATE_BIG_AWARD_INFO", t.UPDATE_REBATE_INFO = t.STR + "UPDATE_REBATE_INFO", t.UPDATE_GIFT = t.STR + "UPDATE_GIFT", t.UPDATE_FRIEND_LIST = t.STR + "UPDATE_FRIEND_LIST", t.UPDATE_RECHARGE_INFO = t.STR + "UPDATE_RECHARGE_INFO", t.OPEN = t.STR + "OPEN", t.UPDATE_FRIENDBACK_AWARD_INFO = t.STR + "UPDATE_FRIENDBACK_AWARD_INFO", t.UPDATE_BIND_STATE = t.STR + "UPDATE_BIND_STATE", t.UPDATE_MISSION_INFO = t.STR + "UPDATE_MISSION_INFO", t.UPDATE_MISSION_NOTICE = t.STR + "UPDATE_MISSION_NOTICE", t.UPDATE_FRIEND_NOTICE = t.STR + "UPDATE_FRIEND_NOTICE", t
    }();
    t.Event = e, __reflect(e.prototype, "FriendBack.Event")
}(FriendBack || (FriendBack = {}));
var SkillGridGroup = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "SkillGroupSkin", e
    }
    return __extends(e, t), e.prototype.setData = function (t) {
        this.clearGrids();
        for (var e = 0; e < t.count; e++) {
            var i = this.skillGrp1.$children[e];
            i || (i = VPetSkillGrid.create(), this.skillGrp1.addChild(i));
            var o = t.dataArr[e];
            if (o) i.setVo(o), i.setLockVis(t.isLock);
            else {
                var n = e + 1,
                    a = Config.getConfig(petskill_131).get(n),
                    s = 0;
                1 == t.classType ? s = a.classtype1 : 2 == t.classType && (s = a.classtype2), s > 0 ? t.petLayer >= s ? (i.setVo(null), i.setLockVis(t.isLock)) : (i.learnClassCount = s, i.setOpenCond(null)) : t.petLevel >= a.oplv || 0 == t.petLevel ? (i.setVo(null), i.setLockVis(t.isLock)) : i.setOpenCond(a.oplv + "级\n开启")
            }
        }
    }, e.prototype.clearGrids = function () {
        for (var t = this.skillGrp1.numChildren, e = 0; t > e; e++) {
            var i = this.skillGrp1.getChildAt(e);
            i.dispose()
        }
        this.skillGrp1.removeChildren()
    }, e
}(eui.Component);
__reflect(SkillGridGroup.prototype, "SkillGridGroup");
var FriendBack;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.skinName = "FriendBackListItemSkin", e
        }
        return __extends(e, t), e.prototype.childrenCreated = function () {
            t.prototype.childrenCreated.call(this)
        }, e.prototype.dataChanged = function () {
            var t = this.data;
            this.lb_name.text = t.name, this.lb_point.textFlow = HtmlUtil.parse("回归点:" + HtmlUtil.color(t.point, "#10a244"))
        }, e
    }(eui.ItemRenderer);
    t.FriendListItem = e, __reflect(e.prototype, "FriendBack.FriendListItem")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FriendMissionAwardItemSkin", t
        }
        return __extends(i, e), i.prototype.dataChanged = function () {
            var e = this.data,
                i = e.state;
            switch (this.lb_point.text = e.point + "", i) {
                case t.AwardState.CAN_NOT_GET:
                    this.btnBox.source = "friendBack_json.26_closedBox", this.img_red.visible = !1;
                    break;
                case t.AwardState.CAN_GET:
                    this.btnBox.source = "friendBack_json.26_closedBox", this.img_red.visible = !0;
                    break;
                case t.AwardState.IS_GET:
                    this.btnBox.source = "friendBack_json.26_openedBox", this.img_red.visible = !1
            }
        }, i.prototype.onTouch = function () {
            if (!(egret.getTimer() - this.time < 1e3)) {
                this.time = egret.getTimer();
                var e = this.data,
                    i = e.state;
                switch (i) {
                    case t.AwardState.CAN_NOT_GET:
                        GameCtrlBase.instance.openView(t.FriendWatchGiftView, e);
                        break;
                    case t.AwardState.CAN_GET:
                        GameCtrlBase.instance.getProxy(t.Proxy).getReturnBox(e.id);
                        break;
                    case t.AwardState.IS_GET:
                        ViewText.text("已领取过!")
                }
            }
        }, i
    }(t.FriendGiftItem);
    t.FriendMissionAwardItem = e, __reflect(e.prototype, "FriendBack.FriendMissionAwardItem")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FriendRebateItemSkin", t
        }
        return __extends(i, e), i.prototype.childrenCreated = function () {
            e.prototype.childrenCreated.call(this), this.btn_open.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), DisplayUtil.popBtnStyle(this.btn_open), this.time = 0
        }, i.prototype.dataChanged = function () {
            var t = this.data;
            this.lb_name.text = t.name;
            var e = DateUtils.getDate(1e3 * t.time);
            this.lb_time.text = e.year + "-" + e.month + "-" + e.day, this.lb_money.text = t.money + "", this.lb_time.visible = !t.isEmpty, this.grp_money.visible = !t.isEmpty
        }, i.prototype.onTouch = function () {
            if (!(egret.getTimer() - this.time < 1e3)) {
                this.time = egret.getTimer();
                var e = this.data;
                e.isEmpty ? ViewText.text("暂未有仙友充值，无法获得返利！") : GameCtrlBase.instance.getProxy(t.Proxy).openRedBag(e.id)
            }
        }, i
    }(eui.ItemRenderer);
    t.FriendRebateItem = e, __reflect(e.prototype, "FriendBack.FriendRebateItem")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FriendRechageItemSkin", t
        }
        return __extends(i, e), i.prototype.childrenCreated = function () {
            e.prototype.childrenCreated.call(this), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.time = 0, this.grids = []
        }, i.prototype.dataChanged = function () {
            var e = this.data,
                i = e.state;
            switch (this.lb_money.textFlow = HtmlUtil.parse("回归累计充值" + HtmlUtil.color(e.money, "#10a244") + "元宝"), i) {
                case t.AwardState.CAN_NOT_GET:
                    this.btn.setNoticeVis(!1), this.btn.enabled = !1, this.btn.label = "未达成";
                    break;
                case t.AwardState.CAN_GET:
                    this.btn.setNoticeVis(!0), this.btn.enabled = !0, this.btn.label = "领取";
                    break;
                case t.AwardState.IS_GET:
                    this.btn.setNoticeVis(!1), this.btn.enabled = !1, this.btn.label = "已领取"
            }
            ConfigHelp.makeStrGrids(e.award, this.grids, 0, 0, this.container, !0)
        }, i.prototype.onTouch = function () {
            if (!(egret.getTimer() - this.time < 1e3)) {
                this.time = egret.getTimer();
                var e = this.data;
                GameCtrlBase.instance.getProxy(t.Proxy).getConsumeAward(e.id)
            }
        }, i.prototype.clearGrids = function () {
            ConfigHelp.clearGrids(this.grids)
        }, i
    }(eui.ItemRenderer);
    t.FriendRechargeItem = e, __reflect(e.prototype, "FriendBack.FriendRechargeItem")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.skinName = "FriendReturnAwardItemSkin", e
        }
        return __extends(e, t), e.prototype.childrenCreated = function () {
            t.prototype.childrenCreated.call(this)
        }, e.prototype.dataChanged = function () {
            var t = this.data,
                e = ConfigHelp.makeVoList(t)[0];
            this.grid.data = e, this.grid.bg.visible = !1, this.grid.enableTip()
        }, e
    }(eui.ItemRenderer);
    t.FriendReturnAwardItem = e, __reflect(e.prototype, "FriendBack.FriendReturnAwardItem")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FriendReturnMissionItemSkin", t
        }
        return __extends(i, e), i.prototype.childrenCreated = function () {
            e.prototype.childrenCreated.call(this), this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), DisplayUtil.popBtnStyle(this.btnSure)
        }, i.prototype.dataChanged = function () {
            var e = this.data;
            this.lbName.text = e.mName, this.lbCount.text = e.count + "/" + e.total, this.lbPoint.text = e.point + "";
            var i = e.state;
            i == t.MissionAwardState.HAVED_RECEIVE ? (this.btnSure.lbText.text = "已领取", this.btnSure.enabled = !1, this.btnSure.setNoticeVis(!1)) : (this.btnSure.enabled = !0, e.count >= e.total ? (this.btnSure.lbText.text = "领取", this.btnSure.setNoticeVis(!0)) : (this.btnSure.lbText.text = "前往", this.btnSure.setNoticeVis(!1)))
        }, i.prototype.onTouch = function () {
            var e = this.data,
                i = e.state;
            if (i == t.MissionAwardState.HAVED_RECEIVE) ViewText.text("已领取过！");
            else if (e.count >= e.total) GameCtrlBase.instance.getProxy(t.Proxy).getMissionAward(e.mId);
            else {
                var o = parseInt(e.oper.split(",")[1]),
                    n = parseInt(e.oper.split(",")[2]);
                GameGlobal.layerMgr.open(o, n)
            }
        }, i
    }(eui.ItemRenderer);
    t.FriendReturnMissionItem = e, __reflect(e.prototype, "FriendBack.FriendReturnMissionItem")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.myInviteCode = "", t.myFriendPoint = 0, t.friendsCount = 0, t._friendGiftArr = new Dictionary, t.myRecharge = 0, t._friendRechargeArr = new Dictionary, t.remainTime = 0, t.showGiftNotice = !1, t.friendReturnAward = [], t.inviteCodeAward = [], t.friendReturnState = 0, t.inviteCodeState = 0, t.inviteBindState = 0, t.offlineDays = 0, t.missionArr = [], t.missionAwardNotice = !1, t.showReturnGiftNotice = !1, t.friendReturnPoint = 0, t._friendReturnGiftArr = new Dictionary, t.showRechargeNotice = !1, t
        }
        return __extends(i, e), i.prototype.initGiftArr = function () {
            if (!this._friendGiftArr.length)
                for (var e = Config.getConfig(returnChest_100).values, i = 0; i < e.length; i++) {
                    var o = new t.GiftData;
                    o.id = e[i].id, o.point = e[i].exp, o.award = e[i].jl2, this._friendGiftArr.set(o.id, o)
                }
        }, i.prototype.initGiftArrState = function () {
            for (var e = this._friendGiftArr.length, i = 0; e > i; i++) this._friendGiftArr.values[i].state = t.AwardState.IS_GET
        }, i.prototype.initRechargeArr = function () {
            if (!this._friendRechargeArr.length)
                for (var e = Config.getConfig(returnRebate_102).values, i = 0; i < e.length; i++) {
                    var o = new t.FriendRechargeData;
                    o.id = e[i].id, o.money = e[i].recharge, o.award = e[i].rebate, this._friendRechargeArr.set(o.id, o)
                }
        }, i.prototype.updateRechargeArr = function (t, e) {
            var i = this._friendRechargeArr.get(t);
            i.state = e
        }, i.prototype.sortRechargeArr = function (t) {
            t.sort(function (t, e) {
                var i = [2, 3, 1],
                    o = i[t.state],
                    n = i[e.state];
                return o == n ? t.money - e.money : n - o
            })
        }, i.prototype.updateGiftArr = function (e, i) {
            this.initGiftArr(), this.initGiftArrState(), this.showGiftNotice = !1;
            for (var o = 0; o < i.length; o++) {
                var n = i[o],
                    a = this._friendGiftArr.get(n);
                a ? e >= a.point ? (a.state = t.AwardState.CAN_GET, this.showGiftNotice = !0) : a.state = t.AwardState.CAN_NOT_GET : console.error("错误的id:" + n)
            }
        }, i.prototype.sortGiftArr = function (t) {
            t.sort(function (t, e) {
                var i = [2, 3, 1],
                    o = i[t.state],
                    n = i[e.state];
                return o == n ? t.point - e.point : n - o
            })
        }, i.prototype.getGiftArr = function () {
            var t = this._friendGiftArr.values.concat();
            return this.sortGiftArr(t), t
        }, i.prototype.getRechargeArr = function () {
            var t = this._friendRechargeArr.values.concat();
            return this.sortRechargeArr(t), t
        }, i.prototype.getReturnAwardConfig = function () {
            return Config.getConfig(canshu_143).get(56).key
        }, i.prototype.initReturnAwardData = function () {
            for (var t = Config.getConfig(canshu_143).get(56).key.split(";"), e = t.length, i = 0; e > i; i++) this.friendReturnAward.push(t[i])
        }, i.prototype.initInviteAwardData = function () {
            for (var t = Config.getConfig(canshu_143).get(57).key.split(";"), e = t.length, i = 0; e > i; i++) this.inviteCodeAward.push(t[i])
        }, i.prototype.initReturnGiftArr = function () {
            if (!this._friendReturnGiftArr.length)
                for (var e = Config.getConfig(returnChest_100).values, i = 0; i < e.length; i++) {
                    var o = new t.GiftData;
                    o.id = e[i].id, o.point = e[i].exp, o.award = e[i].jl1, this._friendReturnGiftArr.set(o.id, o)
                }
        }, i.prototype.initReturnGiftArrState = function () {
            for (var e = this._friendReturnGiftArr.length, i = 0; e > i; i++) this._friendReturnGiftArr.values[i].state = t.AwardState.IS_GET
        }, i.prototype.getReturnGiftArr = function () {
            var t = this._friendReturnGiftArr.values.concat();
            return this.sortGiftArr(t), t
        }, i.prototype.updateReturnGiftArr = function (e, i) {
            this.initReturnGiftArr(), this.initReturnGiftArrState(), this.showReturnGiftNotice = !1;
            for (var o = 0; o < i.length; o++) {
                var n = i[o],
                    a = this._friendReturnGiftArr.get(n);
                a ? e >= a.point ? (a.state = t.AwardState.CAN_GET, this.showReturnGiftNotice = !0) : a.state = t.AwardState.CAN_NOT_GET : console.error("错误的id:" + n)
            }
        }, i.prototype.getMissionConfigById = function (e) {
            var i = Config.getConfig(returnTask_103).get(e),
                o = new t.FriendMission;
            return o.mName = i.rw, o.total = i.par, o.point = i.hg, o.oper = i.oper, o.sort = i.order, o
        }, i.prototype.sortMissionArr = function (t) {
            t.sort(function (t, e) {
                var i = [2, 3, 1],
                    o = i[t.state],
                    n = i[e.state];
                return o == n ? t.sort - e.sort : n - o
            })
        }, i
    }(GameCtrlBase);
    t.Model = e, __reflect(e.prototype, "FriendBack.Model")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.listenServ = function (i) {
            e.prototype.listenServ.call(this, i), i.regHand(t.Protocol.ON_CALL_INFO, this.onCallInfo, this), i.regHand(t.Protocol.ON_BIG_AWARD_INFO, this.onBigAwardInfo, this), i.regHand(t.Protocol.ON_REBATE_INFO, this.onRebateInfo, this), i.regHand(t.Protocol.ON_RED_BAG, this.onRedBag, this), i.regHand(t.Protocol.ON_GIFT_INFO, this.onGiftInfo, this), i.regHand(t.Protocol.ON_OPEN_BOX, this.onOpenBox, this), i.regHand(t.Protocol.ON_FRIEND_LIST, this.onFriendList, this), i.regHand(t.Protocol.ON_RETURN_AWARD_OPEN, this.onReturnAwardOpen, this), i.regHand(t.Protocol.ON_RETURN_AWARD_INFO, this.onReturnAwardInfo, this), i.regHand(t.Protocol.ON_RETURN_AWARD, this.onReturnAward, this), i.regHand(t.Protocol.ON_INVITE_AWARD, this.onInviteAward, this), i.regHand(t.Protocol.ON_MISSION_INFO, this.onMissionInfo, this), i.regHand(t.Protocol.ON_CONSUME_INFO, this.onRechargeInfo, this), i.regHand(t.Protocol.ON_CODE, this.onCode, this), i.regHand(t.Protocol.ON_CONSUME_AWARD, this.onConsumeAward, this), i.regHand(t.Protocol.ON_BIG_AWARD, this.onBigAward, this), i.regHand(t.Protocol.ON_RETURN_BOX, this.onReturnBox, this), i.regHand(t.Protocol.ON_MISSION_AWARD, this.onMissionAward, this), i.regHand(t.Protocol.ON_BACK_MISSION_NOTICE, this.onBackMissionNotice, this), i.regHand(t.Protocol.ON_FRIEND_CALL_NOTICE, this.onFriendCallNotice, this)
        }, i.prototype.onCallInfo = function (e, i) {
            var o = e.getModel(t.Model);
            o.myInviteCode = i.readUTF(), EventCenter.sendMsg(t.Event.UPDATE_CALL_INFO)
        }, i.prototype.onBigAwardInfo = function (e, i) {
            var o = (e.getModel(t.Model), i.readByte());
            EventCenter.sendMsg(t.Event.UPDATE_BIG_AWARD_INFO, o)
        }, i.prototype.onRebateInfo = function (e, i) {
            for (var o = (e.getModel(t.Model), []), n = i.readShort(), a = 0; n > a; a++) {
                var s = new t.RedBagData;
                s.name = i.readUTF(), s.money = i.readInt(), s.time = i.readLong(), s.id = i.readInt(), o.push(s)
            }
            EventCenter.sendMsg(t.Event.UPDATE_REBATE_INFO, o)
        }, i.prototype.onRedBag = function (e, i) {
            var o = (e.getModel(t.Model), i.readByte());
            switch (o) {
                case t.AwardCode.SUCCESS:
                    e.getRebateInfo();
                    break;
                case t.AwardCode.NOT_ACCHIEVE:
                    ViewText.text("暂未有仙友充值，无法获得返利！");
                    break;
                case t.AwardCode.HAVED_GET:
                    ViewText.text("已领取过！");
                    break;
                default:
                    egret.warn("!!!!!!好友回归返回码异常：" + o)
            }
        }, i.prototype.onGiftInfo = function (e, i) {
            for (var o = e.getModel(t.Model), n = i.readShort(), a = [], s = 0; n > s; s++) {
                var r = i.readInt();
                a.push(r)
            }
            o.myFriendPoint = i.readInt(), o.updateGiftArr(o.myFriendPoint, a), EventCenter.sendMsg(t.Event.UPDATE_GIFT)
        }, i.prototype.onOpenBox = function (e, i) {
            var o = (e.getModel(t.Model), i.readByte());
            switch (o) {
                case t.AwardCode.SUCCESS:
                    ViewText.text("领取成功！"), e.getGiftInfo();
                    break;
                case t.AwardCode.NOT_ACCHIEVE:
                    ViewText.text("未达条件！");
                    break;
                case t.AwardCode.HAVED_GET:
                    ViewText.text("已领取过！");
                    break;
                default:
                    egret.warn("!!!!!!好友回归返回码异常：" + o)
            }
        }, i.prototype.onFriendList = function (e, i) {
            for (var o = e.getModel(t.Model), n = [], a = i.readShort(), s = 0; a > s; s++) {
                var r = new t.FriendData;
                r.name = i.readUTF(), r.point = i.readInt(), n.push(r)
            }
            o.friendsCount = i.readInt(), EventCenter.sendMsg(t.Event.UPDATE_FRIEND_LIST, n)
        }, i.prototype.onReturnAwardOpen = function (e, i) {
            var o = e.getModel(t.Model),
                n = i.readByte();
            o.remainTime = i.readLong(), n == t.OpenState.HAVE_NOT_OPEN && o.remainTime > 0 && CFG_COMMOND.isOpen(CFG_COMMOND.FRIEND_BACK, !1) && (e.openView(t.FriendReturnView), e.sendReturnAwardOpen()), EventCenter.sendMsg(t.Event.OPEN)
        }, i.prototype.onReturnAwardInfo = function (e, i) {
            var o = e.getModel(t.Model),
                n = i.readInt(),
                a = i.readByte(),
                s = i.readByte(),
                r = i.readByte();
            o.offlineDays = n, o.friendReturnState = a, o.inviteCodeState = s, o.inviteBindState = r, EventCenter.sendMsg(t.Event.UPDATE_FRIENDBACK_AWARD_INFO)
        }, i.prototype.onReturnAward = function (t, e) {
            var i = e.readByte();
            1 == i ? t.getReturnAwardInfo() : 2 == i ? ViewText.text("未达成") : 3 == i && ViewText.text("已领取过！")
        }, i.prototype.onInviteAward = function (t, e) {
            var i = e.readByte();
            1 == i ? t.getReturnAwardInfo() : 2 == i ? ViewText.text("未绑定玩家") : 3 == i ? ViewText.text("已领取过！") : 4 == i && ViewText.text("未达7天离线条件")
        }, i.prototype.onMissionInfo = function (e, i) {
            var o = e.getModel(t.Model);
            o.missionArr = [], o.missionAwardNotice = !1;
            for (var n = i.readShort(), a = 0; n > a; a++) {
                var s = i.readInt(),
                    r = i.readInt(),
                    l = i.readByte(),
                    h = o.getMissionConfigById(s);
                h.count = r, h.mId = s, h.state = l, o.missionArr.push(h), l == t.AwardState.CAN_GET && (o.missionAwardNotice = !0)
            }
            o.sortMissionArr(o.missionArr);
            for (var c = i.readShort(), p = [], u = 0; c > u; u++) {
                var d = i.readInt();
                p.push(d)
            }
            var f = i.readInt();
            o.friendReturnPoint = f, o.updateReturnGiftArr(o.friendReturnPoint, p), EventCenter.sendMsg(t.Event.UPDATE_MISSION_INFO)
        }, i.prototype.onRechargeInfo = function (e, i) {
            var o = e.getModel(t.Model);
            o.initRechargeArr();
            var n = i.readShort();
            o.showRechargeNotice = !1;
            for (var a = 0; n > a; a++) {
                var s = i.readInt(),
                    r = i.readByte();
                o.updateRechargeArr(s, r), r == t.AwardState.CAN_GET && (o.showRechargeNotice = !0)
            }
            o.myRecharge = i.readInt(), EventCenter.sendMsg(t.Event.UPDATE_RECHARGE_INFO)
        }, i.prototype.onCode = function (e, i) {
            var o = (e.getModel(t.Model), i.readByte());
            switch (o) {
                case t.SendCodeReturn.SUCCESS:
                    ViewText.text("绑定成功！"), EventCenter.sendMsg(t.Event.UPDATE_BIND_STATE);
                    break;
                case t.SendCodeReturn.WRONG_CODE:
                    ViewText.text("邀请码错误！");
                    break;
                case t.SendCodeReturn.HAVE_BIND:
                    ViewText.text("已有绑定玩家！");
                    break;
                case t.SendCodeReturn.NOT_AT_TIME:
                    ViewText.text("不在活动期间内！");
                    break;
                case t.SendCodeReturn.CAN_NOT_BIND_SELF:
                    ViewText.text("不能绑定自己的邀请码！");
                    break;
                default:
                    egret.warn("!!!!!!好友回归返回码异常：" + o)
            }
        }, i.prototype.onConsumeAward = function (e, i) {
            var o = (e.getModel(t.Model), i.readByte());
            switch (o) {
                case t.AwardCode.SUCCESS:
                    ViewText.text("领取成功！"), e.getConsumeInfo();
                    break;
                case t.AwardCode.NOT_ACCHIEVE:
                    ViewText.text("未满足领取条件！");
                    break;
                case t.AwardCode.HAVED_GET:
                    ViewText.text("已领取过！");
                    break;
                default:
                    egret.warn("!!!!!!好友回归返回码异常：" + o)
            }
        }, i.prototype.onBigAward = function (e, i) {
            var o = (e.getModel(t.Model), i.readByte());
            switch (o) {
                case t.AwardCode.SUCCESS:
                    e.getBigAwardInfo();
                    break;
                case t.AwardCode.NOT_ACCHIEVE:
                    ViewText.text("需要有绑定的回归玩家！");
                    break;
                case t.AwardCode.HAVED_GET:
                    ViewText.text("已领取过！");
                    break;
                default:
                    egret.warn("!!!!!!好友回归返回码异常：" + o)
            }
        }, i.prototype.onReturnBox = function (e, i) {
            var o = (e.getModel(t.Model), i.readByte());
            switch (o) {
                case t.AwardCode.SUCCESS:
                    ViewText.text("领取成功！"), e.getMissionInfo();
                    break;
                case t.AwardCode.NOT_ACCHIEVE:
                    ViewText.text("未达成！");
                    break;
                case t.AwardCode.HAVED_GET:
                    ViewText.text("已领取过！");
                    break;
                default:
                    egret.warn("!!!!!!好友回归返回码异常：" + o)
            }
        }, i.prototype.onMissionAward = function (e, i) {
            var o = (e.getModel(t.Model), i.readByte());
            switch (o) {
                case t.AwardCode.SUCCESS:
                    e.getMissionInfo();
                    break;
                case t.AwardCode.NOT_ACCHIEVE:
                    ViewText.text("未达成！");
                    break;
                case t.AwardCode.HAVED_GET:
                    ViewText.text("已领取过！");
                    break;
                default:
                    egret.warn("!!!!!!好友回归返回码异常：" + o)
            }
        }, i.prototype.onBackMissionNotice = function (e, i) {
            var o = (e.getModel(t.Model), i.readByte()),
                n = 1 == o;
            EventCenter.sendMsg(t.Event.UPDATE_MISSION_NOTICE, n)
        }, i.prototype.onFriendCallNotice = function (e, i) {
            var o = (e.getModel(t.Model), i.readByte()),
                n = 1 == o;
            EventCenter.sendMsg(t.Event.UPDATE_FRIEND_NOTICE, n)
        }, i.prototype.getCallInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_CALL_INFO, e)
        }, i.prototype.getBigAwardInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_BIG_AWARD_INFO, e)
        }, i.prototype.getRebateInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_REBATE_INFO, e)
        }, i.prototype.openRedBag = function (e) {
            var i = this.getBytes();
            i.writeInt(e), this.sendSocket(t.Protocol.OPEN_RED_BAG, i)
        }, i.prototype.getGiftInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_GIFT_INFO, e)
        }, i.prototype.openBox = function (e) {
            var i = this.getBytes();
            i.writeInt(e), this.sendSocket(t.Protocol.OPEN_BOX, i)
        }, i.prototype.getFriendList = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_FRIEND_LIST, e)
        }, i.prototype.sendReturnAwardOpen = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.SEND_RETURN_AWARD_OPEN, e)
        }, i.prototype.getReturnAwardOpen = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_RETURN_AWARD_OPEN, e)
        }, i.prototype.getReturnAwardInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_RFETURN_AWARD_INFO, e)
        }, i.prototype.getReturnAward = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_RETURN_AWARD, e)
        }, i.prototype.getInviteAward = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_INVITE_AWARD, e)
        }, i.prototype.getMissionInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_MISSION_INFO, e)
        }, i.prototype.getConsumeInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_CONSUME_INFO, e)
        }, i.prototype.sendCode = function (e) {
            var i = this.getBytes();
            i.writeUTF(e), this.sendSocket(t.Protocol.SEND_CODE, i)
        }, i.prototype.getBigAward = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_BIG_AWARD, e)
        }, i.prototype.getReturnBox = function (e) {
            var i = this.getBytes();
            i.writeInt(e), this.sendSocket(t.Protocol.GET_RETURN_BOX, i)
        }, i.prototype.getConsumeAward = function (e) {
            var i = this.getBytes();
            i.writeInt(e), this.sendSocket(t.Protocol.GET_CONSUME_AWARD, i)
        }, i.prototype.getMissionAward = function (e) {
            var i = this.getBytes();
            i.writeInt(e), this.sendSocket(t.Protocol.GET_MISSION_AWARD, i)
        }, i.prototype.getBackMissionNotice = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_BACK_MISSION_NOTICE, e)
        }, i.prototype.getFriendCallNotice = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_FRIEND_CALL_NOTICE, e)
        }, i
    }(BaseModel);
    t.Proxy = e, __reflect(e.prototype, "FriendBack.Proxy")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function () {
        function t() {}
        return t.STR = "FriendBackUI", t.FRIEND_CALL = t.STR + "FRIEND_CALL", t.FRIEND_AWARD = t.STR + "FRIEND_AWARD", t.FRIEND_REBATE = t.STR + "FRIEND_REBATE", t.FRIEND_GIFT = t.STR + "FRIEND_GIFT", t.FRIEND_RETURN_AWARD = t.STR + "FRIEND_RETURN_AWARD", t.FRIEND_RETURN_MISSION = t.STR + "FRIEND_RETURN_MISSION", t.FRIEND_RETURN_RECHARGE = t.STR + "FRIEND_RETURN_RECHARGE", t.FRIEND_RETURN = t.STR + "FRIEND_RETURN", t
    }();
    t.FriendBackUI = e, __reflect(e.prototype, "FriendBack.FriendBackUI")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.maxShowAward = 5, t.skinName = "FriendBigAwardSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.btn_get.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.updateAward()
        }, i.prototype.onTouch = function () {
            egret.getTimer() - this.time < 1e3 || (this.time = egret.getTimer(), this.getProxy(t.Proxy).getBigAward())
        }, i.prototype.update = function (e) {
            var i = e.data;
            switch (i) {
                case t.AwardState.CAN_NOT_GET:
                    this.btn_get.label = "未达成", this.btn_get.setNoticeVis(!1), this.btn_get.enabled = !1;
                    break;
                case t.AwardState.CAN_GET:
                    this.btn_get.label = "领奖", this.btn_get.setNoticeVis(!0), this.btn_get.enabled = !0;
                    break;
                case t.AwardState.IS_GET:
                    this.btn_get.label = "已领取", this.btn_get.setNoticeVis(!1), this.btn_get.enabled = !1
            }
        }, i.prototype.updateAward = function () {
            var t = Config.getConfig(canshu_143).get(55).key.split(";"),
                e = t.length;
            e > this.maxShowAward && (e = this.maxShowAward);
            var i = this.awardList.numChildren - e;
            if (i > 0)
                for (var o = 0; i > o; o++) this.awardList.removeChildAt(o), i--, o--;
            for (var o = 0; e > o; o++) {
                var n = this.awardList.getChildAt(o);
                n.setData(t[o])
            }
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addMsg(), this.time = 0, this.getProxy(t.Proxy).getBigAwardInfo()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeMsg()
        }, i.prototype.addMsg = function () {
            EventCenter.addMsg(t.Event.UPDATE_BIG_AWARD_INFO, this.update, this)
        }, i.prototype.removeMsg = function () {
            EventCenter.removeMsg(t.Event.UPDATE_BIG_AWARD_INFO, this.update, this)
        }, i
    }(BaseEUIView);
    t.FriendAwardView = e, __reflect(e.prototype, "FriendBack.FriendAwardView")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t._curst = -1, t.tabUIArr = [], t.skinName = "FriendBackViewSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            var e = this.base,
                i = GameGlobal.layerMgr;
            this.addCloseListen(e.btnClose).addCloseListen(e.btnReturn), e.createTabGroup().createPageGrp(), e.showQuestBtn(), e.btnQuest.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), i.reg(t.FriendBackUI.FRIEND_CALL, t.FriendCallView, e.pageGrp), i.reg(t.FriendBackUI.FRIEND_AWARD, t.FriendAwardView, e.pageGrp), i.reg(t.FriendBackUI.FRIEND_REBATE, t.FriendRebateView, e.pageGrp), i.reg(t.FriendBackUI.FRIEND_GIFT, t.FriendGiftView, e.pageGrp);
            var o = -1;
            o++, e.addTab("仙友召回", o, t.FriendBackUI.FRIEND_CALL), this.tabUIArr.push(t.FriendBackUI.FRIEND_CALL), o++, e.addTab("召回大奖", o, t.FriendBackUI.FRIEND_AWARD), this.tabUIArr.push(t.FriendBackUI.FRIEND_AWARD), o++, e.addTab("仙友返利", o, t.FriendBackUI.FRIEND_REBATE), this.tabUIArr.push(t.FriendBackUI.FRIEND_REBATE), o++, e.addTab("仙友回礼", o, t.FriendBackUI.FRIEND_GIFT), this.tabUIArr.push(t.FriendBackUI.FRIEND_GIFT), e.listenTabClick(this.onTbtn, this)
        }, i.prototype.onTouch = function () {
            var t = Config.getConfig(wanfasm_116).get(1132).detail;
            ViewWenHao.show(t, 24)
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t), this.addMsg(), t && this.base.getTabBySysID(t) ? this.base.setTabSelSys(t, !0) : this.base.setTabSelIdx(0, !0), this.requestNotice()
        }, i.prototype.requestNotice = function () {
            var e = this.getProxy(t.Proxy);
            e.getBigAwardInfo(), e.getRebateInfo(), e.getGiftInfo()
        }, i.prototype.onClose = function () {
            this.removeMsg(), this.setCurSt(-1)
        }, i.prototype.addMsg = function () {
            EventCenter.addMsg(t.Event.UPDATE_BIG_AWARD_INFO, this.updateBigAwardNotice, this), EventCenter.addMsg(t.Event.UPDATE_REBATE_INFO, this.updateRebateNotice, this), EventCenter.addMsg(t.Event.UPDATE_GIFT, this.updateGiftNotice, this)
        }, i.prototype.removeMsg = function () {
            EventCenter.removeMsg(t.Event.UPDATE_BIG_AWARD_INFO, this.updateBigAwardNotice, this), EventCenter.removeMsg(t.Event.UPDATE_REBATE_INFO, this.updateRebateNotice, this), EventCenter.removeMsg(t.Event.UPDATE_GIFT, this.updateGiftNotice, this)
        }, i.prototype.updateBigAwardNotice = function (e) {
            var i = e.data;
            i == t.AwardState.CAN_GET ? this.base.setNoticByIndex(1, !0) : this.base.setNoticByIndex(1, !1)
        }, i.prototype.updateRebateNotice = function (t) {
            var e = t.data;
            e.length > 0 ? this.base.setNoticByIndex(2, !0) : this.base.setNoticByIndex(2, !1)
        }, i.prototype.updateGiftNotice = function () {
            var e = this.getModel(t.Model);
            this.base.setNoticByIndex(3, e.showGiftNotice)
        }, i.prototype.onTbtn = function (t) {
            var e = t.sort;
            CFG_COMMOND.canDo(t.bindSysID) && (this.base.title = t.text, this.setCurSt(e))
        }, i.prototype.setCurSt = function (t) {
            if (this._curst != t) {
                var e = GameGlobal.layerMgr; - 1 != this._curst && e.close(this.tabUIArr[this._curst]), -1 != t && e.open(this.tabUIArr[t]), this.base.setTabSelIdx(t), this._curst = t
            }
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i
    }(BaseEUIView);
    t.FriendBackView = e, __reflect(e.prototype, "FriendBack.FriendBackView")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FriendCallSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.btnInvite.label = "分享", this.btnInvite.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this);
            var t = STD_OldFriend.getCfgByQD(AppConfig.pftype);
            this.lb_intro1.text = t.text1, this.lb_intro2.text = t.text2, this.lb_intro3.text = t.text3, this.lb_intro4.text = t.text4
        }, i.prototype.onTouch = function () {
            this.getProxy(t.Proxy).getCallInfo()
        }, i.prototype.update = function () {
            var e = this.getModel(t.Model).myInviteCode,
                i = new ShareData,
                o = STD_OldFriend.getCfgByQD(AppConfig.pftype);
            i.title = o.title, i.imgUrl = App.shareIcon, i.bgUrl = o.pic, i.content = o.text, i.ext.code = e, platform.share(i)
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t), this.addMsg()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeMsg()
        }, i.prototype.addMsg = function () {
            EventCenter.addMsg(t.Event.UPDATE_CALL_INFO, this.update, this)
        }, i.prototype.removeMsg = function () {
            EventCenter.removeMsg(t.Event.UPDATE_CALL_INFO, this.update, this)
        }, i
    }(BaseEUIView);
    t.FriendCallView = e, __reflect(e.prototype, "FriendBack.FriendCallView")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FriendGiftSkin", t
        }
        return __extends(i, e), i.prototype.init = function () {
            this.sourceData = new eui.ArrayCollection
        }, i.prototype.initView = function () {
            e.prototype.initView.call(this), this.init(), this.list.dataProvider = this.sourceData, this.list.itemRenderer = t.FriendGiftItem, this.btn_friendList.label = "仙友列表", this.btn_friendList.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
        }, i.prototype.update = function () {
            var e = this.getModel(t.Model),
                i = e.getGiftArr();
            this.sourceData.source = i, this.lb_myPoint.text = e.myFriendPoint + ""
        }, i.prototype.onTouch = function () {
            this.openView(t.FriendListView)
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addMsg(), this.getProxy(t.Proxy).getGiftInfo()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeMsg()
        }, i.prototype.addMsg = function () {
            EventCenter.addMsg(t.Event.UPDATE_GIFT, this.update, this)
        }, i.prototype.removeMsg = function () {
            EventCenter.removeMsg(t.Event.UPDATE_GIFT, this.update, this)
        }, i
    }(BaseEUIView);
    t.FriendGiftView = e, __reflect(e.prototype, "FriendBack.FriendGiftView")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FriendListSkin", t
        }
        return __extends(i, e), i.prototype.init = function () {
            this.sourceData = new eui.ArrayCollection
        }, i.prototype.initView = function () {
            e.prototype.initView.call(this), this.init(), this.list.dataProvider = this.sourceData, this.list.itemRenderer = t.FriendListItem, this.addCloseListen(this.btn_close)
        }, i.prototype.update = function (e) {
            var i = e.data;
            this.sourceData.source = i, this.lb_friendCount.text = "仙友数:" + this.getModel(t.Model).friendsCount
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addMsg(), this.getProxy(t.Proxy).getFriendList()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeMsg()
        }, i.prototype.addMsg = function () {
            EventCenter.addMsg(t.Event.UPDATE_FRIEND_LIST, this.update, this)
        }, i.prototype.removeMsg = function () {
            EventCenter.removeMsg(t.Event.UPDATE_FRIEND_LIST, this.update, this)
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i
    }(BaseEUIView);
    t.FriendListView = e, __reflect(e.prototype, "FriendBack.FriendListView")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FriendRebateSkin", t
        }
        return __extends(i, e), i.prototype.init = function () {
            this.sourceData = new eui.ArrayCollection, this.minBagCount = parseInt(Config.getConfig(canshu_143).get(60).qd)
        }, i.prototype.initView = function () {
            e.prototype.initView.call(this), this.init(), this.scroller.scrollPolicyV = eui.ScrollPolicy.OFF, this.list.dataProvider = this.sourceData, this.list.itemRenderer = t.FriendRebateItem
        }, i.prototype.update = function (e) {
            var i = e.data;
            if (i.length < this.minBagCount)
                for (var o = this.minBagCount - i.length, n = 0; o > n; n++) {
                    var a = new t.RedBagData;
                    a.name = "未达成", a.money = 0, a.time = 0, a.isEmpty = !0, i.push(a)
                }
            i.sort(function (t, e) {
                var i = t.isEmpty ? 1 : 0,
                    o = e.isEmpty ? 1 : 0;
                return t.isEmpty == e.isEmpty ? t.id - e.id : i - o
            }), this.sourceData.source = i
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addMsg(), this.getProxy(t.Proxy).getRebateInfo()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeMsg()
        }, i.prototype.addMsg = function () {
            EventCenter.addMsg(t.Event.UPDATE_REBATE_INFO, this.update, this)
        }, i.prototype.removeMsg = function () {
            EventCenter.removeMsg(t.Event.UPDATE_REBATE_INFO, this.update, this)
        }, i
    }(BaseEUIView);
    t.FriendRebateView = e, __reflect(e.prototype, "FriendBack.FriendRebateView")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.maxShowAward = 5, t.skinName = "FriendReturnAwardSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.scro.scrollPolicyV = eui.ScrollPolicy.OFF, this.sourceData = new eui.ArrayCollection, DisplayUtil.popBtnStyle(this.btGetAwards), DisplayUtil.popBtnStyle(this.btGetAwards2), DisplayUtil.popBtnStyle(this.btnLeft), DisplayUtil.popBtnStyle(this.btnRight), this.getModel(t.Model).initReturnAwardData(), this.getModel(t.Model).initInviteAwardData(), this.setInviteCodeAward(), this.list.dataProvider = this.sourceData, this.list.itemRenderer = t.FriendReturnAwardItem;
            var i = this.getModel(t.Model).friendReturnAward;
            this.sourceData.source = i, new ScrollMove(this.btnRight, this.btnLeft, this.list, "width")
        }, i.prototype.update = function () {
            this.getModel(t.Model).friendReturnState == t.FriendReturnState.HAVED_RECEIVE ? (this.btGetAwards.enabled = !1, this.btGetAwards.lbText.text = "已领取", this.btGetAwards.setNoticeVis(!1)) : (this.btGetAwards.enabled = !0, this.btGetAwards.lbText.text = "领取", this.btGetAwards.setNoticeVis(!0));
            var e = this.getModel(t.Model).inviteCodeState;
            e == t.InviteCodeState.HAVED_RECEIVE ? (this.btGetAwards2.enabled = !1, this.btGetAwards2.lbText.text = "已领取", this.btGetAwards2.setNoticeVis(!1)) : (this.btGetAwards2.enabled = !0, this.btGetAwards2.lbText.text = "领取", this.btGetAwards2.setNoticeVis(!0)), this.getModel(t.Model).inviteBindState == t.InviteBindState.HAVED_BIND ? this.btGetAwards2.visible = !0 : this.btGetAwards2.visible = !1, this.lbDays.textFlow = HtmlUtil.parse("欢迎仙友回归，您已离开" + HtmlUtil.color(this.getModel(t.Model).offlineDays, "#10a244") + "天，可领取以下奖励！")
        }, i.prototype.updateBindState = function () {
            this.getProxy(t.Proxy).getReturnAwardInfo()
        }, i.prototype.setInviteCodeAward = function () {
            var e = this.getModel(t.Model).inviteCodeAward,
                i = e.length;
            i > this.maxShowAward && (i = this.maxShowAward);
            var o = this.awardList.numChildren - i;
            if (o > 0)
                for (var n = 0; o > n; n++) this.awardList.removeChildAt(n), o--, n--;
            for (var n = 0; i > n; n++) {
                var a = this.awardList.getChildAt(n);
                a.setData(e[n])
            }
        }, i.prototype.onBtnClick = function (e) {
            var i = e.currentTarget;
            switch (i) {
                case this.btGetAwards:
                    this.getModel(t.Model).friendReturnState == t.FriendReturnState.HAVED_RECEIVE ? ViewText.text("已领取过！") : this.getProxy(t.Proxy).getReturnAward();
                    break;
                case this.btGetAwards2:
                    this.getModel(t.Model).inviteCodeState == t.InviteCodeState.HAVED_RECEIVE ? ViewText.text("已领取过！") : this.getProxy(t.Proxy).getInviteAward()
            }
        }, i.prototype.onTick = function () {
            this.timeCount > 0 ? this.timeCount-- : (TimerManager.remove(this.onTick, this), this.closeView(t.FriendReturnView))
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addMsg();
            var o = this.getProxy(t.Proxy);
            o.getReturnAwardInfo(), o.getReturnAwardOpen()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeMsg(), TimerManager.remove(this.onTick, this)
        }, i.prototype.startTime = function () {
            this.timeCount = this.getModel(t.Model).remainTime, TimerManager.doTimer(1e3, -1, this.onTick, this)
        }, i.prototype.addMsg = function () {
            EventCenter.addMsg(t.Event.UPDATE_FRIENDBACK_AWARD_INFO, this.update, this), EventCenter.addMsg(t.Event.UPDATE_BIND_STATE, this.updateBindState, this), this.btGetAwards.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btGetAwards2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), EventCenter.addMsg(t.Event.OPEN, this.startTime, this)
        }, i.prototype.removeMsg = function () {
            EventCenter.removeMsg(t.Event.UPDATE_FRIENDBACK_AWARD_INFO, this.update, this), EventCenter.removeMsg(t.Event.UPDATE_BIND_STATE, this.updateBindState, this), this.btGetAwards.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btGetAwards2.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), EventCenter.removeMsg(t.Event.OPEN, this.startTime, this)
        }, i
    }(BaseEUIView);
    t.FriendReturnAward = e, __reflect(e.prototype, "FriendBack.FriendReturnAward")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FriendReturnMissionSkin", t
        }
        return __extends(i, e), i.prototype.init = function () {
            this.sourceData = new eui.ArrayCollection, this.scro.scrollPolicyV = eui.ScrollPolicy.OFF, this.list.dataProvider = this.sourceData, this.list.itemRenderer = t.FriendMissionAwardItem, this.sourceData_mission = new eui.ArrayCollection, this.scro_mission.scrollPolicyH = eui.ScrollPolicy.OFF, this.list_mission.dataProvider = this.sourceData_mission, this.list_mission.itemRenderer = t.FriendReturnMissionItem
        }, i.prototype.initView = function () {
            e.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnLeft), DisplayUtil.popBtnStyle(this.btnRight), new ScrollMove(this.btnRight, this.btnLeft, this.list, "width"), this.init()
        }, i.prototype.update = function () {
            var e = this.getModel(t.Model),
                i = e.getReturnGiftArr();
            this.sourceData.source = i;
            var o = e.missionArr;
            this.sourceData_mission.source = o, this.lbFriendBack.textFlow = HtmlUtil.parse("当前回归点：" + HtmlUtil.color(this.getModel(t.Model).friendReturnPoint, "#10a244"))
        }, i.prototype.onTick = function () {
            this.timeCount > 0 ? this.timeCount-- : (TimerManager.remove(this.onTick, this), this.closeView(t.FriendReturnView));
            var e = DateUtils.getFormatBySecond(this.timeCount, DateFormat.MAX_UNIT);
            this.lbDays.text = e
        }, i.prototype.startTime = function () {
            this.timeCount = this.getModel(t.Model).remainTime;
            var e = DateUtils.getFormatBySecond(this.timeCount, DateFormat.MAX_UNIT);
            this.lbDays.text = e, TimerManager.doTimer(1e3, -1, this.onTick, this)
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addMsg();
            var o = this.getProxy(t.Proxy);
            o.getMissionInfo(), o.getReturnAwardOpen()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeMsg(), TimerManager.remove(this.onTick, this)
        }, i.prototype.addMsg = function () {
            EventCenter.addMsg(t.Event.UPDATE_MISSION_INFO, this.update, this), EventCenter.addMsg(t.Event.OPEN, this.startTime, this)
        }, i.prototype.removeMsg = function () {
            EventCenter.removeMsg(t.Event.UPDATE_MISSION_INFO, this.update, this), EventCenter.removeMsg(t.Event.OPEN, this.startTime, this)
        }, i
    }(BaseEUIView);
    t.FriendReturnMission = e, __reflect(e.prototype, "FriendBack.FriendReturnMission")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FriendRechargeSkin", t
        }
        return __extends(i, e), i.prototype.init = function () {
            this.sourceData = new eui.ArrayCollection
        }, i.prototype.initView = function () {
            e.prototype.initView.call(this), this.init(), this.list.dataProvider = this.sourceData, this.list.itemRenderer = t.FriendRechargeItem, this.btn_recharge.textFlow = HtmlUtil.underLine("前往充值"), this.btn_recharge.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
        }, i.prototype.onTouch = function () {
            this.openView(VRecharge)
        }, i.prototype.update = function () {
            var e = this.getModel(t.Model),
                i = e.getRechargeArr();
            this.sourceData.source = i, this.label_yuanBao.text = e.myRecharge + "元宝"
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addMsg();
            var o = this.getProxy(t.Proxy);
            o.getConsumeInfo(), o.getReturnAwardOpen()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeMsg(), TimerManager.remove(this.onTick, this);
            for (var t = this.list.numChildren, i = 0; t > i; i++) {
                var o = this.list.getChildAt(i);
                o.clearGrids()
            }
        }, i.prototype.onTick = function () {
            this.timeCount > 0 ? this.timeCount-- : (TimerManager.remove(this.onTick, this), this.closeView(t.FriendReturnView));
            var e = DateUtils.getFormatBySecond(this.timeCount, DateFormat.MAX_UNIT);
            this.label_Time.text = e
        }, i.prototype.onVip = function () {
            this.getProxy(t.Proxy).getConsumeInfo()
        }, i.prototype.startTime = function () {
            this.timeCount = this.getModel(t.Model).remainTime;
            var e = DateUtils.getFormatBySecond(this.timeCount, DateFormat.MAX_UNIT);
            this.label_Time.text = e, TimerManager.doTimer(1e3, -1, this.onTick, this)
        }, i.prototype.addMsg = function () {
            EventCenter.addMsg(t.Event.UPDATE_RECHARGE_INFO, this.update, this);
            var e = GameCtrlBase.instance;
            e.on(ModelVIP.msg_data, this.onVip, this), EventCenter.addMsg(t.Event.OPEN, this.startTime, this)
        }, i.prototype.removeMsg = function () {
            EventCenter.removeMsg(t.Event.UPDATE_RECHARGE_INFO, this.update, this);
            var e = GameCtrlBase.instance;
            e.off(ModelVIP.msg_data, this.onVip, this), EventCenter.removeMsg(t.Event.OPEN, this.startTime, this)
        }, i
    }(BaseEUIView);
    t.FriendReturnRecharge = e, __reflect(e.prototype, "FriendBack.FriendReturnRecharge")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t._curst = -1, t.tabUIArr = [], t.skinName = "FriendBackViewSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            var e = this.base,
                i = GameGlobal.layerMgr;
            this.addCloseListen(e.btnClose).addCloseListen(e.btnReturn), e.createTabGroup().createPageGrp(), e.showQuestBtn(), e.btnQuest.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), i.reg(t.FriendBackUI.FRIEND_RETURN_AWARD, t.FriendReturnAward, e.pageGrp), i.reg(t.FriendBackUI.FRIEND_RETURN_MISSION, t.FriendReturnMission, e.pageGrp), i.reg(t.FriendBackUI.FRIEND_RETURN_RECHARGE, t.FriendReturnRecharge, e.pageGrp);
            var o = -1;
            o++, e.addTab("回归奖励", o, t.FriendBackUI.FRIEND_RETURN_AWARD), this.tabUIArr.push(t.FriendBackUI.FRIEND_RETURN_AWARD), o++, e.addTab("回归任务", o, t.FriendBackUI.FRIEND_RETURN_MISSION), this.tabUIArr.push(t.FriendBackUI.FRIEND_RETURN_MISSION), o++, e.addTab("充值返利", o, t.FriendBackUI.FRIEND_RETURN_RECHARGE), this.tabUIArr.push(t.FriendBackUI.FRIEND_RETURN_RECHARGE), e.listenTabClick(this.onTbtn, this)
        }, i.prototype.onTouch = function () {
            var t = Config.getConfig(wanfasm_116).get(1131).detail;
            ViewWenHao.show(t, 24)
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), i && this.base.getTabBySysID(i) ? this.base.setTabSelSys(i, !0) : this.base.setTabSelIdx(0, !0), this.addMsg();
            var o = this.getProxy(t.Proxy);
            o.getMissionInfo(), o.getReturnAwardInfo(), o.getConsumeInfo()
        }, i.prototype.onClose = function () {
            this.setCurSt(-1), this.removeMsg()
        }, i.prototype.addMsg = function () {
            EventCenter.addMsg(t.Event.UPDATE_FRIENDBACK_AWARD_INFO, this.updateReturnAwardNotice, this), EventCenter.addMsg(t.Event.UPDATE_MISSION_INFO, this.updateMissinInfoNotice, this), EventCenter.addMsg(t.Event.UPDATE_RECHARGE_INFO, this.updateRechargeNotice, this)
        }, i.prototype.removeMsg = function () {
            EventCenter.removeMsg(t.Event.UPDATE_FRIENDBACK_AWARD_INFO, this.updateReturnAwardNotice, this), EventCenter.removeMsg(t.Event.UPDATE_MISSION_INFO, this.updateMissinInfoNotice, this), EventCenter.removeMsg(t.Event.UPDATE_RECHARGE_INFO, this.updateRechargeNotice, this)
        }, i.prototype.updateReturnAwardNotice = function () {
            var e = this.getModel(t.Model);
            e.friendReturnState == t.AwardState.CAN_GET || e.inviteCodeState == t.AwardState.CAN_GET ? this.base.setNoticByIndex(0, !0) : this.base.setNoticByIndex(0, !1)
        }, i.prototype.updateMissinInfoNotice = function () {
            var e = this.getModel(t.Model);
            e.missionAwardNotice || e.showReturnGiftNotice ? this.base.setNoticByIndex(1, !0) : this.base.setNoticByIndex(1, !1)
        }, i.prototype.updateRechargeNotice = function () {
            var e = this.getModel(t.Model);
            this.base.setNoticByIndex(2, e.showRechargeNotice)
        }, i.prototype.onTbtn = function (t) {
            var e = t.sort;
            CFG_COMMOND.canDo(t.bindSysID) && (this.base.title = t.text, this.setCurSt(e))
        }, i.prototype.setCurSt = function (t) {
            if (this._curst != t) {
                var e = GameGlobal.layerMgr; - 1 != this._curst && e.close(this.tabUIArr[this._curst]), -1 != t && e.open(this.tabUIArr[t]), this.base.setTabSelIdx(t), this._curst = t
            }
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i
    }(BaseEUIView);
    t.FriendReturnView = e, __reflect(e.prototype, "FriendBack.FriendReturnView")
}(FriendBack || (FriendBack = {}));
var FriendBack;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.grids = [], e.skinName = "FriendWatchGiftSkin", e
        }
        return __extends(e, t), e.prototype.initView = function () {
            t.prototype.initView.call(this), this.btnSure.label = "确定", this.addCloseListen(this.btnSure)
        }, e.prototype.onOpen = function (e) {
            t.prototype.onOpen.call(this, e), this.lb_value.textFlow = HtmlUtil.parse("回归点达到" + HtmlUtil.colorSize(e.point, "#10a244", 24) + "，可获得以下奖励！"), ConfigHelp.makeStrGrids(e.award, this.grids, 0, 0, this.container, !0), this.container.x = .5 * (this.container.parent.width - this.container.width)
        }, e.prototype.onClose = function () {
            t.prototype.onClose.call(this), ConfigHelp.clearGrids(this.grids)
        }, e.prototype.onSize = function () {
            this.fullStage()
        }, e
    }(BaseEUIView);
    t.FriendWatchGiftView = e, __reflect(e.prototype, "FriendBack.FriendWatchGiftView")
}(FriendBack || (FriendBack = {}));
var Model_FuLiDaTing = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.notice = function () {
        var t = GameGlobal.modelLevelGift.notice,
            e = ModelSign.SignRed(),
            i = ModelYaoQianShu.yqsRed(),
            o = VoMonthWeekKa.notice(),
            n = VoExpBack.notice();
        this.notReadGGVer();
        return t || e || i || o || n
    }, e.prototype.notReadGGVer = function () {
        var t = egret.localStorage.getItem("fuliGongGaoVer"),
            e = GameGlobal.loginArg.ver;
        return "undefined" != t || e ? GameGlobal.loginArg.ver != t : !1
    }, e.MSG_HD = "MSG_HD", e
}(BaseModel);
__reflect(Model_FuLiDaTing.prototype, "Model_FuLiDaTing");
var VFuLiDaTingIcon = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e._selected = !1, e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/fuLiDaTing/FuLiDaTingIcon.exml"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.setNotice(!1)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.v
        },
        set: function (t) {
            t && (this.v = t, this.imgIcomExml.source = t.iconURL, this.imgIconTxt.source = t.iconURL + "_txt")
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected != t && (this._selected = t, t ? this.imgSelExml.source = "FLAtlas_json.select" : this.imgSelExml.source = "FLAtlas_json.noselect")
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setNotice = function (t) {
        this.imgHDExml.visible = t
    }, e
}(ItemBase);
__reflect(VFuLiDaTingIcon.prototype, "VFuLiDaTingIcon");
var VFuLiDaTingMain = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "FuLiDaTingMain", e
    }
    return __extends(e, t), e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.base.btnReturn, 30, 30)
    }, e.prototype.guidePage = function (t) {
        var e = this.getIconRender(t);
        e && QuestGuideArrow.getIns().guideTo(e, 40, 40)
    }, e.prototype.checkPage = function (t) {
        return this.urlSys == t
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.listIconExml.dataProvider = this.sourceData, this.listIconExml.itemRenderer = VFuLiDaTingIcon, this.listIconExml.useVirtualLayout = !1;
        var e = this.base;
        e.title = "福利大厅", this.base.createTabGroup().createPageGrp(), this.addCloseListen(e.btnClose), this.addCloseListen(e.btnReturn), this.listIconExml.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onClick, this), this.initSys()
    }, e.prototype.initSys = function () {
        this.addIcon("FLAtlas_json.level", UIConst.LEVELGIFT, VLevelGiftMain), this.addIcon("FLAtlas_json.sign", UIConst.SIGNGIFT, ViewSign, CFG_COMMOND.EVERYDATSIGN), this.addIcon("FLAtlas_json.shuIcon", UIConst.YAOQIANSHU, VYaoQianShu, CFG_COMMOND.YAOQIANSHU), platform.canRechage && (this.addIcon("FLAtlas_json.yueka", UIConst.YUEKA, VYueKa, CFG_COMMOND.YUEZHOUKA), this.addIcon("FLAtlas_json.zhouka", UIConst.ZHOUKA, VZhouKa, CFG_COMMOND.YUEZHOUKA)), this.addIcon("FLAtlas_json.expBack", UIConst.EXPBACK, VExpBack, CFG_COMMOND.EXPBACK), this.addIcon("FLAtlas_json.jihuoma", UIConst.JIHUOMA, VJihuoma), this.addIcon("FLAtlas_json.gg", UIConst.FULIGONGGAO, VFuLiGongGao)
    }, e.prototype.onClick = function (t) {
        var e = t.item;
        if (!e.sysid || CFG_COMMOND.isOpen(e.sysid, !0)) {
            var i = e.uiConst;
            this.setSel(i)
        }
    }, e.prototype.addIcon = function (t, e, i, o) {
        void 0 === o && (o = null);
        var n = Vo_FuLiDaTingIcon.createIcon(t, e, o);
        this.sourceData.addItem(n), GameGlobal.layerMgr.dynamicReg(e, i, this.base.pageGrp)
    }, e.prototype.getIconRender = function (t) {
        for (var e = this.listIconExml.numChildren, i = 0; e > i; i++) {
            var o = this.listIconExml.getChildAt(i);
            if (o && o.data.uiConst == t) return o
        }
        return null
    }, e.prototype.getItemByUrl = function (t) {
        for (var e = this.sourceData.length, i = 0; e > i; i++) {
            var o = this.sourceData.getItemAt(i);
            if (o.uiConst == t) return o
        }
        return o
    }, e.prototype.addMsg = function () {
        GameGlobal.modelLevelGift.on(ModelGift.msg_notice, this.noticeLvl, this), GameGlobal.modelSign.on(ModelSign.msg_notice, this.noticeSign, this), GameGlobal.modelyaoqianshu.on(ModelYaoQianShu.msg_notice, this.YQSred, this), GameGlobal.modelyuekazhouka.on(ModelYueKaZhouka.msg_notice, this.noticeYueka, this), GameGlobal.modelyuekazhouka.on(ModelYueKaZhouka.msg_notice, this.noticeZhouka, this), GameGlobal.modelexpBack.on(ModelExpBack.msg_notice, this.noticeExpBack, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelLevelGift.off(ModelGift.msg_notice, this.noticeLvl, this), GameGlobal.modelSign.off(ModelSign.msg_notice, this.noticeSign, this), GameGlobal.modelyaoqianshu.off(ModelYaoQianShu.msg_notice, this.YQSred, this), GameGlobal.modelyuekazhouka.off(ModelYueKaZhouka.msg_notice, this.noticeYueka, this), GameGlobal.modelyuekazhouka.off(ModelYueKaZhouka.msg_notice, this.noticeZhouka, this), GameGlobal.modelexpBack.off(ModelExpBack.msg_notice, this.noticeExpBack, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setSel(e || UIConst.LEVELGIFT);
        var i = this.listIconExml.numChildren;
        0 == i ? GameGlobal.tick.addInterv(function (t) {
            t.setNotice()
        }, 100, this, !0) : this.setNotice(), this.addMsg()
    }, e.prototype.setSel = function (t) {
        this.urlSys && GameGlobal.layerMgr.close(this.urlSys), t && GameGlobal.layerMgr.open(t);
        var e = this.getItemByUrl(t);
        this.listIconExml.selectedItem = e, this.urlSys = t
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.setSel(null), this.removeMsg()
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.setNotice = function () {
        this.noticeLvl(), this.noticeSign(), this.YQSred(), this.noticeYueka(), this.noticeZhouka(), this.noticeExpBack(), this.noticGG()
    }, e.prototype.YQSred = function () {
        var t = this.getIconRender(UIConst.YAOQIANSHU);
        t && t.setNotice(ModelYaoQianShu.yqsRed())
    }, e.prototype.noticeLvl = function () {
        var t = GameGlobal.modelLevelGift.notice,
            e = this.getIconRender(UIConst.LEVELGIFT);
        e && e.setNotice(t)
    }, e.prototype.noticeYueka = function () {
        var t = this.getIconRender(UIConst.YUEKA),
            e = VoMonthWeekKa.getInst();
        t && t.setNotice(1 == e.monthGetState && 1 == e.monthState)
    }, e.prototype.noticeZhouka = function () {
        var t = this.getIconRender(UIConst.ZHOUKA),
            e = VoMonthWeekKa.getInst();
        t && t.setNotice(1 == e.weekGetState && 1 == e.weekState)
    }, e.prototype.noticeSign = function () {
        var t = this.getIconRender(UIConst.SIGNGIFT),
            e = ModelSign.SignRed();
        t && t.setNotice(e)
    }, e.prototype.noticeExpBack = function () {
        var t = VoExpBack.notice(),
            e = this.getIconRender(UIConst.EXPBACK);
        e && e.setNotice(t)
    }, e.prototype.noticGG = function () {
        var t = GameGlobal.modelFuLiDaTing.notReadGGVer(),
            e = this.getIconRender(UIConst.FULIGONGGAO);
        e && e.setNotice(t)
    }, e
}(BaseEUIView);
__reflect(VFuLiDaTingMain.prototype, "VFuLiDaTingMain");
var VFuLiGongGao = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/fuLiDaTing/FuLiGongGao.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.lb.text = Config.getConfig(updateNotice_899).get(1).detail
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), egret.localStorage.setItem("fuliGongGaoVer", GameGlobal.loginArg.ver)
    }, e
}(BaseEUIView);
__reflect(VFuLiGongGao.prototype, "VFuLiGongGao");
var Vo_FuLiDaTingIcon = function () {
    function t() {
        this.uiConst = 0
    }
    return t.createIcon = function (e, i, o) {
        void 0 === o && (o = null);
        var n = new t;
        return n.uiConst = i, n.iconURL = e, n.sysid = o, n
    }, t
}();
__reflect(Vo_FuLiDaTingIcon.prototype, "Vo_FuLiDaTingIcon");
var ItemExpBack = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/fuLiDaTing/expBack/ItemExpBackSkin.exml"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnHand.label = "找回", DisplayUtil.popBtnStyle(this.btnHand), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this);
        var e = new VoItem;
        e.init(11), this.grid.data = e, this.grid.lbCount.visible = !0, this.grid.lbCount.text = "x1000万"
    }, e.prototype.onHand = function () {
        return 0 == this.btnHand.enabled ? void ViewText.text("没有经验可以找回") : void GameGlobal.layerMgr.open(UIConst.EXPBACKTIPS, this.data)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = VoExpBack.getNameByStyle(t.style);
            this.txtType.text = e, 6 == t.style ? this.txtCount.text = t.count + "题" : this.txtCount.text = t.count + "次", t.count > 0 ? (this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!0)) : (this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1)), this.grid.lbCount.text = "x" + ConfigHelp.getNumText(t.exp)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemExpBack.prototype, "ItemExpBack");
var ModelExpBack = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1590, this.GC1590, this), e.regHand(1592, this.GC1592, this), e.regHand(1594, this.GC1594, this)
    }, e.prototype.GC1590 = function (t, i) {
        0 == VoExpBack.list.length && VoExpBack.init();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte(),
                s = i.readByte(),
                r = i.readInt(),
                l = i.readShort(),
                h = i.readShort();
            VoExpBack.update(a, s, r, l, h)
        }
        var c = i.readInt(),
            p = i.readShort(),
            u = i.readShort();
        VoExpBack.totalExp = c, VoExpBack.totalCostBYB = p, VoExpBack.totalCostYB = u, t.notify(e.msg_data), t.notice()
    }, e.prototype.CG1591 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeByte(e), this.sendSocket(1591, i)
    }, e.prototype.GC1592 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = e.readByte(),
                n = VoExpBack.updateGot(o),
                a = GameGlobal.layerMgr.getView(UIConst.EXPBACK);
            a && a.updateGot(n);
            var s = GameGlobal.layerMgr.getView(UIConst.EXPBACKTIPS);
            s && s.closeHandler(), t.notice()
        } else ViewText.text("领取失败")
    }, e.prototype.CG1593 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1593, e)
    }, e.prototype.GC1594 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = GameGlobal.layerMgr.getView(UIConst.EXPBACKTIPS);
            n && n.closeHandler(), VoExpBack.updateAllGot(), t.notify(e.msg_data), t.notice()
        } else ViewText.text("领取失败")
    }, e.prototype.notice = function () {
        this.notify(e.msg_notice)
    }, e.msg_data = "msg_data", e.msg_notice = "msg_notice", e
}(BaseModel);
__reflect(ModelExpBack.prototype, "ModelExpBack");
var VExpBack = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "VExpBackSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemExpBack, this.btnHand.label = "一键找回", DisplayUtil.popBtnStyle(this.btnHand), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), 0 == VoExpBack.list.length && VoExpBack.init()
    }, e.prototype.onHand = function () {
        return 0 == this.btnHand.enabled ? void ViewText.text("没有可领取经验") : void GameGlobal.layerMgr.open(UIConst.EXPBACKTIPS)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelexpBack.on(ModelExpBack.msg_data, this.onUpdate, this), this.onUpdate()
    }, e.prototype.onUpdate = function () {
        this.sourceData.source = VoExpBack.list, this.updateBtnState()
    }, e.prototype.updateGot = function (t) {
        this.sourceData.itemUpdated(t), this.updateBtnState()
    }, e.prototype.updateBtnState = function () {
        VoExpBack.totalExp <= 0 ? (this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1)) : (this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!0))
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelexpBack.off(ModelExpBack.msg_data, this.onUpdate, this)
    }, e
}(BaseEUIView);
__reflect(VExpBack.prototype, "VExpBack");
var VoExpBack = function () {
    function t() {
        this.exp = 0
    }
    return t.init = function () {
        if (!(t.list.length > 0)) {
            for (var e = 1; 7 >= e; e++) {
                var i = new t;
                i.style = e, i.count = 0, i.exp = 0, i.bYBCost = 0, i.ybCost = 0, t.list.push(i)
            }
            t.totalExp = 0, t.totalCostYB = 0, t.totalCostBYB = 0
        }
    }, t.update = function (e, i, o, n, a) {
        var s = t.getVoByStyle(e);
        s.style = e, s.count = i, s.exp = o, s.bYBCost = n, s.ybCost = a
    }, t.getNameByStyle = function (t) {
        switch (t) {
            case 1:
                return "组队副本";
            case 2:
                return "妖兽历练";
            case 3:
                return "组队历练";
            case 4:
                return "每日100环";
            case 5:
                return "门派副本";
            case 6:
                return "每日答题";
            case 7:
                return "经验大放送"
        }
    }, t.getVoByStyle = function (e) {
        for (var i = t.list.length, o = 0; i > o; o++) {
            var n = t.list[o];
            if (n.style == e) return n
        }
        return null
    }, t.updateGot = function (e) {
        for (var i = this.list.length, o = 0; i > o; o++) {
            var n = this.list[o];
            if (n.style == e) return t.totalExp -= n.exp, t.totalCostBYB -= n.bYBCost, t.totalCostYB -= n.ybCost, n.exp = 0, n.count = 0, n
        }
    }, t.updateAllGot = function () {
        for (var e = t.list.length, i = 0; e > i; i++) {
            var o = t.list[i];
            o.exp = 0, o.count = 0
        }
        t.totalExp = 0, t.totalCostBYB = 0, t.totalCostYB = 0
    }, t.notice = function () {
        for (var e = t.list.length, i = 0; e > i; i++) {
            var o = t.list[i];
            if (o.count > 0) return !0
        }
        return t.totalExp > 0
    }, t.list = [], t.totalExp = 0, t
}();
__reflect(VoExpBack.prototype, "VoExpBack");
var VTipsExpBack = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VTipsExpBackSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), DisplayUtil.popBtnStyle(this.btnHand1), DisplayUtil.popBtnStyle(this.btnHand2), DisplayUtil.popBtnStyle(this.btnHand3), this.btnHand1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHand2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHand3.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHand1.label = "免费找回", this.btnHand2.label = "绑元找回", this.btnHand3.label = "元宝找回"
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget,
            i = 0;
        switch (e) {
            case this.btnHand1:
                i = 0;
                break;
            case this.btnHand2:
                if (GameGlobal.modelRole.voMine.bYuanbao < this.costBYB) return void ViewText.text("绑定元宝不足");
                i = 1;
                break;
            case this.btnHand3:
                if (GameGlobal.modelRole.voMine.yuanbao < this.costYB) return void ViewText.text("元宝不足");
                i = 2
        }
        this.data ? GameGlobal.modelexpBack.CG1591(this.data.style, i) : GameGlobal.modelexpBack.CG1593(i)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.data = e;
        var i;
        e ? (i = ConfigHelp.getNumText(e.exp), this.costYB = e.ybCost, this.costBYB = e.bYBCost) : (i = ConfigHelp.getNumText(VoExpBack.totalExp), this.costYB = VoExpBack.totalCostYB, this.costBYB = VoExpBack.totalCostBYB), this.txtDes.textFlow = HtmlUtil.parse("元宝可找回经验" + HtmlUtil.color(i, "#10a244") + ", 请选择找回方式:"), this.txtYB.text = this.costYB + "", this.txtBY.text = this.costBYB + "", this.txtAwards.textFlow = HtmlUtil.parse(HtmlUtil.color("免费找回: ", "#1bb1ff") + "获得" + HtmlUtil.color("50%", "#10a244") + "的经验\n" + HtmlUtil.color("绑元找回: ", "#d53ad0") + "获得" + HtmlUtil.color("70%", "#10a244") + "的经验\n" + HtmlUtil.color("元宝找回: ", "#fff600") + "获得" + HtmlUtil.color("100%", "#10a244") + "的经验")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VTipsExpBack.prototype, "VTipsExpBack");
var VJihuoma = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.bg3.visible = !1, this.cont3.visible = !0, this.scrAwardsExml.visible = !1, this.txtDes1.text = "", this.btnJH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onJHGet, this), this.btnJH.label = "领取奖励", this.bg2.source = "FLAtlas_json.jihuomaBgTxt", DisplayUtil.popBtnStyle(this.btnget)
    }, e.prototype.onJHGet = function () {
        var t = this.txtINput.text;
        return t ? void GameGlobal.modelSign.CG1471(t) : void ViewText.text("请输入激活码")
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "FL_commonBg_png")
    }, e.prototype.onSend = function () {}, e.prototype.emptyInput = function () {
        this.txtINput.text = ""
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bg)
    }, e
}(VLevelGiftMain);
__reflect(VJihuoma.prototype, "VJihuoma");
var SkillGroupData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.count = 0, this.dataArr = [], this.isLock = !1, this.classType = 0, this.petLayer = 0, this.petLevel = 0
    }, t
}();
__reflect(SkillGroupData.prototype, "SkillGroupData");
var ModelGift = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.notice = !1, e
    }
    return __extends(e, t), e.prototype.listenServ = function (t) {
        this.socket = t;
        var e = this;
        t.regHand(1372, e.GC1372, e), t.regHand(1374, e.GC1374, e), t.regHand(1376, e.GC1376, e)
    }, e.prototype.CG1371 = function () {
        var t = this.getBytes();
        this.sendSocket(1371, t)
    }, e.prototype.GC1372 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readShort(),
                s = Vo_LevelGiftPage.getVo(a);
            s.isGet = !0
        }
        t.updateNotice(), t.notify(e.MSG_UPDATE_AWARDS), t.notify(e.msg_notice)
    }, e.prototype.CG1373 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(1373, e)
    }, e.prototype.GC1374 = function (t, e) {
        var i = e.readByte();
        5 == i ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["", "领取成功", "不存在该奖励", "等级不足", "该奖励已领取", null][i])
    }, e.prototype.GC1376 = function (t, i) {
        t.notice = !0, t.notify(e.msg_notice)
    }, e.prototype.updateNotice = function () {
        for (var t = !1, e = Vo_LevelGiftPage.awardList, i = 0; i < e.length; i++) {
            var o = e[i];
            if (o.level <= GameGlobal.modelRole.voMine.level && !o.isGet) {
                t = !0;
                break
            }
        }
        return this.notice = t
    }, e.MSG_UPDATE_AWARDS = "MSG_UPDATE_AWARDS", e.MSG_ANICOMPLETE = "ani", e.msg_notice = "msg_notice", e
}(BaseModel);
__reflect(ModelGift.prototype, "ModelGift");
var CampWarConfig = function () {
    function t() {}
    return t
}();
__reflect(CampWarConfig.prototype, "CampWarConfig");
var Vo_LevelGiftPage = function () {
    function t() {
        this.newGet = !1, this.isGet = !1
    }
    return t.create = function (e, i, o) {
        var n = new t;
        return n.id = e, n.level = i, n.awards = o, n
    }, t.init = function () {
        t.awardList.length = 0;
        for (var e in CFG_dengjilibao_158.LIB) {
            var i = CFG_dengjilibao_158.LIB[e],
                o = i.id,
                n = i.day,
                a = i.reward,
                s = t.create(o, n, a);
            t.awardList.push(s)
        }
    }, t.getVo = function (e) {
        for (var i = t.awardList, o = 0; o < i.length; o++) {
            var n = i[o];
            if (n.id == e) return n
        }
        return null
    }, t.awardList = [], t
}();
__reflect(Vo_LevelGiftPage.prototype, "Vo_LevelGiftPage");
var ModelSign = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.time_CG1471 = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(1428, i.GC1428, i), e.regHand(1422, i.GC1422, i), e.regHand(1426, i.GC1426, i), e.regHand(1472, i.GC1472, i)
    }, e.prototype.CG1421 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1421, e)
    }, e.prototype.CG1423 = function () {
        this.sendSocket(1423, this.getBytes())
    }, e.prototype.CG1425 = function () {
        this.sendSocket(1425, this.getBytes())
    }, e.prototype.GC1428 = function (t, i) {
        var o = VoSign.getInst(),
            n = i.readShort();
        if (0 == n) throw "累计登陆天数为0";
        o.allDay = Math.max(n, 1), o.curSignId = i.readByte(), o.curSignStatus = i.readByte(), o.everyStatus = i.readByte(), o.vipStatus = i.readByte(), o.czStatus = i.readByte(), t.notify(e.msg_data), t.notify(e.msg_notice)
    }, e.prototype.GC1422 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte(),
                a = i.readByte(),
                s = VoSign.getInst();
            switch (n) {
                case 1:
                    s.everyStatus = a;
                    break;
                case 2:
                    s.vipStatus = a;
                    break;
                case 3:
                    s.czStatus = a
            }
            ViewText.text("成功"), t.notify(e.msg_data), t.notify(e.msg_notice)
        } else ViewText.text("失败")
    }, e.prototype.GC1426 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = (i.readInt(), i.readInt()),
                o = i.readByte(),
                a = VoSign.getInst();
            a.curSignId = n, a.curSignStatus = o, t.notify(e.msg_data), t.notify(e.msg_notice)
        } else ViewText.text("领取失败")
    }, e.prototype.CG1471 = function (t) {
        if (!(0 != this.time_CG1471 && egret.getTimer() - this.time_CG1471 < 3e3)) {
            this.time_CG1471 = egret.getTimer();
            var e = this.getBytes();
            e.writeUTF(t), this.sendSocket(1471, e)
        }
    }, e.prototype.GC1472 = function (t, e) {
        var i = e.readByte();
        if (ViewText.text(["", "已兑换成功，请在背包中查看", "无效兑换码", "该兑换码已被使用", "你已使用过同类型"][i]), 1 == i) {
            var o = GameGlobal.layerMgr.getView(UIConst.JIHUOMA);
            o && o.emptyInput()
        }
    }, e.SignRed = function () {
        var t = VoSign.getInst(),
            e = 1 == t.curSignStatus || 1 == t.everyStatus || 1 == t.vipStatus || 1 == t.czStatus;
        return e
    }, e.msg_data = "msg_data", e.msg_notice = "msg_notice", e
}(BaseModel);
__reflect(ModelSign.prototype, "ModelSign");
var SignItem = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.gridArr = [], e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._dt
        },
        set: function (t) {
            this._dt = t;
            var e = t;
            this.lbLevelTopExml.visible = !1, this.lbHeroLvExml.visible = !1;
            var i;
            switch (e.index) {
                case 0:
                    this.lbTitleExml.text = "每日登陆可领取", i = ConfigHelp.makeVoList(CFG_dengjilibao_158.LIB4[e.id].reward1);
                    break;
                case 1:
                    this.lbTitleExml.text = "VIP可领取";
                    var o = CFG_dengjilibao_158.LIB3[e.id],
                        n = GameGlobal.modelRole.voMine.vip,
                        a = "";
                    a = n > 13 ? o.reward14 : o["reward" + (n + 1)], i = ConfigHelp.makeVoList(a);
                    break;
                case 2:
                    this.lbTitleExml.text = "充值任意金额可领取", i = ConfigHelp.makeVoList(CFG_dengjilibao_158.LIB4[e.id].reward3)
            }
            switch (ConfigHelp.makeVoGrids(i, this.gridArr, 0, 0, this.gpAwardsExml), e.status) {
                case 0:
                    this.btGetAwardsExml.enabled = !1, this.imgIsGetedExml.visible = !1, this.btGetAwardsExml.visible = !0;
                    break;
                case 1:
                    this.btGetAwardsExml.enabled = !0, this.imgIsGetedExml.visible = !1, this.btGetAwardsExml.visible = !0;
                    break;
                case 2:
                    this.btGetAwardsExml.visible = !1, this.imgIsGetedExml.visible = !0
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onTouchHandler = function () {
        return this.btGetAwardsExml.enabled ? void GameGlobal.modelSign.CG1421(this.data.index + 1) : void ViewAlert.show("未充值任意金额，是否前往充值？", function () {
            platform.openRecharge()
        })
    }, e
}(GiftItem);
__reflect(SignItem.prototype, "SignItem");
var ViewSign = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/fuLiDaTing/levelGift/LevelGiftMain.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.imgtxt = new ImageText, this.imgtxt.container = this.txtDay, this.imgtxt.charFunc = ImageText.STRFUNC, this.cont3.visible = !1, this.allDts = [];
        for (var t = 0; 3 > t; t++) {
            var e = new VoSignStatus;
            e.index = t, this.allDts.push(e)
        }
        this.grid.visible = this.btnget.visible = !0, this.txtDes1.textFlow = HtmlUtil.parse(HtmlUtil.color("每天登陆游戏即可领取丰厚奖励哦", "#f6eada")), this.btnget.label = "领取", this.bg2.visible = !1, this.txtDes2.visible = !0, this.btnget.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.list.itemRenderer = SignItem, this.list.dataProvider = this.listDataAC = new eui.ArrayCollection
    }, e.prototype.onSend = function () {
        GameGlobal.modelSign.CG1423(), GameGlobal.modelSign.on(ModelSign.msg_data, this.onUpdate, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onSend(), IconUtil.setIconSrc(this.bg, "FL_commonBg_png")
    }, e.prototype.onHand = function () {
        this.btnget.enabled && GameGlobal.modelSign.CG1425()
    }, e.prototype.onUpdate = function () {
        var t = VoSign.getInst();
        this.imgtxt.setText(CFG_dengjilibao_158.LIB2[Math.min(t.curSignId, t.maxLeiji)].count.toString()), this.txtDes3.text = "累计登陆" + t.allDay + "天";
        var e = CFG_dengjilibao_158.LIB2[Math.min(t.curSignId, t.maxLeiji)],
            i = ConfigHelp.makeVoList(e.reward),
            o = i[0];
        this.grid.data = o, this.grid.imgIcon.source = "FLAtlas_json.signIcon", 1 == t.curSignStatus ? this.btnget.enabled = !0 : this.btnget.enabled = !1, this.reflash()
    }, e.prototype.reflash = function () {
        var t = VoSign.getInst(),
            e = this.allDts[0],
            i = t.allDay % 7 >> 0;
        t.allDay % 7 == 0 && (i = 7), e.id = Math.min(i, t.maxevery), e.status = t.everyStatus, e = this.allDts[1], e.id = Math.min(i, t.maxvip), e.status = t.vipStatus, e = this.allDts[2], e.id = Math.min(i, t.maxevery), e.status = t.czStatus, DisplayUtil.fillDataAC(this.listDataAC, this.allDts)
    }, e.prototype.onClose = function () {
        GameGlobal.modelSign.off(ModelSign.msg_data, this.onUpdate, this), IconUtil.setIconSrc(this.bg)
    }, e
}(BaseEUIView);
__reflect(ViewSign.prototype, "ViewSign");
var VoSign = function () {
    function t() {
        var t;
        t = Object.keys(CFG_dengjilibao_158.LIB2).length, this.maxLeiji = t, t = Object.keys(CFG_dengjilibao_158.LIB4).length, this.maxevery = t, t = Object.keys(CFG_dengjilibao_158.LIB3).length, this.maxvip = t
    }
    return t.getInst = function () {
        return t._inst || (t._inst = new t), t._inst
    }, t
}();
__reflect(VoSign.prototype, "VoSign");
var VoSignStatus = function () {
    function t() {}
    return t
}();
__reflect(VoSignStatus.prototype, "VoSignStatus");
var ModelYaoQianShu = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.numNowY = -1, e.numGots = [], e.numBoom = -1, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1402, this.GC1402, this), e.regHand(1404, this.GC1404, this), e.regHand(1406, this.GC1406, this)
    }, e.prototype.CG1401 = function () {
        var t = this.getBytes();
        this.sendSocket(1401, t)
    }, e.prototype.CG1403 = function () {
        var t = this.getBytes();
        this.sendSocket(1403, t)
    }, e.prototype.CG1405 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(1405, e)
    }, e.prototype.GC1402 = function (t, i) {
        var o = 200;
        GameGlobal.modelyaoqianshu.numNowY = i.readShort(), o = i.readShort(), GameGlobal.modelyaoqianshu.numGots = [];
        for (var n = 0; o > n; n++) {
            var a = i.readShort();
            GameGlobal.modelyaoqianshu.numGots.push(a)
        }
        GameGlobal.modelyaoqianshu.notify(e.SETDATA), t.notify(e.msg_notice)
    }, e.prototype.GC1404 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                GameGlobal.modelyaoqianshu.numNowY = i.readShort(), GameGlobal.modelyaoqianshu.numBoom = i.readByte(), GameGlobal.modelyaoqianshu.notify(e.SETDATA), GameGlobal.modelyaoqianshu.notify(e.YAOQIAN), t.notify(e.msg_notice);
                break;
            case 2:
                var n = GameGlobal.modelyaoqianshu.numNowY,
                    a = parseInt(e.setnJl()[2]);
                n == a ? ViewText.text("摇钱次数已达上限") : ViewText.text("没有那么多摇钱次数,请提升VIP获取更多次数");
                break;
            case 3:
                ViewText.text("摇钱次数已达上限");
                break;
            case 4:
                platform.askOpenRecharge(function () {
                    GameGlobal.layerMgr.close(UIConst.FULIDATING)
                });
                break;
            case 5:
                ViewText.text("铜币已达上限")
        }
    }, e.prototype.GC1406 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                i.readShort();
                GameGlobal.modelyaoqianshu.notify(e.SETDATA1), t.notify(e.msg_notice);
                break;
            case 2:
                ViewText.text("没有对应的奖励");
                break;
            case 3:
                ViewText.text("摇钱次数不足");
                break;
            case 4:
                ViewText.text("已经领取过该奖励");
                break;
            case 5:
                ViewText.text("背包不够")
        }
    }, e.setnJl = function () {
        var t = CFG_YAOQIANSHUJL.LIB,
            e = [];
        for (var i in t) e.push(i);
        return e
    }, e.setJl = function (t) {
        var e = CFG_YAOQIANSHUJL.LIB;
        for (var i in e)
            if (i == t) return e[i].jl
    }, e.prototype.isHaveGot = function (t) {
        for (var e = GameGlobal.modelyaoqianshu.numGots, i = 0; i < e.length; i++)
            if (t == e[i]) return !0;
        return !1
    }, e.setXh = function (t) {
        var e = CFG_YAOQIANSHUXH2.LIB,
            i = (t + 1).toString();
        for (var o in e)
            if (o == i) {
                var n = e[o].xh;
                return n = n.split(","), 1 == n.length ? n[0] : n.pop()
            } return ""
    }, e.yqsRed = function () {
        for (var t = GameGlobal.modelyaoqianshu.numNowY, i = e.setnJl(), o = !1, n = 0; n < i.length; n++) {
            var a = parseInt(i[n]);
            if (!(t >= a)) break;
            o = GameGlobal.modelyaoqianshu.isHaveGot(a) ? !1 : !0
        }
        return 0 == t || 1 == o ? !0 : 0 == o ? !1 : void 0
    }, e.SETDATA = "SETDATA", e.SETDATA1 = "SETDATA1", e.YAOQIAN = "YAOQIAN", e.msg_notice = "msg_notice", e
}(BaseModel);
__reflect(ModelYaoQianShu.prototype, "ModelYaoQianShu");
var VYaoQianShu_gift = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.numY = -1, e.yaoIcons = [], e.skinName = "resource/eui_skins/game/fuLiDaTing/YaoQianShu/YaoQianShu_gift.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnReturn), this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnClose), this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnGetT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelyaoqianshu.on(ModelYaoQianShu.SETDATA1, this.dataT, this), this.numY = parseInt(e), this.L_text.text = "今天使用摇钱树" + e + "次，可达成目标奖励";
        for (var i, o = ConfigHelp.makeVoList(ModelYaoQianShu.setJl(e)), n = [], a = 0; a < o.length; a++) i = VYaoQianShu_Icon.create(), this.container.addChild(i), i.setDatas(o[a]), i.x = a * i.width, n.push(i);
        VYaoQianShu_Icon.VYaoQianShu_IconList = n, this.setBtnVis()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelyaoqianshu.off(ModelYaoQianShu.SETDATA1, this.dataT, this)
    }, e.prototype.btnGetT = function () {
        GameGlobal.modelyaoqianshu.CG1405(this.numY)
    }, e.prototype.dataT = function () {
        this.btn_bg.source = "CM1_json.disabled2", this.btn_text.text = "已领取", this.btn_red.visible = !1, GameGlobal.modelyaoqianshu.CG1401(), GameGlobal.tick.addInterv(function () {
            GameGlobal.layerMgr.close(UIConst.YAOQIANSHUJL)
        }, 500, this, !0)
    }, e.prototype.setBtnVis = function () {
        var t = GameGlobal.modelyaoqianshu.isHaveGot(this.numY),
            e = GameGlobal.modelyaoqianshu.numNowY;
        t ? (this.btn_bg.source = "CM1_json.disabled2", this.btn_text.text = "已领取", this.btn_red.visible = !1) : e >= this.numY ? (this.btn_bg.source = "CM1_json.BT_g2_up", this.btn_text.text = "领取", this.btn_red.visible = !0) : (this.btn_bg.source = "CM1_json.disabled2", this.btn_text.text = "领取", this.btn_red.visible = !1)
    }, e
}(BaseEUIView);
__reflect(VYaoQianShu_gift.prototype, "VYaoQianShu_gift");
var VYaoQianShu_Icon = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/fuLiDaTing/YaoQianShu/YaoQianShu_Icon.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.item = ViewGrid.create(), this.container.addChild(this.item), this.item.enableTip()
    }, e.create = function () {
        if (0 == e.VYaoQianShu_IconList.length) {
            var t = new e;
            return t
        }
        return e.VYaoQianShu_IconList.shift()
    }, e.prototype.setDatas = function (t) {
        this.T_name.text = t.name, this.item.setData(t)
    }, e.VYaoQianShu_IconList = [], e
}(BaseEUIView);
__reflect(VYaoQianShu_Icon.prototype, "VYaoQianShu_Icon");
var VYaoQianShu = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.njlList = [], e.skinName = "resource/eui_skins/game/fuLiDaTing/YaoQianShu/YaoQianShu.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnYin.setType(2), this.btnGold.setType(3), this.njlList = ModelYaoQianShu.setnJl(), this.setBtnText(), this.btnYao.label = "摇一摇", this.btnTong.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnYin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnGold.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.upVip.addEventListener(egret.TouchEvent.TOUCH_TAP, this.vipT, this), this.btnYao.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnYaoT, this)
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnTong:
                var i = 0;
                break;
            case this.btnYin:
                i = 1;
                break;
            case this.btnGold:
                i = 2
        }
        GameGlobal.layerMgr.open(UIConst.YAOQIANSHUJL, this.njlList[i])
    }, e.prototype.setBtnText = function () {
        this.btnTong.setText(this.njlList[0] + "次"), this.btnYin.setText(this.njlList[1] + "次"), this.btnGold.setText(this.njlList[2] + "次")
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelyaoqianshu.on(ModelYaoQianShu.SETDATA, this.dataT, this), GameGlobal.modelyaoqianshu.on(ModelYaoQianShu.YAOQIAN, this.yaoQianT, this), GameGlobal.modelyaoqianshu.CG1401(), IconUtil.setIconSrc(this.bgg, "FL_shu_png")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelyaoqianshu.off(ModelYaoQianShu.SETDATA, this.dataT, this), GameGlobal.modelyaoqianshu.off(ModelYaoQianShu.YAOQIAN, this.yaoQianT, this), IconUtil.setIconSrc(this.bgg)
    }, e.prototype.vipT = function () {
        GameGlobal.layerMgr.open(UIConst.VIEWVIP)
    }, e.prototype.btnYaoT = function () {
        GameGlobal.modelyaoqianshu.CG1403()
    }, e.prototype.yaoQianT = function () {
        EffectMgr.addEff("uieff/yaoqian", this.texiao, 50, 25, 1e3, 1e3), EffectMgr.addEff("uieff/yaoqian", this.texiao, 150, 200, 1e3, 1e3), EffectMgr.addEff("uieff/yaoqian", this.texiao, 250, 50, 1e3, 1e3), EffectMgr.addEff("uieff/yaoqian", this.texiao, 450, 100, 1e3, 1e3)
    }, e.prototype.dataT = function () {
        this.getProgress();
        var t = this.leastYl(),
            e = GameGlobal.modelyaoqianshu.numNowY.toString();
        this.setText(t, e), this.baoJiShow()
    }, e.prototype.setText = function (t, e) {
        this.yin_num.textFlow = [{
            text: "最少获得",
            style: {
                textColor: 9643807
            }
        }, {
            text: t,
            style: {
                textColor: 1090116
            }
        }, {
            text: "银两",
            style: {
                textColor: 9643807
            }
        }], e == this.njlList[2] ? this.useNum.textColor = 14025236 : this.useNum.textColor = 1090626, this.useNum.text = "(今天使用次数:" + e + "/" + this.njlList[2] + ")";
        var i = ModelYaoQianShu.setXh(parseInt(e));
        this.setXhVis(i);
        var o = GameGlobal.modelRole.voMine.yuanbao;
        o < parseInt(i) ? this.yb_xh.textColor = 14025236 : this.yb_xh.textColor = 14380861
    }, e.prototype.setXhVis = function (t) {
        "" == t ? (this.yb_xh.visible = !1, this.yb_icon.visible = !1, this.xh_text.visible = !0, this.xh_text.text = "摇钱次数已满", this.btnYao.setNoticeVis(!1)) : "0" == t ? (this.yb_xh.visible = !1, this.yb_icon.visible = !1, this.xh_text.visible = !0, this.xh_text.text = "首次免费", this.btnYao.setNoticeVis(!0)) : (this.yb_xh.text = "x" + t, this.yb_xh.visible = !0, this.yb_icon.visible = !0, this.xh_text.visible = !0, this.xh_text.text = "消耗:", this.btnYao.setNoticeVis(!1))
    }, e.prototype.leastYl = function () {
        var t = GameGlobal.modelRole.voMine.level,
            e = CFG_YAOQIANSHUXH.LIB;
        for (var i in e)
            if (i == t.toString()) {
                var o = e[i].yl.toString();
                return o
            }
    }, e.prototype.getProgress = function () {
        for (var t = GameGlobal.modelyaoqianshu, e = t.numNowY, i = 0; i < this.njlList.length; i++) {
            var o = parseInt(this.njlList[i]);
            if (!(e >= o)) break;
            var n = t.isHaveGot(o);
            n ? this.switGot(n, i) : this.switGot(n, i)
        }
        this.progress.width = e / parseInt(this.njlList[2]) * this.g_progress.width
    }, e.prototype.switGot = function (t, e) {
        switch (e) {
            case 0:
                this.btnTong.hasGet = t, this.btnTong.setNoticeVis(!t);
                break;
            case 1:
                this.btnYin.hasGet = t, this.btnYin.setNoticeVis(!t);
                break;
            case 2:
                this.btnGold.hasGet = t, this.btnGold.setNoticeVis(!t)
        }
    }, e.prototype.baoJiShow = function () {
        var t = GameGlobal.modelyaoqianshu.numBoom;
        1 >= t ? this.baoji.visible = !1 : t > 1 && (10 == t ? this.baoJiNum.width = 31 : this.baoJiNum.width = 19, this.baoji.visible = !0, egret.Tween.removeTweens(this.baoji), this.baoji.alpha = 0, this.baoJiNum.source = "FLFTyqsbj_json." + t.toString(), this.baoji.y = 290, egret.Tween.get(this.baoji).to({
            alpha: 1,
            y: 275
        }, 700, egret.Ease.circOut).to({
            alpha: 0
        }, 700, egret.Ease.circIn), GameGlobal.modelyaoqianshu.numBoom = 0)
    }, e
}(BaseEUIView);
__reflect(VYaoQianShu.prototype, "VYaoQianShu");
var ItemYueka = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/fuLiDaTing/yuekaZhouka/ItemYuekaSkin.exml"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this.setData(t)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setData = function (t) {
        this._data = t, this._data = t, this.txtName.text = t.name, t.des.length < 3 ? DisplayUtil.remove(this.itemTxt2) : DisplayUtil.addBy(this.itemTxt2, this.txtGroup);
        for (var e = 0; e < t.des.length; e++) {
            var i = t.des[e],
                o = this["txt" + e];
            o.textFlow = HtmlUtil.parse(i)
        }
        switch (t.type) {
            case 1:
                this.iconType.source = "yueKaAtlas_json.yuanbao";
                break;
            case 2:
                this.iconType.source = "yueKaAtlas_json.yinbiExp";
                break;
            case 3:
                this.iconType.source = "yueKaAtlas_json.bag"
        }
    }, e
}(ItemBase);
__reflect(ItemYueka.prototype, "ItemYueka");
var ItemZhouka = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemZhoukaSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.iconType.source = "yueKaAtlas_json.yuanbao2";
            for (var e = 0; e < t.des.length; e++) {
                var i = t.des[e],
                    o = this["txt" + e];
                o.textFlow = HtmlUtil.parse(i)
            }
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemZhouka.prototype, "ItemZhouka");
var ModelYueKaZhouka = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1920, this.GC1920, this), e.regHand(1922, this.GC1922, this), e.regHand(1924, this.GC1924, this), e.regHand(1926, this.GC1926, this)
    }, e.prototype.GC1920 = function (t, i) {
        var o = i.readByte(),
            n = i.readShort(),
            a = i.readByte(),
            s = i.readByte(),
            r = i.readInt(),
            l = i.readByte(),
            h = VoMonthWeekKa.getInst();
        h.monthState = o, h.monthLeftDay = n, h.monthGetState = a, h.weekState = s, h.weekLeftDay = r, h.weekGetState = l, t.updateNotice(), t.notify(e.msg_monthWeedka)
    }, e.prototype.CG1921 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1921, e)
    }, e.prototype.GC1922 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = e.readByte();
            1 == o ? ViewText.text("恭喜你，购买了高贵的月卡特权") : ViewText.text("恭喜你，购买了高贵的周卡特权")
        } else ViewText.text("购买失败")
    }, e.prototype.GC1924 = function (t, i) {
        var o = i.readByte(),
            n = VoMonthWeekKa.getInst();
        switch (o) {
            case 1:
                n.monthState = 0, n.monthGetState = 0;
                break;
            case 2:
                n.weekState = 0, n.weekGetState = 0
        }
        t.updateNotice(), t.notify(e.msg_monthWeedka)
    }, e.prototype.CG1925 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1925, e)
    }, e.prototype.GC1926 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte(),
                a = VoMonthWeekKa.getInst();
            switch (n) {
                case 1:
                    a.monthGetState = 2;
                    break;
                case 2:
                    a.weekGetState = 2
            }
            t.updateNotice(), t.notify(e.msg_monthWeedka)
        } else ViewText.text("领取失败")
    }, e.prototype.updateNotice = function () {
        this.notify(e.msg_notice);
        var t = GameGlobal.layerMgr.getView(UIConst.HEADUI);
        t && t.updateZhouYueKa()
    }, e.msg_monthWeedka = "msg_monthDayka", e.msg_notice = "msg_notice", e
}(BaseModel);
__reflect(ModelYueKaZhouka.prototype, "ModelYueKaZhouka");
var VoMonthWeekKa = function () {
    function t() {}
    return t.getInst = function () {
        return t._inst || (t._inst = new t), t._inst
    }, t.notice = function () {
        var e = t.getInst();
        return platform.canRechage && 1 == e.monthGetState && 1 == e.monthState || 1 == e.weekGetState && 1 == e.weekState
    }, t
}();
__reflect(VoMonthWeekKa.prototype, "VoMonthWeekKa");
var CFG_Act = function () {
    function t() {}
    return t
}();
__reflect(CFG_Act.prototype, "CFG_Act");
var VZhouKa = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "VZhoukaSkin"
    }, e.prototype.initData = function () {
        var t = [{
            type: 1,
            name: "元宝领不停",
            des: ["<font size='22' color='#684c43'>购买立即领取</font><font size='24' color='#ea6401'> 380元宝</font>", "<font size='22' color='#684c43'>第二天起每天可领</font><font size='24' color='#ea6401'> 200元宝</font>", "<font size='22' color='#684c43'>第七天领取</font><font size='24' color='#ea6401'> 500元宝</font>", "<font size='24' color='#684c43'>总共领取</font><font size='30' color='#ea6401'> 1880元宝</font>"]
        }];
        this.container.itemRenderer = ItemZhouka, this.container.dataProvider = this.sourceData, this.sourceData.source = t
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this)
    }, e.prototype.onBuy = function () {
        MyPlatform.getIns().isAndroid() ? platform.recharge(34638) : platform.recharge(34639)
    }, e.prototype.onGet = function () {
        0 != this.btnGet.enabled && GameGlobal.modelyuekazhouka.CG1925(2)
    }, e.prototype.onXufei = function () {
        this.onBuy()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e)
    }, e.prototype.updateState = function () {
        var t = VoMonthWeekKa.getInst(),
            e = t.weekState,
            i = t.weekGetState,
            o = t.weekLeftDay;
        if (this.txtLeft.size = 24, this.txtLeft.textColor = 6835267, this.txtLeft.textFlow = HtmlUtil.parse("剩余" + HtmlUtil.color(o, "#ff0000") + "天"), 1 == e) switch (this.btnBuy.visible = !1, this.btnXufei.visible = !0, this.btnGet.visible = !0, this.txtLeft.visible = !0, i) {
            case 0:
                this.btnGet.enabled = !1, this.btnGet.label = "不可领取", this.btnGet.setNoticeVis(!1);
                break;
            case 1:
                this.btnGet.enabled = !0, this.btnGet.label = "领取", this.btnGet.setNoticeVis(!0);
                break;
            case 2:
                this.btnGet.enabled = !1, this.btnGet.label = "已领取", this.btnGet.setNoticeVis(!1)
        } else this.btnBuy.visible = !0, this.btnGet.visible = !1, this.btnXufei.visible = !1, this.txtLeft.visible = !1
    }, e
}(VYueKa);
__reflect(VZhouKa.prototype, "VZhouKa");
var FWorld;
! function (t) {
    var e = function (e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.registUI = function () {
            var e = GameGlobal.layerMgr;
            e.reg(UIConst.F_WORLD, t.FWorldView, e.UI_MainMiddle, 1), e.regView(InstanceZonesRankView, e.UI_MainMiddle, 1), e.regView(t.ResetView, e.UI_MainMiddle, 1), e.regView(t.BattleResultView, e.UI_MainMiddle, 1), e.regView(Award.PokerAwardView, e.UI_Message, 1), e.regView(t.SelectBuffView, e.UI_Message, 1)
        }, i.prototype.registProxys = function () {
            var e = GameGlobal.socketMgr;
            this.registSingleProxy(t.Proxy, e)
        }, i.prototype.addMsgListeners = function () {
            var t = GameCtrlBase.instance;
            t.on(ModelBattle.GC_504, this.onEndBattle, this), t.on(ModelBattle.MSG_BATTLE_BEGIN, this.onStartBattle, this)
        }, i.prototype.removeMsgListeners = function () {
            var t = GameCtrlBase.instance;
            t.off(ModelBattle.GC_504, this.onEndBattle, this), t.off(ModelBattle.MSG_BATTLE_BEGIN, this.onStartBattle, this)
        }, i.prototype.onStartBattle = function (e) {
            e.type == ModelBattle.BT_F_WORLD && (this.getModel(t.Model).isWin = e.isMineWin(), GameGlobal.layerMgr.closePnlByType(1))
        }, i.prototype.onEndBattle = function (e) {
            var i = this.getModel(t.Model),
                o = this.getProxy(t.Proxy);
            if (e == ModelBattle.BT_F_WORLD) {
                if (i.isWin)
                    if (i.isTurnCard) {
                        var n = new PockerWindowData;
                        n.callback = function () {
                            o.turnCard(i.currentLevel)
                        }, n.thisObj = this, n.eventMsg = t.Event.UPDATE_TURN_CARD, this.openView(Award.PokerAwardView, n)
                    } else this.openView(t.BattleResultView);
                this.openView(t.FWorldView)
            }
        }, i
    }(UIAndProxyBaseCtr);
    t.FWorldCtr = e, __reflect(e.prototype, "FWorld.FWorldCtr")
}(FWorld || (FWorld = {}));
var FWorld;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FWorldMonsterComponentSkin", t
        }
        return __extends(i, e), i.prototype.childrenCreated = function () {
            e.prototype.childrenCreated.call(this), this.touchChildren = !1, this.uirole = UIRole.create(), this.partContainer.addChild(this.uirole)
        }, i.prototype.setData = function (e) {
            if (!e) return void this.stop();
            this._data = e, this.lb_level.text = "第" + e.level + "层", this.iconTongGuan.visible = e.isPass;
            var i = e.modelId;
            GameCtrlBase.instance.getModel(t.Model);
            this.uirole.setMonsterID(i, !0), this.uirole.setWay(3), this.uirole.validParts(), this.uirole.play()
        }, i.prototype.stop = function () {
            this.uirole.stopAndClear()
        }, i
    }(eui.Component);
    t.FWorldMonsterComponent = e, __reflect(e.prototype, "FWorld.FWorldMonsterComponent")
}(FWorld || (FWorld = {}));
var FWorld;
! function (t) {
    var e = function () {
        function t() {
            this.init()
        }
        return t.prototype.init = function () {
            this.id = 0, this.level = 0, this.attribute = 0, this.type = 0, this.description = "", this.supportSuperposition = !1, this.icon = "", this.effSource = ""
        }, t
    }();
    t.BuffData = e, __reflect(e.prototype, "FWorld.BuffData")
}(FWorld || (FWorld = {}));
var FWorld;
! function (t) {
    var e = function () {
        function t() {
            this.init()
        }
        return t.prototype.init = function () {
            this.level = 0, this.isPass = !1, this.modelId = 0, this.reward = "", this.id = 0, this.nextId = 0, this.isTurnCard = !1
        }, t
    }();
    t.MonsterData = e, __reflect(e.prototype, "FWorld.MonsterData")
}(FWorld || (FWorld = {}));
var FWorld;
! function (t) {
    var e;
    ! function (t) {
        t[t.GET_FWORLD_INFO = 4731] = "GET_FWORLD_INFO", t[t.ON_FWORLD_INFO = 4732] = "ON_FWORLD_INFO", t[t.RESET = 4733] = "RESET", t[t.ON_RESET = 4734] = "ON_RESET", t[t.BATTLE = 4735] = "BATTLE", t[t.ON_BATTLE = 4736] = "ON_BATTLE", t[t.TURN_CARD = 4737] = "TURN_CARD", t[t.ON_TURN_CARD = 4738] = "ON_TURN_CARD", t[t.GET_RANK_INFO = 4739] = "GET_RANK_INFO", t[t.ON_RANK_INFO = 4740] = "ON_RANK_INFO"
    }(e = t.Protocol || (t.Protocol = {}));
    var i;
    ! function (t) {
        t[t.SUCCESS = 1] = "SUCCESS", t[t.IS_ALL_PASS = 2] = "IS_ALL_PASS", t[t.BEFORE_LEVEL_NOT_PASS = 3] = "BEFORE_LEVEL_NOT_PASS", t[t.IS_PASSED = 4] = "IS_PASSED", t[t.FAILD = 5] = "FAILD", t[t.IS_TURN_CARD_LEVEL = 6] = "IS_TURN_CARD_LEVEL", t[t.NEED_RESET = 7] = "NEED_RESET", t[t.IS_COLD = 8] = "IS_COLD", t[t.SETTLEMENT_TIME = 9] = "SETTLEMENT_TIME"
    }(i = t.Code || (t.Code = {}));
    var o;
    ! function (t) {
        t[t.BATTLE = 0] = "BATTLE", t[t.RESET = 1] = "RESET"
    }(o = t.BattleBtnState || (t.BattleBtnState = {}));
    var n;
    ! function (t) {
        t[t.SUCCESS = 1] = "SUCCESS", t[t.NO_RESET_COUNT = 2] = "NO_RESET_COUNT", t[t.OVER_RESET_COUNT = 3] = "OVER_RESET_COUNT", t[t.NOT_ENOUGH_MONEY = 4] = "NOT_ENOUGH_MONEY"
    }(n = t.ResetCode || (t.ResetCode = {}));
    var a;
    ! function (t) {
        t[t.SUCCESS = 1] = "SUCCESS", t[t.HAVED_TURN = 2] = "HAVED_TURN", t[t.NOT_TURN_LEVEL = 3] = "NOT_TURN_LEVEL", t[t.BAG_FULL = 4] = "BAG_FULL"
    }(a = t.TurnCardCode || (t.TurnCardCode = {}));
    var s;
    ! function (t) {
        t[t.HAVE = 0] = "HAVE", t[t.NOT_HAVE = 1] = "NOT_HAVE"
    }(s = t.HaveFreeCount || (t.HaveFreeCount = {}))
}(FWorld || (FWorld = {}));
var FWorld;
! function (t) {
    var e = function () {
        function t() {}
        return t.STR = "FWorld_", t.UPDATE_FWORLD_INFO = t.STR + "UPDATE_FWORLD_INFO", t.UPDATE_TURN_CARD = t.STR + "UPDATE_TURN_CARD", t.UPDATE_RANK_INFO = t.STR + "UPDATE_RANK_INFO", t.SELECTED_BUFF = t.STR + "SELECTED_BUFF", t.ADD_BUFF = t.STR + "ADD_BUFF", t.START_AUTO_BATTLE = t.STR + "START_AUTO_BATTLE", t
    }();
    t.Event = e, __reflect(e.prototype, "FWorld.Event")
}(FWorld || (FWorld = {}));
var FWorld;
! function (t) {
    var e = function (e) {
        function i() {
            var i = e.call(this) || this;
            return i.maxMonsterCount = 5, i.highestLevel = 0, i.currentLevel = 0, i.remainResetCount = 0, i.remainBloodPercent = 0, i._monsterArr = new Dictionary, i.currentMonsterArr = [], i.canBattleLevel = 0, i.isWin = !1, i.remainFreeResetCount = 0, i.resetState = t.BattleBtnState.BATTLE, i.isTurnCard = !1, i._buffArr = [], i.maxLevel = 0, i.isAutoBattle = !1, i
        }
        return __extends(i, e), i.prototype.getMonsterArr = function () {
            if (!this._monsterArr.length) {
                var e = Config.getConfig(fWorld_770).values.concat();
                e.sort(function (t, e) {
                    return t.number - e.number
                });
                for (var i = 0; i < e.length; i++) {
                    var o = e[i],
                        n = new t.MonsterData;
                    n.level = o.number, n.modelId = o.monster, n.reward = o.reward, n.id = o.id, n.nextId = o.next, n.isTurnCard = o.card ? !0 : !1, 0 == o.next && (this.maxLevel = o.number), this._monsterArr.set(o.number, n)
                }
            }
            return this._monsterArr
        }, i.prototype.getCanBattleLevel = function () {
            if (0 == this.currentLevel) return 1;
            var t = this.getMonsterArr().get(this.currentLevel);
            if (t) {
                var e = t.nextId,
                    i = this.isAllPass();
                if (i) return null;
                var o = Config.getConfig(fWorld_770).get(e).number;
                return o
            }
            console.error("！！！！！！错误的层数:" + this.currentLevel)
        }, i.prototype.isAllPass = function () {
            this.getMonsterArr();
            return this.currentLevel == this.maxLevel ? !0 : !1
        }, i.prototype.getBuffArr = function () {
            if (!this._buffArr.length)
                for (var e = Config.getConfig(fWorldbuff_772).values, i = 0; i < e.length; i++) {
                    var o = e[i],
                        n = new t.BuffData;
                    n.id = o.id, n.level = o.number, n.attribute = o.attribute, n.type = o.type, n.effSource = o.buff, n.description = o.reward, n.supportSuperposition = o.zcdj ? !0 : !1, n.icon = o.icon, this._buffArr.push(n)
                }
            return this._buffArr
        }, i.prototype.getCurrentBuffArr = function () {
            var t = [],
                e = this.getCanBattleLevel(),
                i = this.isAllPass();
            if (i) return null;
            var o = this.getMonsterArr().get(e).id,
                n = Config.getConfig(fWorld_770).get(o).buff;
            if (n) {
                for (var a = this.getBuffArr(), s = 0; s < a.length; s++) a[s].level == e && t.push(a[s]);
                return t
            }
            return null
        }, i.prototype.updateCurrentMonster = function () {
            var t = this.isAllPass();
            if (t) {
                var e = this.currentLevel;
                if (this.currentLevel % this.maxMonsterCount == 0) {
                    var i = e - (this.maxMonsterCount - 1);
                    this.setData(i, e)
                } else {
                    var i = this.currentLevel - this.currentLevel % this.maxMonsterCount + 1;
                    this.setData(i, e)
                }
            } else {
                var i = this.currentLevel - this.currentLevel % this.maxMonsterCount + 1,
                    e = i + (this.maxMonsterCount - 1);
                this.setData(i, e)
            }
        }, i.prototype.setData = function (t, e) {
            this.currentMonsterArr = [];
            for (var i = t; e >= i; i++) {
                var o = this.getMonsterArr().get(i);
                o && (o.level <= this.currentLevel ? o.isPass = !0 : o.isPass = !1, this.currentMonsterArr.push(o))
            }
        }, i
    }(GameCtrlBase);
    t.Model = e, __reflect(e.prototype, "FWorld.Model")
}(FWorld || (FWorld = {}));
var FWorld;
! function (t) {
    var e = function (e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.listenServ = function (i) {
            e.prototype.listenServ.call(this, i), i.regHand(t.Protocol.ON_FWORLD_INFO, this.onFWorldInfo, this), i.regHand(t.Protocol.ON_RESET, this.onReset, this), i.regHand(t.Protocol.ON_BATTLE, this.onBattle, this), i.regHand(t.Protocol.ON_TURN_CARD, this.onTurnCard, this), i.regHand(t.Protocol.ON_RANK_INFO, this.onRankInfo, this)
        }, i.prototype.onFWorldInfo = function (e, i) {
            var o = e.getModel(t.Model);
            o.highestLevel = i.readInt(), o.currentLevel = i.readInt(), o.remainResetCount = i.readByte(), o.remainBloodPercent = i.readByte();
            var n = i.readByte();
            n == t.HaveFreeCount.HAVE ? o.remainFreeResetCount = 1 : n == t.HaveFreeCount.NOT_HAVE ? o.remainFreeResetCount = 0 : console.error("错误的code:" + n), o.resetState = i.readByte(), o.updateCurrentMonster(), EventCenter.sendMsg(t.Event.UPDATE_FWORLD_INFO)
        }, i.prototype.onReset = function (e, i) {
            var o = (e.getModel(t.Model), i.readByte());
            switch (o) {
                case t.ResetCode.SUCCESS:
                    e.getFworldInfo();
                    break;
                case t.ResetCode.NO_RESET_COUNT:
                    ViewText.text("今日重置次数已用完！");
                    break;
                case t.ResetCode.OVER_RESET_COUNT:
                    ViewText.text("超出重置次数！");
                    break;
                case t.ResetCode.NOT_ENOUGH_MONEY:
                    ViewAlert.show("元宝不足，是否前往充值？", function () {
                        GameGlobal.layerMgr.open(UIConst.RECHARGE)
                    });
                    break;
                default:
                    egret.warn("!!!!!!浮世绘副本异常：" + o)
            }
        }, i.prototype.onBattle = function (e, i) {
            var o = e.getModel(t.Model),
                n = i.readByte();
            switch (n) {
                case t.Code.SUCCESS:
                    break;
                case t.Code.IS_ALL_PASS:
                    ViewText.text("已全部通关！");
                    break;
                case t.Code.BEFORE_LEVEL_NOT_PASS:
                    ViewText.text("上一层未通关！");
                    break;
                case t.Code.IS_PASSED:
                    ViewText.text("本层已通关,请进入下一层！");
                    break;
                case t.Code.FAILD:
                    break;
                case t.Code.IS_TURN_CARD_LEVEL:
                    o.isTurnCard = !0;
                    break;
                case t.Code.IS_COLD:
                    ViewText.text("关卡正在冷却！");
                    break;
                case t.Code.SETTLEMENT_TIME:
                    ViewText.text("浮世绘结算时间，无法挑战！");
                    break;
                default:
                    egret.warn("!!!!!!浮世绘副本异常：" + n)
            }
            n != t.Code.IS_TURN_CARD_LEVEL && (o.isTurnCard = !1), o.currentLevel = i.readInt();
            var a = [],
                s = new t.BuffData;
            s.icon = "fWorld_json.24_attackBuff", s.attribute = i.readInt(), s.attribute > 0 && a.push(s);
            var r = new t.BuffData;
            r.icon = "fWorld_json.24_defenceBuff", r.attribute = i.readInt(), r.attribute > 0 && a.push(r);
            var l = new t.BuffData;
            l.icon = "fWorld_json.24_hpBuff", l.attribute = i.readInt(), l.attribute > 0 && a.push(l), EventCenter.sendMsg(t.Event.ADD_BUFF, a)
        }, i.prototype.onTurnCard = function (e, i) {
            var o = (e.getModel(t.Model), i.readByte());
            switch (o) {
                case t.TurnCardCode.SUCCESS:
                    break;
                case t.TurnCardCode.HAVED_TURN:
                    ViewText.text("该层已翻过！");
                    break;
                case t.TurnCardCode.NOT_TURN_LEVEL:
                    ViewText.text("该层不能翻牌！");
                    break;
                case t.TurnCardCode.BAG_FULL:
                    ViewText.text("背包已满！"), GameGlobal.layerMgr.open(UIConst.EQUIPRL);
                    break;
                default:
                    egret.warn("!!!!!!浮世绘副本异常：" + o)
            }
            var n = i.readUTF();
            o == t.TurnCardCode.SUCCESS && EventCenter.sendMsg(t.Event.UPDATE_TURN_CARD, n)
        }, i.prototype.onRankInfo = function (e, i) {
            for (var o = (e.getModel(t.Model), i.readShort()), n = [], a = 0; o > a; a++) {
                var s = new InstanceZonesRankData;
                s.name = i.readUTF(), s.zhanli = i.readLong(), s.layer = i.readInt(), n.push(s)
            }
            var r = i.readInt(),
                l = i.readInt();
            EventCenter.sendMsg(t.Event.UPDATE_RANK_INFO, {
                tempArr: n,
                mySort: r,
                highestLevel: l
            })
        }, i.prototype.getFworldInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_FWORLD_INFO, e)
        }, i.prototype.reset = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.RESET, e)
        }, i.prototype.battle = function (e, i) {
            var o = this.getBytes();
            o.writeInt(e), o.writeInt(i), this.sendSocket(t.Protocol.BATTLE, o)
        }, i.prototype.turnCard = function (e) {
            var i = this.getBytes();
            i.writeInt(e), this.sendSocket(t.Protocol.TURN_CARD, i)
        }, i.prototype.getRankInfo = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.GET_RANK_INFO, e)
        }, i
    }(BaseModel);
    t.Proxy = e, __reflect(e.prototype, "FWorld.Proxy")
}(FWorld || (FWorld = {}));
var FWorld;
! function (t) {
    var e = function () {
        function t() {}
        return t.STR = "FWorldUI", t.LOBBY = t.STR + "LOBBY", t
    }();
    t.FWorldUI = e, __reflect(e.prototype, "FWorld.FWorldUI")
}(FWorld || (FWorld = {}));
var FWorld;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.grids = [], t.skinName = "WinSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.proxy = this.getProxy(t.Proxy), this.model = this.getModel(t.Model), this.btnok.setNoticeVis(!1), this.btnok.label = "关闭"
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t), this.addEvent();
            var i = this.model.getMonsterArr().get(this.model.currentLevel);
            if (i) {
                var o = i.reward;
                ConfigHelp.makeStrGrids(o, this.grids, 0, 0, this.itemGroup, !0)
            } else console.error("！！！！！！错误的层数:" + this.model.currentLevel);
            this.itemGroup.scrollV = 0, this.closeTime = 3, this.btnok.label = "关闭(" + this.closeTime + ")", TimerManager.doTimer(1e3, -1, this.updateCloseTime, this)
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeEvent(), ConfigHelp.clearGrids(this.grids)
        }, i.prototype.updateCloseTime = function () {
            this.closeTime -= 1, this.btnok.label = "关闭(" + this.closeTime + ")", this.closeTime <= 0 && (TimerManager.doTimer(50, 1, function () {
                this.closeView(i)
            }, this), TimerManager.remove(this.updateCloseTime, this))
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i.prototype.addEvent = function () {
            this.btnok.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
        }, i.prototype.removeEvent = function () {
            this.btnok.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
        }, i.prototype.onTouch = function (t) {
            switch (t.currentTarget) {
                case this.btnok:
                    this.closeView(i)
            }
        }, i
    }(BaseEUIView);
    t.BattleResultView = e, __reflect(e.prototype, "FWorld.BattleResultView")
}(FWorld || (FWorld = {}));
var FWorld;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FWorldLobbyViewSkin", t
        }
        return __extends(i, e), i.prototype.init = function () {
            this.gridArr = []
        }, i.prototype.initView = function () {
            e.prototype.initView.call(this), this.init(), this.btnRank.textFlow = HtmlUtil.underLine("排行榜"), DisplayUtil.popBtnStyle(this.btnRank), DisplayUtil.popBtnStyle(this.btn_autoBattle), this.btnRank.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.btnEnterNext.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.btn_autoBattle.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.hp.setTextSize(18)
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addMsg(), this.sendProxyTime = 0, this.getProxy(t.Proxy).getFworldInfo()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeMsg();
            for (var t = this.monsterGrp.numChildren, i = 0; t > i; i++) {
                var o = this.monsterGrp.getChildAt(i);
                o.stop()
            }
            ConfigHelp.clearGrids(this.gridArr), TimerManager.remove(this.autoBattle, this)
        }, i.prototype.onTouch = function (e) {
            var i = this,
                o = this.getProxy(t.Proxy),
                n = this.getModel(t.Model);
            switch (e.currentTarget) {
                case this.btnRank:
                    var a = new RankWindowData;
                    a.title = "浮世绘排行", a.callback = function () {
                        o.getRankInfo()
                    }, a.eventMsg = t.Event.UPDATE_RANK_INFO, a.btnCallback = function () {
                        var t = HtmlUtil.parse(HtmlUtil.color("每周日晚10点", "#a83503") + "将对排行榜进行结算,发放排名奖励" + HtmlUtil.color("邮件", "#a83503"));
                        i.openView(Award.RankAwardView, {
                            title: "浮世绘",
                            description: t,
                            arr: STD_FWord.awardsArr
                        })
                    }, a.thisObj = this, this.openView(InstanceZonesRankView, a);
                    break;
                case this.btnEnterNext:
                    if (egret.getTimer() - this.sendProxyTime < 1e3) return;
                    if (this.sendProxyTime = egret.getTimer(), n.resetState == t.BattleBtnState.BATTLE && ModelBattle.canEnterBtl()) {
                        var s = n.getCurrentBuffArr();
                        s ? this.openView(t.SelectBuffView) : o.battle(n.getCanBattleLevel(), 0)
                    } else n.resetState == t.BattleBtnState.RESET && (n.remainResetCount > 0 || n.remainFreeResetCount > 0 ? this.openView(t.ResetView) : ViewText.text("今日重置次数已用完！"));
                    break;
                case this.btn_autoBattle:
                    this.img_autoBattle.visible || n.resetState == t.BattleBtnState.RESET ? (this.img_autoBattle.visible = !1, this.timeLabel.text = "自动挑战下一关", TimerManager.remove(this.autoBattle, this), n.resetState == t.BattleBtnState.RESET && ViewText.text("请先重置关卡！"), n.isAutoBattle = !1) : (this.img_autoBattle.visible = !0, this.battleStartTime = 5, this.timeLabel.text = this.battleStartTime + "秒后自动挑战", TimerManager.doTimer(1e3, -1, this.autoBattle, this), n.isAutoBattle = !0)
            }
        }, i.prototype.autoBattle = function () {
            var e = this.getModel(t.Model),
                i = this.getProxy(t.Proxy);
            this.battleStartTime -= 1, this.timeLabel.text = this.battleStartTime + "秒后自动挑战", this.battleStartTime <= 0 && (this.battleStartTime = 5, TimerManager.doTimer(50, 1, function () {
                if (e.resetState == t.BattleBtnState.BATTLE && ModelBattle.canEnterBtl()) {
                    var o = e.getCurrentBuffArr();
                    o ? this.openView(t.SelectBuffView) : i.battle(e.getCanBattleLevel(), 0)
                } else e.resetState == t.BattleBtnState.RESET && (this.img_autoBattle.visible = !1, this.timeLabel.text = "自动挑战下一关", TimerManager.remove(this.autoBattle, this))
            }, this))
        }, i.prototype.addMsg = function () {
            EventCenter.addMsg(t.Event.UPDATE_FWORLD_INFO, this.updateView, this), EventCenter.addMsg(t.Event.START_AUTO_BATTLE, this.startAutoBattle, this)
        }, i.prototype.removeMsg = function () {
            EventCenter.removeMsg(t.Event.UPDATE_FWORLD_INFO, this.updateView, this), EventCenter.removeMsg(t.Event.START_AUTO_BATTLE, this.startAutoBattle, this)
        }, i.prototype.updateView = function () {
            var e = this.getModel(t.Model),
                i = e.getCanBattleLevel();
            this.lb_maxLevel.text = e.highestLevel + "", this.hp.setPercent(e.remainBloodPercent), this.btnEnterNext.label = e.resetState == t.BattleBtnState.RESET ? "重置" : "进入第" + i + "层", e.resetState == t.BattleBtnState.BATTLE || e.remainFreeResetCount > 0 ? this.btnEnterNext.setNoticeVis(!0) : this.btnEnterNext.setNoticeVis(!1);
            for (var o = e.currentMonsterArr, n = this.monsterGrp.numChildren, a = n - 1; a >= 0; a--) {
                var s = this.monsterGrp.getChildAt(a),
                    r = o[n - 1 - a];
                r ? (s.setData(r), s.visible = !0) : (s.setData(null), s.visible = !1)
            }
            for (var a = 0; a < o.length; a++) {
                var r = null,
                    l = e.isAllPass();
                l ? (r = o[o.length - 1], this.updateGrids(r)) : (r = o[a], r.level == i && this.updateGrids(r))
            }
            this.updateAutoBattleState()
        }, i.prototype.updateAutoBattleState = function () {
            var e = this.getModel(t.Model);
            e.isAutoBattle && e.resetState == t.BattleBtnState.BATTLE ? (this.img_autoBattle.visible = !0, this.battleStartTime = 5, this.timeLabel.text = this.battleStartTime + "秒后自动挑战", e.isTurnCard ? TimerManager.remove(this.autoBattle, this) : TimerManager.doTimer(1e3, -1, this.autoBattle, this), e.isAutoBattle = !0) : (this.img_autoBattle.visible = !1, this.timeLabel.text = "自动挑战下一关", e.isAutoBattle = !1)
        }, i.prototype.startAutoBattle = function () {
            this.getModel(t.Model).isAutoBattle && TimerManager.doTimer(1e3, -1, this.autoBattle, this)
        }, i.prototype.updateGrids = function (e) {
            this.getModel(t.Model);
            if (e.isTurnCard) {
                var i = e.reward.split(";"),
                    o = i[0] + ";" + i[1] + ";" + i[2];
                ConfigHelp.makeStrGrids(o, this.gridArr, 0, 0, this.gridGroup, !0, 10, .7)
            } else ConfigHelp.makeStrGrids(e.reward, this.gridArr, 0, 0, this.gridGroup, !0, 10, .7)
        }, i
    }(BaseEUIView);
    t.LobbyView = e, __reflect(e.prototype, "FWorld.LobbyView")
}(FWorld || (FWorld = {}));
var FWorld;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t._curst = -1, t.tabUIArr = [], t.skinName = "FWorldViewSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            var e = this.base;
            e.btnReturn.visible = !1;
            var i = GameGlobal.layerMgr;
            this.addCloseListen(e.btnClose).addCloseListen(e.btnReturn), this.btnWenhao.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onWenHao, this), e.createTabGroup().createPageGrp(), i.reg(t.FWorldUI.LOBBY, t.LobbyView, e.pageGrp);
            var o = -1;
            o++, e.addTab("浮世绘", o, t.FWorldUI.LOBBY), this.tabUIArr.push(t.FWorldUI.LOBBY), e.listenTabClick(this.onTbtn, this)
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t), t && this.base.getTabBySysID(t) ? this.base.setTabSelSys(t, !0) : this.base.setTabSelIdx(0, !0)
        }, i.prototype.onClose = function () {
            this.setCurSt(-1)
        }, i.prototype.updateWenHao = function () {
            0 == this._curst ? this.btnWenhao.visible = !0 : this.btnWenhao.visible = !1
        }, i.prototype.onWenHao = function () {
            0 == this._curst && ViewWenHao.show(CFG_COMMOND.LIBWFSM[1129].detail, 24)
        }, i.prototype.onTbtn = function (t) {
            var e = t.sort;
            CFG_COMMOND.canDo(t.bindSysID) && (this.base.title = t.text, this.setCurSt(e), this.updateWenHao())
        }, i.prototype.setCurSt = function (t) {
            if (this._curst != t) {
                var e = GameGlobal.layerMgr; - 1 != this._curst && e.close(this.tabUIArr[this._curst]), -1 != t && e.open(this.tabUIArr[t]), this.base.setTabSelIdx(t), this._curst = t
            }
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i
    }(BaseEUIView);
    t.FWorldView = e, __reflect(e.prototype, "FWorld.FWorldView")
}(FWorld || (FWorld = {}));
var FWorld;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "VSYTResetSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnCancle), DisplayUtil.popBtnStyle(this.btnClose), this.btnChongZhi.label = "重置", this.btnCancle.label = "取消", this.btnChongZhi.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
        }, i.prototype.onHand = function () {
            var e = this.getProxy(t.Proxy),
                i = this.getModel(t.Model);
            i.remainResetCount > 0 || i.remainFreeResetCount > 0 ? (e.reset(), this.closeHandler()) : ViewText.text("今日重置次数已用完！")
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t), this.onUpdate()
        }, i.prototype.onUpdate = function () {
            var e = this.getModel(t.Model),
                i = (GameGlobal.modelRole.voMine.vip, "");
            i = e.remainFreeResetCount > 0 ? "免费" : Config.getConfig(canshu_143).get(53).key.split(",")[2] + "元宝";
            var o = "",
                n = this.getNextVipAdd("fsh");
            o = n ? Lang.reTxt("重置一次需消耗:{0}\n今日剩余重置次数:{1}\n达到VIP{2}可额外增加{3}次", HtmlUtil.color(i, "#10a244"), HtmlUtil.color(e.remainResetCount + e.remainFreeResetCount, "#10a244"), n.nextVip, ColorSet(n.extralCount, "#10a244")) : Lang.reTxt("重置一次需消耗:{0}\n今日剩余重置次数:{1}", HtmlUtil.color(i, "#10a244"), HtmlUtil.color(e.remainResetCount + e.remainFreeResetCount, "#10a244")), this.txtInfo.textFlow = HtmlUtil.parse(o)
        }, i.prototype.getNextVipAdd = function (t) {
            var e = VoVip.getFullVip();
            if (GameGlobal.modelRole.voMine.vip >= e) return null;
            for (var i = GameGlobal.modelRole.voMine.vip, o = Config.getConfig(vip_155).get(i)[t], n = i + 1; e >= n; n++) {
                var a = Config.getConfig(vip_155).get(n)[t],
                    s = a - o;
                if (s > 0) {
                    var r = n;
                    return {
                        nextVip: r,
                        extralCount: s
                    }
                }
            }
            return null
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this)
        }, i.prototype.onSize = function () {
            e.prototype.fullStage.call(this)
        }, i
    }(BaseEUIView);
    t.ResetView = e, __reflect(e.prototype, "FWorld.ResetView")
}(FWorld || (FWorld = {}));
var FWorld;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.skinName = "FWBuffSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.buffArr || (this.buffArr = this.buffGrp.$children), this.proxy = this.getProxy(t.Proxy), this.model = this.getModel(t.Model)
        }, i.prototype.onOpen = function (t) {
            e.prototype.onOpen.call(this, t), this.addEvent(), this.setBuffData()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeEvent(), this.removeBuffEff()
        }, i.prototype.removeBuffEff = function () {
            for (var t = this.buffArr.length, e = 0; t > e; e++) {
                var i = this.buffArr[e];
                i.removeBuffEff()
            }
        }, i.prototype.setBuffData = function () {
            for (var t = this.model.getCurrentBuffArr(), e = this.buffArr.length, i = 0; e > i; i++) {
                var o = this.buffArr[i];
                if (t[i]) {
                    var n = t[i];
                    o.id = n.id, o.setConten(n.icon, n.description, n.attribute, n.effSource), o.visible = !0
                } else o.visible = !1
            }
        }, i.prototype.onSelected = function (t) {
            var e = t.data;
            this.proxy.battle(this.model.getCanBattleLevel(), e)
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i.prototype.addEvent = function () {
            this.addCloseListen(this.btnClose), EventCenter.addMsg(t.Event.SELECTED_BUFF, this.onSelected, this)
        }, i.prototype.removeEvent = function () {
            this.removeCloseListen(this.btnClose), EventCenter.removeMsg(t.Event.SELECTED_BUFF, this.onSelected, this)
        }, i
    }(BaseEUIView);
    t.SelectBuffView = e, __reflect(e.prototype, "FWorld.SelectBuffView")
}(FWorld || (FWorld = {}));
var GM_BarRender = function (_super) {
    function GM_BarRender() {
        var t = _super.call(this) || this;
        return t.inputId = "4200", t.skinName = "resource/eui_skins/game/gm/GM_Render.exml", t
    }
    return __extends(GM_BarRender, _super), GM_BarRender.prototype.createChildren = function () {
        _super.prototype.createChildren.call(this);
        var t = this;
        t.lbInput.textColor = 16777215, t.lbInput0.textColor = 16777215, t.btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onSendMsg, t), t.imgTip.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onTipTB, this)
    }, GM_BarRender.prototype.onTipTB = function () {
        var t = this.arg.tooltip;
        GameGlobal.layerMgr.open(UIConst.STRINGTIP, t)
    }, GM_BarRender.prototype.onSendMsg = function (e) {
        var self = this,
            content = self.lbInput.text,
            style = self.arg.style;
        if (self.arg.callback) return void eval(self.arg.callback);
        switch (style) {
            case 1:
            case 5:
                var msg = self.msgMake(content);
                null == msg ? ViewText.text("没有该名字物品") : GameGlobal.modelGM.CG_GM_CMD(self.arg.cmd, self.arg.method, msg);
                break;
            case 2:
                1 == self.lbInput0.visible && (content = content + "_" + self.lbInput0.text), GameGlobal.modelGM.CG_GM_CMD(self.arg.cmd, self.arg.method, content);
                break;
            case 3:
                1 == self.lbInput0.visible && (content = content + "_" + self.lbInput0.text), GameGlobal.modelGM.CG_GM_CMD(self.arg.cmd, self.arg.method, content);
                break;
            case "callMethod":
                var cmd = self.arg.cmd;
                if ("modelSetting" == cmd) {
                    var modelSetting = GameGlobal.modelSetting,
                        methodName = self.arg.method,
                        arg = self.lbInput.text;
                    modelSetting[methodName] ? modelSetting[methodName].call(modelSetting, arg) : ViewText.text("errorMethodAt:" + self.arg.cmd + " " + self.arg.method)
                }
            case 6:
                var hid = GameGlobal.modelRole.voMine.id;
                View_GM_Panel.instance.updateSeverInfo(self.arg.cmd, hid + "", self.arg.method);
                break;
            default:
                1 == self.lbInput0.visible && (content = content + "_" + self.lbInput0.text), GameGlobal.modelGM.CG_GM_CMD(self.arg.cmd, self.arg.method, content)
        }
    }, GM_BarRender.prototype.msgMake = function (t) {
        if (1 == this.arg.style) {
            var e = CFG_Item.LIB,
                i = CFG_Equip.LIB,
                o = CFG_HUOBAN1.LIB3,
                n = this.inputId,
                a = e[n],
                s = i[n];
            if (a) return "1_" + a.id + "_" + this.lbInput0.text;
            if (s) return "2_" + s.id + "_" + this.lbInput0.text;
            for (var r in e) {
                var l = e[r],
                    h = l.name,
                    c = l.id;
                if (h == t) return "1_" + c + "_" + this.lbInput0.text
            }
            for (var r in i) {
                var p = i[r],
                    u = p.n,
                    d = p.id;
                if (u == t) return "2_" + d + "_" + this.lbInput0.text
            }
            for (var r in o) {
                var f = o[r],
                    g = f.n,
                    m = f.id;
                if (g == t) return "3_" + m + "_" + this.lbInput0.text
            }
        } else if (5 == this.arg.style) {
            var y = View_GM_Input_Tips.data,
                v = 0;
            for (var r in y) {
                var _ = y[r].text;
                if (_ == t) {
                    v = y[r].id;
                    break
                }
            }
            return v + "_" + this.lbInput0.text
        }
        return null
    }, GM_BarRender.prototype.onTips = function (t) {
        var e = this;
        t.stopImmediatePropagation(), (1 == e.arg.style || 5 == e.arg.style) && View_GM_Input_Tips.instance.onOpen({
            tarDis: t.currentTarget,
            styleSel: e.arg.style
        }), GameGlobal.modelGM.on(Model_GM.ITEMSELECTED, function (t) {
            e.lbInput.text = t.text, e.inputId = t.id
        }, e)
    }, GM_BarRender.prototype.onTextChangeHandler = function (t) {
        GameGlobal.modelGM.notify(Model_GM.TEXTCHANGE, t.currentTarget.text)
    }, GM_BarRender.prototype.setInputLink = function (t) {
        this.lbInput.text = t.text, this.inputId = t.id
    }, Object.defineProperty(GM_BarRender.prototype, "data", {
        get: function () {
            return this.arg
        },
        set: function (t) {
            var e = this;
            e.arg = t;
            var i = e.arg.style;
            e.fillText(), e.lbInput.hasEventListener(egret.TextEvent.CHANGE) && e.lbInput.removeEventListener(egret.TextEvent.CHANGE, e.onTextChangeHandler, e), e.lbInput.hasEventListener(egret.TouchEvent.TOUCH_TAP) && e.lbInput.removeEventListener(egret.TouchEvent.TOUCH_TAP, e.onTips, e), 1 == i || 5 == i ? (e.lbInput.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onTips, e), e.lbInput.addEventListener(egret.TextEvent.CHANGE, e.onTextChangeHandler, e)) : 2 == i || (3 == i ? e.lbInput.visible = !1 : 4 == i && (e.imgback.width = 300, e.lbInput.width = 300)), t.tooltip ? this.imgTip.visible = !0 : this.imgTip.visible = !1
        },
        enumerable: !0,
        configurable: !0
    }), GM_BarRender.prototype.fillText = function () {
        var t = this.arg.title,
            e = this.arg.text;
        this.lbTitle0.visible = !0, this.lbInput0.visible = !0, this.lbInput.visible = !0, this.lbInput.width = 127, this.lbTitle.visible = !0, this.imgback.width = 132, this.imgback.visible = !0, this.imgback0.width = 78, this.imgback0.visible = !0, null != t[1] ? (this.lbTitle.text = t[0], this.lbInput.text = e[0], this.lbTitle0.text = t[1], this.lbInput0.text = e[1]) : (this.lbTitle.text = t, this.lbInput.text = e, this.lbTitle0.visible = !1, this.lbInput0.visible = !1, this.imgback0.visible = !1)
    }, GM_BarRender
}(eui.ItemRenderer);
__reflect(GM_BarRender.prototype, "GM_BarRender");
var GM_TipRender = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/gm/GM_TIP_Bar.exml", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.arg
        },
        set: function (t) {
            this.arg = t, this.lbName.text = t.text
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(GM_TipRender.prototype, "GM_TipRender");
var GMManager = function () {
    function t() {}
    return t.gmGo = function (e, i, o) {
        1 == e && (10012 == i ? t.autoUsePetSkillBook(3) : 10013 == i && t.autoUsePetSkillBook(4))
    }, t.autoUsePetSkillBook = function (t) {
        var e = GameGlobal.modelBag.items,
            i = e.length,
            o = GameGlobal.modelPet.curPetVo;
        if (!o) return void ViewText.text("打开宠物界面啊，逗比");
        for (var n = 10, a = [], s = 0; i > s; s++) {
            var r = e[s],
                l = r.id,
                h = CFG_Item.LIB[l];
            if (h) {
                var c = h.canshu.skillid;
                if (!o.hasSkill(c)) {
                    var p = CFG_Skill.LIB[c];
                    if (p && (o.petcfg.t == p.roleocc || 3 == p.roleocc)) {
                        var u = h.type,
                            d = h.quality;
                        if (d == t && 10 == u && (a.push(l), n--), 0 > n) break
                    }
                }
            }
        }
        var f = a.toString();
        GameGlobal.modelPet.CG_LEARNSKILL(o.sysid, f)
    }, t
}();
__reflect(GMManager.prototype, "GMManager");
var GMProtInputItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/gm/GMProtInputItemSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.loopListData = new eui.ArrayCollection, this.loopList.itemRenderer = e, this.loopList.dataProvider = this.loopListData
    }, e.prototype.dataChanged = function () {
        var t = this.data;
        t.unshift ? this.arrayUpdate() : this.commonUpdate()
    }, e.prototype.commonUpdate = function () {
        this.currentState = "common", this.loopListData.source = null
    }, e.prototype.arrayUpdate = function () {
        this.currentState = "array", this.loopListData.source = this.data, this.lbType.text = this.data
    }, e.prototype.getNumber = function () {
        var t = parseInt(this.lbInput.text);
        return t
    }, e.prototype.flush = function (t) {
        if ("common" == this.currentState) {
            var e = this.data;
            "B" == e ? t.writeByte(this.getNumber()) : "S" == e ? t.writeShort(this.getNumber()) : "I" == e ? t.writeInt(this.getNumber()) : "L" == e ? t.writeLong(this.getNumber()) : "U" == e && t.writeUTF(this.lbInput.text)
        } else
            for (var i = 0, o = this.loopList.numChildren; o > i; i++) {
                var n = this.loopList.getChildAt(i);
                n.flush(t)
            }
    }, e
}(eui.ItemRenderer);
__reflect(GMProtInputItem.prototype, "GMProtInputItem");
var GMProtItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.inputItemListData = new eui.ArrayCollection, e.skinName = "resource/eui_skins/game/gm/GMProtItemSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.inputItemList.itemRenderer = GMProtInputItem, this.inputItemList.dataProvider = this.inputItemListData, this.btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSendT, this)
    }, e.prototype.dataChanged = function () {
        var t = this.data;
        this.lbTitle.text = t.label + t.decs, this.inputItemListData.source = t.types
    }, e.prototype.onSendT = function () {
        for (var t = this.data, e = GameGlobal.modelGM.getBytes(), i = 0, o = this.inputItemList.numChildren; o > i; i++) {
            var n = this.inputItemList.getChildAt(i);
            n.flush(e)
        }
        GameGlobal.modelGM.sendSocket(t.cmd, e)
    }, e
}(eui.ItemRenderer);
__reflect(GMProtItem.prototype, "GMProtItem");
var GMTitleItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/gm/GMTitleItemSkin.exml", e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "selected", {
        set: function (t) {
            t ? this.currentState = "sel" : this.currentState = "nor"
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.dataChanged = function () {
        t.prototype.dataChanged.call(this), this.lb.text = this.data.label
    }, e
}(eui.ItemRenderer);
__reflect(GMTitleItem.prototype, "GMTitleItem");
var Model_GM = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (t) {
        this.socket = t, t.regHand(96, this.GC_GM_SERVER_LOG, this), t.regHand(98, this.GC_GM_SERVER_RETURN, this)
    }, e.prototype.testBattle = function () {
        var t = this.getBytes();
        this.sendSocket(501, t)
    }, e.prototype.CG_GM_CMD = function (t, e, i) {
        var o = this.getBytes();
        o.writeShort(t), o.writeShort(e), o.writeUTF(i), this.sendSocket(99, o), GMManager.gmGo(t, e, i)
    }, e.prototype.GC_GM_SERVER_LOG = function (t, i) {
        var o = i.readUTF(),
            n = i.readByte();
        1 == n ? ViewText.text("server warm:" + o) : 2 == n ? ViewText.text("server error:" + o) : 3 == n ? (e.content += o + "\n", ViewText.text(o + " 执行成功")) : ViewText.text("96 U-B 后端输出错误: " + n)
    }, e.prototype.GC_GM_SERVER_RETURN = function (t, e) {
        var i = e.readShort(),
            o = e.readUTF(),
            n = e.readByte();
        View_GM_Panel.instance.updateSeverInfo(i, o, n)
    }, e.parseProtocolObj = function (t, e) {
        e || (e = {
            pointer: 0
        });
        for (var i = []; e.pointer < t.length;) {
            var o = t[e.pointer];
            if (o == e.breakChar) {
                e.pointer++, e.breakChar = null;
                break
            }
            if ("[" == o) {
                var n = this.parseProtocolArr(t, e);
                i.push(n)
            } else("B" == o || "S" == o || "I" == o || "L" == o || "U" == o) && i.push(o), e.pointer++
        }
        return i
    }, e.parseProtocolArr = function (t, e) {
        var i, o = t[e.pointer];
        return "[" == o && (e.pointer++, e.breakChar = "]", i = this.parseProtocolObj(t, e), e.pointer++), i
    }, e.jsonReady = "jsonReady", e.ITEMSELECTED = "ITEMSELECTED", e.TEXTCHANGE = "TEXTCHANGE", e.content = "", e
}(BaseModel);
__reflect(Model_GM.prototype, "Model_GM");
var VGMProtocol = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.titleItemData = new eui.ArrayCollection, e.termListData = new eui.ArrayCollection, e.skinName = "resource/eui_skins/game/gm/GM_Protocol.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.titleList.dataProvider = this.titleItemData, this.titleList.itemRenderer = GMTitleItem, this.termList.dataProvider = this.termListData, this.termList.itemRenderer = GMProtItem, this.fullStage(), this.height -= 100, this.titleList.addEventListener(eui.UIEvent.CHANGE, this.onTab, this), this.addCloseListen(this.btnClose)
    }, e.prototype.loadProtocol = function () {
        var t = this,
            e = {};
        RES.getResByUrl("resource/config/GMprotocol.proEx", function (i) {
            if (i) {
                for (var o = new egret.ByteArray(i), n = o.readShort(), a = [], s = 0; n > s; s++) {
                    var r = o.readShort(),
                        l = o.readUTF(),
                        h = o.readShort(),
                        c = o.readByte(),
                        p = o.readUTF(),
                        u = o.readUTF(),
                        d = o.readUTF();
                    if (1 == c) {
                        var f = Util.getTempObj();
                        f.pointer = 0;
                        var g = Model_GM.parseProtocolObj(d, f),
                            m = {
                                sysID: r,
                                sysName: l,
                                typeCGorGC: c,
                                cmd: h,
                                types: g,
                                typeStr: d,
                                decs: u,
                                label: "" + h + ":" + p
                            };
                        e[r] || (e[r] = {
                            label: r + "." + l,
                            items: [],
                            sysID: r
                        }), e[r].items.push(m)
                    }
                }
                for (var y in e) a.push(e[y]);
                a.sort(function (t, e) {
                    return t.sysID - e.sysID
                }), t.titleItemData.source = a
            }
        }, t, RES.ResourceItem.TYPE_BIN)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.loadProtocol()
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {}, e.prototype.onTab = function (t) {
        var e = t.currentTarget.selectedItem;
        this.termListData.source = e.items
    }, e
}(BaseEUIView);
__reflect(VGMProtocol.prototype, "VGMProtocol");
var View_GM_Input_Tips = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/gm/GM_INPUT_TIP.exml", e
    }
    return __extends(e, t), Object.defineProperty(e, "instance", {
        get: function () {
            return e._instance || (e._instance = new e)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.initView = function () {
        this.dataCollect = new eui.ArrayCollection([]), this.myList.itemRenderer = GM_TipRender, this.myList.dataProvider = this.dataCollect, this.myList.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.OnGridTouchHandler, this)
    }, e.prototype.OnGridTouchHandler = function (t) {
        var e = this.myList.selectedItem;
        GameGlobal.modelGM.notify(Model_GM.ITEMSELECTED, e)
    }, e.prototype.getList = function (t) {
        var i = [];
        if (1 == this.styleSel) {
            var o = CFG_Item.LIB,
                n = CFG_Equip.LIB,
                a = CFG_HUOBAN1.LIB3;
            for (var s in o) {
                var r = o[s],
                    l = r.name,
                    h = "" + r.id;
                if ((-1 != l.indexOf(t) || -1 != h.indexOf(t)) && (i.push({
                        text: l,
                        id: h
                    }), i.length >= 5)) break
            }
            for (var s in n) {
                var c = n[s],
                    p = c.n,
                    h = "" + c.id;
                if ((-1 != p.indexOf(t) || -1 != h.indexOf(t)) && (i.push({
                        text: p,
                        id: h
                    }), i.length >= 5)) break
            }
            for (var u in a) {
                var d = a[u],
                    f = d.n,
                    g = d.id + "";
                if ((-1 != f.indexOf(t) || -1 != g.indexOf(t)) && (i.push({
                        text: f,
                        id: g
                    }), i.length >= 5)) break
            }
        } else if (5 == this.styleSel) {
            var m = e.data;
            for (var s in m) {
                var y = m[s],
                    v = y.text,
                    _ = y.id;
                if (-1 != v.indexOf(t) && (i.push({
                        text: v,
                        id: _
                    }), i.length >= 5)) break
            }
        }
        return i
    }, e.prototype.onOpen = function (t) {
        var e = this;
        e.styleSel = t.styleSel;
        var i = t.tarDis,
            o = i.parent.localToGlobal(i.x, i.y);
        e.x = o.x, e.y = o.y + 35, GameGlobal.stage.addChild(e), GameGlobal.modelGM.on(Model_GM.TEXTCHANGE, e.onUpdate, e), GameGlobal.stage.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onClose, e)
    }, e.prototype.onUpdate = function (t) {
        var e = this,
            i = this.getList(t);
        e.dataCollect.replaceAll(i), e.dataCollect.refresh();
        var o = e.dataCollect.length;
        e.bg.height = Math.min(45 * o, 210)
    }, e.prototype.onClose = function () {
        GameGlobal.stage.removeChild(this), GameGlobal.modelGM.offAll(Model_GM.ITEMSELECTED), GameGlobal.modelGM.offAll(Model_GM.TEXTCHANGE), GameGlobal.stage.hasEventListener(egret.TouchEvent.TOUCH_TAP) && GameGlobal.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onClose, this)
    }, e.data = [{
        text: "32绑定元宝",
        id: 32
    }, {
        text: "35荣誉值",
        id: 35
    }, {
        text: "36侠义值",
        id: 36
    }, {
        text: "38门派贡献",
        id: 38
    }, {
        text: "39门派声望",
        id: 39
    }, {
        text: "40门派香经验",
        id: 40
    }], e
}(BaseEUIView);
__reflect(View_GM_Input_Tips.prototype, "View_GM_Input_Tips");
var View_GM_Panel = function (t) {
    function e() {
        var i = t.call(this) || this;
        return e.instance = i, i.skinName = "resource/eui_skins/game/gm/GM_Main_Skin.exml", i
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.tabDataProvide = new eui.ArrayCollection([]), e.tabList.itemRenderer = YellowBtn, e.tabList.dataProvider = e.tabDataProvide, e.tabList.addEventListener(egret.Event.CHANGE, e.onTab, e), e.itemsList.itemRenderer = GM_BarRender, e.itemsDataProvide = new eui.ArrayCollection([]), e.itemsList.dataProvider = e.itemsDataProvide, GameGlobal.modelGM.once(Model_GM.jsonReady, e.onInitDt, e), RES.getResByUrl("resource/config/gm.json", function (t) {
            GameGlobal.modelGM.notify(Model_GM.jsonReady, t)
        }, e, RES.ResourceItem.TYPE_JSON), e.addCloseListen(e.btnClose), DisplayUtil.popBtnStyle(this.btnClose), GameGlobal.layerMgr.reg(UIConst.GMPROTOCOL, VGMProtocol, GameGlobal.layerMgr.UI_Message)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.updateConsole()
    }, e.prototype.onInitDt = function (t) {
        for (var e = this, i = e.jsonDatas = t.groups, o = 0; o < i.length; o++) {
            var n = i[o],
                a = n.title;
            e.tabDataProvide.addItem(a)
        }
        e.tabList.selectedIndex = 0, e.onUpdate(0)
    }, e.prototype.onTab = function (t) {
        var e = t.currentTarget; - 1 != String(e.selectedItem).indexOf("GM") ? GameGlobal.layerMgr.open(UIConst.GMPROTOCOL) : this.onUpdate(e.selectedIndex)
    }, e.prototype.onUpdate = function (t) {
        var e = this;
        e.jsonDatas[t] && (e.itemsDataProvide.removeAll(), e.jsonDatas[t].data.forEach(function (t, i) {
            e.itemsDataProvide.addItem(t)
        }, e))
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.updateConsole = function () {
        var t = ModelSetting._consoleTxt;
        this.lbConsole.text = t
    }, e.prototype.updateSeverInfo = function (t, e, i) {
        var o = this,
            n = t,
            a = e,
            s = i,
            r = o.jsonDatas[n - 1];
        for (var l in r) {
            var h = r[l];
            "data" == l && h.forEach(function (t, e) {
                t.method == s && t && 1 != t["break"] && (t.text = a)
            })
        }
        o.onUpdate(n - 1)
    }, e.prototype.onSize = function () {
        this.y = 50
    }, e
}(BaseEUIView);
__reflect(View_GM_Panel.prototype, "View_GM_Panel");
var ViewGMEntry = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isInit = !0, e.init2(), e
    }
    return __extends(e, t), e.prototype.init2 = function () {
        var t = new eui.Group;
        t.scaleX = t.scaleY = 1;
        var e = new eui.Button;
        e.label = "GM", t.addChild(e), e.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnHand, this), this.addChild(t)
    }, e.prototype.btnHand = function () {
        GameGlobal.layerMgr.open(UIConst.GM)
    }, e.prototype.onSize = function () {
        this.x = 0, this.y = GameGlobal.stage.stageHeight - 50
    }, e
}(BaseEUIView);
__reflect(ViewGMEntry.prototype, "ViewGMEntry");
var VGetFlower = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.imgs = [], e.index = 0, e.skinName = "GetFlowerSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnhz.addEventListener(egret.TouchEvent.TOUCH_TAP, this.hzT, this), this.btnchat.addEventListener(egret.TouchEvent.TOUCH_TAP, this.chatT, this)
    }, e.prototype.hzT = function () {
        GameGlobal.layerMgr.open(UIConst.STORE), this.getNext(), this.closeHandler()
    }, e.prototype.chatT = function () {
        this.vosiliao ? (GameGlobal.layerMgr.open(UIConst.SI_LIAO, this.vosiliao), this.getNext()) : ViewText.text("暂无此好友"), this.closeHandler()
    }, e.prototype.getNext = function () {
        this.index++;
        var t = Vo_GoodFeelFlower.List[this.index];
        t && (this.upNum(), this.update())
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.index = 0, this.upNum(), GameGlobal.modelFriend.on(ModelFriend.MSG_FLIST, this.update, this), GameGlobal.modelFriend.CG_FriendData(1)
    }, e.prototype.onClose = function () {
        GameGlobal.modelFriend.off(ModelFriend.MSG_FLIST, this.update, this)
    }, e.prototype.update = function () {
        var t = Vo_GoodFeelFlower.List[this.index],
            e = GameGlobal.modelFriend,
            i = e.findFriend(t.id);
        i && (this.vosiliao = VoSiLiao.update(i.id, i.job, i.name, 1, []), GameGlobal.modelsiliao.CG415(i.id, ""))
    }, e.prototype.upNum = function () {
        var t = Vo_GoodFeelFlower.List[this.index];
        if (this.lbdes.textFlow = HtmlUtil.parse(HtmlUtil.color(t.name, "#fbfd54") + "被你的魅力倾倒，给你\n送了                        ，此刻\n你想做什么呢？"), 1218 == t.shopid) var e = 1;
        else 1219 == t.shopid ? e = 2 : 1220 == t.shopid && (e = 3);
        this.container.removeChildren(), DisplayUtil.addBy(this.img, this.container);
        for (var i = 0; e > i; i++) {
            var o = this.imgs[i];
            o || (o = new eui.Image("goodfeel_json.9")), DisplayUtil.addBy(o, this.container, 0)
        }
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VGetFlower.prototype, "VGetFlower");
var VGoodFeel = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids1 = [], e.grids2 = [], e.skinName = "GoodFeelSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.data = new eui.ArrayCollection, this.list.itemRenderer = VGoodFeelItem, this.list.dataProvider = this.data, this.btnGetAward1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.getAward1T, this), this.btnGetAward2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.getAward2T, this), this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.joinT, this), this.btnJoin.textFlow = HtmlUtil.underLine("如何参加？"), this.btnGetAward1.label = this.btnGetAward2.label = "领取"
    }, e.prototype.joinT = function () {
        if (this.textdes) return void ViewWenHao.show(this.textdes, 24);
        var t = "每日登录可获得" + HtmlUtil.color("1亲密度\n", "#10a244"),
            e = CFG_GoodFeel.LIB2;
        for (var i in e) {
            var o = e[i];
            t += o.rw + HtmlUtil.color(o.rwcs + "次", "#10a244") + "可获得" + HtmlUtil.color(o.qmd + "亲密度\n", "#10a244")
        }
        this.textdes = t + "商城购买鲜花道具赠送给好友可获得亲密度", ViewWenHao.show(this.textdes, 24)
    }, e.prototype.getAward1T = function () {
        var t = Vo_GoodFeelJL.getMinVo();
        t.cfg.ljqmd <= this.vo.qmd ? GameGlobal.modelFriend.CG429(this.vo.id, t.id) : ViewText.text("亲密度未达到规定值，无法领取！")
    }, e.prototype.getAward2T = function () {
        "前往" == this.btnGetAward2.label && GameGlobal.layerMgr.open(UIConst.GOODFEELSKILL, this.vo.id)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.vo = e, Vo_GoodFeelJL.create(), this.update(), GameGlobal.modelFriend.on(ModelFriend.MSG_GOODFEEL, this.update, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelFriend.off(ModelFriend.MSG_GOODFEEL, this.update, this)
    }, e.prototype.update = function () {
        this.upPro();
        var t = Vo_GoodFeelJL.getMinVo();
        this.lbcj1.text = t.cfg.cj, ConfigHelp.makeStrGrids(t.cfg.jl, this.grids1, 0, 0, this.gridGrp1, !0), this.changebg(this.grids1), this.btnGetAward1.setNoticeVis(t.cfg.ljqmd <= this.vo.qmd), this.btnGetAward1.visible = !0, this.btnGetAward2.visible = !1, this.gridGrp2.removeChildren();
        var e = Vo_GoodFeelJL.getNextVo();
        e ? (this.lbcj2.text = e.cfg.cj, ConfigHelp.makeStrGrids(e.cfg.jl, this.grids2, 0, 0, this.gridGrp2, !0), this.changebg(this.grids2)) : (this.lbcj2.text = "获取技能", this.img || (this.img = new eui.Image("goodfeel_json.tx")), DisplayUtil.addBy(this.img, this.gridGrp2), this.btnGetAward2.label = "前往", this.btnGetAward2.visible = t.isget, this.btnGetAward1.visible = !t.isget)
    }, e.prototype.upPro = function () {
        DisplayUtil.fillDataAC(this.data, Vo_GoodFeelJL.List)
    }, e.prototype.changebg = function (t) {
        for (var e = 0; e < t.length; e++) {
            var i = t[e];
            i.bg.source = "CM2_json.bg5", i.bg.scale9Grid = new egret.Rectangle(18, 17, 6, 4)
        }
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VGoodFeel.prototype, "VGoodFeel");
var VGoodFeelItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "GoodFeelItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.num.text = t.cfg.ljqmd.toString(), this.img.source = t.isget ? "goodfeel_json.x1" : "goodfeel_json.x2"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VGoodFeelItem.prototype, "VGoodFeelItem");
var VGoodFeelSkill = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "GoodFeelSkillSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelFriend.on(ModelFriend.MSG_GOODFEELSKILL, this.update, this), GameGlobal.modelFriend.CG431(e)
    }, e.prototype.update = function () {
        var t = Vo_GoodFeelJL.jnlev;
        this.lbqmd.text = Vo_GoodFeelJL.qmd.toString();
        var e = CFG_GoodFeel.LIB3[t];
        e && (this.lbcur.textFlow = HtmlUtil.parse("LV." + e.id + " 与" + HtmlUtil.color(e.hysl + "位", "#707115") + "好友同心时，" + Lang.reTxt(e.jnxg, this.getAttrNum(e.gdz, e.bfb, e.zqmd))));
        var i = CFG_GoodFeel.LIB3[t + 1];
        i ? this.lbnext.textFlow = HtmlUtil.parse("LV." + i.id + " 与" + HtmlUtil.color(i.hysl + "位", "#707115") + "好友同心时，" + Lang.reTxt(i.jnxg, this.getAttrNum(i.gdz, i.bfb, i.zqmd))) : this.lbnext.text = "已满级"
    }, e.prototype.getAttrNum = function (t, e, i) {
        var o = [],
            n = t.indexOf(";");
        if (n > 0)
            for (var a = t.split(";"), s = 0; s < a.length; s++) {
                var r = a[s].split(",")[1];
                r = HtmlUtil.color(r + "+" + Math.floor(e / 100 * i) + "(亲密度加成)", "#a83503"), o.push(r)
            } else r = t.split(",")[1], r = HtmlUtil.color(r + "+" + Math.floor(e / 100 * i) + "(亲密度加成)", "#a83503"), o.push(r);
        return o
    }, e.prototype.onClose = function () {
        GameGlobal.modelFriend.off(ModelFriend.MSG_GOODFEELSKILL, this.update, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VGoodFeelSkill.prototype, "VGoodFeelSkill");
var Vo_GoodFeelJL = function () {
    function t() {
        this.isget = !1
    }
    return t.create = function () {
        if (!this.List.length) {
            var e = CFG_GoodFeel.LIB1;
            for (var i in e) {
                var o = e[i],
                    n = new t;
                n.id = parseInt(i), n.cfg = o, this.List.push(n), this.Map[n.id] = n
            }
        }
    }, t.getMinVo = function () {
        for (var t = this.List, e = 0; e < t.length; e++) {
            var i = t[e];
            if (!i.isget) return i
        }
        return i
    }, t.getNextVo = function () {
        for (var t = this.List, e = 0; e < t.length; e++) {
            var i = t[e];
            if (!i.isget) {
                var o = t[e + 1];
                return o ? o : null
            }
        }
        return null
    }, t.isAllGet = function () {
        for (var t = this.List, e = 0; e < t.length; e++) {
            var i = t[e];
            if (!i.isget) return !1
        }
        return !0
    }, t.clear = function () {
        for (var t = this.List, e = 0; e < t.length; e++) {
            var i = t[e];
            i.isget = !1
        }
    }, t.List = [], t.Map = {}, t.jnlev = 1, t
}();
__reflect(Vo_GoodFeelJL.prototype, "Vo_GoodFeelJL");
var Vo_GoodFeelFlower = function () {
    function t() {}
    return t.List = [], t
}();
__reflect(Vo_GoodFeelFlower.prototype, "Vo_GoodFeelFlower");
var ModelGuanQia = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.wave = 0, e.guanqia = 1, e.chapterAward = 0, e.monsterRequesting = !1, e.bossRequesting = !1, e.assistTimes = 0, e.sosTimes = 0, e.myRank = 0, e.autoboss = !1, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1102, this.GC_GUANQIAAWARD, this), e.regHand(1104, this.GC_PNLINFO, this), e.regHand(1106, this.GC_GUANQIABOSS, this), e.regHand(1100, this.GC_GKOFFLINEDATA, this), e.regHand(1108, this.GC_CHAPTERAWARD, this), e.regHand(1110, this.GC_RANK, this), e.regHand(1116, this.GC1116, this)
    }, e.prototype.onGKBattleEnd = function () {
        this.monsterRequesting = !0, this.CG_GUANQIAAWARD(), GameGlobal.tick.addInterv(this.requestInterv, 3e4, this)
    }, e.prototype.onGKBIntrrupt = function () {
        this.monsterRequesting = !1, GameGlobal.tick.removeInterv(this.requestInterv)
    }, e.prototype.onBossEnd = function (t) {
        t.isMineWin() || GameGlobal.modelGuanqia.setAutoBoss(!1)
    }, e.prototype.requestInterv = function (t) {
        t.CG_GUANQIAAWARD()
    }, e.prototype.requestBossInterv = function (t) {
        t.CG_GUANQIABOSS()
    }, e.prototype.GC_GKOFFLINEDATA = function (t, e) {
        t.guanqia = e.readShort(), t.wave = e.readByte(), t.chapterAward = e.readShort();
        var i = t.offLineData = {};
        i.yl = e.readInt(), i.ylcard = e.readInt(), i.ylother = e.readInt(), i.exp = e.readInt(), i.expcard = e.readInt(), i.expother = e.readInt(), i.numEquip = e.readInt(), i.numSold = e.readShort(), i.time = e.readInt(), i.shoujue = e.readShort(), t.showOffLineGain()
    }, e.prototype.challengeBoss = function () {
        var t = GameGlobal.modelBag.capacity - GameGlobal.modelBag.equips.length;
        if (10 > t) return this.setAutoBoss(!1), ViewAlert.show("背包已满，无法挑战关卡\n是否前往熔炼?", this.onRLPrompt, ViewAlert.OKANDCANCEL, this), !1;
        if (ModelBattle.canEnterBtl()) {
            var e = GameGlobal.mapScene._curSceneid,
                i = this.getCurSceneID();
            return e != i ? (ViewAlert.show("当前不在关卡地图，无法挑战"), !1) : (this.CG_MONSTER(1), !0)
        }
    }, e.prototype.onRLPrompt = function () {
        GameGlobal.layerMgr.open(UIConst.EQUIPRL)
    }, e.prototype.CG_MONSTER = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1111, e)
    }, e.prototype.GC_MONSTER = function (t, e) {}, e.prototype.CG_GUANQIAAWARD = function () {
        var t = this.getBytes();
        t.writeByte(1), this.sendSocket(1101, t)
    }, e.prototype.CG_PNLINFO = function () {
        var t = this.getBytes();
        this.sendSocket(1103, t)
    }, e.prototype.GC_PNLINFO = function (t, i) {
        var o = i.readShort();
        t.rank3 || (t.rank3 = []), t.rank3.length = 0;
        for (var n = 0; o > n; n++) t.rank3.push(i.readLong(), i.readUTF(), i.readShort(), i.readByte());
        t.assistTimes = i.readByte(), t.sosTimes = i.readByte(), t.notify(e.MSG_PNLDATA)
    }, e.prototype.GC_GUANQIAAWARD = function (t, i) {
        GameGlobal.tick.removeInterv(t.requestInterv), t.monsterRequesting = !1, ConfigHelp.addServAwardText(i), t.wave = i.readByte(), t.notify(e.MSG_GKPROG)
    }, e.prototype.CG_GUANQIABOSS = function () {
        var t = this.getBytes();
        t.writeByte(1), this.sendSocket(1105, t)
    }, e.prototype.GC_GUANQIABOSS = function (t, i) {
        t.bossRequesting = !1, GameGlobal.tick.removeInterv(t.requestBossInterv), t.guanqia = i.readShort(), t.wave = 0;
        var o = ConfigHelp.parseServItems(i);
        GameGlobal.layerMgr.open(UIConst.GKBOSSAWRAD, o), t.notify(e.MSG_GKCHANGE), t.notify(e.MSG_GKPROG)
    }, e.prototype.getCurSceneID = function () {
        var t = GameGlobal.modelQuest.getCurQuestSceneID();
        return t ? t : GuanQiaSceneCtrl.lastSceneID ? GuanQiaSceneCtrl.lastSceneID : this.getBestSceneID()
    }, e.prototype.getBestSceneID = function () {
        var t = GameGlobal.modelQuest.getCurQuestSceneID();
        if (t) return t;
        var e = CFG_GuanQia.LIB[this.guanqia];
        return e ? e.m : 1002
    }, e.prototype.showOffLineGain = function () {
        this.offLineData && this.offLineData.time >= 30 && GameGlobal.modelRole.voMine.level > 20 && GameGlobal.layerMgr.open(UIConst.GKOFFLINE)
    }, e.prototype.setAutoBoss = function (t) {
        this.autoboss != t && (this.autoboss = t, this.notify(e.MSG_AUTOBOSS))
    }, e.prototype.onReconnect = function () {
        this.bossRequesting = !1, this.monsterRequesting = !1
    }, e.prototype.CG1113 = function () {
        var t = this.getBytes();
        this.sendSocket(1113, t)
    }, e.prototype.CG1115 = function (t, e) {
        var i = this.getBytes();
        i.writeLong(t), i.writeInt(e), this.sendSocket(1115, i)
    }, e.prototype.CG_CHAPTERAWARD = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(1107, e)
    }, e.prototype.GC_CHAPTERAWARD = function (t, i) {
        var o = i.readByte(),
            n = i.readShort();
        1 == o ? (t.chapterAward = n, t.notify(e.MSG_CHAPTERAWARD), ViewText.text("领取章节奖励成功")) : 4 == o && GameGlobal.modelBag.checkRLTips(0)
    }, e.prototype.CG_RANK = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeByte(e), this.sendSocket(1109, i)
    }, e.prototype.GC_RANK = function (t, e) {
        t.myRank = e.readByte();
        var i = e.readShort();
        t.myRankData = [];
        for (var o = 0; i > o; o++) t.myRankData.push([e.readByte(), e.readLong(), e.readUTF(), e.readLong(), e.readShort(), e.readByte()]);
        var n = GameGlobal.layerMgr.getView(UIConst.GUANQIARANK);
        n && n.update()
    }, e.prototype.getCanChapterID = function () {
        var t = (this.guanqia - 1) / 5 >> 0;
        return t > this.chapterAward ? t : 0
    }, e.prototype.GC1116 = function (t, e) {
        var i = e.readByte();
        2 == i && ViewText.text("尚未通关目标关卡"), 3 == i && ViewText.text("今天的协助次数已用完"), 4 == i && ViewText.text("协助请求已过期")
    }, e.MSG_GKCHANGE = "MSG_GKCHANGE", e.MSG_GKPROG = "MSG_GKPROG", e.MSG_AUTOBOSS = "MSG_AUTOBOSS", e.MSG_CHAPTERAWARD = "MSG_CHAPTERAWARD", e.MSG_PNLDATA = "MSG_PNLDATA", e
}(BaseModel);
__reflect(ModelGuanQia.prototype, "ModelGuanQia");
var VBossSceneUI = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.awardGridArr = [], e.skinName = "resource/eui_skins/game/guanqia/BossSceneSkin.exml", e
    }
    return __extends(e, t), e.prototype.guideNewMap = function () {
        QuestGuideArrow.getIns().guideTo(this, 55, 70)
    }, e.prototype.guideAuto = function () {
        QuestGuideArrow.getIns().guideTo(this, 70, 125)
    }, e.prototype.initView = function () {
        this.imgStar = new ImageText, this.imgStar.makeContainer(), this.imgStar.charFunc = this.STARFUNC, this.defGroup.addChild(this.imgStar.container), this.btnBoss.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBossT, this), this.imgAuto.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAutoT, this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.imgToNewMap.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGotoT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.updategk(), GameGlobal.modelGuanqia.on(ModelGuanQia.MSG_GKPROG, this.onwave, this), this.onAuto(), GameGlobal.modelGuanqia.on(ModelGuanQia.MSG_AUTOBOSS, this.onAuto, this), GameGlobal.modelGuanqia.on(ModelGuanQia.MSG_CHAPTERAWARD, this.onChapterAwd, this), this.checkTip()
    }, e.prototype.onClose = function () {
        GameGlobal.modelGuanqia.off(ModelGuanQia.MSG_GKPROG, this.updategk), GameGlobal.modelGuanqia.off(ModelGuanQia.MSG_AUTOBOSS, this.onAuto), GameGlobal.modelGuanqia.off(ModelGuanQia.MSG_CHAPTERAWARD, this.onChapterAwd, this)
    }, e.prototype.STARFUNC = function (t, e, i, o) {
        var n = "1" == e ? "light" : "grey";
        t._text.length <= 1 ? (t.bs = "MainScreen_json.bm_star0_" + n, t.by = 0) : 2 == t._text.length ? 0 == o ? (t.bs = "MainScreen_json.bm_star1_" + n, t.by = 15) : (t.bs = "MainScreen_json.bm_star2_" + n, t.by = 15) : 0 == o ? (t.bs = "MainScreen_json.bm_star1_" + n, t.by = 15) : 1 == o ? (t.bs = "MainScreen_json.bm_star0_" + n, t.by = 0) : (t.bs = "MainScreen_json.bm_star2_" + n, t.by = 15), t.bw = 35
    }, e.prototype.updategk = function () {
        for (var t = GameGlobal.modelGuanqia, e = t.wave, i = CFG_GuanQia.LIB[t.guanqia].en, o = "", n = 1; i >= n; n++) o += e >= n ? "1" : "0";
        this.imgStar.setText(o), this.imgStar.container.y = -5, this.imgStar.container.x = 150 - this.imgStar.totalWid >> 1;
        var a = GameGlobal.mapScene._curSceneid,
            s = t.getBestSceneID(),
            r = t.getCanChapterID();
        r ? (this.currentState = "award", ConfigHelp.makeStrGrids(CFG_GuanQia.LIBCHAPTER[r].n, this.awardGridArr, 0, 0, this.awardGrp, !1)) : s != a ? this.currentState = "changeMap" : this.currentState = "def", this.checkTip()
    }, e.prototype.onChapterAwd = function () {
        this.updategk()
    }, e.prototype.onSize = function () {
        var t = GameGlobal.stage;
        this.x = t.stageWidth - this.skin.width - 2, this.y = t.stageHeight - 525
    }, e.prototype.updateCurStar = function () {}, e.prototype.onTouch = function () {
        "award" == this.currentState && GameGlobal.layerMgr.open(UIConst.GKCHAPTER)
    }, e.prototype.onBossT = function () {
        GameGlobal.layerMgr.open(UIConst.GUANQIABOSS)
    }, e.prototype.onAutoT = function () {
        GameGlobal.modelGuanqia.setAutoBoss(!GameGlobal.modelGuanqia.autoboss)
    }, e.prototype.onGotoT = function () {
        GameGlobal.layerMgr.open(UIConst.WORLDMAP)
    }, e.prototype.checkTip = function () {
        var t = GameGlobal.modelGuanqia.wave,
            e = CFG_GuanQia.LIB[GameGlobal.modelGuanqia.guanqia].en;
        t >= e ? DisplayUtil.addBy(this.imgTip, this.defGroup) : DisplayUtil.remove(this.imgTip)
    }, e.prototype.onwave = function () {
        this.updategk()
    }, e.prototype.onAuto = function () {
        var t = GameGlobal.modelGuanqia.autoboss;
        t ? this.imgAuto.source = "MainScreen_json.bm_autoL" : this.imgAuto.source = "MainScreen_json.bm_autoG"
    }, e
}(BaseEUIView);
__reflect(VBossSceneUI.prototype, "VBossSceneUI");
var VGuanQiaAward = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._old = 0, e.skinName = "resource/eui_skins/game/guanqia/GuanqiaAwardSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOKT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), GameGlobal.modelGuanqia.on(ModelGuanQia.MSG_CHAPTERAWARD, this.onChapter, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelGuanqia.off(ModelGuanQia.MSG_CHAPTERAWARD, this.onChapter)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function () {
        var t = GameGlobal.modelGuanqia,
            e = t.getCanChapterID();
        if (e) {
            var i = CFG_GuanQia.LIBCHAPTER[e],
                o = ConfigHelp.makeVoByArr(Util.parseIntStr(i.n));
            this.awardGrid.data = o, this.lbLv.text = Lang.reTxt("恭喜通关章节 {0} 章", e), this.lbItemName.text = o.name
        } else this.closeHandler()
    }, e.prototype.onOKT = function () {
        GameGlobal.modelGuanqia.CG_CHAPTERAWARD(0)
    }, e.prototype.onChapter = function () {
        this.update()
    }, e
}(BaseEUIView);
__reflect(VGuanQiaAward.prototype, "VGuanQiaAward");
var VGuanQiaBossAward = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.timeremain = 0, e.skinName = "resource/eui_skins/game/battle/WinSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnok), this.addCloseListen(this.bg)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e.sort(ConfigHelp.ITEMSORT), ConfigHelp.makeVoGrids(e, this.grids, 0, 0, this.itemGroup, !0, 0, 1, 2), this.itemGroup.scrollV = 0;
        for (var i = 0, o = e.length; o > i; i++) {
            var n = e[i];
            2 == n.type && ViewItemFloatTip.checkShowEquipID(n.id)
        }
        this.timeremain = 3e3, this.updateTime(this, 0), GameGlobal.tick.addInterv(this.updateTime, 500, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.updateTime), ConfigHelp.clearGrids(this.grids)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.updateTime = function (t, e) {
        t.timeremain -= e;
        var i = Math.ceil(t.timeremain / 1e3);
        0 > i && (i = 0, t.closeHandler()), t.btnok.label = "关闭(" + i + ")"
    }, e
}(BaseEUIView);
__reflect(VGuanQiaBossAward.prototype, "VGuanQiaBossAward");
var VGuanQiaBossPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.awardGrids = [], e.skinName = "GuanQiaBossPnl", e
    }
    return __extends(e, t), e.prototype.guideTG = function () {
        QuestGuideArrow.getIns().guideTo(this.btn, this.btn.width >> 1, this.btn.height >> 1)
    }, e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.base.btnReturn, 30, 30)
    }, e.prototype.initView = function () {
        var t = this;
        this.base.title = "关卡", this.addCloseListen(this.base.btnReturn).addCloseListen(this.base.btnClose), t.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onChallenge, t), t.btnAssist.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onAssist, t), t.monster = UIRole.create(), t.addChild(t.monster), t.monster.x = 350, t.monster.y = 500, this.lbCheckRnk.textFlow = HtmlUtil.underLine(this.lbCheckRnk.text), t.lbCheckRnk.touchEnabled = !0, t.lbCheckRnk.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onRnkT, t), t.chapterGrid.enableTip(), t.chapterGrid.showOne = !0
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.monster.play(), this.updateStar(), GameGlobal.modelGuanqia.on(ModelGuanQia.MSG_GKPROG, this.onGK, this), GameGlobal.modelGuanqia.on(ModelGuanQia.MSG_PNLDATA, this.onPnlData, this), this.updateProgress(), this.checkChapter(), this.updateAssist(), GameGlobal.modelGuanqia.CG_PNLINFO()
    }, e.prototype.onClose = function () {
        this.monster.stopAndClear(), GameGlobal.modelGuanqia.off(ModelGuanQia.MSG_GKPROG, this.onGK), GameGlobal.modelGuanqia.off(ModelGuanQia.MSG_PNLDATA, this.onPnlData)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.onChallenge = function () {
        var t = this;
        GameGlobal.mapScene._curSt == SceneCtrl.T_TOWN ? ViewAlert.show("是否前往关卡地图?", function () {
            GameGlobal.mapScene.changeMap(GameGlobal.modelGuanqia.getCurSceneID()), t.closeHandler()
        }) : GameGlobal.modelGuanqia.challengeBoss() && t.closeHandler()
    }, e.prototype.updateStar = function () {
        var t = GameGlobal.modelGuanqia.wave,
            e = CFG_GuanQia.LIB[GameGlobal.modelGuanqia.guanqia].en;
        t >= e ? (this.btn.visible = !0, this.lbNotMatch.visible = !1, this.btnAssist.visible = !0) : (this.btn.visible = !1, this.lbNotMatch.visible = !0, this.lbNotMatch.text = Lang.reTxt("还需击败{0}波怪物", e - t), this.btnAssist.visible = !1)
    }, e.prototype.updateProgress = function () {
        var t = GameGlobal.modelGuanqia.guanqia;
        this.oldgk = t;
        var e = CFG_GuanQia.LIB[t];
        this.monster.setMonsterID(e.bb, !0), this.monster.setWay(3), this.monster.validParts();
        var i = (t - 1) / 5 >> 0;
        if (t > 0 && t % 5 == 0) o = 5;
        else var o = t % 5;
        this.img_pb.scaleX = o / 5;
        for (var n = "{0}关", a = 0, s = 0; 5 > s; s++) {
            var r = this["lb" + s],
                l = 5 * i + s + 1;
            r.text = Lang.reTxt(n, l), l == t ? (r.textColor = 15658547, a = s) : r.textColor = 16777215;
            var h = this["g" + s];
            h.source = t > l ? "guanqia_json.BT_Green" : "guanqia_json.BT_Empty"
        }
        this.iconBattle.$setX(166 + 87 * a);
        for (var c = (CFG_GuanQia.LIB[t], Util.parseIntStr(CFG_GuanQia.GKAWARDLIST)), s = 0; s < c.length; s++) {
            var p = this.awardGrids[s];
            p || (p = this.awardGrids[s] = new ViewGrid, p.x = 190 + 80 * s, p.y = 663, p.scaleX = p.scaleY = .8, p.enableTip(), this.addChild(p)), this.awardGrids[s].visible = !0;
            var u = p.data ? p.data : VoItem.create();
            u.init(c[s]), p.data = u, p.updateName()
        }
        for (; s < this.awardGrids.length; s++) this.awardGrids[s].visible = !1;
        var d = this.chapterGrid,
            f = CFG_GuanQia.LIBCHAPTER[i + 1];
        if (f) {
            var g = ConfigHelp.makeVoByArr(Util.parseIntStr(f.n));
            d.data = g, this.txtAwardName.text = d.data.name
        }
    }, e.prototype.onRnkT = function () {
        GameGlobal.layerMgr.open(UIConst.GUANQIARANK)
    }, e.prototype.updateAssist = function () {
        var t = GameGlobal.modelGuanqia;
        this.lbGK.text = Lang.reTxt("{0}", t.guanqia), this.lbScene.text = CFG_GuanQia.LIB[t.guanqia].n;
        var e = t.assistTimes,
            i = 5;
        this.lbHelpOthers.textFlow = HtmlUtil.parse("已协助他人次数:" + HtmlUtil.color(e + "/" + i, "#10a244"));
        var o = t.sosTimes,
            n = 3;
        this.lbMyHelp.textFlow = HtmlUtil.parse("已求助次数:" + HtmlUtil.color(o + "/" + n, "#10a244"))
    }, e.prototype.onGK = function () {
        this.updateStar(), this.checkChapter()
    }, e.prototype.onPnlData = function () {
        for (var t = GameGlobal.modelGuanqia, e = 0; 4 > e; e += 1) {
            var i = this["lbRnkName" + e];
            if (i) {
                if (t.rank3) var o = t.rank3[4 * e];
                o ? i.text = e + 1 + ":" + t.rank3[4 * e + 1] + " " + t.rank3[4 * e + 2] + "关" : i.text = ""
            }
        }
        this.updateAssist()
    }, e.prototype.onAssist = function () {
        3 - GameGlobal.modelGuanqia.sosTimes > 0 ? GameGlobal.layerMgr.open(UIConst.QIUZHU) : ViewText.text("今天求助次数已满")
    }, e.prototype.checkChapter = function () {
        GameGlobal.modelGuanqia.getCanChapterID() && GameGlobal.layerMgr.open(UIConst.GKCHAPTER)
    }, e
}(BaseEUIView);
__reflect(VGuanQiaBossPnl.prototype, "VGuanQiaBossPnl");
var VGuanQiaLose = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.timeremain = 0, e.skinName = "resource/eui_skins/game/battle/LoseSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.bg), this.addCloseListen(this.btnok), this.btnDZ.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btnPet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btnHB.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.timeremain = 3e3, this.updateTime(this, 0), GameGlobal.tick.addInterv(this.updateTime, 500, this), CFG_COMMOND.isOpen(UIConst.CAST) && DisplayUtil.addBy(this.btnDZ, this.btnGroup), CFG_COMMOND.isOpen(UIConst.PET) && DisplayUtil.addBy(this.btnPet, this.btnGroup), CFG_COMMOND.isOpen(UIConst.HUOBANPAGE) && DisplayUtil.addBy(this.btnHB, this.btnGroup)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.updateTime)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.updateTime = function (t, e) {
        t.timeremain -= e;
        var i = Math.ceil(t.timeremain / 1e3);
        0 > i && (i = 0, t.closeHandler()), t.btnok.label = "关闭(" + i + ")"
    }, e.prototype.onBtnT = function (t) {
        t.target == this.btnDZ ? GameGlobal.layerMgr.open(UIConst.CAST) : t.target == this.btnPet ? GameGlobal.layerMgr.open(UIConst.PET) : t.target == this.btnHB && GameGlobal.layerMgr.open(UIConst.HUOBANPAGE)
    }, e
}(BaseEUIView);
__reflect(VGuanQiaLose.prototype, "VGuanQiaLose");
var VGuanQiaOffLine = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "GuanQiaOffLineSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.rect).addCloseListen(this.btnok), this.btnVip.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onViptHand, this), VoMonthWeekKa.getInst().monthState ? this.btnVip.visible = !1 : this.btnVip.visible = !0
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = GameGlobal.modelGuanqia.offLineData,
            o = DateUtil.getHMSBySecond(i.time);
        this.lbTime.text = o, this.lbYL.text = "" + i.yl, this.lbExp.text = "" + i.exp, this.lbEquip.text = "" + i.numEquip, this.lbYLE.text = "" + i.ylcard, this.lbExpE.text = "" + i.expcard, this.lbShouJue.text = "" + i.shoujue, this.lbSold.text = null != i.numSold ? Lang.reTxt("背包已满，自动出售{0}件装备", i.numSold) : "", this.onTestDes(), GameGlobal.modelyuekazhouka.on(ModelYueKaZhouka.msg_monthWeedka, this.onTestDes, this)
    }, e.prototype.onTestDes = function () {
        var t = VoMonthWeekKa.getInst().monthState;
        t > 0 ? this.txtDes.text = "(最多累计14小时离线收益)" : this.txtDes.text = "(最多累计8小时离线收益)"
    }, e.prototype.onViptHand = function () {
        this.closeHandler(), GameGlobal.layerMgr.open(UIConst.FULIDATING, UIConst.YUEKA)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelyuekazhouka.off(ModelYueKaZhouka.msg_monthWeedka, this.onTestDes, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VGuanQiaOffLine.prototype, "VGuanQiaOffLine");
var VGuanQiaRnk = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/guanqia/GuanQiaRnkSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.base.title = "关卡排名", this.addCloseListen(this.base.btnReturn), this.addCloseListen(this.base.btnClose), this.itemList.dataProvider = this.itemListData = new eui.ArrayCollection, this.itemList.itemRendererFunction = VGuanQiaRnkItem.creatWithData
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), GameGlobal.modelGuanqia.CG_RANK(0, 20)
    }, e.prototype.onClose = function () {}, e.prototype.update = function () {
        var t = GameGlobal.modelGuanqia;
        this.itemListData.source = t.myRankData, this.lbMyRnk.text = "我的排名:" + (t.myRank >= 1 ? t.myRank : "未上榜"), this.lbMyNum.text = "我的通关数:" + (t.guanqia - 1)
    }, e
}(BaseEUIView);
__reflect(VGuanQiaRnk.prototype, "VGuanQiaRnk");
var VGuanQiaRnkItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/guanqia/GKRnkItemSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {}, e.creatWithData = function (t) {
        return e
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, t && (this.lbRnk.text = "" + t[0], this.lbName.text = t[2], this.lbStr.text = "" + t[3], this.lbNum.text = "" + t[4])
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.bg.source = "CM2_json.bg1" : this.bg.source = "CM2_json.bg2"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VGuanQiaRnkItem.prototype, "VGuanQiaRnkItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VQiuZhu = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.lastSOSTime = -1e6, e.skinName = "QiuZhu", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.sendToWorld), this.sendToWorld.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onWorldT, this), this.sendToGang.visible = !1
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e)
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onWorldT = function () {
        var t = App.serverTimestamp;
        return t - this.lastSOSTime <= 18e4 ? void ViewText.text("3分钟内只能请求协助一次") : (this.lastSOSTime = t, void(3 - GameGlobal.modelGuanqia.sosTimes > 0 ? (ViewText.text("求助已发送"), GameGlobal.modelGuanqia.CG1113(), this.closeHandler()) : ViewText.text("今天求助次数已满")))
    }, e
}(BaseEUIView);
__reflect(VQiuZhu.prototype, "VQiuZhu");
var View_HeroHead = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/main/HeadSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this,
            e = egret.TouchEvent.TOUCH_TAP;
        DisplayUtil.popBtnStyle(t.btnVip), DisplayUtil.popBtnStyle(t.btnRank), DisplayUtil.popBtnStyle(this.iconYueKa), DisplayUtil.popBtnStyle(this.iconZhouKa);
        var i = t.imgTextStr = new ImageText;
        i.makeContainer(), i.container.scaleX = i.container.scaleY = .7, i.container.x = 118, i.container.y = 46, i.charFunc = ImageText.STRFUNC, t.addChild(i.container), t.textVip = new ImageText, t.textVip.fx = 0, t.textVip.fy = 9, t.textVip.container = t.btnVip, t.textVip.charFunc = ImageText.VIPFUNC, t.updateVip(), t.phbNotice(), t.btnRank.addEventListener(e, t.onRankT, t), t.btnVip.addEventListener(e, t.onVipT, t), t.iconZhouKa.addEventListener(e, t.onZhoukaYueka, t), t.iconYueKa.addEventListener(e, t.onZhoukaYueka, t), t.imgHead.addEventListener(e, t.onHeadT, t)
    }, e.prototype.onRankT = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.PANGHANGBANG, !0) && GameGlobal.layerMgr.open(UIConst.PAIHANGBANG)
    }, e.prototype.onVipT = function () {
        GameGlobal.layerMgr.open(UIConst.VIEWVIP)
    }, e.prototype.onHeadT = function () {
        GameGlobal.layerMgr.open(UIConst.HERODETAIL)
    }, e.prototype.onBuffT = function () {
        GameGlobal.layerMgr.open(UIConst.BUFFLIST)
    }, e.prototype.onZhoukaYueka = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.iconZhouKa:
                GameGlobal.layerMgr.open(UIConst.FULIDATING, UIConst.ZHOUKA);
                break;
            case this.iconYueKa:
                GameGlobal.layerMgr.open(UIConst.FULIDATING, UIConst.YUEKA)
        }
    }, e.prototype.updateZhouYueKa = function () {
        var t = VoMonthWeekKa.getInst();
        1 == t.monthState ? DisplayUtil.addBy(this.iconYueKa, this.zhouYueKaGp) : DisplayUtil.remove(this.iconYueKa), 1 == t.weekState ? DisplayUtil.addBy(this.iconZhouKa, this.zhouYueKaGp) : DisplayUtil.remove(this.iconZhouKa)
    }, e.prototype.loadHead = function () {
        var t = GameGlobal.modelRole.voMine,
            e = IconUtil.getRoleHead(t.job);
        this.imgHead.source = e
    }, e.prototype.onHeadLoaded = function (t) {}, e.prototype.addMsg = function () {
        GameGlobal.modelRole.on(ModelRole.MSG_CHANGE, this.updateStr, this), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.onBaseInfo, this), GameGlobal.modelVip.on(ModelVIP.msg_data, this.vipInfo, this), GameGlobal.modelpaihangbang.on(ModelPaiHangBang.msg_wordship, this.phbNotice, this), GameGlobal.modelyuekazhouka.on(ModelYueKaZhouka.msg_notice, this.updateZhouYueKa, this), GameGlobal.modelXSBuff.on(ModelXSBuff.MSG_ADDBUFF, this.updateBuffIco, this), GameGlobal.modelXSBuff.on(ModelXSBuff.MSG_DELBUFF, this.updateBuffIco, this), GameGlobal.modelBuff.on(ModelBuff.MSG_ADDBUFF, this.onAddBuff, this), GameGlobal.modelBuff.on(ModelBuff.MSG_DELBUFF, this.onDelBuff, this), EventCenter.addMsg(FWorld.Event.ADD_BUFF, this.addFworldBuff, this);
        var t = GameCtrlBase.instance;
        t.on(ModelBattle.GC_504, this.removeFworldBuff, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelRole.off(ModelRole.MSG_CHANGE, this.updateStr, this), GameGlobal.modelVip.off(ModelVIP.msg_data, this.vipInfo, this), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.onBaseInfo, this), GameGlobal.modelpaihangbang.off(ModelPaiHangBang.msg_wordship, this.phbNotice, this), GameGlobal.modelyuekazhouka.off(ModelYueKaZhouka.msg_notice, this.updateZhouYueKa, this), GameGlobal.modelXSBuff.off(ModelXSBuff.MSG_ADDBUFF, this.updateBuffIco, this), GameGlobal.modelXSBuff.off(ModelXSBuff.MSG_DELBUFF, this.updateBuffIco, this), GameGlobal.modelBuff.off(ModelBuff.MSG_ADDBUFF, this.onAddBuff, this), GameGlobal.modelBuff.off(ModelBuff.MSG_DELBUFF, this.onDelBuff, this), EventCenter.removeMsg(FWorld.Event.ADD_BUFF, this.addFworldBuff, this);
        var t = GameCtrlBase.instance;
        t.off(ModelBattle.GC_504, this.removeFworldBuff, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.loadHead(), this.onBaseInfo(), this.updateStr(), this.vipInfo(), this.updateZhouYueKa(), GameGlobal.modelXSBuff.buffArr.length > 0 && this.addBuffIco(), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), this.removeFworldBuff(ModelBattle.BT_F_WORLD)
    }, e.prototype.onSize = function () {
        this.y = 43 + platform.deviceTopPX
    }, e.prototype.vipInfo = function () {
        var t = VoVip.inst;
        if (!t.infos || VoVip.isTasteVip()) return void this.vipNotice(!1);
        GameGlobal.modelRole.voMine.vip < t.level && Vo_smdl.isTriVip(t.level), GameGlobal.modelRole.voMine.vip = t.level;
        for (var e = t.infos.getLength(), i = !1, o = 0; e > o; o++) {
            var n = t.infos.getByIndex(o);
            if (1 == n.status) {
                i = !0;
                break
            }
        }
        this.vipNotice(i), this.updateVip()
    }, e.prototype.updateVip = function () {
        var t = GameGlobal.modelRole.voMine.vip,
            e = "V" + t,
            i = e.length;
        this.textVip.fx = 45 - (52 + 14 * (i - 1) >> 1), this.textVip.setText(e)
    }, e.prototype.vipNotice = function (t) {
        this.iconNotice.visible = t
    }, e.prototype.phbNotice = function () {
        var t = GameGlobal.modelpaihangbang.notice();
        this.iconPHB.visible = t
    }, e.prototype.updateStr = function () {
        this.imgTextStr.setText("" + GameGlobal.modelRole.voMine.str)
    }, e.prototype.onBaseInfo = function () {
        this.updateStr(), this.lbLV.$setText("Lv." + GameGlobal.modelRole.voMine.level), this.lbName.$setX(this.lbLV.$getX() + this.lbLV.textWidth + 5), this.lbName.$setText(GameGlobal.modelRole.voMine.name), this.updateVip()
    }, e.prototype.listBuff = function () {
        for (var t = GameGlobal.modelBuff.buffArr, e = 0, i = t.length; i > e; e++) {
            var o = t[e];
            this.onAddBuff(o)
        }
    }, e.prototype.onAddBuff = function (t) {
        if (!this.buffGrp) {
            this.buffGrp = new eui.Group, this.buffGrp.x = 320;
            var e = new eui.TileLayout;
            this.buffGrp.layout = e
        }
        if (-1 == this.getBuffIndex(t.id)) {
            var i = new ViewBuffIco;
            i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBuffTouch, this), i.setVo(t), i.updateTime(), this.buffGrp.addChild(i), 1 == this.buffGrp.numChildren && (this.addChild(this.buffGrp), GameGlobal.tick.addInterv(this.onBuffTimeUd, 1e3, this))
        }
    }, e.prototype.onDelBuff = function (t) {
        var e = this.getBuffIndex(t.id);
        if (this.buffGrp) {
            if (-1 != e) {
                var i = this.buffGrp.$doRemoveChild(e, !1);
                i.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBuffTouch, this)
            }
            this.buffGrp.numChildren || (GameGlobal.tick.removeInterv(this.onBuffTimeUd, this), this.removeChild(this.buffGrp))
        }
    }, e.prototype.getBuffIndex = function (t) {
        if (this.buffGrp)
            for (var e = 0, i = this.buffGrp.$children.length; i > e; e++) {
                var o = this.buffGrp.$children[e];
                if (o && o._vo.id == t) return e
            }
        return -1
    }, e.prototype.onBuffTimeUd = function (t) {
        for (var e = 0, i = t.buffGrp.$children.length; i > e; e++) {
            var o = t.buffGrp.$children[e];
            o.updateTime()
        }
    }, e.prototype.onBuffTouch = function (t) {
        var e = t.currentTarget;
        e._vo && 1 == e._vo.id && GameGlobal.layerMgr.open(UIConst.TASTEVIPING)
    }, e.prototype.updateBuffIco = function () {
        GameGlobal.modelXSBuff.buffArr.length > 0 ? this.addBuffIco() : (this.removeBuffIco(), GameGlobal.layerMgr.close(UIConst.BUFFLIST), GameGlobal.layerMgr.close(UIConst.BUFFINFO))
    }, e.prototype.addBuffIco = function () {
        this.buffIcon || (this.buffIcon = EffectMgr.addEff("uieff/buffIco", this, 315, 115, 1e3, -1, !0), this.buffIcon.touchEnabled = !0, this.buffIcon.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBuffT, this))
    }, e.prototype.removeBuffIco = function () {
        this.buffIcon && (EffectMgr.getIns().removeEff(this.buffIcon), this.buffIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBuffT, this), this.buffIcon.touchEnabled = !1, this.buffIcon = null)
    }, e.prototype.addFworldBuff = function (t) {
        var e = t.data;
        if (!this.fworldBuff.numChildren) {
            for (var i = 0; i < e.length; i++) {
                var o = e[i],
                    n = new BuffIcon;
                n.setInBattleContent(o.icon, o.attribute), this.fworldBuff.addChild(n)
            }
            this.fworldBuff.x = 560
        }
    }, e.prototype.removeFworldBuff = function (t) {
        if (t == ModelBattle.BT_F_WORLD) {
            var e = this.fworldBuff.numChildren;
            if (e > 0)
                for (var i = 0; e > i; i++) {
                    var o = this.fworldBuff.getChildAt(i);
                    this.fworldBuff.removeChild(o), o = null, e--, i--
                }
        }
    }, e
}(BaseEUIView);
__reflect(View_HeroHead.prototype, "View_HeroHead");
var VWorldMapEntry = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/main/WorldMapEntry.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onWorld, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.tick.addInterv(this.interv, 500, this), this.updateMapN(), GameGlobal.modelMap.on(ModelMap.MSG_MAPTITLECHANGE, this.updateMapN, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.interv), GameGlobal.modelMap.off(ModelMap.MSG_MAPTITLECHANGE, this.updateMapN, this)
    }, e.prototype.onSize = function () {
        this.x = GameGlobal.stage.stageWidth - this.skin.width, this.y = 50 + platform.deviceTopPX
    }, e.prototype.updateMapN = function () {
        this.lbMapName.text = GameGlobal.modelMap.mapTitleText
    }, e.prototype.onWorld = function () {
        GameGlobal.layerMgr.open(UIConst.WORLDMAP)
    }, e.prototype.interv = function (t, e) {
        var i = GameGlobal.modelRole.voMine.sceneChars[0];
        i && !GameGlobal.mapScene.map.isLoading && t.lbPos.$setText("(" + (i.x / 100 >> 0) + " , " + (i.y / 100 >> 0) + ")")
    }, e
}(BaseEUIView);
__reflect(VWorldMapEntry.prototype, "VWorldMapEntry");
var ItemHJJL = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemHJJLSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.hjjl.textFlow = HtmlUtil.parse(t.playerName.toString() + "  " + HtmlUtil.color("获得了", "#769042") + "  " + HtmlUtil.color(CFG_Item.LIB[t.itemId].name + " * " + t.itemNumber, "#FF0000"))
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemHJJL.prototype, "ItemHJJL");
var ItemXYDJDZ = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemXYDJDZSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtPlayerName.text = t.playerName.toString(), this.txtItem.text = t.itemNumber + "份"
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.backGround.source = "CM2_json.bg2" : this.backGround.source = "CM2_json.bg1"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemXYDJDZ.prototype, "ItemXYDJDZ");
var ModelHYDT = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(4032, i.GC4032, i), e.regHand(4034, i.GC4034, i), e.regHand(4036, i.GC4036, i)
    }, e.prototype.CG4031 = function () {
        var t = this.getBytes();
        this.sendSocket(4031, t)
    }, e.prototype.GC4032 = function (t, i) {
        var o = i.readShort(),
            n = i.readInt(),
            a = i.readInt(),
            s = i.readShort(),
            r = {
                yiGouNumber: o,
                shouChuNumber: n,
                remainNumber: a,
                id: s
            };
        t.notify(e.MSG_hongYunPage, r)
    }, e.prototype.CG4033 = function () {
        var t = this.getBytes();
        this.sendSocket(4033, t)
    }, e.prototype.GC4034 = function (t, i) {
        for (var o = i.readShort(), n = [], a = 0; o > a; a++) {
            var s = i.readUTF(),
                r = i.readInt(),
                l = i.readInt(),
                h = {
                    playerName: s,
                    itemId: r,
                    itemNumber: l
                };
            n.push(h)
        }
        t.notify(e.MSG_huoJiangJiLu, n)
    }, e.prototype.CG4035 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(4035, e)
    }, e.prototype.GC4036 = function (t, e) {
        var i = e.readByte();
        1 == i ? (GameGlobal.modelHYDT.CG4031(), GameGlobal.layerMgr.open(UIConst.QGJG)) : 2 == i ? ViewText.text("不在购买时间！") : 3 == i ? ViewAlert.show("元宝不足，是否前往充值?", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        }) : 4 == i && ViewText.text("物品已售完！")
    }, e.MSG_hongYunPage = "MSG_hongYunPage", e.MSG_huoJiangJiLu = "MSG_huoJiangJiLu", e
}(BaseModel);
__reflect(ModelHYDT.prototype, "ModelHYDT");
var View_hongYunPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "HongYunDangTouSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.imgText = new ImageText, this.imgText.charFunc = ImageText.CZUIVIP, this.imgText.container = this.textGrp, this.addCloseListen(this.btnClose), this.btnRecharge.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), DisplayUtil.popBtnStyle(this.btn_sqjl), this.btn_sqjl.touchEnabled = !0, this.btn_sqjl.textFlow = HtmlUtil.underLine("上期奖励"), this.btn_sqjl.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSQJL, this), this.btn_help.addEventListener(egret.TouchEvent.TOUCH_TAP, this.OnHelp, this), this.btnRech.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        }, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "mrsc_BG_png"), GameGlobal.modelHYDT.CG4031(), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bg), this.removeMsg()
    }, e.prototype.onT = function () {
        var t = App.serverTimestamp,
            e = DateUtils.getDate(t),
            i = e.hours,
            o = e.minutes;
        0 == i && o >= 0 && 4 >= o ? ViewText.text("非购买时间！") : GameGlobal.modelHYDT.CG4035(this.sendId)
    }, e.prototype.onSQJL = function () {
        GameGlobal.layerMgr.open(UIConst.HJJL, this.sendId)
    }, e.prototype.OnHelp = function () {
        ViewWenHao.show(CFG_COMMOND.LIBWFSM[1108].detail, 24)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function () {
        this.gmxh.text = CFG_HYDT.LIB[101].gmxh.split(",")[2];
        var t = CFG_HYDT.LIB[101].xyjljz.split(",")[2];
        this.imgText.setText(t);
        var e = CFG_HYDT.LIB[101].gmxh.split(",")[0],
            i = ConfigHelp.makeVoList(e)[0],
            o = IconUtil.getIconUrl(i.icon);
        this.yuanbao.source = o;
        var n = CFG_HYDT.LIB[101].bdjl2;
        ConfigHelp.makeStrGrids(n, this.grids, 0, 0, this.container, !0);
        var a = CFG_HYDT.LIB[101].xydj,
            s = ConfigHelp.makeVoList(a)[0];
        s.quality < 5 && (s.quality = 5), this.grid0.data = s, this.grid0.enableTip(), this.grid0.isShowEff(!0)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelHYDT.on(ModelHYDT.MSG_hongYunPage, this.onUpdate, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelHYDT.off(ModelHYDT.MSG_hongYunPage, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        if (0 != t.id) {
            var e = t.id;
            this.sendId = e, this.gmxh.text = CFG_HYDT.LIB[e].gmxh.split(",")[2];
            var i = CFG_HYDT.LIB[e].xyjljz.split(",")[2];
            this.imgText.setText(i);
            var o = CFG_HYDT.LIB[e].gmxh.split(",")[0],
                n = ConfigHelp.makeVoList(o)[0],
                a = IconUtil.getIconUrl(n.icon);
            this.yuanbao.source = a;
            var s = CFG_HYDT.LIB[e].bdjl2;
            ConfigHelp.makeStrGrids(s, this.grids, 0, 0, this.container, !0);
            var r = CFG_HYDT.LIB[e].xydj,
                l = ConfigHelp.makeVoList(r)[0];
            l.quality < 5 && (l.quality = 5), this.grid0.data = l, this.grid0.enableTip(), this.grid0.isShowEff(!0), this.numYiGou.text = t.yiGouNumber, this.numShouChu.text = t.shouChuNumber, this.numRemain.text = t.remainNumber
        }
    }, e
}(BaseEUIView);
__reflect(View_hongYunPage.prototype, "View_hongYunPage");
var View_shangQiJiangLi = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.sourceDataXY = new eui.ArrayCollection, e.skinName = "shangQiJiangLiSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.Scroller.viewport = this.container, this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemHJJL, this.xinYunContainer.dataProvider = this.sourceDataXY, this.xinYunContainer.itemRenderer = ItemXYDJDZ, this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "record_BG_png"), IconUtil.setIconSrc(this.bg2, "record_BG2_png"), GameGlobal.modelHYDT.CG4033(), this.curId = e, this.addMsg(), this.update()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bg), IconUtil.setIconSrc(this.bg2), this.removeMsg()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function () {
        this.notice.text = "暂无记录！"
    }, e.prototype.addMsg = function () {
        GameGlobal.modelHYDT.on(ModelHYDT.MSG_huoJiangJiLu, this.onUpdate, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelHYDT.off(ModelHYDT.MSG_huoJiangJiLu, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        if (0 != t.length) {
            t.length > 0 && (this.notice.text = "");
            var e = "1," + t[0].itemId.toString() + ",1",
                i = ConfigHelp.makeVoList(e)[0];
            i.quality < 5 && (i.quality = 5), this.grid0.data = i, this.grid0.enableTip(), this.grid0.isShowEff(!0);
            for (var o = [], n = [], a = 0; a < t.length; a++) o.push(t[a]), n.push(t[a]);
            this.sourceData.source = n
        } else {
            var s = GameGlobal.modelLogin.getSerTime() / 1e3 >> 0,
                r = (DateUtil.getMDHM(s), parseInt(DateUtil.getMDHM(s).slice(5, 8)));
            if (r >= 21) {
                var l = CFG_HYDT.LIB[this.curId].xydj,
                    i = ConfigHelp.makeVoList(l)[0];
                i.quality < 5 && (i.quality = 5), this.grid0.data = i, this.grid0.enableTip(), this.grid0.isShowEff(!0)
            } else if (101 == this.curId) {
                var l = CFG_HYDT.LIB[101].xydj,
                    i = ConfigHelp.makeVoList(l)[0];
                i.quality < 5 && (i.quality = 5), this.grid0.data = i, this.grid0.enableTip(), this.grid0.isShowEff(!0)
            } else {
                var l = CFG_HYDT.LIB[this.curId - 100].xydj,
                    i = ConfigHelp.makeVoList(l)[0];
                i.quality < 5 && (i.quality = 5), this.grid0.data = i, this.grid0.enableTip(), this.grid0.isShowEff(!0)
            }
        }
    }, e
}(BaseEUIView);
__reflect(View_shangQiJiangLi.prototype, "View_shangQiJiangLi");
var ViewResult = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "buyAlertSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose).addCloseListen(this.btnSure), this.btnSure.label = "关闭", this.lbResult.text = "恭喜您，成功购买1份彩礼！   每晚21时开奖（需出售达" + CFG_HYDT.LIB[101].xgmfs.toString() + "份以上彩礼），祝您喜中头彩！", DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnSure)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.resetTime(), GameGlobal.tick.addInterv(this.tick, 1e3, this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.tick.removeInterv(this.tick)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.resetTime = function () {
        this.closeSec = 3, this.updateTime()
    }, e.prototype.tick = function (t) {
        t.closeSec -= 1, t.updateTime(), t.closeSec <= 0 && t.closeHandler()
    }, e.prototype.updateTime = function () {
        this.btnSure.label = "关闭(" + this.closeSec + ")"
    }, e
}(BaseEUIView);
__reflect(ViewResult.prototype, "ViewResult");
var ModelHJSD = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(3702, this.GC3702, this), e.regHand(3704, this.GC3704, this), e.regHand(3708, this.GC3708, this), e.regHand(3710, this.GC3710, this), e.regHand(3722, this.GC3722, this), e.regHand(3724, this.GC3724, this), e.regHand(3726, this.GC3726, this), e.regHand(3742, this.GC3742, this), e.regHand(3744, this.GC3744, this), e.regHand(3746, this.GC3746, this), e.regHand(3732, this.GC3732, this), e.regHand(3734, this.GC3734, this), e.regHand(3736, this.GC3736, this)
    }, e.prototype.CG3701 = function () {
        this.sendSocket(3701, this.getBytes())
    }, e.prototype.GC3702 = function (t, i) {
        var o = VoSSHaoLing;
        o.awardGotSt = i.readByte(), o.leftCount = i.readByte(), o.leftCanButCnt = i.readByte(), o.updateDatas(i.readInt());
        for (var n = i.readShort(), a = 0; n > a; a++) {
            var s = i.readInt();
            o.refTime(a, s)
        }
        t.notify(e.msg_datas_sshl)
    }, e.prototype.CG3703 = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeByte(e), this.sendSocket(3703, i)
    }, e.prototype.GC3704 = function (t, e) {
        var i = e.readByte();
        1 == i ? t.CG3701() : ViewText.text([null, null, "失败", "挑战次数不足", "副本正在刷新"][i])
    }, e.prototype.CG3707 = function () {
        this.sendSocket(3707, this.getBytes())
    }, e.prototype.GC3708 = function (t, e) {
        var i = e.readByte();
        1 == i ? t.CG3701() : ViewText.text([null, null, "元宝不足", "今日购买次数已用完"][i])
    }, e.prototype.CG3709 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeShort(e), this.sendSocket(3709, i)
    }, e.prototype.GC3710 = function (t, e) {
        var i = e.readByte();
        1 == i ? t.CG3701() : ViewText.text([null, null, "元宝不足"][i])
    }, e.prototype.CG3741 = function () {
        this.sendSocket(3741, this.getBytes())
    }, e.prototype.GC3742 = function (t, i) {
        var o = VoSSRongYao;
        o.map.clear(), o.rongYaoValue = i.readInt(), o.hasGotAwardId = i.readByte();
        for (var n = i.readShort(), a = 0; n > a; a++) {
            var s = i.readShort(),
                r = i.readShort(),
                l = i.readByte();
            VoSSRongYao.update(s, r, l)
        }
        t.notify(e.msg_datas_ssry)
    }, e.prototype.CG3743 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3743, e)
    }, e.prototype.GC3744 = function (t, e) {
        var i = e.readByte();
        1 == i ? (t.CG3741(), GameGlobal.layerMgr.close(UIConst.VSSAWARDTIP)) : ViewText.text([null, null, "积分不足", "已经领取过了"][i])
    }, e.prototype.CG3745 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(3745, e)
    }, e.prototype.GC3746 = function (t, e) {
        var i = e.readByte();
        1 == i ? t.CG3741() : ViewText.text([null, null, "已经领取", "条件未达成"][i])
    }, e.prototype.CG3721 = function () {
        this.sendSocket(3721, this.getBytes())
    }, e.prototype.GC3722 = function (t, i) {
        for (var o = VoSSBaoDian, n = i.readShort(), a = 0; n > a; a++) {
            for (var s = i.readShort(), r = [], l = 0, h = i.readShort(); h > l; l++) {
                var c = {};
                c.index = i.readByte(), c.state = i.readByte(), r.push(c)
            }
            var p = i.readByte();
            o.update(s, r, p)
        }
        o.updateLocks(i.readByte()), t.notify(e.msg_datas_ssbz)
    }, e.prototype.CG3723 = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeByte(e), this.sendSocket(3723, i)
    }, e.prototype.GC3724 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = ConfigHelp.parseServItems(e);
            GameGlobal.layerMgr.open(UIConst.VBAOXIANGTIPS, o)
        } else if (100 == i) {
            var o = ConfigHelp.parseServItems(e);
            VBDGetAward.fistAwardGet = !0, GameGlobal.layerMgr.open(UIConst.VBAOXIANGTIPS, o)
        } else ViewText.text([null, null, "盛典钥匙不足，无法开启", "背包已满", "该箱子已经开启过了"][i]), 3 == i && GameGlobal.layerMgr.open(UIConst.EQUIPRL)
    }, e.prototype.CG3725 = function () {
        this.sendSocket(3725, this.getBytes())
    }, e.prototype.GC3726 = function (t, i) {
        for (var o = [], n = 0, a = i.readShort(); a > n; n++) {
            var s = {};
            s.time = i.readInt();
            var r = i.readByte(),
                l = i.readInt(),
                h = i.readShort(),
                c = ConfigHelp.makeVoList(r + "," + l + "," + h)[0];
            s.award = c, o.push(s)
        }
        t.notify(e.msg_datas_bzRec, o)
    }, e.prototype.CG3731 = function () {
        this.sendSocket(3731, this.getBytes())
    }, e.prototype.GC3732 = function (t, i) {
        var o = VoSSChongZhi,
            n = i.readByte(),
            a = i.readShort();
        o.update(a, n), o.leiJiAwardGotSt = i.readByte(), o.toDayCZValue = i.readInt(), o.leiJiCZDays = i.readInt(), t.notify(e.msg_datas_czxl)
    }, e.prototype.CG3733 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3733, e)
    }, e.prototype.GC3734 = function (t, e) {
        var i = e.readByte();
        1 == i ? t.CG3731() : (ViewText.text([null, null, "该奖励已领取", "充值金额未达标", "背包已满"][i]), 4 == i && ViewAlert.show("背包已满，是否清理背包？", function () {
            GameGlobal.layerMgr.open(UIConst.EQUIPRL)
        }))
    }, e.prototype.CG3735 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(3735, e)
    }, e.prototype.GC3736 = function (t, e) {
        var i = e.readByte();
        1 == i ? t.CG3731() : (ViewText.text([null, null, "该奖励已领取", "充值天数不够", "背包已满"][i]), 4 == i && ViewAlert.show("背包已满，是否清理背包？", function () {
            GameGlobal.layerMgr.open(UIConst.EQUIPRL)
        }))
    }, e.msg_datas_sshl = "msg_datas_sshl", e.msg_datas_ssry = "msg_datas_ssry", e.msg_datas_ssbz = "msg_datas_ssbz", e.msg_datas_bzRec = "msg_datas_bzRec", e.msg_datas_czxl = "msg_datas_czxl", e
}(BaseModel);
__reflect(ModelHJSD.prototype, "ModelHJSD");
var ViewHJSDMain = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewHJSDMainSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.createTabGroup(), this.base.addTab("盛典号令", 0, UIConst.SHENGSHIHAOLING), this.base.addTab("盛典荣耀", 1, UIConst.SHENGSHIRONGYAO), this.base.addTab("盛典宝藏", 2, UIConst.SHENGSHIBAODIAN), this.base.addTab("充值献礼", 3, UIConst.CHONGZHIXIANLI), this.base.listenTabClick(this.onSel, this), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn);
        var e = GameGlobal.layerMgr;
        e.reg(UIConst.SHENGSHIHAOLING, VPageSSHL, this), e.reg(UIConst.SHENGSHIRONGYAO, VPageSSRY, this), e.reg(UIConst.SHENGSHIBAODIAN, VPageSSBD, this), e.reg(UIConst.CHONGZHIXIANLI, VPageCZXL, this)
    }, e.prototype.onSel = function (t) {
        var e = t.sort;
        this.setSel(e)
    }, e.prototype.setSel = function (t) {
        switch (this._index) {
            case 0:
                GameGlobal.layerMgr.close(UIConst.SHENGSHIHAOLING);
                break;
            case 1:
                GameGlobal.layerMgr.close(UIConst.SHENGSHIRONGYAO);
                break;
            case 2:
                GameGlobal.layerMgr.close(UIConst.SHENGSHIBAODIAN);
                break;
            case 3:
                GameGlobal.layerMgr.close(UIConst.CHONGZHIXIANLI)
        }
        switch (t) {
            case 0:
                GameGlobal.layerMgr.open(UIConst.SHENGSHIHAOLING);
                break;
            case 1:
                GameGlobal.layerMgr.open(UIConst.SHENGSHIRONGYAO);
                break;
            case 2:
                GameGlobal.layerMgr.open(UIConst.SHENGSHIBAODIAN);
                break;
            case 3:
                GameGlobal.layerMgr.open(UIConst.CHONGZHIXIANLI)
        }
        this.base.setTabSelIdx(t), this.base.title = this.base.getTbtnTextBySort(t), this._index = t
    }, e.prototype.addMsg = function () {
        GameGlobal.modelHJSD.on(ModelHJSD.msg_datas_sshl, this.setNotice, this), GameGlobal.modelHJSD.on(ModelHJSD.msg_datas_ssry, this.setNotice, this), GameGlobal.modelHJSD.on(ModelHJSD.msg_datas_ssbz, this.setNotice, this), GameGlobal.modelHJSD.on(ModelHJSD.msg_datas_czxl, this.setNotice, this), GameGlobal.modelHJSD.CG3701(), GameGlobal.modelHJSD.CG3731(), GameGlobal.modelHJSD.CG3741()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelHJSD.off(ModelHJSD.msg_datas_sshl, this.setNotice, this), GameGlobal.modelHJSD.off(ModelHJSD.msg_datas_ssry, this.setNotice, this), GameGlobal.modelHJSD.off(ModelHJSD.msg_datas_ssbz, this.setNotice, this), GameGlobal.modelHJSD.off(ModelHJSD.msg_datas_czxl, this.setNotice, this)
    }, e.prototype.setNotice = function () {
        this.base.setNoticByIndex(0, VoSSHaoLing.notice()), this.base.setNoticByIndex(1, VoSSRongYao.notice()), this.base.setNoticByIndex(2, VoSSBaoDian.notice()), this.base.setNoticByIndex(3, VoSSChongZhi.notice())
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), void 0 == e ? this.setSel(0) : this.setSel(parseInt(e)), this.setNotice(), this.addMsg()
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(ViewHJSDMain.prototype, "ViewHJSDMain");
var ItemBZRec = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemBZRecSkin"
    }, Object.defineProperty(e.prototype, "data", {
        set: function (t) {
            this._data = t, this.txtTime.text = DateUtil.getYMDHM(t.time), this.txtAward.textFlow = HtmlUtil.parse("开启宝箱获得" + ColorSet(t.award.name + "x" + t.award.count, "#10a244"))
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemBZRec.prototype, "ItemBZRec");
var ItemSSBD = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.baoxiangs = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemSSBDSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        for (var e = 0; 9 > e; e++) {
            var i = this["iconBX" + e];
            this.baoxiangs.push(i), i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGetLitAward, this)
        }
        this.gridCost.enableTip(), this.gridAward.enableTip()
    }, e.prototype.onGetLitAward = function (t) {
        var e = t.currentTarget,
            i = this.baoxiangs.indexOf(e);
        i >= 0 && GameGlobal.modelHJSD.CG3723(this.data.cfg.id, i)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, 1 == t.lockState ? (this.awardLock.visible = !0, this.totalLock.visible = !0) : (this.awardLock.visible = !1, this.totalLock.visible = !1), this.gridAward.data = ConfigHelp.makeVoList(t.cfg.zdjl)[0], this.gridAward.isShowEff(!0);
            var e = ConfigHelp.makeVoList(t.cfg.kxxh)[0];
            this.gridCost.data = e, this.txtLayer.text = t.cfg.rw;
            var i = ConfigHelp.costTxt(e);
            this.txtCost.textFlow = i, this.iconBigAdGot.visible = 2 == t.bigAwardGot, this.updateBaoXiangSt()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateBaoXiangSt = function () {
        for (var t = this.data.bxOpenedInfo, e = 0; e < t.length; e++) {
            var i = t[e],
                o = i.index,
                n = this.baoxiangs[o],
                a = this["iconOpened" + o];
            2 == i.state ? (n.source = "HJSDAtlas_json.bxOpened", a.visible = !0) : (n.source = "HJSDAtlas_json.bxClose", a.visible = !1)
        }
        if (0 == t.length)
            for (var e = 0; e < this.baoxiangs.length; e++) n = this.baoxiangs[e], a = this["iconOpened" + e], n.source = "HJSDAtlas_json.bxClose", a.visible = !1
    }, e.prototype.showUnLockEff = function () {
        EffectMgr.addEff("uieff/hjsdUnLock", this, 320, 190, 1e3, 1e3)
    }, e
}(ItemBase);
__reflect(ItemSSBD.prototype, "ItemSSBD");
var ItemSSCZ = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.gridArr = [], e.bigAwards = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemSSCZSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnHandLJC.label = "领取", DisplayUtil.popBtnStyle(this.btnHandEry), this.btnHandEry.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHandLJC.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this);
        for (var e = 0; 5 > e; e++) {
            var i = this["grid" + e];
            i.enableTip(), this.bigAwards.push(i)
        }
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        if (0 != e.enabled) switch (e) {
            case this.btnHandEry:
                GameGlobal.modelHJSD.CG3733(this.data.cfg.id);
                break;
            case this.btnHandLJC:
                GameGlobal.modelHJSD.CG3735(VoSSChongZhi.leiJiCZDays)
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = VoSSChongZhi;
            this.txtHasLJCZ.text = "已累计充值" + e.leiJiCZDays + "天";
            var i = e.toDayCZValue,
                o = t.cfg,
                n = o.mrcz - i;
            if (this.txtEryRMB.text = o.mrcz + "", n > 0) this.txtCZGot.text = "今日再充值" + n + "元可领", this.iconNotice.visible = !1, this.btnHandEry.visible = !0;
            else switch (this.btnHandEry.visible = !0, t.gotState) {
                case 0:
                    this.txtCZGot.text = "今日奖励", this.iconNotice.visible = !1;
                    break;
                case 1:
                    this.txtCZGot.text = "今日可领奖励", this.iconNotice.visible = !0;
                    break;
                case 2:
                    this.txtCZGot.text = "今日奖励已领", this.iconNotice.visible = !1, this.btnHandEry.visible = !1
            }
            if (n = o.ts - e.leiJiCZDays, this.txtEryRMB2.text = o.mrcz + "", this.txtLJDay.text = o.ts + "", n > 0) this.btnHandLJC.visible = !1;
            else switch (this.btnHandLJC.visible = !0, e.leiJiAwardGotSt) {
                case 0:
                    this.btnHandLJC.label = "不可领取", this.btnHandLJC.enabled = !1, this.btnHandLJC.setNoticeVis(!1);
                    break;
                case 1:
                    this.btnHandLJC.label = "领取", this.btnHandLJC.enabled = !0, this.btnHandLJC.setNoticeVis(!0);
                    break;
                case 2:
                    this.btnHandLJC.label = "已领取", this.btnHandLJC.enabled = !1, this.btnHandLJC.setNoticeVis(!1)
            }
            ConfigHelp.makeStrGrids(o.mrjl, this.gridArr, 0, 0, this.gridContainer, !0);
            for (var a = ConfigHelp.makeVoList(o.ljjl), s = 0; s < a.length; s++) this.bigAwards[s].data = a[s], this.bigAwards[s].isShowEff(!0)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemSSCZ.prototype, "ItemSSCZ");
var ItemSSHL = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemSSHLSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), DisplayUtil.popBtnStyle(this.iconType), DisplayUtil.popBtnStyle(this.btnRef), this.iconType.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnRef.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onRefresh, this)
    }, e.prototype.onRefresh = function () {
        var t = this,
            e = CFG_Param.LIB[3],
            i = e.key.split(","),
            o = parseInt(i[this.data.index]);
        GameGlobal.modelRole.voMine.yuanbao < o ? ViewAlert.show("元宝不足，是否前往充值?", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        }) : ViewAlert.show("是否花费" + o + "元宝进行刷新?", function () {
            GameGlobal.modelHJSD.CG3709(VoSSHaoLing.cfgId, t.data.index + 1)
        })
    }, e.prototype.onHand = function () {
        this.canQiangDuo() && GameGlobal.modelHJSD.CG3703(VoSSHaoLing.cfgId, this.data.index + 1)
    }, e.prototype.canQiangDuo = function () {
        if (this.data.refTime > 0) return ViewText.text("等待刷新时间中..."), !1;
        if (VoSSHaoLing.leftCount > 0) return !0;
        var t = parseInt(CFG_Param.LIB[4].key),
            e = "确定花" + HtmlUtil.color(t + "元宝", "#D60A0A") + "购买一次挑战次数?\n今日可购买次数: " + HtmlUtil.color(VoSSHaoLing.leftCanButCnt, "#D60A0A");
        return ViewAlert.show(e, function () {
            return VoSSHaoLing.leftCanButCnt <= 0 ? void ViewText.text("今日购买次数不足") : GameGlobal.modelRole.voMine.yuanbao < 20 ? void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, 33) : void GameGlobal.modelHJSD.CG3707()
        }), !1
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, t ? t.refTime > 0 ? (this.txtTime.visible = !0, this.iconMask.visible = !0, this.txtTime.text = DateUtil.getHMSBySecond2(t.refTime) + "后刷新", GameGlobal.tick.addInterv(this.onTick, 1e3, this), this.btnRef.visible = !0, this.iconRefresh.visible = !0) : (GameGlobal.tick.removeInterv(this.onTick, this), this.txtTime.visible = !1, this.iconMask.visible = !1, this.btnRef.visible = !1, this.iconRefresh.visible = !1) : (this.iconMask.visible = !1, GameGlobal.tick.removeInterv(this.onTick, this))
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onTick = function (t) {
        t.txtTime.text = DateUtil.getHMSBySecond2(t.data.refTime--) + "后刷新", t.data.refTime < 0 && (GameGlobal.modelHJSD.CG3701(), GameGlobal.tick.removeInterv(t.onTick, t))
    }, Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            switch (this._itemIndex = t, t) {
                case 0:
                    this.iconType.source = "HJSDAtlas_json.simple";
                    break;
                case 1:
                    this.iconType.source = "HJSDAtlas_json.normal";
                    break;
                case 2:
                    this.iconType.source = "HJSDAtlas_json.hard"
            }
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemSSHL.prototype, "ItemSSHL");
var ItemSSRY = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.WIDTH = 343, e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemSSRYSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnHand.label = "领取", this.grid.enableTip(), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        var t = this.btnHand.va;
        switch (t) {
            case 0:
                GameGlobal.modelHJSD.CG3745(this.data.cfg.id);
                break;
            case 1:
                this.link(this.data.cfg)
        }
    }, e.prototype.link = function (t) {
        var e = GameGlobal.layerMgr;
        if (t && "0" != t.oper) {
            var i = t.oper.split(",");
            if ("1" == i[0] && CFG_COMMOND.isOpenByCFG(i[1], !0) && this.mpBatViewJudge(i[1])) {
                var o = parseInt(i[2]);
                (1e3 > o || CFG_COMMOND.isOpenByCFG(i[2], !0)) && (GameGlobal.layerMgr.close(UIConst.HUANJIESHENGDIAN), o >= 0 ? e.open(i[1], o) : e.open(i[1], i[2]), VCaiLiaoHuoQu.openTJCB && (VCaiLiaoHuoQu.openTJCB.apply(VCaiLiaoHuoQu.closeCBCaller), VCaiLiaoHuoQu.openTJCB = null))
            }
        }
    }, e.prototype.mpBatViewJudge = function (t) {
        var e = parseInt(t);
        return 1080 == e ? GameGlobal.modelRole.voMine.menpaiId > 0 ? !0 : (ViewText.text("您还没有门派，不能进入门派战!"), !1) : !0
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.grid.data = t.award, this.grid.isShowEff(!0);
            var e = t.maxCount;
            if (this.txtDescription.textFlow = HtmlUtil.parse(t.cfg.rw + ColorSet("+" + t.cfg.jf, "#10a244")), t.taskCnt >= e && 1 == t.hasGot) this.btnHand.visible = !1, this.iconFinished.visible = !0, this.iconProgress.width = this.WIDTH, this.txtProgress.text = "";
            else if (this.btnHand.visible = !0, this.iconFinished.visible = !1, t.taskCnt >= e) this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!0), this.btnHand.label = "领取", this.btnHand.va = 0, this.iconProgress.width = this.WIDTH, this.txtProgress.text = t.taskCnt + "/" + e;
            else {
                this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!1), this.btnHand.label = "前往", this.btnHand.va = 1, this.iconProgress.width = this.WIDTH * t.taskCnt / e;
                t.taskCnt / e;
                this.txtProgress.text = t.taskCnt + "/" + e
            }
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemSSRY.prototype, "ItemSSRY");
var VPageCZXL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VPageCZXLSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.container.itemRenderer = ItemSSCZ, this.container.dataProvider = this.sourceData = new eui.ArrayCollection, VoSSChongZhi.initLib()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelHJSD.on(ModelHJSD.msg_datas_czxl, this.onUpdate, this), GameGlobal.modelHJSD.CG3731()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelHJSD.off(ModelHJSD.msg_datas_czxl, this.onUpdate, this)
    }, e.prototype.onUpdate = function () {
        DisplayUtil.fillDataAC(this.sourceData, VoSSChongZhi.getDataAsListSrc(VoSSChongZhi.validCfgId))
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(VPageCZXL.prototype, "VPageCZXL");
var VPageSSBD = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VPageSSBDSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.txtNoteLink.textFlow = HtmlUtil.underLine(this.txtNoteLink.text), DisplayUtil.popBtnStyle(this.txtNoteLink), this.txtNoteLink.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLink, this), this.list.dataProvider = this.sourceData = new eui.ArrayCollection, this.list.itemRenderer = ItemSSBD, VoSSBaoDian.initLib()
    }, e.prototype.onLink = function () {
        GameGlobal.layerMgr.open(UIConst.VBDRECORD)
    }, e.prototype.addTick = function () {
        GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.onTick = function (t) {
        t.displayTimetxt(), VoSSBaoDian.actLeftTime < 0 && t.showActTime(!1)
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.showActTime = function (t) {
        t ? this.addTick() : (this.txtActTime.text = "剩余时间: 00:00:00", this.removeTick())
    }, e.prototype.displayTimetxt = function () {
        DateUtil.isLessThan1Day(VoSSBaoDian.actLeftTime) ? this.txtActTime.textFlow = HtmlUtil.parse("剩余时间: " + ColorSet(DateUtil.getHMSBySecond(VoSSBaoDian.actLeftTime, "时分秒"), "#FFFFFF")) : this.txtActTime.textFlow = HtmlUtil.parse("剩余时间: " + ColorSet(DateUtil.getDayHourStr(VoSSBaoDian.actLeftTime), "#FFFFFF"))
    }, e.prototype.addMsg = function () {
        GameGlobal.modelHJSD.on(ModelHJSD.msg_datas_ssbz, this.onUpdate, this), GameGlobal.modelHJSD.CG3721()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelHJSD.off(ModelHJSD.msg_datas_ssbz, this.onUpdate, this)
    }, e.prototype.onUpdate = function () {
        this.txtOwnKey.text = "拥有钥匙: " + VoSSBaoDian.ownKeys, this.showActTime(VoSSBaoDian.actLeftTime > 0), DisplayUtil.fillDataAC(this.sourceData, VoSSBaoDian.map.getList())
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), this.showActTime(!1)
    }, e.showUnLockEff = function () {
        for (var t = GameGlobal.layerMgr.getView(UIConst.SHENGSHIBAODIAN), e = 0; e < t.list.numChildren; e++) {
            var i = t.list.$children[e];
            if (1 == i.data.lockState) {
                i.showUnLockEff();
                break
            }
        }
    }, e
}(BaseEUIView);
__reflect(VPageSSBD.prototype, "VPageSSBD");
var VPageSSHL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "VPageSSHLSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.btnHand.label = "兑换", DisplayUtil.popBtnStyle(this.btnAdd), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAdd, this), this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemSSHL, this.container.useVirtualLayout = !0, this.gridCost.enableTip(), this.uirole = UIRole.create(), this.mxContainer.addChild(this.uirole), this.mxContainer.scaleX = this.mxContainer.scaleY = 1.5
    }, e.prototype.onAdd = function () {
        if (VoSSHaoLing.leftCanButCnt <= 0) return void ViewText.text("今日购买次数已用完");
        var t = parseInt(CFG_Param.LIB[4].key),
            e = "确定花" + HtmlUtil.color(t + "元宝", "#D60A0A") + "购买一次挑战次数?\n今日可购买次数: " + HtmlUtil.color(VoSSHaoLing.leftCanButCnt, "#D60A0A");
        ViewAlert.show(e, function () {
            return VoSSHaoLing.leftCanButCnt <= 0 ? void ViewText.text("今日购买次数不足") : GameGlobal.modelRole.voMine.yuanbao < 20 ? void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, 33) : void GameGlobal.modelHJSD.CG3707()
        })
    }, e.prototype.onHand = function (t) {
        if (0 != this.btnHand.enabled && CFG_COMMOND.isOpen(CFG_COMMOND.FABAO, !0)) {
            var e = CFG_HJSD.LIB1[VoSSHaoLing.cfgId].fbid;
            GameGlobal.layerMgr.openX(UIConst.FABAO, VoFaBao.getDataByCfgId(e))
        }
    }, e.prototype.onUpdate = function () {
        DisplayUtil.fillDataAC(this.sourceData, VoSSHaoLing.datas), this.showActTime(VoSSHaoLing.actLeftTime > 0), this.txtLeftCount.text = VoSSHaoLing.leftCount + "", this.txtName.text = VoSSHaoLing.getName(), this.gridCost.data = VoSSHaoLing.cost;
        var t = ConfigHelp.costTxt(VoSSHaoLing.cost);
        this.txtCost.textFlow = t, this.uirole.setFaBao(VoSSHaoLing.getFaBaoMX()), this.uirole.setWay(1), this.uirole.validParts(), this.uirole.play(), 1 == VoSSHaoLing.awardGotSt ? (this.btnHand.enabled = !1, this.btnHand.label = "已获得") : (this.btnHand.enabled = !0, this.btnHand.label = "兑换", this.btnHand.setNoticeVis(VoSSHaoLing.notice()))
    }, e.prototype.addTick = function () {
        GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.onTick = function (t) {
        t.displayTimetxt(), VoSSHaoLing.actLeftTime < 0 && t.showActTime(!1)
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.showActTime = function (t) {
        t ? this.addTick() : (this.txtActTime.text = "00:00:00", this.removeTick())
    }, e.prototype.displayTimetxt = function () {
        DateUtil.isLessThan1Day(VoSSHaoLing.actLeftTime) ? this.txtActTime.text = DateUtil.getHMSBySecond(VoSSHaoLing.actLeftTime, "时分秒") : this.txtActTime.text = DateUtil.getDayHourStr(VoSSHaoLing.actLeftTime)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelHJSD.on(ModelHJSD.msg_datas_sshl, this.onUpdate, this), GameGlobal.modelHJSD.CG3701()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelHJSD.off(ModelHJSD.msg_datas_sshl, this.onUpdate, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), this.showActTime(!1), this.uirole && this.uirole.stopAndClear();
        for (var e = 0; e < this.container.$children.length; e++) {
            var i = this.container.$children[e];
            i.data = null
        }
    }, e
}(BaseEUIView);
__reflect(VPageSSHL.prototype, "VPageSSHL");
var VPageSSRY = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.WIDTH = 470, e.awardArr = [], e.skinName = "VPageSSRYSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.container.dataProvider = this.sourceData = new eui.ArrayCollection, this.container.itemRenderer = ItemSSRY;
        for (var e = 0; 5 > e; e++) {
            var i = this["awardGp" + e];
            this.awardArr.push(i), i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
        }
        this.showJLInfo()
    }, e.prototype.showJLInfo = function () {
        var t = CFG_HJSD.LIB3;
        for (var e in t) {
            var i = parseInt(e) - 1,
                o = ConfigHelp.makeVoList(t[e].jl)[0];
            if (this["txtJiFen" + i].text = t[e].jf, 4 > i) {
                var n = this["grid" + i];
                n.data = o, n.isShowEff(!0)
            }
        }
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget,
            i = this.awardArr.indexOf(e),
            o = this.getAwardState(i),
            n = CFG_HJSD.LIB3[i + 1].jl;
        GameGlobal.layerMgr.open(UIConst.VSSAWARDTIP, {
            state: o,
            jl: n
        })
    }, e.prototype.getAwardState = function (t) {
        var e = VoSSRongYao.hasGotAwardId;
        return 0 != e || VoSSRongYao.hasDataToGet() ? t > e ? 0 : t == e && VoSSRongYao.hasDataToGet() ? 1 : 2 : 0
    }, e.prototype.addMsg = function () {
        GameGlobal.modelHJSD.on(ModelHJSD.msg_datas_ssry, this.onUpdate, this), GameGlobal.modelHJSD.CG3741()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelHJSD.off(ModelHJSD.msg_datas_ssry, this.onUpdate, this)
    }, e.prototype.onUpdate = function () {
        var t = VoSSRongYao.map.getList();
        DisplayUtil.fillDataAC(this.sourceData, t.sort(this.onSort)), this.txtRongYao.text = VoSSRongYao.rongYaoValue + "", this.iconProgress.width = this.WIDTH * VoSSRongYao.getCurJiFen() / VoSSRongYao.getMaxJiFen();
        var e = VoSSRongYao.hasDataToGet(),
            i = VoSSRongYao.hasGotAwardId,
            o = CFG_HJSD.LIB3[i],
            n = CFG_HJSD.LIB3[i + 1];
        if (n) {
            n.id
        } else {
            o.id;
            n = o
        }
        this.curNoticeImg && (this.curNoticeImg.visible = !1), e && (this.curNoticeImg = this["imgNotice" + (n.id - 1)], this.curNoticeImg && (this.curNoticeImg.visible = !0));
        for (var a = 0; a < this.awardArr.length; a++) a < VoSSRongYao.hasGotAwardId ? this["iconGot" + a].visible = !0 : this["iconGot" + a].visible = !1
    }, e.prototype.onSort = function (t, e) {
        var i = t.hasTaskAdGet() ? -1 : 1 == t.hasGot ? 1 : 0,
            o = e.hasTaskAdGet() ? -1 : 1 == e.hasGot ? 1 : 0;
        return i - o
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.bxEff = EffectMgr.addEff("uieff/bxEff", this.effCont, 0, 0, 1e3, -1, !0), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), this.bxEff && (EffectMgr.getIns().removeEff(this.bxEff), this.bxEff = null)
    }, e
}(BaseEUIView);
__reflect(VPageSSRY.prototype, "VPageSSRY");
var VBDGetAward = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.content = "开启你的宝藏之旅", e.timeremain = 0, e.skinName = "VBDGetAwardSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnok), this.addCloseListen(this.bg)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e.sort(ConfigHelp.ITEMSORT), ConfigHelp.makeVoGrids(e, this.grids, 0, 0, this.itemGroup, !0, 0, 1, 2), this.itemGroup.scrollV = 0;
        for (var i = 0, o = e.length; o > i; i++) {
            var n = e[i];
            2 == n.type && ViewItemFloatTip.checkShowEquipID(n.id)
        }
        this.timeremain = 3e3, this.updateTime(this, 0), GameGlobal.tick.addInterv(this.updateTime, 500, this), this.isShowGetKey = this.hasKey(e), this.nxtGroup.visible = this.isShowGetKey, this.isShowGetKey && (this.isShowGetKey ? this.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.fontSize(this.content, 26)) : this.txtDes.text = "可前往下一层挖宝")
    }, e.prototype.hasKey = function (t) {
        for (var e = 1215, i = 0; i < t.length; i++) {
            var o = t[i];
            if (o.id == e) return !0
        }
        return !1
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.updateTime), ConfigHelp.clearGrids(this.grids), e.fistAwardGet ? e.fistAwardGet = !1 : this.isShowGetKey ? (VPageSSBD.showUnLockEff(), GameGlobal.tick.addInterv(function () {
            GameGlobal.modelHJSD.CG3721()
        }, 1100, this, !0)) : GameGlobal.modelHJSD.CG3721()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.updateTime = function (t, e) {
        t.timeremain -= e;
        var i = Math.ceil(t.timeremain / 1e3);
        0 > i && (i = 0, t.closeHandler()), t.btnok.label = "关闭(" + i + ")"
    }, e.fistAwardGet = !1, e
}(BaseEUIView);
__reflect(VBDGetAward.prototype, "VBDGetAward");
var VBDRecord = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VBDRecordSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose).addCloseListen(this.background), DisplayUtil.popBtnStyle(this.btnClose), this.list.dataProvider = this.sourceData = new eui.ArrayCollection, this.list.itemRenderer = ItemBZRec
    }, e.prototype.onUpdate = function (t) {
        DisplayUtil.fillDataAC(this.sourceData, t)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelHJSD.on(ModelHJSD.msg_datas_bzRec, this.onUpdate, this), GameGlobal.modelHJSD.CG3725()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelHJSD.off(ModelHJSD.msg_datas_bzRec, this.onUpdate, this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(VBDRecord.prototype, "VBDRecord");
var VSSAwardTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "VSSAwardTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.btnSure.label = "领取", DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnSure), this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        GameGlobal.modelHJSD.CG3743(VoSSRongYao.hasGotAwardId + 1)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), ConfigHelp.makeStrGrids(e.jl, this.gridArr, 0, 0, this.container, !0), this.updateSt(e.state)
    }, e.prototype.updateSt = function (t) {
        switch (t) {
            case 0:
                this.btnSure.setNoticeVis(!1), this.btnSure.enabled = !1, this.btnSure.label = "不可领取";
                break;
            case 1:
                this.btnSure.setNoticeVis(!0), this.btnSure.enabled = !0, this.btnSure.label = "领取";
                break;
            case 2:
                this.btnSure.setNoticeVis(!1), this.btnSure.enabled = !1, this.btnSure.label = "已领取"
        }
        this.state = t
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VSSAwardTip.prototype, "VSSAwardTip");
var VoSSBaoDian = function () {
    function t() {
        this.cfg = null, this.lockState = 1, this.bigAwardGot = 0
    }
    return t.initLib = function () {
        if (!(this.map.getLength() > 0)) {
            var e = CFG_HJSD.LIB4,
                i = 0;
            for (var o in e) {
                var n = e[o],
                    a = new t;
                a.cfg = n, a.bxOpenedInfo = [], this.map.add(a, o), 0 == i ? a.lockState = 2 : a.lockState = 1, i++
            }
        }
    }, t.update = function (t, e, i) {
        var o = this.map.getByKey(t);
        o && (o.bxOpenedInfo = e, o.bigAwardGot = i)
    }, t.updateLocks = function (t) {
        for (var e = 0; e < this.map.getLength(); e++) {
            var i = this.map.getByIndex(e);
            i.cfg.id <= t && (i.lockState = 2)
        }
    }, Object.defineProperty(t, "actLeftTime", {
        get: function () {
            var t = GameGlobal.modelAct.actData.getChildByID(18);
            return t && t.getChildByID(49).getRemainSec()
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "ownKeys", {
        get: function () {
            var t = 1215;
            return GameGlobal.modelBag.getItemCount(t)
        },
        enumerable: !0,
        configurable: !0
    }), t.notice = function () {
        return !1
    }, t.map = new CommondMap, t
}();
__reflect(VoSSBaoDian.prototype, "VoSSBaoDian");
var VoSSChongZhi = function () {
    function t() {
        this.gotState = 0
    }
    return t.initLib = function () {
        var e = CFG_HJSD.LIB5;
        for (var i in e) {
            var o = new t;
            o.cfg = e[i], o.gotState = 0, this.map.add(o, i)
        }
    }, t.update = function (t, e) {
        var i = this.map.getByKey(t);
        i && (i.gotState = e, this.validCfgId = t)
    }, t.getDataAsListSrc = function (t) {
        var e = this.map.getByKey(t);
        return [e]
    }, t.notice = function () {
        var t = this.map.getByKey(this.validCfgId);
        if (t) {
            var e = this.map.getByKey(this.validCfgId).cfg,
                i = e.mrcz - this.toDayCZValue,
                o = 0 >= i && 1 == t.gotState;
            return i = e.ts - this.leiJiCZDays, o = o || 0 >= i && 1 == this.leiJiAwardGotSt
        }
        return !1
    }, t.map = new CommondMap, t.leiJiAwardGotSt = 1, t.toDayCZValue = 0, t.validCfgId = 0, t
}();
__reflect(VoSSChongZhi.prototype, "VoSSChongZhi");
var VoSSHaoLing = function () {
    function t() {
        this.refTime = 0, this.monsterId = 0, this.index = 0
    }
    return t.updateDatas = function (e) {
        this.cfgId = e;
        var i = CFG_HJSD.LIB1[t.cfgId].fbid;
        this.cost = ConfigHelp.makeVoList(CFG_FABAO.LIB1[i].need)[0];
        var o = CFG_HJSD.LIB1[e],
            n = this.datas[0];
        n || (this.datas[0] = n = new t), n.monsterId = o.monster1, n = this.datas[1], n || (this.datas[1] = n = new t), n.monsterId = o.monster2, n = this.datas[2], n || (this.datas[2] = n = new t), n.monsterId = o.monster3
    }, t.refTime = function (t, e) {
        var i = this.datas[t];
        i.index = t, i.refTime = e
    }, Object.defineProperty(t, "actLeftTime", {
        get: function () {
            var t = GameGlobal.modelAct.actData.getChildByID(18);
            return t && t.getChildByID(48).getRemainSec()
        },
        enumerable: !0,
        configurable: !0
    }), t.getFaBaoMX = function () {
        var t = CFG_FABAO.LIB1,
            e = CFG_HJSD.LIB1[this.cfgId].fbid;
        return t[e].effId
    }, t.getName = function () {
        var t = CFG_FABAO.LIB1,
            e = CFG_HJSD.LIB1[this.cfgId].fbid;
        return t[e].name
    }, t.notice = function () {
        return this.canGetAward()
    }, t.canGetAward = function () {
        if (0 == this.awardGotSt && t.cfgId > 0) {
            var e = CFG_HJSD.LIB1[t.cfgId].fbid,
                i = ConfigHelp.makeVoList(CFG_FABAO.LIB1[e].need)[0];
            return i.getOwned() >= i.count
        }
        return !1
    }, t.leftCount = 0, t.leftCanButCnt = 0, t.datas = [], t.awardGotSt = 0, t.cfgId = 0, t
}();
__reflect(VoSSHaoLing.prototype, "VoSSHaoLing");
var VoSSRongYao = function () {
    function t() {
        this.taskCnt = 0, this.maxCount = 0, this.hasGot = 0
    }
    return t.prototype.hasTaskAdGet = function () {
        return this.taskCnt >= this.maxCount && 0 == this.hasGot
    }, t.createVo = function (e) {
        var i = new t,
            o = CFG_HJSD.LIB2[e];
        return i.cfg = o, i.award = ConfigHelp.makeVoList(o.jl)[0], i
    }, t.update = function (t, e, i) {
        var o = this.map.getByKey(t);
        o || (o = this.createVo(t), this.map.add(o, t)), o.taskCnt = e, o.hasGot = i, o.maxCount = o.cfg.par
    }, t.getCurJiFen = function () {
        return this.rongYaoValue
    }, t.getMaxJiFen = function () {
        var t = this.getMaxJLCfgId();
        return CFG_HJSD.LIB3[t].jf
    }, t.getMaxJLCfgId = function () {
        var t;
        for (var e in CFG_HJSD.LIB3) t = e;
        return t
    }, t.hasDataToGet = function () {
        var t = this.getCurJiFen();
        if (t > 0) {
            var e;
            for (var i in CFG_HJSD.LIB3) {
                var o = CFG_HJSD.LIB3[i].jf;
                if (o > t) break;
                e = CFG_HJSD.LIB3[i]
            }
            return null == e ? !1 : this.hasGotAwardId < e.id
        }
        return !1
    }, t.notice = function () {
        for (var t = !1, e = 0, i = this.map.getLength(); i > e; e++) {
            var o = this.map.getByIndex(e);
            if (o.hasTaskAdGet()) {
                t = !0;
                break
            }
        }
        return t || this.hasDataToGet()
    }, t.rongYaoValue = 0, t.hasGotAwardId = 0, t.map = new CommondMap, t
}();
__reflect(VoSSRongYao.prototype, "VoSSRongYao");
var ModelHB = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.isCheckOther = !1, e.szHBFUStr = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(650, i.GC650, i), e.regHand(652, i.GC652, i), e.regHand(654, i.GC654, i), e.regHand(656, i.GC656, i), e.regHand(658, i.GC658, i), e.regHand(660, i.GC660, i), e.regHand(664, i.GC664, i), e.regHand(666, i.GC666, i), e.regHand(668, i.GC668, i), e.regHand(670, i.GC670, i), e.regHand(672, i.GC672, i), e.regHand(674, i.GC674, i), e.regHand(676, i.GC676, i), e.regHand(678, i.GC678, i), e.regHand(680, i.GC680, i), e.regHand(682, i.GC682, i), e.regHand(2652, i.GC2652, i), e.regHand(2654, i.GC2654, i), e.regHand(2656, i.GC2656, i), e.regHand(2658, i.GC2658, i), e.regHand(2660, i.GC2660, i), e.regHand(2662, i.GC2662, i), e.regHand(2664, i.GC2664, i), e.regHand(2666, i.GC2666, i), e.regHand(2668, i.GC2668, i), e.regHand(3650, i.GC3650, i), e.regHand(3652, i.GC3652, i), e.regHand(3654, i.GC3654, i), e.regHand(684, i.GC_HBFWSTR, i), e.regHand(686, i.GC686, i), e.regHand(4432, i.GC4432, i), e.regHand(4434, i.GC4434, i)
    }, e.prototype.GC650 = function (t, i) {
        VoHuoban.isInit || VoHuoban.init();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readShort(),
                s = i.readInt(),
                r = i.readByte(),
                l = VoHuoban.findHB(a);
            l.zhanli = s, l.state = r;
            for (var h = i.readShort(), c = 0; h > c; c++) {
                var p = i.readInt(),
                    u = VoHuoban.findEquip(l, p);
                u && (u.cfg = CFG_HUOBAN3.LIB[p])
            }
        }
        VoHuoban.onSort(), t.notify(e.msg_hbBaseInfo)
    }, e.prototype.CG651 = function (t, e, i) {
        var o = this.getBytes();
        o.writeShort(t), o.writeByte(e), o.writeByte(i), this.sendSocket(651, o)
    }, e.prototype.GC652 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort(),
                a = VoHuoban.findHB(n),
                s = i.readByte();
            1 == a.state && Child_Huoban_new.isClickToJH && (Child_Huoban_new.isClickToJH = !1, GameGlobal.layerMgr.open(VGetHuoBan.UIID_GETHUOBAN, a)), a.state = s, VoHuoban.onSort();
            var r = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
            r && r.onRefresh(), t.notify(e.msg_hbState, a)
        } else ViewText.text(["", "成功", "该仙神不存在", "玩家等级不足", "已激活", "道具不足", "传入参数异常", "未激活", "未选择出战方案", "该阵型未开启"][o])
    }, e.prototype.CG653 = function (t, e, i) {
        var o = this.getBytes();
        o.writeByte(t), o.writeShort(e), o.writeByte(i), this.sendSocket(653, o)
    }, e.prototype.GC654 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort(),
                a = i.readByte(),
                s = i.readInt(),
                r = VoHuoban.findHB(n),
                l = VoHuoban.findEquipByPos(r, a);
            l.cfg = CFG_HUOBAN3.LIB[s];
            var h = GameGlobal.layerMgr.getView(VHuobanPage.CHILD_HBEQSJ);
            h && h.updateSJ(l, a), t.notify(e.msg_hbEquip)
        } else ViewText.text(["", "成功", "传入参数异常", "职业未激活", "装备不存在", "最高级/道具不足", "已是最高级", "装备等级不能高于仙神等级", "银两不足"][o]);
        if (8 == o) {
            var c = new VoCurrency;
            c.init(31), GameGlobal.layerMgr.open(UIConst.CAILIAOGET, c)
        }
    }, e.prototype.GC656 = function (t, i) {
        for (var o = i.readShort(), n = 0, a = 0; o > a; a++) {
            var s = i.readShort(),
                r = VoHuoban.findHB(s),
                l = i.readShort();
            for (n = 0; l > n; n++) {
                for (var h = i.readInt(), c = VoHuoban.findEquip(r, h), p = i.readShort(), u = Util.getTempArr(), d = 0; p > d; d++) {
                    var f = i.readShort(),
                        g = i.readInt();
                    u.push(f, g)
                }
                c.baseAtts = VoAttribute.parse(u), p = i.readShort(), u.length = 0;
                for (var d = 0; p > d; d++) f = i.readShort(), g = i.readInt(), u.push(f, g);
                c.unSavedAtts = VoAttribute.parse(u), c.lockPos = i.readByte()
            }
        }
        VoHuoban.roleChangeUpdate(), t.notify(e.msg_hbEquip)
    }, e.prototype.GC658 = function (t, i) {
        0 == VoPlan.length && VoPlan.init();
        for (var o = i.readByte(), n = i.readShort(), a = 0; n > a; a++) {
            for (var s = i.readByte(), r = i.readInt(), l = Util.getTempArr(), h = i.readShort(), c = 0; h > c; c++) {
                var p = i.readByte(),
                    u = i.readShort();
                l.push([p, u])
            }
            VoPlan.update(s, r, l)
        }
        VoPlan.updateSelIdx(o), 0 == VoZhenfa.map.getLength() && VoZhenfa.init(), n = i.readShort();
        for (var a = 0; n > a; a++) {
            var d = i.readInt(),
                f = i.readInt();
            VoZhenfa.update(d, f)
        }
        t.notify(e.msg_hbPlan), t.notify(e.msg_hbZhenFa)
    }, e.prototype.CG659 = function (t, e, i) {
        var o = this.getBytes();
        o.writeByte(t), o.writeInt(e), o.writeInt(i), this.sendSocket(659, o)
    }, e.prototype.GC660 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = i.readInt();
            VoZhenfa.update(n, a);
            var s = GameGlobal.layerMgr.getView(VHuobanZF.UIID_HUOBANZF);
            if (s) {
                var r = VoZhenfa.find(n);
                s.update(r)
            }
            if (GameGlobal.layerMgr.isOpenView(VZhenfaUp.UIID_ZHENFAUP)) {
                var l = GameGlobal.layerMgr.getView(VZhenfaUp.UIID_ZHENFAUP);
                l && l.update(r)
            }
            t.notify(e.msg_hbZhenFa, n)
        } else ViewText.text(["", "成功", "阵法不存在", "道具不存在", "阵法已激活", "道具不足", "阵法未激活", "道具不能用于激活该阵法", "道具不足"][o])
    }, e.prototype.CG661 = function (t, e, i) {
        var o = this.getBytes();
        o.writeByte(t), o.writeByte(e), o.writeShort(i), this.sendSocket(661, o)
    }, e.prototype.CG663 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeInt(e), this.sendSocket(663, i)
    }, e.prototype.GC664 = function (t, i) {
        0 == VoPlan.list.length && VoPlan.init();
        for (var o = i.readByte(), n = i.readInt(), a = Util.getTempArr(), s = i.readShort(), r = 0; s > r; r++) {
            var l = i.readByte(),
                h = i.readShort();
            a.push([l, h])
        }
        VoPlan.update(o, n, a), t.notify(e.msg_hbPlan)
    }, e.prototype.CG665 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(665, e)
    }, e.prototype.GC666 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = e.readByte();
            VoPlan.updateSelIdx(o);
            var n = GameGlobal.layerMgr.getView(VHuobanPage.CHILD_HBZHENXING);
            n && n.setPlanSel(!0)
        } else ViewText.text("传入参数异常")
    }, e.prototype.CG667 = function (t, e, i, o) {
        var n = this.getBytes();
        n.writeByte(t), n.writeShort(e), n.writeByte(i), n.writeByte(o), this.sendSocket(667, n)
    }, e.prototype.GC668 = function (t, i) {
        var o = i.readByte();
        if (1 == o || 2 == o) {
            for (var n = i.readShort(), a = i.readByte(), s = i.readByte(), r = Util.getTempArr(), l = i.readShort(), h = 0; l > h; h++) {
                var c = i.readShort(),
                    p = i.readInt();
                r.push(c, p)
            }
            var u = VoHuoban.findHB(n),
                d = VoHuoban.findEquipByPos(u, a);
            d.lockPos = s, d.unSavedAtts = VoAttribute.parse(r), t.notify(e.msg_hbEquip)
        } else ViewText.text(["", "上锁成功", "洗练成功", "仙神未激活", "部位不存在", "传入参数异常", "银两不足", "该等级装备不存在"][o]);
        if (6 == o) {
            var f = new VoCurrency;
            f.init(31), GameGlobal.layerMgr.open(UIConst.CAILIAOGET, f)
        }
    }, e.prototype.CG669 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeByte(e), this.sendSocket(669, i)
    }, e.prototype.GC670 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            for (var n = i.readShort(), a = i.readByte(), s = Util.getTempArr(), r = i.readShort(), l = 0; r > l; l++) {
                var h = i.readShort(),
                    c = i.readInt();
                s.push(h, c)
            }
            var p = VoHuoban.findHB(n),
                u = VoHuoban.findEquipByPos(p, a);
            u.baseAtts = VoAttribute.parse(s), u.unSavedAtts.length = 0, t.notify(e.msg_hbEquip)
        } else ViewText.text(["", "成功", "仙神未激活", "部位不存在", "没有洗炼属性可以保存"][o])
    }, e.prototype.CG671 = function () {
        this.sendSocket(671, this.getBytes())
    }, e.prototype.GC672 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readInt(),
                s = i.readInt(),
                r = VoHuoban.findHB(a);
            VoHuoban.updateStar(r, s)
        }
        t.notify(e.msg_hbStar)
    }, e.prototype.CG673 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(673, e)
    }, e.prototype.GC674 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = i.readInt(),
                s = VoHuoban.findHB(n);
            VoHuoban.updateStar(s, a), GameGlobal.layerMgr.open(VGetHuoBan.UIID_GETHUOBAN, s), t.notify(e.msg_hbStar)
        } else ViewText.text(["", "", "该仙神未激活", "已经是最高级", "道具不足"][o])
    }, e.prototype.CG675 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(675, e)
    }, e.prototype.GC676 = function (t, i) {
        var o = i.readShort(),
            n = i.readInt(),
            a = i.readInt(),
            s = i.readInt(),
            r = i.readInt(),
            l = i.readInt(),
            h = i.readInt(),
            c = i.readInt(),
            p = i.readInt(),
            u = VoHuoban.findHB(o);
        u.zhanli = n, u.updateBaseAtt(a, s, r, l, h, c, p), t.notify(e.msg_refAttributes)
    }, e.prototype.GC678 = function (t, i) {
        var o = i.readShort(),
            n = i.readInt(),
            a = i.readInt(),
            s = i.readInt(),
            r = i.readInt(),
            l = i.readInt(),
            h = i.readInt(),
            c = i.readInt(),
            p = i.readInt(),
            u = i.readInt(),
            d = {
                hbId: o,
                zhanli: n,
                hp: a,
                attack: s,
                physicDef: r,
                magicalDef: l,
                speed: h,
                baoji: c,
                baojiDef: p,
                xingJiId: u
            };
        t.notify(e.msg_refAttributes, d)
    }, e.prototype.GC680 = function (t, e) {
        var i = (e.readLong(), e.readByte());
        if (1 == i) {
            var o = GameGlobal.layerMgr;
            o._regMap[UIConst.XSINFO] || o.reg(UIConst.XSINFO, VHuoBanInfo, o.UI_Message), GameGlobal.layerMgr.open(UIConst.XSINFO)
        } else ViewText.text("暂时没有该玩家仙神信息！")
    }, e.prototype.GC682 = function (t, i) {
        var o = i.readLong(),
            n = i.readByte(),
            a = {
                roleId: o,
                isEmpty: n
            };
        t.notify(e.msg_hbHasFWInfo, a)
    }, e.prototype.CG677 = function (t, e) {
        this.isCheckOther = !0;
        var i = this.getBytes();
        i.writeLong(t), i.writeShort(e), this.sendSocket(677, i)
    }, e.prototype.GC2652 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = t.readFuWenData(i);
            VoHBFuWen.addToBag(a)
        }
        VoHBFuWen.map.getList().sort(VoHBFuWen.onSort), VoHBFuWen.separateByStarLv(), t.notify(e.msg_hbFuWenBag)
    }, e.prototype.GC2654 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readShort(),
                s = i.readShort(),
                r = VoHuoban.findHB(a);
            if (r)
                if (t.isCheckOther) {
                    t.isCheckOther = !1;
                    for (var l = [], h = 0; s > h; h++) {
                        var c = i.readByte(),
                            p = t.readFuWenData(i);
                        p.position = c, l.push(p)
                    }
                    var u = {
                        hbId: a,
                        position: c,
                        FwList: l
                    };
                    t.notify(e.msg_hbFuWen, u)
                } else {
                    r.voFuWens.length = 0;
                    for (var h = 0; s > h; h++) {
                        var c = i.readByte(),
                            p = t.readFuWenData(i);
                        p.position = c, r.voFuWens.push(p), t.notify(e.msg_hbFuWen)
                    }
                }
        }
    }, e.prototype.CG2655 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeByte(e), this.sendSocket(2655, i)
    }, e.prototype.GC2656 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort(),
                a = VoHuoban.findHB(n);
            a.voFuWens.length = 0;
            for (var s = i.readShort(), r = 0; s > r; r++) {
                var l = i.readByte(),
                    h = t.readFuWenData(i);
                h.position = l, a.voFuWens.push(h)
            }
        }
        t.notify(e.msg_hbFuWen)
    }, e.prototype.CG2657 = function (t, e, i, o) {
        var n = this.getBytes();
        n.writeShort(t), n.writeByte(e), n.writeByte(i), n.writeLong(o), this.sendSocket(2657, n)
    }, e.prototype.GC2658 = function (t, e) {
        var i = e.readByte();
        1 == i ? GameGlobal.layerMgr.isOpenView(UIConst.HBFUWENBAG) && GameGlobal.layerMgr.close(UIConst.HBFUWENBAG) : ViewText.text(["", "", "符文不存在", "仙神不存在", "符文不能穿戴该位置", "身上没符文, 怎么脱", "符文背包异常", "仙神未激活", "传入参数异常", "未达开启等级"][i])
    }, e.prototype.CG2659 = function (t, e, i, o, n) {
        var a = this.getBytes();
        a.writeLong(t);
        var s = e.length;
        a.writeShort(s);
        for (var r = 0; s > r; r++) a.writeLong(e[r]);
        a.writeShort(i), a.writeByte(o), s = n.length, a.writeShort(s);
        for (var r = 0; s > r; r++) a.writeShort(n[r]);
        this.sendSocket(2659, a)
    }, e.prototype.GC2660 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort(),
                a = i.readLong(),
                s = i.readByte(),
                r = i.readInt();
            VHBFuWenQH.datas.length = 0, VHBFuWenQH.tempDatas.length = 0, 0 == n ? (VoHBFuWen.updateBag(a, s, r), t.notify(e.msg_hbFuWenBag)) : (VoHBFuWen.updateHuoban(n, a, s, r), t.notify(e.msg_hbFuWen));
            var l = GameGlobal.layerMgr.getView(UIConst.HBFUWENQH);
            l.showEff(), FuwenAddBagDatas.updateBagItems()
        } else ViewText.text(["", "", "没传入吞噬的符文", "仙神并不存在", "仙神该部位没符文", "传入符文ID和该位置符文ID不一致", "已经是最高级", "吞噬与被吞噬ID重叠", "传入的符文/道具不存在", "背包没有该符文", "符文背包不够扣", "银两不足", "道具不存在", "该道具不是符文经验道具", "符文道具不够扣"][o])
    }, e.prototype.CG2661 = function (t, e, i) {
        var o = this.getBytes();
        o.writeLong(t), o.writeShort(e), o.writeByte(i), this.sendSocket(2661, o)
    }, e.prototype.GC2662 = function (t, e) {
        var i = e.readByte();
        1 == i || ViewText.text("失败了吧")
    }, e.prototype.CG2663 = function (t, e, i, o) {
        var n = this.getBytes();
        n.writeLong(t), n.writeLong(e), n.writeShort(i), n.writeByte(o), this.sendSocket(2663, n)
    }, e.prototype.GC2664 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            VoHBFuWen.isInitMap || VoHBFuWen.initMap();
            var o = t.readFuWenData(e);
            VHBFuWenTip.setMarkStatus(0), GameGlobal.layerMgr.open(UIConst.HBFUWENTIPS, o)
        }
    }, e.prototype.GC2666 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readLong();
            VoHBFuWen.deleteById(a)
        }
        for (var s = i.readShort(), n = 0; s > n; n++) {
            var r = t.readFuWenData(i);
            VoHBFuWen.addToBag(r)
        }
        VoHBFuWen.map.getList().sort(VoHBFuWen.onSort), VoHBFuWen.separateByStarLv(), t.notify(e.msg_hbFuWenBag)
    }, e.prototype.GC2668 = function (t, i) {
        var o = i.readShort(),
            n = VoHuoban.findHB(o);
        n && (n.fuwenAtts.length = 0);
        for (var a = [], s = i.readShort(), r = 0; s > r; r++) {
            var l = i.readShort(),
                h = i.readInt();
            n.fuwenAtts.push([l, h]), a.push([l, h])
        }
        var c = {
            fwValList: a
        };
        t.notify(e.msg_hbFuWenVal, c)
    }, e.prototype.readFuWenData = function (t) {
        for (var e = t.readLong(), i = t.readInt(), o = t.readByte(), n = t.readInt(), a = t.readShort(), s = [], r = 0; a > r; r++) {
            var l = t.readShort(),
                h = t.readShort();
            s.push([l, h])
        }
        var c = t.readShort(),
            p = VoHBFuWen.createVo(e, i, o, n, s, c);
        return p
    }, e.prototype.fuwenNotice = function () {
        var t = VoHuoban.map.getList(),
            e = t.length,
            i = CFG_COMMOND.getOpenLevel(CFG_COMMOND.FUWEN);
        if (GameGlobal.modelRole.voMine.level >= i)
            for (var o = 0; e > o; o++) {
                var n = t[o],
                    a = 2 == n.state && n.hasFuwenNotice();
                if (1 == a) return !0
            }
        return !1
    }, e.prototype.GC3650 = function (t, i) {
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = i.readShort(),
                s = i.readShort();
            VoXSJueXing.regJXId(a, s)
        }
        if (0 != i.bytesAvailable) {
            for (var o = 0, n = i.readShort(); n > o; o++) {
                a = i.readShort();
                var r = i.readShort();
                VoXSJueXing.hasActivedHB[a] = r
            }
            VoXSJueXing.validJueXings(), t.notify(e.msg_jxdatas)
        }
    }, e.prototype.CG3651 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeShort(e), this.sendSocket(3651, i)
    }, e.prototype.GC3652 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort(),
                a = i.readShort();
            VoXSJueXing.regJXId(n, a), VoXSJueXing.validJueXing(n, a), t.notify(e.msg_jxImUpdata, a), t.notify(e.msg_jxdatas)
        } else ViewText.text([null, null, "等级不够", "已经觉醒", "仙神碎片不足"][o])
    }, e.prototype.CG3653 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeShort(e), this.sendSocket(3653, i)
    }, e.prototype.GC3654 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort(),
                a = i.readShort();
            if (a > 0) {
                var s = CFG_HuobanJX.LIB2[a];
                VoXSJueXing.hasActivedHB[n] = a, GameGlobal.layerMgr.open(UIConst.HBJUEXINGTIP, s), t.notify(e.msg_jxdatas)
            }
        } else ViewText.text([null, null, "印记已激活", "激活条件不满足"][o])
    }, e.prototype.CG_HBFWSTR = function () {
        var t = this.getBytes();
        this.sendSocket(683, t)
    }, e.prototype.GC_HBFWSTR = function (t, i) {
        var o = i.readLong();
        t.szHBFUStr = o, t.notify(e.MSG_CHECKALLFWSTR)
    }, e.prototype.CG4431 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeShort(e), this.sendSocket(4431, i)
    }, e.prototype.GC4432 = function (t, i) {
        var o = (i.readShort(), i.readByte());
        1 == o ? (t.notify(e.MSG_SHENGJI), ViewText.text("升级成功！")) : 2 == o ? ViewText.text("条件不足！") : 3 == o && ViewText.text("已满级！")
    }, e.prototype.CG4433 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(4433, e)
    }, e.prototype.GC4434 = function (t, i) {
        var o = i.readShort(),
            n = i.readByte(),
            a = {
                id: o,
                result: n
            };
        t.notify(e.MSG_BDJN, a)
    }, e.prototype.CG685 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(685, e)
    }, e.prototype.GC686 = function (t, i) {
        var o = i.readShort();
        t.notify(e.MSG_BDJNINFO, o)
    }, e.msg_hbBaseInfo = "msg_hbBaseInfo", e.msg_hbState = "msg_hbState", e.msg_hbEquip = "msg_hbEquip", e.msg_hbPlan = "msg_hbPlan", e.msg_hbZhenFa = "msg_hbZhenFa", e.msg_hbStar = "msg_hbStar", e.msg_hbFuWenBag = "msg_hbFuWen", e.msg_hbFuWen = "msg_hbFuWen", e.msg_hbFuWenVal = "msg_hbFuWenVal", e.msg_hbHasFWInfo = "msg_hbHasFWInfo", e.msg_huobanSelection = "msg_huobanSelection", e.msg_jxdatas = "msg_datas", e.msg_jxImUpdata = "msg_jxImUpdata", e.MSG_CHECKALLFWSTR = "MSG_CHECKALLFWSTR", e.MSG_BDJN = "MSG_BDJN", e.MSG_SHENGJI = "MSG_SHENGJI", e.MSG_BDJNINFO = "MSG_BDJNINFO", e.msg_refAttributes = "msg_refAttributes", e
}(BaseModel);
__reflect(ModelHB.prototype, "ModelHB");
var VHuobanPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.huoBanListData = new eui.ArrayCollection, e.skinName = "VHuobanPageSkin", e
    }
    return __extends(e, t), e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.base.btnReturn, 30, 30)
    }, e.prototype.guideSelHB = function (t) {
        this.curGuideHbID = t, this.guideSelInterv(this), GameGlobal.tick.addInterv(this.guideSelInterv, 100, this)
    }, e.prototype.guideDressFW = function () {
        var t = GameGlobal.layerMgr.getView(e.CHILD_HUOBAN);
        t && t.guideDressFW()
    }, e.prototype.guideSelInterv = function (t) {
        var e = VoHuoban.findHB(t.curGuideHbID),
            i = t.huoBanList.dataProvider.getItemIndex(e);
        if (t.huoBanList.numChildren) {
            var o = DisplayUtil.getFirstIdx(t.huoBanList),
                n = DisplayUtil.getLastIdx(t.huoBanList);
            if (0 > o && 0 > n) return;
            if (i >= o && n >= i) {
                var a = t.huoBanList.getChildAt(i - o);
                return void QuestGuideArrow.getIns().guideTo(a, 40, 40)
            }
            o > i && QuestGuideArrow.getIns().guideTo(t, t.leftIcon.x + 10, t.leftIcon.y + 10), i > n && QuestGuideArrow.getIns().guideTo(t, t.rightIcon.x + 10, t.rightIcon.y + 10)
        }
    }, e.prototype.exitGuideselHB = function () {
        GameGlobal.tick.removeInterv(this.guideSelInterv, this)
    }, e.prototype.isSelHB = function (t) {
        this._selHuoban;
        return this._selHuoban && this._selHuoban.cfg.id == t
    }, e.prototype.guideEnable = function (t) {
        GameGlobal.layerMgr.isOpenView(e.CHILD_HUOBAN) || GameGlobal.layerMgr.open(e.CHILD_HUOBAN);
        var i = GameGlobal.layerMgr.getView(e.CHILD_HUOBAN);
        i && i.guideEnable()
    }, e.prototype.checkPage = function (t) {
        var e = this._index == t;
        return e
    }, e.prototype.guidePage = function (t) {
        var e = this.base.getTabBySort(t);
        e && QuestGuideArrow.getIns().guideTo(e.parent, e.x + 50, e.y + 20)
    }, e.prototype.guideHBZBSJ = function () {
        var t = GameGlobal.layerMgr.getView(e.CHILD_HBEQSJ);
        t && t.guideZBSJ()
    }, e.prototype.guideHBZBXL = function () {
        var t = GameGlobal.layerMgr.getView(e.CHILD_HBEQSJ);
        t && t.guideZBXL()
    }, e.prototype.guideHBZBXLSAVE = function () {
        var t = GameGlobal.layerMgr.getView(e.CHILD_HBEQSJ);
        t && t.guideZBXLSAVE()
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "仙神", DisplayUtil.popBtnStyle(this.leftIcon), DisplayUtil.popBtnStyle(this.rightIcon), this.addCloseListen(this.base.btnClose), this.base.btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onRetHand, this), this.base.createTabGroup(), this.base.addTab("仙神", 0, 1), this.base.addTab("装备洗练", 1, 2), this.base.addTab("仙神升星", 2, 3), this.base.addTab("仙神符文", 3, 4), this.base.listenTabClick(this.onSel, this);
        var i = GameGlobal.layerMgr,
            o = e;
        i.reg(o.CHILD_HUOBAN, Child_huoban, this), i.reg(o.CHILD_HBEQSJ, Child_HBEquip, this), i.reg(o.CHILD_HBZHENXING, Child_HBZF, this), 0 == VoHuoban.map.getLength() && VoHuoban.init(), this.huoBanList.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onHuoBan, this), new ScrollMove(this.rightIcon, this.leftIcon, this.huoBanList, "width"), this.huoBanList.itemRenderer = ItemHuoban, this.huoBanList.dataProvider = this.huoBanListData, this.huoBanListData.source = VoHuoban.map.getList()
    }, e.prototype.onRetHand = function () {
        GameGlobal.layerMgr.isOpenView(Child_huoban.HUOBANJUEXING) ? this.setSel(0) : this.closeHandler()
    }, e.showIntroduce = function () {
        var t = e.getSelHuoban(),
            i = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        i.base._questStr = t.cfg.i, i.base.onQuestT(null)
    }, e.getSelHuoban = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        return t ? t._selHuoban : null
    }, e.prototype.isOpenedJXView = function () {
        return GameGlobal.layerMgr.isOpenView(Child_huoban.HUOBANJUEXING)
    }, e.prototype.huobanFitToJX = function (t) {
        return t.state > 1 && t.cfg.pz >= 4
    }, e.prototype.onHuoBan = function (t) {
        var e = t.item;
        this.setSelHuoban(e)
    }, e.prototype.setSelHuoban = function (t, i) {
        void 0 === i && (i = !0), this._selHuoban = t, this.huoBanList.selectedItem = t;
        var o = !1;
        this.isOpenedJXView() && !this.huobanFitToJX(t) && (GameGlobal.layerMgr.getView(e.CHILD_HUOBAN).setState("st1"), o = !0), 1 != t.state || 1 != this._index && 2 != this._index && 3 != this._index && !o || this.setSel(0), i && GameGlobal.modelhb.notify(ModelHB.msg_huobanSelection), VoHuoban.isEnable(t.cfg.id) && GameGlobal.modelhb.CG675(t.cfg.id)
    }, e.prototype.onlyUnSetSel = function () {
        var t = this.base.getTabByIdx(this._index);
        t && (t.selected = !1, this._index = -1)
    }, e.prototype.onSel = function (t) {
        var e = t.sort;
        this.setSel(e)
    }, e.prototype.setSel = function (t) {
        if (this._index != t) {
            if (1 == this._selHuoban.state && (1 == t || 2 == t || 3 == t)) return void this.onDisableTips(t);
            if (3 != t || CFG_COMMOND.isOpen(CFG_COMMOND.FUWEN, !0)) {
                var i = GameGlobal.layerMgr,
                    o = e;
                switch (this._index) {
                    case 0:
                        i.close(o.CHILD_HUOBAN);
                        break;
                    case 1:
                        i.close(o.CHILD_HBEQSJ);
                        break;
                    case 2:
                        i.close(o.CHILD_HUOBAN);
                        break;
                    case 3:
                        i.close(o.CHILD_HUOBAN);
                        break;
                    case 4:
                        i.close(o.CHILD_HBZHENXING);
                        break;
                    default:
                        i.close(Child_huoban.HUOBANJUEXING)
                }
                switch (this._index = t, this.base.setTabSelBySort(t), t) {
                    case 0:
                        this.scroller.visible = !0, this.leftIcon.visible = !0, this.rightIcon.visible = !0, i.open(o.CHILD_HUOBAN, "st1");
                        break;
                    case 1:
                        this.scroller.visible = !0, this.leftIcon.visible = !0, this.rightIcon.visible = !0, i.open(o.CHILD_HBEQSJ, "st2");
                        break;
                    case 2:
                        this.scroller.visible = !0, this.leftIcon.visible = !0, this.rightIcon.visible = !0, i.open(o.CHILD_HUOBAN, "st2");
                        break;
                    case 3:
                        this.scroller.visible = !0, this.leftIcon.visible = !0, this.rightIcon.visible = !0, i.open(o.CHILD_HUOBAN, "st3");
                        break;
                    case 4:
                        this.scroller.visible = !1, this.leftIcon.visible = !1, this.rightIcon.visible = !1, i.open(o.CHILD_HBZHENXING)
                }
            }
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.visible = !0, VoHuoban.onSort(), this.setSelHuoban(VoHuoban.get1stActived()), this.scroller.viewport.scrollH = 0;
        var i = parseInt(e);
        this.setSel(i || 0), this.onNotice(), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onBagChange, this), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.onBodyChange, this), GameGlobal.modelhb.on(ModelHB.msg_jxdatas, this.onNotice, this), GameGlobal.layerMgr.setVisible(UIConst.HEADUI, !1), GameGlobal.layerMgr.setVisible(UIConst.BOTTOM2, !1), GameGlobal.layerMgr.setVisible(UIConst.QUEST, !1), GameGlobal.layerMgr.setVisible(UIConst.LEFTUI, !1), GameGlobal.layerMgr.setVisible(UIConst.RIGHTUI, !1)
    }, e.prototype.onRePosHuoban = function () {
        VoHuoban.onSort(), this.onRefresh()
    }, e.prototype.onRefresh = function () {
        DisplayUtil.fillDataAC(this.huoBanListData, VoHuoban.map.getList()), this._selHuoban && (this.huoBanList.selectedItem = this._selHuoban)
    }, e.prototype.onBagChange = function (t) {
        this.onNotice()
    }, e.prototype.onBodyChange = function () {
        this.onNotice()
    }, e.prototype.onNotice = function () {
        for (var t = this, i = 0, o = 0, n = t.huoBanListData.length, a = 0; n > a; a++) {
            var s = t.huoBanListData.getItemAt(a);
            if (t.huoBanListData.itemUpdated(s), 1 == s.state) {
                var r = VoHuoban.canActive(s);
                1 == r && i++
            }
            s.state > 1 && (r = VoHuoban.canShengXing(s), 1 == r && o++)
        }
        var l = VoXSJueXing.noticeJueXing(e.getSelHuoban().cfg.id);
        t.base.setNoticBySort(0, i > 0 || l), t.base.setNoticBySort(2, o > 0), t.base.setNoticBySort(3, GameGlobal.modelhb.fuwenNotice())
    }, e.prototype.onDisableTips = function (t) {
        switch (t) {
            case 1:
                ViewText.text("仙神激活才能进行仙神装备洗练");
                break;
            case 2:
                ViewText.text("仙神激活才能进行仙神升星");
                break;
            case 3:
                ViewText.text("仙神激活才能打开仙神符文")
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.setSel(-1), this.huoBanList.selectedItem = null, GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onBagChange, this), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.onBodyChange, this), GameGlobal.modelhb.off(ModelHB.msg_jxdatas, this.onNotice, this), this.exitGuideselHB(), GameGlobal.layerMgr.setVisible(UIConst.HEADUI, !0), GameGlobal.layerMgr.setVisible(UIConst.BOTTOM2, !0), GameGlobal.layerMgr.setVisible(UIConst.QUEST, !0), GameGlobal.layerMgr.setVisible(UIConst.LEFTUI, !0), GameGlobal.layerMgr.setVisible(UIConst.RIGHTUI, !0)
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.CHILD_HUOBAN = "CHILD_HUOBAN", e.CHILD_HBEQSJ = "CHILD_HBEQSJ", e.CHILD_HBZHENXING = "CHILD_HBZHENXING", e
}(BaseEUIView);
__reflect(VHuobanPage.prototype, "VHuobanPage");
var VHuobanZF = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData1 = new eui.ArrayCollection, e.sourceData2 = new eui.ArrayCollection, e.WIDTH = 470, e.isEnough = !1, e.curState = "", e.itemCost = new VoItem, e.skinName = "VHuobanZFSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "选择阵法", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), DisplayUtil.popBtnStyle(this.btnAdd), DisplayUtil.popBtnStyle(this.btnHand), this.grid.enableTip(), this.grid.setShowCount(!1), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOpenZFUp, this), this.container.itemRenderer = ItemHBZf, this.container.dataProvider = this.sourceData1, this.container.useVirtualLayout = !1, this.container1.itemRenderer = ItemHBZFAtt2, this.container1.dataProvider = this.sourceData2, this.container.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onSel, this), 0 == VoZhenfa.map.getLength() && VoZhenfa.init(), DisplayUtil.fillDataAC(this.sourceData1, VoZhenfa.map.getList()), this.container.validateNow()
    }, e.prototype.onOpenZFUp = function () {
        GameGlobal.layerMgr.open(VZhenfaUp.UIID_ZHENFAUP, this.selZhenFa)
    }, e.prototype.onSel = function (t) {
        var e = t.item;
        this.setSel(e)
    }, e.prototype.setSel = function (t) {
        this.container.selectedItem = t, this.selZhenFa = t, this.updateAtt(), t.isJH ? this.setState("st1") : this.setState("st2")
    }, e.prototype.onHand = function () {
        var t = this.btnHand.label;
        switch (t) {
            case "卸下阵法":
                GameGlobal.modelhb.CG663(this._selPlanIndex, 0);
                break;
            case "启用阵法":
                GameGlobal.modelhb.CG663(this._selPlanIndex, this.selZhenFa.cfg.id);
                break;
            case "激活阵法":
                this.isEnough ? GameGlobal.modelhb.CG659(1, this.selZhenFa.cfg.id, 0) : ViewText.text("材料不足")
        }
    }, e.prototype.setState = function (t) {
        this.curState = t;
        var e = this.selZhenFa;
        switch (this.imgNotice.visible = !1, this.isEnough = !1, this.btnHand.enabled = !0, this.btnAdd.visible = !0, t) {
            case "st1":
                var i = VoPlan.getPlanByIndex(this._selPlanIndex),
                    o = i.zhenfaId;
                o == e.cfg.id ? (this.btnHand.skinName = "EasyButton_1Skin", this.btnHand.label = "卸下阵法", this.btnHand.setNoticeVis(!1)) : (this.btnHand.skinName = "EasyButton_ySkin", this.btnHand.label = "启用阵法", this.btnHand.setNoticeVis(!1));
                var n = e.cfg.id + 1,
                    a = CFG_HUOBAN2.LIB[n];
                if (a) {
                    var s = e.exp,
                        r = e.cfg.exp;
                    this.bar.width = this.WIDTH * Math.min(s / r, 1), this.txtPro.text = s + "/" + r
                } else this.bar.width = this.WIDTH, this.txtPro.text = "已满级", this.btnAdd.visible = !1;
                this.imgNotice.visible = e.canUpgrade(), this.txtNm.visible = !1, this.grid.visible = !1, this.groupProgress.visible = !0, this.btnAdd.visible = !0;
                break;
            case "st2":
                this.btnHand.skinName = "EasyButton_ySkin", this.btnHand.label = "激活阵法", this.txtNm.visible = !0, this.grid.visible = !0, this.groupProgress.visible = !1, this.btnAdd.visible = !1, this.updateCost()
        }
    }, e.prototype.addMsg = function () {
        GameGlobal.modelhb.on(ModelHB.msg_hbPlan, this.update, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onNotice, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelhb.off(ModelHB.msg_hbPlan, this.update, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onNotice, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this._selPlanIndex = e, this.setSelByPlanIndex(this._selPlanIndex), this.onNotice(), this.addMsg()
    }, e.prototype.setSelByPlanIndex = function (t) {
        var e = VoPlan.getPlanByIndex(t);
        if (e && e.hasUsedZhenFa()) {
            var i = VoZhenfa.find(e.zhenfaId);
            this.useZhenFaVo = i
        } else i = this.sourceData1.getItemAt(0), this.useZhenFaVo = null;
        this.setSel(i)
    }, e.prototype.updateAtt = function () {
        var t = this.selZhenFa,
            e = t.cfg.zfttr;
        VoHBZFAtt.parse(e), this.sourceData2.source = VoHBZFAtt.list.concat()
    }, e.prototype.updateCost = function () {
        var t = this.selZhenFa;
        if (this.sourceData1.itemUpdated(t), !t.isJH) {
            var e = CFG_HUOBAN2.LIB2[t.cfg.id].item,
                i = GameGlobal.modelBag.getItemCount(e);
            this.itemCost.init(e), this.grid.data = this.itemCost, this.txtNm.text = i + "/1";
            var o = t.canJH();
            o ? (this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!0), this.isEnough = !0) : (this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1), this.isEnough = !1)
        }
    }, e.prototype.update = function (t) {
        t || (t = this.selZhenFa), this.useZhenFaVo && this.useZhenFaVo.getId() != t.getId() && this.sourceData1.itemUpdated(this.useZhenFaVo);
        var e = VoPlan.getPlanByIndex(this._selPlanIndex).zhenfaId;
        e == t.getId() && (this.useZhenFaVo = t), this.sourceData1.itemUpdated(t), this.updateAtt(), this.setState("st1")
    }, e.prototype.onNotice = function () {
        for (var t = 0; t < this.sourceData1.length; t++) {
            var e = this.container.$children[t];
            e.updateNotice()
        }
        this.updateCost()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.UIID_HUOBANZF = "UIID_HUOBANZF", e
}(BaseEUIView);
__reflect(VHuobanZF.prototype, "VHuobanZF");
var Child_HBEquip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.sourceDataAtt1 = new eui.ArrayCollection, e.sourceDataAtt2 = new eui.ArrayCollection, e._selPos = 0, e.skinName = "Child_HBEquipSkin", e
    }
    return __extends(e, t), e.prototype.guideZBSJ = function () {
        var t = this.btn2;
        QuestGuideArrow.getIns().guideTo(t, 55, 25)
    }, e.prototype.guideZBXL = function () {
        var t = this.btn1;
        QuestGuideArrow.getIns().guideTo(t, 70, 25)
    }, e.prototype.guideZBXLSAVE = function () {
        var t = this.btn2;
        QuestGuideArrow.getIns().guideTo(t, 70, 25)
    }, e.prototype.guideSelEq = function (t) {
        var e = 105 * t + 50;
        QuestGuideArrow.getIns().guideTo(this.eqScrollor, 140, e)
    }, e.prototype.isSelEq = function (t) {
        return this.container.selectedIndex == t
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.btn1.label = "升级", this.btn2.label = "一键升级", this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemHBEquip, this.container.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onSel, this), this.attContainer1.itemRenderer = ItemHBEQAtt, this.attContainer1.dataProvider = this.sourceDataAtt1, this.attContainer1.useVirtualLayout = !1, this.attContainer2.itemRenderer = ItemHBEQAtt, this.attContainer2.dataProvider = this.sourceDataAtt2, this.attContainer2.useVirtualLayout = !1, this.attContainer1.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onLock, this)
    }, e.prototype.onLock = function (t) {
        this.setLock(t.item)
    }, e.prototype.setLock = function (t) {
        var e = t.position,
            i = VHuobanPage.getSelHuoban(),
            o = this.selEquip;
        0 == o.lockPos ? GameGlobal.modelhb.CG667(1, i.cfg.id, o.position, e) : o.lockPos == e && GameGlobal.modelhb.CG667(1, i.cfg.id, o.position, 0)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget,
            i = e.label,
            o = VHuobanPage.getSelHuoban();
        switch (i) {
            case "升级":
                GameGlobal.modelhb.CG653(1, o.cfg.id, this.selEquip.position);
                break;
            case "一键升级":
                GameGlobal.modelhb.CG653(2, o.cfg.id, this.selEquip.position);
                break;
            case "洗练":
                this.selEquip.lockPos > 0 ? this.hasEnoughYB() && GameGlobal.modelhb.CG667(2, o.cfg.id, this.selEquip.position, this.selEquip.lockPos) : GameGlobal.modelhb.CG667(2, o.cfg.id, this.selEquip.position, 0);
                break;
            case "保存":
                GameGlobal.modelhb.CG669(o.cfg.id, this.selEquip.position)
        }
    }, e.prototype.hasEnoughYB = function (t) {
        void 0 === t && (t = !0);
        var e = 5,
            i = GameGlobal.modelRole.voMine.yuanbao;
        return e > i ? (t && platform.askOpenRecharge(), !1) : !0
    }, e.prototype.onSel = function (t) {
        this.setSel(t.item)
    }, e.prototype.setSel = function (t) {
        this.selEquip = t, this.container.selectedItem = t, t && this.OnUpdateEquipAndCost()
    }, e.prototype.setSelPos = function (t) {
        this._selPos = t;
        var e = this.sourceData.getItemAt(t);
        this.setSel(e)
    }, e.roleUpChange = function (t) {
        var e = GameGlobal.layerMgr.getView(VHuobanPage.CHILD_HBEQSJ);
        e.selEquip == t && e.updateEquipAndCost()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.isUpdating = !1, GameGlobal.modelhb.on(ModelHB.msg_huobanSelection, this.onUpdate, this), GameGlobal.modelhb.on(ModelHB.msg_hbEquip, this.updateEquipAndCost, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateEquipAndCost, this), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.OnUpdateEquipAndCost, this), this.onUpdate()
    }, e.prototype.onUpdate = function () {
        var t = VHuobanPage.getSelHuoban();
        this.sourceData.source = t.equips, this.setSelPos(this._selPos)
    }, e.prototype.updateItem = function () {
        this.selEquip && this.sourceData.itemUpdated(this.selEquip)
    }, e.prototype.OnUpdateEquipAndCost = function () {
        this.isUpdating || (this.isUpdating = !0, TimerManager.doTimer(100, 1, function () {
            this.isUpdating = !1, this.updateEquipAndCost()
        }, this))
    }, e.prototype.updateEquipAndCost = function () {
        this.updateItem();
        var t = (VHuobanPage.getSelHuoban(), this.selEquip),
            e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE),
            i = e._index;
        switch (i = 2) {
            case 1:
                this.txtDes.text = "升级装备不改变当前属性", this.txtDes.y = 715, this.btn1.visible = !0, this.btn2.visible = !0, this.btn1.label = "升级", this.btn2.label = "一键升级", this.btnGrp.contains(this.btn2) || DisplayUtil.addBy(this.btn2, this.btnGrp);
                var o = t.cfg.id,
                    n = o + 10,
                    a = VoHBEquip.findCFG(n),
                    s = t.baseAtts,
                    r = VoAttribute.parse(t.cfg.maxat),
                    l = VoHBEQAtt.getShengjiCur(s, r);
                if (this.sourceDataAtt1.source = l.concat(), a) {
                    var h = VoAttribute.parse(a.maxat);
                    l = VoHBEQAtt.getShengjiNext(r, h), this.sourceDataAtt2.source = l.concat(), this.txtManji.visible = !1, this.downGroup.visible = !0;
                    var c = t.cfg.sjxh,
                        p = c.split(","),
                        u = VoCurrency.create();
                    u.init(p[0]), u.count = parseInt(p[1]);
                    var d = GameGlobal.modelRole.voMine.yinliang;
                    d >= u.count ? this.txtCost.textColor = 4045829 : this.txtCost.textColor = Color.UIRED, this.txtCost.text = ConfigHelp.getNumText(d) + "/" + ConfigHelp.getNumText(u.count)
                } else this.txtManji.visible = !0, this.downGroup.visible = !1, this.txtCost.text = "0";
                break;
            case 2:
                this.txtManji.visible = !1, this.downGroup.visible = !0, this.txtDes.text = "点击属性即可进行属性锁定", this.txtDes.y = 435;
                var f = t.unSavedAtts;
                if (l = VoHBEQAtt.getXiLianAtt(t.baseAtts, t.lockPos), r = VoAttribute.parse(t.cfg.maxat), this.sourceDataAtt1.source = l.concat(), f && f.length > 0) {
                    this.btn1.visible = !0, DisplayUtil.addBy(this.btn2, this.btnGrp), this.btn1.label = "洗练", this.btn2.label = "保存";
                    var g = VoHBEQAtt.getXlUnSaved(f, t.baseAtts, r);
                    this.sourceDataAtt2.source = g, this.showStrength(!0, l, g)
                } else this.btn1.label = "洗练", DisplayUtil.remove(this.btn2), g = VoHBEQAtt.getXlSaved(r), this.sourceDataAtt2.source = g, this.showStrength(!1, l);
                t.lockPos > 0 ? (c = t.cfg.sdxlxh, this.txtYBCost.text = "x5", this.hasEnoughYB(!1) ? this.txtYBCost.textColor = 1090116 : this.txtYBCost.textColor = 16711680, DisplayUtil.addBy(this.ybGroup, this.costGroup)) : (c = t.cfg.xlxh, this.txtYBCost.text = "x0", this.txtYBCost.textColor = 16777215, DisplayUtil.remove(this.ybGroup)), p = c.split(","), u = new VoCurrency, u.init(p[0]), u.count = parseInt(p[1]), d = GameGlobal.modelRole.voMine.yinliang, d >= u.count ? this.txtCost.textColor = 4045829 : this.txtCost.textColor = Color.UIRED, this.txtCost.text = ConfigHelp.getNumText(d) + "/" + ConfigHelp.getNumText(u.count)
        }
    }, e.prototype.showStrength = function (t, e, i) {
        if (t) {
            var o = this.changeToNumArr(e),
                n = ConfigHelp.caculateStrByIntArr(o),
                a = this.changeToNumArr(i),
                s = ConfigHelp.caculateStrByIntArr(a),
                r = s - n;
            this.txtDown.textFlow = HtmlUtil.parse("战力: " + ColorSet(n, "#684c43")), r > 0 ? (this.txtUp.textFlow = HtmlUtil.parse("战力: " + ColorSet(n + "+" + Math.abs(r), "#684c43")), this.iconUp.source = "HBAtlas2_json.upArraw", DisplayUtil.addBy(this.iconUp, this.gpUp, 1)) : 0 > r ? (this.txtUp.textFlow = HtmlUtil.parse("战力: " + ColorSet(n + "-" + Math.abs(r), "#684c43")), this.iconUp.source = "HBAtlas2_json.downArraw", DisplayUtil.addBy(this.iconUp, this.gpUp, 1)) : (this.txtUp.textFlow = HtmlUtil.parse("战力: " + ColorSet(n, "#684c43")), this.iconUp.source = null, DisplayUtil.remove(this.iconUp)), this.gpUp.visible = !0
        } else {
            this.gpUp.visible = !1;
            var l = this.changeToNumArr(e);
            this.txtDown.textFlow = HtmlUtil.parse("战力: " + ColorSet(ConfigHelp.caculateStrByIntArr(l), "#684c43"))
        }
    }, e.prototype.changeToNumArr = function (t) {
        for (var e = [], i = 0; i < t.length; i++) {
            var o = t[i];
            e.push([o.id, o.realVal])
        }
        return e
    }, e.prototype.rePostionAttGroup = function () {
        for (var t = this, e = 0, i = 0; i < t.attContainer1.$children.length; i++) {
            var o = t.attContainer1.$children[i];
            o && o.group.width > e && (e = o.group.width)
        }
        t.attContainer1.x = t.upGroup.width - e >> 1, t.gpDown.x = t.upGroup.x + t.attContainer1.x, e = 0;
        for (var i = 0; i < t.attContainer2.$children.length; i++) o = t.attContainer2.$children[i], o && o.group.width > e && (e = o.group.width);
        t.attContainer2.x = t.downGroup.width - e >> 1, t.gpUp.x = t.downGroup.x + t.attContainer2.x
    }, e.prototype.updateSJ = function (t, e) {
        this.sourceData.itemUpdated(t);
        var i = (this.container.numChildren, this.container.$children[e - 1]);
        i && i.showSJEffect()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelhb.off(ModelHB.msg_huobanSelection, this.onUpdate, this), GameGlobal.modelhb.off(ModelHB.msg_hbEquip, this.updateEquipAndCost, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateEquipAndCost, this), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.OnUpdateEquipAndCost, this), this.setSel(null), TimerManager.remove(this.updateEquipAndCost, this)
    }, e
}(BaseEUIView);
__reflect(Child_HBEquip.prototype, "Child_HBEquip");
var Child_HBZF = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData1 = new eui.ArrayCollection, e.sourceData2 = new eui.ArrayCollection, e.sourceData3 = new eui.ArrayCollection, e.sourceData4 = new eui.ArrayCollection, e.selPos = 0, e.curZfId = 0, e._selPlanIndex = -1, e.words = ["零", "一", "二", "三", "四", "五", "六", "七", "八", "九", "十"], e.skinName = "Child_HBZFSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var e = this;
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.leftBtn), DisplayUtil.popBtnStyle(this.rightBtn), this.listPlan.itemRenderer = ItemPlan, this.listPlan.dataProvider = this.sourceData1, this.listPlan.useVirtualLayout = !1, this.listAtts.itemRenderer = ItemHBZFAtt, this.listAtts.dataProvider = this.sourceData2, this.listAtts.useVirtualLayout = !1, this.container.itemRenderer = ItemZfHuoban, this.container.dataProvider = this.sourceData3, this.container.useVirtualLayout = !1, this.container2.itemRenderer = ItemHbHead, this.container2.dataProvider = this.sourceData4, this.container2.useVirtualLayout = !1, this.container.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onMemSel, this), this.container2.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onHeadChose, this), this.listPlan.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onPlanSel, this), this.btn.label = "选择阵法", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOpenZF, this), this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            e.setState("st1")
        }, this);
        for (var i = 0; i < this.arrowsGroup.numChildren; i++) this.arrowsGroup.getChildAt(i).visible = !1;
        0 == VoPlan.list.length && VoPlan.init(), this.sourceData1.source = VoPlan.get3Plan()
    }, e.prototype.onOpenZF = function () {
        GameGlobal.layerMgr.open(VHuobanZF.UIID_HUOBANZF, this._selPlanIndex)
    }, e.prototype.onHeadChose = function (t) {
        var e = t.item;
        GameGlobal.modelhb.CG661(this._selPlanIndex, this.selPos, e.cfg.id), this.setState("st1")
    }, e.prototype.onMemSel = function (t) {
        var e = t.item,
            i = t.itemIndex;
        i > 0 && (this.selPos = i, this.arrowsGroup.getChildAt(i).visible = !0, this.container.selectedItem = e, this.setState("st2"))
    }, e.prototype.onChange = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.leftBtn:
                this.curZfId--;
                break;
            case this.rightBtn:
                this.curZfId++
        }
        this.updateAtts(this.curZfId)
    }, e.prototype.watchLeft = function (t) {
        var e = CFG_HUOBAN2.LIB[t];
        e ? this.leftBtn.visible = !0 : this.leftBtn.visible = !1
    }, e.prototype.watchRight = function (t) {
        var e = CFG_HUOBAN2.LIB[t];
        e ? this.rightBtn.visible = !0 : this.rightBtn.visible = !1
    }, e.prototype.onPlanSel = function (t) {
        this._selPlanIndex = t.itemIndex + 1, this.setPlanSel(!1)
    }, e.prototype.delayFunc = function (t) {
        var e = t.listPlan.getChildAt(t._selPlanIndex - 1);
        e.setChosen(!0)
    }, e.prototype.setPlanSel = function (t) {
        if (t) {
            var e = VoPlan.getSelPlan(); - 1 == this._selPlanIndex && (this._selPlanIndex = e.index), GameGlobal.tick.addInterv(this.delayFunc, 100, this, !0)
        } else e = VoPlan.getPlanByIndex(this._selPlanIndex);
        e.index > 0 ? (this._selPlanIndex = e.index, this.listPlan.selectedItem = e) : (this._selPlanIndex = -1, this.listPlan.selectedItem = null), this.onUpdate()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setState(e || "st1"), GameGlobal.modelhb.on(ModelHB.msg_hbZhenFa, this.onUpdate, this), GameGlobal.modelhb.on(ModelHB.msg_hbPlan, this.onUpdate, this), this.setPlanSel(!0)
    }, e.prototype.setState = function (t) {
        switch (t) {
            case "st1":
                for (var e = 0; e < this.arrowsGroup.numChildren; e++) this.arrowsGroup.getChildAt(e).visible = !1;
                this.groupMsk.visible = !1;
                break;
            case "st2":
                var i = VoHuoban.getAllActived();
                this.sourceData4.source = i, this.groupMsk.visible = !0
        }
    }, e.prototype.onUpdate = function () {
        var t = this.listPlan.selectedItem;
        if (t) {
            var e = VoZhenfa.find(t.zhenfaId);
            e && e.cfg ? (this.txtZFNm.text = this.words[e.cfg.l] + "级" + e.cfg.n, this.curZfId = e.cfg.id) : (this.txtZFNm.text = "无", this.curZfId = -1)
        } else this.imgZFLvDes.visible = !0, this.txtZfLvDes.text = "";
        this.updateAtts(this.curZfId), this.updateMembers(), this.btn.setNoticeVis(VoZhenfa.notice())
    }, e.prototype.updateAtts = function (t) {
        if (this.watchLeft(t - 1), this.watchRight(t + 1), this.curZfId > 0) {
            var e = CFG_HUOBAN2.LIB[this.curZfId];
            VoHBZFAtt.parse(e.zfttr)
        } else VoHBZFAtt.insureNull();
        this.sourceData2.source = VoHBZFAtt.list.concat(), this.updateDescription()
    }, e.prototype.updateDescription = function () {
        var t = VoPlan.getPlanByIndex(this._selPlanIndex);
        if (t)
            if (t.zhenfaId == this.curZfId || -1 == this.curZfId) this.imgZFLvDes.visible = !0, this.txtZfLvDes.text = "";
            else {
                this.imgZFLvDes.visible = !1;
                var e = CFG_HUOBAN2.LIB[this.curZfId].l;
                this.txtZfLvDes.text = e + "级效果"
            }
    }, e.prototype.updateMembers = function () {
        var t = VoPlan.getPlanByIndex(this._selPlanIndex),
            e = t.voMembers,
            i = [],
            o = GameGlobal.modelRole.voMine,
            n = new VoPlanMem;
        n.member = o, i.push(n);
        for (var a = 0; a < e.length; a++) i.push(e[a]);
        this.sourceData3.source = i
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelhb.off(ModelHB.msg_hbZhenFa, this.onUpdate, this), GameGlobal.modelhb.off(ModelHB.msg_hbPlan, this.onUpdate, this)
    }, e
}(BaseEUIView);
__reflect(Child_HBZF.prototype, "Child_HBZF");
var Child_huoban = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.init(), e
    }
    return __extends(e, t), e.prototype.guideEnable = function () {
        var t = GameGlobal.layerMgr.getView(e.NEWHUOBAN);
        t.guideEnable()
    }, e.prototype.guideOpenZF = function () {
        var t = GameGlobal.layerMgr.getView(e.NEWHUOBAN);
        t.guideOpenZF()
    }, e.prototype.guideDressFW = function () {
        var t = GameGlobal.layerMgr.getView(e.NEWHUOBANFW);
        t.guideDressFW()
    }, e.prototype.init = function () {
        this.bottomCont = new egret.Sprite, this.addChild(this.bottomCont), GameGlobal.layerMgr.reg(e.NEWHUOBAN, Child_Huoban_new, this.bottomCont), GameGlobal.layerMgr.reg(e.NEWHUOBANSX, Child_HuobanSX_new, this.bottomCont), GameGlobal.layerMgr.reg(e.NEWHUOBANFW, Child_HuobanFW_new, this.bottomCont), GameGlobal.layerMgr.reg(e.HUOBANJUEXING, Child_HuoBanJX, this.bottomCont), this.addJueXingEntrance()
    }, e.prototype.addJueXingEntrance = function () {
        this.group = new eui.Group, this.group.$setX(60), this.group.$setY(485), this.group.width = this.group.height = 75, this.notice = new eui.Image("MainScreen_json.bm_red"), this.notice.top = 0, this.notice.right = 0;
        var t = new eui.Image("hbJXAtlas_json.jueXingIcon");
        this.addChild(this.group), this.group.addChild(t), this.group.addChild(this.notice), DisplayUtil.popBtnStyle(this.group), this.group.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onJueXing, this)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelhb.on(ModelHB.msg_huobanSelection, this.onHuobanSel, this), GameGlobal.modelhb.on(ModelHB.msg_hbState, this.onHuobanSel, this), GameGlobal.modelhb.on(ModelHB.msg_jxdatas, this.setNotice, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.setNotice, this), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.setNotice, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelhb.off(ModelHB.msg_huobanSelection, this.onHuobanSel, this), GameGlobal.modelhb.off(ModelHB.msg_hbState, this.onHuobanSel, this), GameGlobal.modelhb.off(ModelHB.msg_jxdatas, this.setNotice, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.setNotice, this), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.setNotice, this)
    }, e.prototype.onHuobanSel = function () {
        var t = VHuobanPage.getSelHuoban();
        CFG_COMMOND.isOpen(CFG_COMMOND.XSJX) ? (t.cfg.pz >= 4 && t.state > 1 && ("st1" == this._curState || "st2" == this._curState) ? this.group.visible = !0 : this.group.visible = !1, this.setNotice()) : this.group.visible = !1
    }, e.prototype.onJueXing = function () {
        this.setState("st4");
        var t = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        t && t.onlyUnSetSel()
    }, e.prototype.onOpen = function (t) {
        var e = t ? t : "st1";
        this.setState(e), this.onHuobanSel(), this.setNotice(), this.addMsg()
    }, e.prototype.setNotice = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.XSJX) && (VoXSJueXing.updateNotice(), this.notice.visible = VoXSJueXing.noticeJueXing(VHuobanPage.getSelHuoban().cfg.id))
    }, e.prototype.setState = function (t) {
        switch (this._curState = t, this.curSyId && GameGlobal.layerMgr.close(this.curSyId), t) {
            case "st1":
                GameGlobal.layerMgr.open(e.NEWHUOBAN), this.curSyId = e.NEWHUOBAN, this.group.visible = !0;
                break;
            case "st2":
                GameGlobal.layerMgr.open(e.NEWHUOBANSX), this.curSyId = e.NEWHUOBANSX, this.group.visible = !0;
                break;
            case "st3":
                GameGlobal.layerMgr.open(e.NEWHUOBANFW), this.curSyId = e.NEWHUOBANFW, this.group.visible = !1;
                break;
            case "st4":
                GameGlobal.layerMgr.open(e.HUOBANJUEXING), this.curSyId = e.HUOBANJUEXING, this.group.visible = !1
        }
    }, e.prototype.onClose = function () {
        this.curSyId && GameGlobal.layerMgr.close(this.curSyId), this.curSyId = null, this.removeMsg()
    }, e.NEWHUOBAN = "NEWHUOBAN", e.NEWHUOBANSX = "NEWHUOBANSX", e.NEWHUOBANFW = "NEWHUOBANFW", e.HUOBANJUEXING = "HUOBANJUEXING", e
}(BaseEUIView);
__reflect(Child_huoban.prototype, "Child_huoban");
var TxtLabel = function () {
    function t() {}
    return t.getText = function (t, e) {
        var i = new eui.Label;
        return i.size = t, i.textColor = e, i
    }, t
}();
__reflect(TxtLabel.prototype, "TxtLabel");
var Child_Huoban_new = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.typeUrl = ["HBAtlas2_json.wugong", "HBAtlas2_json.fa", "HBAtlas2_json.fu"], e.starUrl = ["HBAtlas2_json.starGrey", "HBAtlas2_json.star"], e.QUALITY0 = "HBAtlas2_json.R", e.QUALITY1 = "HBAtlas2_json.SR", e.QUALITY2 = "HBAtlas2_json.SSR", e.QUALITY3 = "HBAtlas2_json.SSSR", e.souceDataSkill = new eui.ArrayCollection, e.tempArr = [], e.skinName = "Child_HuoBanSkin_new", e
    }
    return __extends(e, t), e.prototype.guideEnable = function () {
        QuestGuideArrow.getIns().guideTo(this.btnHand, 55, 20)
    }, e.prototype.guideOpenZF = function () {
        QuestGuideArrow.getIns().guideTo(this.btnHand, 55, 20)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnZF), this.zhanliImg = new ImageText, this.zhanliImg.charFunc = ImageText.STRFUNC, this.zhanliImg.container = this.gpZhanli, this.skillList.dataProvider = this.souceDataSkill, this.skillList.itemRenderer = ItemHbSkill, this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnZF.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onZF, this), this.hbPart.addEventListener(egret.TouchEvent.TOUCH_TAP, VHuobanPage.showIntroduce, null), this.grid.enableTip(), this.grid.setShowCount(!1), this.uirole = UIRole.create(), this.hbPart.addChild(this.uirole), this.hbPart.scaleX = this.hbPart.scaleY = 1.5, this.huaJing.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCheckSkin, this)
    }, e.prototype.onLink = function () {
        var t = VHuobanPage.getSelHuoban();
        2010 == t.cfg.id ? CFG_COMMOND.isOpen(CFG_COMMOND.SUOYAOTA, !0) && GameGlobal.layerMgr.open(UIConst.VSYT, 1) : CFG_COMMOND.isOpen(UIConst.CHOUKA, !0) && GameGlobal.layerMgr.open(UIConst.CHOUKA)
    }, e.prototype.onZF = function () {
        if (CFG_COMMOND.isOpen(CFG_COMMOND.HUOBANZF, !0)) {
            var t = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
            t && t.setSel(4)
        }
    }, e.prototype.onHand = function () {
        var t = this.btnHand.label,
            i = VHuobanPage.getSelHuoban();
        switch (t) {
            case "激活":
                e.isClickToJH = !0, GameGlobal.modelhb.CG651(i.cfg.id, 1, 0);
                break;
            case "休息":
                GameGlobal.modelhb.CG651(i.cfg.id, 3, 0);
                break;
            case "出战":
                GameGlobal.layerMgr.open(VHBOnbattle.UIID_HBONBATTLE);
                break;
            case "获取材料":
                GameGlobal.layerMgr.open(VHBGetItems.UIID_HBGETITEMS, i)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onUpdate(), GameGlobal.modelhb.on(ModelHB.msg_hbState, this.updateState, this), GameGlobal.modelhb.on(ModelHB.msg_huobanSelection, this.onUpdate, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateCost, this), GameGlobal.modelhb.on(ModelHB.msg_refAttributes, this.onUpdate, this), GameGlobal.modelhb.on(ModelHB.MSG_BDJNINFO, this.getBDJNskillData, this), EventCenter.addMsg(HuobanSkin.Event.UPDATE_SKIN_INFO, this.updateSkinInfo, this), EventCenter.addMsg(HuobanSkin.Event.UPDATE_ILLU_MODEL, this.updateSkinInfo, this), EventCenter.addMsg(HuobanSkin.Event.UPDATE_SKIN_NOTICE, this.updateSkinNotice, this), this.noticeZhenFa()
    }, e.prototype.noticeZhenFa = function () {
        this.imgNotice.visible = VoZhenfa.notice()
    }, e.prototype.onUpdate = function () {
        var t = VHuobanPage.getSelHuoban(),
            e = this.getXSid();
        e && GameGlobal.modelhb.CG685(e), this.iconHBType.source = this.typeUrl[t.cfg.t - 1], this.txtHBName.textFlow = HtmlUtil.parse(HtmlUtil.color(t.cfg.n, VoHuoban.getColorByQuality(t.cfg.pz))), this.txtAttType.text = "特点：" + t.cfg.cha;
        var i = t.cfg.m;
        this.uirole.setBody(i), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play(), this.updateZhanli(), this.updateQuality(), this.updateStar(), this.updateAtt(), this.updateSkill(), this.updateCost(), this.showHuaJing(t)
    }, e.prototype.showHuaJing = function (t) {
        var e = GameCtrlBase.instance.getModel(HuobanSkin.Model);
        if (e.checkToShowHuajing(t)) {
            this.groupHuajing.visible = !0;
            var i = e.getSkinIdByVoHuoban(t);
            e.initSkinData(t), GameCtrlBase.instance.getProxy(HuobanSkin.Proxy).askOpenSkin(i)
        } else this.groupHuajing.visible = !1
    }, e.prototype.updateAtt = function () {
        for (var t = VHuobanPage.getSelHuoban(), e = VoHuoban.getAttibute(t), i = e.length, o = (GameGlobal.modelRole.voMine, CFG_ATTR.LIB, []), n = 0; i > n; n++) {
            var a = e[n],
                s = new AttributeData;
            s.name = a.name, s.value = a.val, s.addValue = -1 == a.addVal ? null : a.addVal, o.push(s)
        }
        this.attributeLabel.setData(o)
    }, e.prototype.updateZhanli = function () {
        var t = VHuobanPage.getSelHuoban(),
            e = GameGlobal.modelRole.voMine;
        if (t.state > 1) this.zhanliImg.setText("z" + t.zhanli);
        else {
            var i = VoAttribute.parse(t.cfg.battr),
                o = VoAttribute.caculateArrScore(i);
            this.zhanliImg.setText("z" + (o + e.teamStr))
        }
    }, e.prototype.updateQuality = function () {
        var t = VHuobanPage.getSelHuoban(),
            e = t.cfg.pz;
        switch (e) {
            case 3:
                this.iconPZ.source = this.QUALITY0;
                break;
            case 4:
                this.iconPZ.source = this.QUALITY1;
                break;
            case 5:
                this.iconPZ.source = this.QUALITY2;
                break;
            case 6:
                this.iconPZ.source = this.QUALITY3;
                break;
            default:
                this.iconPZ.source = null
        }
    }, e.prototype.updateStar = function () {
        var t = VHuobanPage.getSelHuoban(),
            e = this.starCont.$children.length;
        if (t.voStar && parseInt(t.voStar.cfg.hblevel) >= 0)
            for (var i = t.voStar.cfg.hblevel, o = 0; e > o; o++) {
                var n = this.starCont.getChildAt(o);
                i > o ? n.source = this.starUrl[1] : n.source = this.starUrl[0]
            } else
                for (var o = 0; e > o; o++) n = this.starCont.getChildAt(o), n.source = this.starUrl[0]
    }, e.prototype.getXSid = function () {
        var t = null,
            e = VHuobanPage.getSelHuoban(),
            i = e.cfg.n;
        for (var o in CFG_XSBDJN.LIB) {
            var n = CFG_XSBDJN.LIB[o];
            n.xs == i && (t = e.cfg.id)
        }
        return t
    }, e.prototype.updateSkill = function () {
        var t = VHuobanPage.getSelHuoban();
        GameGlobal.modelBag;
        if (this.scroller.visible = !0, this.btnHand.visible = !0, this.scroller.visible = !0, t.voStar && t.voStar.cfg.hblevel > 0) {
            var e = this.getXSid();
            e ? (this.souceDataSkill.source = this.tempArr, this.illuSkills = this.tempArr) : (this.souceDataSkill.source = t.voStar.getMjSkill(), this.illuSkills = t.voStar.getMjSkill())
        } else this.souceDataSkill.source = t.skills, this.illuSkills = t.skills
    }, e.prototype.getBDJNskillData = function (t) {
        this.tempArr.length = 0;
        var e = VHuobanPage.getSelHuoban(),
            i = e.voStar.cfg;
        if (i && e.voStar && e.voStar.cfg.hblevel > 0) {
            for (var o = i.jn.split(/\;|\,/), n = 0; n < o.length; n += 2) {
                var a = parseInt(o[n]),
                    s = parseInt(o[n + 1]),
                    r = Vo_Skill.create(a, s),
                    l = new VoHBSkill;
                l.voSkill = r, l.jtSkill = i.jtjn, this.tempArr.push(l)
            }
            if (0 != t) {
                var h = parseInt(CFG_XSBDJN.LIB[t].jnqd.split(",")[0]),
                    c = CFG_XSBDJN.LIB[t].dj,
                    p = Vo_Skill.create(h, c),
                    u = new VoHBSkill;
                u.voSkill = p, this.tempArr[2] = u
            }
        }
    }, e.prototype.updateBtnSkin = function (t) {
        this.btnHand.skinName = t, this.btnHand.setNoticeVis(!1)
    }, e.prototype.updateCost = function () {
        var t = VHuobanPage.getSelHuoban();
        this.updateState(t), this.noticeZhenFa(), CFG_COMMOND.isOpen(CFG_COMMOND.HUOBAN_SKIN, !1) && GameCtrlBase.instance.getProxy(HuobanSkin.Proxy).askNoticeSkin()
    }, e.prototype.updateState = function (t) {
        var e = GameGlobal.modelBag;
        switch (t.state) {
            case 1:
                this.costGroup.visible = !0, this.grid.data = t.actCost, this.txtCost.textFlow = ConfigHelp.costTxt(t.cfg.con, "#2E8207");
                var i = e.getItemCount(this.grid.data.id);
                i >= this.grid.data.count ? (this.updateBtnSkin("EasyButton_ySkin"), this.btnHand.label = "激活") : (this.updateBtnSkin("EasyButton_ySkin"), this.btnHand.label = "获取材料");
                break;
            case 2:
                this.costGroup.visible = !1, this.updateBtnSkin("EasyButton_1Skin"), this.btnHand.label = "休息";
                break;
            case 3:
                this.costGroup.visible = !1, this.updateBtnSkin("EasyButton_1Skin"), this.btnHand.label = "出战"
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelhb.off(ModelHB.msg_hbStar, this.onUpdate, this), GameGlobal.modelhb.off(ModelHB.msg_hbState, this.updateState, this), GameGlobal.modelhb.off(ModelHB.msg_huobanSelection, this.onUpdate, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateCost, this), GameGlobal.modelhb.off(ModelHB.msg_refAttributes, this.onUpdate, this), GameGlobal.modelhb.off(ModelHB.MSG_BDJNINFO, this.getBDJNskillData, this), EventCenter.removeMsg(HuobanSkin.Event.UPDATE_SKIN_INFO, this.updateSkinInfo, this), EventCenter.removeMsg(HuobanSkin.Event.UPDATE_ILLU_MODEL, this.updateSkinInfo, this), EventCenter.removeMsg(HuobanSkin.Event.UPDATE_SKIN_NOTICE, this.updateSkinNotice, this), this.uirole.stopAndClear()
    }, e.prototype.onCheckSkin = function () {
        var t = VHuobanPage.getSelHuoban();
        this.openView(HuobanSkin.SkinView, t)
    }, e.prototype.updateSkinInfo = function () {
        var t = VHuobanPage.getSelHuoban();
        if (GameCtrlBase.instance.getModel(HuobanSkin.Model).m_huobanId == t.cfg.id) {
            var e = t.cfg.m,
                i = GameCtrlBase.instance.getModel(HuobanSkin.Model);
            i.m_skinData.illuState == HuobanSkin.Illustion.ILLU ? (0 != i.getIlluRoleModel(i.m_skinData.id) && (e = i.getIlluRoleModel(i.m_skinData.id)), this.souceDataSkill.source = i.replaceSkill(this.illuSkills, t)) : this.souceDataSkill.source = this.illuSkills, this.uirole.setBody(e), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play(), this.souceDataSkill.source = i.replaceSkill(this.illuSkills, t)
        }
    }, e.prototype.updateSkinNotice = function () {
        for (var t = GameCtrlBase.instance.getModel(HuobanSkin.Model), e = VHuobanPage.getSelHuoban(), i = t.m_allNotice, o = 0; o < i.length; o++)
            if (e.cfg.id == i[o].huobanId && 1 == i[o].isNotice) return void(this.iconNotice.visible = !0);
        this.iconNotice.visible = !1
    }, e.isClickToJH = !1, e
}(BaseEUIView);
__reflect(Child_Huoban_new.prototype, "Child_Huoban_new");
var Child_HuobanFW_new = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.items = [], e.attributes = [{
            id: 102,
            name: "气血",
            val: 0
        }, {
            id: 105,
            name: "物防",
            val: 0
        }, {
            id: 106,
            name: "法防",
            val: 0
        }, {
            id: 103,
            name: "攻击",
            val: 0
        }, {
            id: 119,
            name: "速度",
            val: 0
        }, {
            id: 108,
            name: "暴击",
            val: 0
        }, {
            id: 110,
            name: "抗暴",
            val: 0
        }, {
            id: 111,
            name: "暴击增伤",
            val: 0
        }, {
            id: 113,
            name: "暴伤减少",
            val: 0
        }, {
            id: 115,
            name: "伤害增加",
            val: 0
        }, {
            id: 117,
            name: "物伤减少",
            val: 0
        }, {
            id: 118,
            name: "法伤减少",
            val: 0
        }, {
            id: 151,
            name: "伤害减少",
            val: 0
        }], e.introduce = "1. 符文可为仙神提供大量的属性加成，同时提供大量的高级属性加成；\n2. 符文的星级越高，则基础属性越高，同时附加属性的条数也越多；\n3. 在获得符文时，随机获得附加属性的属性条和属性值；\n4. 附加属性的属性值高低，对应显示的颜色为白色/蓝色/紫色/橙色；\n5. 可使用符文丹（材料副本、领主战可获得）对符文进行强化，同时符文也作为经验材料对符文进行升级；\n6. 符文可在【主城-激战boss-符文boss】、【主城-活动-领主战】、运营活动中获得\n", e.skinName = "Child_HuobanFuWenSkin_new", e
    }
    return __extends(e, t), e.prototype.guideDressFW = function () {
        QuestGuideArrow.getIns().guideTo(this.btnPutOn, 55, 20)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), VoHBFuWen.initMap();
        for (var e = 1; 6 >= e; e++) {
            var i = this["item" + e];
            i.itemIndex = e, i.data = null, i.setStatus(1), this.items.push(i)
        }
        this.btnPutOn.label = "一键穿戴", this.btnTakeOff.label = "一键卸下", this.btnPutOn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnTakeOff.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHelp, this), this.uirole = UIRole.create(), this.partContainer.addChild(this.uirole), this.partContainer.scaleX = this.partContainer.scaleY = 1.5
    }, e.prototype.onHelp = function () {
        ViewWenHao.show(this.introduce)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget,
            i = VHuobanPage.getSelHuoban();
        switch (e) {
            case this.btnPutOn:
                GameGlobal.modelhb.CG2655(i.cfg.id, 1), GuideMgr.fwBtnClick = !0;
                break;
            case this.btnTakeOff:
                GameGlobal.modelhb.CG2655(i.cfg.id, 2)
        }
    }, e.prototype.ensureZeroAtt = function () {
        for (var t in this.attributes) {
            var e = this.attributes[t];
            e.val = 0
        }
    }, e.prototype.updateAtts = function () {
        this.ensureZeroAtt();
        for (var t = VHuobanPage.getSelHuoban(), e = t.fuwenAtts, i = e.length, o = 0; i > o; o++) {
            var n = e[o],
                a = n[0],
                s = n[1],
                r = this.findAttObj(a);
            r && (r.val = s)
        }
        var i = this.group1.$children.length;
        this.group1.validateNow(), this.sureAddAtts()
    }, e.prototype.sureAddAtts = function () {
        for (var t = this, e = 0; 3 > e; e++) {
            var i = t.group1.getChildAt(e),
                o = t.attributes[e];
            i.textFlow = HtmlUtil.parse(o.name + ": " + HtmlUtil.color(VoHBFuWen.getRealVal(o), "#10a244"))
        }
        for (var e = 3; 6 > e; e++) i = t.group2.getChildAt(e - 3), o = t.attributes[e], i.textFlow = HtmlUtil.parse(o.name + ": " + HtmlUtil.color(VoHBFuWen.getRealVal(o), "#10a244"));
        for (var e = 6; 9 > e; e++) i = t.group3.getChildAt(e - 6), o = t.attributes[e], i.textFlow = HtmlUtil.parse(o.name + ": " + HtmlUtil.color(VoHBFuWen.getRealVal(o), "#10a244"));
        for (var e = 9; 12 > e; e++) i = t.group4.getChildAt(e - 9), o = t.attributes[e], i.textFlow = HtmlUtil.parse(o.name + ": " + HtmlUtil.color(VoHBFuWen.getRealVal(o), "#10a244"))
    }, e.prototype.findAttObj = function (t) {
        for (var e = this.attributes.length, i = 0; e > i; i++) {
            var o = this.attributes[i];
            if (o.id == t) return o
        }
        return null
    }, e.prototype.updateFuWen = function () {
        for (var t = VHuobanPage.getSelHuoban(), e = t.voFuWens, i = 0; i < this.items.length; i++) {
            var o = this.items[i];
            o.data = null
        }
        for (var n = e.length, i = 0; n > i; i++) {
            var a = e[i],
                o = this.getItemByPos(a.position);
            o.data = a
        }
    }, e.prototype.getItemByPos = function (t) {
        return this.items[t - 1]
    }, e.prototype.showHuobanMX = function () {
        var t = VHuobanPage.getSelHuoban(),
            e = t.cfg.m;
        this.uirole.setBody(e), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelhb.on(ModelHB.msg_hbFuWen, this.onUpdate, this), GameGlobal.modelhb.on(ModelHB.msg_huobanSelection, this.onSelHuoban, this), GameGlobal.modelhb.on(ModelHB.msg_hbFuWenVal, this.updateAtts, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelhb.off(ModelHB.msg_hbFuWen, this.onUpdate, this), GameGlobal.modelhb.off(ModelHB.msg_huobanSelection, this.onSelHuoban, this), GameGlobal.modelhb.off(ModelHB.msg_hbFuWenVal, this.updateAtts, this)
    }, e.prototype.onSelHuoban = function () {
        this.showHuobanMX(), this.onUpdate()
    }, e.prototype.showNotice = function () {
        this.emptyGridNotice(), this.betterDataNotice()
    }, e.prototype.emptyGridNotice = function () {
        for (var t = this.items.length, e = 0; t > e; e++) {
            var i = this.items[e];
            if (i && null == i.data) {
                var o = i.itemIndex,
                    n = VoHBFuWen.hasPositionData(o);
                n ? i.setNotice(!0) : i.setNotice(!1)
            } else i.setNotice(!1)
        }
    }, e.prototype.betterDataNotice = function () {
        for (var t = this.items.length, e = 0; t > e; e++) {
            var i = this.items[e];
            if (i && i.data) {
                var o = i.data.position,
                    n = VoHBFuWen.hasBetterData(o, i.data);
                n ? i.setNotice(!0) : i.setNotice(!1)
            }
        }
    }, e.prototype.onUpdate = function () {
        this.updateFuWen(), this.updateAtts(), this.showNotice()
    }, e.prototype.onHQFW = function () {
        var t = [37, 38, 36];
        GameGlobal.layerMgr.open(UIConst.CAILIAOGETS, t)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), this.showHuobanMX(), this.onUpdate()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), this.uirole.stop()
    }, e
}(BaseEUIView);
__reflect(Child_HuobanFW_new.prototype, "Child_HuobanFW_new");
var Child_HuobanSX_new = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.typeUrl = ["HBAtlas2_json.wugong", "HBAtlas2_json.fa", "HBAtlas2_json.fu"], e.starUrl = ["HBAtlas2_json.starGrey", "HBAtlas2_json.star"], e.QUALITY0 = "HBAtlas2_json.R", e.QUALITY1 = "HBAtlas2_json.SR", e.QUALITY2 = "HBAtlas2_json.SSR", e.QUALITY3 = "HBAtlas2_json.SSSR", e.souceDataSkill = new eui.ArrayCollection, e.skinName = "Child_HuobanSXSkin_new", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnZF), DisplayUtil.popBtnStyle(this.txtLink), this.zhanliImg = new ImageText, this.zhanliImg.charFunc = ImageText.STRFUNC, this.zhanliImg.container = this.gpZhanli, this.skillList.dataProvider = this.souceDataSkill, this.skillList.itemRenderer = ItemHbSkill, this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnZF.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onZF, this), this.txtLink.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLink, this), this.hbPart.addEventListener(egret.TouchEvent.TOUCH_TAP, VHuobanPage.showIntroduce, null), this.grid.enableTip(), this.grid.setShowCount(!1), this.uirole = UIRole.create(), this.hbPart.addChild(this.uirole), this.hbPart.scaleX = this.hbPart.scaleY = 1.5, this.attributeLabel.setLineSpacing(45)
    }, e.prototype.onLink = function () {
        var t = VHuobanPage.getSelHuoban();
        if (2010 == t.cfg.id) CFG_COMMOND.isOpen(CFG_COMMOND.SUOYAOTA, !0) && GameGlobal.layerMgr.open(UIConst.VSYT, 1);
        else if (2012 == t.cfg.id) {
            var e = GameGlobal.modelAct.actData.getChildByID(13);
            e ? CFG_COMMOND.isOpen(UIConst.CHOUKA, !0) && GameGlobal.layerMgr.open(UIConst.CHOUKA) : ViewText.text("敬请期待！")
        } else CFG_COMMOND.isOpen(UIConst.CHOUKA, !0) && GameGlobal.layerMgr.open(UIConst.CHOUKA)
    }, e.prototype.onZF = function () {
        if (CFG_COMMOND.isOpen(CFG_COMMOND.HUOBANZF, !0)) {
            var t = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
            t && t.setSel(4)
        }
    }, e.prototype.onHand = function () {
        var t = this.btnHand.label,
            e = VHuobanPage.getSelHuoban();
        switch (t) {
            case "升星":
                var i = ConfigHelp.makeVoList(e.voStar.cfg.xiaohao)[0],
                    o = GameGlobal.modelBag.getItemCount(i.id);
                if (o < i.count) return void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, i);
                GameGlobal.modelhb.CG673(e.cfg.id)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelhb.on(ModelHB.msg_hbStar, this.onUpdate, this), GameGlobal.modelhb.on(ModelHB.msg_huobanSelection, this.onUpdate, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateCost, this), GameGlobal.modelhb.CG671(), this.noticeZhenFa()
    }, e.prototype.noticeZhenFa = function () {
        this.imgNotice.visible = VoZhenfa.notice()
    }, e.prototype.onUpdate = function () {
        var t = VHuobanPage.getSelHuoban();
        this.iconHBType.source = this.typeUrl[t.cfg.t - 1], this.txtHBName.textFlow = HtmlUtil.parse(HtmlUtil.color(t.cfg.n, VoHuoban.getColorByQuality(t.cfg.pz))), this.txtAttType.text = "特点：" + t.cfg.cha;
        var e = t.cfg.m;
        this.uirole.setBody(e), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play(), this.updateZhanli(), this.updateQuality(), this.updateStar(), this.updateAtt(), this.updateSkill()
    }, e.prototype.updateAtt = function () {
        for (var t = VHuobanPage.getSelHuoban(), e = t.voStar.getShengXingAtt(), i = e.length, o = (GameGlobal.modelRole.voMine, CFG_ATTR.LIB, []), n = 0; i > n; n++) {
            var a = e[n],
                s = new AttributeData;
            s.name = a.name, s.value = a.val, a.addVal >= 0 && (s.addValue = a.addVal), o.push(s)
        }
        this.attributeLabel.setData(o)
    }, e.prototype.updateZhanli = function () {
        var t = VHuobanPage.getSelHuoban(),
            e = GameGlobal.modelRole.voMine;
        if (t.state > 1) this.zhanliImg.setText("z" + t.zhanli);
        else {
            var i = VoAttribute.parse(t.cfg.battr),
                o = VoAttribute.caculateArrScore(i);
            this.zhanliImg.setText("z" + (o + e.teamStr))
        }
    }, e.prototype.updateStar = function () {
        var t = VHuobanPage.getSelHuoban(),
            e = this.starCont.$children.length;
        if (t.voStar && parseInt(t.voStar.cfg.hblevel) >= 0)
            for (var i = t.voStar.cfg.hblevel, o = 0; e > o; o++) {
                var n = this.starCont.getChildAt(o);
                i > o ? n.source = this.starUrl[1] : n.source = this.starUrl[0]
            } else
                for (var o = 0; e > o; o++) n = this.starCont.getChildAt(o), n.source = this.starUrl[0]
    }, e.prototype.updateQuality = function () {
        var t = VHuobanPage.getSelHuoban(),
            e = t.cfg.pz;
        switch (e) {
            case 3:
                this.iconPZ.source = this.QUALITY0;
                break;
            case 4:
                this.iconPZ.source = this.QUALITY1;
                break;
            case 5:
                this.iconPZ.source = this.QUALITY2;
                break;
            case 6:
                this.iconPZ.source = this.QUALITY3;
                break;
            default:
                this.iconPZ.source = null
        }
    }, e.prototype.updateSkill = function () {
        var t = VHuobanPage.getSelHuoban();
        GameGlobal.modelBag;
        if (this.scroller.visible = !0, this.updateBtnSkin("EasyButton_1Skin"), this.btnHand.label = "升星", 0 == t.voStar.skills.length) this.scroller.visible = !1, this.souceDataSkill.removeAll(), this.txtManji.visible = !0, this.btnHand.visible = !1, this.costGroup.visible = !1, this.groupLabels.visible = !1, this.txtLink.text = "";
        else {
            this.souceDataSkill.source = t.voStar.skills, this.txtManji.visible = !1, this.costGroup.visible = !0, this.groupLabels.visible = !0, this.btnHand.visible = !0, this.txtLv1.text = "Lv." + t.voStar.cfg.jnlevel, this.txtLv2.text = "Lv." + t.voStar.nextCfg.jnlevel, this.txtCost.textFlow = ConfigHelp.costTxt(t.voStar.cfg.xiaohao, "#2E8207");
            var e = ConfigHelp.makeVoList(t.voStar.cfg.xiaohao)[0];
            this.grid.data = e;
            var i = GameGlobal.modelBag.getItemCount(e.id);
            i < e.count ? this.txtLink.textFlow = HtmlUtil.underLine("获取" + e.name) : this.txtLink.text = ""
        }
    }, e.prototype.updateBtnSkin = function (t) {
        this.btnHand.skinName = t, this.btnHand.setNoticeVis(!1)
    }, e.prototype.updateCost = function () {
        var t = VHuobanPage.getSelHuoban();
        t.voStar && ("0" == t.voStar.cfg.xiaohao ? this.txtCost.text = "已满级" : this.txtCost.textFlow = ConfigHelp.costTxt(t.voStar.cfg.xiaohao, "#2E8207")), this.noticeZhenFa()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelhb.off(ModelHB.msg_hbStar, this.onUpdate, this), GameGlobal.modelhb.off(ModelHB.msg_huobanSelection, this.onUpdate, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateCost, this), this.uirole.stop()
    }, e.isClickToJH = !1, e
}(BaseEUIView);
__reflect(Child_HuobanSX_new.prototype, "Child_HuobanSX_new");
var HuobanSkin;
! function (t) {
    var e = function (e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.initialize = function () {
            e.prototype.initialize.call(this)
        }, i.prototype.registUI = function () {
            var e = GameGlobal.layerMgr;
            e.regView(t.SkinView, e.UI_MainMiddle, 1, 1)
        }, i.prototype.registProxys = function () {
            var e = GameGlobal.socketMgr;
            this.registSingleProxy(t.Proxy, e)
        }, i.prototype.addMsgListeners = function () {
            GameCtrlBase.instance;
            EventCenter.addMsg(t.Event.OPEN, this.onOpen, this), EventCenter.addMsg(t.Event.ON_ACTIVITY_INFO, this.onActivityInfo, this)
        }, i.prototype.removeMsgListeners = function () {
            EventCenter.removeMsg(t.Event.OPEN, this.onOpen, this), EventCenter.removeMsg(t.Event.ON_ACTIVITY_INFO, this.onActivityInfo, this)
        }, i.prototype.onOpen = function () {}, i.prototype.onActivityInfo = function () {}, i
    }(UIAndProxyBaseCtr);
    t.HuobanSkinCtr = e, __reflect(e.prototype, "HuobanSkin.HuobanSkinCtr")
}(HuobanSkin || (HuobanSkin = {}));
var HuobanSkin;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.STR_ENABLED = "HBAtlas2_json.greyBg", e.STR_ABLED = "HBAtlas_json.nChose", e.skinName = "ItemHbSkillSkin", e
        }
        return __extends(e, t), e.prototype.childrenCreated = function () {
            t.prototype.childrenCreated.call(this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
        }, e.prototype.onHand = function () {
            var t = (this.itemIndex, 1);
            4 - this.itemIndex == 2 ? t = 1 : 4 - this.itemIndex == 1 && (t = 3);
            var e = {
                level: t,
                vo: this.data
            };
            GameGlobal.layerMgr.open(VHBSkillTip.UIID_VHBSKILLTIP, e)
        }, e.prototype.dataChanged = function () {
            var t = this.data;
            if (t.voSkill) {
                t.voSkill.id == t.jtSkill ? this.jtIcon.visible = !0 : this.jtIcon.visible = !1;
                var e = t.voSkill.level,
                    i = IconUtil.getIconUrl(t.voSkill.icon);
                this.skillIcon.source = i, e > 0 ? (this.bg.source = this.STR_ABLED, this.txtLv.text = "Lv." + t.voSkill.level, this.iconMask.visible = !1) : (this.bg.source = this.STR_ENABLED, this.txtLv.text = "未激活", this.iconMask.visible = !0)
            } else console.error("找不到该技能id or  该技能不存在");
            this.iconMask.visible = !1
        }, e
    }(eui.ItemRenderer);
    t.ExcSkillItem = e, __reflect(e.prototype, "HuobanSkin.ExcSkillItem")
}(HuobanSkin || (HuobanSkin = {}));
var HuobanSkin;
! function (t) {
    var e = function (e) {
        function i() {
            var t = e.call(this) || this;
            return t.souceDataSkill = new eui.ArrayCollection, t.skinName = "ChildHuobanSkinViewSkin", t
        }
        return __extends(i, e), i.prototype.initView = function () {
            e.prototype.initView.call(this), this.model = this.getModel(t.Model), this.skillList1.dataProvider = this.souceDataSkill, this.skillList1.itemRenderer = t.ExcSkillItem, this.numberText = new ImageText, this.numberText.charFunc = ImageText.STRFUNC, this.numberText.container = this.numGroup, this.uirole = UIRole.create(), this.hbPart.addChild(this.uirole), this.hbPart.scaleX = this.hbPart.scaleY = 1.5, DisplayUtil.popBtnStyle(this.btnMaterial), DisplayUtil.popBtnStyle(this.btnActive), DisplayUtil.popBtnStyle(this.btnUpgrade), DisplayUtil.popBtnStyle(this.btnOneKeyUpgrade), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.provis = new ProgressVisitor(this.pro, this.lbpro, 480)
        }, i.prototype.onOpen = function (i) {
            e.prototype.onOpen.call(this, i), this.addEvent(), this.voHuobanData = i, this.model.initSkinData(this.voHuobanData), this.model.m_reinfStep = t.ReinfStep.INIT, this.proxy = this.getProxy(t.Proxy), this.proxy.askOpenSkin(this.model.m_skinData.id);
            var o = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
            o.visible = !1
        }, i.prototype.refreshUI = function () {
            this.model.setUpgradeData(this.model.m_skinData.currentLvl);
            var e = this.model.getSkillLvl(this.voHuobanData);
            this.souceDataSkill.source = this.model.getExclusiveSkills(e), this.lbAddPower.textFlow = HtmlUtil.parse("升级可提升" + HtmlUtil.color(this.model.m_skinData.capability, "#ffe400") + "战力" + HtmlUtil.colorSize("（属性对全体队伍生效）", "#ffe400", 20)), this.lbLvl.text = this.model.m_skinData.currentLvl + "\n\n\n级", this.numberText.setText("z" + this.model.m_skinData.currentPower), this.lbSkinName.$setText(this.model.m_skinData.name), this.model.m_skinData.illuState == t.Illustion.ILLU ? this.imgIllusTransf.source = "partnerSkin_json.23_putong" : this.imgIllusTransf.source = "partnerSkin_json.23_huanhua", this.refreshAttibuteGroup(), this.model.m_skinData.illuState == t.Illustion.ILLU ? this.imghh.visible = !0 : this.imghh.visible = !1;
            var i = this.voHuobanData.cfg.m;
            0 != this.model.getIlluRoleModel(this.model.m_skinData.id) && (i = this.model.getIlluRoleModel(this.model.m_skinData.id)), this.uirole.setBody(i), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play(), this.refreshUpgradeGroup(this.model.m_skinData.activeState)
        }, i.prototype.refreshUpgradeGroup = function (e) {
            if (this.model.m_isFullLvl) this.fullPro(), this.btnCancleOneKey.visible = !1, this.btnUpgrade.visible = !1, this.btnOneKeyUpgrade.visible = !1, this.gridGrp.visible = !1, this.lbsource.visible = !1, this.btnActive.visible = !1, this.btnMaterial.visible = !1, this.grpAddPower.visible = !1, this.proGrp.visible = !0;
            else {
                var i = this.model.checkNoticeVis(e);
                switch (this.grid.data = i.materialGrid, this.lbgrid.text = i.materialGridLb, e) {
                    case t.Activation.NOT_ACTIVE:
                        this.setActiveNotYetUI();
                        break;
                    case t.Activation.ACTIVATED:
                        this.setActiveAlreadyUI()
                }
                this.grpAddPower.visible = !0, this.gridGrp.visible = !0
            }
            this.model.m_shouldNoticeVis ? this.lbgrid.textColor = 1090116 : this.lbgrid.textColor = 14165028
        }, i.prototype.refreshAttibuteGroup = function () {
            this.groupName.removeChildren(), this.groupVal.removeChildren(), this.groupAddVal.removeChildren(), this.model.m_skinData.activeState == t.Activation.NOT_ACTIVE ? this.groupAddVal.visible = !1 : this.groupAddVal.visible = !0;
            for (var e = this.model.m_skinData.id, i = this.model.m_skinData.currentLvl, o = this.model.m_skinData.currentExp, n = this.model.calculateBaseAttibute(e, i, o).values, a = 0; a < n.length; a++) {
                var s = n[a],
                    r = s.name,
                    l = s.value,
                    h = s.sb;
                if (l > 0) {
                    var c = TxtLabel.getText(18, 9643807),
                        p = TxtLabel.getText(18, 6835267);
                    c.text = r + ":", p.text = l + "", h > 1 && (p.text = Math.floor(1e4 * l) / 100 + "%"), this.groupName.addChild(c), this.groupVal.addChild(p)
                }
            }
            for (var u = this.model.calculateAddAttibute(e, i, o).values, a = 0; a < u.length; a++) {
                var d = u[a],
                    f = (d.name, d.value);
                if (f > 0) {
                    var g = TxtLabel.getText(18, 2720553);
                    g.text = "+" + f, this.groupAddVal.addChild(g)
                }
            }
        }, i.prototype.rollUpgradeAndMsg = function () {
            var e = this;
            if (this.model.m_isOneKeyUpgrade == t.Reinf.ONE_KEY_REINF) {
                var i = this.model.m_skinData.currentExp,
                    o = this.model.m_skinData.upgradeExp,
                    n = this.model.m_skinData.id,
                    a = this.model.m_skinData.currentLvl,
                    s = this.model.getAddExpEachUpgrade(n, a),
                    r = !1;
                i + s >= o && (r = !0, this.model.m_reinfStep = t.ReinfStep.OVER_LVL, this.getProxy(t.Proxy).askReinfSkin(n, this.model.m_isAutoUpgrade)), setTimeout(function () {
                    r ? e.model.m_reinfStep = t.ReinfStep.END : e.model.m_reinfStep == t.ReinfStep.START ? e.getProxy(t.Proxy).askReinfSkin(n, e.model.m_isAutoUpgrade) : e.model.m_reinfStep == t.ReinfStep.CANCEL && e.updateSkinInfo()
                }, 400)
            } else this.model.m_reinfStep = t.ReinfStep.ONCE;
            this.updateSkinInfo()
        }, i.prototype.setActiveNotYetUI = function () {
            this.btnUpgrade.visible = this.btnOneKeyUpgrade.visible = this.btnCancleOneKey.visible = this.proGrp.visible = !1, this.lbsource.visible = !0, this.lbgrid1.text = "激活消耗:", this.model.m_shouldNoticeVis ? (this.btnActive.label = "激活", this.btnActive.visible = !0, this.btnMaterial.visible = this.lbsource.visible = !1) : (this.lbsource.textFlow = HtmlUtil.parse(HtmlUtil.color("获取途径:", "#684c43") + this.model.m_skinData.from), this.btnMaterial.label = "前往获取", this.btnActive.visible = !1, this.btnMaterial.visible = !0), this.btnActive.setNoticeVis(this.model.m_shouldNoticeVis)
        }, i.prototype.setActiveAlreadyUI = function () {
            switch (this.btnUpgrade.visible = this.btnOneKeyUpgrade.visible = this.proGrp.visible = !0, this.btnActive.visible = this.btnMaterial.visible = this.lbsource.visible = this.btnCancleOneKey.visible = !1, this.btnOneKeyUpgrade.label = "一键升级", this.btnUpgrade.label = "升级", this.btnCancleOneKey.label = "取消", this.lbgrid1.text = "升级消耗:", this.model.m_reinfStep) {
                case t.ReinfStep.INIT:
                    this.staticPro(), this.btnCancleOneKey.visible = !1, this.btnUpgrade.enabled = !0, this.btnOneKeyUpgrade.visible = !0;
                    break;
                case t.ReinfStep.START:
                    this.dynamicPro(), this.btnCancleOneKey.visible = !0, this.btnUpgrade.enabled = !1, this.btnOneKeyUpgrade.visible = !1;
                    break;
                case t.ReinfStep.END:
                    this.staticPro(), this.btnCancleOneKey.visible = !1, this.btnUpgrade.enabled = !0, this.btnOneKeyUpgrade.visible = !0;
                    break;
                case t.ReinfStep.CANCEL:
                    this.cancelPro(), this.btnCancleOneKey.visible = !1, this.btnUpgrade.enabled = !0, this.btnOneKeyUpgrade.visible = !0;
                    break;
                case t.ReinfStep.OVER_LVL:
                    this.overLvl(), this.btnCancleOneKey.visible = !1, this.btnUpgrade.enabled = !0, this.btnOneKeyUpgrade.visible = !0;
                    break;
                case t.ReinfStep.ONCE:
                    this.dynamicPro(), this.btnCancleOneKey.visible = !1, this.btnUpgrade.enabled = !0, this.btnOneKeyUpgrade.visible = !0
            }
            this.btnOneKeyUpgrade.setNoticeVis(this.model.m_shouldNoticeVis), this.btnUpgrade.setNoticeVis(this.model.m_shouldNoticeVis)
        }, i.prototype.staticPro = function () {
            var t = this.model.m_skinData.currentExp,
                e = this.model.m_skinData.upgradeExp;
            this.provis.staticToValue(t, e)
        }, i.prototype.dynamicPro = function () {
            var t = this.model.m_skinData.currentExp,
                e = this.model.m_skinData.upgradeExp;
            this.provis.dynamicToValue(t, e)
        }, i.prototype.overLvl = function () {
            var t = this.model.m_skinData.currentExp,
                e = this.model.m_skinData.upgradeExp;
            this.provis.stop(), this.provis.staticToValue(t, e)
        }, i.prototype.cancelPro = function () {
            var t = this.model.m_skinData.currentExp,
                e = this.model.m_skinData.upgradeExp;
            this.provis.staticToValue(t, e)
        }, i.prototype.fullPro = function () {
            this.provis.stop(), this.provis.showFire(), this.provis.setManji(!0)
        }, i.prototype.onBtnClick = function (e) {
            var i = e.currentTarget;
            switch (i) {
                case this.btnActive:
                    this.proxy.askActiveSkin(this.model.m_skinData.id);
                    break;
                case this.btnMaterial:
                    GameGlobal.layerMgr.open(UIConst.CAILIAOGET, ConfigHelp.makeVoList(this.model.m_skinData.active_need)[0]);
                    break;
                case this.btnUpgrade:
                    this.model.m_reinfStep = t.ReinfStep.START, this.model.m_isOneKeyUpgrade = t.Reinf.ONE_BY_ONE, this.model.m_isAutoUpgrade = t.Upgrade.NOMAL, this.proxy.askReinfSkin(this.model.m_skinData.id, this.model.m_isAutoUpgrade);
                    break;
                case this.btnOneKeyUpgrade:
                    this.model.m_reinfStep = t.ReinfStep.START, this.model.m_isOneKeyUpgrade = t.Reinf.ONE_KEY_REINF, this.model.m_isAutoUpgrade = t.Upgrade.NOMAL, this.proxy.askReinfSkin(this.model.m_skinData.id, this.model.m_isAutoUpgrade);
                    break;
                case this.btnCancleOneKey:
                    this.model.m_reinfStep = t.ReinfStep.CANCEL;
                    break;
                case this.imgIllusTransf:
                    this.model.m_skinData.illuState == t.Illustion.ILLU ? this.proxy.askIlluSkin(this.model.m_skinData.id, t.Illustion.NOMAL) : this.model.m_skinData.activeState == t.Activation.ACTIVATED ? this.proxy.askIlluSkin(this.model.m_skinData.id, t.Illustion.ILLU) : ViewText.text("请先激活皮肤！")
            }
        }, i.prototype.updateSkinInfo = function () {
            this.refreshUI()
        }, i.prototype.updateIlluModel = function () {
            this.model.m_skinData.illuState == t.Illustion.ILLU ? ViewText.text("更换形象成功！") : ViewText.text("更换形象成功！"), this.refreshUI()
        }, i.prototype.addEvent = function () {
            this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.btnMaterial.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btnActive.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btnUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btnOneKeyUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btnCancleOneKey.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.imgIllusTransf.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), EventCenter.addMsg(t.Event.UPDATE_SKIN_INFO, this.updateSkinInfo, this), EventCenter.addMsg(t.Event.UPDATE_ILLU_MODEL, this.updateIlluModel, this), EventCenter.addMsg(t.Event.UPDATE_ROLL_ONE_KEY, this.rollUpgradeAndMsg, this), this.grid.enableTip()
        }, i.prototype.removeEvent = function () {
            this.removeCloseListen(this.btnClose), this.removeCloseListen(this.btnReturn), this.btnActive.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btnMaterial.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btnUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btnOneKeyUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.btnCancleOneKey.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), this.imgIllusTransf.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this), EventCenter.removeMsg(t.Event.UPDATE_SKIN_INFO, this.updateSkinInfo, this), EventCenter.removeMsg(t.Event.UPDATE_ILLU_MODEL, this.updateIlluModel, this), EventCenter.removeMsg(t.Event.UPDATE_ROLL_ONE_KEY, this.rollUpgradeAndMsg, this), this.grid.disableTip()
        }, i.prototype.onClose = function () {
            e.prototype.onClose.call(this), this.removeEvent();
            var t = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
            t.visible = !0, this.uirole.stopAndClear()
        }, i.prototype.onSize = function () {
            this.fullStage()
        }, i
    }(BaseEUIView);
    t.SkinView = e, __reflect(e.prototype, "HuobanSkin.SkinView")
}(HuobanSkin || (HuobanSkin = {}));
var HuobanSkin;
! function (t) {
    var e = function () {
        function t() {
            this.init()
        }
        return t.prototype.init = function () {
            this.name = "", this.value = 0, this.id = 0, this.sb = 0
        }, t
    }();
    t.Attribute = e, __reflect(e.prototype, "HuobanSkin.Attribute")
}(HuobanSkin || (HuobanSkin = {}));
var HuobanSkin;
! function (t) {
    var e = function () {
        function t() {
            this.init()
        }
        return t.prototype.init = function () {
            this.huobanId = 0, this.activeState = 0, this.isNotice = !1
        }, t
    }();
    t.NoticeData = e, __reflect(e.prototype, "HuobanSkin.NoticeData")
}(HuobanSkin || (HuobanSkin = {}));
var HuobanSkin;
! function (t) {
    var e = function () {
        function t() {
            this.init()
        }
        return t.prototype.init = function () {
            this.id = 0, this.replace = 0, this.name = "", this.active_need = "", this.initAttribute = "", this.basicPower = 0, this.skillOne = "", this.skillTwo = "", this.currentLvl = 0, this.currentExp = 0, this.upgradeExp = 0, this.currentPower = 0, this.illuState = 0, this.activeState = 0, this.upLevel = 0, this.from = "", this.addAttribute = "", this.upgrade_need = "", this.capability = 0
        }, t
    }();
    t.SkinData = e, __reflect(e.prototype, "HuobanSkin.SkinData")
}(HuobanSkin || (HuobanSkin = {}));
var HuobanSkin;
! function (t) {
    var e;
    ! function (t) {
        t[t.ASK_OPEN_SKIN = 4661] = "ASK_OPEN_SKIN", t[t.ON_OPEN_SKIN = 4662] = "ON_OPEN_SKIN", t[t.ASK_REINF_SKIN = 4663] = "ASK_REINF_SKIN", t[t.ON_REINF_SKIN = 4664] = "ON_REINF_SKIN", t[t.ASK_ILLU_SKIN = 4665] = "ASK_ILLU_SKIN", t[t.ON_ILLU_SKIN = 4666] = "ON_ILLU_SKIN", t[t.ASK_ACTIVE_SKIN = 4667] = "ASK_ACTIVE_SKIN", t[t.ON_ACTIVE_SKIN = 4668] = "ON_ACTIVE_SKIN", t[t.ASK_NOTICE_SKIN = 4669] = "ASK_NOTICE_SKIN", t[t.ON_NOTICE_SKIN = 4670] = "ON_NOTICE_SKIN"
    }(e = t.Protocol || (t.Protocol = {}));
    var i;
    ! function (t) {
        t[t.NOMAL = 0] = "NOMAL", t[t.ILLU = 1] = "ILLU"
    }(i = t.Illustion || (t.Illustion = {}));
    var o;
    ! function (t) {
        t[t.NOT_ACTIVE = 0] = "NOT_ACTIVE", t[t.ACTIVATED = 1] = "ACTIVATED"
    }(o = t.Activation || (t.Activation = {}));
    var n;
    ! function (t) {
        t[t.NOMAL = 0] = "NOMAL", t[t.AUTO = 1] = "AUTO"
    }(n = t.Upgrade || (t.Upgrade = {}));
    var a;
    ! function (t) {
        t[t.ONE_BY_ONE = 0] = "ONE_BY_ONE", t[t.ONE_KEY_REINF = 1] = "ONE_KEY_REINF"
    }(a = t.Reinf || (t.Reinf = {}));
    var s;
    ! function (t) {
        t[t.INIT = 0] = "INIT", t[t.START = 1] = "START", t[t.END = 2] = "END", t[t.CANCEL = 3] = "CANCEL", t[t.FULL = 4] = "FULL", t[t.OVER_LVL = 5] = "OVER_LVL", t[t.ONCE = 6] = "ONCE"
    }(s = t.ReinfStep || (t.ReinfStep = {}))
}(HuobanSkin || (HuobanSkin = {}));
var HuobanSkin;
! function (t) {
    var e = function () {
        function t() {}
        return t.STR = "Child_HUO_BAN", t.OPEN = t.STR + "OPEN", t.ON_ACTIVITY_INFO = t.STR + "ON_ACTIVITY_INFO", t.UPDATE_SKIN_INFO = t.STR + "UPDATE_SKIN_INFO", t.UPDATE_SKIN_NOTICE = t.STR + "UPDATE_SKIN_NOTICE", t.UPDATE_ILLU_MODEL = t.STR + "UPDATE_ILLU_MODEL", t.UPDATE_ROLL_ONE_KEY = t.STR + "UPDATE_ROLL_ONE_KEY", t
    }();
    t.Event = e, __reflect(e.prototype, "HuobanSkin.Event")
}(HuobanSkin || (HuobanSkin = {}));
var HuobanSkin;
! function (t) {
    var e = function (e) {
        function i() {
            var i = e.call(this) || this;
            return i.m_huobanId = 0, i.m_AttributeArr = [], i.m_exclusiveSkills = [], i.m_shouldNoticeVis = !1, i.m_isOneKeyUpgrade = t.Reinf.ONE_BY_ONE, i.m_isAutoUpgrade = t.Upgrade.NOMAL, i.m_reinfStep = t.ReinfStep.INIT, i.m_isFullLvl = !1, i.m_allNotice = [], i.m_meunNotice = !1, i
        }
        return __extends(i, e), i.prototype.checkNoticeVis = function (e) {
            var i = "";
            switch (e) {
                case t.Activation.NOT_ACTIVE:
                    i = this.m_skinData.active_need;
                    break;
                case t.Activation.ACTIVATED:
                    i = this.m_skinData.upgrade_need
            }
            var o = ConfigHelp.makeVoList(i)[0],
                n = VoFaBao.getTypeItemCount(i),
                a = n >= o.count;
            return this.m_shouldNoticeVis = a, {
                materialGrid: o,
                materialGridLb: n + "/" + o.count
            }
        }, i.prototype.isMaterialEnough = function (t) {
            var e = ConfigHelp.makeVoList(t)[0],
                i = VoFaBao.getTypeItemCount(t),
                o = i >= e.count;
            return o
        }, i.prototype.checkToShowHuajing = function (t) {
            if (1 == t.state) return !1;
            if (!CFG_COMMOND.isOpen(CFG_COMMOND.HUOBAN_SKIN, !1)) return !1;
            for (var e = t.cfg.id, i = Config.getConfig(FairySkin_871).values, o = 0; o < i.length; o++)
                if (i[o].replace == e) return !0;
            return !1
        }, i.prototype.initSkinData = function (e) {
            var i = e.cfg.id;
            this.m_huobanId = i;
            for (var o = Config.getConfig(FairySkin_871).values, n = 0; n < o.length; n++) {
                var a = o[n].replace;
                if (a == i) {
                    var s = new t.SkinData,
                        r = o[n].id,
                        l = o[n].replace,
                        h = o[n].name,
                        c = o[n].need,
                        p = o[n].from,
                        u = o[n].attribute,
                        d = o[n].basic,
                        f = o[n].skillOne,
                        g = o[n].skillTwo;
                    s.id = r, s.replace = l, s.name = h, s.active_need = c, s.from = p, s.initAttribute = u, s.basicPower = d, s.skillOne = f, s.skillTwo = g, this.m_skinData = s;
                    break
                }
            }
        }, i.prototype.setUpgradeData = function (t) {
            for (var e = Config.getConfig(SkinUpgrade_872).values, i = 0; i < e.length; i++)
                if (e[i].skinID == this.m_skinData.id && e[i].level == t) {
                    var o = e[i].skinID,
                        n = e[i].level,
                        a = e[i].nextId,
                        s = (e[i].attribute, e[i].addAttribute),
                        r = e[i].totalAttribute,
                        l = e[i].need,
                        h = e[i].exp,
                        c = e[i].capability;
                    this.m_skinData.id = o, this.m_skinData.currentLvl = n, this.m_skinData.upLevel = a, this.m_skinData.addAttribute = s, this.m_skinData.totalAttribute = r, this.m_skinData.upgrade_need = l, this.m_skinData.upgradeExp = h, this.m_skinData.capability = c;
                    break
                }
        }, i.prototype.getIlluRoleModel = function (t) {
            for (var e = Config.getConfig(huoban_108).values, i = 0; i < e.length; i++) {
                var o = e[i].id,
                    n = e[i].m;
                if (o == t) return n
            }
            return 0
        }, i.prototype.getAddExpEachUpgrade = function (t, e) {
            for (var i = Config.getConfig(SkinUpgrade_872).values, o = 0; o < i.length; o++) {
                var n = i[o].skinID,
                    a = i[o].level,
                    s = i[o].addexp;
                if (n == t && a == e) return s
            }
            return 0
        }, i.prototype.checkFullLvl = function (t, e) {
            var i = Config.getConfig(SkinUpgrade_872).values;
            this.m_isFullLvl = !1;
            for (var o = 0; o < i.length; o++) {
                var n = i[o].skinID,
                    a = i[o].nextId,
                    s = i[o].level;
                if (n == t && s == e && 0 == a) return this.m_isFullLvl = !0, !0
            }
            return !1
        }, i.prototype.getSkinIdByVoHuoban = function (t) {
            for (var e = t.cfg.id, i = Config.getConfig(FairySkin_871).values, o = 0; o < i.length; o++) {
                var n = i[o].replace;
                if (n == e) {
                    var a = i[o].id;
                    return a
                }
            }
            return 0
        }, i.prototype.calculateBaseAttibute = function (e, i, o) {
            var n = "",
                a = this.m_skinData.initAttribute;
            n = this.m_skinData.activeState == t.Activation.NOT_ACTIVE || 0 == i ? a : this.m_skinData.totalAttribute;
            for (var s = this.unpackAttibute(n), r = this.unpackAttibute(a), l = this.unpackAttibute(this.m_skinData.addAttribute), h = o / this.getAddExpEachUpgrade(e, i), c = new Dictionary, p = 0; p < s.keys.length; p++) {
                var u = s.keys[p],
                    d = 0;
                r.values.length > 0 && r.keys.indexOf(u) >= 0 && (d = r.get(u).value), (this.m_skinData.activeState == t.Activation.NOT_ACTIVE || 0 == i) && (d = 0);
                var f = s.get(u).value,
                    g = 0;
                l.values.length > 0 && l.keys.indexOf(u) >= 0 && (g = l.get(u).value);
                for (var m = f + h * Math.floor(g / 100) + d, y = s.get(u).name, v = 1, _ = Config.getConfig(attr_115).values, G = 0; G < _.length; G++) {
                    var b = _[G].id,
                        C = _[G].sb;
                    b == u && C > 1 && (v = C, m = Math.round(m / C * C) / C)
                }
                var T = new t.Attribute;
                T.value = m, T.id = u, T.name = y, T.sb = v, c.set(T.id, T)
            }
            return c
        }, i.prototype.calculateAddAttibute = function (e, i, o) {
            for (var n = this.unpackAttibute(this.m_skinData.addAttribute), a = new Dictionary, s = 0; s < n.keys.length; s++) {
                var r = n.keys[s],
                    l = n.get(r).value,
                    h = n.get(r).name,
                    c = new t.Attribute;
                c.value = Math.floor(l / 100), c.id = r, c.name = h, a.set(c.id, c)
            }
            return a
        }, i.prototype.unpackAttibute = function (e) {
            var i = new Dictionary;
            if ("0" == e) return i;
            for (var o = e.split(";"), n = 0; n < o.length; n++) {
                var a = o[n].split(","),
                    s = new t.Attribute;
                s.value = Math.floor(parseInt(a[1])), s.id = Math.floor(parseInt(a[0])), s.name = CFG_ATTR.LIB[s.id].n + "", i.set(s.id, s)
            }
            return i
        }, i.prototype.getExclusiveSkills = function (t) {
            this.m_exclusiveSkills = [];
            var e = parseInt(this.m_skinData.skillOne.split(/\;|\,/)[t - 1]),
                i = Vo_Skill.create(e, t),
                o = new VoHBSkill;
            o.voSkill = i, this.m_exclusiveSkills.push(o);
            var n = parseInt(this.m_skinData.skillTwo.split(/\;|\,/)[t - 1]),
                a = Vo_Skill.create(n, t),
                s = new VoHBSkill;
            return s.voSkill = a, this.m_exclusiveSkills.push(s), this.m_exclusiveSkills
        }, i.prototype.getSkillLvl = function (t) {
            for (var e = t.cfg.id, i = t.voStar.cfg.hblevel, o = Config.getConfig(shengxin_165).values, n = 0; n < o.length; n++) {
                var a = o[n].bianhao,
                    s = Number(e + "0" + i),
                    r = o[n].jnlevel;
                if (a == s) return r
            }
            return 0
        }, i.prototype.replaceSkill = function (e, i) {
            if (this.m_skinData.illuState == t.Illustion.ILLU) {
                var o = this.getSkillLvl(i),
                    n = this.getExclusiveSkills(o),
                    a = [];
                n.length > 0 && (a[0] = n[0], a[1] = n[1]);
                for (var s = 2; s < e.length; s++) a[s] = e[s];
                return a
            }
            return e
        }, i.prototype.getSkinNotice = function (e, i, o) {
            var n = "",
                a = this.getSkinByHuoban(e);
            if (void 0 == a) return !1;
            switch (o) {
                case t.Activation.NOT_ACTIVE:
                    var s = a.active_need;
                    n = s;
                    break;
                case t.Activation.ACTIVATED:
                    for (var r = Config.getConfig(SkinUpgrade_872).values, l = 0; l < r.length; l++) {
                        var h = r[l].skinID,
                            c = r[l].level,
                            p = r[l].nextId;
                        if (h == a.id && c == i) {
                            if (0 == p) return !1;
                            var u = r[l].need;
                            n = u
                        }
                    }
            }
            if ("" == n) return !1;
            var d = this.isMaterialEnough(n);
            return d
        }, i.prototype.getSkinByHuoban = function (e) {
            for (var i = Config.getConfig(FairySkin_871).values, o = 0; o < i.length; o++) {
                var n = i[o].replace;
                if (n == e) {
                    var a = new t.SkinData;
                    return a.active_need = i[o].need, a.id = i[o].id, a
                }
            }
        }, i
    }(GameCtrlBase);
    t.Model = e, __reflect(e.prototype, "HuobanSkin.Model")
}(HuobanSkin || (HuobanSkin = {}));
var HuobanSkin;
! function (t) {
    var e = function (e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.listenServ = function (i) {
            e.prototype.listenServ.call(this, i), i.regHand(t.Protocol.ON_OPEN_SKIN, this.onOpenSkin, this), i.regHand(t.Protocol.ON_REINF_SKIN, this.onReinfSkin, this), i.regHand(t.Protocol.ON_ILLU_SKIN, this.onIlluSkin, this), i.regHand(t.Protocol.ON_ACTIVE_SKIN, this.onActiveSkin, this), i.regHand(t.Protocol.ON_NOTICE_SKIN, this.onNoticeSkin, this)
        }, i.prototype.onNoticeSkin = function (e, i) {
            var o = e.getModel(t.Model),
                n = i.readShort();
            o.m_allNotice = [], o.m_meunNotice = !1;
            for (var a = 0; n > a; a++) {
                var s = i.readInt(),
                    r = i.readByte(),
                    l = i.readShort(),
                    h = new t.NoticeData,
                    c = o.getSkinNotice(s, l, r);
                h.huobanId = s, h.isNotice = c, c && (o.m_meunNotice = !0), h.activeState = r, o.m_allNotice.push(h)
            }
            EventCenter.sendMsg(t.Event.UPDATE_SKIN_NOTICE)
        }, i.prototype.onOpenSkin = function (e, i) {
            var o = e.getModel(t.Model),
                n = i.readInt(),
                a = i.readShort(),
                s = i.readInt(),
                r = i.readInt(),
                l = i.readByte(),
                h = i.readByte();
            o.m_skinData.currentLvl = a, o.m_skinData.currentPower = r, o.m_skinData.currentExp = s, o.m_skinData.illuState = l, o.m_skinData.activeState = h, o.checkFullLvl(n, a), EventCenter.sendMsg(t.Event.UPDATE_SKIN_INFO)
        }, i.prototype.onReinfSkin = function (e, i) {
            var o = e.getModel(t.Model),
                n = i.readByte(),
                a = i.readInt(),
                s = i.readShort(),
                r = i.readInt(),
                l = i.readInt();
            return 2 == n ? (ViewText.text("道具不足"), o.m_reinfStep = t.ReinfStep.INIT, void EventCenter.sendMsg(t.Event.UPDATE_SKIN_INFO)) : (o.m_skinData.currentLvl = s, o.m_skinData.currentPower = l, o.m_skinData.currentExp = r, o.checkFullLvl(a, s) ? (o.m_reinfStep = t.ReinfStep.FULL, void EventCenter.sendMsg(t.Event.UPDATE_SKIN_INFO)) : void EventCenter.sendMsg(t.Event.UPDATE_ROLL_ONE_KEY))
        }, i.prototype.onIlluSkin = function (e, i) {
            var o = (i.readInt(), i.readByte());
            e.getModel(t.Model).m_skinData.illuState = o, EventCenter.sendMsg(t.Event.UPDATE_ILLU_MODEL)
        }, i.prototype.onActiveSkin = function (t, e) {
            var i = e.readByte();
            switch (i) {
                case 1:
                    var o = e.readInt();
                    t.askOpenSkin(o);
                    break;
                case 2:
                    ViewText.text("材料不足")
            }
        }, i.prototype.askOpenSkin = function (e) {
            var i = this.getBytes();
            i.writeInt(e), this.sendSocket(t.Protocol.ASK_OPEN_SKIN, i)
        }, i.prototype.askReinfSkin = function (e, i) {
            var o = this.getBytes();
            o.writeInt(e), o.writeByte(i), this.sendSocket(t.Protocol.ASK_REINF_SKIN, o)
        }, i.prototype.askIlluSkin = function (e, i) {
            var o = this.getBytes();
            o.writeInt(e), o.writeByte(i), this.sendSocket(t.Protocol.ASK_ILLU_SKIN, o)
        }, i.prototype.askActiveSkin = function (e) {
            var i = this.getBytes();
            i.writeInt(e), this.sendSocket(t.Protocol.ASK_ACTIVE_SKIN, i)
        }, i.prototype.askNoticeSkin = function () {
            var e = this.getBytes();
            this.sendSocket(t.Protocol.ASK_NOTICE_SKIN, e)
        }, i
    }(BaseModel);
    t.Proxy = e, __reflect(e.prototype, "HuobanSkin.Proxy")
}(HuobanSkin || (HuobanSkin = {}));
var ItemFWExp = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ItemHWExpSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.grid.setShowCount(!1), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        !this.chosen && this.canBeAdd() ? this.chosen = !0 : this.chosen ? (this.chosen = !1, this.removeChosen()) : ViewText.text("已达上限值10个")
    }, e.prototype.canBeAdd = function () {
        return !1
    }, e.prototype.removeChosen = function () {}, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.grid.data
        },
        set: function (t) {
            this.grid.data = t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "chosen", {
        get: function () {
            return this.gouGroup.visible
        },
        set: function (t) {
            this.gouGroup.visible = t
        },
        enumerable: !0,
        configurable: !0
    }), e.create = function () {
        return new e
    }, e.prototype.dispose = function () {
        this.parent && (this.parent.removeChild(this), this.chosen = !1, e.pool.push(this))
    }, e.pool = [], e
}(eui.Component);
__reflect(ItemFWExp.prototype, "ItemFWExp");
var ItemHBEQAtt = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemHBEQAttSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.checkGroup.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLock, this)
    }, e.prototype.onLock = function () {
        var t = GameGlobal.layerMgr.getView(VHuobanPage.CHILD_HBEQSJ);
        t && t.setLock(this.data)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            if (this._data = t, this.txtName.text = t.name, null == t.val1) this.txtVal1.text = "", this.txtVal1.width = 0;
            else {
                var e = t.val1 + "";
                this.txtVal1.text = e, this.txtVal1.textColor = t.txtColor, this.txtVal1.textAlign = t.align, e.length <= 5 ? this.txtVal1.width = 65 : this.txtVal1.width = 165
            }
            switch (null == t.val2 ? (this.txtVal2.text = "", t.isCur || (this.textGroup.x = 60)) : (this.txtVal2.text = t.val2 + "", this.textGroup.x = 0), this.icon.source = t.icon, t.icon) {
                case "HBAtlas_json.closeLock":
                    this.checkGroup.visible = !0, this.iconGou.visible = !0, this.txtLock.text = "已锁定";
                    break;
                case "HBAtlas_json.openLock":
                    this.checkGroup.visible = !0, this.iconGou.visible = !1, this.txtLock.text = "可锁定";
                    break;
                default:
                    this.checkGroup.visible = !1
            }
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemHBEQAtt.prototype, "ItemHBEQAtt");
var ItemHBEquip = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemHBEquipSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = this,
                i = GameGlobal.modelRole.voMine.level / 10 >> 0,
                o = parseInt(t.cfg.l) / 10 >> 0;
            i != o && (t.update(t.type, t.position), Child_HBEquip.roleUpChange(t)), e.txtName.text = t.cfg.n, e.icon.source = IconUtil.getIconUrl(t.cfg.icon);
            var n = e.imgup.visible;
            e.imgup.visible = t.isUp(), e.imgupEff(n)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.imgupEff = function (t) {
        var e = this;
        if (this.imgup.visible) {
            if (t) return;
            var i = function () {
                e.imgup.visible && egret.Tween.get(e.imgup).to({
                    alpha: 0
                }, 800).wait(10).to({
                    alpha: 1
                }, 800).call(i, e)
            };
            i()
        } else egret.Tween.removeTweens(this.imgup), this.imgup.alpha = 1
    }, e.prototype.getCost = function (t) {
        var e = t.split(","),
            i = parseInt(e[0]),
            o = parseInt(e[1]),
            n = VoCurrency.create();
        return n.init(i), n.count = o, n
    }, Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, t ? this.bbg.source = "CM2_json.chosen" : this.bbg.source = "CM2_json.nChosen"
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.showSJEffect = function () {
        EffectMgr.addEff("uieff/dzsuccess", this, 50, 50, 500, 500, !1)
    }, e.prototype.$onRemoveFromStage = function () {
        this.imgup.visible = !1, egret.Tween.removeTweens(this.imgup), this.imgup.alpha = 1
    }, e
}(ItemBase);
__reflect(ItemHBEquip.prototype, "ItemHBEquip");
var ItemHBFuWen = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._status = -1, e.bodyUnOpenSymble = !1, e.skinName = "ItemHBFuWenSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), DisplayUtil.popBtnStyle(this.iconAdd)
    }, e.prototype.setStatus = function (t) {
        this._status = t
    }, e.prototype.getStatus = function () {
        return this._status
    }, e.prototype.onTouch = function () {
        var t = this.getStatus();
        switch (t) {
            case 1:
                if (this.bodyUnOpenSymble) {
                    var i = CFG_HUOBAN1.LIB8[this.itemIndex].kflv;
                    ViewText.text(i + "级开启")
                } else this.data ? (VHBFuWenTip.setMarkPosition(this.itemIndex), VHBFuWenTip.setMarkStatus(1), GameGlobal.layerMgr.open(UIConst.HBFUWENTIPS, this.data)) : (VHBFuwenBag.setMarkPosition(this.itemIndex), e.statusQHMark = !1, VHBFuwenBag.setMarkQH(!1), GameGlobal.layerMgr.open(UIConst.HBFUWENBAG));
                break;
            case 2:
                e.statusQHMark = !0, VHBFuwenBag.setMarkQH(!0), GameGlobal.layerMgr.open(UIConst.HBFUWENBAG);
                break;
            case 3:
                break;
            default:
                if (e.statusQHMark) {
                    var o = this.gouGroup.visible;
                    o ? (VHBFuWenQH.removeData(this.data), this.setChosen(!1)) : VHBFuWenQH.tempDatas.length < 10 ? (VHBFuWenQH.addData(this.data), this.setChosen(!0)) : ViewText.text("每次最多只能添加10个材料")
                } else {
                    var n = VHBFuwenBag.getMarkPosition();
                    VHBFuWenTip.setMarkPosition(n), VHBFuWenTip.setMarkStatus(2), GameGlobal.layerMgr.open(UIConst.HBFUWENTIPS, this.data)
                }
        }
    }, e.prototype.dataChanged = function () {
        var t = this.data;
        if (this.bodyUnOpenSymble = !1, t)
            if (this.setState("st2"), t instanceof VoItem) {
                var e = t;
                this.bg.source = "CM1_json.bm_gridbg" + e.quality, this.icon.source = IconUtil.getIconUrl(e.icon), this.txtName.text = "", this.txtInfo.text = "", this.starBg.visible = !1, this.starContainer.removeChildren(), this.dealWithGouGroup(), this.showEff(null)
            } else {
                this.bg.source = "CM1_json.bm_gridbg" + (t.cfg.xj + 1), this.icon.source = IconUtil.getIconUrl(t.cfg.ico);
                var i = t.cfg.n;
                this.txtName.text = i, t.level > 0 ? this.txtInfo.text = "+" + t.level : this.txtInfo.text = "", this.starBg.visible = !0, this.updateStar(), this.dealWithGouGroup(), this.showEff(t.cfg.tx)
            }
        else {
            var o = this.getStatus();
            if (1 == o) {
                var n = CFG_HUOBAN1.LIB8[this.itemIndex].kflv;
                GameGlobal.modelRole.voMine.level < n ? (this.setState("st3"), this.txtOpenLevel.text = n + "级开启", this.bodyUnOpenSymble = !0) : (this.setState("st1"), this.bg.source = "CM1_json.grid1")
            } else this.setState("st1"), this.bg.source = "CM1_json.grid1";
            this.showEff(null)
        }
    }, e.prototype.showEff = function (t) {
        if (t) {
            var e = "uieff/grid" + t;
            this.eff ? this.eff.setVal(e) : this.eff = EffectMgr.addEff(e, this, 45, 43, 1e3, -1, !0)
        } else this.eff && (EffectMgr.getIns().removeEff(this.eff), this.eff = null)
    }, e.prototype.dealWithGouGroup = function () {
        switch (this.getStatus()) {
            case 1:
                this.setChosen(!1);
                break;
            case 2:
                this.setChosen(!1);
                break;
            case 3:
                this.setChosen(!1);
                break;
            default:
                1 == e.statusQHMark && VHBFuWenQH.hasItemInQiangHua(this.data) ? this.setChosen(!0) : this.setChosen(!1)
        }
    }, e.prototype.updateStar = function () {
        var t = this.data.cfg.xj;
        this.starContainer.removeChildren();
        for (var e = 0; t > e; e++) {
            var i = new eui.Image("CMS1_json.bm_star3");
            i.width = i.height = 18, this.starContainer.addChild(i)
        }
    }, e.prototype.setState = function (t) {
        this.currentState = t, this.validateNow()
    }, e.prototype.setChosen = function (t) {
        this.gouGroup.visible = t
    }, e.prototype.move = function (t) {
        this.icon.scaleX = this.icon.scaleY = .2, egret.Tween.get(this.icon).to({
            scaleX: 1,
            scaleY: 1
        }, t, egret.Ease.backOut)
    }, e.prototype.setNotice = function (t) {
        this.imgNotice.visible = t
    }, e
}(eui.ItemRenderer);
__reflect(ItemHBFuWen.prototype, "ItemHBFuWen");
var ItemHbHead = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemHbHeadSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.iconGroup.visible = !1, this.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onBegin, this)
    }, e.prototype.onBegin = function () {
        this.iconGroup.visible = !0, GameGlobal.stage.once(egret.TouchEvent.TOUCH_END, this.onEnd, this)
    }, e.prototype.onEnd = function () {
        this.iconGroup.visible = !1
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.cfg.pz;
            this.txtName.textFlow = HtmlUtil.parse(HtmlUtil.color(t.cfg.n, VoHuoban.getColorByQuality(e))), this.iconBg.source = "CM1_json.bm_gridbg" + t.cfg.pz, this.iconHead.source = IconUtil.getIconUrl(t.cfg.icon)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemHbHead.prototype, "ItemHbHead");
var ItemHBOnBattle = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemHBOnBattleSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.member,
                i = t.disableLv;
            if (e) {
                this.iconMs.visible = !1, this.txtKQ.visible = !1, this.content.visible = !0;
                var o = GameGlobal.modelRole.voMine.level,
                    n = e.member;
                this.iconBg.source = "CM1_json.bm_gridbg" + n.cfg.pz, this.icon.source = IconUtil.getIconUrl(n.cfg.icon);
                var a = n.cfg.pz;
                this.txtName.textFlow = HtmlUtil.parse(HtmlUtil.color(n.cfg.n, VoHuoban.getColorByQuality(a))), this.txtLvl.textFlow = HtmlUtil.parse(HtmlUtil.color("Lv." + o, VoHuoban.getColorByQuality(a)))
            } else this.content.visible = !1, i ? (this.iconMs.visible = !0, this.txtKQ.visible = !0, this.txtKQ.text = "人物" + i + "级开启") : (this.iconMs.visible = !1, this.txtKQ.visible = !1)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemHBOnBattle.prototype, "ItemHBOnBattle");
var ItemHbSkill = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.STR_ENABLED = "HBAtlas2_json.greyBg", e.STR_ABLED = "HBAtlas_json.nChose", e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemHbSkillSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        var t = (this.itemIndex, 1);
        4 - this.itemIndex == 2 ? t = 1 : 4 - this.itemIndex == 1 && (t = 3);
        var e = {
            level: t,
            vo: this.data
        };
        GameGlobal.layerMgr.open(VHBSkillTip.UIID_VHBSKILLTIP, e)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            if (this._data = t, t.voSkill) {
                t.voSkill.id == t.jtSkill ? this.jtIcon.visible = !0 : this.jtIcon.visible = !1;
                var e = t.voSkill.level;
                this.skillIcon.source = IconUtil.getIconUrl(t.voSkill.icon), e > 0 ? (this.bg.source = this.STR_ABLED, this.txtLv.text = "Lv." + t.voSkill.level, this.iconMask.visible = !1) : (this.bg.source = this.STR_ENABLED, this.txtLv.text = "未激活", this.iconMask.visible = !0)
            } else console.error("找不到该技能id or  该技能不存在")
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemHbSkill.prototype, "ItemHbSkill");
var ItemHBZf = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemHBZfSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtName.text = t.cfg.n, this.imgNotice.visible = !1, this.icon.source = IconUtil.getIconUrl(t.cfg.icon);
            var e, i = GameGlobal.layerMgr.getView(VHuobanZF.UIID_HUOBANZF);
            i && i._selPlanIndex >= 0 && (e = VoPlan.getPlanByIndex(i._selPlanIndex).zhenfaId), e == t.cfg.id ? this.iconUsed.visible = !0 : this.iconUsed.visible = !1, this.updateNotice()
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, this.iconSel.visible = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateNotice = function () {
        var t = (GameGlobal.modelBag, !1),
            e = !1;
        this.data.isJH ? (this.iconMsk.visible = !1, t = this.data.canUpgrade(), t ? this.txtLv.textFlow = HtmlUtil.parse(this.data.cfg.l + "级" + HtmlUtil.color("(可提升)", "#6c4a46")) : this.txtLv.text = this.data.cfg.l + "级") : (this.iconMsk.visible = !0, e = this.data.canJH(), e ? this.txtLv.textFlow = HtmlUtil.parse(HtmlUtil.color("可学习", "#389634")) : this.txtLv.textFlow = HtmlUtil.parse(HtmlUtil.color("未学习", "#d03c2a"))), this.imgNotice.visible = t || e
    }, e
}(ItemBase);
__reflect(ItemHBZf.prototype, "ItemHBZf");
var ItemHBZFAtt = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.UPSTR = "HBAtlas_json.upArrow", e.DOWNSTR = "HBAtlas_json.dArrow", e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemHBZFAttSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            if (this._data = t, this.bg.source = null, this.txt1.text = "", this.txt2.text = "", this.icon0.source = null, this.icon1.source = null, this.txtIndex.text = this.itemIndex + 1 + "号位: 无", t) {
                this.bg.source = "HBAtlas_json", this.txtIndex.text = this.itemIndex + 1 + "号位: ";
                for (var e = 0; e < t.attributes.length; e++) {
                    var i = t.attributes[e];
                    i && this.setAtt(i, e)
                }
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setAtt = function (t, e) {
        t.val > 0 ? (this["icon" + e].source = this.UPSTR, this["txt" + (e + 1)].textFlow = HtmlUtil.parse(t.name + HtmlUtil.color("+" + (t.val / 1e4 * 100 >> 0) + "%", "#10a244"))) : (this["icon" + e].source = this.DOWNSTR, this["txt" + (e + 1)].textFlow = HtmlUtil.parse(t.name + HtmlUtil.color((t.val / 1e4 * 100 >> 0) + "%", "#d82424")))
    }, e
}(ItemBase);
__reflect(ItemHBZFAtt.prototype, "ItemHBZFAtt");
var ItemHBZFAtt2 = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.UPSTR = "HBAtlas_json.upArrow", e.DOWNSTR = "HBAtlas_json.dArrow", e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemHBZFATT2Skin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            if (this._data = t, this.txtVal1.text = "", this.txtVal2.text = "", this.icon1.source = null, this.icon2.source = null, this.txtIndex.text = this.itemIndex + 1 + "号位: 无", t) {
                this.txtIndex.text = this.itemIndex + 1 + "号位: ";
                for (var e = 0; e < t.attributes.length; e++) {
                    var i = t.attributes[e];
                    i && this.setAtt(i, e)
                }
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setAtt = function (t, e) {
        t.val > 0 ? (this["icon" + (e + 1)].source = this.UPSTR, this["txtVal" + (e + 1)].textFlow = HtmlUtil.parse(t.name + HtmlUtil.color("+" + (t.val / 1e4 * 100 >> 0) + "%", "#10a244"))) : (this["icon" + (e + 1)].source = this.DOWNSTR, this["txtVal" + (e + 1)].textFlow = HtmlUtil.parse(t.name + HtmlUtil.color((t.val / 1e4 * 100 >> 0) + "%", "#d82424")))
    }, e
}(ItemBase);
__reflect(ItemHBZFAtt2.prototype, "ItemHBZFAtt2");
var ItemHuoban = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ItemHuobanSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = GameGlobal.modelRole.voMine;
            this.iconBg.source = "CM1_json.bm_gridbg" + t.cfg.pz, this.iconHB.source = IconUtil.getIconUrl(t.cfg.icon);
            var i = t.cfg.pz;
            this.nameAndLevel.text = t.cfg.n + "\nLv." + e.level, this.nameAndLevel.textColor = VoHuoban.getQualityColor(i);
            var o = t.voStar;
            if (o)
                for (var n = this.starGroup.numChildren, a = 0; n > a; a++) {
                    var s = this.starGroup.getChildAt(a);
                    a < o.cfg.hblevel ? (s.source = "HBAtlas2_json.starSmal", s.visible = !0) : (s.source = "", s.visible = !1)
                }
            var r = this.huobanSkinNotice(t);
            switch (t.state) {
                case 1:
                    this.iconMsk.visible = !0, this.iconChuZhan.visible = !1;
                    var l = VoHuoban.canActive(t);
                    this.txtJiHuo.visible = l, this.updateNotice(l);
                    break;
                case 2:
                    this.iconMsk.visible = !1, this.iconChuZhan.visible = !0, this.txtJiHuo.visible = !1, l = VoHuoban.canShengXing(t);
                    var h = VoXSJueXing.noticeJueXing(t.cfg.id);
                    this.updateNotice(l || h || r);
                    var c = GameGlobal.layerMgr.isOpenView(VHuobanPage.CHILD_HBEQSJ);
                    this.imgup.visible = c ? t.isEquipUp() : !1;
                    break;
                case 3:
                    this.iconMsk.visible = !1, this.iconChuZhan.visible = !1, this.txtJiHuo.visible = !1, l = VoHuoban.canShengXing(t), h = VoXSJueXing.noticeJueXing(t.cfg.id), this.updateNotice(l || h || r)
            }
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, this.iconSel.visible = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateNotice = function (t) {
        this.iconNotice.visible = t
    }, e.prototype.huobanSkinNotice = function (t) {
        for (var e = GameCtrlBase.instance.getModel(HuobanSkin.Model), i = e.m_allNotice, o = 0; o < i.length; o++)
            if (t.cfg.id == i[o].huobanId && 1 == i[o].isNotice) return !0;
        return !1
    }, e
}(eui.Component);
__reflect(ItemHuoban.prototype, "ItemHuoban", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var ItemPlan = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemPlanSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), DisplayUtil.popBtnStyle(this.checkBoxGp), this.checkBoxGp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCheck, this)
    }, e.prototype.onCheck = function () {
        e.curChosenItem != this && GameGlobal.modelhb.CG665(this.itemIndex + 1)
    }, e.prototype.setChosen = function (t) {
        e.curChosenItem && (e.curChosenItem.chosen = !1), this.chosen = !0, e.curChosenItem = this
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txt.text = "方案" + t.index
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, t ? this.bg.source = "HBAtlas_json.bg3Chosen" : this.bg.source = "HBAtlas_json.bg3"
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "chosen", {
        get: function () {
            return this._chosen
        },
        set: function (t) {
            this._chosen = t, this.iconGou.visible = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemPlan.prototype, "ItemPlan");
var ItemZFCostIm = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/huoban/ItemZFCostImSkin.exml"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.grid.showOne = !0, this.grid.showZero = !0
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.grid.data = t, this.txtName.text = t.name
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, this.grid.selected = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemZFCostIm.prototype, "ItemZFCostIm");
var ItemZfHuoban = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemZfHuobanSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.iconSel.visible = !1, this.uirole = UIRole.create(), this.partCont.addChild(this.uirole), this.scrollRect = new egret.Rectangle(0, 0, this.skin.width, this.skin.height)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (e) {
            if (t.prototype.onData.call(this), this._data = e, e) {
                var i, o, n, a;
                if (this.iconAdd.visible = !1, e.member instanceof VoPlayer) o = e.member, i = o.sceneChars[0]._body, a = o.sceneChars[0]._horse, this.txtName.text = o.name, this.txtType.text = "";
                else {
                    n = e.member, i = n.cfg.m, this.txtName.text = n.cfg.n;
                    var s = n.cfg.t;
                    this.txtType.text = VoHuoban.getTypeName(s)
                }
                this.uirole.setBody(i), this.uirole.setHorse(a), this.uirole.validParts(), this.uirole.setVal(3)
            } else this.uirole.setBody(null), this.iconAdd.visible = !0, this.txtName.text = "", this.txtType.text = "";
            this.imgIndex.source = "HBAtlas2_json." + (this.itemIndex + 1)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, this.iconSel.visible = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.uirole.play()
    }, e.prototype.onRemove = function () {
        t.prototype.onRemove.call(this), this.uirole.stop()
    }, e
}(ItemBase);
__reflect(ItemZfHuoban.prototype, "ItemZfHuoban");
var VGetHuoBan = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.time = 0, e.skinName = "resource/eui_skins/game/huoban/VGetHuoBanSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.sure), this.addCloseListen(this.sure), this.uirole = UIRole.create(), this.contaienr.addChildAt(this.uirole, 0), this.contaienr.scaleX = this.contaienr.scaleY = 2
    }, e.prototype.addTick = function () {
        this.time = 6, this.sure.label = "确定(" + this.time + ")", GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.removeTick = function () {
        this.time = 0, GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onTick = function (t) {
        t.time--, t.sure.label = "确定(" + t.time + ")", t.time <= 0 && t.closeHandler()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = e.cfg.m;
        this.uirole.setBody(i), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play();
        var o = 0;
        if (e.voStar && (o = e.voStar.cfg.hblevel), 0 == o) this.starCont.visible = !1;
        else {
            this.starCont.visible = !0;
            for (var n = 0; 5 > n; n++) {
                var a = this.starCont.getChildAt(n);
                o > n ? a.source = "HBAtlas2_json.star" : a.source = "HBAtlas2_json.starGrey"
            }
        }
        this.addTick()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeTick(), this.uirole && this.uirole.stop()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.UIID_GETHUOBAN = "UIID_GETHUOBAN", e
}(BaseEUIView);
__reflect(VGetHuoBan.prototype, "VGetHuoBan");
var VHBFuwenBag = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.labels = ["全部", "一星", "二星", "三星", "四星", "五星", "六星"], e.tabs = [], e.sourceData = new eui.ArrayCollection, e.skinName = "VHBFuwenBagSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.bg), this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnClose);
        for (var e = 1; 6 >= e; e++) {
            var i = this["tab" + e];
            i.label = this.labels[e - 1], i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSel, this), this.tabs.push(i)
        }
        this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemHBFuWen, this.btnSure.label = "确定", this.btnSure.visible = !1, this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.HBFUWENQH);
        t && (t.validateChosens(), t.renderDatas()), this.closeHandler()
    }, e.setMarkPosition = function (t) {
        e._markPosition = t
    }, e.getMarkPosition = function () {
        return e._markPosition
    }, e.setMarkQH = function (t) {
        e._markQH = t;
        var i = GameGlobal.layerMgr.getView(UIConst.HBFUWENBAG);
        i && i.setBtnSureVis()
    }, e.prototype.setBtnSureVis = function () {
        this.btnSure.visible = e._markQH
    }, e.getMarkQH = function () {
        return e._markQH
    }, e.prototype.onSel = function (t) {
        var e = t.currentTarget,
            i = this.tabs.indexOf(e);
        this.setSel(i)
    }, e.prototype.setSel = function (t) {
        if (this._index >= 0) {
            var e = this.tabs[this._index];
            e.selected = !1
        }
        t >= 0 && (e = this.tabs[t], e.selected = !0), this._index = t, -1 != t && this.updateBagDatas()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setSel(e || 0), this.setBtnSureVis(), GameGlobal.modelhb.on(ModelHB.msg_hbFuWenBag, this.updateBagDatas, this)
    }, e.prototype.updateBagDatas = function () {
        var t = this._index,
            i = VoHBFuWen.getByStarLv(t);
        if (e.getMarkQH())
            if (0 == this._index) {
                var o = FuwenAddBagDatas.getBagItems();
                this.sourceData.replaceAll(o.concat(i))
            } else this.sourceData.replaceAll(i);
        else {
            var n = this.secondChose(i);
            this.sourceData.replaceAll(n)
        }
    }, e.prototype.secondChose = function (t) {
        for (var i = [], o = e.getMarkPosition(), n = 0, a = t && t.length; a > n; n++) {
            var s = t[n],
                r = s.cfg.cdbw;
            (r[0] == o || r[1] == o) && i.push(s)
        }
        return i
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), ItemHBFuWen.statusQHMark && GameGlobal.layerMgr.getView(UIConst.HBFUWENQH).invalidateChosens(), ItemHBFuWen.statusQHMark = !1, GameGlobal.modelhb.off(ModelHB.msg_hbFuWenBag, this.updateBagDatas, this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VHBFuwenBag.prototype, "VHBFuwenBag");
var VHBFuWenQH = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.WIDTH = 410, e.ITEMNUM = 10, e.filterTime = 0, e.skinName = "VHBFuWenQHSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.bg), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.btnAdd.label = "一键添加", this.btnQH.label = "符文强化", this.itemQH.setStatus(3), this.items = this.container.$children.concat();
        for (var e = 0; e < this.items.length; e++) this.items[e].setStatus(2);
        this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnQH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), VoHBFuWen.isInitMap || VoHBFuWen.initMap()
    }, e.prototype.onHand = function (t) {
        var e = this,
            i = t.currentTarget;
        switch (i) {
            case this.btnAdd:
                this.setDatasCanQh(), this.renderDatas();
                break;
            case this.btnQH:
                for (var o = [], n = this.getChosens(), a = !1, s = 0; s < n.length; s++) {
                    var r = n[s];
                    !r || r instanceof VoItem || (r.cfg.xj >= 5 && (a = !0), o.push(n[s].sysId))
                }
                a ? ViewAlert.show("选中的符文中有5星符文，是否将其转化为经验？", function () {
                    e.onQiangHua(o)
                }) : this.onQiangHua(o)
        }
    }, e.hasItemInQiangHua = function (t) {
        if (!e.tempDatas || 0 == e.tempDatas.length) return !1;
        var i = e.tempDatas.indexOf(t) >= 0;
        return i
    }, e.prototype.onQiangHua = function (t) {
        var e = this.getCost().count;
        if (GameGlobal.modelRole.voMine.yinliang < e) return void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, 31);
        var i = this.data.position > 0;
        if (i) {
            var o = VHuobanPage.getSelHuoban();
            GameGlobal.modelhb.CG2659(this.data.sysId, t, o.cfg.id, this.data.position, this.getBagItems())
        } else GameGlobal.modelhb.CG2659(this.data.sysId, t, 0, 0, this.getBagItems())
    }, e.prototype.getBagItems = function () {
        for (var t = [], e = this.container.$children, i = 0; i < e.length; i++) {
            var o = e[i];
            o.data instanceof VoItem && t.push(o.data.cfg.id)
        }
        return t
    }, e.prototype.getTargetId = function () {
        return this.data.sysId
    }, e.prototype.moveEff = function () {
        for (var t = 0; t < this.items.length; t++) {
            var e = this.items[t],
                i = e.data;
            i && e.move(200 + 50 * t)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.data = e, FuwenAddBagDatas.updateBagItems(), this.onUpdate(), GameGlobal.modelhb.on(ModelHB.msg_hbFuWenBag, this.onUpdate, this), GameGlobal.modelhb.on(ModelHB.msg_hbFuWen, this.onUpdate, this)
    }, e.prototype.onUpdate = function () {
        this.itemQH.data = this.data, this.txtNameQH.text = this.data.name, this.txtLvlQH.textFlow = HtmlUtil.parse("符文等级: " + HtmlUtil.color(this.data.level, "#10a244")), this.txtProgress.text = this.data.exp + "/" + this.data.maxBaseExp, this.progressBar.width = this.WIDTH * this.data.exp / this.data.maxBaseExp;
        var t = this.data.getBaseAtt(),
            e = this.data.getSpecialAtt();
        this.txtLeft.text = t.name + "+" + VoHBFuWen.getRealVal(t) + "\n" + e.name + "+" + VoHBFuWen.getRealVal(e);
        var i = this.data.getNextBaseAtt();
        if (i) {
            if (this.isPersent(t)) o = ((i.val - t.val) / 100).toFixed(2);
            else var o = i.val - t.val + "";
            this.txtRight.text = i.name + "+" + VoHBFuWen.getRealVal(i), this.txtManji.visible = !1, this.group1.visible = !0, this.group2.visible = !0
        } else this.txtManji.visible = !0, this.group1.visible = !1, this.group2.visible = !1, this.txtProgress.text = "满级", this.progressBar.width = this.WIDTH;
        var n = this.data.getNextSpecialAtt();
        if (n) {
            if (this.isPersent(e)) a = ((n.val - e.val) / 100).toFixed(2) + "%";
            else var a = n.val - e.val + "";
            this.txtRight1.text = n.name + "+" + VoHBFuWen.getRealVal(n)
        }
        this.txtRightAdd1.text = o, this.txtRightAdd2.text = a, this.filterTime = 0, this.renderDatas()
    }, e.prototype.isPersent = function (t) {
        var e = t.id,
            i = CFG_ATTR.LIB[e].sb;
        return 1e4 == i ? !0 : !1
    }, e.prototype.updateCost = function () {
        var t = this.getCost(),
            e = ConfigHelp.costTxt(t, "#10a244");
        this.txtCost.textFlow = e
    }, e.prototype.getCost = function () {
        var t = VoCurrency.create();
        t.init(31), t.count = 0;
        var e = this.getChosens(),
            i = 0,
            o = 0,
            n = this.getItemExps();
        if (i = o = 300 * n, 0 == this.getChosens().length) t.count += i;
        else {
            for (var a = 0; a < e.length; a++) {
                var s = e[a];
                s instanceof VoItem || (o = s.getCost(), i += s.level <= 0 ? 300 * o : 30 * o)
            }
            t.count = i
        }
        return t
    }, e.prototype.showEff = function () {
        var t = EffectMgr.addEff("uieff/progFire", this.cont, 365, 213, 1e3, 1e3);
        t.scaleX = 3.3, t.scaleY = 4
    }, e.prototype.getFWTotalExp = function () {
        for (var t = this.getChosens(), e = 0, i = 0; i < t.length; i++) {
            var o = t[i];
            o instanceof VoHBFuWen && (e += o.getCost())
        }
        return e
    }, e.prototype.dealWithTotalExp = function (t) {
        this.virtualCnt = 0, this.virtualExp = 0, this.virtualMaxExp = 0, this.fullExp(t + this.data.exp, this.data.level), this.justShowExp(this.virtualExp, this.virtualCnt, this.virtualMaxExp)
    }, e.prototype.fullExp = function (t, e) {
        var i = this.data.getExpByLevel(e);
        i > 0 && t >= i ? (this.virtualCnt++, this.fullExp(t - i, e + 1)) : (this.virtualExp = t, this.virtualMaxExp = i)
    }, e.prototype.justShowExp = function (t, e, i) {
        this.txtProgress.text = t + "/" + i, this.progressBar.width = this.WIDTH * t / i, this.txtLvlQH.textFlow = HtmlUtil.parse("符文等级: " + HtmlUtil.color(this.data.level + e, "#10a244"))
    }, e.prototype.setDatasCanQh = function () {
        for (var t = this.data.sysId, i = VoHBFuWen.getByStarLv(0), o = FuwenAddBagDatas.getBagItems(), n = o.concat(i), a = n.length - 1; a >= 0; a--) {
            var s = n[a];
            s instanceof VoItem || (s.level > 0 || s.sysId == t) && n.splice(a, 1)
        }
        if (e.datas.length = 0, e.tempDatas.length = 0, n)
            for (var r = Math.min(n.length, 10), a = 0; r > a; a++) e.datas.push(n[a]), e.tempDatas.push(n[a])
    }, e.prototype.renderDatas = function () {
        for (var t = e.datas, i = 0; i < this.items.length; i++) {
            var o = this.items[i];
            if (t && i < t.length) {
                var n = t[i];
                o.data = n
            } else o.data = null
        }
        this.updateCost();
        var a = this.data.getNextBaseAtt();
        a && (0 == this.getChosens().length ? this.dealWithTotalExp(0 + this.getItemExps()) : this.dealWithTotalExp(this.getFWTotalExp() + this.getItemExps()))
    }, e.prototype.validateChosens = function () {
        e.datas.length = 0;
        for (var t = 0; t < e.tempDatas.length; t++) e.datas.push(e.tempDatas[t])
    }, e.prototype.invalidateChosens = function () {
        e.tempDatas.length = 0;
        for (var t = 0; t < e.datas.length; t++) e.tempDatas.push(e.datas[t])
    }, e.addData = function (t) {
        this.tempDatas.push(t)
    }, e.removeData = function (t) {
        var e = this.tempDatas.indexOf(t);
        e >= 0 && this.tempDatas.splice(e, 1)
    }, e.prototype.getItemExps = function () {
        for (var t = 0, e = this.getBagItems(), i = 0; i < e.length; i++) {
            var o = e[i],
                n = CFG_Item.LIB[o].canshu.exp;
            t += n
        }
        return t
    }, e.prototype.getChosens = function () {
        for (var t = [], e = 0; e < this.items.length; e++) {
            var i = this.items[e].data;
            i && i instanceof VoHBFuWen && t.push(i)
        }
        return t
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.filterTime = 0, e.datas.length = 0, e.tempDatas.length = 0, GameGlobal.modelhb.off(ModelHB.msg_hbFuWenBag, this.onUpdate, this), GameGlobal.modelhb.off(ModelHB.msg_hbFuWen, this.onUpdate, this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.datas = [], e.tempDatas = [], e
}(PopUpUI);
__reflect(VHBFuWenQH.prototype, "VHBFuWenQH");
var FuwenAddBagDatas = function () {
    function t() {}
    return t.updateBagItems = function () {
        this.allItems.length = 0;
        for (var e = GameGlobal.modelBag.items, i = e.length, o = 0; i > o; o++) {
            var n = e[o];
            t.isSuitable(n) && t.addItemsToArr(n, this.allItems)
        }
        return this.allItems
    }, t.getBagItems = function () {
        return this.allItems
    }, t.isSuitable = function (e) {
        for (var i = t.bagItemIds.length, o = 0; i > o; o++) {
            var n = t.bagItemIds[o];
            if (n == e.id) return !0
        }
        return !1
    }, t.addItemsToArr = function (t, e) {
        for (var i = t.count, o = 0; i > o; o++) e.push(t.clone())
    }, t.bagItemIds = [1540, 1541, 1542], t.allItems = [], t
}();
__reflect(FuwenAddBagDatas.prototype, "FuwenAddBagDatas");
var VHBFuWenTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.typeIconUrls = ["HBAtlas2_json.putong", "HBAtlas2_json.xiyou", "HBAtlas2_json.hero", "HBAtlas2_json.chuanshuo", "HBAtlas2_json.shanggu"], e.skinName = "VHBFuWenTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this), this.btnFWQH.label = "符文强化", this.btnChange.label = "符文更换", this.btnXuanYao.label = "符文炫耀", this.btnXieXia.label = "符文卸下", this.btnFWQH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnXuanYao.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnXieXia.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.itemTip.setStatus(3), VoHBFuWen.isInitMap || VoHBFuWen.initMap()
    }, e.setMarkStatus = function (t) {
        this._markStatus = t
    }, e.getMarkStatus = function () {
        return this._markStatus
    }, e.setMarkPosition = function (t) {
        e._markPosition = t
    }, e.getMarkPosition = function () {
        return e._markPosition
    }, e.prototype.onHand = function (t) {
        var i = t.currentTarget,
            o = i.label,
            n = VHuobanPage.getSelHuoban();
        switch (o) {
            case "符文强化":
                GameGlobal.layerMgr.open(UIConst.HBFUWENQH, this.data), this.closeHandler();
                break;
            case "符文更换":
                VHBFuwenBag.setMarkQH(!1), VHBFuwenBag.setMarkPosition(e.getMarkPosition()), GameGlobal.layerMgr.open(UIConst.HBFUWENBAG, 0), this.closeHandler();
                break;
            case "符文穿戴":
                GameGlobal.modelhb.CG2657(n.cfg.id, 1, e.getMarkPosition(), this.data.sysId);
                break;
            case "符文卸下":
                GameGlobal.modelhb.CG2657(n.cfg.id, 2, e.getMarkPosition(), this.data.sysId), this.closeHandler();
                break;
            case "符文炫耀":
                var a = this.data.position <= 0;
                if (a) GameGlobal.modelhb.CG2661(this.data.sysId, 0, 0);
                else {
                    var n = VHuobanPage.getSelHuoban();
                    GameGlobal.modelhb.CG2661(this.data.sysId, n.cfg.id, this.data.position)
                }
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.data = e, this.onUpdate()
    }, e.prototype.onUpdate = function () {
        var t = e.getMarkStatus();
        switch (t) {
            case 0:
                this.bgIcon.height = 600, this.setBtnVis(!1), this.iconEquiped.visible = !1;
                break;
            case 1:
                this.bgIcon.height = 750, this.setBtnVis(!0), this.btnChange.label = "符文更换", this.iconEquiped.visible = !0;
                break;
            case 2:
                this.bgIcon.height = 750, this.setBtnVis(!0), this.btnChange.label = "符文穿戴", this.btnXieXia.visible = !1, this.iconEquiped.visible = !1
        }
        this.txtNameTip.text = this.data.cfg.n, this.txtNameTip.textColor = Color.QUALITYCOLOR[this.data.cfg.xj + 1], this.itemTip.data = this.data, this.txtInfo.text = "可穿戴: 符文" + this.data.cfg.cdbw.toString() + "孔", this.txtLvTip.text = "等级: " + this.data.level;
        var i = this.data.cfg.xj;
        this.iconType.source = this.typeIconUrls[i - 1];
        var o = this.data.getBaseAtt();
        this.txtBaseAtt.textFlow = HtmlUtil.parse(o.name + "" + HtmlUtil.color("+" + VoHBFuWen.getRealVal(o), "#02f160")), o = this.data.getSpecialAtt(), this.txtSpecialAtt.textFlow = HtmlUtil.parse(o.name + "" + HtmlUtil.color("+" + VoHBFuWen.getRealVal(o), "#02f160")), this.recoverItm();
        for (var n = 0; n < this.data.extralAtts.length; n++) {
            var a = FWItemAtt.create(),
                s = this.data.extralAtts[n];
            o = VoHBFuWen.getAttObj(s.join(","));
            var r = VoHBFuWen.getColorByAttInfo(o.id, o.val),
                l = r.isFull ? "(满)" : "";
            a.setText(HtmlUtil.color(o.name + "+" + VoHBFuWen.getRealVal(o) + l, r.color)), this.attContainer.addChild(a), this.showStar(a, o.id)
        }
        this.txtNone.visible = this.data.extralAtts.length <= 0
    }, e.prototype.showStar = function (t, e) {
        var i = VoHBFuWen.findIdByType(e),
            o = 1 == CFG_HUOBAN1.LIB4[i].xx;
        t.showStar(o)
    }, e.prototype.recoverItm = function () {
        for (; this.attContainer.numChildren;) {
            var t = this.attContainer.getChildAt(0);
            t.dispose()
        }
    }, e.prototype.setBtnVis = function (t) {
        this.btnFWQH.visible = t, this.btnChange.visible = t, this.btnXieXia.visible = t, this.btnXuanYao.visible = t
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e._markStatus = 0, e
}(PopUpUI);
__reflect(VHBFuWenTip.prototype, "VHBFuWenTip");
var FWItemAtt = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.init(), e
    }
    return __extends(e, t), e.prototype.init = function () {
        var t = new eui.Group;
        t.height = 25;
        var e = new eui.HorizontalLayout;
        e.gap = 20, e.verticalAlign = "middle", t.layout = e, this.addChild(t), this.txt = TxtLabel.getText(22, 16777215), this.img = new eui.Image("CMS1_json.bm_star3"), this.img.scaleX = this.img.scaleY = .6, this.img.visible = !1, t.addChild(this.txt), t.addChild(this.img)
    }, e.prototype.setText = function (t) {
        this.txt.textFlow = HtmlUtil.parse(t)
    }, e.prototype.showStar = function (t) {
        this.img.visible = t
    }, e.prototype.dispose = function () {
        this.parent && (this.showStar(!1), this.setText(""), this.parent.removeChild(this), e.pool.push(this))
    }, e.create = function () {
        return this.pool.pop() || new e
    }, e.pool = [], e
}(eui.Component);
__reflect(FWItemAtt.prototype, "FWItemAtt");
var VHBGetItems = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VHBGetItemsSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btn), this.grid.setShowCount(!1), this.btn.label = "前往", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.clearStoreSource = function (t) {
        var e = t.indexOf("1");
        e >= 0 && t.splice(e, 1)
    }, e.prototype.gotoSourceView = function (t) {
        var e = CFG_ATTR.LIB_CLHQ[t];
        CFG_ATTR.openBySrc(e)
    }, e.prototype.onHand = function (t) {
        var e = (this.huoban.cfg.con, this.huoban.cfg.con),
            i = ConfigHelp.makeVoList(e)[0],
            o = i.src,
            n = o.split(",");
        this.clearStoreSource(n);
        var a = n[0];
        this.gotoSourceView(a), this.closeHandler()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.huoban = e;
        var i = ConfigHelp.makeVoList(e.cfg.con)[0];
        this.grid.data = i, this.txtName.textColor = Color.getColorInt(i.quality), this.txtName.text = i.name;
        var o = HtmlUtil.parse("拥有: ");
        this.txtOwn.textFlow = o.concat(ConfigHelp.costTxt(i)), this.txtGet.text = "获取途径: " + e.cfg.tj
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.UIID_HBGETITEMS = "UIID_HBGETITEMS", e
}(BaseEUIView);
__reflect(VHBGetItems.prototype, "VHBGetItems");
var VHBOnbattle = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.btns = [], e.sourceData = new eui.ArrayCollection, e.skinName = "VHBOnBattleSkin", e
    }
    return __extends(e, t), e.prototype.guideCZ = function () {
        for (var t = -1, e = 0; 4 > e; e++) {
            var i = this.container.$children[e];
            if (!i.data.member && !i.data.disableLv) {
                t = e;
                break
            }
        }
        var o = this.btns[t];
        o && QuestGuideArrow.getIns().guideTo(o, 50, 25)
    }, e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.cont, this.btnClose.x + 32, this.btnClose.y + 32)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.container.useVirtualLayout = !1;
        for (var e = 0; 3 >= e; e++) {
            var i = this["btn" + e];
            i.label = "出战", i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btns.push(i)
        }
        this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemHBOnBattle
    }, e.prototype.onHand = function (t) {
        var i = t.currentTarget,
            o = this.btns.indexOf(i),
            n = GameGlobal.modelRole.voMine.level,
            a = e.levels[o],
            s = VHuobanPage.getSelHuoban();
        return a > n ? void ViewText.text("人物" + a + "级开启") : void GameGlobal.modelhb.CG651(s.cfg.id, 2, o + 1)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelhb.on(ModelHB.msg_hbPlan, this.onUpdate, this), this.onUpdate()
    }, e.prototype.onUpdate = function () {
        for (var t = (VHuobanPage.getSelHuoban(), VoPlan.getSelPlan()), i = t.voMembers, o = GameGlobal.modelRole.voMine.level, n = [], a = 0; 4 > a; a++) {
            var s = {},
                r = e.levels[a],
                l = this.btns[a];
            r > o ? (s.disableLv = r, l.enabled = !1) : (s.disableLv = void 0, l.enabled = !0), n.push(s)
        }
        for (var a = 0; a < i.length; a++) {
            s = n[a];
            var h = i[a];
            s.index = a + 1, s.member = h
        }
        this.sourceData.source = n
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelhb.off(ModelHB.msg_hbPlan, this.onUpdate, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.UIID_HBONBATTLE = "UIID_HBONBATTLE", e.levels = [3, 30, 40, 50], e
}(BaseEUIView);
__reflect(VHBOnbattle.prototype, "VHBOnbattle");
var VHBSkillTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VHBSkillTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i, o, n = this;
        e.vo instanceof Vo_Skill ? (i = e.vo, n.txtDes.text = i.des) : (o = e.vo, i = o.voSkill, o.jtSkill == i.id ? n.txtDes.textFlow = HtmlUtil.parse(i.des + HtmlUtil.color("\n精通：优先使用", Color.RE_STR)) : n.txtDes.text = i.des), 0 == i.level ? (n.txtName.textFlow = HtmlUtil.parse(i.name + HtmlUtil.color("(未激活)", "#BC0F0F")), n.txtjihuo.text = "仙神星级" + e.level + "级开启") : (n.txtName.text = i.name, n.txtjihuo.text = ""), n.skinIcon.source = IconUtil.getIconUrl(i.icon), 1 == i.cfg.efftype ? n.txtEff.text = "主动技能" : n.txtEff.text = "被动技能"
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.UIID_VHBSKILLTIP = "UIID_VHBSKILLTIP", e
}(BaseEUIView);
__reflect(VHBSkillTip.prototype, "VHBSkillTip");
var VZhenfaUp = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.WIDTH = 500, e.sourceData = new eui.ArrayCollection, e.skinName = "VZhenfaUpSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.addCloseListen(e.btnClose), e.addCloseListen(e.btnReturn), DisplayUtil.popBtnStyle(e.btn1), DisplayUtil.popBtnStyle(e.btn2), e.btn1.label = "使用", e.btn2.label = "全部使用", e.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), e.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), this.container.itemRenderer = ItemZFCostIm, this.container.dataProvider = this.sourceData, this.container.useVirtualLayout = !1, this.container.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onSel, this)
    }, e.prototype.onSel = function (t) {
        this.setSel(t.itemIndex)
    }, e.prototype.setSel = function (t) {
        this.container.selectedIndex = t
    }, e.prototype.update = function (t) {
        this.data = t, this.updateExp(), this.updateCosts()
    }, e.prototype.onHand = function (t) {
        var e = this,
            i = t.currentTarget,
            o = GameGlobal.modelBag.getItemCount(this.container.selectedItem.id);
        if (0 >= o) return void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, this.container.selectedItem.id);
        switch (i) {
            case this.btn1:
                GameGlobal.modelhb.CG659(2, this.data.cfg.id, this.container.selectedItem.id);
                break;
            case this.btn2:
                ViewAlert.show("确定一次使用全部物品升级阵法吗?\n" + HtmlUtil.color("说明:\n全部使用会将背包中符合升级阵法经验的道具全部消耗", "#fe0000"), function () {
                    return 0 >= o ? void ViewText.text("材料不足") : void GameGlobal.modelhb.CG659(3, e.data.cfg.id, e.container.selectedItem.id)
                })
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(e), this.setSel(0), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateCosts, this)
    }, e.prototype.updateExp = function () {
        var t = parseInt(this.data.cfg.id) + 1,
            e = CFG_HUOBAN2.LIB[t];
        if (e) {
            var i = this.data.exp,
                o = this.data.cfg.exp;
            this.bar.width = Math.min(i / o, 1) * this.WIDTH, this.txtPro.text = i + "/" + o
        } else this.txtPro.text = "已满级", this.bar.width = this.WIDTH
    }, e.prototype.updateCosts = function () {
        for (var t = this.data.cfg.item.split(","), e = [], i = 0; i < t.length; i++) {
            var o = parseInt(t[i]),
                n = new VoItem;
            n.init(o), n.count = GameGlobal.modelBag.getItemCount(o), e.push(n)
        }
        this.sourceData.source = e
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateCosts, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.UIID_ZHENFAUP = "UIID_ZHENFAUP", e
}(BaseEUIView);
__reflect(VZhenfaUp.prototype, "VZhenfaUp");
var VoHBEquip = function () {
    function t() {
        this.lockPos = 0
    }
    return t.prototype.getAtt = function (t) {
        for (var e, i = this.baseAtts.length, o = 0; i > o; o++) {
            var n = this.baseAtts[o];
            if (n.id == t) {
                e = n;
                break
            }
        }
        return e
    }, t.prototype.update = function (t, e) {
        var i = CFG_HUOBAN3.LIB,
            o = GameGlobal.modelRole.voMine.level,
            n = this.getLevelStr(o),
            a = t + "0" + e + n,
            s = i[a];
        this.cfg = s, this.position = e, this.type = t, this.baseAtts = this.baseAtts || VoAttribute.parse(s.fattr), this.unSavedAtts = this.unSavedAtts || []
    }, t.prototype.getLevelStr = function (t) {
        if (10 > t) return "010";
        var e = t / 10 >> 0;
        return t.toString().length > 2 ? "" + (10 * e >> 0) : "0" + (10 * e >> 0)
    }, t.findCFG = function (t) {
        var e = CFG_HUOBAN3.LIB,
            i = e[t];
        return i
    }, t.prototype.isUp = function () {
        var t = this,
            e = (t.unSavedAtts, VoHBEQAtt.getXiLianAtt(t.baseAtts, t.lockPos)),
            i = this.changeToNumArr1(e),
            o = ConfigHelp.caculateStrByIntArr(i),
            n = VoAttribute.parse(t.cfg.maxat),
            a = this.changeToNumArr2(n),
            s = ConfigHelp.caculateStrByIntArr(a);
        return .65 * s > o
    }, t.prototype.changeToNumArr1 = function (t) {
        for (var e = [], i = 0; i < t.length; i++) {
            var o = t[i];
            e.push([o.id, o.realVal])
        }
        return e
    }, t.prototype.changeToNumArr2 = function (t) {
        for (var e = [], i = 0; i < t.length; i++) {
            var o = t[i];
            e.push([o.id, o.val])
        }
        return e
    }, t
}();
__reflect(VoHBEquip.prototype, "VoHBEquip");
var VoHBEQAtt = function () {
    function t() {
        this.txtColor = 6835267, this.txtWidth = 10, this.align = "right", this.isLock = !1, this.isCur = !1
    }
    return t.getShengjiCur = function (e, i) {
        for (var o = Util.getTempArr(), n = e.length, a = 0, s = 0; n > s; s++) {
            var r = e[s],
                l = i[s],
                h = new t;
            h.id = r.id, h.name = VoAttribute.getName(r.id) + ":", h.val1 = r.val, h.val2 = "(上限: " + l.val + ")", h.icon = null, h.position = s + 1;
            var c = 13 * h.val1.toString().length;
            c > a && (a = c), o.push(h)
        }
        for (var s = 0; n > s; s++) o[s].txtWidth = a;
        return o
    }, t.getShengjiNext = function (e, i) {
        for (var o = Util.getTempArr(), n = e.length, a = 0, s = 0; n > s; s++) {
            var r = e[s],
                l = i[s],
                h = new t;
            h.id = r.id, h.name = VoAttribute.getName(r.id) + "上限: ", h.val1 = "(" + r.val, h.realVal = r.val, h.txtColor = 1090116, h.val2 = l.val + ")", h.icon = "HBAtlas2_json.littleArraw", h.position = s + 1, h.align = "left";
            var c = 13 * h.val1.toString().length;
            c > a && (a = c), o.push(h)
        }
        for (var s = 0; n > s; s++) o[s].txtWidth = a;
        return o
    }, t.getXiLianAtt = function (e, i) {
        for (var o = Util.getTempArr(), n = e.length, a = 0, s = 0; n > s; s++) {
            var r = e[s],
                l = new t;
            l.id = r.id, l.isCur = !0, l.name = VoAttribute.getName(r.id) + ":", l.val1 = r.val, l.realVal = r.val, l.position = s + 1, l.position == i ? (l.isLock = !0, l.icon = "HBAtlas_json.closeLock") : 0 != i ? l.icon = null : l.icon = "HBAtlas_json.openLock";
            var h = 13 * l.val1.toString().length;
            h > a && (a = h), l.val2 = null, o.push(l)
        }
        for (var s = 0; n > s; s++) o[s].txtWidth = a;
        return o
    }, t.getXlUnSaved = function (e, i, o) {
        for (var n = [], a = e.length, s = 0, r = 0; a > r; r++) {
            var l = e[r],
                h = i[r],
                c = o[r],
                p = l.val - h.val,
                u = new t;
            u.id = l.id, u.name = VoAttribute.getName(l.id) + ":", u.val1 = l.val, u.realVal = l.val, p > 0 ? u.icon = "HBAtlas_json.upArrow" : 0 > p ? u.icon = "HBAtlas_json.dArrow" : u.icon = null, u.val2 = "(上限:" + c.val + ")";
            var d = 15 * u.val1.toString().length;
            d > s && (s = d), n.push(u)
        }
        for (var r = 0; a > r; r++) n[r].txtWidth = s;
        return n
    }, t.getXlSaved = function (e) {
        for (var i = [], o = e.length, n = 0, a = 0; o > a; a++) {
            var s = e[a],
                r = new t;
            r.id = s.id, r.name = VoAttribute.getName(s.id) + ":", r.val1 = "(上限:" + s.val + ")", r.realVal = s.val, r.align = "left", r.txtColor = 1090116, r.icon = null, r.val2 = null;
            var l = 15 * r.val1.toString().length;
            l > n && (n = l), i.push(r)
        }
        for (var a = 0; o > a; a++) i[a].txtWidth = n;
        return i
    }, t
}();
__reflect(VoHBEQAtt.prototype, "VoHBEQAtt");
var VoHBFuWen = function () {
    function t() {
        this.position = -1, this.chosen = !1
    }
    return t.initMap = function () {
        if (!this.isInitMap) {
            this.isInitMap = !0;
            var e = CFG_HUOBAN1.LIB7,
                i = t.mapStarLv;
            for (var o in e) {
                var n = e[o],
                    a = n.xj;
                i[a] || (i[a] = {});
                var s = i[a],
                    r = n.level;
                s[r] = n
            }
            e = CFG_HUOBAN1.LIB6, i = t.mapSpecial;
            for (var o in e) n = e[o], a = n.tssx, i[a] || (i[a] = {}), s = i[a], r = n.level, s[r] = n
        }
    }, t.addToBag = function (e) {
        t.map.add(e, e.sysId)
    }, t.createVo = function (e, i, o, n, a, s) {
        var r = t.create();
        return r.sysId = e, r.cfg = CFG_HUOBAN1.LIB3[i], r.level = o, r.exp = n, r.extralAtts = a, r.specialId = s, r
    }, t.findIdByType = function (t) {
        switch (t) {
            case 115:
                return 1;
            case 117:
                return 2;
            case 118:
                return 3;
            case 111:
                return 4;
            case 113:
                return 5;
            case 108:
                return 6;
            case 110:
                return 7;
            case 102:
                return 8;
            case 103:
                return 9;
            case 105:
                return 10;
            case 106:
                return 11;
            case 119:
                return 12;
            case 152:
                return 13;
            case 153:
                return 14;
            case 154:
                return 15;
            case 155:
                return 16;
            case 156:
                return 17
        }
    }, t.separateByStarLv = function () {
        t.mapSeparate.clear();
        for (var e = t.map.getList(), i = e.length, o = 0; i > o; o++) {
            var n = e[o],
                a = n.cfg.xj,
                s = t.mapSeparate.getByKey(a);
            s || (s = [], t.mapSeparate.add(s, a)), s.push(n)
        }
    }, t.getByStarLv = function (e) {
        var i;
        switch (e) {
            case 0:
                i = t.map.getList();
                break;
            default:
                i = t.mapSeparate.getByKey(e)
        }
        if (i && (i = i.concat(), GameGlobal.layerMgr.isOpenView(UIConst.HBFUWENQH))) {
            var o = GameGlobal.layerMgr.getView(UIConst.HBFUWENQH);
            if (o)
                for (var n = o.getTargetId(), a = 0, s = i.length; s > a; a++) {
                    var r = i[a];
                    if (r.sysId == n) {
                        i.splice(a, 1);
                        break
                    }
                }
        }
        return i
    }, t.updateBag = function (e, i, o) {
        var n = t.map.getByKey(e);
        n && (n.level = i, n.exp = o)
    }, t.hasNotUseFuwen = function (e) {
        for (var i = !0, o = 0, n = t.map.getLength(); n > o; o++) {
            var a = t.map.getByIndex(o);
            if (a.level <= 0 && a.sysId != e) {
                i = !1;
                break
            }
        }
        return i
    }, t.updateHuoban = function (t, e, i, o) {
        for (var n = VoHuoban.findHB(t), a = n.voFuWens, s = a.length, r = 0; s > r; r++) {
            var l = a[r];
            l.sysId == e && (l.level = i, l.exp = o)
        }
    }, t.hasPositionData = function (t) {
        var e = this.map.getList(),
            i = CFG_HUOBAN1.LIB8[t].kflv;
        if (GameGlobal.modelRole.voMine.level >= i)
            for (var o = 0, n = e.length; n > o; o++) {
                var a = e[o],
                    s = a.cfg.cdbw;
                if (s[0] == t || s[1] == t) return !0
            }
        return !1
    }, t.hasBetterData = function (t, e) {
        for (var i = this.map.getList(), o = !1, n = 0, a = i.length; a > n; n++) {
            var s = i[n],
                r = s.cfg.cdbw,
                l = e.level,
                h = s.level;
            if ((r[0] == t || r[1] == t) && (s.cfg.xj > e.cfg.xj || s.cfg.xj == e.cfg.xj && h > l)) {
                o = !0;
                break
            }
        }
        return o
    }, t.deleteById = function (e) {
        t.map.remove(e)
    }, t.onSort = function (t, e) {
        var i = t.cfg.xj,
            o = e.cfg.xj;
        return i - o
    }, t.getAttObj = function (e) {
        for (var i = e.split(","), o = parseInt(i[0]), n = parseInt(i[1]), a = t.attributes.length, s = 0; a > s; s++) {
            var r = t.attributes[s];
            if (r.id == o) return r.val = n, r
        }
        return null
    }, t.getColorByAttInfo = function (t, e) {
        var i = {
            color: "#FFFFFF",
            isFull: !1
        };
        if (!this.colorInfoMap) {
            this.colorInfoMap = {};
            var o = CFG_HUOBAN1.LIB4;
            for (var n in o) {
                var a = o[n].ysxs,
                    s = a.split(":"),
                    r = parseInt(s[0]),
                    l = s[1],
                    h = l.split(",");
                h.push(s[2]), this.colorInfoMap[r] = h
            }
        }
        var h = this.colorInfoMap[t];
        return h && this.getColorsByValue(i, e, h), i
    }, t.getColorsByValue = function (t, e, i) {
        var o = parseInt(i[0]) / 100,
            n = parseInt(i[1]) / 100,
            a = parseInt(i[2]) / 100,
            s = parseInt(i[3]),
            r = e / s;
        o >= r ? t.color = "#FFFFFF" : r > o && n >= r ? t.color = "#37c9ff" : r > n && a >= r ? t.color = "#FF00FF" : t.color = "#FFEE5D", t.isFull = r >= 1
    }, t.getRealVal = function (t) {
        var e = t.id,
            i = CFG_ATTR.LIB[e].sb;
        return 1e4 == i ? 0 == t.val ? "0" : MathUtil.floor2Fix(100 * t.val / 1e4) + "%" : t.val
    }, t.clone = function (t, e) {
        return e.id = t.id, e.name = t.name, e.val = t.val, e
    }, t.create = function () {
        return new t
    }, Object.defineProperty(t.prototype, "name", {
        get: function () {
            return this.cfg.n
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t.prototype, "maxBaseExp", {
        get: function () {
            t.mapStarLv[this.cfg.xj];
            return this.getExpByLevel(this.level)
        },
        enumerable: !0,
        configurable: !0
    }), t.prototype.getExpByLevel = function (e) {
        var i = t.mapStarLv[this.cfg.xj],
            o = i[e];
        return o && o.sxexp
    }, t.prototype.getBaseAtt = function () {
        var e = t,
            i = t.mapStarLv[this.cfg.xj],
            o = i[this.level],
            n = this.cfg.type,
            a = t.baseAttTypes[n];
        return e.clone(e.getAttObj(o[a]), {})
    }, t.prototype.getSpecialAtt = function () {
        var e = t,
            i = t.mapSpecial[this.specialId],
            o = i[this.level],
            n = this.getSpecialXiShu(),
            a = e.clone(e.getAttObj(o.sx), {}),
            s = a.val;
        return a.val = s * n, a
    }, t.prototype.getSpecialXiShu = function () {
        var t = CFG_HUOBAN1.LIB5,
            e = this.cfg.xj;
        this.xiShuInfos || (this.xiShuInfos = t[this.specialId].sxxs.split(","));
        var i = e - 1,
            o = this.xiShuInfos[i];
        return o / 100
    }, t.prototype.getNextBaseAtt = function () {
        var e = t,
            i = e.mapStarLv[this.cfg.xj];
        if (i) {
            var o = i[this.level + 1];
            if (o) {
                var n = this.cfg.type,
                    a = e.baseAttTypes[n];
                return e.clone(e.getAttObj(o[a]), {})
            }
            return null
        }
        return null
    }, t.prototype.getNextSpecialAtt = function () {
        var e = t,
            i = e.mapSpecial[this.specialId];
        if (i) {
            var o = i[this.level + 1];
            if (o) {
                var n = this.getSpecialXiShu(),
                    a = e.clone(e.getAttObj(o.sx), {}),
                    s = a.val;
                return a.val = s * n, a
            }
            return null
        }
        return null
    }, t.prototype.getCost = function () {
        var e = t.mapStarLv[this.cfg.xj];
        if (e) {
            var i = e[this.level];
            return this.exp > 0 || this.level > 0 ? .8 * (i.sxexp2 + this.exp) >> 0 : i.sxexp2
        }
    }, t.map = new CommondMap, t.mapSeparate = new CommondMap, t.isInitMap = !1, t.attributes = [{
        id: 101,
        name: "气血",
        val: 0
    }, {
        id: 102,
        name: "气血",
        val: 0
    }, {
        id: 105,
        name: "物防",
        val: 0
    }, {
        id: 106,
        name: "法防",
        val: 0
    }, {
        id: 103,
        name: "攻击",
        val: 0
    }, {
        id: 119,
        name: "速度",
        val: 0
    }, {
        id: 108,
        name: "暴击",
        val: 0
    }, {
        id: 110,
        name: "抗暴",
        val: 0
    }, {
        id: 110,
        name: "抗暴率",
        val: 0
    }, {
        id: 111,
        name: "暴击增伤",
        val: 0
    }, {
        id: 113,
        name: "暴伤减少",
        val: 0
    }, {
        id: 115,
        name: "伤害增加",
        val: 0
    }, {
        id: 117,
        name: "物伤减少",
        val: 0
    }, {
        id: 118,
        name: "法伤减少",
        val: 0
    }, {
        id: 151,
        name: "伤害减少",
        val: 0
    }, {
        id: 152,
        name: "生命百分比",
        val: 0
    }, {
        id: 153,
        name: "攻击百分比",
        val: 0
    }, {
        id: 154,
        name: "物理防御百分比",
        val: 0
    }, {
        id: 155,
        name: "法术防御百分比",
        val: 0
    }, {
        id: 156,
        name: "速度百分比",
        val: 0
    }], t.baseAttTypes = ["", "smsx", "gjsx", "wfsx", "ffsx"], t.mapStarLv = {}, t.mapSpecial = {}, t
}();
__reflect(VoHBFuWen.prototype, "VoHBFuWen");
var VoHBSkill = function () {
    function t() {}
    return t
}();
__reflect(VoHBSkill.prototype, "VoHBSkill");
var VoHBStar = function () {
    function t(t) {
        this.skills = [], this.level = -1, this.huoban = t;
        var e = 100 * t.cfg.id;
        this.cfg = CFG_HUOBAN1.LIB2[e]
    }
    return t.prototype.update = function (t) {
        this.cfg = CFG_HUOBAN1.LIB2[t], this.level = this.cfg.hblevel;
        var e = CFG_HUOBAN1.LIB2[t + 1];
        if (this.nextCfg = e, e) {
            this.skills.length = 0;
            for (var i = e.jn.split(/\;|\,/), o = 0; o < i.length; o += 2) {
                var n = parseInt(i[o]),
                    a = parseInt(i[o + 1]),
                    s = Vo_Skill.create(n, a),
                    r = new VoHBSkill;
                r.voSkill = s, r.jtSkill = e.jtjn, this.skills.push(r)
            }
        } else this.skills.length = 0
    }, t.prototype.getAtt = function (t) {
        var e, i = this.cfg;
        this.nextCfg && (i = this.nextCfg);
        for (var o = VoAttribute.parse(i.shuxing), n = o.length, a = 0; n > a; a++) {
            var s = o[a];
            if (s.id == t) {
                e = s;
                break
            }
        }
        return e
    }, t.prototype.getShengXingAtt = function () {
        var t = [];
        if (this.nextCfg) e = VoAttribute.parse(this.nextCfg.sx);
        else var e = VoAttribute.parse(this.cfg.sx);
        for (var i = e.length, o = (GameGlobal.modelRole.voMine.level, 0); i > o; o++) {
            for (var n = e[o], a = VoAttribute.add(n.id, 0), s = this.huoban.voAttributes, r = 0; r < s.length; r++) {
                var l = s[r];
                l.id == n.id && (a.val += l.val)
            }
            this.level >= 5 ? (a.val = a.val, a.addVal = -1) : (a.val = a.val, a.addVal = n.val), t.push(a)
        }
        return t
    }, t.prototype.getMjSkill = function () {
        for (var t = this.cfg.jn.split(/\;|\,/), e = [], i = 0; i < t.length; i += 2) {
            var o = parseInt(t[i]),
                n = parseInt(t[i + 1]),
                a = Vo_Skill.create(o, n),
                s = new VoHBSkill;
            s.voSkill = a, s.jtSkill = this.cfg.jtjn, e.push(s)
        }
        return e
    }, t
}();
__reflect(VoHBStar.prototype, "VoHBStar");
var VoHBZFAtt = function () {
    function t() {
        this.attributes = []
    }
    return t.parse = function (e) {
        t.insureNull();
        for (var i = Util.strToIntArr(e), o = i.length, n = 0; o > n; n++) {
            var a = i[n],
                s = a[2],
                r = t.getVo(s);
            r || (r = new t, r.attributes.length = 0, r.position = s, t.list[s] = r);
            var l = new VoAttribute;
            l.id = a[0], l.val = a[1], l.name = t.getName(l.id), r.attributes.push(l)
        }
    }, t.getVo = function (e) {
        return t.list[e]
    }, t.insureNull = function () {
        for (var e = 0; 5 > e; e++) t.list[e] = null
    }, t.getName = function (t) {
        return VoAttribute.getName(t)
    }, t.list = [], t
}();
__reflect(VoHBZFAtt.prototype, "VoHBZFAtt");
var VoHuoban = function () {
    function t() {
        this.state = 1, this.skills = [], this.equips = [], this.voFuWens = [], this.fuwenAtts = [], this.zhanli = 0, this.plan = 0, this.zhenfa = -1, this.teamIndex = -1, this.voAttributes = []
    }
    return t.init = function () {
        if (!t.isInit) {
            t.isInit = !0;
            for (var e in CFG_HUOBAN1.LIB) {
                var i = new t;
                i.cfg = CFG_HUOBAN1.LIB[e], i.id = i.cfg.id, i.state = 1;
                var o = i.cfg.battr.split(/\;|\,/);
                i.zhanli = CFG_ATTR.cuculateArrScore(o), i.actCost = ConfigHelp.makeVoList(i.cfg.con)[0], i.voStar = new VoHBStar(i), 0 == i.cfg.skin && t.map.add(i, e)
            }
            t.initSkill(), t.iniEquip()
        }
    }, t.getListByState = function (e) {
        for (var i = t.map.getList(), o = i.length, n = [], a = 0; o > a; a++) {
            var s = i[a];
            s.state == e && n.push(s)
        }
        return n
    }, t.initSkill = function () {
        for (var e = t.map.getList(), i = t.map.getLength(), o = 0; i > o; o++)
            for (var n = e[o], a = n.cfg, s = a.jnzs.split(/\;|\,/), r = s.length, l = 0; r > l; l += 2) {
                var h = parseInt(s[l]),
                    c = parseInt(s[l + 1]),
                    p = Vo_Skill.create(h, c),
                    u = new VoHBSkill;
                u.voSkill = p, u.jtSkill = n.cfg.jtjn, n.skills.push(u)
            }
    }, t.iniEquip = function () {
        for (var e = t.map.getList(), i = e.length, o = 0; i > o; o++)
            for (var n = e[o], a = n.cfg, s = a.t, r = 0; 6 > r; r++) {
                var l = r + 1,
                    h = new VoHBEquip;
                h.update(s, l), n.equips.push(h)
            }
    }, t.roleChangeUpdate = function () {
        for (var e = 0, i = t.map.getLength(); i > e; e++) {
            var o = t.map.getByIndex(e);
            o.updateEQAtt(o.cfg.t)
        }
    }, t.prototype.updateEQAtt = function (t) {
        for (var e = this.equips, i = GameGlobal.modelRole.voMine.level, o = 0; o < e.length; o++) {
            var n = this.equips[o];
            n.cfg && n.cfg.l != i && n.update(t, n.position)
        }
    }, t.findHB = function (e) {
        return t.map.getByKey(e)
    }, t.isEnable = function (e) {
        var i = t.findHB(e);
        return i && i.state > 1
    }, t.findEquip = function (t, e) {
        var i = t.equips,
            o = parseInt(e.toString().charAt(2)),
            n = i[o - 1];
        return n
    }, t.findEquipByPos = function (t, e) {
        return t.equips[e - 1]
    }, t.prototype.hasXLAtt = function () {
        for (var t = this.equips, e = t.length, i = 0; e > i; i++) {
            var o = t[i];
            if (o.unSavedAtts && o.unSavedAtts.length > 0) return !0
        }
        return !1
    }, t.updateStar = function (t, e) {
        t.voStar || (t.voStar = new VoHBStar(t)), t.voStar.update(e)
    }, t.getColorByQuality = function (t) {
        var e = "#673403";
        switch (t) {
            case 1:
                e = Color.WH_STR;
                break;
            case 2:
                e = Color.GR_STR;
                break;
            case 3:
                e = Color.BL_STR;
                break;
            case 4:
                e = Color.PU_STR;
                break;
            case 5:
                e = Color.OR_STR;
                break;
            case 6:
                e = Color.RE_STR
        }
        return e
    }, t.getQualityColor = function (t) {
        var e = 6763523;
        switch (t) {
            case 1:
                e = Color.WH;
                break;
            case 2:
                e = Color.GR;
                break;
            case 3:
                e = Color.BL;
                break;
            case 4:
                e = Color.PU;
                break;
            case 5:
                e = Color.OR;
                break;
            case 6:
                e = Color.RE
        }
        return e
    }, t.canActive = function (e) {
        var i;
        if (i = e instanceof t ? e : t.findHB(e), 1 == i.state) {
            var o = i.actCost.type,
                n = i.actCost.id,
                a = i.actCost.count,
                s = o + "," + n + "," + a;
            return VoAttribute.checkEnough(s)
        }
        return !1
    }, t.canShengXing = function (e) {
        var i;
        if (i = e instanceof t ? e : t.findHB(e), i.state > 1 && i.voStar) {
            var o = CFG_HUOBAN1.LIB2[i.voStar.cfg.bianhao],
                n = CFG_HUOBAN1.LIB2[i.voStar.cfg.bianhao + 1];
            return n ? VoAttribute.checkEnough(o.xiaohao) : !1
        }
        return !1
    }, t.get1stActived = function () {
        for (var e = t.map.getList(), i = e[0], o = e.length, n = 0; o > n; n++) {
            var a = e[n];
            if (a.state > 1) {
                i = a;
                break
            }
        }
        return i
    }, t.getAllActived = function () {
        for (var e = t.map.getList(), i = e.length, o = [], n = 0; i > n; n++) {
            var a = e[n];
            a.state > 1 && o.push(a)
        }
        return o
    }, t.prototype.updateBaseAtt = function (e, i, o, n, a, s, r) {
        this.voAttributes.length = 0;
        for (var l = [e, i, o, n, a, s, r], h = 0; h < l.length; h++) {
            var c = l[h],
                p = new VoAttribute;
            p.id = t.hbAttToIndex[h], p.val = c, p.name = VoAttribute.getNameHB(p.id), this.voAttributes.push(p)
        }
    }, t.getAttibute = function (e) {
        var i;
        if (i = e instanceof t ? e : t.findHB(e.toString()), i.state > 1 && i.voAttributes.length > 0) return i.voAttributes;
        for (var o = [], n = VoAttribute.parse(i.cfg.battr, VoAttribute.getNameHB), a = n.length, s = GameGlobal.modelRole.voMine.level, r = 0; a > r; r++) {
            var l = n[r],
                h = t.getGrownAtt(i, l.id);
            if (l.val += h.val * (s - 1) / 1e4 >> 0, i.state > 1) {
                var c = t.getEquipAtt(i, l.id);
                l.val += c.val
            }
            if (i.voStar && i.voStar.cfg.hblevel > 0) {
                var p = t.getStarAtt(i, l.id);
                p && (l.val += p.val)
            }
            o.push(l)
        }
        return o
    }, t.getBaseAtt = function (e, i) {
        var o;
        o = e instanceof t ? e : t.findHB(e);
        for (var n, a = VoAttribute.parse(o.cfg.battr), s = 0; s < a.length; s++) {
            var r = a[s];
            if (r.id == i) {
                n = r;
                break
            }
        }
        return n
    }, t.getGrownAtt = function (t, e) {
        for (var i, o = VoAttribute.parse(t.cfg.attav), n = 0; n < o.length; n++) {
            var a = o[n];
            if (a.id == e) {
                i = a;
                break
            }
        }
        return i
    }, t.getEquipAtt = function (t, e) {
        var i = new VoAttribute;
        i.id = e, i.val = 0;
        for (var o = t.equips, n = 0; n < o.length; n++) {
            var a = o[n],
                s = a.getAtt(e);
            s && (i.val += s.val)
        }
        return i
    }, t.getStarAtt = function (t, e) {
        var i;
        return t.voStar.cfg.hblevel >= 0 && (i = t.voStar.getAtt(e)), i
    }, t.prototype.hasFuwenNotice = function () {
        for (var t = [1, 2, 3, 4, 5, 6], e = this.voFuWens, i = 0; 6 > i; i++) {
            var o, n = e[i];
            if (n) o = n.position, a = VoHBFuWen.hasBetterData(o, n);
            else {
                o = t[t.length - 1];
                var a = VoHBFuWen.hasPositionData(o)
            }
            var s = t.indexOf(o);
            if (s >= 0 && t.splice(s, 1), 1 == a) return !0
        }
        return !1
    }, t.notice = function () {
        for (var e = t.map.getList(), i = e.length, o = !1, n = 0; i > n; n++) {
            var a = e[n],
                s = t.canActive(a),
                r = t.canShengXing(a);
            if (s || r) {
                o = !0;
                break
            }
        }
        return o || VoZhenfa.notice() || GameGlobal.modelhb.fuwenNotice() || VoXSJueXing.noticeALL() || GameCtrlBase.instance.getModel(HuobanSkin.Model).m_meunNotice
    }, t.onSort = function () {
        var e = t.map.getList();
        e.sort(t.sortFunc)
    }, t.sortFunc = function (e, i) {
        var o = e.cfg.px,
            n = i.cfg.px;
        t.canActive(e) && (o -= 50), t.canActive(i) && (n -= 50);
        var a = e.state,
            s = i.state;
        2 == a && (a = 4), 2 == s && (s = 4), a = -a, s = -s, a = 1e7 * a, s = 1e7 * s;
        var r = o + a,
            l = n + s;
        return r > l ? 1 : l > r ? -1 : 0
    }, t.getTypeName = function (t) {
        switch (t) {
            case 1:
                return "物攻";
            case 2:
                return "法攻";
            case 3:
                return "辅助"
        }
    }, t.prototype.isEquipUp = function () {
        for (var t = this.equips, e = 0; e < t.length; e++) {
            var i = t[e];
            if (i.isUp()) return !0
        }
        return !1
    }, t.calculateSZXLZL = function () {
        for (var t = 0, e = this.map.getList(), i = 0, o = e.length; o > i; i++) {
            var n = e[i];
            if (2 == n.state)
                for (var a = 0, s = n.equips.length; s > a; a++)
                    for (var r = n.equips[a], l = 0, h = r.baseAtts.length; h > l; l++) {
                        var c = r.baseAtts[l],
                            p = CFG_ATTR.LIB[c.id].xishu;
                        p && (t += p * c.val / 1e3 >> 0)
                    }
        }
        return t
    }, t.caculateSZZL = function () {
        for (var t = 0, e = this.map.getList(), i = 0, o = e.length; o > i; i++) {
            var n = e[i];
            2 == n.state && (t += n.zhanli)
        }
        return t
    }, t.calculateSZFWZL = function () {
        for (var t = 0, e = this.map.getList(), i = 0, o = e.length; o > i; i++) {
            var n = e[i];
            if (2 == n.state)
                for (var a = 0, s = n.fuwenAtts.length; s > a; a++) {
                    var r = n.fuwenAtts[a],
                        l = CFG_ATTR.LIB[r[0]].xishu;
                    l && (t += l * r[1] / 1e3 >> 0)
                }
        }
        return t
    }, t.map = new CommondMap, t.isInit = !1, t.hbAttToIndex = [102, 103, 105, 106, 119, 107, 109], t
}();
__reflect(VoHuoban.prototype, "VoHuoban");
var VoPlan = function () {
    function t() {
        this.index = 0, this.voMembers = []
    }
    return t.prototype.hasUsedZhenFa = function () {
        return this.zhenfaId > 0
    }, t.init = function () {
        t.list.length = 0;
        for (var e = 0; 3 >= e; e++) {
            var i = new t;
            i.zhenfaId = 0, VoPlanMem.ensureNull(i.voMembers), i.index = e, t.list[e] = i
        }
    }, t.get3Plan = function () {
        for (var e = [], i = 1; i < t.list.length; i++) {
            var o = t.list[i];
            e.push(o)
        }
        return e
    }, t.update = function (e, i, o) {
        var n = t.list[e];
        CFG_HUOBAN2.LIB;
        n.index = e, n.zhenfaId = i, n.voMembers.length = 0, VoPlanMem.ensureNull(n.voMembers);
        for (var a = 0; a < o.length; a++) {
            var s = o[a],
                r = new VoPlanMem,
                l = s[0],
                h = s[1],
                c = VoHuoban.findHB(h);
            r.member = c, n.voMembers[l - 1] = r
        }
    }, t.updateSelIdx = function (e) {
        t.selPlanIdx = e
    }, t.getSelPlan = function () {
        var e = t.selPlanIdx;
        return t.list[e]
    }, t.getPlanByIndex = function (e) {
        return t.list[e]
    }, t.list = [], t.selPlanIdx = 0, t
}();
__reflect(VoPlan.prototype, "VoPlan");
var VoPlanMem = function () {
    function t() {}
    return t.ensureNull = function (t) {
        for (var e = 0; 4 > e; e++) t[e] = null
    }, t
}();
__reflect(VoPlanMem.prototype, "VoPlanMem");
var VoZhenfa = function () {
    function t() {
        this.isJH = !1
    }
    return t.init = function () {
        var e = CFG_HUOBAN2.LIB2,
            i = CFG_HUOBAN2.LIB;
        for (var o in e) {
            var n = parseInt(o),
                a = i[n],
                s = new t;
            s.setCFG(a), s.isJH = !1, s.exp = 0, t.map.add(s, o)
        }
    }, t.prototype.setCFG = function (t) {
        this.cfg = t, this.updateCostArr = Util.parseIntStr(t.item)
    }, t.prototype.getId = function () {
        var t = this.cfg.id;
        return t
    }, t.prototype.canUpgrade = function () {
        for (var t = this.updateCostArr, e = 0, i = t.length; i > e; e++) {
            var o = t[e];
            if (o > 0) {
                var n = GameGlobal.modelBag.getItemCount(o);
                if (n > 0) return !0
            }
        }
        return !1
    }, t.prototype.canJH = function () {
        var t = this.cfg.id,
            e = CFG_HUOBAN2.LIB2[t];
        if (e) {
            var i = e.item;
            if (i > 0) {
                var o = GameGlobal.modelBag.getItemCount(i);
                if (o > 0) return !0
            }
        }
        return !1
    }, t.update = function (e, i) {
        var o = e.toString().charAt(0),
            n = t.map.getMap();
        for (var a in n) {
            var s = n[a];
            if (o == a.charAt(0)) {
                var r = CFG_HUOBAN2.LIB[e];
                s.setCFG(r), s.isJH = !0, s.exp = i, t.map.update(a, e, s);
                break
            }
        }
    }, t.find = function (e) {
        return t.map.getByKey(e)
    }, t.notice = function () {
        var e = t.map.getList(),
            i = e.length,
            o = CFG_COMMOND.getOpenLevel(CFG_COMMOND.HUOBANZF);
        if (GameGlobal.modelRole.voMine.level >= o)
            for (var n = 0; i > n; n++) {
                var a = e[n];
                if (a.canJH() || a.canUpgrade()) return !0
            }
        return !1
    }, t.map = new CommondMap, t
}();
__reflect(VoZhenfa.prototype, "VoZhenfa");
var Child_HuoBanJX = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.positionQL = [{
            x: 210,
            y: 310
        }, {
            x: 250,
            y: 410
        }, {
            x: 180,
            y: 530
        }, {
            x: 290,
            y: 620
        }, {
            x: 410,
            y: 560
        }, {
            x: 400,
            y: 440
        }, {
            x: 490,
            y: 340
        }], e.positionBH = [{
            x: 225,
            y: 300
        }, {
            x: 220,
            y: 425
        }, {
            x: 150,
            y: 530
        }, {
            x: 270,
            y: 640
        }, {
            x: 440,
            y: 600
        }, {
            x: 440,
            y: 420
        }, {
            x: 540,
            y: 500
        }], e.positionZQ = [{
            x: 150,
            y: 290
        }, {
            x: 220,
            y: 400
        }, {
            x: 120,
            y: 510
        }, {
            x: 250,
            y: 560
        }, {
            x: 400,
            y: 520
        }, {
            x: 390,
            y: 370
        }, {
            x: 540,
            y: 360
        }], e.positionXW = [{
            x: 120,
            y: 290
        }, {
            x: 250,
            y: 340
        }, {
            x: 130,
            y: 480
        }, {
            x: 250,
            y: 580
        }, {
            x: 410,
            y: 540
        }, {
            x: 410,
            y: 390
        }, {
            x: 560,
            y: 470
        }], e.iconUrls = [{
            grey: "xuanWuGrey_png",
            light: "xuanWuLight_png"
        }, {
            grey: "qingLongGrey_png",
            light: "qingLongLight_png"
        }, {
            grey: "baiHuGrey_png",
            light: "baiHuLight_png"
        }, {
            grey: "zhuQueGrey_png",
            light: "zhuQueLight_png"
        }], e.lineDraw = new egret.Shape, e._curPage = 1, e.MAXPAGE = 4, e._symbol = 0, e._preCfgId = 0, e.curShowDatas = null, e.isLevlUped = !1, e.skinName = "Child_HuoBanJXSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.lbshengJi.text = "", this.imgNoticeSKillBtn.visible = !1, this.addChildAt(this.lineDraw, 2), this.proxyer = new LineDrawer(this.lineDraw);
        for (var e = [], i = 0; 7 > i; i++) {
            var o = this["item" + i];
            e.push(o)
        }
        this.proxyer.setRenerers(e), this.proxyer.setItemSelEvent(this.onSel, this), this.btnActive.label = "激活印记", DisplayUtil.popBtnStyle(this.txtLink), DisplayUtil.popBtnStyle(this.btnLeft), DisplayUtil.popBtnStyle(this.btnRight), DisplayUtil.popBtnStyle(this.txtLink), DisplayUtil.popBtnStyle(this.skillBtn), this.txtLink.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLink, this), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnActive.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onActive, this), this.skillBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSkillBtn, this), this.grid.enableTip(), this.imgText = new ImageText, this.imgText.charFunc = ImageText.STRFUNC, this.imgText.container = this.strContainer, VoXSJueXing.validJueXings();
        VHuobanPage.getSelHuoban()
    }, e.prototype.onActive = function () {
        var t = VHuobanPage.getSelHuoban();
        GameGlobal.modelhb.CG3653(t.cfg.id, this.savedCfg.id)
    }, e.prototype.onSkillBtn = function () {
        if ("shengJi" != this.currentState) {
            var t = VHuobanPage.getSelHuoban(),
                e = this.savedCfg;
            if (this.hasActived(t, e) || "青龙印记" != e.mc) {
                var i = CFG_XSBDJN.LIB[this.BDJNid].dj;
                2 == i ? GameGlobal.modelhb.CG4433(this.BDJNid) : (GameGlobal.modelhb.CG4433(this.BDJNid - 1), GameGlobal.modelhb.CG4433(this.BDJNid)), this.currentState = "shengJi", this.imgChoose.visible = !0
            } else this.imgChoose.visible = !1, ViewText.text("请先觉醒青龙印记！")
        } else {
            this.currentState = "normal", this.imgChoose.visible = !1, this.costGroup.visible = !0;
            var o = this.savedCfg,
                n = this.datas,
                a = VoXSJueXing.filterDatas(n, o);
            this.dealWithActiveST(a)
        }
        this.update()
    }, e.prototype.onChange = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnLeft:
                this._curPage--;
                break;
            case this.btnRight:
                if (this.nextPageCanOpen(this._curPage + 1)) {
                    this._curPage++;
                    break
                }
                return void ViewText.text("请先激活当前印记!")
        }
        this.watchLeft(), this.watchRight(), this.showOtherPage()
    }, e.prototype.nextPageCanOpen = function (t) {
        var e = VHuobanPage.getSelHuoban(),
            i = VoXSJueXing.regHbJXIdMap[e.cfg.id],
            o = VoXSJueXing.hasActivedHB[e.cfg.id];
        if (i > 0) {
            var n = this.datasByPage[t - 1],
                a = o > 0 && o + 1 >= n.id;
            if (!a) return !1;
            for (var s = n.parm.split(","), r = 0; r < s.length; r++) {
                var l = parseInt(s[r]);
                if (i + 1 >= l) return !0
            }
            return !1
        }
        return !1
    }, e.prototype.watchLeft = function () {
        1 == this._curPage ? this.btnLeft.visible = !1 : this.btnLeft.visible = !0
    }, e.prototype.watchRight = function () {
        this._curPage == this.MAXPAGE ? this.btnRight.visible = !1 : this.btnRight.visible = !0
    }, e.prototype.pageNotice = function (t) {
        var e = VoXSJueXing.regHbJXIdMap[t];
        if (VoXSJueXing.isFull(t)) return !1;
        if (e > 0) {
            for (var i = e + 1, o = 1, n = 0; n < this.datasByPage.length; n++) {
                var a = this.datasByPage[n],
                    s = a.parm.split(",");
                if (s.indexOf(i.toString()) >= 0) {
                    o = n + 1;
                    break
                }
            }
            return this._curPage < o ? VoXSJueXing.noticeJueXing(t) : !1
        }
        return !1
    }, e.prototype.onHand = function () {
        if ("shengJi" == this.currentState)
            if (0 == this.btnHand.enabled) {
                var t = VHuobanPage.getSelHuoban();
                t.voStar && t.voStar.cfg.hblevel > 0 ? ViewText.text("道具不足！") : ViewText.text("被动技能未激活！")
            } else {
                var t = VHuobanPage.getSelHuoban();
                GameGlobal.modelhb.CG4431(this._curBDJNid, t.cfg.id)
            }
        else {
            var t = VHuobanPage.getSelHuoban();
            GameGlobal.modelhb.CG3651(t.cfg.id, this.curSelData.cfg.id)
        }
    }, e.prototype.onLink = function () {
        "shengJi" == this.currentState ? GameGlobal.layerMgr.open(UIConst.CAILIAOGET, this.grid.data.id) : GameGlobal.layerMgr.open(UIConst.CAILIAOGET, this.curSelData.getCost().id)
    }, e.prototype.onSel = function (t) {
        this.setSel(t.getData())
    }, e.prototype.setSel = function (t) {
        if (this.currentState = "normal", this.imgChoose.visible = !1, this.curSelData = t, this.proxyer.setSel(t), this.getBDJNid(), this.BDJNid) {
            var e = CFG_XSBDJN.LIB[this.BDJNid].dj;
            2 == e ? GameGlobal.modelhb.CG4433(this.BDJNid) : (GameGlobal.modelhb.CG4433(this.BDJNid - 1), GameGlobal.modelhb.CG4433(this.BDJNid))
        } else this.skillBtn.visible = !1;
        this.update()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelhb.on(ModelHB.msg_huobanSelection, this.onHuobanSel, this), GameGlobal.modelhb.on(ModelHB.msg_jxdatas, this.onUpdate, this), GameGlobal.modelhb.on(ModelHB.msg_jxImUpdata, this.showEff, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateBaseInfo, this), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.updateBaseInfo, this), GameGlobal.modelhb.on(ModelHB.MSG_BDJN, this.onBDJNUpdate, this), GameGlobal.modelhb.on(ModelHB.MSG_SHENGJI, this.onShengJiUpdate, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelhb.off(ModelHB.msg_huobanSelection, this.onHuobanSel, this), GameGlobal.modelhb.off(ModelHB.msg_jxdatas, this.onUpdate, this), GameGlobal.modelhb.off(ModelHB.msg_jxImUpdata, this.showEff, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateBaseInfo, this), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.updateBaseInfo, this), GameGlobal.modelhb.off(ModelHB.MSG_BDJN, this.onBDJNUpdate, this), GameGlobal.modelhb.off(ModelHB.MSG_SHENGJI, this.onShengJiUpdate, this)
    }, e.prototype.onHuobanSel = function () {
        this.curSelData = null, this.onUpdate()
    }, e.prototype.onUpdate = function () {
        var t = VHuobanPage.getSelHuoban();
        t.cfg.id != this._preCfgId && (this.datas = VoXSJueXing.getDatas(t.cfg.id), this.datasByPage = VoXSJueXing.getYinJiData(t.cfg.id)), this.savedCfg = this.getJueXingCfg(t.cfg.id), this.curShowDatas = this.display(), this.setSel(this.getSelData(t.cfg.id))
    }, e.prototype.getBDJNid = function () {
        this.BDJNid = null;
        var t = this.savedCfg;
        for (var e in CFG_XSBDJN.LIB) {
            var i = CFG_XSBDJN.LIB[e];
            i.yjid == t.id && (this.BDJNid = i.id)
        }
    }, e.prototype.updateSkillBtn = function () {
        var t = CFG_XSBDJN.LIB[this.BDJNid].dj,
            e = VHuobanPage.getSelHuoban(),
            i = this.savedCfg;
        this.hasActived(e, i) ? (this.skillBtn.filters = null, 2 == t ? this.skillBtn.visible = !0 : this.isLevlUped ? this.skillBtn.visible = !0 : (this.skillBtn.visible = !1, this.currentState = "normal", this.imgChoose.visible = !1)) : ("青龙印记" == i.mc ? (this.imgNoticeSKillBtn.visible = !1, this.lbLevel.text = "LV.2", this.skillBtn.visible = !0, this.skillBtn.filters = [FilterColors.FilterGray]) : (this.skillBtn.visible = !1, this.skillBtn.filters = null), this.currentState = "normal", this.imgChoose.visible = !1)
    }, e.prototype.onShengJiUpdate = function () {
        var t = CFG_XSBDJN.LIB[this.BDJNid].dj;
        2 == t ? GameGlobal.modelhb.CG4433(this.BDJNid) : (GameGlobal.modelhb.CG4433(this.BDJNid - 1), GameGlobal.modelhb.CG4433(this.BDJNid));
        var e = parseInt(CFG_XSBDJN.LIB[this.BDJNid].jnqd.split(",")[0]),
            i = CFG_XSBDJN.LIB[this.BDJNid].dj,
            o = Vo_Skill.create(e, i),
            n = new VoHBSkill;
        n.voSkill = o, GameGlobal.layerMgr.open(UIConst.NEWSKILLBDJN, o)
    }, e.prototype.onBDJNUpdate = function (t) {
        if (this.lbshengJi.text = "", t.id == this.BDJNid && 0 == t.result) {
            this._curBDJNid = this.BDJNid, this.next_bdjnName.visible = !0, this.next_description.visible = !0, this.costGroup.visible = !0;
            var e = this.savedCfg,
                i = this.datas,
                o = VoXSJueXing.filterDatas(i, e);
            this.dealWithActiveST(o), this.lbLevel.text = "LV." + CFG_XSBDJN.LIB[this._curBDJNid].xsdj;
            var n = ConfigHelp.makeVoList(CFG_XSBDJN.LIB[this._curBDJNid].sjxh)[0],
                a = VHuobanPage.getSelHuoban();
            n.getOwned() >= parseInt(CFG_XSBDJN.LIB[this._curBDJNid].sjxh.split(",")[2]) && a.voStar && a.voStar.cfg.hblevel > 0 && (this.imgNoticeSKillBtn.visible = !0)
        } else t.id == this.BDJNid && 1 == t.result ? (this._curBDJNid = this.BDJNid, this.imgNoticeSKillBtn.visible = !1, "shengJi" == this.currentState && (this.next_bdjnName.visible = !1, this.next_description.visible = !1, this.costGroup.visible = !1, CFG_XSBDJN.LIB[this._curBDJNid].dj < 5 ? this.lbshengJi.text = "激活下一印记，可提升至更高技能等级" : this.lbshengJi.text = "技能已达最高等级"), this.lbLevel.text = "LV." + CFG_XSBDJN.LIB[this._curBDJNid].dj) : t.id == this.BDJNid - 1 && 0 == t.result ? this.isLevlUped = !1 : t.id == this.BDJNid - 1 && 1 == t.result && (this.isLevlUped = !0);
        this.updateSkillBtn(), this.update()
    }, e.prototype.getJueXingCfg = function (t) {
        var e = VoXSJueXing.regHbJXIdMap[t];
        if (e > 0) {
            for (var i = 0; i < this.datasByPage.length; i++) {
                var o = this.datasByPage[i],
                    n = o.parm.split(",");
                if (n.indexOf(e.toString()) >= 0) return o
            }
            return null
        }
        return this.datasByPage[0]
    }, e.prototype.display = function () {
        var t = this.savedCfg,
            e = this.datas,
            i = VoXSJueXing.filterDatas(e, t);
        this.proxyer.source = i;
        var o = t.yjzlzs;
        this.imgText.setText("" + o), this.txtName.text = t.mc;
        var n = t.id % 4 >> 0,
            a = this.getPositions(n);
        return this._symbol != n ? this.proxyer.setPositions(this.weiTiao(a), !0) : this.proxyer.setPositions(this.weiTiao(a), !1), this._symbol = n, this._curPage = this.getPage(), this.dealWithActiveST(i), this.watchLeft(), this.watchRight(), i
    }, e.prototype.dealWithActiveST = function (t) {
        var e = VHuobanPage.getSelHuoban(),
            i = this.savedCfg,
            o = this.hasAllJueXing(e, t);
        o ? this.hasActived(e, i) ? (this.iconBg.source = this.iconUrls[this._symbol].light, this.showNormal(), VoXSJueXing.isFull(e.cfg.id) ? this.imgNotice.visible = !1 : this.imgNotice.visible = this.pageNotice(e.cfg.id)) : (this.iconBg.source = this.iconUrls[this._symbol].grey, this.txtDescription.textFlow = HtmlUtil.parse(this.savedCfg.mc + ": " + ColorSet(Lang.reTxt(this.savedCfg.ms, this.savedCfg.yjzlzs), "#ffe823")), this.showActivedSt(), this.imgNotice.visible = !1) : (this.iconBg.source = this.iconUrls[this._symbol].grey, this.imgNotice.visible = this.pageNotice(e.cfg.id), this.showNormal())
    }, e.prototype.showNormal = function () {
        this.costGroup.visible = !0, this.btnActive.visible = !1, this.btnActive.setNoticeVis(!0)
    }, e.prototype.showActivedSt = function () {
        this.costGroup.visible = !1, this.btnActive.visible = !0, this.btnActive.setNoticeVis(!0)
    }, e.prototype.hasAllJueXing = function (t, e) {
        var i = VoXSJueXing.regHbJXIdMap[t.cfg.id],
            o = !0;
        if (i > 0)
            for (var n = 0; n < e.length; n++) {
                var a = e[n];
                if (a.cfg.id > i) {
                    o = !1;
                    break
                }
            } else o = !1;
        return o
    }, e.prototype.hasActived = function (t, e) {
        var i = VoXSJueXing.hasActivedHB[t.cfg.id];
        return i > 0 ? i >= e.id : !1
    }, e.prototype.getPage = function () {
        switch (this._symbol) {
            case 0:
                return 4;
            case 1:
                return 1;
            case 2:
                return 2;
            case 3:
                return 3
        }
    }, e.prototype.showOtherPage = function () {
        this.savedCfg = this.datasByPage[this._curPage - 1], this.curShowDatas = this.display(), this.setSel(this.curShowDatas[0])
    }, e.prototype.showEff = function (t) {
        var e = this.proxyer.getRendererById(t);
        e.showEff()
    }, e.prototype.weiTiao = function (t) {
        for (var e = [], i = 0; i < t.length; i++) {
            var o = {
                x: t[i].x + 33,
                y: t[i].y + 53
            };
            e.push(o)
        }
        return e
    }, e.prototype.getPositions = function (t) {
        switch (t) {
            case 0:
                return this.positionXW;
            case 1:
                return this.positionQL;
            case 2:
                return this.positionBH;
            case 3:
                return this.positionZQ
        }
    }, e.prototype.getSelData = function (t) {
        var e = this.curShowDatas,
            i = VoXSJueXing.regHbJXIdMap[t];
        if (i > 0) {
            for (var o = e[e.length - 1], n = 0; n < e.length; n++) {
                var a = e[n];
                if (a.cfg.id == i + 1) {
                    o = a;
                    break
                }
            }
            return o
        }
        return e[0]
    }, e.prototype.update = function () {
        if (this._curBDJNid) {
            var t = CFG_XSBDJN.LIB[this._curBDJNid].tb;
            this.icon.source = IconUtil.getIconUrl(t)
        }
        var e = VHuobanPage.getSelHuoban();
        if (this.curSelData.unLockLv) this.curSelData.hasJueXing ? this.txtDescription.textFlow = HtmlUtil.parse(ColorSet(this.curSelData.getDescription(), "#ffe823")) : this.txtDescription.textFlow = HtmlUtil.parse(ColorSet("仙神等级达到" + this.curSelData.unLockInfo.need + "级觉醒: ", "#ffb15d") + ColorSet(this.curSelData.getDescription(), "#ffe823"));
        else {
            var i = parseInt(this.curSelData.unLockInfo.type);
            switch (i) {
                case 1:
                    this.txtDescription.textFlow = HtmlUtil.parse(ColorSet("仙神等级达到" + this.curSelData.unLockInfo.need + "级解锁: ", "#ffb15d") + ColorSet(this.curSelData.getDescription(), "#ffe823"))
            }
        }
        if ("shengJi" == this.currentState) {
            if (this._curBDJNid) {
                var o = ConfigHelp.makeVoList(CFG_XSBDJN.LIB[this._curBDJNid].sjxh)[0];
                this.grid.data = o;
                var n = ConfigHelp.costTxt(o, "#10a244");
                this.txtCost.textFlow = n, this.txtLink.textFlow = HtmlUtil.underLine("获取" + o.name), this._preCost_SJ && this._preCost_SJ.id == o.id || (this._preCost_SJ = o.clone()), this._preCost_SJ.count = this._preCost_SJ.getOwned(), this._preRoleLv_SJ = GameGlobal.modelRole.voMine.level, o.getOwned() >= parseInt(CFG_XSBDJN.LIB[this._curBDJNid].sjxh.split(",")[2]) && e.voStar && e.voStar.cfg.hblevel > 0 ? (this.btnHand.label = "升级", this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!0)) : (this.btnHand.label = "升级", this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1));
                var a = parseInt(CFG_XSBDJN.LIB[this._curBDJNid].parm2.split(",")[0]),
                    s = CFG_XSBDJN.LIB[this._curBDJNid].xsdj,
                    r = Vo_Skill.create(a, s),
                    l = new VoHBSkill;
                l.voSkill = r;
                var h = parseInt(CFG_XSBDJN.LIB[this._curBDJNid].jnqd.split(",")[0]),
                    c = CFG_XSBDJN.LIB[this._curBDJNid].dj,
                    p = Vo_Skill.create(h, c),
                    u = new VoHBSkill;
                u.voSkill = p, this.next_bdjnName.text = "下级效果：" + u.voSkill.name, this.next_description.text = u.voSkill.des
            }
        } else {
            var d = this.curSelData.getCost();
            this.grid.data = d;
            var f = ConfigHelp.costTxt(d, "#10a244");
            this.txtCost.textFlow = f, this.txtLink.textFlow = HtmlUtil.underLine("获取" + d.name), this.curSelData.hasJueXing ? (this.btnHand.label = "已觉醒", this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1)) : this.curSelData.canbeJueXing() ? (this.btnHand.label = "觉醒", this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!0), this.btnHand.enabled = !0) : (this.btnHand.label = "未觉醒", this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1), this.btnHand.enabled = !1), this._preCost && this._preCost.id == d.id || (this._preCost = d.clone()), this._preCost.count = this._preCost.getOwned(), this._preRoleLv = GameGlobal.modelRole.voMine.level
        }
    }, e.prototype.updateBaseInfo = function () {
        var t = this._preCost.getOwned(),
            e = GameGlobal.modelRole.voMine.level;
        (t != this._preCost.count || e != this._preRoleLv) && this.showOtherPage()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onUpdate(), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.curSelData = null, this.proxyer.removeTick(), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(Child_HuoBanJX.prototype, "Child_HuoBanJX");
var ItemHBJX = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ItemHBJXSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.$setAnchorOffsetX(33), this.$setAnchorOffsetY(33)
    }, e.prototype.setData = function (t) {
        this._data = t, t ? (this.iconNotJX.visible = !t.hasJueXing, this.iconLock.visible = !t.canbeJueXing() && !t.hasJueXing, this.imgNotice.visible = t.canbeJueXing(), this.icon.source = "petgift2_json." + t.cfg.icon) : (this.iconNotJX.visible = !0, this.iconLock.visible = !0)
    }, e.prototype.getData = function () {
        return this._data
    }, e.prototype.setSel = function (t) {
        this.iconSel.visible = t
    }, e.prototype.showEff = function () {
        EffectMgr.addEff("uieff/dzsuccess", this, 33, 33, 500, 500)
    }, e
}(eui.Component);
__reflect(ItemHBJX.prototype, "ItemHBJX");
var LineDrawer = function () {
    function t(t) {
        this.renderers = [], this.allTime = 200, this.startTime = 0, this.startPositions = [], this.diffPositions = [], this.lineDraw = t
    }
    return t.prototype.setRenerers = function (t) {
        this.renderers = t;
        for (var e = 0; e < this.renderers.length; e++) {
            var i = this.renderers[e];
            i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onItemSel, this)
        }
    }, Object.defineProperty(t.prototype, "source", {
        set: function (t) {
            for (var e = 0, i = t.length - 1; e < t.length; e++, i--) {
                var o = t[e],
                    n = this.renderers[e];
                n.setData(o), n.setSel(!1)
            }
        },
        enumerable: !0,
        configurable: !0
    }), t.prototype.setPositions = function (t, e) {
        this.purposePositions = t;
        for (var i = 0; i < this.renderers.length; i++) {
            var o = t[i],
                n = this.renderers[i],
                a = this.startPositions[i];
            a || (a = this.startPositions[i] = {}), a.x = n.x, a.y = n.y;
            var s = this.diffPositions[i];
            s || (s = this.diffPositions[i] = {}), s.x = o.x - a.x, s.y = o.y - a.y
        }
        this.startTime = egret.getTimer(), 1 == e ? this.addTick() : this.locatePos()
    }, t.prototype.addTick = function () {
        GameGlobal.tick.addInterv(this.onTick, 1, this)
    }, t.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick, this)
    }, t.prototype.onTick = function (t) {
        var e = (egret.getTimer() - t.startTime) / t.allTime;
        if (t.clearLines(), 1 > e)
            for (var i, o, n = 0; 7 > n; n++) {
                var a = t.startPositions[n],
                    s = t.diffPositions[n],
                    r = t.renderers[n],
                    l = r.getData();
                0 == n ? (o = {
                    x: a.x + s.x * e,
                    y: a.y + s.y * e
                }, t.moveTo(o)) : (t.moveTo(i), o = {
                    x: a.x + s.x * e,
                    y: a.y + s.y * e
                }, t.lineTo(o, l.hasJueXing || l.canbeJueXing())), i = o, r.$setX(o.x), r.$setY(o.y)
            } else t.locatePos()
    }, t.prototype.locatePos = function () {
        this.clearLines(), this.removeTick();
        for (var t, e, i = 0; 7 > i; i++) {
            var o = this.renderers[i],
                n = this.purposePositions[i],
                a = o.getData();
            0 == i ? (e = {
                x: n.x,
                y: n.y
            }, this.moveTo(e)) : (this.moveTo(t), e = {
                x: n.x,
                y: n.y
            }, this.lineTo(e, a.hasJueXing || a.canbeJueXing())), t = e, o.$setX(e.x), o.$setY(e.y)
        }
    }, t.prototype.clearLines = function () {
        this.lineDraw.graphics.clear()
    }, t.prototype.lineTo = function (t, e) {
        e ? this.lineDraw.graphics.lineStyle(10, 16770304) : this.lineDraw.graphics.lineStyle(10, 0), this.lineDraw.graphics.lineTo(t.x, t.y)
    }, t.prototype.moveTo = function (t) {
        this.lineDraw.graphics.lineStyle(10, 0), this.lineDraw.graphics.moveTo(t.x, t.y)
    }, t.prototype.setSel = function (t) {
        this._curRenderer && this._curRenderer.setSel(!1);
        for (var e = 0; e < this.renderers.length; e++) {
            var i = this.renderers[e],
                o = i.getData();
            if (o == t) {
                i.setSel(!0), this._curRenderer = i;
                break
            }
        }
    }, t.prototype.setItemSelEvent = function (t, e) {
        this.itemSelMethod = t, this.thisArg = e
    }, t.prototype.onItemSel = function (t) {
        var e = t.currentTarget;
        this.itemSelMethod.call(this.thisArg, e)
    }, t.prototype.getRendererById = function (t) {
        for (var e = 0; e < this.renderers.length; e++) {
            var i = this.renderers[e],
                o = i.getData();
            if (o.cfg.id == t) return i
        }
        return null
    }, t
}();
__reflect(LineDrawer.prototype, "LineDrawer");
var ViewHBJXTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.time_count = 0, e.skinName = "ViewHBJXTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.btnHand.label = "确定", this.addCloseListen(this.btnHand).addCloseListen(this.background), this.effContainer.scaleX = this.effContainer.scaleY = 2.5
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.cfg = e, this.time_count = 5, this.show(), this.addTick()
    }, e.prototype.addTick = function () {
        GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick, this)
    }, e.prototype.onTick = function (t) {
        t.btnHand.label = "确定(" + t.time_count-- + ")", t.time_count < 0 && t.closeHandler()
    }, e.prototype.show = function () {
        var t = this.cfg.yjzlzs;
        this.txtDescription.text = Lang.reTxt(this.cfg.ms, t), this.icon.source = this.cfg.src + "Light_png", this.icon.alpha = 0;
        var e = "uieff/" + this.cfg.src;
        EffectMgr.addEff(e, this.effContainer, 0, 0, 1200, 1200), egret.Tween.get(this.icon).to({
            alpha: 1
        }, 1e3)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeTick()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewHBJXTip.prototype, "ViewHBJXTip");
var VNewSkillTipBDJN = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "NewModTip", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.sure), this.skillgrid.visible = !0, this.skillgrid.tipGrp.visible = this.skillgrid.lbLv.visible = this.skillgrid.txtNm.visible = !1, this.skillgrid.imglv.visible = !1
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = e;
        this.skillgrid.data = i, this.lbText.text = "解锁技能", this.lbModName.text = i.name, this.closeSec = 6, this.updateTime(), GameGlobal.tick.addInterv(this.frame, 1, this), GameGlobal.tick.addInterv(this.tick, 1e3, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.frame), GameGlobal.tick.removeInterv(this.tick)
    }, e.prototype.tick = function (t) {
        t.closeSec -= 1, t.updateTime(), t.closeSec <= 0 && t.closeHandler()
    }, e.prototype.updateTime = function () {
        this.sure.label = this.closeSec + "秒后关闭"
    }, e.prototype.frame = function (t) {
        t.imgHightLine.rotation += 2
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VNewSkillTipBDJN.prototype, "VNewSkillTipBDJN");
var VoXSJueXing = function () {
    function t(t) {
        this.hasJueXing = !1, this.cfg = t
    }
    return t.prototype.getDescription = function () {
        return Lang.reTxt(this.cfg.ms, ColorSet(this.addValue, "#ff6000"))
    }, t.prototype.getCost = function () {
        return this.cost || (this.cost = ConfigHelp.makeVoList(this.cfg.xhid)[0]), this.cost
    }, t.prototype.canbeJueXing = function () {
        var t = this.getCost(),
            e = GameGlobal.modelBag.getItemCount(t.id);
        return !this.hasJueXing && this.unLockLv && e >= t.count && this.preHasJueXing() ? !0 : !1
    }, Object.defineProperty(t.prototype, "unLockLv", {
        get: function () {
            var t = this.unLockInfo,
                e = GameGlobal.modelRole.voMine.level;
            switch (parseInt(t.type)) {
                case 1:
                    return e >= parseInt(t.need)
            }
            return !1
        },
        enumerable: !0,
        configurable: !0
    }), t.prototype.preHasJueXing = function () {
        var e = this.cfg.id - 1;
        if (!CFG_HuobanJX.LIB1[e]) return !0;
        for (var i = t.map.getByKey(this.bindHbId), o = 0, n = i.length; n > o; o++) {
            var a = i[o];
            if (a.cfg.id == e && a.hasJueXing) return !0
        }
        return !1
    }, t.regJXId = function (t, e) {
        this.regHbJXIdMap[t] = e
    }, t.validJueXings = function () {
        this.hasInitLIb || (this.hasInitLIb = !0, this.initLib());
        for (var t in this.regHbJXIdMap) {
            var e = parseInt(t),
                i = this.regHbJXIdMap[t];
            this.validJueXing(e, i)
        }
        this.updateNotice()
    }, t.updateNotice = function () {
        0 == Object.keys(this.noticeMap).length && this.validJueXings();
        for (var t in this.noticeMap) this.singleHBNot(parseInt(t))
    }, t.singleHBNot = function (t) {
        var e = this.regHbJXIdMap[t];
        if (e > 0) this.validJueXing(t, e);
        else {
            var i = this.map.getByKey(t),
                o = i[0];
            this.noticeMap[t] = VoHuoban.isEnable(t) && o.canbeJueXing()
        }
    }, t.validJueXing = function (t, e) {
        var i = this.map.getByKey(t);
        if (i)
            for (var o, n = 0, a = i.length; a > n; n++) {
                var s = i[n];
                if (!(s.cfg.id <= e)) {
                    if (o = i[n], o.canbeJueXing()) {
                        this.noticeMap[t] = !0;
                        break
                    }
                    this.noticeMap[t] = !1;
                    break
                }
                s.hasJueXing = !0
            }
        this.noticeMap[t] = this.noticeMap[t] || this.jiHuoNotice(t)
    }, t.jiHuoNotice = function (e) {
        var i = this.getYinJiData(e),
            o = t.regHbJXIdMap[e],
            n = null;
        if (o > 0) {
            for (var a = 0; a < i.length; a++) {
                var s = i[a],
                    r = s.parm.split(",");
                if (r.indexOf(o.toString()) >= 0) {
                    n = s;
                    break
                }
            }
            if (n) {
                var l = n.parm.split(","),
                    h = parseInt(l.pop());
                return o == h ? t.hasActivedHB[e] < n.id : !1
            }
            return !1
        }
        return !1
    }, t.initLib = function () {
        var e = CFG_HuobanJX.LIB2,
            i = {};
        for (var o in e) {
            var n = e[o],
                a = n.xsid;
            this.noticeMap[a] = null;
            var s = n.parm,
                r = this.maxJXIds[a];
            r || (r = this.maxJXIds[a] = []), r.push({
                strInfo: s,
                fullData: n
            }), i[a] ? i[a] += "," + s : i[a] = s
        }
        e = CFG_HuobanJX.LIB1;
        GameGlobal.modelRole.voMine.level;
        for (var o in i)
            for (var l = o, h = i[o], c = h.split(","), p = 0; p < c.length; p++) {
                var u = c[p],
                    d = new t(e[u]);
                d.addValue = d.cfg.jxsz.split(",")[1], d.bindHbId = parseInt(l);
                var f = d.cfg.level,
                    g = f.split(",");
                d.unLockInfo = {
                    type: g[0],
                    need: g[1]
                }, this.map.getByKey(l) || this.map.add([], l), this.map.getByKey(l).push(d)
            }
    }, t.getDatas = function (t) {
        return this.map.getByKey(t)
    }, t.filterDatas = function (t, e) {
        for (var i = e.parm.split(","), o = [], n = 0; n < t.length; n++) {
            var a = t[n];
            this.suitable(a, i) && o.push(a)
        }
        return o
    }, t.suitable = function (t, e) {
        for (var i = 0; i < e.length; i++) {
            var o = parseInt(e[i]);
            if (o == t.cfg.id) return !0
        }
        return !1
    }, t.getYinJiData = function (t) {
        for (var e = (this.regHbJXIdMap[t], this.maxJXIds[t]), i = [], o = 0; o < e.length; o++) {
            var n = e[o],
                a = n.fullData;
            i.push(a)
        }
        return i
    }, t.noticeALL = function () {
        if (!CFG_COMMOND.isOpen(CFG_COMMOND.XSJX)) return !1;
        var t = !1;
        for (var e in this.noticeMap)
            if (t = this.noticeMap[e], !this.isFull(parseInt(e)) && t) break;
        return t
    }, t.isFull = function (t) {
        var e = this.regHbJXIdMap[t];
        if (e > 0) {
            var i = e + 1;
            return null == CFG_HuobanJX.LIB1[i]
        }
        return !1
    }, t.noticeJueXing = function (t) {
        return this.isFull(t) ? !1 : CFG_COMMOND.isOpen(CFG_COMMOND.XSJX) ? this.noticeMap[t] : !1
    }, t.map = new CommondMap, t.maxJXIds = {}, t.noticeMap = {}, t.hasActivedHB = {}, t.regHbJXIdMap = {}, t.hasInitLIb = !1, t
}();
__reflect(VoXSJueXing.prototype, "VoXSJueXing");
var Model_ShiLian = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.systemIDShowRadMap = {}, e
    }
    return __extends(e, t), e.prototype.hasAnyRedTip = function () {
        for (var t in this.systemIDShowRadMap)
            if (this.systemIDShowRadMap[t]) return !0;
        return !1
    }, e.prototype.isSysRed = function (t) {
        return (1 & this.systemIDShowRadMap[t]) > 0
    }, e.prototype.listenServ = function (t) {
        this.socket = t;
        var e = this;
        t.regHand(1322, e.GC1322, e)
    }, e.prototype.CG1321 = function () {
        var t = this.getBytes();
        this.sendSocket(1321, t)
    }, e.prototype.isRed = function (t) {
        var e = (1 & this.systemIDShowRadMap[t]) > 0;
        return e
    }, e.prototype.GC1322 = function (t, i) {
        var o = i.readShort();
        Util.clearKeys(t.systemIDShowRadMap);
        for (var n = 0; o > n; n++) {
            var a = i.readShort(),
                s = i.readByte();
            t.systemIDShowRadMap[a] = s
        }
        GameGlobal.modelShiLian.notify(e.MSG_UPDAT_ICON), GameGlobal.modelShiLian.notify(e.MSG_UPDAT_SYSTEM)
    }, e.prototype.getUIID = function (t) {
        switch (t) {
            case CFG_COMMOND.BOSS:
                return UIConst.BOSSPAGE;
            case CFG_COMMOND.JJC:
                return UIConst.VIEWJJC;
            case CFG_COMMOND.CAILIAOFB:
                return UIConst.VCLFB;
            case CFG_COMMOND.SUOYAOTA:
                return UIConst.VSYT;
            case CFG_COMMOND.ZDFB:
                return UIConst.ZDFBPAGE;
            case CFG_COMMOND.WDTD:
                return UIConst.WDTDPNL;
            case CFG_COMMOND.ZTFS:
                return UIConst.UIID_ZTFSPAGE;
            case CFG_COMMOND.CTG:
                return UIConst.VSYT;
            case CFG_COMMOND.XKSD:
                return UIConst.XKSDPNL;
            case CFG_COMMOND.F_WORLD:
                return UIConst.F_WORLD;
            default:
                return
        }
    }, e.MSG_UPDAT_ICON = "MSG_UPDAT_ICON", e.MSG_UPDAT_SYSTEM = "MSG_UPDAT_SYSTEM", e.TYPE_RED = 1, e.TYPE_DOUBLE = 2, e
}(BaseModel);
__reflect(Model_ShiLian.prototype, "Model_ShiLian");
var ModelJingJiChang = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(952, this.GC952, this), e.regHand(954, this.GC954, this), e.regHand(956, this.GC956, this), e.regHand(958, this.GC958, this), e.regHand(960, this.GC960, this), e.regHand(962, this.GC962, this), e.regHand(964, this.GC964, this), e.regHand(966, this.GC966, this), e.regHand(968, this.GC968, this)
    }, e.prototype.CG951 = function () {
        this.sendSocket(951, this.getBytes())
    }, e.prototype.GC952 = function (t, i) {
        for (var o = i.readShort(), n = i.readInt(), a = i.readByte(), s = i.readInt(), r = i.readByte(), l = i.readShort(), h = 0; l > h; h++) {
            var c = i.readByte(),
                p = i.readUTF();
            VoJJCRanker.update(c, p)
        }
        VoJJCRanker.onSort();
        var u = VoJingJiChang.getInst();
        u.minePaiMing = o, u.honor = n, u.leftCount = a, u.recoverTime = s, u.canBuyCount = r, t.notify(e.msg_data), t.notice()
    }, e.prototype.CG953 = function () {
        this.sendSocket(953, this.getBytes())
    }, e.prototype.GC954 = function (t, i) {
        0 == VoJJCStore.map.getLength() && VoJJCStore.init();
        var o = i.readShort();
        VoJJCStore.clearBuyTimes();
        for (var n = 0; o > n; n++) {
            var a = i.readShort(),
                s = i.readByte();
            VoJJCStore.update(a, s)
        }
        var r = i.readShort(),
            l = VoJingJiChang.getInst();
        l.highestPaiMing = r, t.notify(e.msg_data), t.notify(e.msg_store)
    }, e.prototype.CG955 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeLong(e), this.sendSocket(955, i)
    }, e.prototype.GC956 = function (t, e) {
        var i = e.readByte();
        1 != i && ViewText.text(["", "", "数据已刷新，请重新选择对手", "不能打自己", "没有挑战次数了", "上一场战斗未打完"][i])
    }, e.prototype.CG957 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeByte(e), this.sendSocket(957, i)
    }, e.prototype.GC958 = function (t, e) {
        var i = e.readByte();
        1 != i && (ViewText.text(["", "成功", "配置表没有该ID", "通关条件未达", "传入参数异常", "配置表异常", "超出购买上限", null, "荣誉值不够"][i]), GameGlobal.layerMgr.isOpenView(UIConst.JJCSTORETIPS) && GameGlobal.layerMgr.close(UIConst.JJCSTORETIPS), 7 == i && GameGlobal.modelBag.checkRLTips(0))
    }, e.prototype.CG959 = function () {
        this.sendSocket(959, this.getBytes())
    }, e.prototype.GC960 = function (t, i) {
        for (var o = i.readShort(), n = Util.getTempArr(), a = 0; o > a; a++) {
            var s = i.readUTF(),
                r = i.readLong();
            n.push([s, r])
        }
        var l = i.readShort(),
            h = VoJingJiChang.getInst();
        h.minePaiMing = l, t.notify(e.msg_paihang, n)
    }, e.prototype.CG961 = function () {
        this.sendSocket(961, this.getBytes())
    }, e.prototype.GC962 = function (t, i) {
        for (var o = i.readShort(), n = Util.getTempArr(), a = 0; o > a; a++) {
            var s = i.readByte(),
                r = i.readShort(),
                l = i.readByte(),
                h = i.readUTF(),
                c = i.readInt();
            n.push([s, r, l, h, c])
        }
        t.notify(e.msg_record, n)
    }, e.prototype.GC964 = function (t, i) {
        var o = i.readByte(),
            n = i.readShort(),
            a = i.readShort(),
            s = t.readAwards(i),
            r = VoJingJiChang.getInst(),
            l = Math.abs(n - r.minePaiMing);
        r.minePaiMing = n, a < r.highestPaiMing && (r.highestPaiMing = a), GameGlobal.layerMgr.open(UIConst.JJCAWARDTIPS, [o, s, l]), t.notify(e.msg_data), t.notify(e.msg_store)
    }, e.prototype.GC966 = function (t, e) {
        t.notice(!0)
    }, e.prototype.CG967 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(967, e)
    }, e.prototype.GC968 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = VoJingJiChang.getInst(),
                n = o.leftCount;
            ViewText.text("购买成功, 竞技场次数为" + (n + 1) + "!")
        }
    }, e.prototype.readAwards = function (t) {
        for (var e = t.readShort(), i = Util.getTempArr(), o = 0; e > o; o++) {
            var n, a = t.readShort(),
                s = t.readShort(),
                r = t.readShort();
            switch (a) {
                case 1:
                    n = VoItem.create(), n.init(s);
                    break;
                case 2:
                    n = VoEquip.create(), n.init(s);
                    break;
                default:
                    n = VoCurrency.create(), n.init(a)
            }
            n.count = r, i.push(n)
        }
        return i
    }, e.prototype.notice = function (t) {
        if (t) this.red = t;
        else {
            var i = VoJingJiChang.getInst();
            this.red = i.leftCount > 0
        }
        this.notify(e.msg_notice)
    }, e.msg_data = "msg_data", e.msg_store = "msg_data", e.msg_paihang = "msg_paihang", e.msg_record = "msg_record", e.msg_notice = "msg_notice", e
}(BaseModel);
__reflect(ModelJingJiChang.prototype, "ModelJingJiChang");
var ViewJJC = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.maxTiaoZhanCount = 5, e.childs = [], e.skinName = "ViewJJCSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "竞技场", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), DisplayUtil.popBtnStyle(this.txtAwardLink), DisplayUtil.popBtnStyle(this.btnPaiMing), DisplayUtil.popBtnStyle(this.btnRecord), DisplayUtil.popBtnStyle(this.btnStore), this.txtAwardLink.textFlow = HtmlUtil.underLine(this.txtAwardLink.text), this.txtAwardLink.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLink, this), this.btnPaiMing.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLink, this), this.btnRecord.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLink, this), this.btnStore.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLink, this), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHand.label = "购买次数";
        for (var e = 0; 5 > e; e++) {
            var i = this["itemjjc" + e];
            this.childs.push(i)
        }
        var o = "1. 竞技场每日22点结算每日排名，且邮件发放每日排名奖励；\n2. 在每周日的22点，同时会结算一次每周排名，且邮件发放每周排名奖励；\n3. 在每周日的24点，重置竞技场的所有排名信息。";
        this.base.createQuestTxt(o), this.base.createQuestBtn()
    }, e.prototype.onLink = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.txtAwardLink:
                GameGlobal.layerMgr.open(UIConst.JJCJIANGLI);
                break;
            case this.btnPaiMing:
                GameGlobal.layerMgr.open(UIConst.JJCPAIHANG);
                break;
            case this.btnRecord:
                GameGlobal.layerMgr.open(UIConst.JJCRECORD);
                break;
            case this.btnStore:
                GameGlobal.layerMgr.open(UIConst.JJCSTORE)
        }
    }, e.prototype.onHand = function () {
        var t = VoJingJiChang.getInst();
        if (t.canBuyCount <= 0) return void ViewText.text("今天竞技场的购买次数已经用完了!");
        var e = VoJingJiChang.buyCountCostYB,
            i = GameGlobal.modelRole.voMine.yuanbao;
        if (e > i) return void ViewText.htmlText("购买挑战次数需要花费<font color='#fe0000'>" + e + "元宝</font>，您的元宝不足!");
        var o = this.getNextVipAdd("jjc");
        if (null == o) var n = "确定花" + HtmlUtil.color(e + "元宝", "#fe0000") + "购买一次挑战次数?\n今日可购买次数: " + HtmlUtil.color(t.canBuyCount, "#fe0000");
        else n = Lang.reTxt("确定花<fontcolor='#fe0000'>{0}元宝</font>购买一次挑战次数?\n今日可购买次数:<font color='#fe0000'>{1}</font>\n达到VIP{2}可额外增加<font color='#10a244'>{3}次</font>\n\n<font color='#10a244'>快速获取资源可以比别人更快提升实力</font>", e, t.canBuyCount, o.vip, o.addCnt);
        ViewAlert.show(ColorSet(n, "#684c43"), function () {
            GameGlobal.modeljingjichang.CG967(1)
        })
    }, e.prototype.getNextVipAdd = function (t) {
        var e = VoVip.getFullVip();
        if (GameGlobal.modelRole.voMine.vip >= e) return null;
        var i = GameGlobal.modelRole.voMine.vip,
            o = Util.getTempObj(),
            n = VoVip.LIB[i][t];
        return function a(e) {
            return VoVip.LIB[e] ? VoVip.LIB[e][t] != n ? (o.addCnt = VoVip.LIB[e][t] - n, void(o.vip = e)) : void a(e + 1) : void(o = null)
        }(GameGlobal.modelRole.voMine.vip + 1), o
    }, e.prototype.addMsg = function () {
        GameGlobal.modeljingjichang.on(ModelJingJiChang.msg_data, this.onUpdate, this), GameGlobal.modeljingjichang.CG951()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modeljingjichang.off(ModelJingJiChang.msg_data, this.onUpdate, this)
    }, e.prototype.addTick = function () {
        GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.removeTick = function () {
        this.txtRecoverTime.text = "", GameGlobal.tick.removeInterv(this.onTick, this)
    }, e.prototype.onTick = function (t) {
        var e = VoJingJiChang.getInst();
        e.recoverTime--, t.txtRecoverTime.text = "恢复: " + DateUtil.getHMSBySecond2(e.recoverTime), e.recoverTime <= 0 && (GameGlobal.modeljingjichang.CG951(), t.removeTick())
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onUpdate = function () {
        var t = VoJingJiChang.getInst();
        this.txtHonor.text = t.honor + "", this.txtMingPM.text = t.minePaiMing + "";
        var e = VoJingJiChang.getAwardByPaiming(t.minePaiMing, !0);
        e ? this.parseAwards(e) : (this.txtAwardHonor.text = "0", this.txtYinLiang.text = "0"), this.txtLeftCount.text = "剩余挑战次数: " + t.leftCount, t.leftCount >= this.maxTiaoZhanCount || t.recoverTime <= 0 ? this.removeTick() : this.addTick();
        for (var i = VoJJCRanker.map.getList(), o = 0; o < i.length; o++) {
            var n = i[o],
                a = this.childs[o];
            a.data = n
        }
    }, e.prototype.parseAwards = function (t) {
        for (var e = 0; e < t.length; e++) {
            var i = t[e];
            2 > e && (this["iconAward" + (e + 1)].source = IconUtil.getIconUrl(i.icon)), 0 == e ? this.txtAwardHonor.text = ConfigHelp.getNumText(i.count) : 1 == e && (this.txtYinLiang.text = ConfigHelp.getNumText(i.count))
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), this.removeTick();
        for (var e = 0; e < this.childs.length; e++) {
            var i = this.childs[e];
            i.remove()
        }
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewJJC.prototype, "ViewJJC");
var VJJCStore = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "VJJCStoreSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "荣誉商店", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.base.createTabGroup(), this.base.addTab("荣誉商店", 0, 1), this.base.addTab("竞技福利", 1, 2), this.base.listenTabClick(this.onSel, this), this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemJJCStore, 0 == VoJJCStore.map.getLength() && VoJJCStore.init()
    }, e.prototype.onSel = function (t) {
        var e = t.sort;
        this.setSel(e)
    }, e.prototype.setSel = function (t) {
        switch (this._index) {
            case 0:
                break;
            case 1:
        }
        switch (t) {
            case 0:
                this.groupTmp.visible = !1;
                break;
            case 1:
                this.groupTmp.visible = !0
        }
        this.validateNow(), this._index = t, this.base.setTabSelBySort(t), t >= 0 && this.onUpdate()
    }, e.prototype.onUpdate = function () {
        var t = VoJingJiChang.getInst();
        this.txtHonor.text = t.honor + "", this.txtPaiming.text = t.highestPaiMing + "";
        var e = VoJJCStore.getProducts(this._index);
        this.sourceData.source = e
    }, e.prototype.addMsg = function () {
        GameGlobal.modeljingjichang.on(ModelJingJiChang.msg_data, this.onUpdate, this), GameGlobal.modeljingjichang.on(ModelJingJiChang.msg_store, this.onUpdate, this), GameGlobal.modeljingjichang.CG953(), GameGlobal.modeljingjichang.CG951()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modeljingjichang.off(ModelJingJiChang.msg_data, this.onUpdate, this), GameGlobal.modeljingjichang.off(ModelJingJiChang.msg_store, this.onUpdate, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), this.setSel(e || 0)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(VJJCStore.prototype, "VJJCStore");
var VShiLian = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/jingjiChang/VShiLianSkin.exml", e
    }
    return __extends(e, t), e.prototype.guideOpenType = function (t) {
        for (var e = 0, i = this.container.numChildren; i > e; e++) {
            var o = this.container.getChildAt(e);
            if (o && o._data.id == t) {
                QuestGuideArrow.getIns().guideTo(o, 300, 50);
                break
            }
        }
    }, e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.base.btnReturn, 30, 30)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.addCloseListen(e.base.btnClose), e.addCloseListen(e.base.btnReturn);
        for (var i = [CFG_COMMOND.CAILIAOFB, CFG_COMMOND.ZTFS, CFG_COMMOND.SUOYAOTA, CFG_COMMOND.CTG, CFG_COMMOND.WDTD, CFG_COMMOND.XKSD, CFG_COMMOND.F_WORLD], o = 0; o < i.length; o++) {
            var n = new Itm_JJC1;
            e.container.addChild(n);
            var a = {};
            a.id = i[o], a.level = CFG_COMMOND.getOpenLevel(i[o]), n.data = a
        }
        e.base.title = "试炼"
    }, e.prototype.onOpen = function (e) {
        var i = this;
        t.prototype.onOpen.call(this, e), i.onUpdate(), GameGlobal.modelShiLian.on(Model_ShiLian.MSG_UPDAT_SYSTEM, this.onUpdate, this), GameGlobal.modelZTFS.on(ModelZhuTianFengShen.msg_data, this.onUpdate, this), GameGlobal.modelShiLian.CG1321(), CFG_COMMOND.isOpen(CFG_COMMOND.ZTFS, !1) && GameGlobal.modelZTFS.CG3071()
    }, e.prototype.onClose = function () {
        GameGlobal.modelShiLian.off(Model_ShiLian.MSG_UPDAT_SYSTEM, this.onUpdate, this)
    }, e.prototype.onUpdate = function () {
        var t = this;
        t.container.$children.forEach(function (t) {
            t.render()
        }), t.allNotice()
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.updateItem = function (t, e) {
        for (var i = this.container.$children, o = i.length, n = 0; o > n; n++) {
            var a = i[n],
                s = a.data.id;
            if (this.isSuoYaoTa(s)) {
                if (t == CFG_COMMOND.FENGMOLU || t == CFG_COMMOND.SUOYAOTA || t == CFG_COMMOND.CTG) {
                    a.notice(e & this.justify(t, e));
                    break
                }
            } else if (t == s) {
                a.notice(e);
                break
            }
        }
    }, e.prototype.justify = function (t, e) {
        if (CFG_COMMOND.FENGMOLU == t) {
            var i = CFG_COMMOND.LIB[t].arg.openLv,
                o = VoSYTMonster.tongGuanLayer;
            return o >= i ? 255 : GameGlobal.modelShiLian.systemIDShowRadMap[CFG_COMMOND.SUOYAOTA] > 0 ? 255 : 0
        }
        return 255
    }, e.prototype.isSuoYaoTa = function (t) {
        return t == CFG_COMMOND.SUOYAOTA
    }, e.prototype.allNotice = function () {
        for (var t = this.container.$children, e = t.length, i = 0; e > i; i++) {
            var o = t[i];
            o.notice(0)
        }
        var n = GameGlobal.modelShiLian.systemIDShowRadMap;
        for (var a in n) {
            var s = parseInt(a),
                r = n[a];
            this.updateItem(s, r)
        }
    }, e.tryOpen = function (t, e) {
        void 0 === e && (e = null);
        var i = GameGlobal.layerMgr;
        i.isOpenView(UIConst.BOSSPAGE) || i.isOpenView(UIConst.VCLFB) || i.isOpenView(UIConst.VSYT) || i.isOpenView(UIConst.VIEWJJC) || i.isOpenView(UIConst.ZDFBPAGE) || i.isOpenView(UIConst.WDTDPNL) || i.isOpenView(UIConst.UIID_ZTFSPAGE) || i.isOpenView(UIConst.F_WORLD) || i.open(t, e)
    }, e
}(BaseEUIView);
__reflect(VShiLian.prototype, "VShiLian");
var ItemJJC = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ItemJJCSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.uirole = UIRole.create(), this.partContainer.addChild(this.uirole), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        var t = this,
            e = VoJingJiChang.getInst();
        if (e.leftCount <= 0) {
            var i = GameGlobal.modelRole.voMine.yuanbao,
                o = VoJingJiChang.buyCountCostYB;
            return void(e.canBuyCount > 0 && i >= o ? ViewAlert.show("今日挑战次数已用完，是否花<font color='#fe0000'>10元宝</font>购买挑战次数?", function () {
                GameGlobal.modeljingjichang.CG967(1)
            }) : ViewText.text("今日挑战次数已经用完, 无法进行竞技场挑战!"))
        }
        ModelBattle.canEnterBtl() && GameGlobal.modeljingjichang.CG955(t.data.position, t.data.detailInfo.hid)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtPaiming.text = "排名: " + t.paiming;
            var e, i, o, n, a = t.detailInfo.hid,
                s = 0;
            if (1e3 >= a) e = CFG_JJC1.LIB[a].mx, n = CFG_JJC1.LIB[a].bq, this.txtName.text = CFG_JJC1.LIB[a].n, this.txtZhanli.text = "战力: " + CFG_JJC1.LIB[a].ce, s = CFG_JJC1.LIB[a].ce;
            else {
                this.txtName.text = t.detailInfo.hname, this.txtZhanli.text = "战力: " + t.detailInfo.str;
                var r = t.detailInfo.fashionID;
                e = r > 0 ? r : t.detailInfo.hjob, i = t.detailInfo.rideId, o = t.detailInfo.wingId, n = t.detailInfo.sbId, s = t.detailInfo.str
            }
            this.uirole.setBody(e), this.uirole.setHorse(i), this.uirole.setWing(o), this.uirole.setWeapon(n), this.uirole.validParts(), this.uirole.setVal(3), this.uirole.play();
            var l = !1;
            5 == t.position && GameGlobal.modelRole.voMine.str >= s + 1e4 && (l = !0), this.iconMiaoSha.visible = l
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.remove = function () {
        this.uirole.stop()
    }, e
}(eui.Component);
__reflect(ItemJJC.prototype, "ItemJJC");
var ItemJJCJiangli = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.tarMap = {}, e.colors = ["", "#FF0000", "#FF9900", "#FF00FF", "#037c9ff", "#00FF00"], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemJJCJiangliSkin"
    }, e.prototype.childrenCreated = function () {
        this.itemGrid.enableTip(), this.award1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.award2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.award1:
                this.tarMap[0] && GameGlobal.layerMgr.open(UIConst.ITEMTIP, this.tarMap[0]);
                break;
            case this.award2:
                this.tarMap[1] && GameGlobal.layerMgr.open(UIConst.ITEMTIP, this.tarMap[1])
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = VJJCJiangli,
                i = t.id;
            if (20 >= i) 6 > i ? this.txtPaiming.textFlow = HtmlUtil.parse("第" + HtmlUtil.color(i, this.colors[i]) + "名") : this.txtPaiming.text = "第" + i + "名";
            else {
                var o = t.pm.split(",");
                this.txtPaiming.text = o[0] + "~" + o[1]
            }
            var n, a, s = ConfigHelp.makeVoList(1 == e._curSel ? t.mzjl : t.mrjl);
            for (var r in this.tarMap) delete this.tarMap[r];
            for (var l = 0; l < s.length; l++) {
                var h = s[l];
                if (2 > l) {
                    var c = this["award" + (l + 1)];
                    c.source = IconUtil.getIconUrl(h.icon), 1 == h.type && (this.tarMap[l] = h)
                }
                0 == l ? this.txtHonor.text = "X" + ConfigHelp.getNumText(h.count) : 1 == l ? (a = !0, this.txtYinLiang.text = "X" + ConfigHelp.getNumText(h.count)) : (n = !0, this.itemGrid.setData(h))
            }
            a ? DisplayUtil.addBy(this.groupMid, this.awardGrp, 2) : DisplayUtil.remove(this.groupMid), n ? DisplayUtil.addBy(this.itemGrid, this.awardGrp) : DisplayUtil.remove(this.itemGrid)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        set: function (t) {
            0 == (1 & t) ? this.bg.source = "JJCAtlas_json.bg9" : this.bg.source = "JJCAtlas_json.bg10"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemJJCJiangli.prototype, "ItemJJCJiangli");
var ItemJJCPaiHang = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemJJCPaiHangSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtName.text = t[0].toString(), this.txtZhanli.text = t[1].toString();
            var e = this.itemIndex + 1;
            if (10 > e) DisplayUtil.remove(this.img2), this.img1.source = "JJCAtlas_json." + e;
            else {
                DisplayUtil.addBy(this.img2, this.container);
                var i = parseInt(e.toString().charAt(0)),
                    o = parseInt(e.toString().charAt(1)),
                    n = this.getSource(i);
                this.img1.source = n, n = this.getSource(o), this.img2.source = n
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.getSource = function (t) {
        return t > 3 ? "JJCAtlas_json." + t : 0 == t ? "JJCAtlas_json.0" : "JJCAtlas_json.0" + t
    }, Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.backGround.source = "JJCAtlas_json.bg9" : this.backGround.source = "JJCAtlas_json.bg10"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemJJCPaiHang.prototype, "ItemJJCPaiHang");
var ItemJJCRecord = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemJJCRecordSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t[0],
                i = t[1],
                o = t[2],
                n = t[3],
                a = t[4];
            this.iconSucFail.source = 1 == e ? "JJCAtlas2_json.suc" : "JJCAtlas2_json.fail", i > 0 ? (this.txtNoChange.text = "", this.iconUpDown.source = "JJCAtlas_json.upA", this.txtRiseNum.text = i + "") : 0 > i ? (this.txtNoChange.text = "", this.iconUpDown.source = "JJCAtlas_json.downA", this.txtRiseNum.text = i + "") : (this.txtNoChange.text = "排名不变", this.iconUpDown.source = null, this.txtRiseNum.text = ""), 1 == o ? this.txtTiaoZhanInfo.textFlow = HtmlUtil.parse(HtmlUtil.color("你", "#10a244") + "挑战了" + HtmlUtil.color(n, "#b85e0e")) : this.txtTiaoZhanInfo.textFlow = HtmlUtil.parse(HtmlUtil.color(n, "#b85e0e") + "挑战了" + HtmlUtil.color("你", "#10a244")), this.txtTime.text = Util.parseTime1(1e3 * a)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        set: function (t) {
            0 == (1 & t) ? this.backGround.source = "JJCAtlas_json.bg9" : this.backGround.source = "JJCAtlas_json.bg10"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemJJCRecord.prototype, "ItemJJCRecord");
var CFG_ATTR = function () {
    function t() {}
    return t.cuculateArrScore = function (t) {
        if (!t) return 0;
        for (var e = 0, i = 0, o = t.length; o > i; i += 2) {
            var n = t[i],
                a = t[i + 1],
                s = this.LIB[n].xishu;
            e += a * s / 1e3 >> 0
        }
        return 6 * e
    }, t.openBySrc = function (t) {
        if (!t) return !1;
        if (t.act && !GameGlobal.modelAct.findActAny(t.act, GameGlobal.modelAct.actData)) return ViewText.text(t.txt + "未到活动时间，敬请期待"), !1;
        if (t.sysid && !CFG_COMMOND.canDo(t.sysid)) return !1;
        var e = GameGlobal.layerMgr;
        if ("0" != t.ope) {
            var i = t.ope.split(",");
            if ("1" == i[0] && CFG_COMMOND.isOpenByCFG(i[1], !0) && this.mpBatViewJudge(i[1])) {
                var o = parseInt(i[2]);
                if (1e3 > o || CFG_COMMOND.isOpenByCFG(i[2], !0)) return o >= 0 ? e.open(i[1], o) : e.open(i[1], i[2]), VCaiLiaoHuoQu.openTJCB && (VCaiLiaoHuoQu.openTJCB.apply(VCaiLiaoHuoQu.closeCBCaller), VCaiLiaoHuoQu.openTJCB = null), !0
            }
            return !1
        }
        return "0" == t.ope ? !1 : void 0
    }, t.mpBatViewJudge = function (t) {
        var e = parseInt(t);
        return 1080 == e ? GameGlobal.modelRole.voMine.menpaiId > 0 ? !0 : (ViewText.text("您还没有门派，不能进入门派战!"), !1) : !0
    }, t
}();
__reflect(CFG_ATTR.prototype, "CFG_ATTR");
var Itm_JJC1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.DES = ["可获得大量经验、橙色装备、橙装碎片", "可获得大量银两、荣誉值", "可获得银两、宝石、灵兽经验丹等培养道具", "可获得灵兽经验丹、洗髓丹、珍兽石", "可获得装备、橙装碎片等", "可获得大量经验、银两，高级灵兽兽决等", "可获得红装图纸、红装合成材料、经验等", "可获得蓝色魂石，紫色魂石", "可获得SSR仙神玄冥.魂、大量银两", "可获得珍兽进阶石、神兽进阶石、突境丹、元宝等", "可获得玉砂、圣莲子等"], e.URLS = ["SLAtlas_json.bossWord", "SLAtlas_json.jjcWord", "SLAtlas_json.clFB", "SLAtlas_json.suoyaota", "SLAtlas_json.bridge", "SLAtlas_json.teamFB", "SLAtlas_json.wdtdFB", "SLAtlas_json.ztfsWord", "SLAtlas_json.ctg", "SLAtlas_json.xksdWord", "fWorld_json.24_EntryText"], e.backgroundUrl = ["bossBg_png", "jjcBg_png", "clFBbg_png", "suoyaotaBg_png", "gridge2_png", "teamFBBg_png", "wdtdFBBg_png", "ztfsBg_png", "ctgBg_png", "xksdBg_png", "fWorld_json.24_EntryBg"], e.skinName = "Itm_JJC1Skin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        var e = this;
        e.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onT, e), e.imgExt.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onExtT, e), this.bg0.width = 630
    }, e.prototype.onT = function (t) {
        if (t.target != this.imgExt) {
            var e = this,
                i = GameGlobal.modelShiLian.getUIID(e.data.id);
            if (i)
                if (console.log(e.data.id), e.data.id == CFG_COMMOND.CTG) CFG_COMMOND.isOpen(e.data.id, !0) && GameGlobal.layerMgr.open(i, 1);
                else if (e.data.id == CFG_COMMOND.XKSD) {
                if (CFG_COMMOND.isOpen(e.data.id, !0)) {
                    var o = VoZhuTianFengShen.getInst().mineTongGuanCount,
                        n = CFG_COMMOND.LIB[CFG_COMMOND.XKSD].arg.openLv;
                    o >= n ? GameGlobal.layerMgr.open(i) : ViewText.text("诸天封神达到" + n + "层开启")
                }
            } else CFG_COMMOND.isOpen(e.data.id, !0) && GameGlobal.layerMgr.open(i);
            else ViewText.text("该系统未开启")
        }
    }, e.prototype.onExtT = function () {
        var t = this,
            e = GameGlobal.modelShiLian.getUIID(t.data.id);
        if (e && CFG_COMMOND.isOpen(t.data.id, !0)) switch (parseInt(t.data.id)) {
            case CFG_COMMOND.ZDFB:
                GameGlobal.layerMgr.open(UIConst.STORE, Enum_shangChengType.ZHENXI)
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            var e = this;
            this._data = t, e.render()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.render = function () {
        var t = this;
        t.imgExt.visible = !1, this.imgDoubleTipsExml.visible = !1, this.imgRedTipsExml.visible = !1;
        var e = GameGlobal.modelRole.voMine.level;
        switch (parseInt(t.data.id)) {
            case CFG_COMMOND.BOSS:
                e < t.data.level ? t.txtUnLockLv.text = "开放等级: " + t.data.level : t.txtUnLockLv.text = "", t.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.color(t.DES[0], Color.WH_STR)), t.bg.source = t.URLS[0], t.bg0.source = t.backgroundUrl[0];
                break;
            case CFG_COMMOND.JJC:
                e < t.data.level ? t.txtUnLockLv.text = "开放等级: " + t.data.level : t.txtUnLockLv.text = "", t.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.color(t.DES[1], Color.WH_STR)), t.bg.source = t.URLS[1], t.bg0.source = t.backgroundUrl[1];
                break;
            case CFG_COMMOND.CAILIAOFB:
                e < t.data.level ? t.txtUnLockLv.text = "开放等级: " + t.data.level : t.txtUnLockLv.text = "", t.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.color(t.DES[2], Color.WH_STR)), t.bg.source = t.URLS[2], t.bg0.source = t.backgroundUrl[2];
                break;
            case CFG_COMMOND.SUOYAOTA:
                e < t.data.level ? t.txtUnLockLv.text = "开放等级: " + t.data.level : t.txtUnLockLv.text = "", t.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.color(t.DES[3], Color.WH_STR)), t.bg.source = t.URLS[3], t.bg0.source = t.backgroundUrl[3];
                break;
            case CFG_COMMOND.ZDFB:
                e < t.data.level ? t.txtUnLockLv.text = "开放等级: " + t.data.level : t.txtUnLockLv.text = "", t.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.color(t.DES[5], Color.WH_STR)), t.bg.source = t.URLS[5], t.bg0.source = t.backgroundUrl[5], t.imgExt.visible = !0;
                break;
            case CFG_COMMOND.WDTD:
                e < t.data.level ? t.txtUnLockLv.text = "开放等级: " + t.data.level : t.txtUnLockLv.text = "", t.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.color(t.DES[6], Color.WH_STR)), t.bg.source = t.URLS[6], t.bg0.source = t.backgroundUrl[6];
                break;
            case CFG_COMMOND.ZTFS:
                e < t.data.level ? t.txtUnLockLv.text = "开放等级: " + t.data.level : t.txtUnLockLv.text = "", t.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.color(t.DES[7], Color.WH_STR)), t.bg.source = t.URLS[7], t.bg0.source = t.backgroundUrl[7];
                break;
            case CFG_COMMOND.CTG:
                e < t.data.level ? t.txtUnLockLv.text = "开放等级: " + t.data.level : t.txtUnLockLv.text = "", t.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.color(t.DES[8], Color.WH_STR)), t.bg.source = t.URLS[8], t.bg0.source = t.backgroundUrl[8];
                break;
            case CFG_COMMOND.XKSD:
                e < t.data.level ? t.txtUnLockLv.text = "开放等级: " + t.data.level : t.txtUnLockLv.text = "", t.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.color(t.DES[9], Color.WH_STR)), t.bg.source = t.URLS[9], t.bg0.source = t.backgroundUrl[9];
                break;
            case CFG_COMMOND.F_WORLD:
                e < t.data.level ? t.txtUnLockLv.text = "开放等级: " + t.data.level : t.txtUnLockLv.text = "", t.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.color(t.DES[10], Color.WH_STR)), t.bg.source = t.URLS[10], t.bg0.source = t.backgroundUrl[10]
        }
    }, e.prototype.notice = function (t) {
        switch (t) {
            case 0:
                this.imgRedTipsExml.visible = !1, this.imgDoubleTipsExml.visible = !1;
                break;
            case 1:
                this.imgRedTipsExml.visible = !0, this.imgDoubleTipsExml.visible = !1;
                break;
            case 2:
                this.imgRedTipsExml.visible = !1, this.imgDoubleTipsExml.visible = !0
        }
    }, e
}(eui.Component);
__reflect(Itm_JJC1.prototype, "Itm_JJC1");
var VJJCAwardTips = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "VJJCAwardTipsSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.addCloseListen(this.bg), this.addCloseListen(this.btnHand), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.btnHand.label = "确定"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.data = e, this.onUpdate()
    }, e.prototype.onUpdate = function () {
        var t = VoJingJiChang.getInst();
        this.txtHighestPM.text = t.highestPaiMing + "", this.txtPaiming.text = t.minePaiMing + "";
        var e = this.data[0],
            i = this.data[1],
            o = this.data[2];
        1 == e ? this.iconSucOrFail.source = "fight_json.bm_win" : this.iconSucOrFail.source = "fight_json.bm_lose", o > 0 ? (this.txtRise.text = o + "", this.iconRise.visible = !0) : (this.txtRise.text = "", this.iconRise.visible = !1), ConfigHelp.makeVoGrids(i, this.grids, 0, 0, this.container, !0)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VJJCAwardTips.prototype, "VJJCAwardTips");
var VJJCJiangli = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "VJJCJiangliSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemJJCJiangli, this.showJiangli(), this.itemGrid.enableTip(), this.tab1.label = "每日奖励", this.tab2.label = "每周奖励", this.tab1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSel, this), this.tab2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSel, this)
    }, e.prototype.onSel = function (t) {
        var e = t.currentTarget;
        this.setSel(e == this.tab1 ? 0 : 1)
    }, e.prototype.setSel = function (t) {
        var i = e;
        switch (i._curSel) {
            case 0:
                this.tab1.selected = !1;
                break;
            case 1:
                this.tab2.selected = !1
        }
        switch (t) {
            case 0:
                this.tab1.selected = !0;
                break;
            case 1:
                this.tab2.selected = !0
        }
        i._curSel = t, this.refresh(), this.showMine()
    }, e.prototype.showJiangli = function () {
        var t = CFG_JJC2.LIB,
            e = [];
        for (var i in t) {
            var o = t[i];
            e.push(o)
        }
        this.sourceData.source = e
    }, e.prototype.refresh = function () {
        this.sourceData.refresh()
    }, e.prototype.addMsg = function () {
        GameGlobal.modeljingjichang.on(ModelJingJiChang.msg_data, this.showMine, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modeljingjichang.off(ModelJingJiChang.msg_data, this.showMine, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setSel(0), this.showMine(), this.addMsg()
    }, e.prototype.showMine = function () {
        var t = VoJingJiChang.getInst();
        this.txtMinePM.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color(t.minePaiMing + "名", "#10a244"));
        for (var e = VoJingJiChang.getAwardByPaiming(t.minePaiMing), i = !1, o = !1, n = 0; n < e.length; n++) {
            var a = e[n];
            2 > n && (this["award" + (n + 1)].source = IconUtil.getIconUrl(a.icon)), 0 == n ? this.txtHonor.text = "X" + ConfigHelp.getNumText(a.count) : 1 == n ? (o = !0, this.txtYinliang.text = "X" + ConfigHelp.getNumText(a.count)) : (i = !0, this.itemGrid.setData(a))
        }
        o ? DisplayUtil.addBy(this.groupMid, this.awGroup, 2) : DisplayUtil.remove(this.groupMid), this.showItem(i)
    }, e.prototype.showItem = function (t) {
        t = t && 0 == e._curSel, t ? DisplayUtil.addBy(this.itemGrid, this.awGroup) : DisplayUtil.remove(this.itemGrid)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VJJCJiangli.prototype, "VJJCJiangli");
var VJJCPaiHang = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "VJJCPaiHangSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemJJCPaiHang
    }, e.prototype.addMsg = function () {
        GameGlobal.modeljingjichang.on(ModelJingJiChang.msg_paihang, this.onUpdate, this), GameGlobal.modeljingjichang.CG959()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modeljingjichang.off(ModelJingJiChang.msg_paihang, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        var e = VoJingJiChang.getInst();
        e.minePaiMing > 0 ? this.txtMine.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color(e.minePaiMing, "#10a244")) : this.txtMine.text = "我的排名: 不上榜", this.sourceData.source = t.concat()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VJJCPaiHang.prototype, "VJJCPaiHang");
var VJJCRecord = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "VJJCRecordSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemJJCRecord
    }, e.prototype.addMsg = function () {
        GameGlobal.modeljingjichang.on(ModelJingJiChang.msg_record, this.onUpdate, this), GameGlobal.modeljingjichang.CG961()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modeljingjichang.off(ModelJingJiChang.msg_record, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        this.sourceData.source = t.concat()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VJJCRecord.prototype, "VJJCRecord");
var VJJCStoreBuyTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VJJCStoreBuyTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.bg), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), DisplayUtil.popBtnStyle(this.btnSure), DisplayUtil.popBtnStyle(this.btnAdd), DisplayUtil.popBtnStyle(this.btnMinus), this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnMinus.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnAd10.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnMinus10.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnGive.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGive, this), this.btnMinus10.label = "-10", this.btnAd10.label = "+10", this.btnSure.label = "购买", this.btnGive.label = "赠送", this.listdata = new eui.ArrayCollection, this.friendlist.itemRenderer = VQiXiFriendItem, this.friendlist.dataProvider = this.listdata, this.friendlist.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.listTouchT, this), this.lbselname.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSelnameT, this)
    }, e.prototype.onSelnameT = function () {
        this.lbselname.text = ""
    }, e.prototype.listTouchT = function (t) {
        var e = t.item;
        e ? (this.lbselname.visible = !0, this.lbselname.textFlow = HtmlUtil.underLine(e.name + " X")) : this.lbselname.visible = !1, this.friGrp.visible = !1
    }, e.prototype.onGive = function () {
        var t = this.friGrp;
        if (t.visible) t.visible = !1;
        else {
            var e = this.friendlist.selectedItem;
            if (e && "" != this.lbselname.text) {
                var i = parseInt(this.txtCount.text);
                return GameGlobal.modelShangCheng.CG911(e.id, this.data.cfg.id, i), void this.successgive()
            }
            GameGlobal.modelFriend.CG_FriendData(1), t.visible = !0, t.alpha = 0, t.anchorOffsetY = -t.height / 2, egret.Tween.get(t).to({
                anchorOffsetY: 0,
                alpha: 1
            }, 300)
        }
    }, e.prototype.onHand = function () {
        if (this.data instanceof VoShangCheng) {
            var t = this.data;
            if (1218 == t.itemID || 1219 == t.itemID || 1220 == t.itemID) return
        }
        var e = parseInt(this.txtCount.text);
        if (e > 0) {
            var i = this.getOwnCount(),
                o = this.data.getPrice() * e;
            if (i >= o) this.data.onBuy(e);
            else {
                var n = ConfigHelp.makeVoList(this.data.getCost())[0];
                this.isXYDStore() ? GameGlobal.layerMgr.open(UIConst.CAILIAOGET, n.id) : ViewText.text(n.name + "不足")
            }
            this.closeHandler()
        } else ViewText.text("请输入大于0的数量!")
    }, e.prototype.onChange = function (t) {
        var e = t.currentTarget,
            i = this.curCount;
        switch (e) {
            case this.btnAdd:
                i++;
                break;
            case this.btnAd10:
                i += 10;
                break;
            case this.btnMinus:
                i--;
                break;
            case this.btnMinus10:
                i -= 10
        }
        i = Math.max(1, i), this.curCount = Math.min(this.maxCount, i), this.onUpdate()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.friendlist.selectedIndex = -1, this.lbselname.text = "", this.friGrp.visible = this.lbselname.visible = !1, this.isFlower(e), this.data = e;
        var i = e.getLimit();
        if (i > 0 ? this.maxCount = i : this.maxCount = 100, this.data instanceof VoShangCheng) {
            var o = this.data;
            (1218 == o.itemID || 1219 == o.itemID || 1220 == o.itemID) && (this.maxCount = 1)
        }
        this.dealOpen(), this.curCount = 1, this.onUpdate(), GameGlobal.modelFriend.on(ModelFriend.MSG_FLIST, this.updateFriend, this), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_give, this.successgive, this)
    }, e.prototype.isFlower = function (t) {
        if (!(t instanceof VoShangCheng)) return void DisplayUtil.remove(this.btnGive);
        var e = t;
        1218 == e.itemID || 1219 == e.itemID || 1220 == e.itemID ? (DisplayUtil.addBy(this.btnGive, this.btnGrp), DisplayUtil.remove(this.btnSure)) : (DisplayUtil.addBy(this.btnSure, this.btnGrp), DisplayUtil.remove(this.btnGive))
    }, e.prototype.onUpdate = function () {
        var t = this.curCount,
            e = this.data.getPrice(),
            i = t * e >> 0,
            o = this.getOwnCount();
        this.isXYDStore ? i > o ? (this.txtCostPrice.textColor = 16646144, this.btnSure.label = "道具获取") : (this.txtCostPrice.textColor = 2786310, this.btnSure.label = "购买") : (this.btnSure.label = "购买", i > o ? this.txtCostPrice.textColor = 16646144 : this.txtCostPrice.textColor = 2786310), this.txtCostPrice.text = i + "", this.txtCount.text = t + ""
    }, e.prototype.dealOpen = function () {
        var t = this.data,
            e = ConfigHelp.makeVoList(t.getCost())[0],
            i = ConfigHelp.makeVoList(t.getOnSellData())[0];
        this.onSellItem.data = i, this.txtName.text = i.name, this.txtDescription.text = i.des, this.iconCost.source = IconUtil.getIconUrl(e.icon)
    }, e.prototype.getOwnCount = function () {
        var t, e = ConfigHelp.makeVoList(this.data.getCost())[0],
            i = e.type;
        switch (i) {
            case 1:
                t = GameGlobal.modelBag.getItemCount(e.id);
                break;
            case 2:
                t = GameGlobal.modelBag.getEquipCount(e.id);
                break;
            case 31:
                t = GameGlobal.modelRole.voMine.yinliang;
                break;
            case 32:
                t = GameGlobal.modelRole.voMine.bYuanbao;
                break;
            case 33:
                t = GameGlobal.modelRole.voMine.yuanbao;
                break;
            case 35:
                t = VoJingJiChang.getInst().honor;
                break;
            case 36:
                t = GameGlobal.modelRole.voMine.xiayi;
                break;
            case 38:
                t = VoMember.mineGX
        }
        return t
    }, e.prototype.isXYDStore = function () {
        var t = ConfigHelp.makeVoList(this.data.getCost())[0];
        return 36 == t.type ? !0 : 1 == t.type && 1033 == t.id ? !0 : 1 == t.type && 1101 == t.id ? !0 : !1
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), egret.Tween.removeTweens(this.friGrp), GameGlobal.modelFriend.off(ModelFriend.MSG_FLIST, this.updateFriend, this), GameGlobal.modelShangCheng.off(ModelShangCheng.msg_give, this.successgive, this)
    }, e.prototype.successgive = function () {
        this.friendlist.selectedIndex = -1, this.lbselname.text = ""
    }, e.prototype.updateFriend = function () {
        for (var t = [], e = GameGlobal.modelFriend.friendList, i = 0; i < e.length; i++) {
            var o = e[i];
            1 == o.friendSt && t.push(o)
        }
        this.lbtipfri.visible = 0 == t.length, DisplayUtil.fillDataAC(this.listdata, t)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VJJCStoreBuyTip.prototype, "VJJCStoreBuyTip");
var VoJingJiChang = function () {
    function t() {}
    return t.getInst = function () {
        return this._inst || (this._inst = new t)
    }, t.getAwardByPaiming = function (t, e) {
        void 0 === e && (e = !1);
        var i = CFG_JJC2.LIB;
        for (var o in i) {
            var n = i[o],
                a = n.pm.split(","),
                s = a[0],
                r = a[1];
            if (t >= s && r >= t) {
                if (e) var l = ConfigHelp.makeVoList(n.mrjl);
                else l = ConfigHelp.makeVoList(0 == VJJCJiangli._curSel ? n.mrjl : n.mzjl);
                return l
            }
        }
        return null
    }, t.buyCountCostYB = 10, t
}();
__reflect(VoJingJiChang.prototype, "VoJingJiChang");
var VoJJCRanker = function () {
    function t() {
        this.detailInfo = new RInfo
    }
    return t.update = function (e, i) {
        var o = this.map.getByKey(e);
        o || (o = new t, o.position = e, this.map.add(o, e));
        var n = JSON.parse(i);
        o.detailInfo.update(n), o.paiming = n[455]
    }, t.onSort = function () {
        var t = this.map.getList();
        t.sort(this.sort)
    }, t.sort = function (t, e) {
        return t.position - e.position
    }, t.map = new CommondMap, t
}();
__reflect(VoJJCRanker.prototype, "VoJJCRanker");
var VoJJCStore = function () {
    function t() {}
    return t.prototype.getLimit = function () {
        var t = this.cfg.dayxg,
            e = this.cfg.fxg;
        return t + e
    }, t.prototype.getPrice = function () {
        return this.cfg.ryz
    }, t.prototype.getCost = function () {
        var t = 35,
            e = this.cfg.ryz;
        return t + ",0" + e
    }, t.prototype.conditionNotFit = function () {
        var t = this.cfg.tiaojian,
            e = VoJingJiChang.getInst();
        return t > 0 && e.minePaiMing > t ? (1 == t ? ViewText.htmlText("竞技场排名" + HtmlUtil.color("第" + t + "名", "#58FF21") + "解锁该物品的购买权限") : ViewText.htmlText("竞技场排名到" + HtmlUtil.color("前" + t + "名", "#58FF21") + "解锁该物品的购买权限"), !0) : !1
    }, t.prototype.conditionDisplay = function (t) {
        var e = this.cfg.tiaojian;
        if (e > 0) {
            var i = VoJingJiChang.getInst();
            i.minePaiMing <= e ? t.textColor = 27922 : t.textColor = 15532032, 1 == e ? t.text = "排名第1名解锁" : t.text = "排名前" + e + "名解锁"
        } else t.text = ""
    }, t.prototype.priceNotEnough = function () {
        var t = VoJingJiChang.getInst();
        return t.honor < this.cfg.ryz ? (ViewText.text("荣誉值不够"), !0) : !1
    }, t.prototype.getOnSellData = function () {
        return this.cfg.mrjl
    }, t.prototype.onBuy = function (t) {
        GameGlobal.modeljingjichang.CG957(this.cfg.id, t)
    }, t.init = function () {
        if (!(this.map.getLength() > 0)) {
            var e = CFG_JJC3.LIB;
            for (var i in e) {
                var o = e[i],
                    n = o.id.toString().charAt(0),
                    a = new t;
                a.cfg = o, a.boughtNum = 0;
                var s = this.map.getByKey(n);
                s || (this.map.add([], n), s = this.map.getByKey(n)), s.push(a)
            }
        }
    }, t.clearBuyTimes = function () {
        var t = this.map.getMap();
        for (var e in t)
            for (var i = t[e], o = 0, n = i.length; n > o; o++) i[o].boughtNum = 0
    }, t.update = function (e, i) {
        var o = e.toString().charAt(0),
            n = t.findInKey(o, e);
        n && (n.boughtNum = i)
    }, t.findInKey = function (t, e) {
        for (var i = this.map.getByKey(t), o = i.length, n = 0; o > n; n++) {
            var a = i[n];
            a.cfg.id;
            if (a.cfg.id == e) return a
        }
        return null
    }, t.getProducts = function (t) {
        var e = t + 1,
            i = this.map.getByKey(e);
        return i
    }, t.map = new CommondMap, t
}();
__reflect(VoJJCStore.prototype, "VoJJCStore", ["IVoStore"]);
var Child_expGift = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "Child_expGiftSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnTz.visible = !1, this.uirole = UIRole.create(), this.partContainer.addChild(this.uirole)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (e) {
            t.prototype.onData.call(this), this._data = e, this.uirole.setBody(e.job), this.uirole.setHorse(e.horse), this.uirole.setWing(e.wing), this.uirole.setWeapon(e.shenbing), this.uirole.setVal(3), this.uirole.validParts(), this.txtName.text = e.name, this.txtLevel.text = "Lv." + e.level
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.uirole && this.uirole.play()
    }, e.prototype.onRemove = function () {
        t.prototype.onRemove.call(this), this.uirole && this.uirole.stop()
    }, e
}(ItemBase);
__reflect(Child_expGift.prototype, "Child_expGift");
var ModelExpGift = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.notice = !1, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(2612, this.GC2612, this), e.regHand(2614, this.GC2614, this), e.regHand(2616, this.GC2616, this)
    }, e.prototype.CG2611 = function () {
        this.sendSocket(2611, this.getBytes())
    }, e.prototype.GC2612 = function (t, i) {
        VoExpGift.list.length = 0;
        for (var o = i.readShort(), n = i.readShort(), a = i.readShort(), s = i.readShort(), r = 0; s > r; r++) {
            var l = i.readUTF(),
                h = i.readShort(),
                c = i.readInt(),
                p = i.readInt(),
                u = i.readInt(),
                d = i.readByte();
            VoExpGift.add(l, h, c, p, u, d)
        }
        var f = i.readByte(),
            g = i.readByte();
        VoExpGift.highestLevel = o, VoExpGift.mineLevel = n, VoExpGift.gotState = f, VoExpGift.status = g, VoExpGift.time = a, t.notify(e.msg_data)
    }, e.prototype.CG2613 = function () {
        this.sendSocket(2613, this.getBytes())
    }, e.prototype.GC2614 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte();
            VoExpGift.gotState = n;
            var a = GameGlobal.layerMgr.getView(UIConst.EXPGIFT);
            a && a.updateState(), t.notice = !1, t.notify(e.msg_notice)
        } else ViewText.text("领取失败")
    }, e.prototype.GC2616 = function (t, i) {
        var o = i.readByte();
        t.notice = 1 == o, 1 == o ? VHuoDongEntry.addHD(1064) : VHuoDongEntry.removeHD(1064), t.notify(e.msg_notice)
    }, e.msg_data = "msg_data", e.msg_notice = "msg_notice", e
}(BaseModel);
__reflect(ModelExpGift.prototype, "ModelExpGift");
var VExpGift = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.positions = [235, 355, 72, 110, 410, 110], e.childs = [], e.instroduce = "1.每天领取福利时间:<font color='#10a244'>12:00-13:59,18:00-19:59,21:00-22:59</font>每个时间段可领取一次;\n2.当等级在世界等级相差<font color='#10a244'>3级</font>以内,即成为大佬，每次领取<font color='#10a244'>66元宝</font>;\n3.未成为大佬的玩家可通过膜拜大佬获得经验福利；", e.skinName = "VExpGiftSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "经验大放送", DisplayUtil.popBtnStyle(this.btnHand), DisplayUtil.popBtnStyle(this.btnLittleHelp), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.base.createQuestBtn(), this.base.btnQuest.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHelp, this), this.btnLittleHelp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHelp, this), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.imgText = new ImageText, this.imgText.container = this.timeList, this.imgText.charFunc = ImageText.EXPTIMECOUNT
    }, e.prototype.onHelp = function () {
        GameGlobal.layerMgr.open(UIConst.STRINGTIP, this.instroduce)
    }, e.prototype.onHand = function () {
        var t = VoExpGift.gotState,
            e = VoExpGift.status;
        return 0 == e ? void ViewText.text("还没到活动时间") : 1 == t ? void ViewText.text("您已经膜拜过了") : void GameGlobal.modelExpGift.CG2613()
    }, e.prototype.addchild = function (t) {
        var e = this.positions[2 * t],
            i = this.positions[2 * t + 1],
            o = new Child_expGift;
        return this.childs.push(o), o.$setX(e), o.$setY(i), this.childContainer.addChild(o), o
    }, e.prototype.addTick = function () {
        GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onTick = function (t) {
        VoExpGift.time--;
        var e = Math.max(VoExpGift.time, 0),
            i = DateUtil.getHMSBySecond2(e);
        t.imgText.setText(i), 0 >= e && t.removeTick()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelExpGift.on(ModelExpGift.msg_data, this.onUpdate, this), GameGlobal.modelExpGift.CG2611()
    }, e.prototype.onUpdate = function () {
        this.txtHighestLv.textFlow = HtmlUtil.parse("世界等级:" + HtmlUtil.color(VoExpGift.highestLevel, "#10a244")), this.txtMineLv.textFlow = HtmlUtil.parse("您的等级:" + HtmlUtil.color(VoExpGift.mineLevel, "#10a244")), this.updateState();
        for (var t = 0; 3 > t; t++) {
            var e = this.childs[t];
            e || (e = this.addchild(t));
            var i = VoExpGift.list[t];
            e.data = i
        }
        var o, n = GameGlobal.modelRole.voMine.level,
            a = VoExpGift.highestLevel;
        3 >= a - n ? (o = new VoCurrency, o.init(33), o.count = 66) : o = ConfigHelp.makeVoList(CFG_HUODONG.LIB5[n].exp)[0], this.grid.data = o, ModelWeekender.time > 0 ? (this.weekgrid.data = o, this.weekgrid.showTagGrp(), DisplayUtil.addBy(this.weekGrp, this.gridGrp)) : DisplayUtil.remove(this.weekGrp)
    }, e.prototype.updateState = function () {
        var t = VoExpGift.status;
        switch (this.btnLittleHelp.visible = !1, t) {
            case 0:
                this.btnLittleHelp.visible = !0, this.imgIcon.source = "ExpGiftAtlas_json.timeBg", this.addTick();
                var e = DateUtil.getHMSBySecond2(VoExpGift.time);
                this.imgText.setText(e);
                break;
            case 1:
                this.imgIcon.source = "ExpGiftAtlas_json.activeTime", this.removeTick(), e = "12:00-13:59", this.imgText.setText(e);
                break;
            case 2:
                this.imgIcon.source = "ExpGiftAtlas_json.activeTime", this.removeTick(), e = "18:00-19:59", this.imgText.setText(e);
                break;
            case 3:
                this.imgIcon.source = "ExpGiftAtlas_json.activeTime", this.removeTick(), e = "21:00-22:59", this.imgText.setText(e)
        }
        0 == VoExpGift.gotState && 0 != VoExpGift.status ? (this.imgNotice.visible = GameGlobal.modelExpGift.notice, this.btnBg.source = "ExpGiftAtlas_json.btn", this.btnLabel.textColor = 11023619) : (this.imgNotice.visible = !1, this.btnBg.source = "CM1_json.disabled", this.btnLabel.textColor = 16777215)
    }, e.prototype.offChilds = function () {
        for (; this.childs.length > 0;) {
            var t = this.childs.pop();
            t.parent && t.parent.removeChild(t)
        }
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelExpGift.off(ModelExpGift.msg_data, this.onUpdate, this), this.removeTick(), this.offChilds()
    }, e
}(BaseEUIView);
__reflect(VExpGift.prototype, "VExpGift");
var VoExpGift = function () {
    function t() {}
    return t.add = function (e, i, o, n, a, s) {
        var r = new t;
        r.name = e, r.level = i, r.horse = o, r.shenbing = n, r.wing = a, r.job = s, t.list.push(r)
    }, t.list = [], t
}();
__reflect(VoExpGift.prototype, "VoExpGift");
var LoadingView = function (t) {
    function e() {
        var e = t.call(this) || this,
            i = .5 * GameGlobal.stage.stageWidth,
            o = .5 * GameGlobal.stage.stageHeight;
        return e.bg = new egret.Bitmap(RES.getRes("Bm_Back2_jpg")), e.bg.anchorOffsetX = .5 * e.bg.width, e.bg.anchorOffsetY = .5 * e.bg.height, e.bg.x = i, e.bg.y = o, e.barFrame = new egret.Bitmap(RES.getRes("Bm_LoadingDi_png")), e.barFrame.anchorOffsetY = .5 * e.barFrame.height, e.barFrame.x = i - .5 * e.barFrame.width, e.barFrame.y = o + 330, e.bar = new egret.Bitmap(RES.getRes("Bm_LoadingLv_png")), e.bar.anchorOffsetY = .5 * e.bar.height, e.bar.x = i - .5 * e.bar.width, e.bar.y = o + 330, e.tips = new egret.TextField, e.tips.width = 500, e.tips.anchorOffsetY = .5 * e.tips.height, e.tips.x = i - .5 * e.tips.width, e.tips.y = o + 360, e.tips.fontFamily = "Microsoft YaHei", e.tips.textColor = 16775128, e.tips.size = 30, e.tips.stroke = 2, e.tips.textAlign = "center", e.tips.text = "游戏初始化中...", e.addChild(e.bg), e.addChild(e.barFrame), e.addChild(e.bar), e.addChild(e.tips), e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.adapterView(), this.setScheduleBar(0)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e)
    }, e.prototype.onClose = function () {
        this.stopBarEffect()
    }, e.prototype.onSize = function () {
        this.adapterView()
    }, e.prototype.setSchedule = function (t, e, i) {
        void 0 === e && (e = null), void 0 === i && (i = 0), null != e && this.setTips(e), 0 == i ? (this.stopBarEffect(), this.setScheduleBar(t)) : this.playBarEffect(t, i)
    }, e.prototype.getCurPercent = function () {
        return 100 * this.bar.scaleX
    }, e.prototype.setScheduleBar = function (t) {
        var e = t / 100;
        this.bar.scaleX = e
    }, e.prototype.setTips = function (t) {
        this.tips.text = t
    }, e.prototype.adapterView = function () {
        this.fullStage();
        var t = GameGlobal.stage.stageHeight / this.bg.height;
        t > 1 && (this.bg.scaleX = this.bg.scaleY = t)
    }, e.prototype.playBarEffect = function (t, e) {
        this.stopBarEffect(), egret.Tween.get(this.bar).to({
            scaleX: t / 100
        }, e)
    }, e.prototype.stopBarEffect = function () {
        egret.Tween.removeTweens(this.bar)
    }, e
}(BaseEUIView);
__reflect(LoadingView.prototype, "LoadingView");
var ViewLoading = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.argList = [], e.initView(), e
    }
    return __extends(e, t), e.prototype.getIndex = function (t) {
        for (var e = 0, i = this.argList.length; i > e; e++)
            if (this.argList[e].id == t) return e;
        return -1
    }, e.showLoading = function (t) {
        GameGlobal.layerMgr.open(UIConst.LOADING, t)
    }, e.hideLoading = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.LOADING);
        e && e.hideLoading(t)
    }, e.prototype.initView = function () {
        this.lbtext = new eui.Label, this.lbtext.text = "LOADING", this.lbtext.textColor = 14540253, this.lbtext.stroke = 1, this.lbtext.bold = !0, this.lbtext.horizontalCenter = 0, this.lbtext.verticalCenter = 0, this.addChild(this.lbtext), this.isInit = !0
    }, e.prototype.onSize = function () {
        var t = GameGlobal.stage;
        this.width = t.stageWidth, this.height = t.stageHeight, this.drawBG(-1, -1, 0, 0, .7)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.argList.push(e), this.showNext()
    }, e.prototype.hideLoading = function (t) {
        var e = this.getIndex(t.id); - 1 != e && (this.argList.splice(e, 1), 0 == this.argList.length ? this.closeHandler() : this.showNext())
    }, e.prototype.onClose = function () {}, e.prototype.showNext = function () {
        return this.argList.length ? void(this.lbtext.text = "正在加载" + String(this.argList[0].label) + "..") : void this.closeHandler()
    }, e
}(BaseEUIView);
__reflect(ViewLoading.prototype, "ViewLoading");
var CFG_Bag = function () {
    function t() {}
    return t.getCost = function (t, e) {
        for (var i = 0, o = 1; e >= o; o++) {
            var n = this.LIB[t + o];
            n && (i += n.p)
        }
        return i
    }, t
}();
__reflect(CFG_Bag.prototype, "CFG_Bag");
var hexcase = 0,
    b64pad = "",
    chrsz = 8,
    ModelLogin = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.haveRole = !1, e.lastServTime = 0, e.lastServTimeDt = 0, e.lastRecordTime = Number.MAX_VALUE, e.checkingOffLine = !1, e
        }
        return __extends(e, t), e.prototype.login = function (t) {
            this.regLoginArg = t, this.loginArg = t;
            var e = JSON.stringify(t),
                i = this.getBytes();
            i.writeUTF(e), this.sendSocket(101, i), VdatasWatcher.parseDatas2()
        }, e.prototype.createRole = function (t, e, i) {
            var o = this.getBytes();
            o.writeByte(t), o.writeUTF(e), o.writeByte(i), this.sendSocket(105, o)
        }, e.prototype.listenServ = function (t) {
            this.socket = t, t.regHand(e.GC_READY, this.onDataReady, this), t.regHand(102, this.onLoginStart, this), t.regHand(104, this.onPerpareDataFinish, this), t.regHand(106, this.onRoleCreated, this), t.regHand(108, this.onPerpareData, this), t.regHand(136, this.GC_ORDERFORMNUMBER, this), t.regHand(152, this.GC_GETSIGN, this), t.regHand(252, this.GC_SERVTIME, this), GameGlobal.tick.addInterv(this.onCheckOFFLine, 2e3, this)
        }, e.prototype.onLoginStart = function (t, i) {
            var o = i.readByte();
            t.haveRole = 1 == o, t.notify(e.MSG_LOGINSUCCESS)
        }, e.prototype.onRoleCreated = function (t, i) {
            var o = i.readByte();
            i.readByte(), i.readByte();
            1 == o ? t.notify(e.MSG_ROLECREATED) : 2 == o ? ViewText.text("名字重复") : 3 == o && ViewText.text("名字非法"), t.isCreateARole = !0
        }, e.prototype.onDataReady = function (t, i) {
            t.notify(e.MSG_READY)
        }, e.prototype.requestPerpareData = function () {
            var t = this.getBytes();
            this.sendSocket(103, t)
        }, e.prototype.onPerpareData = function (t, e) {
            GameGlobal.modelRole.initMineVo();
            var i = GameGlobal.modelRole.voMine;
            i.id = e.readLong(), i.name = e.readUTF(), i.level = e.readShort(), i.exp = e.readLong(), i.job = e.readByte(), i.yuanbao = e.readLong(), i.bYuanbao = e.readLong(), i.yinliang = e.readLong(), i.xiayi = e.readInt();
            var o = i.job;
            0 != GameGlobal.modelFashion.curHHId && (o = ModelFashion.getIcon(GameGlobal.modelFashion.curHHId)), i.sceneChars[0].setBody(o), i.sceneChars[0].id = i.id, t.notify(ModelRole.MSG_BASEROLEINFO)
        }, e.prototype.onPerpareDataFinish = function (t, i) {
            t.notify(e.MSG_PERPAREDATAED)
        }, e.prototype.GC_ORDERFORMNUMBER = function (t, e) {
            var i = e.readByte(),
                o = e.readUTF(),
                n = JSON.parse(o);
            1 == i && platform.recharge(n), console.log("tradeRest:" + i + " info:" + o)
        }, e.prototype.CG_GETSIGN = function (t) {
            var e = this.getBytes();
            e.writeByte(t), this.sendSocket(151, e)
        }, e.prototype.GC_GETSIGN = function (t, e) {
            var i = e.readByte(),
                o = e.readUTF(),
                n = JSON.parse(o);
            1 == i ? MyPlatform.getIns()._uploadCreateRole(n) : 2 == i ? MyPlatform.getIns()._uploadOnlineTime(n) : 3 == i ? MyPlatform.getIns()._uploadLevelUp(n) : 4 == i && MyPlatform.getIns()._uploadLoginRecord(n)
        }, e.prototype.resetRecord = function () {
            this.lastRecordTime = egret.getTimer()
        }, e.prototype.getSerTime = function () {
            var t = egret.getTimer(),
                e = this.lastServTime + (t - this.lastServTimeDt);
            return 0 > e && (e = 0), e
        }, e.prototype.GC_SERVTIME = function (t, e) {
            t.lastServTime = e.readLong(), t.lastServTimeDt = egret.getTimer(), t.resetRecord()
        }, e.prototype.onCheckOFFLine = function (t) {
            if (GameGlobal.modelSetting.isGMOpen) {
                var e = egret.getTimer() - t.lastRecordTime;
                e >= 3e4 && GameGlobal.layerMgr.open(UIConst.RECONNECT)
            }
        }, e.GC_READY = 10, e.MSG_LOGINSUCCESS = "ls", e.MSG_READY = "rd", e.MSG_SERVSELETED = "ss", e.MSG_SELSERVCOMP = "scomp", e.MSG_ROLECREATED = "MSG_ROLECREATED", e.MSG_PERPAREDATAED = "MSG_PERPAREDATAED", e
    }(BaseModel);
__reflect(ModelLogin.prototype, "ModelLogin");
var MyPlatform = function () {
    function t() {
        this.isIOS() ? window.parent.checkSignError = function (t) {
            ViewText.text(String(t))
        } : window.checkSignError = function (t) {
            ViewText.text(String(t))
        }
    }
    return t.prototype.isAndroid = function () {
        return 1 == GameGlobal.loginArg.platform
    }, t.prototype.isIOS = function () {
        return 2 == GameGlobal.loginArg.platform
    }, t.getIns = function () {
        return this.plantform || (this.plantform = new t), this.plantform
    }, t.prototype.uploadLevelUp = function (t) {
        this.isAndroid() && GameGlobal.modelLogin.CG_GETSIGN(3), this.isIOS() && GameGlobal.modelLogin.CG_GETSIGN(3)
    }, t.prototype._uploadLevelUp = function (t) {}, t.prototype._uploadLoginRecord = function (t) {}, t.prototype.uploadCreateRole = function () {
        console.log("上传创建角色CG"), GameGlobal.modelLogin.CG_GETSIGN(1)
    }, t.prototype._uploadCreateRole = function (t) {
        var e, i = GameGlobal.loginArg,
            o = t.time,
            n = hex_md5(o + "675HTE0#0xnagCY5yJ"),
            a = i.pf,
            s = i.pd;
        e = AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_WAN ? "http://wyiw-ground.xcwlxcwl.cn/fsqy/api/createRole?" + ("sign=" + n + "&time=" + o + "&role_id=" + t.role_id + "&openid=" + i.openid + "&curpf=" + a + "&curpd=" + s) : "https://fsqy-ground.xcwlxcwl.cn/fsqy/api/createRole?" + ("sign=" + n + "&time=" + o + "&role_id=" + t.role_id + "&openid=" + i.openid + "&curpf=" + a + "&curpd=" + s), Util.getInstance().httpRequestAsync(e, egret.HttpResponseType.TEXT, egret.HttpMethod.POST)
    }, t.prototype.uploadOnlineTime = function () {
        this.isAndroid() && GameGlobal.modelLogin.CG_GETSIGN(2), this.isIOS() && GameGlobal.modelLogin.CG_GETSIGN(2)
    }, t.prototype._uploadOnlineTime = function (t) {}, t
}();
__reflect(MyPlatform.prototype, "MyPlatform");
var VChangeAccount = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ChangeAccount", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose).addCloseListen(this.btnReturn), this.btnAcc.label = "修改账号", this.btnToCustom.label = "去掉调试", this.btnAcc.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAccT, this), this.btnToCustom.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCusT, this), this.cbOpenGM.text = "开启GM", this.cbOpenGM.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOpenGmT, this), this.btnInvite.label = "修改邀请者", this.btnInvite.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChangeInvite, this)
    }, e.prototype.onOpen = function (t) {
        this.lbInput.text = GameGlobal.loginArg.account
    }, e.prototype.onClose = function () {}, e.prototype.onAccT = function () {
        var t = this.lbInput.text;
        t && ViewAlert.show(Lang.reTxt("是否将账号修改为[{0}]?", t), function () {
            GameGlobal.loginArg.account = t, egret.localStorage.setItem("wxAccount", t)
        })
    }, e.prototype.onCusT = function () {
        ViewAlert.show("是否确定取消调试状态?", function () {
            GameGlobal.testVerObj = null
        })
    }, e.prototype.onOpenGmT = function () {
        GameGlobal.modelSetting.setGMVis(!GameGlobal.modelSetting.isGMOpen), this.cbOpenGM.selected = GameGlobal.modelSetting.isGMOpen
    }, e.prototype.onChangeInvite = function () {
        var t = this;
        ViewAlert.show("邀请者ID将修改为" + t.lbInvite.text, function () {
            e.inviter = t.lbInvite.text
        })
    }, e
}(BaseEUIView);
__reflect(VChangeAccount.prototype, "VChangeAccount");
var ViewBGText = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isInit = !0, e.init2(), e
    }
    return __extends(e, t), e.prototype.init2 = function () {
        this.bg = new egret.Shape, this.bg.graphics.beginFill(0, .5), this.bg.graphics.drawRect(0, 0, 300, 80), this.bg.graphics.endFill(), this.lb = new eui.Label, this.lb.width = 300, this.lb.height = 80, this.lb.textAlign = "center", this.lb.verticalAlign = "middle", this.addChild(this.bg), this.addChild(this.lb)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.lb.text = Lang.reTxt(e, 15)
    }, e.prototype.onSize = function () {
        this.bg.x = GameGlobal.stage.stageWidth - 300 >> 1, this.bg.y = GameGlobal.stage.stageHeight - 80 >> 1, this.lb.x = this.bg.x, this.lb.y = this.bg.y, this.drawBG(-1, -1, 0, 0, 0)
    }, e
}(BaseEUIView);
__reflect(ViewBGText.prototype, "ViewBGText");
var ViewOffLinePnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isInit = !0, e.init2(), e
    }
    return __extends(e, t), e.prototype.init2 = function () {
        var t = this;
        t.bg = new eui.Rect, t.bg.fillColor = 0, t.bg.alpha = .4, t.bg.left = t.bg.right = t.bg.top = t.bg.bottom = 0, t.addChild(t.bg), t.label = new eui.Label, t.label.horizontalCenter = -100, t.label.verticalCenter = 0, t.label.textAlign = "center", t.label.textColor = Color.UIRED, t.label.width = 400, t.label.text = "掉线了", t.addChild(t.label), t.btnok = new EasyButton, t.btnok.skinName = "EasyButton_1Skin", t.btnok.horizontalCenter = 0, t.btnok.verticalCenter = 0, t.btnok.label = "重新链接", t.addChild(t.btnok), t.btnok.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOk, this)
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i), GameGlobal.modelLogin.checkingOffLine = !1, this.openTime = egret.getTimer(), 0 == e.offLineTime && (e.offLineTime = egret.getTimer())
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), e.offLineTime = 0
    }, e.prototype.onSize = function () {
        var t = GameGlobal.stage;
        this.width = t.stageWidth, this.height = t.stageHeight
    }, e.prototype.onOk = function () {
        if (GameGlobal.socketMgr.webSocket.connected) return this.closeHandler(), void(this.connecting = !1);
        if (!this.connecting) {
            if (egret.getTimer() - e.offLineTime >= 6e5) return void window.location.reload();
            var t = GameGlobal.loginArg.ip,
                i = GameGlobal.loginArg.port,
                o = this;
            this.connecting = !0, GameGlobal.modelLogin.resetRecord(), GameGlobal.socketMgr.webSocket.connected || (GameGlobal.socketMgr.connect(t, i), GameGlobal.socketMgr.connectCallBack = function () {
                o.login()
            }, GameGlobal.socketMgr.errorCallBack = function () {
                ViewText.text("未能链接服务器"), o.connecting = !1
            })
        }
    }, e.prototype.login = function () {
        var t = GameGlobal.loginArg;
        GameGlobal.socketMgr.clear(), GameGlobal.modelLogin.login({
            sysState: String(t.platform ? t.platform : 1),
            account: t.account,
            zoneid: String(t.zoneid)
        }), this.connecting = !1, GameGlobal.modelLogin.once(ModelLogin.MSG_PERPAREDATAED, this.onPerpareDataed, this), GameGlobal.modelLogin.requestPerpareData()
    }, e.prototype.onPerpareDataed = function () {
        this.closeHandler(), GameGlobal.modelGuanqia.onReconnect();
        var t = GameGlobal.modelGuanqia.getCurSceneID();
        GameGlobal.mapScene.changeMap(t)
    }, e.offLineTime = 0, e
}(BaseEUIView);
__reflect(ViewOffLinePnl.prototype, "ViewOffLinePnl");
var VLoginGongGao = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.openType = 0, e.skinName = "LoginGongGao", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnReturn)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.openType = e, this.load()
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.load = function () {
        if (this.openType == e.GG) var t = "https://hjcs-cdnres.shangshiwl.com/HuanJieChuanShuoWXTest/login/gongGao.txt?rnd=" + Math.random();
        else var t = "https://hjcs-cdnres.shangshiwl.com/HuanJieChuanShuoWXTest/login/weiHuText.txt?rnd=" + Math.random();
        RES.getResByUrl(t, this.onLoaded, this, RES.ResourceItem.TYPE_TEXT)
    }, e.prototype.onLoaded = function (t, e) {
        t ? this.lbNotic.text = t : this.stage && egret.setTimeout(this.load, this, 5e3)
    }, e.GG = 0, e.WH = 1, e
}(BaseEUIView);
__reflect(VLoginGongGao.prototype, "VLoginGongGao");
var VLoginLoading = function (t) {
    function e() {
        var e = t.call(this) || this;
        e._perc = 100;
        var i = e.bg = new eui.Image("localRes/login/loadingwx.jpg");
        e.addChild(i);
        var o = new eui.Image("localRes/login/BmLoadingDi.png");
        o.x = 54, o.bottom = 232, e.addChild(o);
        var n = new eui.Image("localRes/login/BmLoadingDi.png");
        n.x = 54, n.bottom = 146, e.addChild(n), e.imgCurProg = new eui.Image("localRes/login/BmLoadingHong.png"), e.imgCurProg.x = 104, e.imgCurProg.bottom = 237, e.addChild(e.imgCurProg), e.imgTotalProg = new eui.Image("localRes/login/BmLoadingLv.png"), e.imgTotalProg.x = 104, e.imgTotalProg.bottom = 151, e.addChild(e.imgTotalProg);
        var a = new eui.Image("localRes/login/loadingImg.png");
        a.right = 30, a.bottom = 280, e.addChild(a), e.lbCur = new eui.Label, e.lbCur.horizontalCenter = 0, e.lbCur.bottom = 265, e.lbCur.$setTextColor(16777215), e.lbCur.stroke = 2, e.lbCur.strokeColor = 0, e.addChild(e.lbCur);
        var s = new eui.Label;
        return s.size = 22, s.bottom = 25, s.horizontalCenter = 0, s.lineSpacing = 5, s.textColor = 11184810, s.strokeColor = 4796672, s.stroke = 1, s.text = "抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。\n适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。", e.addChild(s), e.isInit = !0, e
    }
    return __extends(e, t), e.prototype.initView = function () {}, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addEventListener(egret.Event.ENTER_FRAME, this.onFrame, this)
    }, e.prototype.onClose = function () {
        this.removeEventListener(egret.Event.ENTER_FRAME, this.onFrame, this)
    }, e.prototype.showLoginPro = function (t, e) {
        this.imgCurProg.$setWidth(508 * e / 100), this.lbCur.$setText(t)
    }, e.prototype.onFrame = function () {
        var t = this._perc + 5;
        t > 100 && (t = 0), this._perc = t, this.imgTotalProg.$setWidth(508 * t / 100)
    }, e.showLoginPro = function (t, i) {
        GameGlobal.layerMgr.dynamicReg(UIConst.LOGINLOADING, e, GameGlobal.layerMgr.UI_Message), GameGlobal.layerMgr.isOpenView(UIConst.LOGINLOADING) || GameGlobal.layerMgr.open(UIConst.LOGINLOADING);
        var o = GameGlobal.layerMgr.getView(UIConst.LOGINLOADING);
        o.showLoginPro(t, i)
    }, e.prototype.onSize = function () {
        this.fullStage();
        var t = 700,
            e = 1350,
            i = GameGlobal.stage,
            o = Math.max(i.stageWidth / t, i.stageHeight / e);
        this.bg.x = i.stageWidth - t * o >> 1, this.bg.scaleX = this.bg.scaleY = o
    }, e
}(BaseEUIView);
__reflect(VLoginLoading.prototype, "VLoginLoading");
var VLoginMainView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "LoginMainSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        DisplayUtil.popBtnStyle(this.btnEnter), DisplayUtil.popBtnStyle(this.btnGG), this.btnEnter.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onEnterT, this), this.btnEnter.touchChildren = !1, this.btnGG.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnGGT, this), this.btnSelServ.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onServT, this), this.bgg0.scale9Grid = new egret.Rectangle(0, 30, 0, 30), this.bgg2.scale9Grid = new egret.Rectangle(40, 40, 20, 20)
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), this.update(), window.wx) this.httpRequest();
        else {
            var i = GameGlobal.resRoot + "resource/loginServer/mainServUrl.json?" + Math.random();
            RES.getResByUrl(i, this.onMainServLoaded, this, RES.ResourceItem.TYPE_JSON)
        }
        GameGlobal.modelLogin.on(ModelLogin.MSG_SERVSELETED, this.onSevItemSel, this)
    }, e.prototype.httpRequest = function () {
        var t, e = this,
            i = GameGlobal.loginArg;
        if (GameGlobal.testVerObj && GameGlobal.testVerObj.mainServUrl) {
            var t = GameGlobal.testVerObj.mainServUrl + "?rnd=" + Math.random();
            RES.getResByUrl(t, function (t) {
                e.onMainServLoaded(t)
            }, e, RES.ResourceItem.TYPE_JSON)
        } else t = "https://jxwqwx-ground.shangshi666.com/api/server/stateMaxNew?cmd=101&key=373dfdcb8de1422ffe65221a0de6f1ca&randnum=532633&openid=" + i.account, console.log("requestMainServUrl:" + t), Util.httpRequest(t, egret.HttpResponseType.TEXT, egret.HttpMethod.POST, e, function (t) {
            console.log("requestMainServUrlRet:" + t.target.response);
            var i = JSON.parse(t.target.response);
            e.onMainServLoaded(i)
        }, function () {
            console.log("requestMainServUrl:Error"), egret.setTimeout(e.httpRequest, e, 1e4)
        })
    }, e.prototype.onClose = function () {
        GameGlobal.modelLogin.off(ModelLogin.MSG_SERVSELETED, this.onSevItemSel, this)
    }, e.prototype.onSevItemSel = function () {
        this.update()
    }, e.prototype.onMainServLoaded = function (t) {
        return "string" == typeof t && (t = JSON.parse(t)), GameGlobal.first_login_game || !t.last && t.maxNew ? (GameGlobal.modelLogin.curSelServItem = t.maxNew, void this.onEnterT()) : (t.maxNew ? t.maxNew.alias && (this.lbNewServ.text = t.maxNew.alias) : this.lbNewServ.text = this.lbCurServ.text = "数据异常", void(GameGlobal.modelLogin.curSelServItem || (GameGlobal.modelLogin.curSelServItem = t.last, this.update())))
    }, e.prototype.update = function () {
        var t = GameGlobal.modelLogin;
        t.curSelServItem ? this.lbCurServ.textFlow = HtmlUtil.parse(t.curSelServItem.alias + VLoginServItem.getServItemStateText(t.curSelServItem, !0)) : this.lbCurServ.text = this.lbNewServ.text = "等待数据.."
    }, e.prototype.onEnterT = function () {
        var t = GameGlobal.modelLogin.curSelServItem;
        return 2 == t.state ? void GameGlobal.layerMgr.open(UIConst.LOGINGG, VLoginGongGao.WH) : (this.closeHandler(), GameGlobal.loginArg.ip = t.ip, GameGlobal.loginArg.port = t.port, GameGlobal.loginArg.zoneid = t.zoneid, GameGlobal.loginArg.ver = t.v, void GameGlobal.modelLogin.notify(ModelLogin.MSG_SELSERVCOMP))
    }, e.prototype.onBtnGGT = function () {
        var t = GameGlobal.testVerObj && GameGlobal.testVerObj.allowChangeAccount;
        t && (GameGlobal.layerMgr.dynamicReg(UIConst.CHANGEACCOUNT, VChangeAccount, GameGlobal.layerMgr.UI_Main), GameGlobal.layerMgr.open(UIConst.CHANGEACCOUNT)), GameGlobal.layerMgr.open(UIConst.LOGINGG, VLoginGongGao.GG)
    }, e.prototype.onServT = function () {
        GameGlobal.layerMgr.open(UIConst.SERVLIST)
    }, e.prototype.onSize = function () {
        this.fullStage();
        var t = 700,
            e = 1350,
            i = GameGlobal.stage,
            o = Math.max(i.stageWidth / t, i.stageHeight / e);
        this.bg.x = i.stageWidth - t * o >> 1, this.bg.scaleX = this.bg.scaleY = o
    }, e
}(BaseEUIView);
__reflect(VLoginMainView.prototype, "VLoginMainView");
var VLoginServItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._selected = !1, e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            if (this._data = t, t) {
                if (this.label.$setText(t.alias + e.getServItemStateText(t, !1)), 1 == t.isNew || "1" == t.isNew) var i = "localRes/login/icon3.png";
                else var i = "localRes/login/icon2.png";
                this.bmState.source = i
            } else this.label.$setText("error")
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t
        },
        enumerable: !0,
        configurable: !0
    }), e.getServItemStateText = function (t, e) {
        return 0 == t.state ? e ? "<font color='#dd0000'>(未开服)</font>" : "(未开服)" : 1 == t.state ? "(开启中)" : e ? "<font color='#dd0000'>(维护中)</font>" : "(维护中)"
    }, e
}(eui.Component);
__reflect(VLoginServItem.prototype, "VLoginServItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VLoginServTabItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._selected = !1, e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.label.$setText(t.label)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            t ? this.currentState = "sel" : this.currentState = "nor", this._selected = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VLoginServTabItem.prototype, "VLoginServTabItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VServList = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "LoginServListSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.servTabList.itemRenderer = VLoginServTabItem, this.servTabList.dataProvider = this.serTabListData = new eui.ArrayCollection, this.servList.itemRenderer = VLoginServItem, this.servList.dataProvider = this.servListData = new eui.ArrayCollection, this.servTabList.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.tabTap, this), this.servList.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.itemTab, this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnReturn)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.load()
    }, e.prototype.load = function () {
        if (window.wx) this.httpRequest();
        else {
            var t = GameGlobal.resRoot + "resource/loginServer/servList.json";
            RES.getResByUrl(t, this.onResLoaded, this, RES.ResourceItem.TYPE_JSON)
        }
    }, e.prototype.httpRequest = function () {
        var t = this,
            e = GameGlobal.loginArg;
        if (GameGlobal.testVerObj && GameGlobal.testVerObj.servListUrl) {
            var i = GameGlobal.testVerObj.servListUrl + "?rnd=" + Math.random();
            RES.getResByUrl(i, function (e) {
                t.onResLoaded(e)
            }, t, RES.ResourceItem.TYPE_JSON)
        } else i = "https://jxwqwx-ground.shangshi666.com/api/server/recentFormal?cmd=102&key=d90549c48639772060647991626cc8e3&randnum=532633&openid=" + e.account, console.log("requestServList:" + i), Util.httpRequest(i, egret.HttpResponseType.TEXT, egret.HttpMethod.POST, this, function (e) {
            var i = JSON.parse(e.target.response);
            t.onResLoaded(i)
        }, function () {
            console.log("requestServList:Error"), egret.setTimeout(t.load, t, 1e4)
        })
    }, e.prototype.onResLoaded = function (t) {
        t ? this.parse(t) : egret.setTimeout(this.load, this, 5e3)
    }, e.prototype.onLoaded = function (t) {
        var e = (t.target, t.data);
        e = JSON.parse(e), this.parse(e)
    }, e.prototype.parse = function (t) {
        this.servDatas = t;
        var e = t.formal;
        e.sort(function (t, e) {
            return t.zoneid - e.zoneid
        });
        for (var i = Math.max(0, Math.ceil(e.length / 20)), o = [], n = 0; i > n; n++) {
            var a = {
                label: 20 * n + 1 + "-" + 20 * (n + 1) + "区",
                index: n
            };
            o.unshift(a)
        }
        o.unshift({
            label: "最近登录",
            index: -1
        }), this.serTabListData.source = o, this.servTabList.selectedIndex = 0, this.updateItems(-1)
    }, e.prototype.onError = function () {
        egret.setTimeout(this.load, this, 1e3)
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.updateTabs = function () {}, e.prototype.updateItems = function (t) {
        var e;
        if (this.servDatas)
            if (t >= 0) {
                e = [];
                for (var i = 0; 20 > i; i++) {
                    var o = 20 * t + i;
                    this.servDatas.formal[o] && e.push(this.servDatas.formal[o])
                }
                e.reverse()
            } else -1 == t && (e = this.servDatas.recent);
        this.servListData.source = e
    }, e.prototype.tabTap = function (t) {
        var e = t.item;
        this.updateItems(e.index)
    }, e.prototype.itemTab = function (t) {
        GameGlobal.modelLogin.curSelServItem = t.item, GameGlobal.modelLogin.notify(ModelLogin.MSG_SERVSELETED), this.closeHandler()
    }, e
}(BaseEUIView);
__reflect(VServList.prototype, "VServList");
var CanIShow = function () {
    function t() {}
    return t.isCanShow = function (t) {
        var e = !1;
        return mqq && mqq.data && (e = mqq.data.canIShow(t)), e
    }, t
}();
__reflect(CanIShow.prototype, "CanIShow");
var E_WAN_REPORT_TYPE;
! function (t) {
    t[t.undefined = -1] = "undefined", t[t.UPDATE_LEVEL = 22] = "UPDATE_LEVEL", t[t.RECHARGE_TIMES = 33] = "RECHARGE_TIMES", t[t.ROLE_CE = 3] = "ROLE_CE"
}(E_WAN_REPORT_TYPE || (E_WAN_REPORT_TYPE = {}));
var E_WAN_OP_TYPE;
! function (t) {
    t[t.undefined = -1] = "undefined", t[t.OP_1 = 1] = "OP_1", t[t.OP_2 = 2] = "OP_2"
}(E_WAN_OP_TYPE || (E_WAN_OP_TYPE = {}));
var ECanIShowPlatformType;
! function (t) {
    t.Q_ZONE_BG = "QzoneBackground", t.BU_LUO = "buluo", t.MINI_GAME_VIP = "miniGameVIP", t.FOLLOW_WEBCHAT = "followWechat", t.DOWN_LOAD_GAME_APP = "downloadGameAPP", t.LINK_PC = "linkPC", t.SHARE = "share", t.FAVORITES_TO_DESKTOP = "favoritesToDesktop", t.QQ_KF = "QQkf", t.PAY = "pay"
}(ECanIShowPlatformType || (ECanIShowPlatformType = {}));
var EUserClientType;
! function (t) {
    t.SQ = "SQ", t.QZ = "QZ", t.WX = "WX", t.QQLive = "QQLive"
}(EUserClientType || (EUserClientType = {}));
var EPlatformChannel;
! function (t) {
    t.SQ = "SQ", t.QQRead = "QQRead", t.liMiXiu = "liMiXiu", t.QQEGame = "QQEGame", t.QQDongMan = "QQDongMan", t.QZ = "QZ", t.QQLive = "QQLive", t.tencentReading = "tencentReading", t.tencentNews = "tencentNews", t.xinYueClub = "xinYueClub", t.WX = "WX", t.gameApp = "gameApp", t.pet = "pet", t.campusApp = "campusApp", t.loveZone = "loveZone", t.show = "show", t.pkGame = "pkGame", t.touch = "touch", t.TencentNews = "TencentNews", t.guangDianTong = "guangDianTong", t.wxApp = "wxApp"
}(EPlatformChannel || (EPlatformChannel = {}));
var WanReportData = function () {
    function t() {}
    return t
}();
__reflect(WanReportData.prototype, "WanReportData");
var QQLive;
! function (t) {
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.skinName = "QQLiveMoreFunSkin", e.jumpUrl = "https://iwan.qq.com/community/h5index?hidetitlebar=1?ADTAG=txsp.xyx.yxdl", e
        }
        return __extends(e, t), e.prototype.initView = function () {
            t.prototype.initView.call(this)
        }, e.prototype.onOpen = function (e) {
            t.prototype.onOpen.call(this, e), this.addMsg()
        }, e.prototype.onClose = function () {
            t.prototype.onClose.call(this), this.removeMsg()
        }, e.prototype.onGoQQLiveGame = function () {
            window.location.href = this.jumpUrl
        }, e.prototype.onSize = function () {
            this.fullStage(), this.drawBG(-1, -1, 0, 0, 0)
        }, e.prototype.addMsg = function () {
            this.btn_go.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGoQQLiveGame, this)
        }, e.prototype.removeMsg = function () {
            this.btn_go.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onGoQQLiveGame, this)
        }, e
    }(BaseEUIView);
    t.MoreFunView = e, __reflect(e.prototype, "QQLive.MoreFunView")
}(QQLive || (QQLive = {}));
var QQLive;
! function (t) {
    var e = function () {
        function e() {}
        return e.isAddMoreFunIcon = function () {
            if (t.QQLiveCtr.isQQLive()) {
                var e = GameGlobal.layerMgr;
                e.regView(t.MoreFunView, e.UI_Message, 1, 1);
                var i = t.QQLiveCtr.gameCenterIcon;
                ViewRightUI.addBtn(i, i, function () {
                    GameCtrlBase.instance.openView(t.MoreFunView)
                }, this)
            }
        }, e.isQQLive = function () {
            return window.OPEN_DATA && window.OPEN_DATA.qua.app == EUserClientType.QQLive
        }, Object.defineProperty(e, "gameCenterIcon", {
            get: function () {
                var t = "";
                return platform.isIOS ? t = "20_more_fun" : platform.isAndroid && (t = "20_more_welfare"), t
            },
            enumerable: !0,
            configurable: !0
        }), e
    }();
    t.QQLiveCtr = e, __reflect(e.prototype, "QQLive.QQLiveCtr")
}(QQLive || (QQLive = {}));
var ReportToWan = function () {
    function t() {}
    return t.reportUpdateLevel = function () {
        if (AppConfig.channel == E_SQ_CHANNEL.liMiXiu) {
            var e = new WanReportData;
            e.type = E_WAN_REPORT_TYPE.UPDATE_LEVEL, e.op = E_WAN_OP_TYPE.OP_1, t.reportToWan(e)
        }
    }, t.reportRecharge = function () {
        if (AppConfig.channel == E_SQ_CHANNEL.liMiXiu) {
            var e = new WanReportData;
            e.type = E_WAN_REPORT_TYPE.RECHARGE_TIMES, e.op = E_WAN_OP_TYPE.OP_1, t.reportToWan(e)
        }
    }, t.reportCE = function (e, i) {
        if (AppConfig.channel == E_SQ_CHANNEL.liMiXiu && e > 0 && (1e5 > e && i >= 1e5 || 4e5 > e && i >= 4e5)) {
            var o = new WanReportData;
            o.type = E_WAN_REPORT_TYPE.ROLE_CE, o.op = E_WAN_OP_TYPE.OP_2, t.reportToWan(o)
        }
    }, t.reportToWan = function (t) {
        var e = window.BK,
            i = {
                infoList: [{
                    type: t.type,
                    op: t.op,
                    num: 1,
                    extId: 1
                }]
            };
        e.QQ.reportGameResult(i, function (t, e, i) {
            0 !== t ? egret.error("fail to report data to wan yi wan errCode:", t) : egret.log("report successful,type:", i.type)
        })
    }, t
}();
__reflect(ReportToWan.prototype, "ReportToWan");
var MainEvent = function () {
    function t() {}
    return t.pre = "MAIN_EVENT_", t.OPEN_CHAT = t.pre + "OPEN_CHAT", t
}();
__reflect(MainEvent.prototype, "MainEvent");
var MainMenu = function (t) {
    function e() {
        var i = t.call(this) || this;
        return i.tipInvalidFlag = 0, e.inst = i, i.skinName = "resource/eui_skins/main/MainMenu.exml", i
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this;
        GameGlobal.layerMgr.reg(UIConst.MAINMENUDZ, MainMenuDZ, this);
        var e = egret.TouchEvent.TOUCH_TAP;
        t.btnBattle.addEventListener(e, t.onBattleT, t), t.btnRo.addEventListener(e, t.onRol, t), t.btnFo.addEventListener(e, t.onFor, t), t.btnXL.addEventListener(e, t.onHuoban, t), t.btnLS.addEventListener(e, t.onLS, t), t.btnTown.addEventListener(e, t.onTownT, t), t.btnFaBao.addEventListener(e, t.onFaBaoT, t);
        for (var i = [t.btnBattle, t.btnTown, t.btnRo, t.btnFo, t.btnXL, t.btnFaBao, t.btnLS], o = 0; o < i.length; o++) {
            var n = i[o];
            DisplayUtil.popBtnStyle(n)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        this.parent.setChildIndex(this, 0), this.updateExp(), this.checkAllNow(), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.onBaseInfo, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onBagC, this), GameGlobal.modelRole.on(ModelRole.MSG_ROLEEQUIPCHANGE, this.onEquipC, this), GameGlobal.modelPet.on(ModelPet.MSG_LISTCHANGE, this.onPetUd, this), GameGlobal.modelhb.on(ModelHB.msg_hbBaseInfo, this.onHB, this), GameGlobal.modelDuanZao.on(ModelDuanZao.msg_datas, this.onCast, this), GameGlobal.msgCenter.on(GameGlobal.MSG_CHANGEMAP, this.onChangeMap, this), GameGlobal.modelTuJian.on(ModelTuJian.MSG_UPDATE, this.onTuJianUp, this), GameGlobal.modelShiLian.on(Model_ShiLian.MSG_UPDAT_ICON, this.upShiLianIcon, this), GameGlobal.modelAct.on(Model_Act.MSG_ACTLIST_UPDATE, i.onActNotic, i), GameGlobal.modelAct.on(Model_Act.MSG_ACTRED, i.onActNotic, i), GameGlobal.modelCZWAR.on(ModelCZWAR.UPDATE, i.noticePK, i), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_ZWJL, i.noticePK, i), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_ZLJL, i.noticePK, i), GameGlobal.modelLevelGift.on(ModelGift.MSG_UPDATE_AWARDS, i.onFLDTNotic, i), GameGlobal.modelSign.on(ModelSign.msg_data, i.onFLDTNotic, i), GameGlobal.modelyaoqianshu.on(ModelYaoQianShu.SETDATA, i.onFLDTNotic, i), GameGlobal.modelyuekazhouka.on(ModelYueKaZhouka.msg_notice, i.onFLDTNotic, i), GameGlobal.modelexpBack.on(ModelExpBack.msg_notice, i.onFLDTNotic, i), GameGlobal.modelFriend.on(ModelFriend.MSG_UITIP, i.onFriendTip, i), GameGlobal.modelmenpai.on(ModelMenPai.MSG_NOTIC, i.onMenPaiNotic, i), GameGlobal.modeljingjichang.on(ModelJingJiChang.msg_notice, i.onJJCNotic, i), GameGlobal.modelmenpai.on(ModelMenPai.msg_menpaiReset, i.onBossRet, i), GameGlobal.modelXiuLian.on(ModelXiuLian.UPDATE, i.onTuJianUp, i), GameGlobal.modelxdComposite.on(ModelXDComposite.msg_notice, this.onXDComposite, this), this.checkDairyAnswer(), this.CGdata(), this.onBossRet()
    }, e.prototype.onClose = function () {
        var t = this;
        GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.onBaseInfo), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onBagC), GameGlobal.modelRole.off(ModelRole.MSG_ROLEEQUIPCHANGE, this.onEquipC), GameGlobal.modelPet.off(ModelPet.MSG_LISTCHANGE, this.onPetUd), GameGlobal.modelhb.off(ModelHB.msg_hbBaseInfo, this.onHB, this), GameGlobal.modelDuanZao.off(ModelDuanZao.msg_datas, this.onCast, this), GameGlobal.msgCenter.off(GameGlobal.MSG_CHANGEMAP, this.onChangeMap, this), GameGlobal.modelTuJian.off(ModelTuJian.MSG_UPDATE, this.onTuJianUp), GameGlobal.modelShiLian.off(Model_ShiLian.MSG_UPDAT_ICON, this.upShiLianIcon), GameGlobal.modelAct.off(Model_Act.MSG_ACTLIST_UPDATE, t.onActNotic, t), GameGlobal.modelAct.off(Model_Act.MSG_ACTRED, t.onActNotic, t), GameGlobal.modelCZWAR.off(ModelCZWAR.UPDATE, t.noticePK, t), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_ZWJL, t.noticePK, t), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_ZLJL, t.noticePK, t), GameGlobal.modelLevelGift.off(ModelGift.MSG_UPDATE_AWARDS, t.onFLDTNotic, t), GameGlobal.modelSign.off(ModelSign.msg_data, t.onFLDTNotic, t), GameGlobal.modelyaoqianshu.off(ModelYaoQianShu.SETDATA, t.onFLDTNotic, t), GameGlobal.modelyuekazhouka.off(ModelYueKaZhouka.msg_notice, t.onFLDTNotic, t), GameGlobal.modelexpBack.off(ModelExpBack.msg_notice, t.onFLDTNotic, t), GameGlobal.modelFriend.off(ModelFriend.MSG_UITIP, t.onFriendTip, t), GameGlobal.modelmenpai.off(ModelMenPai.MSG_NOTIC, t.onMenPaiNotic, t), GameGlobal.modelmenpai.off(ModelMenPai.msg_menpaiReset, t.onBossRet, t), GameGlobal.modeljingjichang.off(ModelJingJiChang.msg_notice, t.onJJCNotic, t), GameGlobal.modelEmail.off(ModelEmail.REDNOTICE, t.onEmailNotic, t), GameGlobal.modelXiuLian.off(ModelXiuLian.UPDATE, t.onTuJianUp, t), GameGlobal.modelxdComposite.off(ModelXDComposite.msg_notice, this.onXDComposite, this)
    }, e.prototype.onXDComposite = function () {
        this.invalid(2)
    }, e.prototype.checkDairyAnswer = function () {
        var t = VoAnswer.actLeftime,
            e = VoAnswer.progressNum,
            i = GameGlobal.layerMgr.getView(UIConst.DAIRYCOUNT),
            o = GameGlobal.modelRole.voMine.level,
            n = CFG_COMMOND.getOpenLevel(CFG_COMMOND.DAIRYANSWER);
        n > o || (t > 0 || VoAnswer.refTitleTime > 0 ? GameGlobal.layerMgr.isOpenView(UIConst.DAIRYCOUNT) ? i.updateState("st1") : GameGlobal.layerMgr.open(UIConst.DAIRYCOUNT, "st1") : e >= 0 && (GameGlobal.layerMgr.isOpenView(UIConst.DAIRYCOUNT) ? i.updateState("st2") : GameGlobal.layerMgr.open(UIConst.DAIRYCOUNT, "st2")))
    }, e.prototype.CGdata = function () {
        for (var t = 0; 4 > t; t++) ModelPeiYang.hasEnoughLevelNotice(t) && GameGlobal.modelpeiyang.openSkin(t);
        CFG_COMMOND.isOpen(CFG_COMMOND.XIULIAN) && GameGlobal.modelXiuLian.CG1501(), CFG_COMMOND.isOpen(CFG_COMMOND.HUOBAN_SKIN)
    }, e.prototype.onRol = function (t) {
        this.open1(UIConst.ROLEPNL)
    }, e.prototype.onFor = function (t) {
        GameGlobal.modelRole.voMine.level >= 50 ? GameGlobal.layerMgr.openX(UIConst.MAINMENUDZ) : this.open1(UIConst.CAST)
    }, e.prototype.onHuoban = function (t) {
        this.open1(UIConst.HUOBANPAGE)
    }, e.prototype.onLS = function (t) {
        this.open1(UIConst.PET)
    }, e.prototype.onBossRet = function () {
        this.mpBossRefTip.visible = GameGlobal.modelmenpai.menpaiBossRed
    }, e.prototype.onTownT = function () {
        CFG_COMMOND.canDo(1042) && this.open1(UIConst.MAINTOWN)
    }, e.prototype.onBattleT = function () {
        GameGlobal.layerMgr.closePnlByType(1)
    }, e.prototype.onMallT = function () {
        GameGlobal.layerMgr.isOpenView(UIConst.STORE) ? GameGlobal.layerMgr.close(UIConst.STORE) : GameGlobal.layerMgr.open(UIConst.STORE)
    }, e.prototype.onFaBaoT = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.FABAO, !0) && GameGlobal.layerMgr.openX(UIConst.FABAO)
    }, e.prototype.open1 = function (t, e) {
        CFG_COMMOND.isOpenByCFG(t, !0) && GameGlobal.layerMgr.openX(t, e)
    }, e.prototype.onSize = function () {
        var t = egret.MainContext.instance.stage;
        this.y = t.$stageHeight - this.skin.height, this.x = t.stage.$stageWidth - 700 >> 1
    }, e.prototype.updateExp = function () {
        var t = GameGlobal.modelRole.voMine.exp,
            e = CFG_Hero.getLevelupExp(GameGlobal.modelRole.voMine.level),
            i = t / e;
        (i > 1 || 0 > i || !e) && (i = 1), this.exp_txt.text = t + "/" + e, this.exp_bar.scaleX = i
    }, e.prototype.onBaseInfo = function () {
        this.updateExp(), this.invalid(30)
    }, e.prototype.onBagC = function () {
        this.invalid(158)
    }, e.prototype.onEquipC = function () {
        this.invalid(2)
    }, e.prototype.onPetUd = function () {
        this.invalid(16)
    }, e.prototype.onCast = function () {
        this.invalid(4)
    }, e.prototype.onHB = function () {
        this.invalid(8)
    }, e.prototype.onChangeMap = function () {
        this.invalid(1)
    }, e.prototype.onTuJianUp = function () {
        this.invalid(2)
    }, e.prototype.checkAllNow = function () {
        this.invalid(1023)
    }, e.prototype.invalid = function (t) {
        0 == this.tipInvalidFlag && GameGlobal.tick.addInterv(this.checkTip, 100, this, !0), this.tipInvalidFlag |= t
    }, e.prototype.checkTip = function (t) {
        var e = GameGlobal,
            i = t.tipInvalidFlag;
        t.tipInvalidFlag = 0;
        var o = e.modelRole.voMine,
            n = DisplayUtil;
        if (1 & i) {
            var a = e.modelShiLian;
            e.modelRole.voMine.level >= 20 && (e.modelAct.actData.hasChildRed() || e.modelFriend.canGetGift1() || e.modelFuLiDaTing.notice() || ModelEmail.redSign || ModelCZWAR.Notice() || e.modelmenpai.getNotice() || CFG_COMMOND.isOpenByCFG(UIConst.VIEWJJC) && e.modeljingjichang.red || a.isSysRed(CFG_COMMOND.ZDFB) || a.isSysRed(CFG_COMMOND.BOSS) || a.isSysRed(CFG_COMMOND.CAILIAOFB) || a.isSysRed(CFG_COMMOND.SUOYAOTA) || a.isSysRed(CFG_COMMOND.ZTFS) || a.isSysRed(CFG_COMMOND.WDTD) || e.modelFuLiDaTing.notReadGGVer()) ? n.addBy(t.imgTownTip, t) : n.remove(t.imgTownTip)
        }
        if (2 & i) {
            var s = GameGlobal.modelRole.voMine,
                r = CFG_Hero.getLevelupExp(s.level),
                l = CFG_Hero.LIB[s.level + 1];
            l && s.exp >= r ? t.lvup.$parent || n.addBy(t.lvup, t) : n.remove(t.lvup), e.modelRole.checkTip() || e.modelEquip.checkNotick() || e.modelpeiyang.notice() || ModelRole.czNotice() || Vo_TitleItem.notice() || Vo_Fashion.notice() || e.modelTuJian.checkAllNotics() || Vo_XiuLian.notice() || e.modelxdComposite.noticeState ? n.addBy(t.imgRoleTip, t) : n.remove(t.imgRoleTip)
        }
        4 & i && (o.level >= CFG_COMMOND.getOpenLevel(CFG_COMMOND.CAST) && e.modelDuanZao.allNotice() ? n.addBy(t.imgCastTip, t) : n.remove(t.imgCastTip)), 8 & i && (o.level >= Number(CFG_COMMOND.getOpenLevel(CFG_COMMOND.HUOBAN)) && VoHuoban.notice() ? n.addBy(t.imgHBTip, t) : n.remove(t.imgHBTip)), 16 & i && (o.level >= 5 && e.modelPet.checkTip() ? n.addBy(t.imgPetTip, t) : n.remove(t.imgPetTip)), 128 & i && (o.level >= CFG_COMMOND.getOpenLevel(CFG_COMMOND.FABAO) && VoFaBao.getFaBaoNotice() ? n.addBy(t.imgFaBaoTip, t) : n.remove(t.imgFaBaoTip))
    }, e.prototype.guideOpenBtn = function (t) {
        var e = this.getBtn(t);
        e && QuestGuideArrow.getIns().guideTo(this, e.x + 35, e.y + 30)
    }, e.prototype.getBtn = function (t) {
        var e, i = UIConst;
        return 0 == t ? e = this.btnBattle : t == i.ROLEPNL ? e = this.btnRo : t == i.CAST ? e = this.btnFo : t == i.HUOBANPAGE ? e = this.btnXL : t == i.PET ? e = this.btnLS : t == i.SHILIAN ? e = this.btnTown : t == i.MAINTOWN && (e = this.btnTown), e
    }, e.prototype.upShiLianIcon = function () {
        this.invalid(1)
    }, e.prototype.onActNotic = function () {
        this.invalid(1)
    }, e.prototype.noticePK = function () {
        this.invalid(1)
    }, e.prototype.onFLDTNotic = function () {
        this.invalid(1)
    }, e.prototype.onFriendTip = function () {
        this.invalid(1)
    }, e.prototype.onMenPaiNotic = function () {
        this.invalid(1)
    }, e.prototype.onJJCNotic = function () {
        this.invalid(1)
    }, e.prototype.onEmailNotic = function () {
        this.invalid(1)
    }, e
}(BaseEUIView);
__reflect(MainMenu.prototype, "MainMenu");
var MainMenuDZ = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/main/MainMenuIcoList.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {}, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.checkNotic(), GameGlobal.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.stageTE, this)
    }, e.prototype.onClose = function () {
        GameGlobal.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN, this.stageTE, this)
    }, e.prototype.onSize = function () {
        this.x = 270 - (this.skin.width >> 1), this.y = -90
    }, e.prototype.stageTE = function (t) {
        switch (GameGlobal.layerMgr.closePnlByType(1), t.target) {
            case this.imgDZ:
                GameGlobal.layerMgr.open(UIConst.CAST);
                break;
            case this.imgHC:
                GameGlobal.layerMgr.open(UIConst.EQHECHENG)
        }
        this.closeHandler()
    }, e.prototype.checkNotic = function () {
        var t = GameGlobal.modelRole.voMine;
        t.level >= 10 && GameGlobal.modelDuanZao.allNotice() ? this.imgDZRed.visible = !0 : this.imgDZRed.visible = !1
    }, e
}(BaseEUIView);
__reflect(MainMenuDZ.prototype, "MainMenuDZ");
var ViewMainBottom2 = function (t) {
    function e() {
        var i = t.call(this) || this;
        return i.tabChannel = [EChatChannel.GENERAL, EChatChannel.WORD, EChatChannel.GANG, EChatChannel.TEAM], i.targetHei = 195, i.isMoving = !1, i.isNorHeight = !0, i.closeHei = 290, i.extraHei = 150, i.curTab = -1, i.invalidFlag = 0, e.inst = i, i.skinName = "resource/eui_skins/game/BottomUI2.exml", i
    }
    return __extends(e, t), e.prototype.guideChannel = function (t) {
        var e = this.chanlBtns[t];
        e && QuestGuideArrow.getIns().guideTo(e.parent, e.x + 20, e.y + 40)
    }, e.prototype.guideSend = function () {
        var t = this.chatCmp.btnSent;
        t && QuestGuideArrow.getIns().guideTo(t, 45, 10)
    }, e.prototype.onSize = function () {
        var t = egret.MainContext.instance.stage;
        this.y = t.stageHeight - 75 - this.skin.height
    }, e.prototype.initView = function () {
        this.LEVEL_OPEN = Config.getConfig(xitongkaiqi_116).get(CFG_COMMOND.CHAT).openlv;
        var t = egret.TouchEvent.TOUCH_TAP,
            e = this;
        e.chanlBtns = [e.btnZ, e.btnW, e.btnBP, e.btnZD], e.imgOpenExml.addEventListener(t, e.onOpenOrCloseChat, e), e.btnZ.addEventListener(t, e.chanel, e), e.btnW.addEventListener(t, e.chanel, e), e.btnZD.addEventListener(t, e.chanel, e), e.btnBP.addEventListener(t, e.chanel, e), this.groupChatXinShouExml.addEventListener(t, e.chatXinShou, e), DisplayUtil.remove(e.btnZD), DtTransfer.initRadioID(), this.radioLoginss();
        var i = GameGlobal.modelRole.voMine.level;
        i >= this.LEVEL_OPEN ? (this.groupChatXinShouExml.visible = !1, this.chatCmp.promtMsg = "点击输入文字") : this.chatCmp.promtMsg = this.LEVEL_OPEN + "级开启自由发言", e.btnB.addEventListener(t, e.onBagT, e), e.gpSiLiaoExml.addEventListener(t, e.onSiLiao, e), DisplayUtil.popBtnStyle(e.btnB)
    }, e.prototype.chatXinShou = function (t) {
        var e = GameGlobal.modelRole.voMine.level;
        e >= 10 && e < this.LEVEL_OPEN ? GameGlobal.layerMgr.open(UIConst.BOTTOM_XIN_SHOU) : e < this.LEVEL_OPEN ? ViewText.text(this.LEVEL_OPEN + "级才开启聊天功能") : (this.groupChatXinShouExml.visible = !1, this.chatCmp.promtMsg = "点击输入文字")
    }, e.prototype.chanel = function (t) {
        var e = this.chanlBtns.indexOf(t.currentTarget);
        e != this.curTab && (this.chatCmp.isCanChat = e != this.changeChToIdx(EChatChannel.TEAM), this.setSelChannel(e))
    }, e.prototype.changeChToIdx = function (t) {
        t == EChatChannel.CROSS ? this.btnZ.text = "钓鱼" : t == EChatChannel.GENERAL && (this.btnZ.text = "综合");
        for (var e = 0, i = this.tabChannel.length; i > e; e++)
            if (this.tabChannel[e] == t) return e;
        return 0
    }, e.prototype.onOpenOrCloseChat = function (t) {
        switch (t.currentTarget) {
            case this.imgOpenExml:
                this.isNorHeight ? this.onUp() : this.onDown()
        }
    }, e.prototype.onUp = function () {
        var t = this;
        this.isMoving || (this.isMoving = !0, egret.Tween.get(this.groupChatImg).to({
            y: -this.extraHei,
            height: this.closeHei + this.extraHei
        }, 300).call(function () {
            t.isMoving = !1, t.isNorHeight = !1, t.imgOpenExml.scaleY = 1;
            for (var e = 0; 4 > e; e++) t.btnCont.addChildAt(t.chanlBtns[e], e);
            t.btnCont.swapChildren(t.btnZD, t.btnBP), t.targetHei = 195 + t.extraHei, t.adaptChatWin()
        }))
    }, e.prototype.adaptChatWin = function () {
        this.chatCmp.toBottom()
    }, e.prototype.onDown = function () {
        var t = this;
        if (!this.isMoving) {
            switch (this.isMoving = !0, this.curTab) {
                case 0:
                case 1:
                case 3:
                    this.btnCont.removeChild(this.btnZD);
                    break;
                case 2:
                    this.btnCont.removeChild(this.btnBP);
                    break;
                case 4:
                    this.btnCont.removeChild(this.btnZD), this.btnCont.removeChild(this.btnBP)
            }
            egret.Tween.get(this.groupChatImg).to({
                y: 0,
                height: this.closeHei
            }, this.closeHei).call(function () {
                t.isNorHeight = !0, t.isMoving = !1, t.imgOpenExml.scaleY = -1, t.targetHei = 195, t.adaptChatWin()
            })
        }
    }, e.prototype.onChooseWord = function (t) {
        var e = t.data;
        this.chatCmp.inputText = e
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), this.chatCmp.active(), this.setSelChannel(0), GameGlobal.tick.addInterv(this.radioByTimess, 18e4, this), this.invalidF(1023), this.checkSiLiaoTip()
    }, e.prototype.onClose = function () {
        this.removeEvent(), this.chatCmp.deactive()
    }, e.prototype.onSetChat = function (t) {
        this.curTab = -1, this.tabChannel[0] = t.data || 0, this.setSelChannel(0)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onBagC, this), GameGlobal.modelsiliao.on(ModelSiLiao.msg_siliaoTip, this.checkSiLiaoTip, this), EventCenter.addMsg(ChatEvent.CHOOSE_WORD, this.onChooseWord, this), EventCenter.addMsg(MainEvent.OPEN_CHAT, this.onSetChat, this)
    }, e.prototype.removeEvent = function () {
        GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onBagC), GameGlobal.modelsiliao.off(ModelSiLiao.msg_siliaoTip, this.checkSiLiaoTip, this), GameGlobal.tick.removeInterv(this.radioByTimess, this), EventCenter.removeMsg(ChatEvent.CHOOSE_WORD, this.onChooseWord, this), EventCenter.removeMsg(MainEvent.OPEN_CHAT, this.onSetChat, this)
    }, e.prototype.setSelChannel = function (t) {
        if (this.curTab != t) {
            this.curTab = t;
            for (var e = this.tabChannel[t], i = this.changeChToIdx(e), o = 0, n = this.chanlBtns.length; n > o; o++) this.chanlBtns[o].selected = o == i;
            this.chatCmp.showCont(e)
        }
    }, e.prototype.radioByTimess = function () {
        var t = GameGlobal.modelChat.radioByTime,
            e = MathUtil.rndInt(0, t.length - 1);
        DtTransfer.chanExCh(t[e], "", "")
    }, e.prototype.radioLoginss = function () {
        GameGlobal.tick.addInterv(function () {
            var t = GameGlobal.modelChat.radioLogin;
            for (var e in t) {
                var i = t[e];
                DtTransfer.chanExCh(i, "", "")
            }
        }, 100, this, !0)
    }, e.prototype.onBagT = function (t) {
        GameGlobal.layerMgr.openX(UIConst.BAG)
    }, e.prototype.onBagC = function () {
        this.invalidF(1)
    }, e.prototype.invalidF = function (t) {
        this.invalidFlag || (this.invalidFlag |= t, GameGlobal.tick.addInterv(this.checkTip, 100, this, !0))
    }, e.prototype.checkTip = function (t) {
        var e = t.invalidFlag,
            i = GameGlobal;
        1 & e && (i.modelBag.checkBagTip() ? DisplayUtil.addBy(t.imgBagTip, t) : DisplayUtil.remove(t.imgBagTip), i.modelBag.checkRL() ? DisplayUtil.addBy(t.imgBagFullTip, t) : DisplayUtil.remove(t.imgBagFullTip)), t.invalidFlag = 0
    }, e.prototype.onSiLiao = function (t) {
        GameGlobal.layerMgr.open(UIConst.SI_LIAO)
    }, e.prototype.checkSiLiaoTip = function () {
        var t = GameGlobal.modelsiliao;
        t.hasSiLiaoTip ? this.gpSiLiaoExml.$parent || DisplayUtil.addBy(this.gpSiLiaoExml, this) : DisplayUtil.remove(this.gpSiLiaoExml), this.iconSLNotice.visible = GameGlobal.modelsiliao.redPoint
    }, e
}(BaseEUIView);
__reflect(ViewMainBottom2.prototype, "ViewMainBottom2");
var ViewMainTop = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "MainTop", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.onUpdate, this), this.ylGrp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnYinLiangT, this), this.ybGrp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onYBT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onUpdate(), platform.canRechage || this.btnAddYB && this.btnAddYB.$setVisible(!1)
    }, e.prototype.onUpdate = function () {
        var t = this,
            e = GameGlobal.modelRole.voMine,
            i = ConfigHelp;
        t.txtSil.text = i.getNumText(e.yinliang), t.txtYb.text = "" + e.yuanbao, t.txtByb.text = "" + e.bYuanbao
    }, e.prototype.btnYinLiangT = function () {
        GameGlobal.layerMgr.open(UIConst.FULIDATING, UIConst.YAOQIANSHU)
    }, e.prototype.onYBT = function () {
        platform.openRecharge()
    }, e.prototype.onSize = function () {
        this.y = platform.deviceTopPX - 70
    }, e
}(BaseEUIView);
__reflect(ViewMainTop.prototype, "ViewMainTop");
var ViewUIBG = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.isInit = !0;
        var i = new eui.Rect(1, 1, 0);
        return i.alpha = .7, i.left = i.right = i.bottom = i.top = 0, e.addChild(i), e
    }
    return __extends(e, t), e.showBG2 = function (t) {
        this.openmap[t] || (this.openmap[t] = !0, this.len++, 1 == this.len && (this.uiRestrit = !0, GameGlobal.mapScene && (GameGlobal.mapScene.checkVisible(), GameGlobal.mapScene.map.$setVisible(!1)), GameGlobal.layerMgr.open(UIConst.UIBG)))
    }, e.hideBG2 = function (t) {
        this.openmap[t] && (delete this.openmap[t], this.len--, 0 == this.len && (this.uiRestrit = !1, GameGlobal.mapScene.checkVisible(), GameGlobal.mapScene.map.$setVisible(!0), GameGlobal.layerMgr.close(UIConst.UIBG)))
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e)
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        var t = GameGlobal.stage;
        this.width = t.stageWidth, this.height = t.stageHeight
    }, e.openmap = {}, e.len = 0, e.uiRestrit = !1, e
}(BaseEUIView);
__reflect(ViewUIBG.prototype, "ViewUIBG");
var VSpecSceneBar = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "SpecMenuBar", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnExit.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onExitT, this), this.btnBuZhua.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBZT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = GameGlobal.mapScene._curSt,
            o = DisplayUtil;
        i == SceneCtrl.T_PET ? o.addBy(this.btnBuZhua, this) : o.remove(this.btnBuZhua)
    }, e.prototype.onSize = function () {
        var t = GameGlobal.stage;
        this.y = t.stageHeight - this.skin.height - 380
    }, e.prototype.onExitT = function (t) {
        var e = GameGlobal.mapScene;
        e._curSt == SceneCtrl.T_PET && ViewAlert.show("是否退出灵兽地图?", function () {
            e.changeMap(GameGlobal.modelGuanqia.getCurSceneID())
        })
    }, e.prototype.onBZT = function () {
        var t = GameGlobal.modelPet.catchingPets;
        t.length ? GameGlobal.layerMgr.openX(UIConst.BUZHUOPET, t[0]) : ViewText.text("没有可捕捉灵兽")
    }, e
}(BaseEUIView);
__reflect(VSpecSceneBar.prototype, "VSpecSceneBar");
var VTopActivity = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.hasAddXDMsg = !1, e.invalidFlag = 0, e.skinName = "TopActivitySkin", e
    }
    return __extends(e, t), e.prototype.guideClick = function (t) {
        var e;
        t == UIConst.BOSSPAGE ? e = this.btnJJBOSS : t == UIConst.SHILIAN ? e = this.btnSL : t == UIConst.MENPAI ? e = this.btnMenpai : t == UIConst.FULIDATING && (e = this.btnFL), e && QuestGuideArrow.getIns().guideTo(e, 70, 80)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this,
            i = egret.TouchEvent.TOUCH_TAP;
        e.btnFL.addEventListener(i, e.openFuLiDaTing, e), e.btnMenpai.addEventListener(i, e.onMenPai, e), e.btnStore.addEventListener(i, e.onStoreT, e), e.btnStore2.addEventListener(i, e.onStore2T, e), e.btnMail.addEventListener(i, e.openEmail, e), e.btnBag.addEventListener(i, e.onBagT, e), e.btnFriend.addEventListener(i, e.openFriend, e), e.btnHuoDong.addEventListener(i, e.onHuoDong, e), e.btnJJ.addEventListener(i, e.btnJJT, e), e.btnCZJJ.addEventListener(i, e.onCZJJT, e), e.btnJJBOSS.addEventListener(i, e.onJJBossT, e), e.btnMRSC.addEventListener(i, e.onMRSCT, e), e.btnZDFB.addEventListener(i, e.onZDFBTouch, e), e.btnSL.addEventListener(i, e.onFBTouch, e), e.btnMall.addEventListener(i, e.openMall, e), e.btnXDDZ.addEventListener(i, e.onOpenXDDZ, e), e.btnFriendCall.addEventListener(i, e.onFriendCall, e), e.imgZDFBTip.visible = !1, e.imgJJBossTip.visible = !1, e.imgSLTip.visible = !1;
        for (var o = [e.btnZDFB, e.btnJJBOSS, e.btnSL, e.btnJJ, e.btnHuoDong, e.btnMenpai], n = 0; n < o.length; n++) {
            var a = o[n];
            DisplayUtil.popBtnStyle(a)
        }
    }, e.prototype.onOpenXDDZ = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.XDDZ, !0) && GameGlobal.layerMgr.open(UIConst.VIEWXDDZMAIN, UIConst.VIEWXDDZ)
    }, e.prototype.addMsg = function () {
        var t = this;
        GameGlobal.modelAct.on(Model_Act.MSG_ACTLIST_UPDATE, t.checkActBtnVis, t), GameGlobal.modelAct.on(Model_Act.MSG_ACTLIST_UPDATE, t.updateTopActList, t), GameGlobal.modelAct.on(Model_Act.MSG_ACTRED, t.checkActBtnVis, t), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, t.checkActBtnVis, t), GameGlobal.modelczjj.on(ModelCZJiJin.msg_data, t.checkActBtnVis, t), GameGlobal.modelLevelGift.on(ModelGift.MSG_UPDATE_AWARDS, t.fldtRedIcon, t), GameGlobal.modelSign.on(ModelSign.msg_data, t.fldtRedIcon, t), GameGlobal.modelyaoqianshu.on(ModelYaoQianShu.SETDATA, t.fldtRedIcon, t), GameGlobal.modelyuekazhouka.on(ModelYueKaZhouka.msg_notice, t.fldtRedIcon, t), GameGlobal.modelexpBack.on(ModelExpBack.msg_notice, t.fldtRedIcon, t), GameGlobal.modelFriend.on(ModelFriend.MSG_UITIP, t.checkFriendTip, t), GameGlobal.modelEmail.on(ModelEmail.REDNOTICE, t.emailRead, t), GameGlobal.modelczjj.on(ModelCZJiJin.msg_data, t.updateTZJJTime, t), GameGlobal.modeltzPlan.on(ModelTZTZPlan.msg_data, t.updateTZJJTime, t), GameGlobal.modelExpGift.on(ModelExpGift.msg_notice, t.checkHuodongRed, t), GameGlobal.modelCZWAR.on(ModelCZWAR.MSG_NOTICE, t.checkHuodongRed, t), GameGlobal.modelmenpai.on(ModelMenPai.MSG_NOTIC, t.onMenPaiNotic, t), GameGlobal.modelMPBattle.on(ModelMPBattle.msg_baomingState, t.onMenPaiNotic, t), GameGlobal.modelMRSC.on(ModelMRSC.UPDATE, t.checkMRSCIsEff, t), GameGlobal.modeljingjichang.on(ModelJingJiChang.msg_notice, t.onJJCNotic, t), GameGlobal.modelShiLian.on(Model_ShiLian.MSG_UPDAT_ICON, t.checkSLModelTip, this), GameGlobal.modelpeiyang.on(ModelPeiYang.msg_ZhiShengYiJieNitice, this.checkZSYJNotice, this), GameGlobal.modelfuwenRoll.on(ModelFuWenRoll.MSG_RollData, t.onFuWenRollZk, t), GameGlobal.modelmenpai.on(ModelMenPai.msg_menpaiReset, t.onMPBossRetTip, t), GameGlobal.modelVipGifts.on(ModelVipGifts.UPDATE, t.checkActBtnVis, t), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, t.onBagC, t), GameGlobal.modelXSFB.on(ModelXSFB.MSG_UPDATE, t.checkXSFBTip, t), GameGlobal.modelxddz.on(ModelXDDZ.msg_notice, t.updateXDDZNot, t), GameGlobal.modelDayDayFL.on(ModelDayDayFL.msg_datas, t.checkActTtflEff, t), GameGlobal.modelTeachersDay.on(ModelTeachersDay.MSG_UPDATE, t.checkTeaRed, t), GameGlobal.modelBoss.on(Model_BossData.MSG_VIPBOSS_UPDATE, t.checkVipRed, t), GameGlobal.modelXiaoFeiAct.on(ModelXiaoFeiAct.MSG_RollData, t.checkLuckyRollRed, t), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_zhenlongge, this.mallNotice, this), EventCenter.addMsg(CrossServiceLadder.Event.UPDATE_MISSION_STATE, this.updateMissionState, this), EventCenter.addMsg(FriendBack.Event.UPDATE_FRIEND_NOTICE, this.updateFriendNotice, this)
    }, e.prototype.removeMsg = function () {
        var t = this;
        GameGlobal.modelAct.off(Model_Act.MSG_ACTLIST_UPDATE, t.checkActBtnVis), GameGlobal.modelAct.off(Model_Act.MSG_ACTLIST_UPDATE, t.updateTopActList, t), GameGlobal.modelAct.off(Model_Act.MSG_ACTRED, t.checkActBtnVis), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, t.checkActBtnVis), GameGlobal.modelczjj.off(ModelCZJiJin.msg_data, t.checkActBtnVis, t), GameGlobal.modelLevelGift.off(ModelGift.MSG_UPDATE_AWARDS, t.fldtRedIcon, t), GameGlobal.modelSign.off(ModelSign.msg_data, t.fldtRedIcon, t), GameGlobal.modelyaoqianshu.off(ModelYaoQianShu.SETDATA, t.fldtRedIcon, t), GameGlobal.modelyuekazhouka.off(ModelYueKaZhouka.msg_notice, t.fldtRedIcon, t), GameGlobal.modelexpBack.off(ModelExpBack.msg_notice, t.fldtRedIcon, t), GameGlobal.modelFriend.off(ModelFriend.MSG_UITIP, t.checkFriendTip, t), GameGlobal.modelEmail.off(ModelEmail.REDNOTICE, t.emailRead, t), GameGlobal.modelczjj.off(ModelCZJiJin.msg_data, t.updateTZJJTime, t), GameGlobal.modeltzPlan.off(ModelTZTZPlan.msg_data, t.updateTZJJTime, t), GameGlobal.modelExpGift.off(ModelExpGift.msg_notice, t.checkHuodongRed, t), GameGlobal.modelCZWAR.off(ModelCZWAR.MSG_NOTICE, t.checkHuodongRed, t), GameGlobal.modelmenpai.off(ModelMenPai.MSG_NOTIC, t.onMenPaiNotic, t), GameGlobal.modelMPBattle.off(ModelMPBattle.msg_baomingState, t.onMenPaiNotic, t), GameGlobal.modelMRSC.off(ModelMRSC.UPDATE, t.checkMRSCIsEff, t), GameGlobal.modeljingjichang.off(ModelJingJiChang.msg_notice, t.onJJCNotic, t), GameGlobal.modelShiLian.off(Model_ShiLian.MSG_UPDAT_ICON, t.checkSLModelTip, this), GameGlobal.modelpeiyang.off(ModelPeiYang.msg_ZhiShengYiJieNitice, this.checkZSYJNotice, this), GameGlobal.modelfuwenRoll.off(ModelFuWenRoll.MSG_RollData, t.onFuWenRollZk, t), GameGlobal.modelmenpai.off(ModelMenPai.msg_menpaiReset, t.onMPBossRetTip, t), GameGlobal.modelVipGifts.off(ModelVipGifts.UPDATE, t.checkActBtnVis, t), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, t.onBagC, t), GameGlobal.modelXSFB.off(ModelXSFB.MSG_UPDATE, t.checkXSFBTip, t), GameGlobal.modelxddz.off(ModelXDDZ.msg_notice, t.updateXDDZNot, t), GameGlobal.modelDayDayFL.off(ModelDayDayFL.msg_datas, t.checkActTtflEff, t), GameGlobal.modelTeachersDay.off(ModelTeachersDay.MSG_UPDATE, t.checkTeaRed, t), GameGlobal.modelBoss.off(Model_BossData.MSG_VIPBOSS_UPDATE, t.checkVipRed, t), GameGlobal.modelXiaoFeiAct.off(ModelXiaoFeiAct.MSG_RollData, t.checkLuckyRollRed, t), GameGlobal.modelShangCheng.off(ModelShangCheng.msg_zhenlongge, this.mallNotice, this), EventCenter.removeMsg(CrossServiceLadder.Event.UPDATE_MISSION_STATE, this.updateMissionState, this), EventCenter.removeMsg(FriendBack.Event.UPDATE_FRIEND_NOTICE, this.updateFriendNotice, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.updateTopActList(), i.updateTZJJTime(), i.CGgetNotice(), i.updateNotic(), i.checkZSYJNotice(GameGlobal.modelpeiyang.zsyjNotice), i.checkActBtnVis(), i.checkFuWenRollZk(), i.updateXDDZNot(), i.xdLevelShow(), i.addMsg(), i.onBagC(), i.checkshowDJ(), this.updateFriendCallBtn()
    }, e.prototype.checkshowDJ = function () {
        AppConfig.pftype != E_PF_CONFIG_TYPE.WAN_WAN ? DisplayUtil.remove(this.btnDJ) : this.btnDJ.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIConst.VIEWDIANJING)
        }, this)
    }, e.prototype.onClose = function () {
        var t = this;
        t.removeMsg()
    }, e.prototype.onSize = function () {
        var t = GameGlobal.stage,
            e = t.$stageHeight - 43 - platform.deviceTopPX;
        this.y = 43 + platform.deviceTopPX, this.height = e
    }, e.prototype.updateFriendCallBtn = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.FRIEND_CALL, !1) ? DisplayUtil.addBy(this.btnFriendCall, this.topGrp2) : DisplayUtil.remove(this.btnFriendCall)
    }, e.prototype.updateFriendNotice = function (t) {
        var e = t.data;
        this.btnFriendCall && this.btnFriendCall.setNoticVis(e)
    }, e.prototype.updateXDDZNot = function () {
        this.btnXDDZ.setNoticVis(GameGlobal.modelxddz.notice)
    }, e.prototype.xdLevelShow = function () {
        var t = GameGlobal.modelRole.voMine.level;
        t < CFG_COMMOND.getOpenLevel(CFG_COMMOND.XDDZ) ? (this.hasAddXDMsg = !0, DisplayUtil.remove(this.btnXDDZ), GameGlobal.modelRole.on(ModelRole.MSG_LEVEL, this.realShowXD, this)) : (DisplayUtil.addBy(this.btnXDDZ, this.topGrp), this.hasAddXDMsg && (this.hasAddXDMsg = !1, GameGlobal.modelRole.off(ModelRole.MSG_LEVEL, this.realShowXD, this)))
    }, e.prototype.realShowXD = function () {
        var t = GameGlobal.modelRole.voMine.level;
        t >= CFG_COMMOND.getOpenLevel(CFG_COMMOND.XDDZ) && (GameGlobal.modelRole.off(ModelRole.MSG_LEVEL, this.realShowXD, this), DisplayUtil.addBy(this.btnXDDZ, this.topGrp), this.hasAddXDMsg = !1)
    }, e.prototype.onKFHD = function () {
        GameGlobal.layerMgr.open(UIConst.ACT)
    }, e.prototype.CGgetNotice = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.YAOQIANSHU, !1) && GameGlobal.modelyaoqianshu.CG1401(), CFG_COMMOND.isOpen(CFG_COMMOND.CZWAR, !1) && GameGlobal.modelCZWAR.isOpen && (GameGlobal.modelCZWAR.CG2881(), GameGlobal.modelCZWAR.CG2891());
        var t = GameGlobal.modelAct.actData.getChildByID(2);
        t && GameGlobal.modelMRSC.CG2061();
        var e = GameGlobal.modelAct.actData.getChildByID(12);
        e && GameGlobal.modelVipGifts.CG3401();
        var i = GameGlobal.modelAct.actData.getChildByID(14);
        i && CFG_COMMOND.isOpen(CFG_COMMOND.XSFBZSXT, !1) && GameGlobal.modelXSFB.getData(14);
        var i = GameGlobal.modelAct.actData.getChildByID(14);
        i && CFG_COMMOND.isOpen(CFG_COMMOND.XSFBND, !1) && GameGlobal.modelXSFB.getData(19);
        var i = GameGlobal.modelAct.actData.getChildByID(14);
        i && CFG_COMMOND.isOpen(CFG_COMMOND.XSFBSH, !1) && GameGlobal.modelXSFB.getData(20);
        var o = GameGlobal.modelAct.actData.getChildByID(10);
        o && CFG_COMMOND.isOpen(CFG_COMMOND.ZHISHENGYIJIE) && GameGlobal.modelpeiyang.CG3131();
        var n = GameGlobal.modelAct.actData.getChildByID(16);
        n && GameGlobal.modelDayDayFL.CG3601();
        var a = GameGlobal.modelAct.actData.getChildByID(17);
        a && CFG_COMMOND.isOpen(CFG_COMMOND.MRHL) && GameGlobal.modelAct.CG_MRHL_OPENUI();
        var s = GameGlobal.modelAct.actData.getChildByID(23);
        s && CFG_COMMOND.isOpen(CFG_COMMOND.TEACHERSDAY) && GameGlobal.modelTeachersDay.CG3931();
        var r = GameGlobal.modelAct.actData.getChildByID(5);
        if (r) {
            var l = r.getChildByID(34);
            l && GameGlobal.modelXiaoFeiAct.CG_ROLLDETAIL()
        }
        CFG_COMMOND.isOpen(CFG_COMMOND.STORE, !1) && GameGlobal.modelShangCheng.CG901(), CFG_COMMOND.isOpen(CFG_COMMOND.CROSS_SERVICE_lADDER, !1) && GameCtrlBase.instance.getProxy(CrossServiceLadder.Proxy).getAwardInfo(), CFG_COMMOND.isOpen(CFG_COMMOND.FRIEND_CALL, !1) && this.getProxy(FriendBack.Proxy).getFriendCallNotice()
    }, e.prototype.updateNotic = function () {
        var t = this;
        t.notcieStore2(!1), t.checkFriendTip(), t.emailRead(), t.checkHuodongRed(), t.fldtRedIcon(), t.onMenPaiNotic(), t.onMPBossRetTip(), t.checkSLModelTip(), t.onJJCNotic(), t.mallNotice()
    }, e.prototype.mallNotice = function () {
        0 == GameGlobal.modelShangCheng.refreshCount ? this.btnMall.setNoticVis(!0) : this.btnMall.setNoticVis(!1)
    }, e.prototype.onMenPaiNotic = function () {
        this.imgMenpaiTip.visible = GameGlobal.modelmenpai.getNotice()
    }, e.prototype.onMPBossRetTip = function () {
        this.mpBossRefTip.visible = GameGlobal.modelmenpai.menpaiBossRed
    }, e.prototype.notcieStore2 = function (t) {
        this.btnStore2.setNoticVis(t)
    }, e.prototype.onJJCNotic = function () {
        this.imgJJTip.visible = CFG_COMMOND.isOpenByCFG(UIConst.VIEWJJC) && GameGlobal.modeljingjichang.red
    }, e.prototype.onMenPai = function () {
        ModelMenPai.openMenPai()
    }, e.prototype.onStore2T = function () {
        CFG_COMMOND.isOpen(UIConst.STORE, !0) && GameGlobal.layerMgr.open(UIConst.STORE, Enum_shangChengType.ZHENXI)
    }, e.prototype.onStoreT = function () {
        CFG_COMMOND.isOpen(UIConst.STORE, !0) && GameGlobal.layerMgr.open(UIConst.STORE)
    }, e.prototype.openFuLiDaTing = function () {
        GameGlobal.layerMgr.open(UIConst.FULIDATING, 0)
    }, e.prototype.fldtRedIcon = function () {
        var t = GameGlobal.modelFuLiDaTing.notice();
        this.btnFL.setNoticVis(t)
    }, e.prototype.openFriend = function () {
        CFG_COMMOND.isOpen(UIConst.FRIEND, !0) && GameGlobal.layerMgr.open(UIConst.FRIEND)
    }, e.prototype.checkFriendTip = function () {
        var t = GameGlobal.modelFriend;
        t.canGetGift1() ? this.btnFriend.setNoticVis(!0) : this.btnFriend.setNoticVis(!1)
    }, e.prototype.openEmail = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.EMAIL, !0) && GameGlobal.layerMgr.open(UIConst.EMAIL)
    }, e.prototype.onBagT = function () {
        GameGlobal.layerMgr.open(UIConst.BAG)
    }, e.prototype.emailRead = function () {
        this.btnMail.setNoticVis(ModelEmail.redSign)
    }, e.prototype.onHuoDong = function () {
        GameGlobal.layerMgr.open(UIConst.HUODONG)
    }, e.prototype.btnJJT = function () {
        CFG_COMMOND.canDo(UIConst.VIEWJJC) && GameGlobal.layerMgr.open(UIConst.VIEWJJC)
    }, e.prototype.btnPKT = function () {
        ViewText.text("敬请期待！")
    }, e.prototype.checkHuodongRed = function () {
        this.imgHuoDongTip.visible = NoticeHDMgr.getAllNotice() || ModelCZWAR.Notice()
    }, e.prototype.checkMRSCIsEff = function () {
        GameGlobal.modelMRSC.lc >= 500 ? this.btnMRSC.isShowEff(!1) : this.btnMRSC.isShowEff(!0)
    }, e.prototype.checkTeaRed = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(23);
        if (t) {
            for (var e = t.getBtn(), i = Vo_TeachersDay.jlstate, o = 0; o < i.length; o++) {
                var n = i[o];
                if (1 == n) return void e.setNoticVis(!0)
            }
            e.setNoticVis(!0)
        }
    }, e.prototype.checkVipRed = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(12);
        if (t) {
            var e = t.getBtn();
            e.setNoticVis(GameGlobal.modelBoss.VIPNot())
        }
    }, e.prototype.updateTopActList = function () {
        var t = GameGlobal.modelAct.actData,
            e = GameGlobal.modelRole.voMine.level;
        if (t && t.hasChild())
            for (var i = 0, o = t.childs.length; o > i; i++) {
                var n = t.childs[i];
                if (e >= n.openLevel) {
                    if (1 & n.ui) var a = this.topGrp.addChild(n.getBtn());
                    2 & n.ui && (a = this.topGrp2.addChild(n.getBtn())), a && 1 == n.removeEffFlagCFG && !n.clickFlag && a.isShowEff(!0), 2 != n.removeEffFlagCFG || n.hadClicked || a.isShowEff(!0)
                }
            }
    }, e.prototype.updateTZJJTime = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(3),
            e = 1 == VoTouZiPlan.isTouZi;
        t && (t.showTime(!e), t.getBtn().setNoticVis(NoticeSCJJTZ.noticeTZPlan())), t = GameGlobal.modelAct.actData.getChildByID(4), e = 1 == VoCZJiJin.isTouZi, t && t.showTime(!e)
    }, e.prototype.checkSLModelTip = function () {
        this.checkTeamFBTip(), this.checkShiLianTip(), this.checkJJBossTip()
    }, e.prototype.checkTeamFBTip = function () {
        var t = GameGlobal.modelShiLian.isSysRed(CFG_COMMOND.ZDFB);
        this.imgZDFBTip.visible = t
    }, e.prototype.checkJJBossTip = function () {
        var t = GameGlobal.modelShiLian.isSysRed(CFG_COMMOND.BOSS);
        this.imgJJBossTip.visible = t
    }, e.prototype.checkShiLianTip = function () {
        var t = GameGlobal.modelShiLian,
            e = t.isSysRed(CFG_COMMOND.CAILIAOFB) || t.isSysRed(CFG_COMMOND.SUOYAOTA) || t.isSysRed(CFG_COMMOND.ZTFS) || t.isSysRed(CFG_COMMOND.WDTD) || t.isSysRed(CFG_COMMOND.FENGMOLU & this.dealWith(CFG_COMMOND.FENGMOLU));
        this.imgSLTip.visible = e
    }, e.prototype.dealWith = function (t) {
        if (t == CFG_COMMOND.FENGMOLU) {
            var e = CFG_COMMOND.LIB[t].arg.openLv,
                i = VoSYTMonster.tongGuanLayer;
            return i >= e ? 255 : GameGlobal.modelShiLian.systemIDShowRadMap[CFG_COMMOND.SUOYAOTA] > 0 ? 255 : 0
        }
        return 255
    }, e.prototype.onCZJJT = function () {
        GameGlobal.layerMgr.open(1062, 1068)
    }, e.prototype.onRollT = function () {
        GameGlobal.layerMgr.open(UIConst.XIAOFEIACT, UIConst.VLUCKROLL)
    }, e.prototype.onJJBossT = function () {
        CFG_COMMOND.canDo(UIConst.BOSSPAGE) && GameGlobal.layerMgr.open(UIConst.BOSSPAGE)
    }, e.prototype.onActT = function () {
        GameGlobal.layerMgr.open(UIConst.ACT)
    }, e.prototype.onXFT = function () {
        GameGlobal.layerMgr.open(UIConst.XIAOFEIACT, UIConst.VLUCKROLL)
    }, e.prototype.onZDFBTouch = function () {
        CFG_COMMOND.canDo(UIConst.ZDFBPAGE) && ModelBattle.canEnterBtl() && GameGlobal.layerMgr.open(UIConst.ZDFBPAGE)
    }, e.prototype.onFBTouch = function () {
        CFG_COMMOND.canDo(CFG_COMMOND.SHILIAN) && GameGlobal.layerMgr.open(UIConst.SHILIAN)
    }, e.prototype.openMall = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.STORE, !0) && GameGlobal.layerMgr.open(UIConst.STORE)
    }, e.prototype.onMRSCT = function () {
        GameGlobal.layerMgr.open(UIConst.MRSC)
    }, e.prototype.checkZSYJNotice = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(10);
        if (e) {
            var i = e.getBtn();
            i.setNoticVis(t);
            for (var o = 0, n = VoZhiShengYiJie.map.getLength(); n > o; o++) {
                var a = VoZhiShengYiJie.map.getByIndex(o);
                2 == a.gotState && DisplayUtil.remove(i)
            }
        }
    }, e.prototype.onFuWenRollZk = function () {
        var t = voFuWenRoll.Map,
            e = 0;
        for (var i in t) voFuWenRoll.Map[i].dzcs <= voFuWenRoll.Map[i].hcs && 0 != voFuWenRoll.Map[i].dzcs && e++;
        if (2 == e) {
            var o = GameGlobal.modelAct.actData.getChildByID(8).getBtn();
            o.setZk(!1)
        }
    }, e.prototype.checkFuWenRollZk = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(8);
        if (t && CFG_COMMOND.isOpen(CFG_COMMOND.FUWENROLL, !1)) {
            var e = t.getBtn();
            e.setZk(!0, CFG_FuWenRoll.getZpZk()), GameGlobal.modelfuwenRoll.CG_ROLLDETAIL()
        }
    }, e.prototype.checkXSFBTip = function () {
        for (var t = [14, 19, 20], e = 0; e < t.length; e++) {
            var i = t[e],
                o = GameGlobal.modelAct.actData.getChildByID(i);
            if (o) {
                if (14 == i) var n = Vo_XSFB_zsxt.getInst();
                else 19 == i ? n = Vo_XSFB_nd.getInst() : 20 == i && (n = Vo_XSFB_sh.getInst());
                for (var a = o.getBtn(), s = !1, r = n.List, l = 0; l < r.length; l++) {
                    var h = r[l];
                    if (!h.isPass && h.cfg.tjzl <= GameGlobal.modelRole.voMine.str) {
                        s = !0;
                        break
                    }
                }
                var c = n.sdcs > 0 ? ModelXSFB.sdTip : !1;
                a.setNoticVis(s || c)
            }
        }
    }, e.prototype.checkActBtnVis = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(2);
        t && t.getRemainSec() ? (this.btnMRSC.vo = t, this.btnMRSC.startTime(), this.btnMRSC.parent || DisplayUtil.addBy(this.btnMRSC, this.topGrp), this.btnMRSC.setNoticVis(t.isRed)) : (this.btnMRSC.endTime(), this.btnMRSC.vo = null, DisplayUtil.remove(this.btnMRSC));
        var e = GameGlobal.modelAct.actData.getChildByID(4);
        if (e) this.btnCZJJ.vo = e, this.btnCZJJ.startTime(), this.btnCZJJ.parent || DisplayUtil.addBy(this.btnCZJJ, this.topGrp), this.btnCZJJ.setNoticVis(NoticeSCJJTZ.noticeJiJin());
        else {
            var i = !1;
            i ? this.btnCZJJ.parent || DisplayUtil.addBy(this.btnCZJJ, this.topGrp) : DisplayUtil.remove(this.btnCZJJ)
        }
        var o = GameGlobal.modelAct.actData.getChildByID(12);
        if (o) {
            var n = o.getBtn(),
                a = Vo_VipGiftsItem.List,
                s = GameGlobal.modelRole.voMine;
            n.setNoticVis(!1);
            for (var r = 0; r < a.length; r++) {
                var l = Util.parseIntStr(a[r].cfg.xj);
                if (s.vip >= a[r].cfg.viplv && s.yuanbao >= l[2] && a[r].hasBuy < a[r].cfg.cs) {
                    n.setNoticVis(!0);
                    break
                }
            }
        }
        var h = GameGlobal.modelAct.actData.getChildByID(13);
        if (h) {
            var c = h.getBtn();
            c.setNoticVis(Modelchouka.xszmIconTip)
        }
        this.checkQiXiRed();
        var p = GameGlobal.modelAct.actData.getChildByID(24);
        if (p) {
            var u = p.getChildByID(56);
            if (u) {
                p.remainTime = u.remainTime, p.remainTimeUDT = u.remainTimeUDT;
                var d = p.getBtn();
                d.startTime()
            }
        }
        var f = GameGlobal.modelAct.actData.getChildByID(26);
        if (f) {
            var g = f.getChildByID(56);
            if (g) {
                f.remainTime = g.remainTime, f.remainTimeUDT = g.remainTimeUDT;
                var m = f.getBtn();
                m.startTime()
            }
        }
        var y = GameGlobal.modelAct.actData.getChildByID(27);
        if (y) {
            var v = y.getChildByID(56);
            if (v) {
                y.remainTime = v.remainTime, y.remainTimeUDT = v.remainTimeUDT;
                var _ = y.getBtn();
                _.startTime(), _.setNoticVis(!0)
            }
        }
        var G = GameGlobal.modelAct.actData.getChildByID(28);
        if (G) {
            var b = G.getChildByID(59);
            if (b) {
                G.remainTime = b.remainTime, G.remainTimeUDT = b.remainTimeUDT;
                var C = G.getBtn();
                C.startTime(), C.setNoticVis(!0)
            }
        }
        var T = GameGlobal.modelAct.actData.getChildByID(35);
        if (T) {
            var S = T.getChildByID(65);
            if (S) {
                T.remainTime = S.remainTime, T.remainTimeUDT = S.remainTimeUDT;
                var I = T.getBtn();
                I.startTime(), I.setNoticVis(!0)
            }
        }
        var E = GameGlobal.modelAct.actData.getChildByID(31);
        if (E) {
            var A = E.getChildByID(66);
            if (A) {
                E.remainTime = A.remainTime, E.remainTimeUDT = A.remainTimeUDT;
                var M = E.getBtn();
                M.startTime(), M.setNoticVis(!0)
            }
        }
        var B = GameGlobal.modelAct.actData.getChildByID(29);
        if (B) {
            var x = B.getBtn(),
                L = B.getChildByID(69);
            L && (B.remainTime = L.remainTime, B.remainTimeUDT = L.remainTimeUDT, x.startTime(), x.setNoticVis(!0))
        }
        var w = GameGlobal.modelAct.actData.getChildByID(36);
        if (w) {
            var D = w.getBtn(),
                U = w.getChildByID(72);
            U && (w.remainTime = U.remainTime, w.remainTimeUDT = U.remainTimeUDT, D.startTime(), D.setNoticVis(!0), D.isShowEff(!0))
        }
        var P = GameGlobal.modelAct.actData.getChildByID(37);
        if (P) {
            var V = P.getBtn(),
                H = P.getChildByID(71);
            H && (P.remainTime = H.remainTime, P.remainTimeUDT = H.remainTimeUDT, V.startTime(), V.setNoticVis(!0))
        }
    }, e.prototype.checkActTtflEff = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(16);
        if (t) {
            if (GameGlobal.modelRole.voMine.level < t.openLevel) return;
            for (var e = t.getBtn(), i = GameGlobal.modelDayDayFL.toDayHasGot, o = GameGlobal.modelDayDayFL.leiJiDays, n = GameGlobal.modelDayDayFL.cfgDatas, a = !1, s = 0, r = 0; r < n.length; r++) {
                var l = n[r];
                if (l.cfg.id <= o && !l.active && s++, s == o) {
                    a = !0;
                    break
                }
            }
            2 == i && a ? e.isShowEff(!1) : (e.isShowEff(!0), e.updateNoticVis())
        }
    }, e.prototype.onBagC = function () {
        this.invalidFlag || (this.invalidFlag |= 1, GameGlobal.tick.addInterv(this.checkTip, 100, this, !0))
    }, e.prototype.checkTip = function (t) {
        var e = GameGlobal;
        t.btnBag.setNoticVis(e.modelBag.checkBagTip()), e.modelBag.checkRL() ? t.btnBag.addImgTR("MainScreen_json.bm_full") : t.btnBag.removeImg("MainScreen_json.bm_full"), t.invalidFlag = 0, t.checkQiXiRed(), t.checkLuckyRollRed()
    }, e.prototype.checkLuckyRollRed = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(5);
        if (t) {
            var e = t.getChildByID(34);
            if (e) {
                var i = t.getBtn();
                GameGlobal.modelBag.getItemCount(1102) > 0 || GameGlobal.modelBag.getItemCount(1103) > 0 || GameGlobal.modelXiaoFeiAct.freeCs > 0 ? i.setNoticVis(!0) : i.setNoticVis(!1)
            }
        }
    }, e.prototype.checkQiXiRed = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(22);
        if (t) {
            var e = Util.parseIntStr(CFG_Param.LIB[10].key)[2],
                i = GameGlobal.modelBag.getItemCount(1217),
                o = i >= e,
                n = t.getBtn();
            n.setNoticVis(o || ModelQiXiYouNi.red)
        }
    }, e.prototype.onFriendCall = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.FRIEND_CALL, !0) && this.openView(FriendBack.FriendBackView)
    }, e.prototype.updateMissionState = function () {
        var t = NoticeHDMgr.getAllNotice(),
            e = ModelCZWAR.Notice(),
            i = t || e;
        this.imgHuoDongTip.visible = i
    }, e
}(BaseEUIView);
__reflect(VTopActivity.prototype, "VTopActivity", ["eui.UIComponent", "egret.DisplayObject"]);
var ChatEvent = function () {
    function t() {}
    return t.pre = "CHAT_EVENT_", t.CHOOSE_WORD = t.pre + "CHOOSE_WORD", t.QUIT_ALL_CHENNEL = t.pre + "QUIT_ALL_CHENNEL", t
}();
__reflect(ChatEvent.prototype, "ChatEvent");
var ChatItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.numLines = 1, e.faces = [], e.lbContent = new egret.TextField, e.lbContent.size = 24, e.lbContent.lineSpacing = 3, e.lbContent.touchEnabled = !0, e.lbContent.textColor = 15395502, e.addChild(e.lbContent), e.vipBm = new eui.Image, e.vipBm.touchEnabled = !1, e.vipBm.y = 2, e.vipTxt = new egret.TextField, e.vipTxt.size = 24, e.lbContent.addEventListener(egret.TextEvent.LINK, e.onLink, e), e
    }
    return __extends(e, t), e.create = function (t) {
        var i = e.P.pop() || new e;
        return i && i.init(t) ? i : void 0
    }, e.prototype.init = function (t) {
        return e.SCROLLERWIDTH = t || e.SCROLLERWIDTH, this.lbContent.width = e.SCROLLERWIDTH, !0
    }, e.prototype.clean = function () {
        var t = this.faces.length;
        if (t > 0) {
            for (var e = 0; t > e; e++) this.removeChild(this.faces[e]);
            this.faces.length = 0
        }
    }, e.prototype.getNameStr = function () {
        var t = "";
        if (!this.vo.sys) {
            var e = this.vo.sex == Sex.MAN ? "#84dbFF" : "#ffb5e9";
            t = GameGlobal.modelRole.voMine.id == this.vo.roleId ? HtmlUtil.fontNoSize(this.vo.roleName, e) : HtmlUtil.createLink(this.vo.roleName, !0, "roleName", e)
        }
        return t
    }, e.prototype.initView = function () {
        this.clean();
        var t = this.getNameStr(),
            e = t;
        this.vo.sys && (e = t + this.vo.roleName), this.vipTxt.textFlow = HtmlUtil.parse(e);
        var i = this.vipTxt.textWidth;
        this.vipBm.source = "";
        var o;
        this.vo.viplv > 0 ? (DisplayUtil.addBy(this.vipBm, this, 0), this.vo.viplv < 10 ? this.vipBm.source = "num_json.v" : this.vipBm.source = "num_json.v", this.vipBm.x = i + 2, o = "    ") : (DisplayUtil.remove(this.vipBm), o = "");
        var n;
        n = e ? e + o + ":" + this.getContentStr() : this.getContentStr(), this.analyzeEmoji(n), this.height = this.lbContent.textHeight
    }, e.prototype.getContentStr = function () {
        return this.vo.content
    }, e.prototype.analyzeEmoji = function (t) {
        var i = t.split(e.PATTERN),
            o = "",
            n = 0;
        this.lbContent.text = "";
        for (var a = 0, s = i.length; s > a; a++) {
            var r = i[a];
            if (r) {
                if (0 == r.indexOf("#") && 3 == r.indexOf("#", 2)) {
                    var l = r.substring(1, 3);
                    if (Number(l) > 0 && Number(l) <= 5) {
                        var h = new eui.Image;
                        this.addChild(h), this.faces.push(h), h.source = "faceIcon_json.FC" + l;
                        var c = this.lbContent.$getLinesArr();
                        c && c.length && (n = c.length - 1, h.x = c[n].width, h.y = 35 * n - 5, h.x > e.SCROLLERWIDTH - 40 && (h.y = 35 * (n + 1) - 5, h.x = 0, o += "\n")), o += "      "
                    }
                } else o += r;
                try {
                    this.lbContent.textFlow = HtmlUtil.HTMLPARSER.parse(o)
                } catch (p) {
                    this.lbContent.text = "n"
                }
            }
        }
    }, e.prototype.onLink = function (t) {
        t.stopImmediatePropagation();
        var i = t.text;
        "roleName" == i ? GameGlobal.modelChat.CG473(this.vo.roleId) : "goToMpBattle" == i ? GameGlobal.modelMPBattle.tryToJoinMpBattle() : e.onCommonLink(i)
    }, e.onCommonLink = function (t) {
        var e = t.split(":");
        if (e) {
            var i = e[0];
            if (i == BroadCastMgr.TYPE_1_FBQZ) {
                if (GameGlobal.modelRole.voMine.id == parseInt(e[1])) return;
                ModelBattle.canEnterBtl(ModelBattle.BT_GQHELP) ? GameGlobal.modelGuanqia.CG1115(e[1], e[2]) : ViewText.text("战斗中不能协助")
            } else if (i == BroadCastMgr.TYPE_2_PET) GameGlobal.modelPet.CG_XYCHECK(parseInt(e[1]), parseInt(e[2]));
            else if (i == BroadCastMgr.TYPE_3_ZDFB) {
                if (!CFG_COMMOND.canDo(UIConst.ZDFBPAGE)) return;
                if (GameGlobal.modelRole.voMine.id == parseInt(e[1])) return void ViewText.text("你已经在队伍中,不能加入");
                ModelBattle.canEnterBtl() && GameGlobal.modelCrossTeam.CG1261(parseInt(e[2]))
            } else if (i == BroadCastMgr.TYPE_4_GANGFB) {
                if (GameGlobal.modelRole.voMine.id == parseInt(e[1])) return;
                ModelBattle.canEnterBtl() && GameGlobal.modelmenpai.CG871(parseInt(e[2]))
            } else if (i == BroadCastMgr.TYPE_5_GANGZR) GameGlobal.modelmenpai.CG825(1, parseInt(e[1]));
            else if (i == BroadCastMgr.TYPE_6_GANGBOSS) GameGlobal.layerMgr.isOpenView(UIConst.MENPAI) || GameGlobal.layerMgr.open(UIConst.MENPAI), GameGlobal.layerMgr.isOpenView(UIConst.MPBOSS) || GameGlobal.layerMgr.open(UIConst.MPBOSS);
            else if (i == BroadCastMgr.TYPE_7_WDTD) {
                if (!CFG_COMMOND.canDo(1051)) return;
                if (GameGlobal.modelRole.voMine.id == parseInt(e[1])) return;
                ModelBattle.canEnterBtl() && (ModelWDTD.isfromchat = !0, ModelWDTD.charfbID = parseInt(e[3]), GameGlobal.modelWDTD.CG1661(parseInt(e[2])))
            } else if (i == BroadCastMgr.TYPE_8_FUWEN) {
                var o = parseInt(e[1]),
                    n = parseInt(e[2]),
                    a = parseInt(e[3]),
                    s = parseInt(e[4]);
                GameGlobal.modelhb.CG2663(o, n, a, s)
            } else if (i == BroadCastMgr.FISHROOM) {
                var r = parseInt(e[1]);
                GameGlobal.modelFish.getActRTime() >= 10 ? GameGlobal.modelFish.checkScene() ? GameGlobal.modelFish.mineRoomID != r ? GameGlobal.modelFish.CG_CHANGEROOM(r) : ViewText.text("您已在该房间") : GameGlobal.modelFish.tryJoinFishing() : ViewText.text("活动已关闭")
            } else if (i == BroadCastMgr.TYPE_10_CZWAR) {
                if (!CFG_COMMOND.canDo(1074)) return;
                Vo_CZWARItem.isZL() ? ViewAlert.show("是否退出占领当前职位,前往挑战？", function () {
                    GameGlobal.modelCZWAR.CG2887(parseInt(e[1]), 2)
                }) : GameGlobal.modelCZWAR.CG2887(parseInt(e[1]), 2)
            } else if (i == BroadCastMgr.TYPE_11_ZHUOCHONGXZ) GameGlobal.modelPet.CG_JOIN(parseInt(e[1]));
            else if (i == BroadCastMgr.TYPE_12_SCLQ) {
                var l = GameGlobal.layerMgr.getView(UIConst.LEFTUI);
                if (l && !l.btnSC.parent) return void GameGlobal.layerMgr.open(UIConst.RECHARGE);
                GameGlobal.layerMgr.open(UIConst.SHOUCHONGPAGE), GameGlobal.layerMgr.open(UIConst.SHOUCHONG, parseInt(e[1]))
            }
        }
    }, e.prototype.setData = function (t) {
        this.vo = t, this.initView()
    }, e.prototype.dispose = function () {
        for (var t = 0, i = this.faces.length; i > t; t++) {
            var o = this.faces[t];
            o.parent.removeChild(o)
        }
        this.faces.length = 0, e.P.push(this)
    }, e.P = [], e.SCROLLERWIDTH = 600, e.PATTERN = /(\#[0-9]{2}\#)|(^\#.*^\#)/, e
}(eui.Component);
__reflect(ChatItem.prototype, "ChatItem");
var ChatVo = function () {
    function t() {
        this.chanl = EChatChannel.WORD, this.sys = !1, this.roleName = "A", this.viplv = 0, this.content = "", this.time = 0
    }
    return t
}();
__reflect(ChatVo.prototype, "ChatVo");
var CFG_BaoShi = function () {
    function t() {}
    return t.LIB = {
        0: {
            attr: [110, 20]
        },
        1: {
            attr: [110, 11, 111, 10, 112, 10]
        },
        2: {
            attr: [111, 20]
        },
        3: {
            attr: [112, 20]
        },
        4: {
            attr: [113, 2]
        },
        5: {
            attr: [113, 2]
        },
        6: {
            attr: [110, 4, 113, 1]
        },
        7: {
            attr: [110, 4, 113, 1]
        }
    }, t
}();
__reflect(CFG_BaoShi.prototype, "CFG_BaoShi");
var Channl;
! function (t) {
    t[t.COM = 1] = "COM", t[t.WOR = 2] = "WOR", t[t.TEAM = 4] = "TEAM", t[t.PARTY = 8] = "PARTY", t[t.KUAFU = 16] = "KUAFU", t[t.PAOMA = 32] = "PAOMA"
}(Channl || (Channl = {}));
var DtTransfer = function () {
    function t() {}
    return t.chanExCh = function (e, i, o) {
        var n = CFG_Brocast.getCfgByid(e);
        if (!n) return void ViewText.text("errorBrID:" + e);
        if (n.qudaoid == E_PF_CONFIG_TYPE.LOCAL || n.qudaoid == AppConfig.pftype) {
            var a = n.show,
                s = void 0,
                r = BroadCastMgr.repText(n.content, i, n.key, o),
                l = GameGlobal.modelChat;
            a & Channl.COM && (s = new ChatVo, s.chanl = EChatChannel.GENERAL, s.content = r, s.roleName = t.typeNames[n.leixing], o && o.length > 0 && 6 == n.leixing && (s.roleName = "<font color='#84dbFF'>" + o + "</font>"), s.sys = !0, l.addChatMsg(s, !0, !1)), a & Channl.WOR && (s = new ChatVo, s.chanl = EChatChannel.WORD, s.content = r, s.roleName = t.typeNames[n.leixing], o && o.length > 0 && (s.roleName = "<font color='#84dbFF'>" + o + "</font>"), s.sys = !0, l.addChatMsg(s, !0, !1)), a & Channl.TEAM && (s = new ChatVo, s.chanl = EChatChannel.TEAM, s.content = r, s.roleName = t.typeNames[n.leixing], o && o.length > 0 && (s.roleName = "<font color='#84dbFF'>" + o + "</font>"), s.sys = !0, l.addChatMsg(s, !0, !1)), a & Channl.PARTY && (s = new ChatVo, s.chanl = EChatChannel.GANG, s.content = r, s.roleName = t.typeNames[n.leixing], o && o.length > 0 && (s.roleName = "<font color='#84dbFF'>" + o + "</font>"), s.sys = !0, l.addChatMsg(s, !0, !1)), a & Channl.KUAFU && (s = new ChatVo, s.chanl = EChatChannel.CROSS, s.content = r, s.roleName = t.typeNames[n.leixing], o && o.length > 0 && (s.roleName = "<font color='#84dbFF'>" + o + "</font>"), s.sys = !0, GameGlobal.modelChat.addChatMsg(s, !0, !1)), a & Channl.PAOMA && GameGlobal.layerMgr.open(UIConst.MARQUE, r)
        }
    }, t.attExCh = function (t) {
        switch (t) {
            case 1e3:
        }
    }, t.initRadioID = function () {
        GameGlobal.modelChat.radioByTime = [], GameGlobal.modelChat.radioLogin = [];
        for (var t = CFG_Brocast.dic.values, e = 0, i = t.length; i > e; e++) {
            var o = t[e],
                n = o.type;
            1 == n ? GameGlobal.modelChat.radioByTime.push(o.ID) : 2 == n && GameGlobal.modelChat.radioLogin.push(o.ID)
        }
    }, t.typeNames = ["", "<font color='#84dbFF'>[系统]</font>", "<font color='#84dbFF'>[公告]</font>", "<font color='#84dbFF'>[GM]</font>", "<font color='#84dbFF'>[帮派公告]</font>", "", "应该为角色名"], t
}();
__reflect(DtTransfer.prototype, "DtTransfer");
var EChatChannel;
! function (t) {
    t[t.undefined = 0] = "undefined", t[t.GENERAL = 1] = "GENERAL", t[t.WORD = 2] = "WORD", t[t.TEAM = 3] = "TEAM", t[t.GANG = 4] = "GANG", t[t.CROSS = 5] = "CROSS", t[t.MAR_Q = 6] = "MAR_Q", t[t.CAMP_WAR = 7] = "CAMP_WAR", t[t.PRIVATE = 8] = "PRIVATE"
}(EChatChannel || (EChatChannel = {}));
var EChatProto;
! function (t) {
    t[t.JOIN_CHANNEL = 475] = "JOIN_CHANNEL", t[t.QUIT_CHANNEL = 477] = "QUIT_CHANNEL"
}(EChatProto || (EChatProto = {}));
var Model_Chat = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.radioLogin = [], e.radioByTime = [], e.msgXinShou = [], e.chatInfosMap = {}, e
    }
    return __extends(e, t), e.prototype.listenServ = function (t) {
        var e = this;
        e.socket = t, t.regHand(452, e.GC452, e), t.regHand(454, e.GC454, e), t.regHand(456, e.GC456, e), t.regHand(458, e.GC458, e), t.regHand(460, e.GC460, e), t.regHand(462, e.GC462, e), t.regHand(472, e.GC472, e), t.regHand(474, e.GC474, e)
    }, e.prototype.CG451 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeUTF(e), this.sendSocket(451, i)
    }, e.prototype.GC452 = function (t, e) {
        var i = t.initChatVo(e);
        egret.log("收到频道" + i.chanl + "的聊天信息：" + i.content), t.addChatMsg(i)
    }, e.prototype.GC454 = function (t, e) {
        e.readByte()
    }, e.prototype.GC456 = function (t, e) {
        var i = e.readInt(),
            o = e.readUTF(),
            n = e.readUTF();
        DtTransfer.chanExCh(i, o, n)
    }, e.prototype.GC458 = function (t, e) {
        var i = e.readByte(),
            o = e.readByte(),
            n = ["", "", "未达聊天等级", "聊天内容过长", "", "已到聊天次数上限", "不够元宝", "有敏感字", "类型不存在", "异常", "跨服服务器未开启"];
        1 != i && (4 == i ? ViewText.text("下次发言剩余时间" + o + "秒") : ViewText.text(n[i]))
    }, e.prototype.GC460 = function (t, e) {
        for (var i = e.readShort(), o = [], n = 0; i > n; n++) {
            var a = t.initChatVo(e);
            o.push(a)
        }
        o.sort(function (t, e) {
            return t.time - e.time
        });
        for (var n = 0; i > n; n++) t.addChatMsg(o[n])
    }, e.prototype.initChatVo = function (t) {
        var i = new ChatVo;
        return i.chanl = t.readByte(), i.roleId = t.readLong(), i.sex = t.readByte(), i.job = t.readByte(), i.roleName = t.readUTF(), i.viplv = t.readByte(), i.content = e.entitiesToUtf16(t.readUTF()), i.time = t.readInt(), i
    }, e.prototype.addChatMsg = function (t, i, o) {
        void 0 === i && (i = !0), void 0 === o && (o = !0);
        var n = this.chatInfosMap[t.chanl];
        n || (n = this.chatInfosMap[t.chanl] = []), n.length >= 20 && n.shift(), n.push(t);
        var a = t.chanl != EChatChannel.CAMP_WAR && t.chanl != EChatChannel.CROSS;
        o && a && this.addZhongHe(t), i && this.notify(e.GC452, t)
    }, e.prototype.addZhongHe = function (t) {
        var e = GameGlobal.modelChat,
            i = e.chatInfosMap[EChatChannel.GENERAL];
        i || (i = e.chatInfosMap[EChatChannel.GENERAL] = []), i.length >= 20 && i.shift(), i.push(t)
    }, e.prototype.joinChannel = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(EChatProto.JOIN_CHANNEL, e)
    }, e.prototype.quitChannel = function (t) {
        this.cleanChannel(t);
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(EChatProto.QUIT_CHANNEL, e)
    }, e.prototype.cleanChannel = function (t) {
        var e = GameGlobal.modelChat.chatInfosMap;
        e[t] && (e[t].length = 0);
        for (var i = e[EChatChannel.GENERAL], o = i.length; o--;) {
            var n = i[o];
            n.chanl == t && i.splice(o, 1)
        }
    }, e.prototype.GC462 = function (t, e) {
        e.readUTF()
    }, e.prototype.CG471 = function (t, e) {
        var i = this.getBytes();
        i.writeUTF(t), i.writeInt(e), this.sendSocket(471, i)
    }, e.prototype.GC472 = function (t, e) {
        e.readByte()
    }, e.prototype.CG473 = function (t) {
        if (t) {
            var e = this.getBytes();
            e && (e.writeLong(t), this.sendSocket(473, e))
        }
    }, e.prototype.GC474 = function (t, e) {
        var i = e.readUTF(),
            o = JSON.parse(i);
        GameGlobal.layerMgr.open(UIConst.VROLEINFO, o)
    }, e.utf16ToEntities = function (t) {
        for (var i = t, o = 0, n = t.length; n > o; o++) try {
            var a = t.charCodeAt(o);
            if (e.isEmojiChar(a)) {
                var s = a.toString(16);
                i = i.replace(t.charAt(o), "ф" + s + "а")
            }
        } catch (r) {
            i = i.replace(t.charAt(o), "*")
        }
        return i
    }, e.entitiesToUtf16 = function (t) {
        var i = /ф[0-9a-fA-F]{4}а/g,
            o = t.match(i);
        if (o) {
            o.length > 8 && (o.length = 8);
            for (var n = 0, a = o.length; a > n; n++) try {
                var s = o[n];
                if (e.invalidEntitiesMap[s]) {
                    t = t.replace(s, "?");
                    continue
                }
                var r = "\\u" + s.substring(1, 5),
                    l = '{"ustr": "' + r + '"}';
                r = JSON.parse(l).ustr, t = t.replace(o[n], r)
            } catch (h) {
                t = t.replace(o[n], "*")
            }
        }
        return t
    }, e.isEmojiChar = function (t) {
        return t >= 9728 && 10175 >= t || 12349 == t || 8265 == t || 8252 == t || t >= 8192 && 8207 >= t || t >= 8232 && 8239 >= t || 8287 == t || t >= 8293 && 8303 >= t || t >= 8448 && 8527 >= t || t >= 8960 && 9215 >= t || t >= 11008 && 11263 >= t || t >= 10496 && 10623 >= t || t >= 12800 && 13055 >= t || t >= 55296 && 57343 >= t || t >= 57344 && 63743 >= t || t >= 65024 && 65039 >= t || t >= 65536
    }, e.GC452 = "gc452", e.MSG_SENDCHAT = "MSG_SENDCHAT", e.TYPE_PARTY = 4, e.TYPE_PAO_MA_DENG = 6, e.invalidEntitiesMap = {
        "фdc68а": 1,
        "ф200dа": 1,
        "ф2764а": 1,
        "фfe0fа": 1
    }, e
}(BaseModel);
__reflect(Model_Chat.prototype, "Model_Chat");
var VChatTbtn = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._text = "", e._sel = !1, e.skinName = "resource/eui_skins/game/chat/ChatTbtn.exml", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.text = this._text
    }, Object.defineProperty(e.prototype, "text", {
        get: function () {
            return this.lb ? this.lb.text : void 0
        },
        set: function (t) {
            this._text = t, this.lb && (this.lb.text = t)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel = t, t ? this.currentState = "selected" : this.currentState = "normal"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VChatTbtn.prototype, "VChatTbtn");
var ViewChatXinShouMsg = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/ChatXinShouMsg.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.rectExml), this.initExcel()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.scrMsgExml.scrollPolicyH = eui.ScrollPolicy.OFF, this.listMsgExml.itemRenderer = ViewChatXinShouMsgItem, this.arrayColMsg = new eui.ArrayCollection, this.listMsgExml.dataProvider = this.arrayColMsg, this.arrayColMsg.source = GameGlobal.modelChat.msgXinShou
    }, e.prototype.onClose = function () {}, e.prototype.initExcel = function () {
        GameGlobal.modelChat.msgXinShou = [];
        for (var t = [], e = Config.getConfig(gbxs_603), i = e.values, o = 0, n = i.length; n > o; o++) {
            var a = i[o];
            1 == a.type && t.push({
                id: a.ID,
                content: a.content
            })
        }
        GameGlobal.modelChat.msgXinShou = t
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(ViewChatXinShouMsg.prototype, "ViewChatXinShouMsg");
var ViewChatXinShouMsgItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/ChatXinShouMsgItem.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.selMsg, this)
    }, e.prototype.dataChanged = function () {
        var t = this.data;
        this.lbText.text = t.content
    }, e.prototype.selMsg = function () {
        EventCenter.sendMsg(ChatEvent.CHOOSE_WORD, this.data.content), GameGlobal.layerMgr.close(UIConst.BOTTOM_XIN_SHOU)
    }, e
}(eui.ItemRenderer);
__reflect(ViewChatXinShouMsgItem.prototype, "ViewChatXinShouMsgItem");
var VMarQ = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.arr = [], e.skinName = "resource/eui_skins/game/chat/MarQSkin.exml", e.touchChildren = !1, e.touchEnabled = !1, e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.mk = new egret.Shape, this.addChild(this.mk), this.mk.x = 165, this.mk.y = 160;
        var e = this.mk.graphics;
        e.beginFill(0, 1), e.drawRect(0, 0, 400, 30), e.endFill(), this.txt.mask = this.mk
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.arr.push(e), this.isT || (this.isT = !0, this.run())
    }, e.prototype.run = function () {
        var t = this;
        if (0 == this.arr.length) return GameGlobal.layerMgr.close(UIConst.MARQUE), void(this.isT = !1);
        var e = this.arr.pop();
        this.txt.textFlow = HtmlUtil.parse(e);
        var i = this.bg.x + this.bg.width,
            o = this.bg.x - this.txt.width;
        this.txt.x = i, egret.Tween.get(this.txt).to({
            x: o
        }, 1e4).call(function () {
            t.run()
        }, this)
    }, e
}(BaseEUIView);
__reflect(VMarQ.prototype, "VMarQ");
var VRoleInfo = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/chat/VRoleInfoSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "玩家信息", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.imageTxt = new ImageText, this.imageTxt.container = this.zhanLiCont, this.imageTxt.charFunc = ImageText.STRFUNC, this.role = UIRole.create(), this.partCont.addChild(this.role), this.partCont.scaleX = this.partCont.scaleY = 1.5, this.info = new RInfo, this.vipImgText = new ImageText, this.vipImgText.charFunc = ImageText.VIPFUNC, this.vipImgText.container = this.vipGroup, this.container.itemRenderer = RoleInfoItm1, this.container.dataProvider = this.sourceData = new eui.ArrayCollection, this.btnFocus.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onFocusT, this), this.btnSiLiaoExml.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSiLiao, this), this.container.addEventListener(eui.UIEvent.CHANGE, this.onListItemSel, this)
    }, e.prototype.getIconDatas = function (t) {
        var e = [];
        if (t.petID && t.petID.length > 0)
            for (var i = 0, o = t.petID.length; o > i; i++) {
                var n = t.petID[i],
                    a = CFG_Pet.PETLIB[n.id].icon;
                e.push({
                    icon: a,
                    cfgId: n.id,
                    type: 1
                })
            }
        if (t.huoBanID && t.huoBanID.length > 0)
            for (var i = 0, o = t.huoBanID.length; o > i; i++) {
                var s = t.huoBanID[i],
                    a = CFG_HUOBAN1.LIB[s.id].icon;
                e.push({
                    icon: a,
                    cfgId: s.id,
                    type: 2
                })
            }
        return e
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this.info;
        if (i.clearProperty(), i.update(e), this.imageTxt.setText("z" + i.str), this.txtName.text = i.hname, this.txtServ.text = "服务器：" + i.zoneName, this.txtNL.text = "昵称: " + i.hname, this.txtLv.text = "等级: " + i.lv, this.txtSex.text = "性别: " + (i.sex == Sex.MAN ? "男" : "女"), this.txtParty.text = "门派: " + (i.gangName ? i.gangName : "无"), this.groupTeQuan.removeChildren(), i.vipLv > 0) {
            var o = "V" + i.vipLv,
                n = o.length;
            this.vipImgText.fx = 45 - (52 + 14 * (n - 1) >> 1), this.vipImgText.fy = 8, this.vipImgText.setText(o), this.groupTeQuan.addChild(this.vipGroup)
        }
        i.yueka > 0 && this.groupTeQuan.addChild(this.iconYueKa), i.zhouka > 0 && this.groupTeQuan.addChild(this.iconZhouKa), this.icon.source = IconUtil.getRoleHead(i.hjob);
        var a = this.role;
        a.setHalo(i.guangHuanId), a.setBody(i.fashionID ? i.fashionID : i.hjob), a.setHorse(i.rideId), a.setWeapon(i.sbId), a.setWing(i.wingId), a.setWay(3), a.validParts(), a.play(), DisplayUtil.fillDataAC(this.sourceData, this.getIconDatas(i)), this.btnSiLiaoExml.visible = i.hid != GameGlobal.modelRole.voMine.id
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.role.stop()
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.onFocusT = function () {
        GameGlobal.modelFriend.addFriends([this.info.hid])
    }, e.prototype.onSiLiao = function () {
        var t = VoSiLiao.update(this.info.hid, this.info.hjob, this.info.hname, 1, []);
        GameGlobal.modelsiliao.CG415(this.info.hid, ""), GameGlobal.layerMgr.open(UIConst.SI_LIAO, t)
    }, e.prototype.onListItemSel = function (t) {
        var e = t.target,
            i = e.selectedItem;
        1 == i.type ? GameGlobal.modelPet.CG_XYCHECK(parseInt(this.info.hid.toString()), parseInt(i.cfgId.toString())) : 2 == i.type && GameGlobal.modelhb.CG677(parseInt(this.info.hid.toString()), parseInt(i.cfgId.toString())), e.selectedIndex = -1
    }, e
}(BaseEUIView);
__reflect(VRoleInfo.prototype, "VRoleInfo");
var RInfo = function () {
    function t() {
        this.petIds = []
    }
    return t.prototype.update = function (t) {
        var e = STD_ATTR.dic;
        for (var i in t) {
            var o = parseInt(i),
                n = e.get(o);
            n ? this[n.key] = t[i] : console.log("115表没有id：" + i)
        }
    }, t.prototype.clearProperty = function () {
        for (var t in this) "function" != typeof this[t] && (this[t] = null)
    }, t
}();
__reflect(RInfo.prototype, "RInfo");
var RoleInfoItm1 = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "RoleInfoItm1Skin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            if (this._data = t, !t) return void(this.icon.source = null);
            var e = t.icon;
            this.icon.source = IconUtil.getIconUrl(e)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(RoleInfoItm1.prototype, "RoleInfoItm1");
var ViewLeftUI = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.ispopState = !0, e.waitJoinBtns = [], e.SC5beibool = !0, e.YYFDBtnbool = !0, e.ACTBtnbool = !0, e.eightYuanGiftbool = !0, e.returnMissionBool = !0, e.skinName = "LeftUISkin", e
    }
    return __extends(e, t), e.prototype.guideZM = function () {
        this.btnZM.parent && QuestGuideArrow.getIns().guideViewCenter(this.btnZM)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this,
            i = egret.TouchEvent.TOUCH_TAP;
        e.popBtn.addEventListener(i, e.popBtnT, e), e.btnDailyQuest.addEventListener(i, this.onDailyQuestT, e), e.btnYueKa.addEventListener(i, this.onYueKaT, e), e.btnSeven.addEventListener(i, e.openSevenLogin, e), e.btnSC.addEventListener(i, e.onShouChong, e), e.btnLJCZ7.addEventListener(i, e.onLJCZ7Touch, e), e.btnTarget.addEventListener(i, e.onTarget, e), e.btnDaliy.addEventListener(i, e.openDaliyT, e), e.btnZM.addEventListener(i, e.onZhaoMuT, e), e.btnWeek.addEventListener(i, e.onWeek, e), e.btnSC5bei.addEventListener(i, function () {
            GameGlobal.layerMgr.open(UIConst.SC5BEI)
        }, e), platform.canRechage || (DisplayUtil.remove(this.btnSC), DisplayUtil.remove(this.btnYueKa)), e.btnYYFD.addEventListener(i, e.onYYFDT, e), e.btnEightYuanGift.addEventListener(i, e.onEightYuanGift, e), this.btnReturnMission.addEventListener(i, e.onReturnMission, this)
    }, e.prototype.popBtnT = function () {
        var t = this;
        this.popBtn.touchEnabled = this.popBtn.touchChildren = !1, this.ispopState = !this.ispopState, this.ispopState ? (this.cont.scaleY = 0, this.cont.visible = !0, egret.Tween.get(this.cont).to({
            scaleY: 1
        }, 300).call(function () {
            t.imgpop.source = "MainScreen_json.pop_close", t.popBtn.touchEnabled = t.popBtn.touchChildren = !0
        }, this), this.imgpopred.visible = !1, GameGlobal.tick.removeInterv(this.checkpopBtnRed, this)) : (this.cont.scaleY = 1, egret.Tween.get(this.cont).to({
            scaleY: 0
        }, 300).call(function () {
            t.cont.visible = !1, t.imgpop.source = "MainScreen_json.pop_open", t.checkpopBtnRed(t), GameGlobal.tick.addInterv(t.checkpopBtnRed, 1e3, t), t.popBtn.touchEnabled = t.popBtn.touchChildren = !0
        }, this))
    }, e.prototype.checkpopBtnRed = function (t) {
        for (var e = 0; e < t.grp.$children.length; e++) {
            var i = t.grp.$children[e];
            if (i.getNoticVis()) return void(AppConfig.isTecentApp || (t.imgpopred.visible = !0))
        }
        for (e = 0; e < t.btnGrp.$children.length; e++) {
            var i = t.btnGrp.$children[e];
            if (i.getNoticVis()) return void(AppConfig.isTecentApp || (t.imgpopred.visible = !0))
        }
        t.imgpopred.visible = !1
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        GameGlobal.modelsevenlogin.on(ModelSevenLogin.GOTOVER, i.sevenOver, i), GameGlobal.modelsevenlogin.on(ModelSevenLogin.SORTDATA, i.sevenRedIcon, i), GameGlobal.modelDaliy.on(ModelDaliy.NOTICE, i.DaliyIcon, i), GameGlobal.modelTarget.on(ModelTarget.MSG_NOTIC, i.onTarNotic, i), GameGlobal.modelchouka.on(Modelchouka.CHOUKA, i.ZmRedIcon, i), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, i.ZmRedIcon, i), GameGlobal.modelYYFD.on(ModelYYFD.UPDATE, i.cheYYFDvisRed, i), EventCenter.addMsg(EightYuanGift.Event.UPDATE_GIFT, i.check8YuanGiftVisRed, i), GameGlobal.modelAct.on(Model_Act.MSG_ACTLIST_UPDATE, i.updateActBtn, i), GameGlobal.modelAct.on(Model_Act.MSG_ACTRED, i.updateActBtn, i), GameGlobal.modelshouchong.on(ModelShouChong.msg_data, i.updateSCJJTZNot, i), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, i.onRoleMSGChange, i), GameGlobal.modelWeekender.on(ModelWeekender.MSG_OPEN, i.weekisOpen, i), GameGlobal.modelWeekender.on(ModelWeekender.MSG_UPDATE, i.weekRedT, i), GameGlobal.modelMRSC.on(ModelMRSC.MSG_UPDATE_SC5BEI, i.checkSCtb, i), EventCenter.addMsg(FriendBack.Event.OPEN, this.checkReturnMission, this), EventCenter.addMsg(FriendBack.Event.UPDATE_MISSION_NOTICE, this.missionNotice, this), i.checkSCtb(), i.CGgetNotice(), i.hideSCJJTZ(), i.onTarNotic(), i.updateActBtn();
        var o = GameGlobal.modelRole.voMine.level,
            n = CFG_COMMOND.LIB;
        this.waitJoinBtns;
        o < n[1048].openlv && (this.btnTarget.openlv = n[1048].openlv, this.addToWaitJointBtns(this.btnTarget)), o < n[1085].openlv && (this.btnDailyQuest.openlv = n[1085].openlv, this.addToWaitJointBtns(this.btnDailyQuest)), o < n[1049].openlv && (this.btnDaliy.openlv = n[1049].openlv, this.addToWaitJointBtns(this.btnDaliy)), o < n[1041].openlv && (this.btnZM.openlv = n[1041].openlv, this.addToWaitJointBtns(this.btnZM)), o < n[1061].openlv && (this.btnSeven.openlv = n[1061].openlv, this.addToWaitJointBtns(this.btnSeven)), i.weekisOpen(), GameGlobal.tick.addInterv(this.checkShowTip, 200, this, !0)
    }, e.prototype.checkSCtb = function () {
        if (ModelMRSC.is5bei) {
            if (DisplayUtil.remove(this.btnSC5bei), platform.canRechage && !this.btnSC.parent) {
                var t = !platform.canRechage || NoticeSCJJTZ.hide();
                t || DisplayUtil.addBy(this.btnSC, this.grp)
            }
        } else if (platform.canRechage)
            if (this.btnSC5bei.parent || DisplayUtil.addBy(this.btnSC5bei, this.grp), GameGlobal.modelRole.voMine.level >= 50) {
                if (!this.btnSC.parent) {
                    var t = !platform.canRechage || NoticeSCJJTZ.hide();
                    t || DisplayUtil.addBy(this.btnSC, this.grp)
                }
            } else DisplayUtil.remove(this.btnSC)
    }, e.prototype.addToWaitJointBtns = function (t) {
        -1 == this.waitJoinBtns.indexOf(t) && (t.bindParent = t.$parent, DisplayUtil.remove(t), this.waitJoinBtns.push(t))
    }, e.prototype.checkAddJoinBtn = function () {
        for (var t = GameGlobal.modelRole.voMine.level, e = this.waitJoinBtns.length - 1; e >= 0; e--) {
            var i = this.waitJoinBtns[e],
                o = i.openlv;
            t >= o && (DisplayUtil.addBySort(i, i.bindParent, "sortIndex"), this.waitJoinBtns.splice(e, 1))
        }
    }, e.prototype.weekRedT = function () {
        if (ModelWeekender.weekfristTip) return void this.btnWeek.setNoticVis(!0);
        var t = Vo_WeekLC.Notice();
        this.btnWeek.setNoticVis(t)
    }, e.prototype.onYYFDT = function () {
        CFG_COMMOND.isOpen(UIConst.YYFD, !0) && GameGlobal.layerMgr.open(UIConst.YYFD)
    }, e.prototype.onEightYuanGift = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.EIGHT_YUAN_GIFT, !1) && this.openView(EightYuanGift.GiftView)
    }, e.prototype.onReturnMission = function () {
        this.openView(FriendBack.FriendReturnView)
    }, e.prototype.onClose = function () {
        var t = this;
        GameGlobal.modelsevenlogin.off(ModelSevenLogin.GOTOVER, this.sevenOver), GameGlobal.modelsevenlogin.off(ModelSevenLogin.SORTDATA, this.sevenRedIcon), GameGlobal.modelDaliy.off(ModelDaliy.NOTICE, t.DaliyIcon, t), GameGlobal.modelTarget.off(ModelTarget.MSG_NOTIC, t.onTarNotic, t), GameGlobal.modelchouka.off(Modelchouka.CHOUKA, t.ZmRedIcon, t), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, t.ZmRedIcon, t), GameGlobal.modelAct.off(Model_Act.MSG_ACTLIST_UPDATE, t.updateActBtn, t), GameGlobal.modelAct.off(Model_Act.MSG_ACTRED, t.updateActBtn, t), GameGlobal.modelshouchong.off(ModelShouChong.msg_data, t.updateSCJJTZNot, t), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, t.onRoleMSGChange, t), GameGlobal.modelWeekender.off(ModelWeekender.MSG_OPEN, t.weekisOpen, t), GameGlobal.modelWeekender.off(ModelWeekender.MSG_UPDATE, t.weekRedT, t), GameGlobal.modelMRSC.off(ModelMRSC.MSG_UPDATE_SC5BEI, t.checkSCtb, t), GameGlobal.modelYYFD.off(ModelYYFD.UPDATE, t.cheYYFDvisRed, t), EventCenter.removeMsg(EightYuanGift.Event.UPDATE_GIFT, t.check8YuanGiftVisRed, t), EventCenter.removeMsg(FriendBack.Event.OPEN, this.checkReturnMission, this), EventCenter.removeMsg(FriendBack.Event.UPDATE_MISSION_NOTICE, this.missionNotice, this)
    }, e.prototype.onSize = function () {
        var t = GameGlobal.stage;
        this.y = t.stageHeight - 1e3
    }, e.prototype.onRoleMSGChange = function () {
        this.checkAddJoinBtn(), GameGlobal.modelRole.voMine.level >= 50 && this.SC5beibool && (this.SC5beibool = !1, this.checkSCtb()), GameGlobal.modelRole.voMine.level >= CFG_COMMOND.LIB[1121].openlv && this.YYFDBtnbool && (this.YYFDBtnbool = !1, GameGlobal.modelYYFD.CG4443(CFG_YYFD.LIB[1].bh)), GameGlobal.modelRole.voMine.level >= 20 && this.ACTBtnbool && (this.updateActBtn(), this.ACTBtnbool = !1), CFG_COMMOND.isOpen(CFG_COMMOND.EIGHT_YUAN_GIFT, !1) && this.eightYuanGiftbool && (this.eightYuanGiftbool = !1, this.getProxy(EightYuanGift.Proxy).getGiftInfo()), CFG_COMMOND.isOpen(CFG_COMMOND.FRIEND_BACK, !1) && this.returnMissionBool && (this.returnMissionBool = !1, this.getProxy(FriendBack.Proxy).getReturnAwardOpen()), this.checkShowTip(this)
    }, e.prototype.CGgetNotice = function () {
        this.btnZM.setNoticVis(!1), CFG_COMMOND.isOpen(CFG_COMMOND.CHOUKA, !1) && GameGlobal.modelchouka.openUi(), this.btnSeven.setNoticVis(!1), CFG_COMMOND.isOpen(CFG_COMMOND.SEVENLOGIN, !1) && GameGlobal.modelsevenlogin.CG1901(), GameGlobal.modelShiLian.CG1321(), this.btnDaliy.setNoticVis(!1), CFG_COMMOND.isOpen(CFG_COMMOND.DALIY, !1) && GameGlobal.modelDaliy.CG1551(), this.btnSC.setNoticVis(!1), CFG_COMMOND.isOpen(CFG_COMMOND.SHOUCHONGPAGE, !1) && GameGlobal.modelshouchong.CG1871();
        var t = GameGlobal.modelAct.actData.getChildByID(2);
        t && GameGlobal.modelMRSC.CG2061(), CFG_COMMOND.isOpen(CFG_COMMOND.YYFD, !1) ? GameGlobal.modelYYFD.CG4443(CFG_YYFD.LIB[1].bh) : DisplayUtil.remove(this.btnYYFD), CFG_COMMOND.isOpen(CFG_COMMOND.EIGHT_YUAN_GIFT, !1) ? this.getProxy(EightYuanGift.Proxy).getGiftInfo() : DisplayUtil.remove(this.btnEightYuanGift), CFG_COMMOND.isOpen(CFG_COMMOND.FRIEND_BACK, !1) ? (this.getProxy(FriendBack.Proxy).getReturnAwardOpen(), this.getProxy(FriendBack.Proxy).getBackMissionNotice()) : DisplayUtil.remove(this.btnReturnMission)
    }, e.prototype.weekisOpen = function () {
        ModelWeekender.time > 0 && platform.canRechage ? (DisplayUtil.addBy(this.btnWeek, this.grp), ModelWeekender.weekfristTip ? this.btnWeek.setNoticVis(!0) : this.btnWeek.setNoticVis(!1), GameGlobal.modelWeekender.CG3445()) : DisplayUtil.remove(this.btnWeek)
    }, e.prototype.openSevenLogin = function () {
        GameGlobal.layerMgr.open(UIConst.SEVENLOGIN)
    }, e.prototype.onShouChong = function () {
        GameGlobal.layerMgr.open(UIConst.SHOUCHONGPAGE)
    }, e.prototype.onLJCZ7Touch = function () {
        GameGlobal.layerMgr.open(UIConst.ACT, 27)
    }, e.prototype.updateSCJJTZNot = function () {
        var t = platform.canRechage && NoticeSCJJTZ.notice();
        this.btnSC.setNoticVis(t), this.btnSC.isShowEff(platform.canRechage && !NoticeSCJJTZ.has50RMBFinished())
    }, e.prototype.hideSCJJTZ = function () {
        var t = !platform.canRechage || NoticeSCJJTZ.hide();
        t ? (DisplayUtil.remove(this.btnSC), this.hideSCTip()) : this.btnSC.stage || (GameGlobal.modelRole.voMine.level >= 50 || ModelMRSC.is5bei) && DisplayUtil.addBy(this.btnSC, this.grp)
    }, e.prototype.sevenOver = function () {
        DisplayUtil.remove(this.btnSeven)
    }, e.prototype.sevenRedIcon = function () {
        var t = GameGlobal.modelsevenlogin.loginDayed,
            e = GameGlobal.modelsevenlogin.loginDay;
        e > t.length ? this.btnSeven.setNoticVis(!0) : this.btnSeven.setNoticVis(!1)
    }, e.prototype.checkShowTip = function (t) {
        platform.canRechage && (t.checkShowSC5beiTip(), t.checkShowWeekTip());
        var e = GameGlobal.modelshouchong.showLoginSCTip;
        if (e) t.checkShowSCTip();
        else {
            var i = GameGlobal.layerMgr.isOpenView(UIConst.SHOUCHONGTIP);
            if (i) return;
            var o = GameGlobal.modelAct.actData.getChildByID(13);
            o && t.checkShowXSZMTip()
        }
    }, e.prototype.checkShowWeekTip = function () {
        if (ModelWeekender.time > 0 && platform.canRechage && ModelWeekender.weekTip) {
            ModelWeekender.weekTip = !1;
            var t = UIConst.WEEKTIP;
            GameGlobal.layerMgr._regMap[t] || GameGlobal.layerMgr.reg(t, VWeekenderTip, GameGlobal.layerMgr.UI_floorUI), GameGlobal.layerMgr.open(t)
        }
    }, e.prototype.checkShowXSZMTip = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(13);
        if (!t || !CFG_COMMOND.isOpen(CFG_COMMOND.CHOUKA, !1)) return void this.checkShowWeekTip();
        if (Modelchouka.xszmTip) {
            Modelchouka.xszmTip = !1;
            var e = UIConst.ZHAOMUXSTIP;
            GameGlobal.layerMgr._regMap[e] || GameGlobal.layerMgr.reg(e, VZhaoMuXSTip, GameGlobal.layerMgr.UI_floorUI), GameGlobal.layerMgr.open(e)
        }
        if (this.btnZM.parent && !this.imgdi) {
            var i = this.imgdi = new eui.Image;
            i.source = "CM2_json.broBg2", i.scale9Grid = new egret.Rectangle(109, 45, 6, 5), i.horizontalCenter = 0, i.y = 48, i.right = i.left = 0, i.height = 23, DisplayUtil.addBy(i, this.btnZM), this.btnZM.vo = t, this.btnZM.startTime(), this.btnZM.setLbRemainY(50), this.btnZM.setLbRemainColor(16181978)
        }
    }, e.prototype.checkShowSC5beiTip = function () {
        if (platform.canRechage && !ModelMRSC.is5bei && VSC5beiTip.showLoginSC5bei) {
            VSC5beiTip.showLoginSC5bei = !1;
            var t = GameGlobal,
                e = UIConst.SC5BEITIP;
            t.layerMgr._regMap[e] || t.layerMgr.reg(e, VSC5beiTip, t.layerMgr.UI_floorUI), t.layerMgr.open(e)
        }
    }, e.prototype.checkShowSCTip = function () {
        var t = GameGlobal.modelshouchong;
        t.showLoginSCTip && (t.showLoginSCTip = !1)
    }, e.prototype.openSCTip = function () {
        if (platform.canRechage) {
            var t = GameGlobal,
                e = UIConst.SHOUCHONGTIP;
            t.layerMgr._regMap[e] || t.layerMgr.reg(e, VShouChongTip, t.layerMgr.UI_floorUI), t.layerMgr.open(e)
        }
    }, e.prototype.hideSCTip = function () {
        GameGlobal.layerMgr.close(UIConst.SHOUCHONGTG)
    }, e.prototype.updateActBtn = function () {
        var t = GameGlobal.modelAct,
            e = t.actData.getChildByID(1);
        if (e) {
            var i = e.getChildByID(27);
            i && i.getRemainSec() && GameGlobal.modelRole.voMine.level >= 20 ? (DisplayUtil.addBy(this.btnLJCZ7, this.grp), this.btnLJCZ7.setNoticVis(i.isRed)) : DisplayUtil.remove(this.btnLJCZ7)
        } else DisplayUtil.remove(this.btnLJCZ7);
        var o = t.actData.getChildByID(11);
        o ? (Modelchouka.isZkOpen = !0, this.btnZM.setZk(!0, CFG_ZHAOMU.getZkNum(), 50)) : (Modelchouka.isZkOpen = !1, this.btnZM.setZk(!1));
        var n = GameGlobal.modelAct.actData.getChildByID(13);
        if (CFG_COMMOND.isOpen(CFG_COMMOND.CHOUKA, !1))
            if (n) {
                if (this.btnZM.parent && !this.imgdi) {
                    var a = this.imgdi = new eui.Image;
                    a.source = "CM2_json.broBg2", a.scale9Grid = new egret.Rectangle(109, 45, 6, 5), a.horizontalCenter = 0, a.y = 48, a.right = a.left = 0, a.height = 23, DisplayUtil.addBy(a, this.btnZM), this.btnZM.vo = n, this.btnZM.startTime(), this.btnZM.setLbRemainY(50), this.btnZM.setLbRemainColor(16181978)
                }
            } else DisplayUtil.remove(this.imgdi), this.btnZM.endTime()
    }, e.prototype.onTarget = function (t) {
        CFG_COMMOND.isOpen(1048, !0) && GameGlobal.layerMgr.open(UIConst.TARGET)
    }, e.prototype.onDailyQuestT = function () {
        CFG_COMMOND.isOpen(1085, !0) && GameGlobal.layerMgr.open(UIConst.TDAILYPNL)
    }, e.prototype.openDaliyT = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.DALIY, !0) && GameGlobal.layerMgr.open(UIConst.DALIY)
    }, e.prototype.onYueKaT = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.YUEZHOUKA, !0) && GameGlobal.layerMgr.open(UIConst.FULIDATING, UIConst.YUEKA)
    }, e.prototype.onTarNotic = function () {
        var t = GameGlobal;
        CFG_COMMOND.isOpenByCFG(1048) && t.modelTarget.isTargetNotic() ? this.btnTarget.setNoticVis(!0) : this.btnTarget.setNoticVis(!1);
        var e = CFG_COMMOND.isOpenByCFG(1085) && (t.modelTarget.isDailyNotic() || t.modelTarget.isXianJieNotic());
        this.btnDailyQuest.setNoticVis(e)
    }, e.prototype.DaliyIcon = function () {
        this.btnDaliy.$stage && CFG_COMMOND.isOpen(CFG_COMMOND.DALIY, !1) && (this.btnDaliy.setNoticVis(ModelDaliy.Notice || GameGlobal.modelPet.hasCatchPet), this.btnDaliy.setDouble(VZhuDuiLL.NoticeDo))
    }, e.prototype.onZhaoMuT = function () {
        CFG_COMMOND.canDo(CFG_COMMOND.CHOUKA) && GameGlobal.layerMgr.open(UIConst.CHOUKA)
    }, e.prototype.onWeek = function () {
        GameGlobal.layerMgr.open(UIConst.WEEKENDER)
    }, e.prototype.ZmRedIcon = function () {
        if (CFG_COMMOND.isOpen(CFG_COMMOND.CHOUKA, !1)) {
            var t = GameGlobal.modelBag.getItemCount(1016);
            0 == Modelchouka.sTime || t > 0 ? this.btnZM.setNoticVis(!0) : this.btnZM.setNoticVis(!1)
        }
    }, e.prototype.cheYYFDvisRed = function (t) {
        0 == t ? (DisplayUtil.addBy(this.btnYYFD, this.grp, 1), this.btnYYFD.setNoticVis(!0), this.btnYYFD.isShowEff(!0)) : DisplayUtil.remove(this.btnYYFD)
    }, e.prototype.check8YuanGiftVisRed = function () {
        var t = this.getModel(EightYuanGift.Model);
        t.getCanBuyGiftId() > 0 ? (DisplayUtil.addBy(this.btnEightYuanGift, this.grp, 2), this.btnEightYuanGift.setNoticVis(!0), this.btnEightYuanGift.isShowEff(!0)) : DisplayUtil.remove(this.btnEightYuanGift)
    }, e.prototype.checkReturnMission = function () {
        var t = this.getModel(FriendBack.Model);
        t.remainTime > 0 ? DisplayUtil.addBy(this.btnReturnMission, this.grp) : DisplayUtil.remove(this.btnReturnMission)
    }, e.prototype.missionNotice = function (t) {
        var e = t.data;
        this.btnReturnMission && this.btnReturnMission.setNoticVis(e)
    }, e
}(BaseEUIView);
__reflect(ViewLeftUI.prototype, "ViewLeftUI", ["eui.UIComponent", "egret.DisplayObject"]);
var ERightButton;
! function (t) {
    t.QZONE_GIFT = "kongJianGift", t.SHARE = "fShare", t.FRIEND_GIFT = "zyzl", t.STRONGER = "wybq", t.ADD_SHORTCUT = "toDeskIcon", t.VIP = "vipTeQuan", t.SHARE_7_DAYS = "share", t.XIN_YUE_GIFT = "xin_yue_gift"
}(ERightButton || (ERightButton = {}));
var ViewRightUI = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "RightUI", e
    }
    return __extends(e, t), e.prototype.initView = function () {}, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), this.listBtn()
    }, e.prototype.onClose = function () {
        this.removeMsg()
    }, e.prototype.onSize = function () {
        this.x = GameGlobal.stage.stageWidth - 75, this.fullStage()
    }, e.prototype.onReceiveSuccess = function () {
        var t = e.btns[ERightButton.QZONE_GIFT];
        t && t.setNoticVis(!1)
    }, e.prototype.onGiftStatus = function () {
        var t = this.getModel(Cover.Model),
            i = t.isRedPoint(),
            o = e.btns[ERightButton.QZONE_GIFT];
        o ? o.setNoticVis(i) : e.addBtn(ERightButton.QZONE_GIFT, "kong_jian_gift", this.onKongJianGift, this, i)
    }, e.prototype.onKongJianGift = function () {
        this.openView(Cover.GiftView)
    }, e.prototype.listBtn = function () {
        for (var t in e.btns) {
            var i = e.btns[t];
            i.parent || this.group.addChild(i)
        }
    }, e.addBtn = function (t, i, o, n, a) {
        if (void 0 === a && (a = !1), e.btns[t]) e.btns[t].setNoticVis(a);
        else {
            var s = new MainMenuBtn;
            e.btns[t] = s, s.icon = i, s.callBack = o, s.setNoticVis(a), o && s.addEventListener(egret.TouchEvent.TOUCH_TAP, o, n);
            var r = GameGlobal.layerMgr.getView(UIConst.RIGHTUI);
            r && r.$stage && r.group.addChild(s)
        }
    }, e.removeBtn = function (t) {
        var i = e.btns[t];
        i && (delete e.btns[t], i.parent && i.parent.removeChild(i), i.removeEventListener(egret.TouchEvent.TOUCH_TAP, i.callBack, this))
    }, e.prototype.onShareUpdate = function () {
        var t = e.btns[ERightButton.SHARE];
        if (t) {
            var i = GameGlobal.modelcommod,
                o = i.isShareRed() || i.isLevelRed() || i.isHongBaoRed();
            t.setNoticVis(o)
        }
    }, e.prototype.onEndBattle = function () {
        this.visible = !0
    }, e.prototype.onStartBattle = function () {
        this.visible = !1
    }, e.prototype.onZYZLUpdate = function () {
        var t = e.btns[ERightButton.FRIEND_GIFT];
        if (t) {
            var i = GameGlobal.modelZYZL,
                o = i.isShowIcon();
            t.setNoticVis(o)
        }
    }, e.prototype.addMsg = function () {
        GameGlobal.modelBattle.on(ModelBattle.GC_504, this.onEndBattle, this), GameGlobal.modelBattle.on(ModelBattle.MSG_BATTLE_BEGIN, this.onStartBattle, this), GameGlobal.modelcommod.on(ModelCommond.MSG_SHARE, this.onShareUpdate, this), GameGlobal.modelZYZL.on(ModelZYZL.MSG_AWARD, this.onZYZLUpdate, this), EventCenter.addMsg(Cover.Event.ON_GIFT_STATUS, this.onGiftStatus, this), EventCenter.addMsg(Cover.Event.ON_RECEIVE_SUCCESS, this.onReceiveSuccess, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelBattle.off(ModelBattle.GC_504, this.onEndBattle, this), GameGlobal.modelBattle.off(ModelBattle.MSG_BATTLE_BEGIN, this.onStartBattle, this), GameGlobal.modelcommod.off(ModelCommond.MSG_SHARE, this.onShareUpdate, this), GameGlobal.modelZYZL.off(ModelZYZL.MSG_AWARD, this.onZYZLUpdate, this), EventCenter.removeMsg(Cover.Event.ON_GIFT_STATUS, this.onGiftStatus, this), EventCenter.removeMsg(Cover.Event.ON_RECEIVE_SUCCESS, this.onReceiveSuccess, this)
    }, e.btns = {}, e
}(BaseEUIView);
__reflect(ViewRightUI.prototype, "ViewRightUI");
var ModelMRSC = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.day = 0, e.lc = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(2062, i.GC2062, i), e.regHand(2064, i.GC2064, i), e.regHand(2066, i.GC2066, i), e.regHand(2604, i.GC2604, i)
    }, e.prototype.CG2061 = function () {
        var t = this.getBytes();
        this.sendSocket(2061, t)
    }, e.prototype.GC2062 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = Vo_mrsc.List[n];
            a || (a = new Vo_mrsc, Vo_mrsc.List.push(a)), a.stateA = i.readByte(), a.index = i.readShort()
        }
        t.lc = i.readInt(), t.notify(e.UPDATE)
    }, e.prototype.CG2063 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(2063, e)
    }, e.prototype.GC2064 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            for (var n = i.readShort(), a = 0; a < Vo_mrsc.List.length; a++) Vo_mrsc.List[a].index == n && (Vo_mrsc.List[a].stateA = 2);
            t.notify(e.GET, n % 100)
        }
    }, e.prototype.GC2066 = function (t, e) {}, e.prototype.GC2604 = function (t, i) {
        var o = i.readByte();
        e.is5bei = 1 == o, t.notify(e.MSG_UPDATE_SC5BEI)
    }, e.UPDATE = "UPDATE", e.GET = "GET", e.is5bei = !1, e
}(BaseModel);
__reflect(ModelMRSC.prototype, "ModelMRSC");
var Vo_mrsc = function () {
    function t() {}
    return t.getState = function (e) {
        for (var i = t.List, o = 0; o < i.length; o++)
            if (i[o].index % 100 == e) return i[o].stateA;
        return null
    }, t.notice = function () {
        for (var e = t.List, i = e.length, o = 0; i > o; o++) {
            var n = e[o];
            if (1 == n.stateA) return !0
        }
        return !1
    }, t.List = [], t
}();
__reflect(Vo_mrsc.prototype, "Vo_mrsc");
var VMRSC = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.lcs = [], e.skinName = "resource/eui_skins/game/meirishouchong/MRSC.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.btnSel1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnSel2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnSel3.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnRecharge.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnRT, this), this.ysel = this.btnSel1.y, this.lcs = this.getLc();
        for (var t = 0; t < this.lcs.length; t++) {
            var e = this["txt" + (t + 1)],
                i = this.lcs[t];
            e.text = 1 == i ? "充任意金额" : "充值" + i + "元"
        }
    }, e.prototype.btnRT = function (t) {
        switch (this._sel) {
            case 1:
                this.checkState(Vo_mrsc.getState(1));
                break;
            case 2:
                this.checkState(Vo_mrsc.getState(2));
                break;
            case 3:
                this.checkState(Vo_mrsc.getState(3))
        }
    }, e.prototype.checkState = function (t) {
        switch (t) {
            case 0:
                platform.openRecharge(), this.closeHandler();
                break;
            case 1:
                for (var e = Vo_mrsc.List, t = 0; t < e.length; t++)
                    if (e[t].index % 100 == this._sel) {
                        var i = e[t].index;
                        break
                    } GameGlobal.modelMRSC.CG2063(i);
                break;
            case 2:
                ViewText.text("该奖励已领取")
        }
    }, e.prototype.btnState = function (t) {
        switch (t) {
            case 0:
                this.btnTxt.text = "充点小钱", this.btnBg.source = "MRSC_json.btnRecharge", this.re_red.visible = !1;
                break;
            case 1:
                this.btnTxt.text = "领取奖励", this.btnBg.source = "MRSC_json.btnRecharge", this.re_red.visible = !0;
                break;
            case 2:
                this.btnTxt.text = "已领取", this.btnBg.source = "CM1_json.disabled2", this.re_red.visible = !1
        }
    }, e.prototype.upBtn = function (t) {
        switch (this.sel1_red.visible = 1 == Vo_mrsc.getState(1) ? !0 : !1, this.sel2_red.visible = 1 == Vo_mrsc.getState(2) ? !0 : !1, this.sel3_red.visible = 1 == Vo_mrsc.getState(3) ? !0 : !1, t) {
            case 1:
                this.btnState(Vo_mrsc.getState(1));
                break;
            case 2:
                this.btnState(Vo_mrsc.getState(2));
                break;
            case 3:
                this.btnState(Vo_mrsc.getState(3))
        }
    }, e.prototype.update = function () {
        var t = GameGlobal.modelMRSC.lc;
        this.txtnum.textFlow = [{
            text: "已充值",
            style: {
                textColor: 6835267
            }
        }, {
            text: Math.floor(t / 10).toString() + "元",
            style: {
                textColor: 1090116
            }
        }];
        var e = Vo_mrsc.getState(2);
        t >= 60 && 2 != e ? this.setSel(2) : this.setSel(1)
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnSel1:
                this.setSel(1);
                break;
            case this.btnSel2:
                this.setSel(2);
                break;
            case this.btnSel3:
                this.setSel(3)
        }
    }, e.prototype.getJl = function (t) {
        for (var e = Vo_mrsc.List, i = 0; i < e.length; i++)
            if (e[i].index % 100 == t) {
                var o = e[i].index;
                break
            } var n = CFG_MRSC.LIB[o];
        return n ? n.jl : ""
    }, e.prototype.setSel = function (t) {
        if (this._sel) switch (this._sel) {
            case 1:
                this.noSel1();
                break;
            case 2:
                this.noSel2();
                break;
            case 3:
                this.noSel3()
        }
        switch (t) {
            case 1:
                var e = this.getJl(t);
                this.sel1.source = "MRSC_json.sel", this.imgbei.source = "MRSC_json.b6", this.txt1.size = 22, this.txt1.textColor = 13385474, this.btnSel1.y = this.ysel - 4;
                break;
            case 2:
                e = this.getJl(t), this.sel2.source = "MRSC_json.sel", this.imgbei.source = "MRSC_json.b8", this.txt2.size = 22, this.txt2.textColor = 13385474, this.btnSel2.y = this.ysel - 4;
                break;
            case 3:
                e = this.getJl(t), this.sel3.source = "MRSC_json.sel", this.imgbei.source = "MRSC_json.b10", this.txt3.size = 22, this.txt3.textColor = 13385474, this.btnSel3.y = this.ysel - 4
        }
        var i = e.split(";"),
            o = i.shift(),
            n = ConfigHelp.makeVoList(o)[0];
        n.quality < 5 && (n.quality = 5), this.grid.data = n, this.grid.enableTip(), this.grid.isShowEff(!0), ConfigHelp.makeStrGrids(i.join(";"), this.grids, 0, 0, this.container, !0), this._sel = t, this.upBtn(t)
    }, e.prototype.noSel1 = function () {
        this.sel1.source = "MRSC_json.nosel", this.txt1.size = 20, this.txt1.textColor = 11023619, this.btnSel1.y = this.ysel
    }, e.prototype.noSel2 = function () {
        this.sel2.source = "MRSC_json.nosel", this.txt2.size = 20, this.txt2.textColor = 11023619, this.btnSel2.y = this.ysel
    }, e.prototype.noSel3 = function () {
        this.sel3.source = "MRSC_json.nosel", this.txt3.size = 20, this.txt3.textColor = 11023619, this.btnSel3.y = this.ysel
    }, e.prototype.upAward = function () {
        this.upBtn(this._sel)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "mrsc_BG_png"), this.noSel1(), this.noSel2(), this.noSel3(), GameGlobal.modelMRSC.on(ModelMRSC.UPDATE, this.update, this), GameGlobal.modelMRSC.on(ModelMRSC.GET, this.upBtn, this), GameGlobal.modelMRSC.CG2061()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bg), GameGlobal.modelMRSC.off(ModelMRSC.UPDATE, this.update, this), GameGlobal.modelMRSC.off(ModelMRSC.GET, this.upBtn, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.getLc = function () {
        var t = CFG_MRSC.LIB,
            e = [],
            i = 0;
        for (var o in t) {
            var n = t[o],
                a = Math.floor(n.bh / 100);
            if (0 == i) i = a;
            else if (a != i) break;
            e.push(n.lc)
        }
        return e
    }, e
}(BaseEUIView);
__reflect(VMRSC.prototype, "VMRSC");
var Vo_SC5bei = function () {
    function t() {}
    return t.create = function () {
        if (!this.List) {
            var e = platform.isIOS ? 2 : 1;
            this.List = [];
            for (var i = Config.getConfig(scwbjl_555), o = i.values, n = 0, a = o.length; a > n; n++) {
                var s = o[n];
                if (s.sysId == e) {
                    var r = new t;
                    r.cfg = s, r.id = s.id, r.px = s.px, this.List.push(r)
                }
            }
            this.List.sort(this.sortFunc)
        }
    }, t.sortFunc = function (t, e) {
        return t.px - e.px
    }, t
}();
__reflect(Vo_SC5bei.prototype, "Vo_SC5bei");
var VSC5bei = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "SC5beiSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.base.title = "首充5倍", this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.data = new eui.ArrayCollection, this.list.itemRenderer = VSC5beiItem, this.list.dataProvider = this.data, this.imgtxt = new ImageText, this.imgtxt.charFunc = ImageText.VIPFUNC, this.imgtxt.container = this.lbGrp, this.uirole = UIRole.create(), this.uirole.scaleX = this.uirole.scaleY = 1.8, this.mxGrp.addChild(this.uirole), Vo_SC5bei.create()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg0, "SC5bei_title_png"), IconUtil.setIconSrc(this.bg1, "SC5bei_BG_png"), IconUtil.setIconSrc(this.bg2, "SC5bei_d3_png"), IconUtil.setIconSrc(this.bg4, "SC5bei_d4_png"), this.update();
        var i = Vo_SC5bei.List[0];
        ConfigHelp.makeStrGrids(i.cfg.lb, this.grids, 0, 0, this.jlGrp, !0), this.imgtxt.setText(i.cfg.jzyb.toString()), GameGlobal.modelMRSC.on(ModelMRSC.MSG_UPDATE_SC5BEI, this.update, this), this.uirole.setBody(20103), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play()
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.bg0), IconUtil.setIconSrc(this.bg1), IconUtil.setIconSrc(this.bg2), IconUtil.setIconSrc(this.bg4), GameGlobal.modelMRSC.off(ModelMRSC.MSG_UPDATE_SC5BEI, this.update, this), this.uirole.stopAndClear()
    }, e.prototype.update = function () {
        DisplayUtil.fillDataAC(this.data, Vo_SC5bei.List)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VSC5bei.prototype, "VSC5bei");
var VSC5beiItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "SC5beiItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), DisplayUtil.popBtnStyle(this.btn), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.imgtxt = new ImageText, this.imgtxt.charFunc = ImageText.VIPFUNC, this.imgtxt.container = this.lbGrp
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, t.id == Vo_SC5bei.List[Vo_SC5bei.List.length - 1].id ? (this.img.visible = !0, this._eff = EffectMgr.addEff("uieff/btnEff2", this.btn, -25, -25), this._eff.scaleX = 1.2) : this.img.visible = !1, this.imgtxt.setText(t.cfg.kdyb.toString()), this.btn.label = "充值" + t.cfg.czje + "元", this.btn.enabled = !ModelMRSC.is5bei, ModelMRSC.is5bei && this._eff && EffectMgr.getIns().removeEff(this._eff)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onT = function () {
        if (this.btn.enabled) {
            var t = CFG_Recharge.LIB[this.vo.id];
            t && platform.recharge(t.id)
        }
    }, e.prototype.$onRemoveFromStage = function () {
        this._eff && EffectMgr.getIns().removeEff(this._eff)
    }, e
}(eui.ItemRenderer);
__reflect(VSC5beiItem.prototype, "VSC5beiItem");
var ModelMenPai = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.quitCount = 0, e.renameCount = 0, e.selfQuit = !1, e.isBattleing = !1, e.menpaiBossRed = !1, e
    }
    return __extends(e, t), e.prototype.listServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(810, i.GC810, i), e.regHand(812, i.GC812, i), e.regHand(814, i.GC814, i), e.regHand(816, i.GC816, i), e.regHand(818, i.GC818, i), e.regHand(820, i.GC820, i), e.regHand(822, i.GC822, i), e.regHand(824, i.GC824, i), e.regHand(826, i.GC826, i), e.regHand(828, i.GC828, i), e.regHand(830, i.GC830, i), e.regHand(832, i.GC832, i), e.regHand(834, i.GC834, i), e.regHand(836, i.GC836, i), e.regHand(838, i.GC838, i), e.regHand(840, i.GC840, i), e.regHand(842, i.GC842, i), e.regHand(844, i.GC844, i), e.regHand(846, i.GC846, i), e.regHand(848, i.GC848, i), e.regHand(850, i.GC850, i), e.regHand(852, i.GC852, i), e.regHand(860, i.GC860, i), e.regHand(862, i.GC862, i), e.regHand(864, i.GC864, i), e.regHand(866, i.GC866, i), e.regHand(868, i.GC868, i), e.regHand(870, i.GC870, i), e.regHand(872, i.GC872, i), e.regHand(874, i.GC874, i), e.regHand(876, i.GC876, i), e.regHand(878, i.GC878, i), e.regHand(880, i.GC880, i), e.regHand(882, i.GC882, i), e.regHand(884, i.GC884, i), e.regHand(888, i.GC888, i), e.regHand(890, i.GC890, i)
    }, e.prototype.GC810 = function (t, i) {
        var o = VMenPaiPage,
            n = i.readByte(),
            a = i.readByte(),
            s = i.readByte(),
            r = i.readByte(),
            l = i.readByte(),
            h = i.readByte(),
            c = i.readByte(),
            p = i.readByte();
        o.appRed = 1 == n, o.sxRed = 1 == a, o.fbRed = 1 == s, o.skillRed = 1 == r || t.mpSkillNot(), o.huoyueSJ = 1 == l, o.huoyueDayGot = 1 == h, o.bossGot = 1 == c, o.bossTZ = 1 == p, e.servRed = 1 == n || 1 == a || 1 == s || 1 == r || 1 == l || 1 == h || 1 == c || 1 == p, t.notice()
    }, e.prototype.CG811 = function () {
        this.sendSocket(811, this.getBytes())
    }, e.prototype.GC812 = function (t, i) {
        var o = VoMenPai.getInst();
        return o.mpId = i.readLong(), 0 == o.mpId ? (GameGlobal.modelRole.voMine.menpaiId = 0, void(GameGlobal.layerMgr.isOpenView(UIConst.MENPAI) && GameGlobal.layerMgr.close(UIConst.MENPAI))) : (o.name = i.readUTF(), o.hostName = i.readUTF(), o.level = i.readInt(), o.shengwang = i.readLong(), o.count = i.readShort(), o.gonggao = i.readUTF(), VoMember.minePos = i.readByte(), t.quitCount = i.readByte(), t.renameCount = i.readByte(), void t.notify(e.msg_mpDating))
    }, e.prototype.CG813 = function () {
        this.sendSocket(813, this.getBytes())
    }, e.prototype.GC814 = function (t, e) {
        var i = e.readByte();
        ViewText.text(["", "成功", "没进门派", "正、副掌门才能招人", "成员已达上限", "距离上次招人未达5分钟"][i])
    }, e.prototype.CG815 = function () {
        this.sendSocket(815, this.getBytes())
    }, e.prototype.GC816 = function (t, i) {
        for (var o = i.readShort(), n = [], a = 0; o > a; a++) {
            var s = VoMplst.create();
            s.mpId = i.readLong(), s.name = i.readUTF(), s.level = i.readInt(), s.hostId = i.readLong(), s.hostName = i.readUTF(), s.isApply = i.readByte(), s.condition = i.readInt(), s.memCnt = i.readShort(), n.push(s)
        }
        t.notify(e.msg_mpList, n)
    }, e.prototype.CG817 = function () {
        this.selfQuit = !0, this.sendSocket(817, this.getBytes())
    }, e.prototype.GC818 = function (t, e) {
        var i = e.readByte();
        1 == i ? (GameGlobal.layerMgr.isOpenView(UIConst.MENPAI) && GameGlobal.layerMgr.close(UIConst.MENPAI), GameGlobal.layerMgr.isOpenView(UIConst.MPMEMBERS) && GameGlobal.layerMgr.close(UIConst.MPMEMBERS), t.selfQuit ? (t.selfQuit = !1, ViewText.text("您离开了门派")) : ViewText.text("您被踢出了门派")) : ViewText.text([null, null, "退出失败", "门派战开战期间，不可进行该操作"][i])
    }, e.prototype.CG819 = function () {
        this.sendSocket(819, this.getBytes())
    }, e.prototype.GC820 = function (t, i) {
        for (var o = i.readShort(), n = [], a = 0; o > a; a++) {
            var s = VoMember.create();
            s.id = i.readLong(), s.name = i.readUTF(), s.vip = i.readByte(), s.position = i.readByte(), s.gongxian = i.readLong(), s.offLine = i.readInt(), s.zhanli = i.readInt(), s.job = i.readByte(), n.push(s)
        }
        VoMember.minePos = i.readByte(), t.notify(e.msg_members, n)
    }, e.prototype.CG821 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeUTF(e), this.sendSocket(821, i)
    }, e.prototype.GC822 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            if (GameGlobal.layerMgr.isOpenView(UIConst.MPCREATE)) {
                var o = GameGlobal.layerMgr.getView(UIConst.MPCREATE);
                o && o.closeHandler()
            }
            GameGlobal.layerMgr.isOpenView(UIConst.MENPAILIST) && GameGlobal.layerMgr.close(UIConst.MENPAILIST), GameGlobal.layerMgr.open(UIConst.MENPAI)
        } else ViewText.text(["", "成功", "已加入门派", "名字存在敏感字", "门派名已存在", "VIP等级不足", "元宝不足", "后端异常"][i])
    }, e.prototype.CG823 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeUTF(e), this.sendSocket(823, i)
    }, e.prototype.GC824 = function (t, e) {
        var i = e.readByte(),
            o = e.readByte(),
            n = e.readUTF(),
            a = GameGlobal.layerMgr.getView(UIConst.MPDATING);
        if (1 == i) {
            if (1 == o && (a.reName(n), GameGlobal.layerMgr.isOpenView(UIConst.MENPAIRENAME))) {
                var s = GameGlobal.layerMgr.getView(UIConst.MENPAIRENAME);
                s.closeHandler()
            }
        } else 2 == i && 1 == o && (a.reGongGao(n), GameGlobal.layerMgr.isOpenView(UIConst.MPGONGGAO) && (s = GameGlobal.layerMgr.getView(UIConst.MPGONGGAO), s.closeHandler()));
        1 != o && ViewText.text([null, "成功", "未加入门派", "正副掌门才可修改", "内存存在敏感字", "门派名字已存在", "内容与修改前未变", "元宝不足", "内容不合法"][o])
    }, e.prototype.CG825 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeLong(e), this.sendSocket(825, i)
    }, e.prototype.GC826 = function (t, e) {
        var i = e.readByte(),
            o = e.readLong(),
            n = GameGlobal.layerMgr.getView(UIConst.MENPAILIST);
        1 == i ? n && n.updateState(o, 1) : (2 == i ? (GameGlobal.layerMgr.isOpenView(UIConst.MENPAILIST) && GameGlobal.layerMgr.close(UIConst.MENPAILIST), GameGlobal.layerMgr.isOpenView(UIConst.MPCREATE) && GameGlobal.layerMgr.close(UIConst.MPCREATE), GameGlobal.layerMgr.open(UIConst.MENPAI)) : n && n.updateState(o, 0), ViewText.text([null, "成功", "进入成功", "已加入门派", "门派人数已满", "战力过低", "门派申请列表已满", "门派不存在", "只能申请一个门派", "取消成功", "不能重复申请", "你的申请被拒绝", "距离上次离开门派未达8小时"][i]))
    }, e.prototype.CG827 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeLong(e), this.sendSocket(827, i)
    }, e.prototype.GC828 = function (t, e) {
        var i = e.readByte(),
            o = e.readByte(),
            n = e.readLong(),
            a = GameGlobal.layerMgr.getView(UIConst.MPAPPLYLIST);
        1 == i ? 1 == o && a && a.removeIm(n) : 2 == i && 1 == o && a && a.removeIm(n), ViewText.text(["", "成功", "该玩家已取消申请", "玩家已加入其他门派", "门派已满人", "只有正副掌门有权限操作"][o])
    }, e.prototype.CG829 = function () {
        this.sendSocket(829, this.getBytes())
    }, e.prototype.GC830 = function (t, i) {
        var o = VoSXRecord.getInst();
        o.details.length = 0, o.awards.length = 0;
        var n = i.readByte();
        if (1 == n) {
            o.curExp = i.readInt(), o.sxPerson = i.readShort(), o.selfSX = i.readByte();
            for (var a = i.readShort(), s = 0; a > s; s++) {
                var r = i.readByte();
                o.awards.push(r)
            }
            a = i.readShort();
            for (var s = 0; a > s; s++) {
                var l = new VoSXDetail;
                l.time = i.readInt(), l.name = i.readUTF(), l.sxType = i.readByte(), o.details.push(l)
            }
        }
        t.notify(e.msg_xianglu)
    }, e.prototype.CG831 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(831, e)
    }, e.prototype.GC832 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = VoSXRecord.getInst();
            o.selfSX = 1;
            var n = GameGlobal.layerMgr.getView(UIConst.MPSHANGXIANG);
            n && n.updateState()
        }
        ViewText.text(["", "", "今日捐献次数已达上限", "没有这种类型", "货币不足"][i])
    }, e.prototype.CG833 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeLong(e), this.sendSocket(833, i)
    }, e.prototype.GC834 = function (t, e) {
        var i = e.readByte();
        4 == i || 11 == i || 12 == i || 13 == i || 15 == i || GameGlobal.layerMgr.isOpenView(UIConst.MPMEMBERMGR) && GameGlobal.layerMgr.close(UIConst.MPMEMBERMGR), ViewText.text([null, "任命成功", "未加入门派", "目标不在本门派", "不是掌门", "踢出成功", "退出成功", "禅让成功", "弹刻成功", "掌门离线时间不足5天", "元宝不足", "该职位人数已满", "目标已是该职位", "掌门才可禅让", null, "权限不足", "门派战开战期间，不可进行该操作"][i])
    }, e.prototype.CG835 = function () {
        this.sendSocket(835, this.getBytes())
    }, e.prototype.GC836 = function (t, i) {
        for (var o = i.readShort(), n = [], a = 0; o > a; a++) {
            var s = new VoApply;
            s.id = i.readLong(), s.name = i.readUTF(), s.job = i.readByte(), s.level = i.readShort(), s.zhanli = i.readLong(), n.push(s)
        }
        VoApply.condition = i.readInt(), t.notify(e.msg_appList, n)
    }, e.prototype.CG837 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeInt(e), this.sendSocket(837, i)
    }, e.prototype.GC838 = function (t, e) {
        var i = e.readInt();
        VoApply.condition = i;
        var o = GameGlobal.layerMgr.getView(UIConst.MPAPPLYLIST); - 1 == i ? o && o.setCh(!1) : o && o.setCh(!0)
    }, e.prototype.GC840 = function (t, i) {
        var o = i.readInt();
        VoMember.mineGX = o, t.notify(e.msg_bangGong)
    }, e.prototype.CG841 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(841, e)
    }, e.prototype.GC842 = function (t, e) {
        var i = e.readByte(),
            o = e.readByte();
        if (1 == i) {
            var n = GameGlobal.layerMgr.getView(UIConst.MPXHAWARDS),
                a = GameGlobal.layerMgr.getView(UIConst.MPSHANGXIANG);
            n && n.updateSt(2);
            var s = VoSXRecord.getInst(),
                r = s.awards;
            r[o - 1] = 2, a && a.notice(), GameGlobal.layerMgr.isOpenView(UIConst.MPXHAWARDS) && GameGlobal.tick.addInterv(function () {
                n.closeHandler()
            }, 300, this, !0)
        }
        return 5 == i ? void GameGlobal.modelBag.checkRLTips(0) : void ViewText.text(["", "成功", "未加入该门派", "没有该奖励", "香火值未达标", null, "你已领取该奖励"][i])
    }, e.prototype.CG843 = function () {
        this.sendSocket(843, this.getBytes())
    }, e.prototype.GC844 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readShort(),
                s = i.readByte();
            VoMPShop.update(a, s)
        }
        t.notify(e.msg_mpStore)
    }, e.prototype.CG845 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeShort(e), this.sendSocket(845, i)
    }, e.prototype.GC846 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = GameGlobal.layerMgr.getView(UIConst.JJCSTORETIPS);
            o && o.closeHandler()
        }
        7 == i && GameGlobal.modelBag.checkRLTips(0), ViewText.text(["", "成功", "配置表没有该ID", "未加入门派", "门派等级过低未解锁", "传入参数异常", "超出可购买上限", null, "门派贡献不足"][i])
    }, e.prototype.CG847 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(847, e)
    }, e.prototype.GC848 = function (t, e) {
        var i = e.readByte();
        1 == i && t.notice(), ViewText.text(["", "成功", "该道具不能用于建设"][i])
    }, e.prototype.CG849 = function () {
        this.sendSocket(849, this.getBytes())
    }, e.prototype.GC850 = function (t, i) {
        var o = i.readShort(),
            n = i.readInt(),
            a = VoMPSkill;
        a.headId = o, a.zhanli = n, a.update(o);
        for (var s = i.readShort(), r = 0; s > r; r++) {
            var l = i.readShort(),
                h = i.readInt();
            a.updateAtt(l, h)
        }
        t.notify(e.msg_mpSkill)
    }, e.prototype.CG851 = function () {
        this.sendSocket(851, this.getBytes())
    }, e.prototype.GC852 = function (t, e) {
        var i = e.readByte();
        ViewText.text([null, "成功", "没进门派", "已经是最高级", "贡献不足", "等级不能高过角色等级"][i])
    }, e.prototype.CG861 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(861, e)
    }, e.prototype.GC860 = function (t, i) {
        var o = i.readByte();
        VoMPFB.leftNum = o, 0 == VoMPFB.list.length && VoMPFB.init();
        for (var n = i.readShort(), a = 0; n > a; a++) {
            var s = i.readShort();
            VoMPFB.setTG(s)
        }
        t.notify(e.msg_mpFBSelf)
    }, e.prototype.GC862 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            for (var n = i.readShort(), a = Util.getTempArr(), s = 0; n > s; s++) {
                var r = i.readInt(),
                    l = i.readUTF(),
                    h = i.readByte(),
                    o = i.readByte();
                a.push([r, l, h, o])
            }
            VoMPTeam.init(a), t.notify(e.msg_mpFuben)
        } else ViewText.text(["", "成功", "没有该副本", "没进门"][o])
    }, e.prototype.CG863 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeShort(e), this.sendSocket(863, i)
    }, e.prototype.GC864 = function (t, e) {
        var i = e.readByte();
        if (1 == i || 2 == i) {
            for (var o, n = (e.readInt(), e.readShort()), a = [], s = 0; n > s; s++) {
                var r = new VoCreateTeam,
                    l = e.readByte(),
                    h = e.readLong();
                1 == l && (o = h);
                var c = e.readUTF(),
                    p = e.readShort(),
                    u = e.readInt(),
                    d = e.readByte();
                r.isLeader = l, r.heroId = h, r.name = c, r.level = p, r.zhanli = u, r.job = d, a.push(r)
            }
            var f = GameGlobal.layerMgr.getView(UIConst.MPFUBEN);
            f && f.updateSelfTeam(a, o)
        } else ViewText.text(["", "成功", "别人退出队伍等其他情况导致前端刷新", "没进门派", "门派等级过低", "你已经有队伍，不能重复加入", "没有该副本"][i])
    }, e.prototype.CG865 = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(865, e)
    }, e.prototype.GC866 = function (t, e) {
        var i = e.readByte();
        ViewText.text(["", "成功", "没进门派", "你没在队伍", "队伍缓存异常", "你不是队长"][i])
    }, e.prototype.CG867 = function () {
        this.sendSocket(867, this.getBytes())
    }, e.prototype.GC868 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = GameGlobal.layerMgr.getView(UIConst.MPFUBEN);
            o && o.stop()
        }
        ViewText.text(["", "", "没进门派", "你没在队伍", "队伍缓存异常", "你不是队长"][i])
    }, e.prototype.CG869 = function () {
        this.sendSocket(869, this.getBytes())
    }, e.prototype.GC870 = function (t, e) {
        var i = e.readByte();
        ViewText.text(["", "", "被踢出副本", "开战后解散队伍", "没进门派", "你没在队伍", "队伍异常"][i])
    }, e.prototype.CG871 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(871, e)
    }, e.prototype.GC872 = function (t, e) {
        var i = e.readByte();
        ViewText.text(["", "成功", "没进门派", "你已经有队伍", "队伍不存在", "队伍已满", "门派等级不足"][i])
    }, e.prototype.CG873 = function () {
        this.sendSocket(873, this.getBytes())
    }, e.prototype.GC874 = function (t, i) {
        var o = i.readShort(),
            n = i.readInt();
        VoHuoYue.level = o, VoHuoYue.exp = n;
        for (var a = i.readShort(), s = 0; a > s; s++) {
            var r = i.readByte(),
                l = i.readByte();
            VoHuoYue.update(r, l)
        }
        t.notify(e.msg_mpHuoyue)
    }, e.prototype.CG875 = function () {
        this.sendSocket(875, this.getBytes())
    }, e.prototype.GC876 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte(),
                s = i.readByte();
            VoHuoYueDay.update(a, s)
        }
        var r = i.readShort();
        VoHuoYueDay.huoYueValue = r, t.notify(e.msg_mpHuoyueDay)
    }, e.prototype.CG877 = function () {
        this.sendSocket(877, this.getBytes())
    }, e.prototype.GC878 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = e.readShort(),
                n = e.readInt();
            VoHuoYue.level = o, VoHuoYue.exp = n;
            var a = GameGlobal.layerMgr.getView(UIConst.MPHUOYUE);
            a && (a.updateAwardsAndLv(), a.updateAtts(), a.updateNoticeSJ());
            var s = GameGlobal.layerMgr.getView(UIConst.MPHUOYUEPAGE);
            s && s.updateNoticeHY();
            var r = GameGlobal.layerMgr.getView(UIConst.MPDATING);
            r && r.updateNoticeHY()
        } else ViewText.text(["", "成功", "没进门派不能升级", "已经是最高级", "经验不足", "背包已满"][i])
    }, e.prototype.CG879 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(879, e)
    }, e.prototype.GC880 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = e.readByte(),
                n = VoHuoYueDay.update(o, 3),
                a = GameGlobal.layerMgr.getView(UIConst.MPHUOYUEDAY);
            a && a.updateState(n);
            var s = GameGlobal.layerMgr.getView(UIConst.MPHUOYUEPAGE);
            s && s.updateNoticeDay();
            var r = GameGlobal.layerMgr.getView(UIConst.MPDATING);
            r && r.updateNoticeHY();
            var l = GameGlobal.layerMgr.getView(UIConst.MENPAI);
            l && l.setNoticeApp()
        } else 6 == i ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["", "成功", "没进门派不能升级", "不能重复读取", "配置表没该奖励", "活跃度不足", null][i])
    }, e.prototype.CG881 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(881, e)
    }, e.prototype.GC882 = function (t, e) {
        var i = e.readByte(),
            o = e.readByte(),
            n = e.readLong(),
            a = e.readByte(),
            s = e.readInt(),
            r = e.readInt(),
            l = e.readInt();
        VoMPBoss.tiaoZhanCnt = a, VoMPBoss.tiaoZhanTime = r;
        var h = VoMPBoss.find(o);
        if (h.state = i, h.blood = n, h.refreshTime = l, h.taopaoTime = s, GameGlobal.layerMgr.isOpenView(UIConst.MPBOSS)) {
            var c = GameGlobal.layerMgr.getView(UIConst.MPBOSS);
            if (c) {
                var p = t.chosenBossId(o);
                c.update(p)
            }
        }
    }, e.prototype.chosenBossId = function (t) {
        var e = t;
        if (this.isBattleEnd()) {
            this.isBattleing = !1;
            var i = GameGlobal.layerMgr.getView(UIConst.MPBOSS);
            e = i.getSelectedBossId()
        }
        return e
    }, e.prototype.isBattleEnd = function () {
        return this.isBattleing
    }, e.prototype.CG883 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeByte(e), this.sendSocket(883, i)
    }, e.prototype.GC884 = function (t, e) {
        var i = e.readByte(),
            o = e.readByte();
        VoMPBoss.find(o), GameGlobal.layerMgr.getView(UIConst.MPBOSS);
        switch (i) {
            case 1:
                break;
            case 2:
                t.CG881(o);
                break;
            case 3:
                VoMPBoss.setGot(o, 2), t.CG881(o);
                break;
            case 11:
                GameGlobal.modelBag.checkRLTips(0)
        }
        ViewText.text(["", "召集成功", null, "领取成功", "没门派不能打", "boss已被打倒", "非战斗时间", "没有挑战次数了", "boss不存在", "不能重复领取", "boss还活着", null, "你没在门派", "只有掌门/副掌门才可进行召集操作", "召集冷却中", "战斗未结束"][i])
    }, e.prototype.GC886 = function (t, e) {
        0 == VoMPBoss.max_length && VoMPBoss.init();
        for (var i = e.readShort(), o = 0; i > o; o++) {
            var n = e.readByte();
            VoMPBoss.setGot(n, 1)
        }
        if (GameGlobal.layerMgr.isOpenView(UIConst.MPBOSS)) {
            var a = GameGlobal.layerMgr.getView(UIConst.MPBOSS);
            a && a.updateRLNot()
        }
    }, e.prototype.CG887 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(887, e)
    }, e.prototype.GC888 = function (t, e) {
        var i = e.readByte(),
            o = e.readByte();
        VoMPBoss.canBuyCount = o, 1 != i && ViewText.text(["", "成功", "已达购买上限", "未加入门派", "", "元宝不足"][i])
    }, e.prototype.GC890 = function (t, i) {
        t.menpaiBossRed = !0, t.notify(e.msg_menpaiReset)
    }, e.prototype.notice = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.MENPAI);
        t && (t.setNoticeApp(), t.setNoticeSX(), t.setNoticeFB(), t.setNoticeSkill()), this.notify(e.MSG_NOTIC)
    }, e.prototype.getNotice = function () {
        var t = this.mpJianSheNot(),
            i = e.servRed,
            o = 1 == GameGlobal.modelMPBattle.mpBatCanBaoMing;
        return t || i || o || this.menpaiBossRed
    }, e.prototype.mpJianSheNot = function () {
        for (var t = !1, e = 1034; 1043 >= e; e++) {
            var i = GameGlobal.modelBag.getItemCount(e);
            if (i > 0) {
                t = !0;
                break
            }
        }
        return t
    }, e.prototype.mpSkillNot = function () {
        var t = VoMPSkill.headId,
            e = CFG_MENPAI.LIB4[t],
            i = GameGlobal.modelRole.voMine.level,
            o = VoMPSkill.headId;
        if (o = o > 0 ? (o - 1) / 8 >> 0 : o / 8 >> 0, i > o && e) {
            var n = e.xh,
                a = VoMember.mineGX;
            if (a >= n) return !0
        }
        return !1
    }, e.openMenPai = function () {
        var t = GameGlobal.modelRole.voMine.menpaiId;
        t > 0 ? CFG_COMMOND.isOpen(CFG_COMMOND.MENPAI, !0) && (GameGlobal.layerMgr.open(UIConst.MENPAI), GameGlobal.modelmenpai.menpaiBossRed = !1, GameGlobal.layerMgr.getView(UIConst.MAINTOWN).onMPBossRetTip(), GameGlobal.layerMgr.getView(UIConst.MAINMENU).onBossRet()) : CFG_COMMOND.isOpen(CFG_COMMOND.MENPAI, !0) && GameGlobal.layerMgr.open(UIConst.MENPAILIST)
    }, e.msg_mpList = "msg_mpList", e.msg_mpDating = "msg_mpDating", e.msg_members = "msg_members", e.msg_xianglu = "msg_xianglu", e.msg_appList = "msg_appList", e.msg_mpSkill = "msg_mpSkill", e.msg_mpFBSelf = "msg_mpFBSelf", e.msg_mpFuben = "msg_mpFuben", e.msg_mpStore = "msg_mpStore", e.msg_mpHuoyue = "msg_mpHuoyue", e.msg_mpHuoyueDay = "msg_mpHuoyueDay", e.msg_bangGong = "msg_bangGong", e.msg_menpaiReset = "msg_menpaiReset", e.MSG_NOTIC = "MSG_NOTIC", e.servRed = !1, e
}(BaseModel);
__reflect(ModelMenPai.prototype, "ModelMenPai");
var MPNoticeMgr = function () {
    function t() {}
    return t.huoYueShengji = function () {
        var t = VoHuoYue.level,
            e = CFG_MENPAI.LIB7[t],
            i = !1;
        if (e) {
            var o = e.exp,
                n = VoHuoYue.exp;
            n >= o && (i = !0)
        }
        return VMenPaiPage.huoyueSJ = i, i
    }, t.huoyueDay = function () {
        var t = VoHuoYueDay.map,
            e = !1;
        for (var i in t) {
            var o = t[i].state;
            if (2 == o) {
                e = !0;
                break
            }
        }
        return VMenPaiPage.huoyueDayGot = e, e
    }, t.mpBoss = function () {}, t
}();
__reflect(MPNoticeMgr.prototype, "MPNoticeMgr");
var VApplyList = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.isCh = !1, e.skinName = "resource/eui_skins/game/menpai/VApplyListSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.base.title = "申请列表", e.addCloseListen(e.base.btnClose), e.addCloseListen(e.base.btnReturn), DisplayUtil.popBtnStyle(e.checkbox), e.checkbox.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onChck, e), e.isCh = e.gou.visible = !1, e.container.itemRenderer = ItemApply, e.container.dataProvider = e.sourceData
    }, e.prototype.onChck = function () {
        if ("" == this.inputTxt.text || parseInt(this.inputTxt.text) <= 0) return void ViewText.text("请设置战力值");
        var t = 1,
            e = parseInt(this.inputTxt.text);
        t = this.isCh ? 2 : 1, GameGlobal.modelmenpai.CG837(t, e)
    }, e.prototype.setCh = function (t) {
        this.gou.visible = this.isCh = t
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelmenpai.on(ModelMenPai.msg_appList, this.onUpdate, this), GameGlobal.modelmenpai.CG835()
    }, e.prototype.onUpdate = function (t) {
        DisplayUtil.fillDataAC(this.sourceData, t), VoApply.condition > 0 ? this.setCh(!0) : this.setCh(!1), this.inputTxt.text = VoApply.condition + ""
    }, e.prototype.removeIm = function (t) {
        for (var e = 0; e < this.sourceData.length; e++) {
            var i = this.sourceData.getItemAt(e);
            if (i && i.id == t) {
                this.sourceData.removeItemAt(e);
                break
            }
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VApplyList.prototype, "VApplyList");
var VMenPaiDT = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._state = 0, e.skinName = "resource/eui_skins/game/menpai/VMenPaiDTSkin.exml", e
    }
    return __extends(e, t), e.prototype.guideOpenHuoYue = function () {
        QuestGuideArrow.getIns().guideViewCenter(this.btnHY)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.txtReGG.textFlow = HtmlUtil.underLine("修改公告"), this.btnApp.label = "查看申请", this.btnJS.label = "门派建设", this.btnMem.label = "成员信息", this.btnList.label = "门派列表", this.btnGai.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGai, this), this.btnApp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onApplay, this), this.btnMem.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onMember, this), this.txtReGG.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGongGao, this), this.btnList.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onList, this), this.btnJS.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onJS, this), this.btnHY.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnShop.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnBOSS.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnBattle.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnZhao.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), DisplayUtil.popBtnStyle(this.btnApp), DisplayUtil.popBtnStyle(this.btnJS), DisplayUtil.popBtnStyle(this.btnMem), DisplayUtil.popBtnStyle(this.btnList), DisplayUtil.popBtnStyle(this.btnHY), DisplayUtil.popBtnStyle(this.btnShop), DisplayUtil.popBtnStyle(this.btnBOSS), DisplayUtil.popBtnStyle(this.btnBattle), DisplayUtil.popBtnStyle(this.txtReGG), DisplayUtil.popBtnStyle(this.btnGai), DisplayUtil.popBtnStyle(this.btnZhao)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnHY:
                GameGlobal.layerMgr.open(UIConst.MPHUOYUEPAGE);
                break;
            case this.btnShop:
                GameGlobal.layerMgr.open(UIConst.MENPAISHOP);
                break;
            case this.btnBOSS:
                GameGlobal.layerMgr.open(UIConst.MPBOSS);
                break;
            case this.btnBattle:
                GameGlobal.layerMgr.open(UIConst.VIEWMPBATTLEPAGE);
                break;
            case this.btnZhao:
                GameGlobal.modelmenpai.CG813()
        }
    }, e.prototype.onJS = function () {
        GameGlobal.layerMgr.open(UIConst.MENPAIJIANSHE)
    }, e.prototype.onList = function () {
        GameGlobal.layerMgr.open(UIConst.MENPAILIST)
    }, e.prototype.onGongGao = function () {
        GameGlobal.layerMgr.open(UIConst.MPGONGGAO)
    }, e.prototype.onMember = function () {
        GameGlobal.layerMgr.open(UIConst.MPMEMBERS)
    }, e.prototype.onApplay = function () {
        return VoMember.minePos < 5 ? void ViewText.text("只有掌门和副掌门才能查看申请记录") : void GameGlobal.layerMgr.open(UIConst.MPAPPLYLIST)
    }, e.prototype.onGai = function () {
        GameGlobal.layerMgr.open(UIConst.MENPAIRENAME)
    }, e.prototype.reGongGao = function (t) {
        this.txtGongGao.text = t
    }, e.prototype.reName = function (t) {
        this.txtName.text = t
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelmenpai.on(ModelMenPai.msg_mpDating, this.onUpdate, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.setJianSheNot, this), GameGlobal.modelMPBattle.on(ModelMPBattle.msg_baomingState, this.onMpBatNot, this), GameGlobal.modelmenpai.CG811(), this.setAppNotice(), this.setHuoyueNotice(), this.setBossNotice(), this.setJianSheNot(), this.setMpBattleNot()
    }, e.prototype.onUpdate = function () {
        var t = this,
            e = VoMenPai.getInst(),
            i = CFG_MENPAI.LIB1[e.level];
        t.txtName.text = e.name, t.txtHorseName.text = e.hostName, t.txtCount.text = e.count + "/" + i.chengyuan, t.txtSW.text = e.shengwang + "/" + i.mpsw, t.txtLevel.text = e.level + "", t.txtGongGao.text = e.gonggao
    }, e.prototype.setJianSheNot = function () {
        var t = GameGlobal.modelmenpai.mpJianSheNot();
        this.btnJS.setNoticeVis(t)
    }, e.prototype.setNoticeHY = function (t) {
        this.iconNotice1.visible = t
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelmenpai.off(ModelMenPai.msg_mpDating, this.onUpdate, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.setJianSheNot, this), GameGlobal.modelMPBattle.off(ModelMPBattle.msg_baomingState, this.onMpBatNot, this)
    }, e.prototype.setAppNotice = function () {
        this.btnApp.setNoticeVis(VMenPaiPage.appRed)
    }, e.prototype.setHuoyueNotice = function () {
        this.iconNotice1.visible = VMenPaiPage.huoyueSJ || VMenPaiPage.huoyueDayGot
    }, e.prototype.setBossNotice = function () {
        this.iconNotice2.visible = VMenPaiPage.bossGot || VMenPaiPage.bossTZ
    }, e.prototype.setMpBattleNot = function () {
        this.iconNotice3.visible = 1 == GameGlobal.modelMPBattle.mpBatCanBaoMing
    }, e.prototype.onMpBatNot = function () {
        this.iconNotice3.visible = 1 == VoMpBattle.getInst().baoMingState
    }, e.prototype.updateNoticeHY = function () {
        var t = MPNoticeMgr.huoYueShengji(),
            e = MPNoticeMgr.huoyueDay(),
            i = t || e;
        return this.iconNotice1.visible = i, i
    }, e
}(BaseEUIView);
__reflect(VMenPaiDT.prototype, "VMenPaiDT");
var VMenPaiFB = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData1 = new eui.ArrayCollection, e.countTm = 15, e._selIdx = -1, e.isCh = !1, e.isCh2 = !1, e.gridArr = [], e.state = 1, e.state1Tm = 30, e.state2Tm = 55, e.isInteam = !1, e.skinName = "resource/eui_skins/game/menpai/VMenPaiFBSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnLeft), DisplayUtil.popBtnStyle(this.btnRight), DisplayUtil.popBtnStyle(this.checkBox), DisplayUtil.popBtnStyle(this.checkBox2), DisplayUtil.popBtnStyle(this.btn1), DisplayUtil.popBtnStyle(this.btn2), this.btn1.label = "创建队伍", this.btn2.label = "快速加入", this.checkBox.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCH, this), this.checkBox2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCH2, this), this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCreate, this), this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onJoin, this), 0 == VoMPFB.list.length && VoMPFB.init();
        var e = VoMPFB.list;
        this.container1.dataProvider = this.sourceData1, this.container1.itemRenderer = ItemMPFB, this.sourceData1.source = e, this.container1.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onSel, this), this.setCh(!0), this.setCh2(!0), new ScrollMove(this.btnRight, this.btnLeft, this.container1, "width")
    }, e.prototype.start = function (t) {
        void 0 === t && (t = 15), this.countTm = t, 1 == this.state ? this.txtTm.text = this.countTm + "秒自动加入" : this.txtTm.text = this.countTm + "秒进入战斗", GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.stop = function (t) {
        void 0 === t && (t = 15), this.countTm = t, 1 == this.state ? this.txtTm.text = this.countTm + "秒自动加入" : this.txtTm.text = this.countTm + "秒进入战斗", GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onTick = function (t) {
        if (t.countTm--, 1 == t.state ? t.txtTm.text = t.countTm + "秒自动加入" : t.txtTm.text = t.countTm + "秒进入战斗", t.countTm <= 0) {
            var e = t.sourceData1.getItemAt(t._selIdx);
            if (!e) return void GameGlobal.tick.removeInterv(this.onTick);
            1 == t.state ? (t.stop(t.state1Tm), e.cfg && GameGlobal.modelmenpai.CG863(2, e.cfg.l)) : (t.stop(t.state2Tm), GameGlobal.modelmenpai.CG867())
        }
    }, e.prototype.onSel = function (t) {
        var i = t.itemIndex;
        e.clickApp = !0, this.setSel(i)
    }, e.prototype.setSel = function (t) {
        if (this._selIdx = t, this.container1.selectedIndex = t, this.updateAward(), !this.isInteam) {
            if (-1 != t) {
                var e = this.sourceData1.getItemAt(this._selIdx);
                GameGlobal.modelmenpai.CG861(e.cfg.l)
            }
            this.updateRoom()
        }
    }, e.prototype.onCreate = function () {
        var t = this.btn1.label;
        switch (t) {
            case "创建队伍":
                var e = this.sourceData1.getItemAt(this._selIdx);
                GameGlobal.modelmenpai.CG863(1, e.cfg.l);
                break;
            case "离开队伍":
                GameGlobal.modelmenpai.CG869()
        }
    }, e.prototype.onJoin = function () {
        var t = this.btn2.label;
        switch (t) {
            case "快速加入":
                var e = this.sourceData1.getItemAt(this._selIdx);
                GameGlobal.modelmenpai.CG863(2, e.cfg.l);
                break;
            case "进入战斗":
                GameGlobal.modelmenpai.CG867()
        }
    }, e.prototype.onCH = function () {
        this.isCh = !this.isCh, this.setCh(this.isCh)
    }, e.prototype.setCh = function (t) {
        this.isCh = this.gou.visible = t, this.isCh ? 1 == this.state ? this.start(this.state1Tm) : this.start(this.state2Tm) : 1 == this.state ? this.stop(this.state1Tm) : this.stop(this.state2Tm)
    }, e.prototype.onCH2 = function () {
        this.isCh2 = !this.isCh2, this.setCh2(this.isCh2)
    }, e.prototype.setCh2 = function (t) {
        this.isCh2 = this.gou2.visible = t
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelmenpai.on(ModelMenPai.msg_mpFuben, this.updateTeam, this), GameGlobal.modelmenpai.on(ModelMenPai.msg_mpFBSelf, this.onUpdate, this), this.setSel(VoMenPai.getInst().level - 1);
        for (var i = this.container1.$children.length, o = 0; i > o; o++) {
            var n = this.container1.getChildAt(o);
            n.start()
        }
    }, e.prototype.onUpdate = function (t) {
        return e.clickApp ? void(e.clickApp = !1) : (DisplayUtil.fillDataAC(this.sourceData1, VoMPFB.list), this.txtLF.text = "剩余收益次数: " + VoMPFB.leftNum + "/" + VoMPFB.maxNum, void this.toSelIndex())
    }, e.prototype.toSelIndex = function () {
        var t = this,
            e = t.container1.numElements,
            i = t.container1.contentWidth - t.container1.width,
            o = t.container1.contentWidth / e,
            n = Math.min(i, t._selIdx * o);
        t.container1.scrollH = n
    }, e.prototype.updateAward = function () {
        var t = this.sourceData1.getItemAt(this._selIdx),
            e = ConfigHelp.makeToolByIds(1, t.cfg.jlzs);
        ConfigHelp.makeVoGrids(e, this.gridArr, 0, 0, this.container2, !0, 10, .83)
    }, e.prototype.updateRoom = function () {
        var t = this.sourceData1.getItemAt(this._selIdx),
            e = t.cfg.l;
        10 > e ? (this.iconCont.contains(this.iconNum2) && this.iconCont.removeChild(this.iconNum2), this.iconNum.source = "MPAtlas_json." + e) : (this.iconCont.contains(this.iconNum2) || this.iconCont.addChildAt(this.iconNum2, 1), this.iconNum.source = "MPAtlas_json." + e.toString().charAt(0), this.iconNum2.source = "MPAtlas_json." + e.toString().charAt(1))
    }, e.prototype.updateTeam = function () {
        this.isInteam = !1, this.container3.removeChildren();
        for (var t = VoMPTeam.list, e = t.length, i = 0; e > i; i++) {
            var o = t[i],
                n = ItemMPTeam.create();
            this.container3.addChild(n), n.data = o, n.setSt("st1")
        }
        this.btn1.visible = !0, this.btn2.visible = !0, this.btn1.label = "创建队伍", this.btn2.label = "快速加入", this.isCh ? (this.countTm = Math.min(this.state1Tm, this.countTm), this.start(this.state1Tm)) : (this.countTm = this.state1Tm, this.txtTm.text = this.countTm + "秒自动加入"), this.checkBox.x = 390, this.state = 1, this.checkBox.visible = !0, this.checkBox2.visible = !1, this.setCh2(!0)
    }, e.prototype.updateSelfTeam = function (t, e) {
        this.isInteam = !0, this.container3.removeChildren(), this.txtLF.text = "剩余收益次数: " + VoMPFB.leftNum + "/" + VoMPFB.maxNum;
        for (var i = t.length, o = 0; i > o; o++) {
            var n = t[o],
                a = ItemMPTeam.create();
            this.container3.addChild(a), a.updateSelfTeam(n), a.setSt("st2")
        }
        var s = GameGlobal.modelRole.voMine;
        this.state = 2, s.id == e ? (this.btn1.visible = !0, this.btn2.visible = !0, this.btn1.label = "离开队伍", this.btn2.label = "进入战斗", this.checkBox.x = 250, this.checkBox.visible = !0, this.checkBox2.visible = !0, i >= 3 && this.isCh2 && GameGlobal.tick.addInterv(function () {
            GameGlobal.modelmenpai.CG867()
        }, 2e3, this, !0)) : (this.btn1.label = "离开队伍", this.btn2.visible = !1, this.checkBox.visible = !1, this.checkBox2.visible = !1), this.isCh ? this.start(this.state2Tm) : (this.countTm = this.state2Tm, this.txtTm.text = this.countTm + "秒进入战斗")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelmenpai.off(ModelMenPai.msg_mpFuben, this.onUpdate, this);
        for (var i = this.container1.$children.length, o = 0; i > o; o++) {
            var n = this.container1.getChildAt(o);
            n.remove()
        }
        this.stop(), this._selIdx = -1, e.clickApp = !1, this.isInteam = !1
    }, e.clickApp = !1, e
}(BaseEUIView);
__reflect(VMenPaiFB.prototype, "VMenPaiFB");
var VMenPaiPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.base.btnReturn, 30, 30)
    }, e.prototype.guidePage = function (t) {
        var e = this.base.getTabByIdx(t);
        e && QuestGuideArrow.getIns().guideViewCenter(e)
    }, e.prototype.checkPage = function (t) {
        return this._index == t
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this);
        this.base.createTabGroup(), this.base.addTab("门派大厅", 0, 1), this.base.addTab("门派上香", 1, 2), this.base.addTab("门派副本", 2, 3), this.base.addTab("门派技能", 3, 4), this.base.listenTabClick(this.onSel, this), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn);
        var e = GameGlobal.layerMgr;
        e.reg(UIConst.MPDATING, VMenPaiDT, this), e.reg(UIConst.MPSHANGXIANG, VMenPaiSx, this), e.reg(UIConst.MPFUBEN, VMenPaiFB, this), e.reg(UIConst.MPSKILL, VMPSkill, this)
    }, e.prototype.onSel = function (t) {
        var e = t.sort;
        this.setSel(e)
    }, e.prototype.setSel = function (t) {
        switch (this._index) {
            case 0:
                GameGlobal.layerMgr.close(UIConst.MPDATING);
                break;
            case 1:
                GameGlobal.layerMgr.close(UIConst.MPSHANGXIANG);
                break;
            case 2:
                GameGlobal.layerMgr.close(UIConst.MPFUBEN);
                break;
            case 3:
                GameGlobal.layerMgr.close(UIConst.MPSKILL)
        }
        switch (t) {
            case 0:
                GameGlobal.layerMgr.open(UIConst.MPDATING);
                break;
            case 1:
                GameGlobal.layerMgr.open(UIConst.MPSHANGXIANG);
                break;
            case 2:
                GameGlobal.layerMgr.open(UIConst.MPFUBEN);
                break;
            case 3:
                GameGlobal.layerMgr.open(UIConst.MPSKILL)
        }
        this.base.setTabSelIdx(t), this.base.title = this.base.getTbtnTextBySort(t), this._index = t
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), void 0 == e && (e = 0), this.setSel(e), this.setNoticeApp(), this.setNoticeFB(), this.setNoticeSX(), this.setNoticeSkill()
    }, e.prototype.onClose = function () {
        this.setSel(-1)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.setNoticeApp = function () {
        var t = e;
        this.base.setNoticBySort(0, t.appRed || t.huoyueSJ || t.huoyueDayGot || t.bossGot || t.bossTZ || GameGlobal.modelmenpai.mpJianSheNot());
        var i = GameGlobal.layerMgr.getView(UIConst.MPDATING);
        i && (i.setAppNotice(), i.setHuoyueNotice(), i.setBossNotice())
    }, e.prototype.setNoticeSX = function () {
        this.base.setNoticBySort(1, e.sxRed);
        var t = GameGlobal.layerMgr.getView(UIConst.MPSHANGXIANG);
        t && t.updateState()
    }, e.prototype.setNoticeFB = function () {
        this.base.setNoticBySort(2, e.fbRed)
    }, e.prototype.setNoticeSkill = function () {
        var t = e.skillRed;
        this.base.setNoticBySort(3, t)
    }, e
}(BaseEUIView);
__reflect(VMenPaiPage.prototype, "VMenPaiPage");
var VMenPaiSx = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.positions = [{
            x: 78,
            y: 130
        }, {
            x: 470,
            y: 130
        }, {
            x: 273,
            y: 64
        }], e.itemsXL = [], e.skinName = "resource/eui_skins/game/menpai/VMenPaiSxSkin.exml", e
    }
    return __extends(e, t), e.prototype.guideSX = function () {
        var t = this.itemsXL[0].btnSX;
        QuestGuideArrow.getIns().guideViewCenter(t)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this,
            i = (this.positions.length, CFG_MENPAI.LIB2),
            o = 0;
        for (var n in i) {
            var a = this.positions[o],
                s = new VoXianglu,
                r = i[n];
            s.type = parseInt(n), s.cost = r.xh, s.exp = r.mpsw, s.menGong = r.mpgx, s.xianghuo = r.xhz, s.name = r.name;
            var l = new ItemXL;
            this.addChild(l), l.$setX(a.x), l.$setY(a.y), l.data = s, this.itemsXL.push(l), o++
        }
        e.proB = new ProgressB, e.proB.setTxtVis(!1), e.proB.size = new egret.Point(580, 26), e.proB.offSet = new egret.Point(1.6, 1.6), e.proB.setVal(0, 0), e.proB.x = 56, e.proB.y = 466, e.addChildAt(e.proB, 3), e.proB.setVal(0, 0), DisplayUtil.popBtnStyle(e.iconTong), DisplayUtil.popBtnStyle(e.iconYin), DisplayUtil.popBtnStyle(e.iconJin), e.iconTong.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), e.iconYin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), e.iconJin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.iconTong:
                this.getAwards(1);
                break;
            case this.iconYin:
                this.getAwards(2);
                break;
            case this.iconJin:
                this.getAwards(3)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelmenpai.on(ModelMenPai.msg_xianglu, this.onUpdate, this), GameGlobal.modelmenpai.CG829()
    }, e.prototype.onUpdate = function () {
        var t = this;
        t.container.removeChildren();
        var e = VoSXRecord.getInst();
        t.proB.setVal(e.maxExp, e.curExp), t.txtExp.text = "今日香火值进度: " + e.curExp + "/" + e.maxExp, t.txtCount.text = "今日上香次数: " + e.sxPerson + "/" + e.maxPerson;
        for (var i = e.details, o = i.length, n = 0; o > n; n++) {
            var a = i[n],
                s = ItemSXDetail.create();
            t.container.addChild(s), s.data = a
        }
        this.updateState()
    }, e.prototype.updateState = function () {
        for (var t = 0; t < this.itemsXL.length; t++) {
            var e = this.itemsXL[t];
            e.updateSt()
        }
        this.notice()
    }, e.prototype.getAwards = function (t) {
        var e = CFG_MENPAI.LIB3[t].jl;
        GameGlobal.layerMgr.open(UIConst.MPXHAWARDS, {
            jiangli: e,
            type: t
        })
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelmenpai.off(ModelMenPai.msg_xianglu, this.onUpdate, this)
    }, e.prototype.notice = function () {
        var t = VoSXRecord.getInst(),
            e = t.awards,
            i = e[0];
        this.icon1.visible = 1 == i, i = e[1], this.icon2.visible = 1 == i, i = e[2], this.icon3.visible = 1 == i
    }, e
}(BaseEUIView);
__reflect(VMenPaiSx.prototype, "VMenPaiSx");
var VMPBoss = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.WIDTH = 533, e.timeKey1 = 1, e.timekey2 = 2, e.timeKey3 = 3, e.timeMap = {}, e.isTicking = !1, e.curPage = 1, e.grids = [], e.buyCountCostYB = 20, e.skinName = "VMPBossSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "门派BOSS", this.btnMPZJ.label = "召集", this.btnHand.label = "挑战", this.uirole = UIRole.create(), this.partCont.addChild(this.uirole), this.partCont.scaleX = this.partCont.scaleY = 1.5, this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), DisplayUtil.popBtnStyle(this.btnMPZJ), DisplayUtil.popBtnStyle(this.btnHand), DisplayUtil.popBtnStyle(this.leftBtn), DisplayUtil.popBtnStyle(this.rightBtn), DisplayUtil.popBtnStyle(this.iconAdd), this.btnMPZJ.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onZhaoji, this), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.bxTarPos.addEventListener(egret.TouchEvent.TOUCH_TAP, this.getAward, this), this.iconAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAdd, this), this.iconNotice1.visible = !1, this.iconNotice2.visible = !1, VoMPBoss.init(), this.maxPage = VoMPBoss.max_length
    }, e.prototype.onAdd = function () {
        var t = this;
        if (VoMPBoss.canBuyCount <= 0) return void ViewText.text("今日可购买次数已用完!");
        if (GameGlobal.modelRole.voMine.yuanbao < this.buyCountCostYB) return void ViewText.text("购买次数需要20元宝，您的元宝不足!");
        var e = "确定花" + HtmlUtil.color(this.buyCountCostYB + "元宝", "#fe0000") + "购买一次挑战次数?\n今日可购买次数: " + HtmlUtil.color(VoMPBoss.canBuyCount, "#fe0000");
        ViewAlert.show(e, function () {
            GameGlobal.modelmenpai.CG887(t.curPage)
        })
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget,
            i = e.label,
            o = GameGlobal.modelBag.capacity,
            n = GameGlobal.modelBag.equips.length;
        if (4 > o - n) return void ViewAlert.show("背包格子已满，是否熔炼装备，腾出背包空间?", function () {
            GameGlobal.layerMgr.open(UIConst.EQUIPRL)
        });
        switch (i) {
            case "挑战":
                var a = this.curBoss.cfg.l,
                    s = VoMenPai.getInst().level;
                a > s ? ViewText.text("门派等级未达到BOSS解锁条件") : this.onTiaoZhan();
                break;
            case "领取奖励":
            case "已领取":
                this.getAward()
        }
    }, e.prototype.onChange = function (t) {
        var e, i = t.currentTarget;
        switch (i) {
            case this.leftBtn:
                e = this.curPage - 1;
                break;
            case this.rightBtn:
                e = this.curPage + 1
        }
        e = Math.max(1, Math.min(e, this.maxPage)), this.setSel(e)
    }, e.prototype.setSel = function (t) {
        GameGlobal.modelmenpai.CG881(t)
    }, e.prototype.getAward = function () {
        GameGlobal.modelmenpai.CG883(3, this.curBoss.cfg.id)
    }, e.prototype.onTiaoZhan = function () {
        GameGlobal.modelmenpai.CG883(2, this.curBoss.cfg.id), GameGlobal.modelBattle.once(ModelBattle.MSG_BATTLE_BEGIN, this.registerSymbol, this)
    }, e.prototype.registerSymbol = function () {
        GameGlobal.modelmenpai.isBattleing = !0
    }, e.prototype.onZhaoji = function () {
        var t = this.curBoss.state;
        2 == t || 3 == t ? ViewText.text("当前BOSS被击杀了，就不能召集") : 4 == t ? ViewText.text("当前BOSS尚未激活，不能召集") : GameGlobal.modelmenpai.CG883(1, this.curBoss.cfg.id)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), void 0 == e ? this.setSel(0) : this.setSel(e)
    }, e.prototype.getSelectedBossId = function () {
        return this.curPage
    }, e.prototype.update = function (t) {
        this.curPage = t, this.curBoss = VoMPBoss.find(t), this.leftBtn.visible = 1 != this.curPage, this.rightBtn.visible = this.curPage != this.maxPage;
        var e = VoMPBoss;
        e.maxCount = CFG_MENPAI.LIB1[VoMenPai.getInst().level].count;
        var i = this.curBoss,
            o = i.blood,
            n = CFG_MONSTER.LIB[i.cfg.boss].qixue,
            a = o / n;
        a = Math.min(1, a), 4 == i.state ? (this.progBar.width = this.WIDTH, this.txtBar.text = n + "/" + n) : (this.progBar.width = this.WIDTH * a, this.txtBar.text = o + "/" + n), this.txtName.text = i.cfg.n, ConfigHelp.makeStrGrids(i.cfg.jsjl, this.grids, 0, 0, this.container, !0), this.txtLeftCount.text = "剩余挑战次数: " + VoMPBoss.tiaoZhanCnt, this.addTickReAndTP(), e.tiaoZhanCnt >= e.maxCount || e.tiaoZhanTime <= 0 ? this.removeTickTZ() : this.addTickTZ(), this.updateRLNot()
    }, e.prototype.updateRLNot = function () {
        var t = parseInt(this.curBoss.cfg.id) - 1,
            e = parseInt(this.curBoss.cfg.id) + 1,
            i = VoMPBoss.find(t);
        i && (this.iconNotice1.visible = 1 == i.got), i = VoMPBoss.find(e), i && (this.iconNotice2.visible = 1 == i.got)
    }, e.prototype.addTickReAndTP = function () {
        var t = this.curBoss;
        switch (this.iconGot.visible = !1, this.bxTarPos.visible = !1, t.state) {
            case 1:
                this.txtTP.text = "BOSS逃跑倒计时:", this.timeMap[this.timeKey1] = 1, this.txtTPTime.text = DateUtil.getHMSBySecond2(t.taopaoTime), this.baoxiangEff && (EffectMgr.getIns().removeEff(this.baoxiangEff), this.baoxiangEff = null), this.baoxiang.visible = !1, this.txtBossTPTip.visible = !1, this.partCont.visible = !0, this.bossBlack.visible = !1, this.setBtnState("挑战", VoMPBoss.tiaoZhanCnt > 0), this.uirole.setMonsterID(this.curBoss.cfg.gwmx), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play();
                break;
            case 2:
                this.txtTP.text = "BOSS刷新倒计时:", this.timeMap[this.timekey2] = 1, this.txtTPTime.text = DateUtil.getHMSBySecond2(t.refreshTime), this.baoxiangEff || (this.baoxiangEff = EffectMgr.addEff("uieff/baoxiang", this.bxTarPos, 0, 0, 800, -1, !0)), this.bxTarPos.visible = !0, this.baoxiang.visible = !1, this.txtBossTPTip.visible = !0, this.txtBossTPTip.text = "BOSS已被击杀，请等候BOSS刷新再来挑战!", this.partCont.visible = !1, this.bossBlack.visible = !1, this.setBtnState("领取奖励", !0), this.uirole.stop();
                break;
            case 3:
                this.txtTP.text = "BOSS刷新倒计时:", this.timeMap[this.timekey2] = 1, this.txtTPTime.text = DateUtil.getHMSBySecond2(t.refreshTime), this.baoxiangEff && (EffectMgr.getIns().removeEff(this.baoxiangEff), this.baoxiangEff = null), this.baoxiang.visible = !0, this.txtBossTPTip.visible = !0, this.txtBossTPTip.text = "BOSS已被击杀，请等候BOSS刷新再来挑战!", this.partCont.visible = !1, this.bossBlack.visible = !1, this.iconGot.visible = !0, this.setBtnState("已领取", !1), this.uirole.stop();
                break;
            case 4:
                this.txtBossTPTip.visible = !0, this.baoxiangEff && (EffectMgr.getIns().removeEff(this.baoxiangEff), this.baoxiangEff = null), this.baoxiang.visible = !1, t.taopaoTime > 0 ? (this.txtBossTPTip.text = "帮会等级较低，未达到挑战条件!", this.txtTP.text = "BOSS逃跑倒计时:", this.timeMap[this.timeKey1] = 1, this.txtTPTime.text = DateUtil.getHMSBySecond2(t.taopaoTime), this.partCont.visible = !0, this.bossBlack.visible = !1, this.setBtnState("挑战", !1), this.uirole.setMonsterID(this.curBoss.cfg.gwmx), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play()) : (this.txtBossTPTip.text = "BOSS已逃跑，请等候BOSS刷新再来挑战!", this.txtTP.text = "BOSS刷新倒计时:", this.timeMap[this.timekey2] = 1, this.txtTPTime.text = DateUtil.getHMSBySecond2(t.refreshTime), this.partCont.visible = !1, this.bossBlack.visible = !0, this.setBtnState("挑战", !1), this.uirole.stop());
                break;
            case 5:
                this.txtTP.text = "BOSS刷新倒计时:", this.txtBossTPTip.text = "BOSS已逃跑，请等候BOSS刷新再来挑战!", this.timeMap[this.timekey2] = 1, this.txtTPTime.text = DateUtil.getHMSBySecond2(t.refreshTime), this.baoxiangEff && (EffectMgr.getIns().removeEff(this.baoxiangEff), this.baoxiangEff = null), this.baoxiang.visible = !1, this.partCont.visible = !1, this.bossBlack.visible = !0, this.setBtnState("挑战", !1), this.uirole.stop()
        }
        this.validateTick()
    }, e.prototype.setBtnState = function (t, e) {
        var i = e;
        this.btnHand.label = t, this.btnHand.enabled = i, this.btnHand.setNoticeVis(i)
    }, e.prototype.removeTickReAndTP = function (t) {
        delete this.timeMap[t], this.validateTick()
    }, e.prototype.addTickTZ = function () {
        var t = VoMPBoss;
        this.txtLeftTime.text = DateUtil.getHMSBySecond2(t.tiaoZhanTime), this.timeMap[this.timeKey3] = 1, this.txtLT.visible = !0, this.txtLeftTime.visible = !0, this.validateTick()
    }, e.prototype.removeTickTZ = function () {
        delete this.timeMap[this.timeKey3], this.txtLT.visible = !1, this.txtLeftTime.visible = !1, this.validateTick()
    }, e.prototype.validateTick = function () {
        var t = Object.keys(this.timeMap);
        0 == t.length ? (this.isTicking = !1, GameGlobal.tick.removeInterv(this.onTick)) : this.isTicking || (this.isTicking = !0, GameGlobal.tick.addInterv(this.onTick, 1e3, this))
    }, e.prototype.onTick = function (t) {
        var e = t.curBoss,
            i = VoMPBoss;
        for (var o in t.timeMap) {
            var n = parseInt(o);
            switch (n) {
                case 1:
                    t.txtTPTime.text = DateUtil.getHMSBySecond2(e.taopaoTime), e.taopaoTime--, e.taopaoTime < 0 && (t.removeTickReAndTP(t.timeKey1), GameGlobal.modelmenpai.CG881(t.curBoss.cfg.id));
                    break;
                case 2:
                    t.txtTPTime.text = DateUtil.getHMSBySecond2(e.refreshTime), e.refreshTime--, e.refreshTime < 0 && (t.removeTickReAndTP(t.timekey2), GameGlobal.modelmenpai.CG881(t.curBoss.cfg.id));
                    break;
                case 3:
                    t.txtLeftTime.text = DateUtil.getHMSBySecond2(i.tiaoZhanTime), i.tiaoZhanTime--, i.tiaoZhanTime < 0 && (t.removeTickTZ(), GameGlobal.modelmenpai.CG881(t.curBoss.cfg.id))
            }
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.uirole && this.uirole.stop(), GameGlobal.tick.removeInterv(this.onTick), this.isTicking = !1
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(VMPBoss.prototype, "VMPBoss");
var VMPDayAwards = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "resource/eui_skins/game/menpai/VMPDayAwardsSkin.exml", e
    }
    return __extends(e, t), e.prototype.guideGet = function () {
        QuestGuideArrow.getIns().guideTo(this, 550, 150)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemHuoYueDay, VoHuoYueDay.init()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelmenpai.on(ModelMenPai.msg_mpHuoyueDay, this.onUpdate, this), GameGlobal.modelmenpai.CG875()
    }, e.prototype.onUpdate = function () {
        var t = [];
        for (var e in VoHuoYueDay.map) {
            var i = VoHuoYueDay.map[e];
            t.push(i)
        }
        this.sourceData.source = t
    }, e.prototype.updateState = function (t) {
        this.sourceData.itemUpdated(t)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.sourceData.removeAll(), GameGlobal.modelmenpai.off(ModelMenPai.msg_mpHuoyueDay, this.onUpdate, this)
    }, e
}(BaseEUIView);
__reflect(VMPDayAwards.prototype, "VMPDayAwards");
var VMPHuoYue = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.txtNexts = [], e.txtAdds = [], e.grids = [], e.sourceData2 = new eui.ArrayCollection, e.skinName = "resource/eui_skins/game/menpai/VMPHuoYueSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.btnSJ.label = "升级", this.txtYuLan.textFlow = HtmlUtil.underLine(this.txtYuLan.text), DisplayUtil.popBtnStyle(this.btnSJ), DisplayUtil.popBtnStyle(this.txtYuLan), this.btnSJ.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.txtYuLan.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onYuLan, this);
        for (var e = 0; 4 > e; e++) this.txtNexts.push(this["txtNext" + e]);
        for (var e = 0; 4 > e; e++) this.txtAdds.push(this["txtAdd" + e]);
        this.proB = new ProgressB, this.proB.size = new egret.Point(450, 30), this.proB.offSet = new egret.Point(1.6, 1.6), this.proB.setVal(1, 1), this.proB.x = 50, this.proB.y = 387, this.addChild(this.proB), this.container2.dataProvider = this.sourceData2, this.container2.itemRenderer = ItemHuoyue, VoHuoYue.init()
    }, e.prototype.onYuLan = function () {
        GameGlobal.layerMgr.open(UIConst.MPHYYULAN)
    }, e.prototype.onHand = function () {
        GameGlobal.modelmenpai.CG877()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelmenpai.on(ModelMenPai.msg_mpHuoyue, this.onUpdate, this), GameGlobal.modelmenpai.CG873()
    }, e.prototype.onUpdate = function () {
        this.updateAwardsAndLv(), this.updateTaskInfo(), this.updateAtts(), this.setNotice()
    }, e.prototype.updateAwardsAndLv = function () {
        var t = VoHuoYue.level,
            e = VoHuoYue.find(t);
        e ? (this.txtManJi.visible = !1, ConfigHelp.makeStrGrids(e.jl, this.grids, 0, 0, this.container1, !0)) : (this.txtManJi.visible = !0, ConfigHelp.makeStrGrids("", this.grids, 0, 0, this.container1, !0));
        var i = t.toString(),
            o = i.charAt(0);
        if (this.imgLv1.source = "MPAtlas2_json." + o, i.length > 1) {
            this.txtImgCont.contains(this.imgLv2) || this.txtImgCont.addChild(this.imgLv2);
            var n = i.charAt(1);
            this.imgLv2.source = "MPAtlas2_json." + n
        } else this.txtImgCont.contains(this.imgLv2) && this.txtImgCont.removeChild(this.imgLv2);
        var a = e.exp,
            s = VoHuoYue.exp;
        this.proB.setVal(a, s)
    }, e.prototype.updateAtts = function () {
        for (var t, e, i = CFG_MENPAI.LIB7[VoHuoYue.level], o = CFG_MENPAI.LIB7[VoHuoYue.level + 1], n = i.attr.split(/\;|\,/), a = VoAttribute.parse(n), s = "", r = 0; r < a.length; r++) {
            var t = a[r];
            s += t.name + "+" + t.val + "\n"
        }
        if (this.txtCur.text = s, o) {
            for (var l = VoAttribute.parse(o.attr), r = 0; r < l.length; r++) {
                t = a[r], e = l[r];
                var h = e.val - t.val,
                    c = this.txtNexts[r],
                    p = this.txtAdds[r];
                c.text = e.name + "+" + e.val, p.text = "+" + h
            }
            this.nextGroup.visible = !0, this.txtAttManjji.visible = !1
        } else this.nextGroup.visible = !1, this.txtAttManjji.visible = !0
    }, e.prototype.updateTaskInfo = function () {
        var t = VoHuoYue.map,
            e = [];
        for (var i in t) {
            var o = t[i];
            e.push(o)
        }
        this.sourceData2.source = e
    }, e.prototype.updateNoticeSJ = function () {
        var t = MPNoticeMgr.huoYueShengji();
        this.btnSJ.setNoticeVis(t)
    }, e.prototype.setNotice = function () {
        this.updateNoticeSJ()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.sourceData2.removeAll(), GameGlobal.modelmenpai.off(ModelMenPai.msg_mpHuoyue, this.onUpdate, this)
    }, e
}(BaseEUIView);
__reflect(VMPHuoYue.prototype, "VMPHuoYue");
var VMPHuoYuePage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.labels = ["门派活跃", "每日奖励"], e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.guideClose = function () {
        var t = this.base.btnReturn;
        QuestGuideArrow.getIns().guideViewCenter(t)
    }, e.prototype.checkPage = function (t) {
        return this._index == t
    }, e.prototype.guidePage = function (t) {
        var e = this.base.getTabBySort(t);
        e && QuestGuideArrow.getIns().guideViewCenter(e)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.base.createTabGroup(), this.base.addTab("门派活跃", 0, 1), this.base.addTab("每日奖励", 1, 2), this.base.listenTabClick(this.onSel, this);
        var e = GameGlobal.layerMgr;
        e.reg(UIConst.MPHUOYUE, VMPHuoYue, this), e.reg(UIConst.MPHUOYUEDAY, VMPDayAwards, this)
    }, e.prototype.onSel = function (t) {
        var e = t.sort;
        this.setSel(e)
    }, e.prototype.setSel = function (t) {
        var e = GameGlobal.layerMgr;
        switch (this._index) {
            case 0:
                e.close(UIConst.MPHUOYUE);
                break;
            case 1:
                e.close(UIConst.MPHUOYUEDAY)
        }
        switch (t) {
            case 0:
                e.open(UIConst.MPHUOYUE);
                break;
            case 1:
                e.open(UIConst.MPHUOYUEDAY)
        }
        this.base.setTabSelBySort(t), this.base.title = this.base.getTbtnTextBySort(t), this._index = t
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), void 0 != e ? this.setSel(e) : this.setSel(0), this.setNotice(VMenPaiPage.huoyueSJ, VMenPaiPage.huoyueDayGot)
    }, e.prototype.setNotice = function (t, e) {
        this.updateNoticeHY(t), this.updateNoticeDay(e)
    }, e.prototype.updateNoticeHY = function (t) {
        if (void 0 == t) {
            var e = MPNoticeMgr.huoYueShengji();
            this.base.setNoticBySort(0, e)
        } else this.base.setNoticBySort(0, t)
    }, e.prototype.updateNoticeDay = function (t) {
        if (void 0 == t) {
            var e = MPNoticeMgr.huoyueDay();
            this.base.setNoticBySort(1, e)
        } else this.base.setNoticBySort(1, t)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.setSel(-1)
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(VMPHuoYuePage.prototype, "VMPHuoYuePage");
var VMPList = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.dataSource = new eui.ArrayCollection, e.skinName = "resource/eui_skins/game/menpai/VMPListSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "门派列表", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.btnCreate.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnOneKeyApp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), DisplayUtil.popBtnStyle(this.btnCreate), this.btnCreate.label = "创建门派", this.btnOneKeyApp.label = "一键申请", this.container.itemRenderer = ItemMPLt, this.container.dataProvider = this.dataSource
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnCreate:
                GameGlobal.layerMgr.open(UIConst.MPCREATE);
                break;
            case this.btnOneKeyApp:
                this.hasZhanLiSuitable() || this.autoCreateMP(1, "门派")
        }
    }, e.prototype.hasZhanLiSuitable = function () {
        for (var t = this.dataSource.source, e = GameGlobal.modelRole.voMine.str, i = 0, o = t.length; o > i; i++) {
            var n = t[i];
            if (e > n.condition && n.condition > 0 && !n.isFull()) return GameGlobal.modelmenpai.CG825(1, n.mpId), !0
        }
        return !1
    }, e.prototype.autoCreateMP = function (t, e) {
        GameGlobal.modelmenpai.CG821(t, e)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelmenpai.on(ModelMenPai.msg_mpList, this.onUpdate, this), GameGlobal.modelmenpai.CG815()
    }, e.prototype.onUpdate = function (t) {
        DisplayUtil.fillDataAC(this.dataSource, t), GameGlobal.modelRole.voMine.menpaiId > 0 ? (this.btnCreate.visible = !1, this.btnOneKeyApp.visible = !1) : (this.btnCreate.visible = !0, this.btnOneKeyApp.visible = !0)
    }, e.prototype.updateState = function (t, e) {
        for (var i = this.container.$children.length, o = 0; i > o; o++) {
            var n = this.container.getChildAt(o);
            if (n.data.mpId == t) {
                n.updateState(e);
                break
            }
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelmenpai.off(ModelMenPai.msg_mpList, this.onUpdate, this)
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(VMPList.prototype, "VMPList");
var VMPMembers = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.dataSource = new eui.ArrayCollection, e.skinName = "resource/eui_skins/game/menpai/VMPMembersSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "门派成员", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.btnQuit.label = "退出", DisplayUtil.popBtnStyle(this.btnQuit), this.btnQuit.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onQuit, this), this.container.itemRenderer = ItemMember, this.container.dataProvider = this.dataSource
    }, e.prototype.onQuit = function () {
        var t = GameGlobal.modelmenpai.quitCount > 0 ? HtmlUtil.color("(注：退出门派8小时后才能再次加入门派)", "#fe0000") : "";
        ViewAlert.show("是否确定退出门派?\n退出后门派技能和门派贡献不变\n" + t, function () {
            GameGlobal.modelmenpai.CG817()
        })
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelmenpai.on(ModelMenPai.msg_members, this.onUpdate, this), GameGlobal.modelmenpai.on(ModelMenPai.msg_bangGong, this.updateMine, this), GameGlobal.modelmenpai.CG819()
    }, e.prototype.onUpdate = function (t) {
        t.sort(this.sortFunc), this.dataSource.source = t, this.txtMYJob.text = "我的职位:" + VoMember.getJiWeiStr(VoMember.minePos)
    }, e.prototype.sortFunc = function (t, e) {
        return t.offLine > 0 && e.offLine > 0 ? t.offLine - e.offLine : -t.position + (t.offLine > 0 ? 100 : 0) - (-e.position + (e.offLine > 0 ? 100 : 0))
    }, e.prototype.updateMine = function () {
        this.txtMyGX.text = "我的贡献: " + VoMember.mineGX
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelmenpai.off(ModelMenPai.msg_members, this.onUpdate, this), GameGlobal.modelmenpai.off(ModelMenPai.msg_bangGong, this.updateMine, this)
    }, e
}(BaseEUIView);
__reflect(VMPMembers.prototype, "VMPMembers");
var VMPShop = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this)
    }, e.prototype.setProductSource = function () {
        this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemMpShop
    }, e.prototype.addMsg = function () {
        GameGlobal.modelmenpai.on(ModelMenPai.msg_mpStore, this.updateDatas, this), GameGlobal.modelmenpai.CG819(), GameGlobal.modelmenpai.CG843()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelmenpai.off(ModelMenPai.msg_mpStore, this.updateDatas, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, Enum_shangChengType.MENPAI)
    }, e
}(ViewShangCheng);
__reflect(VMPShop.prototype, "VMPShop");
var VMPSkill = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.positions = [{
            x: 305,
            y: 65
        }, {
            x: 500,
            y: 140
        }, {
            x: 560,
            y: 315
        }, {
            x: 480,
            y: 465
        }, {
            x: 305,
            y: 520
        }, {
            x: 135,
            y: 465
        }, {
            x: 40,
            y: 315
        }, {
            x: 95,
            y: 140
        }], e.items = [], e.skinName = "resource/eui_skins/game/menpai/VMPSkillSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), VoMPSkill.init();
        for (var e in VoMPSkill.map) {
            var i = VoMPSkill.map[e],
                o = parseInt(e) - 1,
                n = this.positions[o],
                a = new ItemMPSkill;
            a.$setX(n.x), a.$setY(n.y), this.addChild(a), a.data = i, this.items.push(a), 1 == parseInt(e) ? a.setSel(!0) : a.setSel(!1)
        }
        this.imgTxt = new ImageText, this.imgTxt.container = this.zhanliCont, this.imgTxt.charFunc = ImageText.STRFUNC, this.btnSJ.label = "升级", this.btnSJ.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        GameGlobal.modelmenpai.CG851()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelmenpai.on(ModelMenPai.msg_mpSkill, this.onUpdate, this), GameGlobal.modelmenpai.CG849()
    }, e.prototype.onUpdate = function () {
        var t = this,
            e = VoMPSkill;
        t.imgTxt.setText("z" + e.zhanli), t.txtManji.visible = !1;
        var i, o, n = e.headId,
            a = n,
            s = 0,
            r = 0,
            l = n / 8 >> 0,
            h = a / 8 >> 0;
        8 >= n ? (i = MPAtt.parseStr(CFG_MENPAI.LIB4[n].onesx), o = i[0], t.txtLeft1.text = o.name + "+0", t.txtRight1.text = o.name + "+" + o.value, t.txtRight11.text = o.value + "", o = i[1], t.txtLeft2.text = o.name + "+0", t.txtRight2.text = o.name + "+" + o.value, t.txtRight22.text = o.value + "", this.txtCost.text = VoMember.mineGX + "/" + CFG_MENPAI.LIB4[n].xh, t.setNotice()) : void 0 == CFG_MENPAI.LIB4[n] || l >= 200 || h >= 200 ? (i = MPAtt.parseStr(CFG_MENPAI.LIB4[n - 1].onesx), o = i[0], t.txtLeft1.text = o.name + "+" + o.value, o = i[1], t.txtLeft2.text = o.name + "+" + o.value, t.nextGroup.visible = !1, t.txtManji.visible = !0, this.txtCost.text = "满级") : (i = MPAtt.parseStr(CFG_MENPAI.LIB4[n - 8].onesx), o = i[0], s = o.value, t.txtLeft1.text = o.name + "+" + o.value, o = i[1], r = o.value, t.txtLeft2.text = o.name + "+" + o.value, i = MPAtt.parseStr(CFG_MENPAI.LIB4[a].onesx), o = i[0], t.txtRight1.text = o.name + "+" + o.value, t.txtRight11.text = o.value - s + "", o = i[1], t.txtRight2.text = o.name + "+" + o.value, t.txtRight22.text = o.value - r + "", this.txtCost.text = VoMember.mineGX + "/" + CFG_MENPAI.LIB4[n].xh, t.setNotice()), void 0 == CFG_MENPAI.LIB4[a] && (t.nextGroup.visible = !1, t.txtManji.visible = !0, t.setNotice(), this.txtCost.text = "满级");
        var c = GameGlobal.modelRole.voMine;
        n > 0 ? this.txtLvl.text = ((n - 1) / 8 >> 0) + "/" + c.level : this.txtLvl.text = (n / 8 >> 0) + "/" + c.level;
        var p = e.atts;
        i = MPAtt.parseArr(p);
        for (var u = 0; 7 > u; u++) {
            var d = t["txt" + (u + 1)],
                f = i[u];
            d.textFlow = HtmlUtil.parse(HtmlUtil.color(f.name, "#684c43") + HtmlUtil.color("+" + f.value, "#10a244"))
        }
        for (var g = this.items.length, u = 0; g > u; u++) {
            var m = this.items[u];
            m.updateLv(n)
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelmenpai.off(ModelMenPai.msg_mpSkill, this.onUpdate, this)
    }, e.prototype.setNotice = function () {
        var t = GameGlobal.modelmenpai.mpSkillNot();
        this.btnSJ.enabled = t, this.btnSJ.setNoticeVis(t)
    }, e
}(BaseEUIView);
__reflect(VMPSkill.prototype, "VMPSkill");
var ItemApply = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/menpai/ItemApplySkin.exml"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnJuJue.label = "拒绝", this.btnTongyi.label = "同意", this.btnJuJue.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnTongyi.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnJuJue:
                GameGlobal.modelmenpai.CG827(2, this.data.id);
                break;
            case this.btnTongyi:
                GameGlobal.modelmenpai.CG827(1, this.data.id)
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = IconUtil.getRoleHead(t.job);
            this.playerIcon.source = e, this.txtName.text = t.name, this.txtLvl.text = "等级: " + t.level, this.txtZhanli.text = "战力: " + t.zhanli
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.bg.source = "CM2_json.bg2" : this.bg.source = "CM2_json.bg1"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemApply.prototype, "ItemApply");
var ItemHuoyue = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/menpai/ItemHuoyueSkin.exml"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), DisplayUtil.popBtnStyle(this.btnHand)
    }, e.prototype.onHand = function () {
        if (this.btnHand.enabled) {
            var t = this.data.cfg.id,
                e = GameGlobal.layerMgr;
            switch (t) {
                case 1:
                    e.close(UIConst.MPHUOYUEPAGE), e.open(UIConst.MENPAI, 1);
                    break;
                case 2:
                    e.close(UIConst.MPHUOYUEPAGE), e.open(UIConst.MENPAI, 2);
                    break;
                case 3:
                    e.close(UIConst.MPHUOYUEPAGE), e.open(UIConst.MPBOSS);
                    break;
                case 4:
                    e.close(UIConst.MPHUOYUEPAGE), e.open(UIConst.MENPAIJIANSHE)
            }
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (e) {
            t.prototype.onData.call(this), this._data = e;
            var i = e.cfg;
            this.txtName.text = i.name, this.txtExp.text = e.cfg.exp, this.txtCount.text = e.count + "/" + e.cfg.count, e.count >= parseInt(e.cfg.count) ? (this.btnHand.label = "已完成", this.btnHand.enabled = !1) : (this.btnHand.label = "前往", this.btnHand.enabled = !0)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onAdd = function () {
        t.prototype.onAdd.call(this), this.alpha = 0, egret.Tween.get(this).to({
            alpha: 1
        }, 300 * (this.itemIndex + 1))
    }, e
}(ItemBase);
__reflect(ItemHuoyue.prototype, "ItemHuoyue");
var ItemHuoYueDay = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/menpai/ItemHuoYueDaySkin.exml"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), DisplayUtil.popBtnStyle(this.btnHand), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        this.btnHand.enabled && GameGlobal.modelmenpai.CG879(this.data.cfg.id)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (e) {
            t.prototype.onData.call(this), this._data = e;
            var i = e.cfg.exp,
                o = VoHuoYueDay.huoYueValue;
            switch (this.txtDes.textFlow = HtmlUtil.parse("今日活跃度达到" + i + HtmlUtil.color("(" + o + "/" + i + ")", "#10a244")), ConfigHelp.makeStrGrids(e.cfg.jl, this.grids, 0, 0, this.container, !0), e.state) {
                case 1:
                    this.btnHand.label = "未完成", this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1), this.btnHand.visible = !0, this.iconGot.visible = !1;
                    break;
                case 2:
                    this.btnHand.label = "领取", this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!0), this.btnHand.visible = !0, this.iconGot.visible = !1;
                    break;
                case 3:
                    this.btnHand.visible = !1, this.iconGot.visible = !0
            }
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemHuoYueDay.prototype, "ItemHuoYueDay");
var ItemHuoYueYL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "resource/eui_skins/game/menpai/ItemHuoYueYLSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.level;
            ConfigHelp.makeStrGrids(t.jl, this.grids, 0, 0, this.container, !0), this.txtLv.text = "活跃" + e + "级";
            var i = VoHuoYue.level;
            e >= i ? (this.btnHand.visible = !0, this.iconGot.visible = !1, this.btnHand.label = "未完成", this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1)) : (this.btnHand.visible = !1, this.iconGot.visible = !0)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(ItemHuoYueYL.prototype, "ItemHuoYueYL", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var ItemMember = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/menpai/ItemMemberSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        var t = this.data.id,
            e = this.data.position;
        if (!(VoMember.minePos <= e)) {
            var i = GameGlobal.modelRole.voMine.id;
            return t == i ? void ViewText.text("不能对自己操作") : void GameGlobal.layerMgr.open(UIConst.MPMEMBERMGR, this.data)
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = VoMember.getJiWeiStr(t.position);
            this.txtName.textFlow = HtmlUtil.parse("[" + e + "]" + HtmlUtil.color(t.name, "#b85e0e")), this.txtGX.textFlow = HtmlUtil.parse("门派贡献: " + HtmlUtil.color(t.gongxian, "#684c43")), this.txtZhanli.textFlow = HtmlUtil.parse("战力: " + HtmlUtil.color(t.zhanli, "#684c43"));
            var i = t.offLine;
            if (i > 0) {
                this.container.contains(this.iconOnline) && this.container.removeChild(this.iconOnline);
                var o = 86400,
                    n = i / o >> 0;
                if (n > 0) {
                    var a = i % o >> 0,
                        s = a / 3600 >> 0;
                    s > 0 ? this.txtOnline.text = "离线" + n + "天" + s + "小时" : this.txtOnline.text = "离线" + n + "天"
                } else this.txtOnline.text = "离线";
                this.txtOnline.textColor = 16711680
            } else this.container.contains(this.iconOnline) || this.container.addChildAt(this.iconOnline, 0), this.txtOnline.textColor = 1090116, this.txtOnline.text = "在线";
            var r = IconUtil.getRoleHead(t.job);
            this.playerIcon.source = r
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.bg.source = "CM2_json.bg2" : this.bg.source = "CM2_json.bg1"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(PopItem);
__reflect(ItemMember.prototype, "ItemMember", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var ItemMPCreate = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._selected = !1, e.skinName = "resource/eui_skins/game/menpai/ItemMPCreateSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this._selected || (this.bg.source = "MPAtlas_json.nChosen")
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtMP.text = t.mpLv + "级门派", 0 == t.vipLv ? this.txtVIP.text = "\n" : this.txtVIP.text = "(VIP" + t.vipLv + "可创建)", this.txtMax.textFlow = HtmlUtil.parse("门派最大人数:" + HtmlUtil.color(t.mpMaxMem, "#10a244")), 0 == t.costYB ? (this.iconCost.source = null, this.txtCost.textFlow = HtmlUtil.parse("创建消耗:" + HtmlUtil.color("免费", "#10a244"))) : (this.iconCost.source = "MainScreen_json.bm_yb", this.txtCost.textFlow = HtmlUtil.parse("创建消耗:" + HtmlUtil.color(t.costYB, "#10a244")))
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, t ? this.bg.source = "MPAtlas_json.chosen" : this.bg.source = "MPAtlas_json.nChosen"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(ItemMPCreate.prototype, "ItemMPCreate");
var ItemMPFB = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.uirole = UIRole.create(), e.skinName = "resource/eui_skins/game/menpai/ItemMPFBSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this._selected || (this.selIcon.visible = !1), this.grid1.setTxtVis1(!0), this.grid2.setTxtVis1(!0), this.partCont.addChild(this.uirole), this.grid1.scaleX = this.grid1.scaleY = .6, this.grid2.scaleX = this.grid2.scaleY = .6, this.grid1.enableTip(), this.grid2.enableTip(), this.scrollRect = new egret.Rectangle(0, 0, 160, 220)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.cfg;
            if (0 == t.isTG) {
                this.txtTGDes.text = "首通奖励";
                var i = ConfigHelp.makeVoList(e.stjl)
            } else this.txtTGDes.text = "通关奖励", i = ConfigHelp.makeVoList(e.tzjl);
            var o = i[0];
            this.grid1.data = o, o = i[1], this.grid2.data = o;
            var n = VoMenPai.getInst(),
                a = t.cfg.l;
            n.level >= a ? this.unOpenGp.visible = !1 : (this.unOpenGp.visible = !0, this.txtLvl.text = a + "级开启"), 10 > a ? (this.iconCont.contains(this.iconNum2) && this.iconCont.removeChild(this.iconNum2), this.iconNum.source = "MPAtlas_json." + a) : (this.iconCont.contains(this.iconNum2) || this.iconCont.addChildAt(this.iconNum2, 1), this.iconNum.source = "MPAtlas_json." + a.toString().charAt(0), this.iconNum2.source = "MPAtlas_json." + a.toString().charAt(1)), this.uirole && (this.uirole.setMonsterID(t.cfg.gwmx), this.uirole.validParts(), this.uirole.play())
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, this.selIcon.visible = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.remove = function () {
        this.uirole.stop()
    }, e.prototype.start = function () {
        this.uirole && this.uirole.play()
    }, e
}(eui.Component);
__reflect(ItemMPFB.prototype, "ItemMPFB", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var ItemMPJianShe = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "resource/eui_skins/game/menpai/ItemMPJianSheSkin.exml"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btn.label = "捐献", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.grid.enableTip(), this.grid.showOne = !0, this.grid.setTxtVis1(!0)
    }, e.prototype.onHand = function () {
        GameGlobal.modelmenpai.CG847(this.data.id)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.grid.data = t, this.txtName.text = t.name;
            var e = CFG_Item.LIB[t.id].canshu.gangWealth;
            this.txtEff.text = "捐献增加门派声望" + e
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.bg.source = "CM2_json.bg2" : this.bg.source = "CM2_json.bg1"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemMPJianShe.prototype, "ItemMPJianShe");
var ItemMPLt = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/menpai/ItemMPLtSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnApp.label = "申请", this.btnApp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.updateState(0)
    }, e.prototype.onHand = function () {
        0 == this.data.isApply ? GameGlobal.modelmenpai.CG825(1, this.data.mpId) : GameGlobal.modelmenpai.CG825(2, this.data.mpId)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtMPName.textFlow = HtmlUtil.parse(t.name + HtmlUtil.color("(Lv." + t.level + ")", "#684c43")), this.txthostName.textFlow = HtmlUtil.parse("[掌门]" + HtmlUtil.color(t.hostName, "#b85e0e"));
            var e = (Math.min(t.level, 1), CFG_MENPAI.LIB1[t.level].chengyuan);
            this.txtRenShu.text = "人数:" + t.memCnt + "/" + e, 0 == t.isApply ? this.btnApp.label = "申请" : this.btnApp.label = "取消申请", t.condition > 0 ? this.txtTJ.text = "战力>" + ConfigHelp.getNumText(t.condition) : this.txtTJ.text = "需审核", GameGlobal.modelRole.voMine.menpaiId > 0 ? DisplayUtil.remove(this.shenHeGroup) : DisplayUtil.addBy(this.shenHeGroup, this)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateState = function (t) {
        this.data && (this.data.isApply = t), 1 == t ? this.btnApp.label = "取消申请" : this.btnApp.label = "申请"
    }, Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, this.txtPM.text = t + 1 + "", 0 == (1 & t) ? this.bg.source = "CM2_json.bg2" : this.bg.source = "CM2_json.bg1"
        },
        enumerable: !0,
        configurable: !0
    }), e.create = function () {
        return new e
    }, e
}(eui.Component);
__reflect(ItemMPLt.prototype, "ItemMPLt", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var ItemMpShop = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.width = 310, e
    }
    return __extends(e, t), e
}(ItemJJCStore);
__reflect(ItemMpShop.prototype, "ItemMpShop");
var ItemMPSkill = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/menpai/ItemMPSkillSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.icon.source = IconUtil.getIconUrl(CFG_MENPAI.LIB4[t.id].icon), this.txtLv.text = "+" + t.level
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateLv = function (t) {
        if (t >= 1600) return this.data.level = 200, this.txtLv.text = "+200", void e.nowSel.setSel(!1);
        var i = CFG_MENPAI.LIB4[t].gz,
            o = CFG_MENPAI.LIB4[t].level;
        t > 8 ? t % 8 >> 0 == 1 ? o-- : this.data.position < i || o-- : (o = 0, 1 == t ? o = 0 : this.data.position < i && o++), this.data.position == i && (e.nowSel && e.nowSel.setSel(!1), this.setSel(!0)), this.data.level = o, this.txtLv.text = "+" + this.data.level
    }, e.prototype.setSel = function (t) {
        this.iconSel.visible = t, t && (e.nowSel = this)
    }, e
}(eui.Component);
__reflect(ItemMPSkill.prototype, "ItemMPSkill");
var ItemMPTeam = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/menpai/ItemMPTeamSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnHand.label = "加入", this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.kickIcon.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onKick, this), DisplayUtil.popBtnStyle(this.btnHand), DisplayUtil.popBtnStyle(this.kickIcon)
    }, e.prototype.onKick = function () {
        GameGlobal.modelmenpai.CG865(this.createInfo.heroId)
    }, e.prototype.onHand = function () {
        GameGlobal.modelmenpai.CG871(this.data.hostId)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtHost.text = t.hostName, this.txtCount.text = "人数:" + t.count + "/3", 2 == t.state ? (this.btnHand.visible = !0, this.iconJX.visible = !1) : (this.btnHand.visible = !1, this.iconJX.visible = !0)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setSt = function (t) {
        this.currentState = t
    }, e.prototype.updateSelfTeam = function (t) {
        this.createInfo = t;
        var i = GameGlobal.modelRole.voMine;
        t.heroId;
        1 == t.isLeader ? (e.leadId = t.heroId, this.leadIcon.visible = !0, this.kickIcon.visible = !1) : (this.leadIcon.visible = !1, i.id == e.leadId ? this.kickIcon.visible = !0 : this.kickIcon.visible = !1);
        var o = IconUtil.getRoleHead(t.job);
        this.heroIcon.source = o, this.txtName.text = t.name, this.txtLV.text = "等级: " + t.level, this.txtZhanli.text = "战力: " + t.zhanli
    }, e.create = function () {
        return new e
    }, e
}(eui.Component);
__reflect(ItemMPTeam.prototype, "ItemMPTeam");
var ItemSXDetail = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/menpai/ItemSXDetailSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            if (this._data = t, null != t) {
                this.txtTIme.text = Util.parseTime1(1e3 * t.time);
                var e = CFG_MENPAI.LIB2;
                this.txtName.textFlow = HtmlUtil.parse(t.name + HtmlUtil.color("上了一柱", "#684c43") + HtmlUtil.color(e[t.sxType].name, this.getColor(t.sxType)))
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.getColor = function (t) {
        switch (t) {
            case 3:
                return "#2974DB";
            case 4:
                return "#A757A8";
            case 5:
                return "#FA6E0A"
        }
    }, e.create = function () {
        return new e
    }, e
}(eui.Component);
__reflect(ItemSXDetail.prototype, "ItemSXDetail");
var ItemXL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.URL1 = "MPAtlas_json.tanmu", e.URL2 = "MPAtlas_json.zichen", e.URL3 = "MPAtlas_json.longtou", e.skinName = "resource/eui_skins/game/menpai/ItemXLSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnSX.label = "上香", this.btnSX.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtJY.text = "+" + t.exp + "门派声望", this.txtMG.text = "+" + t.menGong + "门派贡献", this.txtXH.text = "+" + t.xianghuo + "香火值";
            var e = t.cost[0],
                i = (t.cost[1], t.cost[2]),
                o = IconUtil.getIconUrl(CFG_ATTR.LIB[e].ICON);
            switch (this.costIcon.source = o, this.txtCost.text = i + "", t.type) {
                case 3:
                    this.iconType.source = this.URL1, this.txtJY.textColor = 4821474, this.txtMG.textColor = 4821474, this.txtXH.textColor = 4821474;
                    break;
                case 4:
                    this.iconType.source = this.URL2, this.txtJY.textColor = 12270290, this.txtMG.textColor = 12270290, this.txtXH.textColor = 12270290;
                    break;
                case 5:
                    this.iconType.source = this.URL3, this.txtJY.textColor = 15361283, this.txtMG.textColor = 15361283, this.txtXH.textColor = 15361283
            }
            DisplayUtil.popBtnStyle(this.btnSX)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onHand = function () {
        var t = VoSXRecord.getInst();
        if (1 == t.selfSX) return void ViewText.text("今天您已经上香过了");
        var e = this.data.cost,
            i = VoCurrency.getOwned(e[0]);
        return i < e[2] ? void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, e[0]) : void GameGlobal.modelmenpai.CG831(this.data.type)
    }, e.prototype.updateSt = function () {
        var t = VoSXRecord.getInst();
        0 == t.selfSX ? this.setNotice(!0) : this.setNotice(!1)
    }, e.prototype.setNotice = function (t) {
        this.btnSX.setNoticeVis(t), this.btnSX.enabled = t
    }, e
}(eui.Component);
__reflect(ItemXL.prototype, "ItemXL");
var VoXianglu = function () {
    function t() {
        this.type = 3, this.name = "龙头香", this.exp = 1e3, this.menGong = 800, this.xianghuo = 200
    }
    return t
}();
__reflect(VoXianglu.prototype, "VoXianglu");
var BuffSource = function () {
    function t() {
        this.renderers = [], this.datas = [], this.pool = []
    }
    return t.prototype.setRenderer = function (t) {
        this.RenderClass = t
    }, t.prototype.setContainer = function (t) {
        this.bindContainer = t
    }, Object.defineProperty(t.prototype, "source", {
        get: function () {
            return this.datas
        },
        set: function (t) {
            this.clearPrevious(), this.datas = t, t && this.validateRenders()
        },
        enumerable: !0,
        configurable: !0
    }), t.prototype.validateRenders = function () {
        for (var t = 0, e = this.datas.length; e > t; t++) {
            var i = this.datas[t],
                o = this.createRenderer();
            o.data = i, this.bindContainer.addChild(o), this.renderers.push(o)
        }
    }, t.prototype.clearPrevious = function () {
        for (; this.renderers.length;) {
            var t = this.renderers.pop();
            this.bindContainer.removeChild(t), this.addToPool(t)
        }
    }, t.prototype.createRenderer = function () {
        return this.pool.pop() || new this.RenderClass
    }, t.prototype.addToPool = function (t) {
        this.pool.push(t)
    }, t
}();
__reflect(BuffSource.prototype, "BuffSource");
var JuDianSource = function () {
    function t(t) {
        this.initView(t)
    }
    return t.prototype.initView = function (t) {
        var e = this;
        e.iconRen = t.iconRen, e.iconLing = t.iconLing, e.iconXian = t.iconXian, e.iconGate = t.iconGate, e.iconHall = t.iconHall, e.txtRen = t.txtRen, e.txtLing = t.txtLing, e.txtXian = t.txtXian, e.txtGate = t.txtGate, e.txtHall = t.txtHall, e.iconBeatRen = t.beatRen, e.iconBbeatLing = t.beatLing, e.iconBbeatXian = t.beatXian, e.iconBbeatGate = t.beatGate, e.iconBbeatHall = t.beatHall, DisplayUtil.popBtnStyle(e.iconRen), DisplayUtil.popBtnStyle(e.iconLing), DisplayUtil.popBtnStyle(e.iconXian), DisplayUtil.popBtnStyle(e.iconGate), DisplayUtil.popBtnStyle(e.iconHall), e.iconRen.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), e.iconLing.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), e.iconXian.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), e.iconGate.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), e.iconHall.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e)
    }, t.prototype.onHand = function (t) {
        if (!VoMpBattle.getInst().baoMingState) return void ViewText.text("门派未参战，无法查看据点信息");
        var e = t.currentTarget;
        switch (e) {
            case this.iconRen:
                this.dealWithType(1);
                break;
            case this.iconLing:
                this.dealWithType(2);
                break;
            case this.iconXian:
                this.dealWithType(3);
                break;
            case this.iconGate:
                this.dealWithType(4);
                break;
            case this.iconHall:
                this.dealWithType(5)
        }
    }, t.prototype.dealWithType = function (t) {
        GameGlobal.layerMgr.open(UIConst.VMPBATZHUFANGINFO, t)
    }, t.prototype.updateRen = function (t, e) {
        this.txtRen.textFlow = HtmlUtil.parse("人族据点: " + HtmlUtil.color(t + "/" + e, "#10a244")), 0 == t && VoMpBattle.getInst().isInBattleTime() && 1 == VoMpBattle.getInst().baoMingState ? (1 == ViewMPBattle.getType() ? this.iconBeatRen.source = "MPBatAtlas_json.beated" : this.iconBeatRen.source = "MPBatAtlas_json.defeat", this.iconRen.filters = Color.getDisabled()) : (this.iconBeatRen.source = null, this.iconRen.filters = null)
    }, t.prototype.updateLing = function (t, e) {
        this.txtLing.textFlow = HtmlUtil.parse("灵族据点: " + HtmlUtil.color(t + "/" + e, "#10a244")), 0 == t && VoMpBattle.getInst().isInBattleTime() && 1 == VoMpBattle.getInst().baoMingState ? (1 == ViewMPBattle.getType() ? this.iconBbeatLing.source = "MPBatAtlas_json.beated" : this.iconBbeatLing.source = "MPBatAtlas_json.defeat", this.iconLing.filters = Color.getDisabled()) : (this.iconBbeatLing.source = null, this.iconLing.filters = null)
    }, t.prototype.updateXian = function (t, e) {
        this.txtXian.textFlow = HtmlUtil.parse("仙族据点: " + HtmlUtil.color(t + "/" + e, "#10a244")), 0 == t && VoMpBattle.getInst().isInBattleTime() && 1 == VoMpBattle.getInst().baoMingState ? (1 == ViewMPBattle.getType() ? this.iconBbeatXian.source = "MPBatAtlas_json.beated" : this.iconBbeatXian.source = "MPBatAtlas_json.defeat", this.iconXian.filters = Color.getDisabled()) : (this.iconBbeatXian.source = null, this.iconXian.filters = null)
    }, t.prototype.updateGate = function (t, e, i) {
        this.txtGate.textFlow = HtmlUtil.parse("大门据点: " + HtmlUtil.color(t + "/" + e, "#10a244")), 0 == t && VoMpBattle.getInst().isInBattleTime() && !i && 1 == VoMpBattle.getInst().baoMingState ? (1 == ViewMPBattle.getType() ? this.iconBbeatGate.source = "MPBatAtlas_json.beated" : this.iconBbeatGate.source = "MPBatAtlas_json.defeat", this.iconGate.filters = Color.getDisabled()) : (this.iconBbeatGate.source = null, this.iconGate.filters = null)
    }, t.prototype.updateHall = function (t, e, i) {
        this.txtHall.textFlow = HtmlUtil.parse("主殿据点: " + HtmlUtil.color(t + "/" + e, "#10a244")), 0 == t && VoMpBattle.getInst().isInBattleTime() && !i && 1 == VoMpBattle.getInst().baoMingState ? (1 == ViewMPBattle.getType() ? this.iconBbeatHall.source = "MPBatAtlas_json.beated" : this.iconBbeatHall.source = "MPBatAtlas_json.defeat", this.iconHall.filters = Color.getDisabled()) : (this.iconBbeatHall.source = null, this.iconHall.filters = null)
    }, t
}();
__reflect(JuDianSource.prototype, "JuDianSource");
var ModelMPBattle = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e._mpBatCanBaoMing = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(2112, this.GC2112, this), e.regHand(2114, this.GC2114, this), e.regHand(2116, this.GC2116, this), e.regHand(2118, this.GC2118, this), e.regHand(2120, this.GC2120, this), e.regHand(2122, this.GC2122, this), e.regHand(2124, this.GC2124, this), e.regHand(2126, this.GC2126, this), e.regHand(2128, this.GC2128, this), e.regHand(2130, this.GC2130, this), e.regHand(2132, this.GC2132, this), e.regHand(2134, this.GC2134, this), e.regHand(2136, this.GC2136, this), e.regHand(2138, this.GC2138, this)
    }, e.prototype.tryToJoinMpBattle = function () {
        GameGlobal.modelMPBattle.joinMpBattle()
    }, e.prototype.joinMpBattle = function () {
        GameGlobal.layerMgr.open(UIConst.VIEWMPBATTLEPAGE, UIConst.VIEWMPBATTLE)
    }, e.prototype.battleActStart = function () {
        VHuoDongEntry.addHD(1080)
    }, e.prototype.battleActEnd = function (t) {
        GameGlobal.modelBattle.isInbattle ? GameGlobal.modelBattle.once(ModelBattle.MSG_BATTLEENDED, function () {
            GameGlobal.layerMgr.open(UIConst.MENPAIBATEND, t)
        }) : GameGlobal.layerMgr.open(UIConst.MENPAIBATEND, t), VHuoDongEntry.removeHD(1080)
    }, e.prototype.CG2111 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(2111, e)
    }, e.prototype.GC2112 = function (t, i) {
        var o = VoMpBattle.getInst(),
            n = i.readInt(),
            a = i.readInt(),
            s = i.readByte();
        o.setDefence(s, n), o.setMaxDefence(s, a), o.setTimeInfo(i.readUTF()), o.timeBaoMing = 1e3 * i.readInt(), o._timeBaoMingDt = egret.getTimer(), o.baoMingState = i.readByte(), o.renPointDefenCount = i.readByte(), o.lingPointDefenCount = i.readByte(), o.xianPointDefenCount = i.readByte(), o.gateDefenCount = i.readByte(), o.hallDefenCount = i.readShort(), o.enemyMPName = i.readUTF(), o.gateBossMaxHp = i.readLong(), o.gateBossHp = i.readLong(), o.hallBossMaxHp = i.readLong(), o.hallBossHp = i.readLong();
        var r = i.readByte();
        o.setLv(r), t.notify(e.msg_mainUIData)
    }, e.prototype.CG2113 = function () {
        this.sendSocket(2113, this.getBytes())
    }, e.prototype.GC2114 = function (t, i) {
        var o = VoMpBattle.getInst();
        o.minePaiMing = i.readShort(), o.mineJiFen = i.readShort();
        for (var n = [], a = i.readShort(), s = 0; a > s; s++) n.push([i.readShort(), i.readUTF(), i.readUTF(), i.readInt()]);
        t.notify(e.msg_personalPaiHang, n)
    }, e.prototype.CG2115 = function () {
        this.sendSocket(2115, this.getBytes())
    }, e.prototype.GC2116 = function (t, i) {
        var o = VoMpBattle.getInst();
        o.mineMenPaiPaiMing = i.readShort(), o.mineMenPaiJiFen = i.readShort();
        for (var n = i.readShort(), a = [], s = 0; n > s; s++) a.push([i.readShort(), i.readUTF(), i.readInt()]);
        var r = {
            tempArr: a,
            zhanQu: i.readShort()
        };
        t.notify(e.msg_menPaiPaiHang, r)
    }, e.prototype.CG2117 = function (t, e, i) {
        var o = this.getBytes();
        o.writeByte(t), o.writeByte(e), o.writeShort(i), this.sendSocket(2117, o)
    }, e.prototype.GC2118 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = VoJuDian.getInst();
            n.type = i.readByte(), n.isEnemy = i.readByte(), n.setDefence(i.readInt()), n.setMemberCount(i.readShort()), n.clearMembers();
            for (var a = i.readShort(), s = 0; a > s; s++) {
                var r = i.readLong(),
                    l = i.readUTF(),
                    h = i.readInt(),
                    c = i.readShort(),
                    p = i.readByte();
                n.updateMembers(r, l, h, c, p)
            }
            n.bossBlood = i.readLong(), n.bossBloodMax = i.readLong(), t.notify(e.msg_juDianDatas)
        } else ViewText.text("获取失败")
    }, e.prototype.CG2119 = function () {
        this.sendSocket(2119, this.getBytes())
    }, e.prototype.GC2120 = function (t, i) {
        var o = VoMpBattle.getInst();
        o.attactTime = i.readByte(), o.recoverTime = 1e3 * i.readInt(), o._recoverTimeDt = egret.getTimer(), o.faultRemain = 1e3 * i.readInt(), o._faultRemainDt = egret.getTimer(), o.mineJiFen = i.readInt(), o.minePaiMing = i.readShort(), t.notify(e.msg_attactInfo)
    }, e.prototype.CG2121 = function () {
        this.sendSocket(2121, this.getBytes())
    }, e.prototype.GC2122 = function (t, i) {
        var o = VoMpBattle.getInst();
        0 == n && (o.zhanBaoArr.length = 0);
        for (var n = i.readShort(), n = Math.min(4, n), a = 0; n > a; a++) {
            var s = i.readByte(),
                r = i.readByte(),
                l = i.readUTF(),
                h = i.readShort();
            o.addZhanBao(s, r, l, h)
        }
        t.notify(e.msg_battleMsg)
    }, e.prototype.CG2123 = function (t, e, i) {
        var o = this.getBytes();
        o.writeByte(t), o.writeByte(e), o.writeLong(i), this.sendSocket(2123, o)
    }, e.prototype.GC2124 = function (t, e) {
        var i = e.readByte();
        1 == i || (2 == i ? ViewText.text("活动已结束") : 4 == i || 5 == i ? ViewText.text("没匹配到对手门派") : 6 == i ? ViewText.text("没有挑战次数") : 8 == i ? ViewText.text("该玩家已阵亡,无需进攻") : 10 == i ? ViewText.text("该据点已被攻陷,无需进攻") : 11 == i || 12 == i ? ViewText.text("大门BOSS未击败") : 17 == i ? ViewText.text("战败冷却中") : 18 == i || 19 == i ? ViewText.text("该据点已被攻陷,无需进攻") : 20 == i ? ViewText.text("战斗已结束!") : ViewText.text("ERROR::GC2124返回结果: " + i))
    }, e.prototype.GC2126 = function (t, e) {
        var i = e.readByte(),
            o = e.readShort(),
            n = e.readShort(),
            a = e.readShort(),
            s = e.readShort(),
            r = e.readByte(),
            l = e.readByte(),
            h = {
                succ: i,
                personJiFen0: o,
                personJiFen: n,
                preDefence: a,
                curDefence: s,
                startHpPerc: r,
                endHpPerc: l
            };
        GameGlobal.modelBattle.once(ModelBattle.MSG_BATTLEEND, function () {
            GameGlobal.layerMgr.open(UIConst.MENPAIBATRESULT, h)
        })
    }, e.prototype.CG2127 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t);
        var o = e.length;
        i.writeShort(o);
        for (var n = 0; o > n; n++) i.writeLong(e[n]);
        this.sendSocket(2127, i)
    }, e.prototype.GC2128 = function (t, e) {
        var i = e.readByte();
        1 != i && ViewText.text([null, null, "非设置时间", "活动即将开始,已截止设置驻防", "掌门/副掌门才能设置", "未报名", "已达人数上限", "请连子服", "尚未加入门派", "服务器维护中", "保存失败,门派驻防人数必需大于10人"][i])
    }, e.prototype.CG2129 = function () {
        this.sendSocket(2129, this.getBytes())
    }, e.prototype.GC2130 = function (t, i) {
        var o = i.readByte();
        1 == o ? (VoMpBattle.getInst().baoMingState = 1, t.notify(e.msg_baomingState)) : ViewText.text([null, null, "掌门、副掌门才能报名", "非报名时间", null, null, null, "已报名", "门派等级未达3级", "门派人数未达10人"][o])
    }, e.prototype.CG2131 = function () {
        this.sendSocket(2131, this.getBytes())
    }, e.prototype.GC2132 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            for (var n = i.readShort(), a = [], s = 0; n > s; s++) {
                var r = VoJuDianMember.create();
                r.type = i.readByte(), r.id = i.readLong(), r.name = i.readUTF(), r.zhanli = i.readInt(), r.job = i.readByte(), r.level = i.readShort(), a.push(r)
            }
            t.notify(e.msg_allZhuFangMem, a)
        }
    }, e.prototype.GC2134 = function (t, e) {
        var i = e.readByte();
        1 == i && t.battleActStart()
    }, e.prototype.GC2136 = function (t, e) {
        var i = {};
        i.succ = e.readByte(), i.preMPJiFen = e.readInt(), i.menPaiJiFen = e.readInt(), i.personJiFen = e.readInt(), i.personPaiMing = e.readShort(), t.battleActEnd(i)
    }, e.prototype.GC2138 = function (t, i) {
        var o = i.readByte();
        t.mpBatCanBaoMing = o, t.notify(e.msg_baomingState)
    }, Object.defineProperty(e.prototype, "mpBatCanBaoMing", {
        get: function () {
            var t = VoMenPai.getInst().level,
                e = VoMenPai.getInst().count;
            return t >= 3 && e >= 10 ? this._mpBatCanBaoMing : 0
        },
        set: function (t) {
            this._mpBatCanBaoMing = t
        },
        enumerable: !0,
        configurable: !0
    }), e.msg_mainUIData = "msg_mainUIData", e.msg_personalPaiHang = "msg_personalPaiHang", e.msg_menPaiPaiHang = "msg_menPaiPaiHang", e.msg_juDianDatas = "msg_juDianDatas", e.msg_attactInfo = "msg_attactInfo", e.msg_battleMsg = "msg_battleMsg", e.msg_baomingState = "msg_baomingState", e.msg_allZhuFangMem = "msg_allZhuFangMem", e
}(BaseModel);
__reflect(ModelMPBattle.prototype, "ModelMPBattle");
var ViewMPBattle = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.BARWIDTH = 400, e.view_type = new MPBattle_Type, e.buffSource = new BuffSource, e.skinName = "ViewMPBattleSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnShuoMing), DisplayUtil.popBtnStyle(this.btnPersonPaiHang), DisplayUtil.popBtnStyle(this.btnMPPaiHang), DisplayUtil.popBtnStyle(this.btnBaoMing), this.btnShuoMing.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnPersonPaiHang.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnMPPaiHang.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnBaoMing.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.buffSource.setRenderer(ItemMPBatBuff), this.buffSource.setContainer(this.buffContainer), this.judianSource = new JuDianSource(this)
    }, e.getType = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.VIEWMPBATTLE);
        return t ? t.view_type.getType() : 1
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget,
            i = VoMpBattle.getInst();
        switch (e) {
            case this.btnShuoMing:
                VMPBattlePage.showIntroduce();
                break;
            case this.btnPersonPaiHang:
                GameGlobal.layerMgr.open(UIConst.VMPBATTLEPAIHANG, 0);
                break;
            case this.btnMPPaiHang:
                GameGlobal.layerMgr.open(UIConst.VMPBATTLEPAIHANG, 1);
                break;
            case this.btnBaoMing:
                if (this.view_type.isSelfView())
                    if (VoMpBattle.getInst().isInBattleTime()) {
                        if (!i.baoMingState) return void ViewText.text("门派未参战,不能进攻!");
                        this.goToEnemyMenPai()
                    } else {
                        var o = VoMpBattle.getInst().getActSt();
                        0 == o ? ViewText.text("非活动时间!") : 2 == o ? ViewText.text("报名已截止!") : GameGlobal.layerMgr.open(UIConst.VMPBATTLEBAOMING)
                    }
                else this.backToSelfMenPai()
        }
    }, e.prototype.backToSelfMenPai = function () {
        this.changeType(Enum_MPBattleType.SELF)
    }, e.prototype.goToEnemyMenPai = function () {
        this.changeType(Enum_MPBattleType.ENEMY)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelMPBattle.on(ModelMPBattle.msg_mainUIData, this.onUpdate, this), GameGlobal.modelMPBattle.on(ModelMPBattle.msg_baomingState, this.updateBaoMingBtnSt, this), GameGlobal.modelMPBattle.on(ModelMPBattle.msg_attactInfo, this.onUpdate, this), GameGlobal.modelMPBattle.on(ModelMPBattle.msg_battleMsg, this.updateZhanBao, this), GameGlobal.modelMPBattle.on(ModelMPBattle.msg_baomingState, this.updateBaoMingNot, this), this.askServ()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelMPBattle.off(ModelMPBattle.msg_mainUIData, this.onUpdate), GameGlobal.modelMPBattle.off(ModelMPBattle.msg_baomingState, this.updateBaoMingBtnSt), GameGlobal.modelMPBattle.off(ModelMPBattle.msg_attactInfo, this.onUpdate), GameGlobal.modelMPBattle.off(ModelMPBattle.msg_battleMsg, this.updateZhanBao), GameGlobal.modelMPBattle.off(ModelMPBattle.msg_baomingState, this.updateBaoMingNot, this)
    }, e.prototype.askServ = function () {
        GameGlobal.modelMPBattle.CG2111(this.view_type.getType()), 2 == e.getType() && GameGlobal.modelMPBattle.CG2119()
    }, e.prototype.addTick = function () {
        GameGlobal.tick.addInterv(this.onTick1000, 1e3, this), GameGlobal.tick.addInterv(this.onTick10000, 1e4, this)
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick1000), GameGlobal.tick.removeInterv(this.onTick10000)
    }, e.prototype.onTick1000 = function (t) {
        try {
            t.itemTMInfo.runTime()
        } catch (e) {
            console.log("mpBattleError")
        }
    }, e.prototype.onTick10000 = function (t) {
        t.askServ()
    }, e.prototype.onUpdate = function () {
        GameGlobal.tick.addInterv(this._onUpdate, 1, this, !0)
    }, e.prototype._onUpdate = function (t) {
        var e = VoMpBattle.getInst(),
            i = e.getDefence(t.view_type.getType()),
            o = e.getMaxDefence(t.view_type.getType());
        0 == i && 0 == o ? t.progressBar.width = t.BARWIDTH : t.progressBar.width = t.BARWIDTH * i / o, t.progressTxt.text = i + "/" + o, t.buffSource.source = e.getBuffs(t.view_type.getType());
        var n = e.getActSt();
        3 == n ? t.itemTMInfo.setState("st2") : t.itemTMInfo.setState("st1"), t.updateBaoMingBtnSt(), t.updateRenJuDian(), t.updateLingJuDian(), t.updateXianJuDian(), t.updateGateJuDian(), t.updateHallJuDian(), t.updateZhanBao(), t.view_type.isSelfView() ? t.lbMPName.text = "我的领地" : t.lbMPName.text = e.enemyMPName + "的领地"
    }, e.prototype.updateRenJuDian = function () {
        var t = VoMpBattle.getInst();
        this.judianSource.updateRen(t.renPointDefenCount, t.getMaxDefendRoleNum(1))
    }, e.prototype.updateLingJuDian = function () {
        var t = VoMpBattle.getInst();
        this.judianSource.updateLing(t.lingPointDefenCount, t.getMaxDefendRoleNum(2))
    }, e.prototype.updateXianJuDian = function () {
        var t = VoMpBattle.getInst();
        this.judianSource.updateXian(t.xianPointDefenCount, t.getMaxDefendRoleNum(3))
    }, e.prototype.updateGateJuDian = function () {
        var t = VoMpBattle.getInst();
        this.judianSource.updateGate(t.gateDefenCount, t.getMaxDefendRoleNum(4), t.gateBossHp)
    }, e.prototype.updateHallJuDian = function () {
        var t = VoMpBattle.getInst();
        this.judianSource.updateHall(t.hallDefenCount, t.getMaxDefendRoleNum(5), t.hallBossHp)
    }, e.prototype.updateZhanBao = function () {
        this.child_ZhanBao.visible = !0, this.child_ZhanBao.source = VoMpBattle.getInst().zhanBaoArr
    }, e.prototype.updateBaoMingBtnSt = function () {
        var t = this.view_type.isSelfView();
        t ? VoMpBattle.getInst().isInBattleTime() ? this.btnBaoMing.source = "MPBatAtlas_json.iconAtt" : this.btnBaoMing.source = "MPBatAtlas_json.iconBaoMing" : this.btnBaoMing.source = "MPBatAtlas_json.backMP"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.layerMgr.close(UIConst.MAINTOWN), VoMpBattle.getInst().zhanBaoArr.length = 0, this.changeType(e), this.updateBaoMingNot(), GameGlobal.layerMgr.close(UIConst.MENPAI), GameGlobal.modelMPBattle.CG2121(), this.addMsg(), this.addTick()
    }, e.prototype.updateBaoMingNot = function () {
        this.view_type.isSelfView() ? this.imgNotice.visible = 1 == GameGlobal.modelMPBattle.mpBatCanBaoMing : this.imgNotice.visible = !1
    }, e.prototype.changeType = function (t) {
        this.view_type.setType(t || Enum_MPBattleType.SELF), this.askServ()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), this.removeTick()
    }, e
}(BaseEUIView);
__reflect(ViewMPBattle.prototype, "ViewMPBattle");
var MPBattle_Type = function () {
    function t() {}
    return t.prototype.setType = function (t) {
        this._type = t
    }, t.prototype.getType = function () {
        return this._type
    }, t.prototype.isSelfView = function () {
        return this._type == Enum_MPBattleType.SELF
    }, t
}();
__reflect(MPBattle_Type.prototype, "MPBattle_Type");
var Enum_MPBattleType;
! function (t) {
    t[t.SELF = 1] = "SELF", t[t.ENEMY = 2] = "ENEMY"
}(Enum_MPBattleType || (Enum_MPBattleType = {}));
var VMPBatJieSuanAd = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "VMPBatJieSuanAdSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.list.itemRenderer = ItemJieSuanAward, this.list.dataProvider = this.sourceData
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.sourceData.source = VoMpBattle.getJieSuanAwards()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e
}(BaseEUIView);
__reflect(VMPBatJieSuanAd.prototype, "VMPBatJieSuanAd");
var VMPBatPersonalAd = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "VMPBatPersonalAdSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.list.itemRenderer = ItemPersonAward, this.list.dataProvider = this.sourceData
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e = e || 0, 0 == e ? (this.sourceData.source = VoMpBattle.getPersonAwards(), this.txtDes1.text = "1.个人奖励根据活动时个人排行进行发放", this.txtDes2.text = "2.个人排行奖励在每周二、四、六活动结束后通过邮件发送") : (this.sourceData.source = VoMpBattle.getMenPaiAwards(), this.txtDes1.text = "1.门派奖励根据本周门派排行进行发放", this.txtDes2.text = "2.门派排行奖励在每周六21:30后通过邮件发送")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e
}(BaseEUIView);
__reflect(VMPBatPersonalAd.prototype, "VMPBatPersonalAd");
var VMPBattlePage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VMPBattlePageSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this.basePanel;
        this.addCloseListen(e.btnReturn).addCloseListen(e.btnClose), e.createTabGroup().listenTabClick(this.onSel, this), e.addTab("门派战", 0, UIConst.VIEWMPBATTLE), e.addTab("个人奖励", 1, UIConst.VMPBATPERSONALAWARD), e.addTab("结算奖励", 2, UIConst.VMPBATJIESUANAWARD), e.addTab("门派奖励", 3, UIConst.VMPBATTLEAWARD), GameGlobal.layerMgr.reg(UIConst.VIEWMPBATTLE, ViewMPBattle, this), GameGlobal.layerMgr.reg(UIConst.VMPBATPERSONALAWARD, VMPBatPersonalAd, this), GameGlobal.layerMgr.reg(UIConst.VMPBATJIESUANAWARD, VMPBatJieSuanAd, this), GameGlobal.layerMgr.reg(UIConst.VMPBATTLEAWARD, VMPBatPersonalAd, this), e.createQuestTxt(CFG_COMMOND.LIBWFSM[UIConst.VIEWMPBATTLEPAGE].detail)
    }, e.showIntroduce = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.VIEWMPBATTLEPAGE);
        t.basePanel.onQuestT(null)
    }, e.prototype.onSel = function (t) {
        this.setSel(t.bindSysID)
    }, e.prototype.setSel = function (t) {
        switch (this.curSysId) {
            case UIConst.VIEWMPBATTLE:
                GameGlobal.layerMgr.close(UIConst.VIEWMPBATTLE);
                break;
            case UIConst.VMPBATPERSONALAWARD:
                GameGlobal.layerMgr.close(UIConst.VMPBATPERSONALAWARD);
                break;
            case UIConst.VMPBATJIESUANAWARD:
                GameGlobal.layerMgr.close(UIConst.VMPBATJIESUANAWARD);
                break;
            case UIConst.VMPBATTLEAWARD:
                GameGlobal.layerMgr.close(UIConst.VMPBATTLEAWARD)
        }
        switch (t) {
            case UIConst.VIEWMPBATTLE:
                this.basePanel.title = "门派战", GameGlobal.layerMgr.open(UIConst.VIEWMPBATTLE);
                break;
            case UIConst.VMPBATPERSONALAWARD:
                this.basePanel.title = "个人奖励", GameGlobal.layerMgr.open(UIConst.VMPBATPERSONALAWARD, 0);
                break;
            case UIConst.VMPBATJIESUANAWARD:
                this.basePanel.title = "结算奖励", GameGlobal.layerMgr.open(UIConst.VMPBATJIESUANAWARD);
                break;
            case UIConst.VMPBATTLEAWARD:
                this.basePanel.title = "门派奖励", GameGlobal.layerMgr.open(UIConst.VMPBATTLEAWARD, 1)
        }
        this.curSysId = t, this.basePanel.setTabSelSys(t)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setSel(e || UIConst.VIEWMPBATTLE)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.setSel(null)
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(VMPBattlePage.prototype, "VMPBattlePage");
var Child_MPZBItem = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        var t = this.lb = new egret.TextField;
        this.addChild(t), this.lb.size = 20, this.lb.width = 246, this.lb.lineSpacing = 4
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.name,
                i = t.targetType,
                o = t.buildingType,
                n = t.defence,
                a = VoJuDian.getJuDianFrontName(o);
            1 == i ? this.lb.text = Lang.reTxt("{0}摧毁了敌方\n{1}{2}点防御", e, a, n) : this.lb.text = Lang.reTxt("{0}重伤敌方{1}BOSS", e, a, n), this.$setHeight(this.lb.textHeight), this.$setWidth(this.lb.textWidth)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(Child_MPZBItem.prototype, "Child_MPZBItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var Child_ZhanBao = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.listDataAc = new eui.ArrayCollection, e.skinName = "Child_ZhanBaoSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.list.dataProvider = this.listDataAc = new eui.ArrayCollection, this.list.itemRenderer = Child_MPZBItem
    }, Object.defineProperty(e.prototype, "source", {
        get: function () {
            return this._datas
        },
        set: function (t) {
            this._datas = t, DisplayUtil.fillDataAC(this.listDataAc, t), this.listScrol.validateNow(), DisplayUtil.toBottom(this.listScrol)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(Child_ZhanBao.prototype, "Child_ZhanBao");
var ItemJieSuanAward = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.grids1 = [], e.grids2 = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemJieSuanAwardSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.succ;
            1 == e ? (this.iconSucFail.$setY(-22), this.iconSucFail.source = "MPBatAtlas_json.shengLi") : (this.iconSucFail.$setY(0), this.iconSucFail.source = "MPBatAtlas_json.shiBai");
            var i = t.menZhuAwards,
                o = t.chengYuanAwards;
            ConfigHelp.makeStrGrids(i, this.grids1, 0, 0, this.gridContainer1, !0), ConfigHelp.makeStrGrids(o, this.grids2, 0, 0, this.gridContainer2, !0)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemJieSuanAward.prototype, "ItemJieSuanAward");
var ItemMPBatBuff = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ItemMPBatBuffSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            switch (this._data = t, t) {
                case 1:
                    this.icon.source = "MPBatAtlas_json.ren";
                    break;
                case 2:
                    this.icon.source = "MPBatAtlas_json.ling";
                    break;
                case 3:
                    this.icon.source = "MPBatAtlas_json.xian"
            }
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(ItemMPBatBuff.prototype, "ItemMPBatBuff");
var ItemMPMembers = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemMPMembersSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            t && (this._data = t, this.iconHead.source = IconUtil.getRoleHead(t.job), this.txtName.text = t.name, this.txtZhanli.textFlow = HtmlUtil.parse("战力:" + HtmlUtil.color(t.zhanli, "#684c43")), this.txtDefence.textFlow = HtmlUtil.parse("防御点:" + HtmlUtil.color(t.defence, "#684c43")), VoMpBattle.getInst().isInBattleTime() ? 1 == ViewMPBattle.getType() ? t.defence ? this.iconDefeat.source = null : this.iconDefeat.source = "MPBatAtlas_json.beated" : t.defence ? this.iconDefeat.source = null : this.iconDefeat.source = "MPBatAtlas_json.defeat" : this.iconDefeat.source = null)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemMPMembers.prototype, "ItemMPMembers");
var ItemMPZhuFang = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.isCheckUp = !1, e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemMPZhuFangSkin"
    }, e.prototype.childrenCreated = function () {
        DisplayUtil.popBtnStyle(this.checkBox)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.icoHead.source = IconUtil.getRoleHead(t.job), this.txtName.text = t.name, this.txtZhanLi.text = "战力: " + t.zhanli, this.txtLevel.text = "等级: " + t.level, t.type >= 1 && t.type <= 5 ? this.txtType.textFlow = HtmlUtil.parse("当前驻守: " + HtmlUtil.color(VoMpBattle.getInst().getNameByType(t.type), "#10a244")) : this.txtType.text = "当前驻守: " + VoMpBattle.getInst().getNameByType(t.type), this.txtCurType.text = VoMpBattle.getInst().getNameByType(VMPBatZhuFang.type)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        set: function (t) {
            this.iconGou.visible = t, this.$selected = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemMPZhuFang.prototype, "ItemMPZhuFang");
var ItemPersonalPH = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemPersonalPHSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t[0],
                i = t[1],
                o = t[2];
            if ("string" == typeof o) {
                this.txtName1.text = i, this.txtMenPai.text = o, this.txtName.text = "", n = t[3]
            } else {
                this.txtName1.text = "", this.txtMenPai.text = "", this.txtName.text = i;
                var n = o
            }
            this.txtPaiMing.text = "" + e, this.txtJiFen.text = "" + n
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemPersonalPH.prototype, "ItemPersonalPH");
var ItemPersonAward = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.grids = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemPersonAwardSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.paiming,
                i = t.awards,
                o = e.split(","),
                n = parseInt(o[0]),
                a = parseInt(o[1]);
            n == a ? this.txtPaiMing.textFlow = HtmlUtil.parse("第" + HtmlUtil.color(n, "#10a244") + "名") : this.txtPaiMing.text = n + "~" + a, ConfigHelp.makeStrGrids(i, this.grids, 0, 0, this.gridContainer, !0)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        set: function (t) {
            0 == (1 & t) ? this.iconBg.source = "CM2_json.bg1" : this.iconBg.source = "CM2_json.bg2"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemPersonAward.prototype, "ItemPersonAward");
var ItemTimeInfo = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ItemTimeInfoSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, e.prototype.setState = function (t) {
        this.currentState = t;
        var e = VoMpBattle.getInst();
        switch (t) {
            case "st1":
                0 == VoMpBattle.getInst().getActSt() ? this.txtBaoMingState.text = "未报名" : this.txtBaoMingState.text = 0 == e.baoMingState ? "未报名" : "已报名";
                break;
            case "st2":
                this.txtJiFen.text = "" + e.mineJiFen, this.txtPaiMing.text = "" + e.minePaiMing, this.txtAttactCount.text = e.attactTime + "/" + e.getMaxAttackTime()
        }
    }, e.prototype.runTime = function () {
        var t = VoMpBattle.getInst(),
            e = t.baoMingState,
            i = t.getActSt();
        switch (0 == i ? this.txtTimeRemain.text = "非活动时间" : 1 == i ? this.txtTimeRemain.text = DateUtil.getHMSBySecond2(t.getBeforeRemain()) : 2 == i ? this.txtTimeRemain.text = DateUtil.getHMSBySecond2(t.getBeforeRemain()) : 0 == e ? this.txtZDTime.text = "未参战" : this.txtZDTime.text = DateUtil.getMSBySec3(t.getEndRemain()), this.currentState) {
            case "st1":
                2 == i ? this.txtBMRemain.text = "已截止" : 0 == i ? this.txtBMRemain.text = "非活动时间" : this.txtBMRemain.text = DateUtil.getHMSBySecond2(t.getTimeBMRemain());
                break;
            case "st2":
                this.txtTimeBMAndRec.text = DateUtil.getMSBySec3(t.getRecoveRemain()), this.txtBtlFaultCD.text = DateUtil.getMSBySec3(t.getBtlFaultRemain())
        }
    }, e
}(eui.Component);
__reflect(ItemTimeInfo.prototype, "ItemTimeInfo");
var ViewMPBatEnd = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewMPBatEndSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnClose), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnHand), this.addCloseListen(this.btnClose), this.btnHand.label = "确定"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onUpdate(e)
    }, e.prototype.onUpdate = function (t) {
        var e = t.succ;
        1 == e ? (this.iconSuc.source = "MPBatAtlas_json.shengLiWord", this.iconDescription.source = "MPBatAtlas_json.succWords") : (this.iconSuc.source = "MPBatAtlas_json.shiBaiWord", this.iconDescription.source = "MPBatAtlas_json.failWords");
        var i = t.preMPJiFen,
            o = t.menPaiJiFen,
            n = t.personJiFen;
        t.personPaiMing;
        this.txtMenPaiJiFen.textFlow = HtmlUtil.parse(Lang.reTxt("门派积分: <font color='#10a244'>{0} -> {1}</font>", i, o)), this.txtPersonJiFen.textFlow = HtmlUtil.parse("个人积分: " + (n ? HtmlUtil.color(n, "#10a244") : "无"))
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(ViewMPBatEnd.prototype, "ViewMPBatEnd");
var VMPBatBaoMing = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VMPBatBaoMingSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnClose), this.addCloseListen(this.btnClose), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHand.label = "报名", this.txtDes.text = "报名时间:\n每周一、三、五早上0点到每周二、四、六20点\n开战时间:\n每周二、四、六21:05-21:25", this.txtDes2.text = "(掌门和副掌门才能报名)"
    }, e.prototype.onHand = function () {
        return 0 == this.btnHand.enabled ? void ViewText.text("已报名") : void GameGlobal.modelMPBattle.CG2129()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelMPBattle.on(ModelMPBattle.msg_baomingState, this.onUpdate, this), GameGlobal.modelMPBattle.on(ModelMPBattle.msg_baomingState, this.updateBaoMingNot, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelMPBattle.off(ModelMPBattle.msg_baomingState, this.onUpdate, this), GameGlobal.modelMPBattle.off(ModelMPBattle.msg_baomingState, this.updateBaoMingNot, this)
    }, e.prototype.onUpdate = function () {
        var t = VoMpBattle.getInst().baoMingState;
        0 == t ? (this.btnHand.label = "报名", this.btnHand.enabled = !0) : (this.btnHand.label = "已报名", this.btnHand.enabled = !1)
    }, e.prototype.updateBaoMingNot = function () {
        this.btnHand.setNoticeVis(1 == GameGlobal.modelMPBattle.mpBatCanBaoMing)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onUpdate(), this.updateBaoMingNot(), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VMPBatBaoMing.prototype, "VMPBatBaoMing");
var VMPBatJuDianDetail = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.version = 0, e.WIDTH = 400, e.sourceData = new eui.ArrayCollection, e.skinName = "VMPBatJuDianDetailSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnClose), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.btnHand.label = "", this.btnHand.va = 1, this.list.dataProvider = this.sourceData, this.list.itemRenderer = ItemMPMembers, this.scroller.scrollPolicyH = eui.ScrollPolicy.OFF, this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.clickToAttack, this), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.clickToAttack = function (t) {
        var e = t.item,
            i = ViewMPBattle.getType(),
            o = e.defence;
        2 == i && o > 0 && GameGlobal.modelMPBattle.CG2123(this.type, 1, e.id)
    }, e.prototype.onHand = function () {
        if (0 != this.btnHand.enabled) {
            var t = this.btnHand.va;
            if (0 == t) ViewText.text("当前时间不能调整");
            else if (1 == t) {
                var e = VoMember.minePos;
                if (5 > e) return void ViewText.text("只有掌门、副掌门才能调整驻防");
                GameGlobal.layerMgr.open(UIConst.TIAOZHENGZF, this.type)
            } else GameGlobal.modelMPBattle.CG2123(this.type, 0, 0)
        }
    }, e.prototype.getLifeJuDianMember = function () {
        for (var t = VoJuDian.getInst().members, e = 0, i = t.length; i > e; e++) {
            var o = t[e];
            if (o.defence) return o
        }
        return null
    }, e.prototype.addMsg = function () {
        GameGlobal.modelMPBattle.on(ModelMPBattle.msg_juDianDatas, this.onUpdate, this), this.askServ()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelMPBattle.off(ModelMPBattle.msg_juDianDatas, this.onUpdate, this)
    }, e.prototype.askServ = function () {
        GameGlobal.modelMPBattle.CG2117(this.type, ViewMPBattle.getType(), this.version++)
    }, e.prototype.addTick = function () {
        GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onTick = function (t) {
        var e = ViewMPBattle.getType();
        if (1 == e);
        else {
            var i = VoMpBattle.getInst().getActSt();
            3 == i && t.updateFaultRemain()
        }
    }, e.prototype.onUpdate = function () {
        this.updateBtnState(), this.updateBuilderInfo(), this.updateZFMembers(), this.updateDefence(), this.updateBoss();
        var t = VoJuDian.getInst().members;
        if (t && t.length) {
            var e = VoJuDian.getInst().members;
            VoJuDianMember.onSort(e), DisplayUtil.fillDataAC(this.sourceData, e)
        } else this.sourceData.source = null;
        this.scroller.viewport.scrollV = 0
    }, e.prototype.updateBtnState = function () {
        var t = ViewMPBattle.getType(),
            e = VoMpBattle.getInst(),
            i = e.getActSt();
        if (1 == t) {
            var o = e.baoMingState,
                n = VoMember.minePos;
            5 > n ? this.btnHand.enabled = !1 : 1 != o || 1 != i && 2 != i ? (this.btnHand.enabled = !1, this.btnHand.va = 0) : (this.btnHand.enabled = !0, this.btnHand.va = 1), this.btnHand.label = this.lbTitle.text = "调整驻防", this.txtDesLabel.text = "开战前5分钟停止调整驻防"
        } else this.btnHand.enabled = !0, this.btnHand.label = this.lbTitle.text = "进攻", this.btnHand.va = 2, 3 == i ? this.updateFaultRemain() : this.txtDesLabel.text = ""
    }, e.prototype.updateFaultRemain = function () {
        var t = VoMpBattle.getInst(),
            e = t.getBtlFaultRemain();
        if (e) this.txtDesLabel.text = "战败冷却中,需要" + e + "秒后才能进攻";
        else {
            var i = VoMpBattle.getInst(),
                o = i.getRecoveRemain();
            o > 0 && i.attactTime <= 0 ? this.txtDesLabel.text = "距离下次挑战" + DateUtil.getMSBySec3(o) : this.txtDesLabel.text = ""
        }
    }, e.prototype.updateDefence = function () {
        var t = VoJuDian.getInst().getMaxDefence(),
            e = VoJuDian.getInst().getDefence();
        this.txtProgressFY.text = e + "/" + t, t ? this.progressFY.width = this.WIDTH * e / t : this.progressFY.width = 0
    }, e.prototype.updateBoss = function () {
        if (this.type < 3) this.txtProgressBoss.text = "无", this.progressBoss.width = 0;
        else {
            var t = VoJuDian.getInst();
            this.txtProgressBoss.text = t.bossBlood + "/" + t.bossBloodMax, this.progressBoss.width = t.bossBlood / t.bossBloodMax * this.WIDTH
        }
    }, e.prototype.updateZFMembers = function () {
        var t = VoMpBattle.getInst().getMaxDefendRoleNum(this.type);
        this.txtZFCount.textFlow = HtmlUtil.parse("驻防人数: " + HtmlUtil.color(VoJuDian.getInst().getMemeberCount() + "/" + t, "#10a244"))
    }, e.prototype.updateBuilderInfo = function () {
        var t;
        switch (this.type) {
            case 1:
                t = "建筑信息: " + HtmlUtil.color("对驻防的所有人物角色提供20%的伤害加成和伤害减免", "#684c43"), DisplayUtil.remove(this.bossHpGrp);
                break;
            case 2:
                t = "建筑信息: " + HtmlUtil.color("对驻防的所有出战灵兽提供20%的伤害加成和伤害减免", "#684c43"), DisplayUtil.remove(this.bossHpGrp);
                break;
            case 3:
                t = "建筑信息: " + HtmlUtil.color("对驻防的所有出战仙神提供20%的伤害加成和伤害减免", "#684c43"), DisplayUtil.remove(this.bossHpGrp);
                break;
            case 4:
                t = "建筑信息: " + HtmlUtil.color("门派第一道防线，未被攻陷时不能攻打主殿", "#684c43"), DisplayUtil.addBy(this.bossHpGrp, this.infoGrp, 0);
                break;
            case 5:
                t = "建筑信息: " + HtmlUtil.color("门派最重要的建筑，被成功攻陷则失败", "#684c43"), DisplayUtil.addBy(this.bossHpGrp, this.infoGrp, 0)
        }
        ViewMPBattle.getType() == Enum_MPBattleType.ENEMY && (t = "攻陷条件: " + HtmlUtil.color("所有驻守成员防御点为0，驻守boss气血为0", "#684c43")), this.txtBuilding.textFlow = HtmlUtil.parse(t ? t : "")
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.type = e || 0, this.onUpdate(), this.addMsg(), this.addTick()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeTick(), this.removeMsg(), this.sourceData.removeAll()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(VMPBatJuDianDetail.prototype, "VMPBatJuDianDetail");
var VMPBattlePaiHang = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.type = 0, e.skinName = "VMPBattlePaiHangSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.container.itemRenderer = ItemPersonalPH, this.container.dataProvider = this.sourceData
    }, e.prototype.addMsg = function () {
        0 == this.type ? (GameGlobal.modelMPBattle.on(ModelMPBattle.msg_personalPaiHang, this.onUpdate, this), GameGlobal.modelMPBattle.CG2113()) : (GameGlobal.modelMPBattle.on(ModelMPBattle.msg_menPaiPaiHang, this.onUpdate, this), GameGlobal.modelMPBattle.CG2115())
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelMPBattle.off(ModelMPBattle.msg_personalPaiHang, this.onUpdate, this), GameGlobal.modelMPBattle.off(ModelMPBattle.msg_menPaiPaiHang, this.onUpdate, this)
    }, e.prototype.getZhanQuName = function (t) {
        switch (t) {
            case 1:
                return "新秀战区";
            case 2:
                return "群雄战区";
            case 3:
                return "巅峰战区"
        }
    }, e.prototype.onUpdate = function (t) {
        if (Array.isArray(t) || null == t) var e = t;
        else {
            e = t.tempArr;
            var i = t.zhanQu;
            this.txtZhanQu.text = "本周所在战区：" + this.getZhanQuName(i)
        }
        var o = VoMpBattle.getInst();
        DisplayUtil.fillDataAC(this.sourceData, e), 0 == this.type ? (this.txtPaiMing.text = "我的排名: " + o.minePaiMing, this.txtJiFen.text = "我的积分: " + o.mineJiFen) : (this.txtPaiMing.text = "所在门派排名: " + o.mineMenPaiPaiMing, this.txtJiFen.text = "门派积分: " + o.mineMenPaiJiFen), 0 == this.getTypeByTime() ? this.iconType.source = "MPBatAtlas_json.shangLunZB" : this.iconType.source = "MPBatAtlas_json.benLunBat"
    }, e.prototype.getTypeByTime = function () {
        var t = VoMpBattle.getInst().getActSt(),
            e = 0;
        return 3 == t && (e = 1), e
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.type = e, this.addMsg(), GameGlobal.layerMgr.addUIHideF(UIConst.MENPAI, "ui" + this._uitype_), this.onUpdate(null), 0 == e ? this.currentState = "st1" : this.currentState = "st2"
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), GameGlobal.layerMgr.delUIHideF(UIConst.MENPAI, "ui" + this._uitype_)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VMPBattlePaiHang.prototype, "VMPBattlePaiHang");
var VMPBatZhuFang = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e._change = !1, e.maxMember = 0, e.skinName = "VMPBatZhuFangSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnClose), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.addCloseListen(this.btnCancel), this.btnSave.label = "保存", this.btnCancel.label = "取消", this.btnOneKey.label = "一键驻防", this.btnSave.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnOneKey.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOneKey, this), this.list.dataProvider = this.sourceData, this.list.itemRenderer = ItemMPZhuFang, this.list.allowMultipleSelection = !0, this.list.addEventListener(egret.Event.CHANGING, this.onListChange, this)
    }, e.prototype.onListChange = function (t) {
        this.list.selectedItems.length > this.maxMember ? (t.preventDefault(), ViewText.text("已达人数上限")) : this._change = !0
    }, e.prototype.onHand = function () {
        var t = this.list.selectedItems;
        if (this._change) {
            for (var i = Util.getTempArr(), o = 0, n = t.length; n > o; o++) i[o] = t[o].id;
            GameGlobal.modelMPBattle.CG2127(e.type, i), this.closeHandler()
        } else ViewText.text("你还没选择调整!")
    }, e.prototype.onOneKey = function () {
        this._change = !0;
        var t = this.list.selectedItems.length;
        if (t < this.maxMember) {
            for (var e = 0, i = this.maxMember - t, o = this.list.selectedItems, n = 0; n < this.sourceData.length; n++) {
                var a = this.sourceData.getItemAt(n);
                if (0 == a.type && (o.push(a), e++, e >= i)) break
            }
            this.list.selectedItems = o
        }
    }, e.prototype.addMsg = function () {
        GameGlobal.modelMPBattle.on(ModelMPBattle.msg_allZhuFangMem, this.onUpdate, this), GameGlobal.modelMPBattle.CG2131()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelMPBattle.off(ModelMPBattle.msg_allZhuFangMem, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        VoJuDianMember.sortOnLevel(t), DisplayUtil.fillDataAC(this.sourceData, t);
        for (var i = [], o = 0, n = t.length; n > o; o++) {
            var a = t[o];
            a.type == e.type && i.push(a)
        }
        this.list.selectedItems = i
    }, e.prototype.showZhuFangCount = function (t) {
        e.type = t || 1;
        var i = VoJuDian.getInst();
        this.maxMember = VoMpBattle.getInst().getMaxDefendRoleNum(i.type), this.txtZhuFang.text = "驻防人数: " + i.getMemeberCount() + "/" + this.maxMember
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.showZhuFangCount(e), this.addMsg(), this._change = !1
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.list.selectedIndices = null, this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.type = 1, e
}(PopUpUI);
__reflect(VMPBatZhuFang.prototype, "VMPBatZhuFang");
var VSingleBatRetult = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VSingleBatRetultSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnClose), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnHand), this.btnHand.label = "确定"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onUpdate(e)
    }, e.prototype.onUpdate = function (t) {
        var e = t.personJiFen0,
            i = t.personJiFen,
            o = t.preDefence,
            n = t.curDefence,
            a = t.startHpPerc,
            s = t.endHpPerc;
        this.txtPersonJiFen.textFlow = HtmlUtil.parse(Lang.reTxt("个人积分: <font color='#10a244'>{0} -> {1}</font>", e, i)), this.txtDefPoint.textFlow = HtmlUtil.parse(Lang.reTxt("敌方防御点: <font color='#10a244'>{0} -> {1}</font>", o, n)), 0 == a && 0 == s ? this.txtBossHp.text = "" : this.txtBossHp.textFlow = HtmlUtil.parse(Lang.reTxt("BOSS剩余气血: <font color='#10a244'>{0}% -> {1}%</font>", a, s));
        var r = t.succ;
        1 == r ? this.iconSuc.source = "MPBatAtlas_json.iconSucc" : this.iconSuc.source = "MPBatAtlas_json.iconFail"
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e
}(BaseEUIView);
__reflect(VSingleBatRetult.prototype, "VSingleBatRetult");
var VoJuDian = function () {
    function t() {
        this.type = 1, this.isEnemy = 1, this.mineDefence = 0, this.enemyDefence = 0, this.mineMemberCount = 0, this.enemyMemberCount = 0, this.bossBlood = 0, this.bossBloodMax = 1, this.members = []
    }
    return t.getInst = function () {
        return this._inst || (this._inst = new t)
    }, t.prototype.setDefence = function (t) {
        1 == this.type ? this.mineDefence = t : this.enemyDefence = t
    }, t.prototype.getDefence = function () {
        return 1 == this.type ? this.mineDefence : this.enemyDefence
    }, t.prototype.setMemberCount = function (t) {
        1 == this.type ? this.mineMemberCount = t : this.enemyMemberCount = t
    }, t.prototype.getMemeberCount = function () {
        return 1 == this.type ? this.mineMemberCount : this.enemyMemberCount
    }, t.prototype.getMaxDefence = function () {
        var t = 0;
        return this.members && (t = 200 * this.members.length), t
    }, t.prototype.updateMembers = function (t, e, i, o, n) {
        var a = ArrayUtil.getItem(this.members, "id", t);
        a || (a = VoJuDianMember.create(), this.members.push(a)), a.id = t, a.name = e, a.zhanli = i, a.defence = o, a.job = n
    }, t.prototype.clearMembers = function () {
        this.members.length = 0
    }, t.getJuDianFrontName = function (t) {
        switch (t) {
            case 1:
                return "人族据点";
            case 2:
                return "灵族据点";
            case 3:
                return "仙族据点";
            case 4:
                return "大门据点";
            case 5:
                return "大殿据点"
        }
        return "building:" + t
    }, t
}();
__reflect(VoJuDian.prototype, "VoJuDian");
var VoJuDianMember = function () {
    function t() {
        this.type = 0, this.zhanli = 0, this.defence = 0, this.job = 1, this.level = 0
    }
    return t.create = function () {
        return new t
    }, t.onSort = function (t) {
        VoMpBattle.getInst().isInBattleTime() && t.sort(this.sortByDefeat)
    }, t.sortByDefeat = function (t, e) {
        var i = 0 == t.defence ? 0 : 1,
            o = 0 == e.defence ? 0 : 1;
        return o - i
    }, t.sortOnLevel = function (t) {
        t.sort(this.sortByLevel)
    }, t.sortByLevel = function (t, e) {
        return t.level - e.level
    }, t
}();
__reflect(VoJuDianMember.prototype, "VoJuDianMember");
var VoMpBattle = function () {
    function t() {
        this.selfDefence = 0, this.enemyDefence = 0, this.selfMaxDefence = 0, this.enemyMaxDefence = 0, this._timeBeforeBtl = 0, this.timeBeforeBtl = 0, this._timeActEndR_ = 0, this.timeActEndRemain = 0, this._timeBaoMingDt = 0, this.timeBaoMing = 0, this.baoMingState = 0, this.renPointDefenCount = 0, this.lingPointDefenCount = 0, this.xianPointDefenCount = 0, this.gateDefenCount = 0, this.hallDefenCount = 0, this.minePaiMing = 0, this.mineJiFen = 0, this.mineMenPaiPaiMing = 0, this.mineMenPaiJiFen = 0, this.attactTime = 0, this.gateBossHp = 0, this.gateBossMaxHp = 0, this.hallBossHp = 0, this.hallBossMaxHp = 0, this._recoverTimeDt = 0, this.recoverTime = 0, this._faultRemainDt = 0, this.faultRemain = 0, this.zhanBaoArr = [], this.mplv = 1, this.maxRenJuDian = 5, this.maxLingJuDian = 5, this.maxXianJuDian = 5, this.maxGateJuDian = 20, this.maxHallJuDian = 30
    }
    return t.getInst = function () {
        return this._inst || (this._inst = new t)
    }, t.prototype.setLv = function (t) {
        var e = CFG_MENPAI.LIB_MPZJIANZU[t];
        e && (this.maxRenJuDian = e.rjd, this.maxLingJuDian = e.ljd, this.maxXianJuDian = e.xjd, this.maxGateJuDian = e.mpjl, this.maxHallJuDian = e.zd)
    }, t.prototype.getActSt = function () {
        var t = 0;
        return this.getTimeBMRemain() > 0 ? 1 : this.getBeforeRemain() > 0 ? 2 : this.getEndRemain() > 0 ? 3 : t
    }, t.prototype.getBeforeRemain = function () {
        var t = egret.getTimer(),
            e = (this.timeBeforeBtl - (t - this._timeBeforeBtl)) / 1e3 >> 0;
        return 0 > e && (e = 0), e
    }, t.prototype.getEndRemain = function () {
        var t = egret.getTimer(),
            e = (this.timeActEndRemain - (t - this._timeActEndR_)) / 1e3 >> 0;
        return 0 > e && (e = 0), e
    }, t.prototype.getTimeBMRemain = function () {
        var t = egret.getTimer(),
            e = (this.timeBaoMing - (t - this._timeBaoMingDt)) / 1e3 >> 0;
        return 0 > e && (e = 0), e
    }, t.prototype.getRecoveRemain = function () {
        var t = egret.getTimer(),
            e = (this.recoverTime - (t - this._recoverTimeDt)) / 1e3 >> 0;
        return 0 > e && (e = 0), e
    }, t.prototype.getBtlFaultRemain = function () {
        var t = egret.getTimer(),
            e = (this.faultRemain - (t - this._faultRemainDt)) / 1e3 >> 0;
        return 0 > e && (e = 0), e
    }, t.prototype.setDefence = function (t, e) {
        1 == t ? this.selfDefence = e : this.enemyDefence = e
    }, t.prototype.getDefence = function (t) {
        return 1 == t ? this.selfDefence : this.enemyDefence
    }, t.prototype.setMaxDefence = function (t, e) {
        1 == t ? this.selfMaxDefence = e : this.enemyMaxDefence = e
    }, t.prototype.getMaxDefence = function (t) {
        return 1 == t ? this.selfMaxDefence : this.enemyMaxDefence
    }, t.prototype.getMaxDefendRoleNum = function (t) {
        var e = 5;
        return 1 == t ? e = this.maxRenJuDian : 2 == t ? e = this.maxLingJuDian : 3 == t ? e = this.maxXianJuDian : 4 == t ? e = this.maxGateJuDian : 5 == t && (e = this.maxHallJuDian), e
    }, t.prototype.getBuffs = function (t) {
        if (1 == t) {
            if (this.renPointDefenCount > 0 || this.lingPointDefenCount > 0 || this.xianPointDefenCount > 0) {
                var e = [];
                return this.renPointDefenCount > 0 && e.push(1), this.lingPointDefenCount > 0 && e.push(2), this.xianPointDefenCount > 0 && e.push(3), e
            }
            return null
        }
        return null
    }, t.prototype.setTimeInfo = function (t) {
        for (var e = Util.strToIntArr(t), i = 0, o = e.length; o > i; i++) {
            var n = e[i][0],
                a = e[i][1];
            1 == n ? (this.timeBeforeBtl = 1e3 * a, this._timeBeforeBtl = egret.getTimer()) : 2 == n && (this.timeActEndRemain = 1e3 * a, this._timeActEndR_ = egret.getTimer())
        }
    }, t.prototype.addZhanBao = function (t, e, i, o) {
        var n = this.zhanBaoArr.length;
        if (n > 4) var a = this.zhanBaoArr.shift();
        else a = {};
        a.name = i, a.targetType = t, a.buildingType = e, a.defence = o, this.zhanBaoArr.push(a)
    }, t.prototype.getMaxAttackTime = function () {
        return 3
    }, t.prototype.getNameByType = function (t) {
        switch (t) {
            case 1:
                return "人据点";
            case 2:
                return "灵据点";
            case 3:
                return "仙据点";
            case 4:
                return "门派大门";
            case 5:
                return "门派主殿"
        }
        return "未上阵"
    }, t.getPersonAwards = function () {
        if (!this.personAwards) {
            this.personAwards = [];
            var t = CFG_MENPAI.LIB_PERSONMENPAI;
            for (var e in t) {
                var i = t[e],
                    o = {};
                o.paiming = i.pm, o.awards = i.grjl, this.personAwards.push(o)
            }
        }
        return this.personAwards
    }, t.getJieSuanAwards = function () {
        if (!this.jieSuanAwards) {
            this.jieSuanAwards = [];
            var t = CFG_MENPAI.LIB_JIESUAN,
                e = t[1],
                i = {};
            i.succ = 1, i.menZhuAwards = e.mzwin, i.chengYuanAwards = e.cywin, this.jieSuanAwards.push(i), i = {}, i.succ = 0, i.menZhuAwards = e.mzfail, i.chengYuanAwards = e.cyfail, this.jieSuanAwards.push(i)
        }
        return this.jieSuanAwards
    }, t.getMenPaiAwards = function () {
        if (!this.menpaiAwards) {
            this.menpaiAwards = [];
            var t = CFG_MENPAI.LIB_PERSONMENPAI;
            for (var e in t) {
                var i = t[e],
                    o = {};
                o.paiming = i.pm, o.awards = i.mpjl, this.menpaiAwards.push(o)
            }
        }
        return this.menpaiAwards
    }, t.prototype.isInBattleTime = function () {
        return this.getBeforeRemain() <= 0 && this.getEndRemain() > 0
    }, t
}();
__reflect(VoMpBattle.prototype, "VoMpBattle");
var VMemMgr = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/menpai/VMemMgrSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.addCloseListen(e.btnClose), e.addCloseListen(e.btnReturn), e.btnZM.label = "任命掌门", e.btnFuZM.label = "任命副掌门", e.btnZL.label = "任命长老", e.btnHF.label = "任命护法", e.btnMem.label = "任命成员", e.btnKickOut.label = "逐出门派", e.btnZM.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), e.btnFuZM.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), e.btnZL.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), e.btnHF.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), e.btnMem.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), e.btnKickOut.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), DisplayUtil.popBtnStyle(e.btnClose), DisplayUtil.popBtnStyle(e.btnReturn), DisplayUtil.popBtnStyle(e.btnZM), DisplayUtil.popBtnStyle(e.btnFuZM), DisplayUtil.popBtnStyle(e.btnZL), DisplayUtil.popBtnStyle(e.btnHF), DisplayUtil.popBtnStyle(e.btnMem), DisplayUtil.popBtnStyle(e.btnKickOut)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget,
            i = this;
        switch (e) {
            case this.btnZM:
                ViewAlert.show("是否任命" + this.data.name + "为掌门?", function () {
                    GameGlobal.modelmenpai.CG833(1, i.data.id)
                });
                break;
            case this.btnFuZM:
                ViewAlert.show("是否任命" + this.data.name + "为副掌门?", function () {
                    GameGlobal.modelmenpai.CG833(2, i.data.id)
                });
                break;
            case this.btnZL:
                ViewAlert.show("是否任命" + this.data.name + "为长老?", function () {
                    GameGlobal.modelmenpai.CG833(3, i.data.id)
                });
                break;
            case this.btnHF:
                ViewAlert.show("是否任命" + this.data.name + "为护法?", function () {
                    GameGlobal.modelmenpai.CG833(4, i.data.id)
                });
                break;
            case this.btnMem:
                ViewAlert.show("是否任命" + this.data.name + "为成员?", function () {
                    GameGlobal.modelmenpai.CG833(5, i.data.id)
                });
                break;
            case this.btnKickOut:
                ViewAlert.show("是否将" + this.data.name + "逐出门派?", function () {
                    GameGlobal.modelmenpai.CG833(6, i.data.id)
                })
        }
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), void 0 != e) {
            var i = this;
            i.data = e, i.txtName.text = e.name, i.txtZhanli.text = "战力: " + e.zhanli, i.txtGongxian.text = "门派贡献: " + VoMember.mineGX;
            var o = IconUtil.getRoleHead(e.job);
            this.playerIcon.source = o
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VMemMgr.prototype, "VMemMgr");
var VMPCreate = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.datas = [{
            mpLv: 1,
            vipLv: 0,
            mpMaxMem: 30,
            costYB: 0
        }, {
            mpLv: 2,
            vipLv: 4,
            mpMaxMem: 35,
            costYB: 500
        }], e.list = [], e.skinName = "resource/eui_skins/game/menpai/VMPCreateSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        for (var e = this.datas.length, i = 0; e > i; i++) {
            var o = this.datas[i],
                n = new ItemMPCreate;
            this.container.addChild(n), n.data = o, n.childIdex = i, n.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSel, this), this.list.push(n)
        }
        this.btnCreate.label = "创建门派", DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnCreate), this.addCloseListen(this.btnClose), this.btnCreate.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCreate, this)
    }, e.prototype.onCreate = function () {
        var t = this.inputTxt.text;
        if (!t) return void ViewText.text("请输入门派名称");
        var e = this.curIndex,
            i = this.datas[e],
            o = GameGlobal.modelRole.voMine.yuanbao;
        return i > o ? void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, 33) : void GameGlobal.modelmenpai.CG821(this.curIndex + 1, t)
    }, e.prototype.onSel = function (t) {
        var e = t.currentTarget.childIdex;
        this.setSel(e)
    }, e.prototype.setSel = function (t) {
        switch (this.curIndex) {
            case 0:
                this.list[this.curIndex].selected = !1;
                break;
            case 1:
                this.list[this.curIndex].selected = !1
        }
        switch (t) {
            case 0:
                this.list[t].selected = !0;
                break;
            case 1:
                this.list[t].selected = !0
        }
        this.curIndex = t
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setSel(0)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.setSel(-1)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VMPCreate.prototype, "VMPCreate");
var VMPHuoYueYL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "resource/eui_skins/game/menpai/VMPHuoYueYLSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemHuoYueYL, this.initSource()
    }, e.prototype.initSource = function () {
        var t = CFG_MENPAI.LIB7,
            e = [];
        for (var i in t) {
            var o = t[i];
            e.push(o)
        }
        this.sourceData.source = e
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e)
    }, e.prototype.update = function (t) {
        for (var e = this.sourceData.length, i = 0; e > i; i++) {
            var o = this.sourceData.getItemAt(i);
            if (parseInt(o.level) == t) {
                this.sourceData.itemUpdated(o);
                break
            }
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e
}(BaseEUIView);
__reflect(VMPHuoYueYL.prototype, "VMPHuoYueYL");
var VMPJianShe = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.ids = [], e.skinName = "resource/eui_skins/game/menpai/VMPJianSheSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), DisplayUtil.popBtnStyle(this.txtUnLine), this.txtUnLine.textFlow = HtmlUtil.underLine("门派副本"), this.txtUnLine.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLink, this);
        for (var e = 1034; 1043 >= e; e++) this.ids.push(e);
        this.container.itemRenderer = ItemMPJianShe, this.container.dataProvider = this.sourceData
    }, e.prototype.onLink = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.MENPAI);
        t && (t.setSel(2), this.closeHandler())
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onUpdate, this), this.onUpdate()
    }, e.prototype.onUpdate = function () {
        for (var t = [], e = 0; e < this.ids.length; e++) {
            var i = this.ids[e],
                o = GameGlobal.modelBag.getItemCount(i);
            if (o > 0)
                for (var n = 0; o > n; n++) {
                    var a = new VoItem;
                    a.init(i), a.count = 1, t.push(a)
                }
        }
        this.sourceData.source = t
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onUpdate, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VMPJianShe.prototype, "VMPJianShe");
var VMPReName = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.costYB = 500, e.skinName = "resource/eui_skins/game/menpai/VMPReNameSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.addCloseListen(e.btnClose), DisplayUtil.popBtnStyle(e.btnClose), DisplayUtil.popBtnStyle(e.btnSure), e.btnSure.label = "确定", e.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e)
    }, e.prototype.onHand = function () {
        var t = this.txtInput.text;
        if (!t) return void ViewText.text("请输入门派名称");
        var e = GameGlobal.modelRole.voMine.yuanbao;
        return e < this.costYB && GameGlobal.modelmenpai.renameCount > 0 ? (GameGlobal.layerMgr.open(UIConst.CAILIAOGET, 33), void this.closeHandler()) : void GameGlobal.modelmenpai.CG823(1, t)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.onUpdate, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.onUpdate, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onUpdate(), this.addMsg()
    }, e.prototype.onUpdate = function () {
        var t = GameGlobal.modelRole.voMine.yuanbao;
        t < this.costYB ? this.txtCost.textColor = 16646144 : this.txtCost.textColor = 2524167, 0 == GameGlobal.modelmenpai.renameCount ? (this.txtCost.visible = !1, this.iconCost.visible = !1, this.txtCostLabel.textFlow = HtmlUtil.parse("消耗：" + HtmlUtil.color("免费", "#10a244"))) : (this.txtCost.visible = !0, this.iconCost.visible = !0, this.txtCostLabel.text = "消耗：")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VMPReName.prototype, "VMPReName");
var VMPReWGG = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/menpai/VReWGGSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnSure), this.btnSure.label = "保存修改", this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        var t = this.txtInput.text;
        return t ? void GameGlobal.modelmenpai.CG823(2, t) : void ViewText.text("请输入公告内容")
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = VoMenPai.getInst();
        this.txtInput.text = i.gonggao
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VMPReWGG.prototype, "VMPReWGG");
var VReWGG = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/menpai/VReWGGSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnSure), this.btnSure.label = "保存修改", this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        var t = this.txtInput.text;
        return t ? void GameGlobal.modelmenpai.CG823(2, t) : void ViewText.text("请输入公告内容")
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = VoMenPai.getInst();
        this.txtInput.text = i.gonggao
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VReWGG.prototype, "VReWGG");
var XHAwards = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "resource/eui_skins/game/menpai/XHAwardsSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.btnSure.label = "领取", DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnSure), this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        return 0 == this.state ? void ViewText.text("香火值不足，不能领取") : 2 == this.state ? void ViewText.text("您已领取") : void GameGlobal.modelmenpai.CG841(this.type)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = e.jiangli;
        this.type = e.type;
        var o = ConfigHelp.makeVoByArr(i);
        ConfigHelp.makeVoGrids([o], this.gridArr, 0, 0, this.container, !0, 0, .8);
        var n = VoSXRecord.getInst(),
            a = n.awards,
            s = a[this.type - 1];
        this.updateSt(s), this.txtTItle.text = CFG_MENPAI.LIB3[this.type].xhz + "香火值可领取"
    }, e.prototype.updateSt = function (t) {
        switch (t) {
            case 0:
                this.btnSure.setNoticeVis(!1), this.btnSure.enabled = !1, this.btnSure.label = "不可领取";
                break;
            case 1:
                this.btnSure.setNoticeVis(!0), this.btnSure.enabled = !0, this.btnSure.label = "领取";
                break;
            case 2:
                this.btnSure.setNoticeVis(!1), this.btnSure.enabled = !1, this.btnSure.label = "已领取"
        }
        this.state = t
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(XHAwards.prototype, "XHAwards");
var VoApply = function () {
    function t() {}
    return t.condition = 0, t
}();
__reflect(VoApply.prototype, "VoApply");
var VoHuoYue = function () {
    function t() {}
    return t.init = function () {
        if (!(t.map_length > 0)) {
            var e = CFG_MENPAI.LIB8,
                i = 0;
            for (var o in e) {
                var n = e[o],
                    a = new t;
                a.cfg = n, a.count = 0, t.map[o] = a, i++
            }
            t.map_length = i
        }
    }, t.update = function (e, i) {
        var o = t.map[e];
        o.count = i
    }, t.find = function (t) {
        var e = CFG_MENPAI.LIB7;
        return e[t]
    }, t.map = {}, t.map_length = 0, t.list = [], t
}();
__reflect(VoHuoYue.prototype, "VoHuoYue");
var VoHuoYueDay = function () {
    function t() {}
    return t.init = function () {
        var e = CFG_MENPAI.LIB9,
            i = t.map;
        for (var o in e) {
            var n = e[o],
                a = new t;
            a.state = 1, a.cfg = n, i[o] = a
        }
    }, t.update = function (e, i) {
        var o = t.map[e];
        return o.state = i, o
    }, t.map = {}, t
}();
__reflect(VoHuoYueDay.prototype, "VoHuoYueDay");
var VoMember = function () {
    function t() {}
    return t.getJiWeiStr = function (t) {
        switch (t) {
            case 6:
                return "掌门";
            case 5:
                return "副掌门";
            case 4:
                return "长老";
            case 3:
                return "护法";
            case 0:
                return "成员"
        }
    }, t.create = function () {
        return new t
    }, t.minePos = 0, t.mineGX = 0, t
}();
__reflect(VoMember.prototype, "VoMember");
var VoMenPai = function () {
    function t() {
        this.mpId = 0, this.name = "帮派名字", this.hostName = "玩家名字六字", this.level = 1, this.count = 1, this.shengwang = 0, this.gonggao = "1.这是帮会公告."
    }
    return t.getInst = function () {
        return t._inst || (t._inst = new t), t._inst
    }, t
}();
__reflect(VoMenPai.prototype, "VoMenPai");
var VoMPBoss = function () {
    function t() {
        this.state = 1, this.got = 0
    }
    return t.init = function () {
        if (!(t.max_length > 0)) {
            var e = 0,
                i = CFG_MENPAI.LIB10,
                o = t.map;
            for (var n in i) {
                var a = i[n],
                    s = new t;
                s.cfg = a, o[n] = s, e++
            }
            t.max_length = e
        }
    }, t.find = function (e) {
        var i = t.map[e];
        return i
    }, t.setGot = function (e, i) {
        var o = t.map[e];
        o.got = i
    }, t.reduceCount = function () {
        var e = t.tiaoZhanCnt - 1,
            i = 0;
        t.tiaoZhanCnt = Math.max(i, e)
    }, t.update = function (e, i, o, n) {
        var a = t.find(e);
        a.blood = i, a.taopaoTime = o, a.refreshTime = n, 0 >= o ? a.state = 2 : a.state = 1
    }, t.map = {}, t.max_length = 0, t.maxCount = 5, t.canBuyCount = 0, t
}();
__reflect(VoMPBoss.prototype, "VoMPBoss");
var VoMPFB = function () {
    function t() {
        this.isTG = 0
    }
    return t.init = function () {
        t.list.length = 0;
        var e = CFG_MENPAI.LIB5;
        for (var i in e) {
            var o = new t,
                n = e[i];
            o.cfg = n, o.isTG = 0, t.list.push(o)
        }
    }, t.setTG = function (e) {
        for (var i = t.list, o = i.length, n = 0; o > n; n++) {
            var a = i[n],
                s = a.cfg.l;
            if (s == e) {
                a.isTG = 1;
                break
            }
        }
    }, t.maxNum = 5, t.leftNum = 0, t.list = [], t
}();
__reflect(VoMPFB.prototype, "VoMPFB");
var VoMPJianShe = function () {
    function t() {}
    return t
}();
__reflect(VoMPJianShe.prototype, "VoMPJianShe");
var VoMplst = function () {
    function t() {
        this.isApply = 0
    }
    return t.create = function () {
        return new t
    }, t.prototype.isFull = function () {
        var t = CFG_MENPAI.LIB1[this.level].chengyuan;
        return this.memCnt >= t
    }, t
}();
__reflect(VoMplst.prototype, "VoMplst");
var VoMPShop = function () {
    function t() {
        this.boughtNum = 0
    }
    return t.prototype.getLimit = function () {
        var t = this.cfg.dayxg,
            e = this.cfg.fxg;
        return t + e
    }, t.prototype.getPrice = function () {
        var t = this.cfg.xh.join(","),
            e = ConfigHelp.makeVoList(t)[0];
        return e.count
    }, t.prototype.getCost = function () {
        return this.cfg.xh.join(",")
    }, t.prototype.conditionNotFit = function () {
        var t = this.cfg.tiaojian,
            e = VoMenPai.getInst();
        return t > 0 && e.level < t ? (ViewText.htmlText("门派等级达到" + HtmlUtil.color("" + t + "级", "#58FF21") + "解锁该物品的购买权限"), !0) : !1
    }, t.prototype.conditionDisplay = function (t) {
        var e = this.cfg.tiaojian;
        if (e > 0) {
            var i = VoMenPai.getInst();
            i.level >= e ? (t.textColor = 27922, t.text = "") : (t.textColor = 15532032, t.text = "门派等级" + e + "解锁")
        } else t.text = ""
    }, t.prototype.priceNotEnough = function () {
        var t = this.cfg.xh.join(","),
            e = ConfigHelp.makeVoList(t)[0],
            i = VoMember.mineGX,
            o = CFG_ATTR.LIB[e.id].n;
        return i < e.count ? (ViewText.text(o + "不足"), !0) : !1
    }, t.prototype.getOnSellData = function () {
        var t = this.cfg.wpid.join(",");
        return t
    }, t.prototype.onBuy = function (t) {
        GameGlobal.modelmenpai.CG845(this.cfg.id, t)
    }, t.initMapSeparate = function () {
        var t = CFG_MENPAI.LIB6;
        for (var e in t) {
            var i = this.map.getByKey(e);
            i || (i = this.createVo(), i.cfg = t[e], this.map.add(i, e));
            var o = e.charAt(0),
                n = this.mapSeparate.getByKey(o);
            n || (n = [], this.mapSeparate.add(n, o)), n.push(i)
        }
    }, t.createVo = function () {
        return new t
    }, t.update = function (t, e) {
        var i = this.map.getByKey(t);
        i || (i = this.createVo(), i.cfg = CFG_MENPAI.LIB6[t], this.map.add(i, t)), i.boughtNum = e
    }, t.getDatasByType = function (t) {
        var e = this.mapSeparate.getByKey(t);
        return e || (this.initMapSeparate(), e = this.mapSeparate.getByKey(t)), e.sort(this.onSort), e
    }, t.onSort = function (t, e) {
        var i = t.cfg.px,
            o = e.cfg.px;
        return i - o
    }, t.map = new CommondMap, t.mapSeparate = new CommondMap, t
}();
__reflect(VoMPShop.prototype, "VoMPShop", ["IVoStore"]);
var VoMPSkill = function () {
    function t() {}
    return t.init = function () {
        t.map = {};
        for (var e = CFG_MENPAI.LIB4, i = 0; 8 > i; i++) {
            var o = new t,
                n = i + 1,
                a = e[n];
            o.id = n, o.position = a.gz, o.name = a.mpsw, o.level = a.level, o.att = a.onesx, o.gongxiang = a.xh, t.map[o.position] = o
        }
        t.initAtts()
    }, t.update = function (e) {
        if (0 != e) {
            var i = e - 7;
            i = Math.max(i, 1), e = Math.min(1600, e);
            for (var o = i; e >= o; o++) {
                var n = CFG_MENPAI.LIB4[o],
                    a = n.gz,
                    s = t.map[a];
                s.id = o, s.name = n.mpsw, s.level = n.level, s.att = n.onesw, s.gongxiang = n.xh
            }
        }
    }, t.initAtts = function () {
        var e = [102, 0, 103, 0, 105, 0, 106, 0, 107, 0, 109, 0, 119, 0];
        t.atts = e
    }, t.updateAtt = function (e, i) {
        for (var o = t.atts, n = 0; n < o.length; n += 2) {
            var a = o[n];
            if (a == e) {
                o[n + 1] = i;
                break
            }
        }
    }, t.zhanli = 0, t.atts = [], t.headId = 1, t
}();
__reflect(VoMPSkill.prototype, "VoMPSkill");
var MPAtt = function () {
    function t() {}
    return t.parseStr = function (e) {
        t.list.length = 0;
        for (var i = e.split(/\;|\,/), o = i.length, n = 0; o > n; n += 2) {
            var a = new t;
            a.id = parseInt(i[n]), a.value = parseInt(i[n + 1]), a.name = t.parseToName(a.id), t.list.push(a)
        }
        return t.list
    }, t.parseArr = function (e) {
        t.list.length = 0;
        for (var i = e.length, o = 0; i > o; o += 2) {
            var n = new t;
            n.id = e[o], n.value = e[o + 1], n.name = t.parseToName(n.id), t.list.push(n)
        }
        return t.list
    }, t.parseToName = function (t) {
        switch (t) {
            case 101:
                return "气血:";
            case 102:
                return "气血:";
            case 103:
                return "攻击:";
            case 105:
                return "物防:";
            case 106:
                return "法防:";
            case 107:
                return "暴击:";
            case 109:
                return "抗暴:";
            case 119:
                return "速度:"
        }
    }, t.list = [], t
}();
__reflect(MPAtt.prototype, "MPAtt");
var VoMPTeam = function () {
    function t() {
        this.state = 1
    }
    return t.init = function (e) {
        t.list.length = 0;
        for (var i = t.list, o = e.length, n = 0; o > n; n++) {
            var a = t.create(),
                s = e[n];
            a.hostId = s[0], a.hostName = s[1], a.count = s[2], a.state = s[3], i.push(a)
        }
    }, t.create = function () {
        return new t
    }, t.list = [], t
}();
__reflect(VoMPTeam.prototype, "VoMPTeam");
var VoCreateTeam = function () {
    function t() {
        this.isLeader = 1
    }
    return t
}();
__reflect(VoCreateTeam.prototype, "VoCreateTeam");
var VoSXRecord = function () {
    function t() {
        this.details = [], this.curExp = 0, this.sxPerson = 0, this.selfSX = 0, this.awards = [], this._maxExp = -1
    }
    return t.getInst = function () {
        return t._inst || (t._inst = new t), t._inst
    }, Object.defineProperty(t.prototype, "maxPerson", {
        get: function () {
            var t = 0,
                e = VoMenPai.getInst(),
                i = Math.max(e.level, 1);
            return t = CFG_MENPAI.LIB1[i].chengyuan
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t.prototype, "maxExp", {
        get: function () {
            if (-1 == this._maxExp) {
                var t = CFG_MENPAI.LIB3,
                    e = Object.keys(t),
                    i = e.length;
                this._maxExp = t[e[i - 1]].xhz
            }
            return this._maxExp
        },
        enumerable: !0,
        configurable: !0
    }), t
}();
__reflect(VoSXRecord.prototype, "VoSXRecord");
var VoSXDetail = function () {
    function t() {}
    return t
}();
__reflect(VoSXDetail.prototype, "VoSXDetail");
var ModelMidFestival = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(3972, this.GC3972, this), e.regHand(3974, this.GC3974, this), e.regHand(3976, this.GC3976, this), e.regHand(3978, this.GC3978, this), e.regHand(3980, this.GC3980, this), e.regHand(3982, this.GC3982, this), e.regHand(3988, this.GC3988, this), e.regHand(4092, this.GC4092, this), e.regHand(4094, this.GC4094, this)
    }, e.prototype.CG3971 = function () {
        this.sendSocket(3971, this.getBytes())
    }, e.prototype.GC3972 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readInt(),
                s = i.readInt(),
                r = i.readInt(),
                l = i.readByte(),
                h = i.readByte();
            VoFestBoss.update(n, a, s, r, l, h)
        }
        VoFestBoss.bossArr && VoFestBoss.bossArr.sort(VoFestBoss.sortFun);
        for (var n = 0, c = i.readShort(); c > n; n++) {
            var p = i.readByte(),
                h = i.readByte();
            VoFestBoss.updateBXState(p, h)
        }
        VoFestBoss.remainTZCount = i.readByte(), VoFestBoss.jinDu = i.readInt(), VoFestBoss.egretremainTime = egret.getTimer(), VoFestBoss.remainTime = i.readInt(), VoFestBoss.boughtNum = i.readByte(), t.notify(e.msg_datas_boss)
    }, e.prototype.CG3973 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(3973, e)
    }, e.prototype.GC3974 = function (t, i) {
        for (var o = i.readShort(), n = [], a = 0; o > a; a++) {
            var s = {};
            s.paiming = i.readByte(), s.name = i.readUTF(), s.damage = i.readInt(), n.push(s)
        }
        t.notify(e.msg_datas_bossph, n)
    }, e.prototype.CG3975 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(3975, e)
    }, e.prototype.GC3976 = function (t, e) {
        var i = e.readByte();
        if (1 != i) {
            if (2 == i) {
                var o = VoFestBoss.canbuyCount - VoFestBoss.boughtNum;
                if (o > 0) {
                    var n = "是否花费" + VoFestBoss.costYB + "元宝购买一次挑战次数?\n剩余可购买次数：" + o;
                    return void ViewAlert.show(n, function () {
                        GameGlobal.modelMidFestival.CG3981()
                    })
                }
            }
            ViewText.text([null, null, "没有挑战次数", "已击杀", "boss未刷新", "已逃跑"][i])
        }
    }, e.prototype.CG3977 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3977, e)
    }, e.prototype.GC3978 = function (t, i) {
        var o = i.readByte();
        1 != o ? ViewText.text([null, null, "未达标", "背包已满", "已领取"][o]) : (t.CG3971(), t.notify(e.msg_datas_bossGot))
    }, e.prototype.GC3980 = function (t, e) {
        for (var i = e.readShort(), o = [], n = GameGlobal.modelRole, a = 0; i > a; a++) {
            var s = VoBattleRnkItem.create();
            s.rnk = e.readByte(), s.id = e.readLong(), s.name = e.readUTF(), s.value = e.readInt(), s.id != n.voMine.id && o.push(s)
        }
        var r = VoBattleRnkItem.create();
        r.rnk = e.readByte(), r.value = e.readInt(), r.id = n.voMine.id, r.name = n.voMine.name;
        var l = ModelBattleUI.getIns();
        l.myRnkVo = r, l.otherRnkList = o, l.caculateRnk()
    }, e.prototype.CG3981 = function () {
        this.sendSocket(3981, this.getBytes())
    }, e.prototype.GC3982 = function (t, e) {
        var i = e.readByte();
        1 == i ? t.CG3971() : 2 == i ? setTimeout(function () {
            ViewAlert.show("元宝不足，是否前往充值？", function () {
                GameGlobal.layerMgr.open(UIConst.RECHARGE)
            })
        }, 500) : ViewText.text([null, null, "元宝不足", "购买次数不足!"][i])
    }, e.prototype.GC3988 = function (t, e) {
        var i = (e.readInt(), ConfigHelp.parseServItems(e));
        GameGlobal.layerMgr.open(UIConst.GKBOSSAWRAD, i)
    }, e.prototype.CG4011 = function () {
        var t = this.getBytes();
        this.sendSocket(4011, t)
    }, e.prototype.GC4012 = function (t, i) {
        Vo_RabbitItem.lastsel = Vo_RabbitItem.sel = i.readByte(), Vo_RabbitItem["catch"] = i.readByte(), t.notify(e.MSG_RABBIT_UPDATE)
    }, e.prototype.CG4013 = function () {
        var t = this.getBytes();
        this.sendSocket(4013, t)
    }, e.prototype.GC4014 = function (t, i) {
        Vo_RabbitItemjl.init();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readInt(),
                s = i.readByte(),
                r = Vo_RabbitItemjl.Map[a];
            r && (r.state = s)
        }
        t.notify(e.MSG_RABBIT)
    }, e.prototype.CG4015 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(4015, e)
    }, e.prototype.GC4016 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = Vo_RabbitItemjl.Map[n];
            a && (a.state = 2), t.notify(e.MSG_RABBIT)
        } else {
            var s = ["", "", "未达标", "背包已满", "已领取"];
            ViewText.text(s[o])
        }
    }, e.prototype.CG4017 = function () {
        var t = this.getBytes();
        this.sendSocket(4017, t)
    }, e.prototype.GC4018 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = Vo_RabbitItemRank.List[n];
            a || (a = new Vo_RabbitItemRank, Vo_RabbitItemRank.List.push(a)), a.index = n, a.name = i.readUTF(), a.num = i.readInt()
        }
        t.notify(e.MSG_RABBIT)
    }, e.prototype.CG4019 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(4019, e), Vo_RabbitItem.hidebubb = !0
    }, e.prototype.GC4020 = function (t, i) {
        var o = i.readByte();
        if (1 == o) Vo_RabbitItem.nowNum = i.readByte(), Vo_RabbitItem.sel += Vo_RabbitItem.nowNum, Vo_RabbitItem.sel > 30 && (Vo_RabbitItem.sel -= 30), t.notify(e.MSG_RABBIT_DICE);
        else if (4 == o) ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        }), Vo_RabbitItem.hidebubb = !1;
        else {
            var n = ["", "", "道具不足", "背包已满"];
            ViewText.text(n[o]), Vo_RabbitItem.hidebubb = !1
        }
    }, e.prototype.CG4091 = function () {
        var t = this.getBytes();
        this.sendSocket(4091, t)
    }, e.prototype.GC4092 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readInt(),
                s = i.readShort(),
                r = Vo_MidFestLB.Map[a];
            r && (r.cs = s)
        }
        t.notify(e.MSG_LB)
    }, e.prototype.CG4093 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(4093, e)
    }, e.prototype.GC4094 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = Vo_MidFestLB.Map[n];
            a && (a.cs++, t.notify(e.MSG_LB))
        } else;
    }, e.msg_datas_boss = "msg_datas_boss", e.msg_datas_bossph = "msg_datas_bossph", e.msg_datas_bossGot = "msg_datas_bossGot", e.MSG_RABBIT_UPDATE = "MSG_RABBIT_UPDATE", e.MSG_RABBIT_DICE = "MSG_RABBIT_DICE", e.MSG_RABBIT = "MSG_RABBIT", e.MSG_LB = "MSG_LB", e
}(BaseModel);
__reflect(ModelMidFestival.prototype, "ModelMidFestival");
var ViewMidFestival = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewFestivalSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose);
        for (var t = 0; 3 > t; t++) {
            var e = this["red" + t];
            e.visible = !1;
            var i = this["btn" + t];
            DisplayUtil.popBtnStyle(i), i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
        }
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btn0:
                if (!CFG_COMMOND.isOpen(UIConst.MIDFESTBOSS, !0)) return;
                GameGlobal.layerMgr.open(UIConst.BOSSPAGE, 3);
                break;
            case this.btn1:
                if (!CFG_COMMOND.isOpen(UIConst.MIDFESTRABBIT, !0)) return;
                GameGlobal.layerMgr.open(UIConst.MIDFESTRABBIT);
                break;
            case this.btn2:
                if (!CFG_COMMOND.isOpen(UIConst.MIDFESTLB, !0)) return;
                GameGlobal.layerMgr.open(UIConst.MIDFESTLB)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "midFest_BG_png"), this.checkbtnred(), GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.modelMidFestival.on(ModelMidFestival.MSG_RABBIT, this.checkRabbitjlRed, this), GameGlobal.modelMidFestival.CG4013(), GameGlobal.modelMidFestival.on(ModelMidFestival.msg_datas_boss, this.checkBossRed, this), GameGlobal.modelMidFestival.CG3971()
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.bg, null), GameGlobal.tick.removeInterv(this.tick, this), GameGlobal.modelMidFestival.off(ModelMidFestival.MSG_RABBIT, this.checkRabbitjlRed, this), GameGlobal.modelMidFestival.off(ModelMidFestival.msg_datas_boss, this.checkBossRed, this)
    }, e.prototype.checkRabbitjlRed = function () {
        var t = !1,
            e = Vo_RabbitItemjl.Map;
        for (var i in e) {
            var o = e[i];
            if (1 == o.state) {
                t = !0;
                break
            }
        }
        this.red1.visible = Vo_RabbitItem.fristTip || t
    }, e.prototype.checkBossRed = function () {
        var t = !1,
            e = VoFestBoss.bxStates;
        for (var i in e) {
            var o = e[i];
            if (1 == o) {
                t = !0;
                break
            }
        }
        this.red0.visible = VoFestBoss.fristTip || t
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(24);
        if (e) {
            var i = e.getRemainSec();
            0 > i && (ViewText.text("活动已结束"), t.closeHandler())
        } else t.closeHandler()
    }, e.prototype.checkbtnred = function () {
        this.red2.visible = Vo_MidFestLB.fristTip
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(ViewMidFestival.prototype, "ViewMidFestival");
var ItemFestBoss = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.WIDTH = 114, e.skinName = "ItemFestBossSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.txtCntInfo.textFlow = HtmlUtil.underLine("争夺12人"), DisplayUtil.popBtnStyle(this.txtCntInfo), this.txtCntInfo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.clickObj.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.uirole = UIRole.create(), this.mxContainer.addChild(this.uirole)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.txtCntInfo:
                GameGlobal.layerMgr.open(UIConst.MIDFESTBOSSPH, this._data.cfg.id);
                break;
            case this.clickObj:
                if (!ModelBattle.canEnterBtl()) return;
                1 == this._data.state ? GameGlobal.modelMidFestival.CG3975(this._data.cfg.id) : ViewText.text("BOSS尚未刷新")
        }
    }, e.prototype.setData = function (t) {
        switch (t || (this.stop(), this.removeTick()), this._data = t, this.uirole.setMonsterID(t.cfg.gwmx), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play(), this.txtCntInfo.textFlow = HtmlUtil.underLine("争夺:" + t.wrestNum), t.remainTime > 0 ? this.addTick() : this.removeTick(), this.showCanBattleEff(!1), t.state) {
            case 0:
                this.iconEscaped.visible = !1, this.iconBeated.visible = !1, this.txtTime.text = "每日" + t.cfg.cssj + "时刷新";
                break;
            case 1:
                this.iconEscaped.visible = !1, this.iconBeated.visible = !1, this.txtTime.text = "00:00:00", this.showCanBattleEff(!0);
                break;
            case 2:
                this.iconEscaped.visible = !0, this.iconBeated.visible = !1, this.txtTime.text = "每日" + t.cfg.cssj + "时刷新";
                break;
            case 3:
                this.iconEscaped.visible = !1, this.iconBeated.visible = !0, this.txtTime.text = "每日" + t.cfg.cssj + "时刷新"
        }
        this.iconProgress.width = this.WIDTH * t.persent / 100, this.txtProgress.text = t.persent + "%"
    }, e.prototype.addTick = function () {
        GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.onTick = function (t) {
        t.txtTime.textFlow = HtmlUtil.parse("<b>" + DateUtil.getHMSBySecond2(t._data.remainTime--) + "后逃跑</b>")
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick, this)
    }, e.prototype.stop = function () {
        this.uirole && this.uirole.stopAndClear()
    }, e.prototype.showCanBattleEff = function (t) {
        t ? this.battleEffect || (this.battleEffect = EffectMgr.addEff("uieff/fighting", this, 130, 150, 1e3, -1, !0)) : this.battleEffect && (EffectMgr.getIns().removeEff(this.battleEffect), this.battleEffect = null)
    }, e
}(eui.Component);
__reflect(ItemFestBoss.prototype, "ItemFestBoss");
var ItemFestBossAD = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.gridArr = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemFestBossADSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, ConfigHelp.makeStrGrids(t, this.gridArr, 0, 0, this.gridContainer, !0)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        set: function (t) {
            var e = "";
            switch (t) {
                case 0:
                    e = "第" + (t + 1) + "名";
                    break;
                case 1:
                    e = "第2-5名";
                    break;
                case 2:
                    e = "第6-10名";
                    break;
                case 3:
                    e = "参与奖"
            }
            this.txtPaiMing.text = e
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemFestBossAD.prototype, "ItemFestBossAD");
var ItemFestBossPH = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemFestBossPHSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtPM.text = t.paiming + "", this.txtName.text = t.name, this.txtDamage.text = t.damage + ""
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemFestBossPH.prototype, "ItemFestBossPH");
var ViewFestBoss = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.WIDTH = 450, e.gridArr = [], e.skinName = "ViewFestBossSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.txtSHAward.textFlow = HtmlUtil.underLine(this.txtSHAward.text), DisplayUtil.popBtnStyle(this.txtSHAward), DisplayUtil.popBtnStyle(this.btnAdd), this.award1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.award2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.award3.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.txtSHAward.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.imgNotice1.visible = this.imgNotice2.visible = this.imgNotice3.visible = !1, this.maxProgress = 0
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.award1:
                GameGlobal.layerMgr.open(UIConst.MIDFESTBOSSADTIP, 0);
                break;
            case this.award2:
                GameGlobal.layerMgr.open(UIConst.MIDFESTBOSSADTIP, 1);
                break;
            case this.award3:
                GameGlobal.layerMgr.open(UIConst.MIDFESTBOSSADTIP, 2);
                break;
            case this.txtSHAward:
                GameGlobal.layerMgr.open(UIConst.MIDFESTBOSSPHAD, VoFestBoss.getCurJinXingBoss());
                break;
            case this.btnAdd:
                var i = "是否花费" + VoFestBoss.costYB + "元宝购买一次挑战次数?\n剩余可购买次数：" + (VoFestBoss.canbuyCount - VoFestBoss.boughtNum);
                ViewAlert.show(i, function () {
                    GameGlobal.modelMidFestival.CG3981()
                })
        }
    }, e.prototype.onUpdate = function () {
        var t = this.getMaxProgress();
        this.txtJinDu.text = VoFestBoss.jinDu + "/" + t;
        for (var e = 0; e < VoFestBoss.bossArr.length; e++) this["item" + (e + 1)].setData(VoFestBoss.bossArr[e]);
        var i = VoFestBoss.getActiveBoss();
        try {
            ConfigHelp.makeStrGrids(i.cfg.zsjl, this.gridArr, 0, 0, this.gridContainer, !0)
        } catch (o) {
            console.log("没有当前可激活的boss")
        }
        this.txtCount.text = "挑战次数: " + VoFestBoss.remainTZCount + "/10", this.btnAdd.visible = VoFestBoss.remainTZCount < 10, this.iconProgess.width = this.WIDTH * Math.min(1, VoFestBoss.jinDu / t), this.imgNotice1.visible = 1 == VoFestBoss.bxStates[1], this.imgNotice2.visible = 1 == VoFestBoss.bxStates[2], this.imgNotice3.visible = 1 == VoFestBoss.bxStates[3]
    }, e.prototype.onTick = function (t) {
        var e = egret.getTimer(),
            i = VoFestBoss.remainTime - (e - VoFestBoss.egretremainTime) / 1e3 >> 0;
        t.txtTime.visible = i >= 0, t.txtTime.textFlow = HtmlUtil.parse("回复倒计时: " + HtmlUtil.color(DateUtil.getHMSBySecond2(i), "#FF5B5B"));
        var o = GameGlobal.modelAct.actData.getChildByID(35);
        if (o) {
            var n = o.getChildByID(56);
            if (n) {
                var a = n.getRemainSec();
                if (a >= 0) return
            }
        }
        GameGlobal.layerMgr.close(UIConst.BOSSPAGE)
    }, e.prototype.addMsg = function () {
        this.onTick(this), GameGlobal.tick.addInterv(this.onTick, 1e3, this), GameGlobal.modelMidFestival.on(ModelMidFestival.msg_datas_boss, this.onUpdate, this), GameGlobal.modelMidFestival.CG3971()
    }, e.prototype.removeMsg = function () {
        GameGlobal.tick.removeInterv(this.onTick), GameGlobal.modelMidFestival.off(ModelMidFestival.msg_datas_boss, this.onUpdate, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), VoFestBoss.fristTip = !1;
        var i = GameGlobal.layerMgr.getView(UIConst.BOSSPAGE);
        i && i.base.setNoticByIndex(3, VoFestBoss.fristTip), IconUtil.setIconSrc(this.bgg, "commonAct_json.15_bossBg")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), IconUtil.setIconSrc(this.bgg)
    }, e.prototype.getMaxProgress = function () {
        if (0 == this.maxProgress)
            for (var t = Config.getConfig(zqqfjl_928).values, e = t.length, i = 0; e > i; i++) {
                var o = t[i].jssl;
                o > this.maxProgress && (this.maxProgress = o)
            }
        return this.maxProgress
    }, e
}(BaseEUIView);
__reflect(ViewFestBoss.prototype, "ViewFestBoss");
var ViewFestBossAD = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.descrition = "1.击杀BOSS成功, 根据伤害排名可获得相应奖励\n2.击杀BOSS后，伤害排名奖励将通过邮件发送", e.skinName = "ViewFestBossADSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose).addCloseListen(this.background), this.txtDescription.text = this.descrition, this.container.dataProvider = this.provider = new eui.ArrayCollection, this.container.itemRenderer = ItemFestBossAD
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e && (this.provider.source = [e.one, e.two, e.three, e.cyjl])
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewFestBossAD.prototype, "ViewFestBossAD");
var ViewFestBossAdTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "ViewFestBossAdTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose).addCloseListen(this.background), this.btnHand.label = "领取", this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        GameGlobal.modelMidFestival.CG3977(this.bianhao)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.bianhao = e + 1, this.lb.textFlow = HtmlUtil.parse("击杀" + HtmlUtil.color(CFG_MidFestival.LIB_MIDFESTBOSSAD[this.bianhao].jssl + "只", "#d83503") + "boss可领取"), ConfigHelp.makeStrGrids(CFG_MidFestival.LIB_MIDFESTBOSSAD[this.bianhao].jl, this.gridArr, 0, 0, this.gridContainer, !0);
        var i = VoFestBoss.bxStates[this.bianhao];
        switch (i) {
            case 0:
                this.btnHand.enabled = !1, this.btnHand.label = "不可领取";
                break;
            case 1:
                this.btnHand.enabled = !0, this.btnHand.label = "领取";
                break;
            case 2:
                this.btnHand.enabled = !1, this.btnHand.label = "已领取"
        }
        GameGlobal.modelMidFestival.on(ModelMidFestival.msg_datas_bossGot, this.updateGot, this)
    }, e.prototype.updateGot = function () {
        this.btnHand.enabled = !1, this.btnHand.label = "已领取", VoFestBoss.bxStates[this.bianhao] = 2
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelMidFestival.off(ModelMidFestival.msg_datas_bossGot, this.updateGot, this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewFestBossAdTip.prototype, "ViewFestBossAdTip");
var ViewFestBossPH = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewFestBossPHSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose).addCloseListen(this.btnReturn).addCloseListen(this.background), this.list.dataProvider = this.provider = new eui.ArrayCollection, this.list.itemRenderer = ItemFestBossPH
    }, e.prototype.onUpdate = function (t) {
        DisplayUtil.fillDataAC(this.provider, t)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelMidFestival.on(ModelMidFestival.msg_datas_bossph, this.onUpdate, this), GameGlobal.modelMidFestival.CG3973(e)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelMidFestival.off(ModelMidFestival.msg_datas_bossph, this.onUpdate, this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewFestBossPH.prototype, "ViewFestBossPH");
var VoFestBoss = function () {
    function t() {}
    return t.update = function (e, i, o, n, a, s) {
        var r = this.bossArr[e];
        r || (r = new t, this.bossArr[e] = r), r.cfg = CFG_MidFestival.LIB_MIDFESTBOSS[i], r.wrestNum = o, r.remainTime = n, r.persent = a, r.state = s
    }, t.updateBXState = function (t, e) {
        this.bxStates[t] = e
    }, t.getActiveBoss = function () {
        for (var t = 0; t < this.bossArr.length; t++) {
            var e = this.bossArr[t];
            if (e.remainTime <= 0) return e
        }
        return null
    }, t.getCurJinXingBoss = function () {
        for (var t = 0; t < this.bossArr.length; t++) {
            var e = this.bossArr[t];
            if (1 == e.state) return e.cfg
        }
        return e ? e.cfg : null
    }, Object.defineProperty(t, "canbuyCount", {
        get: function () {
            return CFG_Param.LIB[24].key
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "costYB", {
        get: function () {
            return CFG_Param.LIB[25].key
        },
        enumerable: !0,
        configurable: !0
    }), t.sortFun = function (t, e) {
        var i = t.cfg.cssj,
            o = e.cfg.cssj;
        return i - o
    }, t.bossArr = [], t.bxStates = {}, t.remainTZCount = 0, t.remainTime = 0, t.egretremainTime = 0, t.jinDu = 0, t.fristTip = !0, t
}();
__reflect(VoFestBoss.prototype, "VoFestBoss");
var ViewMidFestLB = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WeekLBSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(36);
        t || DisplayUtil.remove(this.base), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.data = new eui.ArrayCollection, this.list.itemRenderer = ViewMidFestLBItem, this.list.dataProvider = this.data
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = GameGlobal.modelAct.actData.getChildByID(36);
        i ? (IconUtil.setIconSrc(this.titlebg, "springFestival_json.23_xclbBg"), IconUtil.setIconSrc(this.titleText, "springFestival_json.23_xclbTitle")) : (IconUtil.setIconSrc(this.titlebg, "commonAct_json.15_jrlbBg"), IconUtil.setIconSrc(this.titleText, "weekender_json.lbzglb")), Vo_MidFestLB.fristTip = !1;
        var o = GameGlobal.layerMgr.getView(UIConst.MIDFESTIVAL);
        o && (o.red2.visible = Vo_MidFestLB.fristTip), Vo_MidFestLB.create(), this.update(), GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.modelMidFestival.on(ModelMidFestival.MSG_LB, this.update, this), GameGlobal.modelMidFestival.CG4091()
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.titlebg, null), IconUtil.setIconSrc(this.titleText, null), GameGlobal.tick.removeInterv(this.tick, this), GameGlobal.modelMidFestival.off(ModelMidFestival.MSG_LB, this.update, this)
    }, e.prototype.update = function () {
        this.data && DisplayUtil.fillDataAC(this.data, Vo_MidFestLB.List)
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(ActivityType.COMMON_ACT);
        if (e) {
            var i = e.getChildByID(59);
            if (!i) return void t.closeHandler();
            var o = i.getRemainSec();
            o > 0 ? t.lbtime.text = DateUtils.getFormatBySecond(o, DateFormat.MAX_UNIT) : (ViewText.text("活动已结束"), t.closeHandler())
        } else GameGlobal.tick.removeInterv(t.tick, t), t.closeHandler()
    }, e
}(BaseEUIView);
__reflect(ViewMidFestLB.prototype, "ViewMidFestLB");
var ViewMidFestLBItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "SpringGiftItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.roleShowData = new RoleShowData, this.uirole = new UIRole
    }, e.prototype.dataChanged = function () {
        var t = this.vo = this.data;
        if (this.lbname.text = this.vo.cfg.mc, this.lbdes.text = this.vo.cfg.ms2, t.cs >= t.cfg.cs) var e = "已购买",
            i = !1;
        else e = t.cfg.xj + "元", i = !0;
        this.btn.label = e, this.btn.enabled = i, 0 != t.cfg.modType ? this.updateShow() : this.updateGridShow()
    }, e.prototype.updateShow = function () {
        var t = this.vo;
        this.roleGrp.visible = !0, this.imgRoleBg.visible = !0, this.lbdes.visible = !1;
        var e = GameGlobal.modelRole.voMine.job,
            i = parseInt(e == Sex.MAN ? t.cfg.modMale : t.cfg.modFemale);
        this.roleShowData.setRoleShowIdByType(t.cfg.modType, i);
        var o = 0,
            n = 0,
            a = 1;
        t.cfg.modType == E_RoleShowType.BODY ? (this.roleShowData.horseId = 1001, n = 20, a = 1.3) : t.cfg.modType == E_RoleShowType.WEAPON ? (this.roleShowData.horseId = 1, o = 30, n = -20, a = 1.3) : t.cfg.modType == E_RoleShowType.WING && (this.roleShowData.horseId = 1, o = 50, n = 100, a = 1.3), this.roleGrp.x = 153 + o, this.roleGrp.y = 208 + n, this.roleGrp.scaleX = this.roleGrp.scaleY = a, this.roleGrp.addChild(this.uirole), this.uirole.setData(this.roleShowData), this.uirole.setWay(3), this.uirole.play(), "0" != t.cfg.lbnr2 && ConfigHelp.makeStrGrids(t.cfg.lbnr2, this.grids, 0, 0, this.smallGridGrp, !0, 10, .7)
    }, e.prototype.updateGridShow = function () {
        var t = this.vo;
        this.roleGrp.visible = !1, this.imgRoleBg.visible = !1, this.lbdes.visible = !0, ConfigHelp.makeStrGrids(t.cfg.lbnr2, this.grids, 0, 0, this.gridGrp, !0);
        for (var e = 0; e < this.grids.length; e++) {
            var i = this.grids[e];
            0 == e ? (i.x = (this.gridGrp.width - i.width) / 2, i.y = 0) : (i.x = 96 * (e - 1), i.y = 96)
        }
    }, e.prototype.onT = function () {
        if (!this.btn.enabled) return void ViewText.text("超过每日限购次数！");
        this.btn.enabled = !1;
        var t = CFG_Recharge.LIB[this.vo.id];
        platform.recharge(t.id)
    }, e
}(eui.ItemRenderer);
__reflect(ViewMidFestLBItem.prototype, "ViewMidFestLBItem");
var Vo_MidFestLB = function () {
    function t() {
        this.cs = 0
    }
    return t.create = function () {
        if (!(this.List.length > 0)) {
            var t = MyPlatform.getIns().isAndroid() ? 1 : 2,
                e = CFG_MidFestival.LIB_LB;
            for (var i in e) {
                var o = e[i];
                if (o.sysId == t) {
                    var n = new Vo_WeekLB;
                    n.id = parseInt(i), n.cfg = o, this.List.push(n), this.Map[n.id] = n
                }
            }
        }
    }, t.List = [], t.Map = {}, t.fristTip = !0, t
}();
__reflect(Vo_MidFestLB.prototype, "Vo_MidFestLB");
var ViewFestRabbit_jl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.selid = 1, e.grids = [], e.skinName = "ViewFestRabbit_jlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.rect), DisplayUtil.popBtnStyle(this.btnPre), DisplayUtil.popBtnStyle(this.btnNext), this.btn.label = "领取", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnT, this), this.btnPre.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnNext.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), Vo_RabbitItemjl.init()
    }, e.prototype.btnT = function () {
        GameGlobal.modelMidFestival.CG4015(this.selid)
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnPre:
                this.selid--, this.selid < 1 && (this.selid = 1);
                break;
            case this.btnNext:
                this.selid++;
                var i = Vo_RabbitItemjl.getMapLen();
                this.selid > i && (this.selid = i)
        }
        this.upView(), this.checkbtnRed()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.red0.visible = this.red1.visible = !1, GameGlobal.modelMidFestival.on(ModelMidFestival.MSG_RABBIT, this.update, this), GameGlobal.modelMidFestival.CG4013()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelMidFestival.off(ModelMidFestival.MSG_RABBIT, this.update, this)
    }, e.prototype.check = function () {
        var t = Vo_RabbitItemjl.Map;
        for (var e in t) {
            var i = t[e];
            if (2 != i.state) return void(this.selid = i.id)
        }
        this.selid = i.id
    }, e.prototype.update = function () {
        this.check(), this.upView(), this.checkbtnRed()
    }, e.prototype.upView = function () {
        var t = Vo_RabbitItemjl.Map[this.selid];
        t && (this.lb.text = "捉拿" + t.cfg.sl + "只捣蛋鬼", ConfigHelp.makeStrGrids(t.cfg.jl, this.grids, 0, 0, this.grp, !0), this.btn.setNoticeVis(1 == t.state), this.btn.label = 2 == t.state ? "已领取" : "领取", this.btn.enabled = 2 != t.state)
    }, e.prototype.checkbtnRed = function () {
        var t = this.selid - 1,
            e = Vo_RabbitItemjl.Map[t];
        e ? this.red0.visible = 1 == e.state : this.red0.visible = !1, t = this.selid + 1;
        var e = Vo_RabbitItemjl.Map[t];
        e ? this.red1.visible = 1 == e.state : this.red1.visible = !1
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(ViewFestRabbit_jl.prototype, "ViewFestRabbit_jl");
var ViewFestRabbit_Rank = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewFestRabbit_RankSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.data = new eui.ArrayCollection, this.list.dataProvider = this.data, this.list.itemRenderer = ViewFestRabbit_RankItem, this.lblink.textFlow = HtmlUtil.underLine("请即时领取捣蛋鬼奖励"), this.lblink.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIConst.MIDFESTRABBITJL)
        }, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), Vo_RabbitItemjl.init(), this.update()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.update = function () {
        var t = Vo_RabbitItemjl.List.concat();
        t.sort(this.sortFun), DisplayUtil.fillDataAC(this.data, t)
    }, e.prototype.sortFun = function (t, e) {
        var i = t.cfg.sl,
            o = e.cfg.sl;
        return o - i
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(ViewFestRabbit_Rank.prototype, "ViewFestRabbit_Rank");
var ViewFestRabbit_RankItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "ViewFestRabbit_RankItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.bg.source = t.index % 2 == 0 ? "CM2_json.bg1" : "CM2_json.bg2", this.lb.text = "捉拿" + t.cfg.sl + "只", ConfigHelp.makeStrGrids(t.cfg.jl, this.grids, 0, 0, this.grp, !0)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(ViewFestRabbit_RankItem.prototype, "ViewFestRabbit_RankItem");
var ViewFestRabbit = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isopen = !0, e.skinName = "ViewFestRabbitSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = GameGlobal.layerMgr;
        t.reg(UIConst.MIDFESTRABBITJL, ViewFestRabbit_jl, t.UI_Message), t.reg(UIConst.MIDFESTRABBITRANK, ViewFestRabbit_Rank, t.UI_Message), DisplayUtil.popBtnStyle(this.btnjl), this.btnjl.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIConst.MIDFESTRABBITJL)
        }, this), this.lblink.textFlow = HtmlUtil.underLine("奖励一览"), this.lblink.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIConst.MIDFESTRABBITRANK)
        }, this), this.btnxh0.label = "糖果投掷", this.btnxh1.label = "元宝投掷", this.btnxh0.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnxh1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.gridxh0.enableTip()
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnxh0:
                var i = 22;
                break;
            case this.btnxh1:
                i = 23
        }
        GameGlobal.modelMidFestival.CG4019(i)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.isopen = !0, IconUtil.setIconSrc(this.bgg, "wsj_bg1_png"), IconUtil.setIconSrc(this.bgg2, "minFest_bg2_png"), this.initItem(), this.upXH(), Vo_RabbitItem.fristTip = !1;
        var i = GameGlobal.layerMgr.getView(UIConst.MIDFESTIVAL);
        i && i.checkRabbitjlRed(), this.checkjlRed(), GameGlobal.modelMidFestival.on(ModelMidFestival.MSG_RABBIT_DICE, this.updice, this), GameGlobal.modelMidFestival.on(ModelMidFestival.MSG_RABBIT_UPDATE, this.update, this), GameGlobal.modelMidFestival.on(ModelMidFestival.MSG_RABBIT, this.checkjlRed, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.upXH, this), GameGlobal.modelMidFestival.CG4011()
    }, e.prototype.onClose = function () {
        this.isopen = !1, IconUtil.setIconSrc(this.bgg), IconUtil.setIconSrc(this.bgg2), GameGlobal.tick.removeInterv(this.callback, this), this.btnxh0.touchEnabled = this.btnxh1.touchEnabled = !0, Vo_RabbitItem.hidebubb = !1, this.upClosePos(), GameGlobal.modelMidFestival.off(ModelMidFestival.MSG_RABBIT_DICE, this.updice, this), GameGlobal.modelMidFestival.off(ModelMidFestival.MSG_RABBIT_UPDATE, this.update, this), GameGlobal.modelMidFestival.off(ModelMidFestival.MSG_RABBIT, this.checkjlRed, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.upXH, this)
    }, e.prototype.update = function () {
        this.lbnum.text = Vo_RabbitItem["catch"].toString();
        var t = ViewFestRabbitItem.Map[Vo_RabbitItem.lastsel];
        t && (t.scaleX = t.scaleY = 1), t = ViewFestRabbitItem.Map[Vo_RabbitItem.sel], t && (t.scaleX = t.scaleY = 1.2);
        var e = Vo_RabbitItemjl.Map;
        for (var i in e) {
            var o = e[i];
            if (2 != o.state && o.cfg.sl <= Vo_RabbitItem["catch"]) {
                GameGlobal.modelMidFestival.CG4013();
                break
            }
        }
    }, e.prototype.checkjlRed = function () {
        this.redjl.visible = !1;
        var t = Vo_RabbitItemjl.Map;
        for (var e in t) {
            var i = t[e];
            1 == i.state && (this.redjl.visible = !0)
        }
    }, e.prototype.updice = function () {
        var t = this;
        this.imgdice.visible = !1, this.btnxh0.touchEnabled = this.btnxh1.touchEnabled = !1, EffectMgr.addEff("uieff/dice", this.effGrp, 0, -100, 500, 500), setTimeout(function () {
            t.isopen && (t.imgdice.visible = !0, t.imgdice.source = "midFestAtlas_json.s" + Vo_RabbitItem.nowNum, GameGlobal.tick.addInterv(t.callback, 300, t))
        }, 500)
    }, e.prototype.callback = function (t) {
        Vo_RabbitItem.lastsel += 1, Vo_RabbitItem.lastsel > 30 && (Vo_RabbitItem.lastsel -= 30);
        var e = Vo_RabbitItem.lastsel,
            i = ViewFestRabbitItem.Map[e];
        if (i) {
            i.scaleX = i.scaleY = 1.2;
            var o = e - 1;
            0 == o && (o = 30);
            var n = ViewFestRabbitItem.Map[o];
            n && (n.scaleX = n.scaleY = 1)
        }
        if (e == Vo_RabbitItem.sel) {
            Vo_RabbitItem.lastsel = Vo_RabbitItem.sel, GameGlobal.tick.removeInterv(t.callback, t), t.btnxh0.touchEnabled = t.btnxh1.touchEnabled = !0, Vo_RabbitItem.hidebubb = !1;
            var a = IconUtil.getIconUrl(i.data.icon);
            ViewText.iconText(a, "获得" + i.data.name + "*" + i.data.count)
        }
    }, e.prototype.upClosePos = function () {
        var t = Vo_RabbitItem.lastsel,
            e = ViewFestRabbitItem.Map[t];
        e && (e.scaleX = e.scaleY = 1)
    }, e.prototype.upXH = function () {
        var t = CFG_Param.LIB[22].key,
            e = ConfigHelp.makeVoList(t)[0],
            i = GameGlobal.modelBag.getItemCount(e.id);
        this.gridxh0.data = e, this.gridxh0.lbCount.visible = !1;
        var o = i >= e.count ? i + "/" + e.count : HtmlUtil.color(i, "#ff0000") + "/" + e.count;
        this.lbxh0.textFlow = HtmlUtil.parse(o);
        var n = CFG_Param.LIB[23].key,
            a = Util.parseIntStr(n)[2];
        this.lbxh1.text = a.toString()
    }, e.prototype.initItem = function () {
        if (!ViewFestRabbitItem.Map) {
            ViewFestRabbitItem.Map = {};
            var t = 8,
                e = CFG_MidFestival.LIB_RABBIT;
            for (var i in e) {
                var o = e[i],
                    n = ViewFestRabbitItem.Map[i];
                n || (n = new ViewFestRabbitItem, ViewFestRabbitItem.Map[i] = n);
                var a = n.vid = o.id;
                7 >= a ? (n.x = (a - 1) * (n.width + t), n.y = 0) : a > 7 && 11 >= a ? (n.x = 6 * (n.width + t), n.y = (a - 7) * (n.height + t)) : 12 == a ? (n.x = 5 * (n.width + t), n.y = 4 * (n.height + t)) : a > 12 && 15 >= a ? (n.x = 4 * (n.width + t), n.y = (15 - a + 2) * (n.height + t)) : 16 == a ? (n.x = 3 * (n.width + t), n.y = 2 * (n.height + t)) : a > 16 && 22 >= a ? (n.x = 2 * (n.width + t), n.y = (a - 17 + 2) * (n.height + t)) : 23 == a ? (n.x = n.width + t, n.y = 7 * (n.height + t)) : a > 23 && 30 >= a && (n.x = 0, n.y = (30 - a + 1) * (n.height + t)), DisplayUtil.addBy(n, this.container);
                var s = ConfigHelp.makeVoList(o.jl)[0];
                n.data = s
            }
        }
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(27);
        if (e) {
            var i = e.getChildByID(57);
            if (!i) return void t.closeHandler();
            var o = i.getRemainSec();
            0 > o && (ViewText.text("活动已结束"), t.closeHandler())
        } else t.closeHandler()
    }, e
}(BaseEUIView);
__reflect(ViewFestRabbit.prototype, "ViewFestRabbit");
var ViewFestRabbitItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.skinName = "ViewFestRabbitItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.anchorOffsetX = this.width / 2, this.anchorOffsetY = this.height / 2
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.grid.enableTip(), this.grid.data = t, 1585 == t.id && this.grid.isShowEff(!0)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            t != this._sel && (this._sel = t, this.grid.selected = t)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(ViewFestRabbitItem.prototype, "ViewFestRabbitItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var Vo_RabbitItem = function () {
    function t() {}
    return t.fristTip = !0, t
}();
__reflect(Vo_RabbitItem.prototype, "Vo_RabbitItem");
var Vo_RabbitItemjl = function () {
    function t() {
        this.state = 0
    }
    return t.init = function () {
        if (!this.Map) {
            this.Map = {}, this.List = [];
            var e = 0,
                i = CFG_MidFestival.LIB_RABBITJY;
            for (var o in i) {
                var n = i[o],
                    a = new t;
                a.index = e, a.id = n.id, a.cfg = n, this.List.push(a), this.Map[a.id] = a, e++
            }
        }
    }, t.getMapLen = function () {
        var t = 0,
            e = CFG_MidFestival.LIB_RABBITJY;
        for (var i in e) t++;
        return t
    }, t
}();
__reflect(Vo_RabbitItemjl.prototype, "Vo_RabbitItemjl");
var Vo_RabbitItemRank = function () {
    function t() {}
    return t.List = [], t
}();
__reflect(Vo_RabbitItemRank.prototype, "Vo_RabbitItemRank");
var CFG_Battle = function () {
    function t() {}
    return t
}();
__reflect(CFG_Battle.prototype, "CFG_Battle");
var MainEntry = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.ctrlList = [], e
    }
    return __extends(e, t), e.prototype.initialize = function () {
        t.prototype.initialize.call(this), this.registerItems();
        for (var e = this.ctrlList.length, i = 0; e > i; i++) {
            var o = this.ctrlList[i];
            o.initialize()
        }
        this.addMsgListeners()
    }, e.prototype.addMsgListeners = function () {
        t.prototype.addMsgListeners.call(this);
        for (var e = this.ctrlList.length, i = 0; e > i; i++) {
            var o = this.ctrlList[i];
            o.addMsgListeners()
        }
    }, e.prototype.dispose = function () {
        for (; this.ctrlList.length > 0;) {
            var t = this.ctrlList.pop();
            this.removeSingletonBy(t), t.removeMsgListeners(), t.dispose()
        }
    }, e.prototype.registerItems = function () {
        var t = this.ctrlList;
        t.push(this.getSingleton(ActivityCtrl)), t.push(this.getSingleton(WDTDinviteCtr)), t.push(this.getSingleton(CampWar.CampWarCtr)), t.push(this.getSingleton(CrossServiceLadder.CrossServiceLadderCtr)), t.push(this.getSingleton(EightYuanGift.EightYuanGiftCtr)), t.push(this.getSingleton(HuobanSkin.HuobanSkinCtr)), t.push(this.getSingleton(FWorld.FWorldCtr)), t.push(this.getSingleton(AwardCtrl)), t.push(this.getSingleton(Cover.Ctr)), t.push(this.getSingleton(FriendBack.FriendBackCtr))
    }, e
}(lwm.mvc.Controller);
__reflect(MainEntry.prototype, "MainEntry");
var CFG_Brocast = function () {
    function t() {}
    return t.getCfgByid = function (t) {
        return Config.getConfig(guangbo_601).get(t)
    }, Object.defineProperty(t, "dic", {
        get: function () {
            return Config.getConfig(guangbo_601)
        },
        enumerable: !0,
        configurable: !0
    }), t
}();
__reflect(CFG_Brocast.prototype, "CFG_Brocast");
var CFG_Buff = function () {
    function t() {}
    return t
}();
__reflect(CFG_Buff.prototype, "CFG_Buff");
var MsgListenerItem = function () {
    function t(t, e, i) {
        this.mIsDisposed = !1, this.listener = t, this.thisObj = e, this.priority = i
    }
    return Object.defineProperty(t.prototype, "isDisposed", {
        get: function () {
            return this.mIsDisposed
        },
        enumerable: !0,
        configurable: !0
    }), t.prototype.dispose = function () {
        this.mIsDisposed = !0, this.listener = null, this.thisObj = null, this.priority = 0
    }, t
}();
__reflect(MsgListenerItem.prototype, "MsgListenerItem", ["IDispose"]);
var MessageDispatcher = function () {
    function t() {
        this.listenerMap = {}, this.changedMap = {}, this.deleteList = new Array, this.mIsDispatching = !1
    }
    return t.prototype.addListener = function (t, e, i, o) {
        void 0 === o && (o = 0), null == this.listenerMap[t] && (this.listenerMap[t] = new Array);
        for (var n = this.listenerMap[t], a = !0, s = n.length, r = 0; s > r; r++) {
            var l = n[r];
            if (!l.isDisposed && l.listener == e) {
                l.priority = o, a = !1;
                break
            }
        }
        a && n.push(new MsgListenerItem(e, i, o)), this.changedMap[t] = !0
    }, t.prototype.removeListener = function (t, e) {
        var i = this.listenerMap[t];
        if (null != i) {
            for (var o = i.length, n = -1, a = 0; o > a; a++) {
                var s = i[a];
                if (s.listener == e) {
                    s.dispose(), n = a;
                    break
                }
            }
            n >= 0 && (this.mIsDispatching ? this.deleteList.push(t) : i.splice(n, 1))
        }
    }, t.prototype.hasListener = function (t, e) {
        if (e) {
            var i = this.listenerMap[t];
            if (null != i)
                for (var o = i.length, n = 0; o > n; n++) {
                    var a = i[n];
                    if (a.listener == e) return !0
                }
            return !1
        }
        return null != this.listenerMap[t]
    }, t.prototype.sortPriority = function (t, e) {
        return e.priority - t.priority
    }, t.prototype.dispatchType = function (t, e, i) {
        void 0 === e && (e = null), void 0 === i && (i = null);
        var o = this.listenerMap[t];
        if (null == o) return !1;
        this.changedMap[t] && (this.changedMap[t] = !1, o.sort(this.sortPriority));
        var n = o.length,
            a = 0;
        null == i && (i = this);
        for (var s = 0; s < o.length; s++) {
            this.mIsDispatching = !0;
            var r = o[s];
            r.isDisposed || (o[a] = r, r.listener.call(r.thisObj, e, i), a++)
        }
        return this.mIsDispatching = !1, n > a && o.splice(a, n - a), this.deleteList.length > 0 && this.deleteDisposedListeners(), !0
    }, t.prototype.deleteDisposedListeners = function () {
        for (; this.deleteList.length > 0;) {
            var t = this.deleteList.pop(),
                e = this.listenerMap[t];
            if (null != e) {
                for (var i = e.length, o = 0, n = 0; i > n; n++) {
                    var a = e[n];
                    a.isDisposed || (e[o] = a, o++)
                }
                i > o && e.splice(o, i - o)
            }
        }
    }, t
}();
__reflect(MessageDispatcher.prototype, "MessageDispatcher");
var ModelNationalDay = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.NaDaySignDay = 1, e.NaDaySignData = {}, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(4102, this.GC4102, this), e.regHand(4104, this.GC4104, this), e.regHand(4122, this.GC4122, this), e.regHand(4124, this.GC4124, this), e.regHand(4126, this.GC4126, this)
    }, e.prototype.GC4070 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte(),
                s = i.readByte(),
                r = Vo_NaDay_mysy_Shop.List[n];
            r || (r = new Vo_NaDay_mysy_Shop, Vo_NaDay_mysy_Shop.List.push(r)), r.id = a, r.cfg = CFG_NationalDay.LIB[a], r.buyNum = s
        }
        for (; n < Vo_NaDay_mysy_Shop.List.length; n++) {
            var l = Vo_NaDay_mysy_Shop.List.splice(n, 1);
            l = null
        }
        t.notify(e.MSG_UPDATE_SHOP)
    }, e.prototype.CG4071 = function () {
        var t = this.getBytes();
        this.sendSocket(4071, t)
    }, e.prototype.GC4072 = function (t, i) {
        var o = i.readByte();
        t.isget = 1 == o;
        for (var n = i.readShort(), a = 0; n > a; a++) {
            var s = Vo_NaDay_mysy_PHB.List[a];
            s || (s = new Vo_NaDay_mysy_PHB, Vo_NaDay_mysy_PHB.List.push(s)), s.name = i.readUTF(), s.num = i.readShort()
        }
        Vo_NaDay_mysy_PHB.myrank = i.readInt(), t.notify(e.MSG_UPDATE)
    }, e.prototype.CG4073 = function () {
        var t = this.getBytes();
        this.sendSocket(4073, t)
    }, e.prototype.GC4074 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = Vo_NaDay_mysy_Record.List[n];
            a || (a = new Vo_NaDay_mysy_Record, Vo_NaDay_mysy_Record.List.push(a)), a.type = i.readByte(), a.name = i.readUTF(), a.shopid = i.readShort(), a.shopnum = i.readShort(), a.date = i.readInt()
        }
        t.notify(e.MSG_UPDATE_RECORD)
    }, e.prototype.CG4075 = function (t, e) {
        var i = this.getBytes();
        i.writeLong(t), i.writeByte(e), this.sendSocket(4075, i)
    }, e.prototype.GC4076 = function (t, i) {
        var o = 0,
            n = i.readByte();
        if (1 == n) {
            var a = i.readByte(),
                s = Vo_NaDay_mysy_Shop.getVoByid(a);
            s && (s.buyNum++, o = s.cfg.qmd, ViewText.text("增加好感度" + o)), t.notify(e.MSG_UPDATE)
        } else if (2 == n) ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        });
        else {
            var r = ["", "", "", "未选择好友", "选择的好友没有互相关注", "购买数量超过限购", "该好友受赠次数已达最大值，请明日再来"];
            ViewText.text(r[n])
        }
    }, e.prototype.CG4077 = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(4077, e)
    }, e.prototype.GC4078 = function (t, i) {
        var o = i.readByte();
        t.notify(e.MSG_UPDATE_CHOOSE, o)
    }, e.prototype.CG4079 = function () {
        var t = this.getBytes();
        this.sendSocket(4079, t)
    }, e.prototype.GC4080 = function (t, i) {
        var o = i.readByte();
        if (1 == o) t.isget = !0, t.notify(e.MSG_UPDATE);
        else {
            var n = ["", "", "条件未达", "已领取"];
            ViewText.text(n[o])
        }
    }, e.prototype.CG4081 = function () {
        var t = this.getBytes();
        this.sendSocket(4081, t)
    }, e.prototype.GC4082 = function (t, e) {
        var i = e.readByte();
        2 == i && ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE), GameGlobal.layerMgr.close(UIConst.NATIONALDAY_MYSY)
        })
    }, e.prototype.CG4101 = function () {
        var t = this.getBytes();
        this.sendSocket(4101, t)
    }, e.prototype.GC4102 = function (t, i) {
        t.NaDaySignDay = i.readByte();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = n + 1,
                s = i.readByte();
            t.NaDaySignData[a] = s
        }
        t.notify(e.MSG_UPDATE)
    }, e.prototype.CG4103 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(4103, e)
    }, e.prototype.GC4104 = function (t, i) {
        var o = i.readByte(),
            n = i.readByte();
        1 == o && (t.NaDaySignData[n] = 2, t.notify(e.MSG_UPDATE))
    }, e.prototype.CG4111 = function () {
        var t = this.getBytes();
        this.sendSocket(4111, t)
    }, e.prototype.GC4112 = function (t, i) {
        for (var o = Vo_NationalDay_ssbz, n = i.readShort(), a = 0; n > a; a++) {
            for (var s = i.readShort(), r = [], l = 0, h = i.readShort(); h > l; l++) {
                var c = {};
                c.index = i.readByte(), c.state = i.readByte(), r.push(c)
            }
            var p = i.readByte();
            o.update(s, r, p)
        }
        o.updateLocks(i.readByte()), t.notify(e.MSG_UPDATE)
    }, e.prototype.CG4113 = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeByte(e), this.sendSocket(4113, i)
    }, e.prototype.GC4114 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = ConfigHelp.parseServItems(e);
            GameGlobal.layerMgr.open(UIConst.NATIONALDAY_SSBZJL, o)
        } else if (100 == i) {
            var o = ConfigHelp.parseServItems(e);
            VBDGetAward.fistAwardGet = !0, GameGlobal.layerMgr.open(UIConst.NATIONALDAY_SSBZJL, o)
        } else ViewText.text([null, null, "钥匙不足，无法开启", "背包已满", "该箱子已经开启过了"][i]), 3 == i && GameGlobal.layerMgr.open(UIConst.EQUIPRL)
    }, e.prototype.CG4115 = function () {
        var t = this.getBytes();
        this.sendSocket(4115, t)
    }, e.prototype.GC4116 = function (t, i) {
        Vo_NationalDay_ssbz.record || (Vo_NationalDay_ssbz.record = []), Vo_NationalDay_ssbz.record.length = 0;
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = {};
            a.time = i.readInt();
            var s = i.readByte(),
                r = i.readInt(),
                l = i.readShort(),
                h = ConfigHelp.makeVoList(s + "," + r + "," + l)[0];
            a.award = h, Vo_NationalDay_ssbz.record.push(a)
        }
        t.notify(e.MSG_UPDATE_RECORD)
    }, e.prototype.CG4121 = function () {
        var t = this.getBytes();
        this.sendSocket(4121, t)
    }, e.prototype.GC4122 = function (t, i) {
        var o = Vo_NationalDay_xl,
            n = i.readByte(),
            a = i.readShort();
        o.update(a, n), o.leiJiAwardGotSt = i.readByte(), o.toDayCZValue = i.readInt(), o.leiJiCZDays = i.readInt(), t.notify(e.MSG_UPDATE)
    }, e.prototype.CG4123 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(4123, e)
    }, e.prototype.GC4124 = function (t, e) {
        var i = e.readByte();
        1 == i ? t.CG4121() : (ViewText.text([null, null, "该奖励已领取", "充值金额未达标", "背包已满"][i]), 4 == i && ViewAlert.show("背包已满，是否清理背包？", function () {
            GameGlobal.layerMgr.open(UIConst.EQUIPRL)
        }))
    }, e.prototype.CG4125 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(4125, e)
    }, e.prototype.GC4126 = function (t, e) {
        var i = e.readByte();
        1 == i ? t.CG4121() : (ViewText.text([null, null, "该奖励已领取", "充值天数不够", "背包已满"][i]), 4 == i && ViewAlert.show("背包已满，是否清理背包？", function () {
            GameGlobal.layerMgr.open(UIConst.EQUIPRL)
        }))
    }, e.MSG_UPDATE = "MSG_UPDATE", e.MSG_UPDATE_RECORD = "MSG_UPDATE_RECORD", e.MSG_UPDATE_SHOP = "MSG_UPDATE_SHOP", e.MSG_UPDATE_CHOOSE = "MSG_UPDATE_CHOOSE", e.redMap = {
        0: !0,
        1: !0,
        2: !0,
        3: !0,
        4: !0,
        5: !0
    }, e
}(BaseModel);
__reflect(ModelNationalDay.prototype, "ModelNationalDay");
var VNationalDay = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VNationalDaySkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this,
            e = GameGlobal.layerMgr,
            i = UIConst;
        e.reg(i.NATIONALDAY_MYSY, VNationalDay_mysy, e.UI_MainMiddle, 1), e.reg(i.NATIONALDAY_SIGN, VNationalDay_sign, e.UI_MainMiddle, 1), e.reg(i.NATIONALDAY_SSBZ, VNationalDay_ssbz, e.UI_MainMiddle, 1), e.reg(i.NATIONALDAY_XL, VNationalDay_xl, e.UI_MainMiddle, 1);
        for (var o = 0; 5 >= o; o++) {
            var n = this["red" + o];
            n.visible = !1;
            var a = this["btn" + o];
            DisplayUtil.popBtnStyle(a), a.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
        }
        this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            t.closeHandler()
        }, this), this.rect.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            t.closeHandler()
        }, this)
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btn0:
                CFG_COMMOND.isOpen(UIConst.MIDFESTBOSS, !0) && (GameGlobal.layerMgr.open(UIConst.BOSSPAGE, 3), ModelNationalDay.redMap[0] = !1);
                break;
            case this.btn1:
                CFG_COMMOND.isOpen(UIConst.NATIONALDAY_SIGN, !0) && (GameGlobal.layerMgr.open(UIConst.NATIONALDAY_SIGN), ModelNationalDay.redMap[1] = !1);
                break;
            case this.btn2:
                CFG_COMMOND.isOpen(1113, !0) && (GameGlobal.layerMgr.open(UIConst.NATIONALDAY_SSBZ), ModelNationalDay.redMap[2] = !1);
                break;
            case this.btn3:
                CFG_COMMOND.isOpen(UIConst.NATIONALDAY_MYSY, !0) && (GameGlobal.layerMgr.open(UIConst.NATIONALDAY_MYSY), ModelNationalDay.redMap[3] = !1);
                break;
            case this.btn4:
                CFG_COMMOND.isOpen(1114, !0) && (GameGlobal.layerMgr.open(UIConst.NATIONALDAY_XL), ModelNationalDay.redMap[4] = !1);
                break;
            case this.btn5:
                CFG_COMMOND.isOpen(UIConst.HYDT, !0) && (GameGlobal.layerMgr.open(UIConst.HYDT), ModelNationalDay.redMap[5] = !1)
        }
        this.checkRed()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.checkRed(), GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.checkRed, this), GameGlobal.modelNationalDay.on(ModelNationalDay.MSG_UPDATE, this.checkRed, this), GameGlobal.modelMidFestival.on(ModelMidFestival.msg_datas_boss, this.checkRed, this), GameGlobal.modelNationalDay.CG4101(), CFG_COMMOND.isOpen(UIConst.NATIONALDAY_SIGN) && GameGlobal.modelNationalDay.CG4101(), CFG_COMMOND.isOpen(UIConst.MIDFESTBOSS) && GameGlobal.modelMidFestival.CG3971(), CFG_COMMOND.isOpen(CFG_COMMOND.SDCZ) && GameGlobal.modelNationalDay.CG4121()
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.tick, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.checkRed, this), GameGlobal.modelNationalDay.off(ModelNationalDay.MSG_UPDATE, this.checkRed, this), GameGlobal.modelMidFestival.off(ModelMidFestival.msg_datas_boss, this.checkRed, this)
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(25);
        e || t.closeHandler()
    }, e.prototype.checkRed = function () {
        var t = ModelNationalDay.redMap;
        for (var e in t) {
            var i = t[e],
                o = this["red" + e];
            "3" == e ? o.visible = i || this.checkmysyRed() : "1" == e ? o.visible = i || this.checksignRed() : "0" == e ? o.visible = i || this.checkbossRed() : "4" == e ? o.visible = i || this.checkxlRed() : o.visible = i
        }
    }, e.prototype.checkmysyRed = function () {
        var t = GameGlobal.modelNationalDay,
            e = Util.parseIntStr(CFG_Param.LIB[27].key),
            i = e[2],
            o = e[1],
            n = GameGlobal.modelBag.getItemCount(o);
        return !t.isget && n >= i ? !0 : !1
    }, e.prototype.checksignRed = function () {
        var t = GameGlobal.modelNationalDay.NaDaySignData;
        for (var e in t) {
            var i = t[e];
            if (1 == i) return !0
        }
        return !1
    }, e.prototype.checkbossRed = function () {
        if (VoFestBoss.remainTZCount <= 0) return !1;
        for (var t = VoFestBoss.bossArr, e = 0; e < t.length; e++) {
            var i = t[e];
            if (1 == i.state) return !0
        }
        return !1
    }, e.prototype.checkxlRed = function () {
        var t = Vo_NationalDay_xl.getDataAsListSrc(Vo_NationalDay_xl.validCfgId)[0];
        return t ? 1 == t.gotState : !1
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VNationalDay.prototype, "VNationalDay");
var VNationalDay_xl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VNationalDay_xlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.container.itemRenderer = VNationalDay_xlItem, this.container.dataProvider = this.sourceData = new eui.ArrayCollection, Vo_NationalDay_xl.initLib()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelNationalDay.on(ModelNationalDay.MSG_UPDATE, this.onUpdate, this), GameGlobal.modelNationalDay.CG4121()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelNationalDay.off(ModelNationalDay.MSG_UPDATE, this.onUpdate, this)
    }, e.prototype.onUpdate = function () {
        DisplayUtil.fillDataAC(this.sourceData, Vo_NationalDay_xl.getDataAsListSrc(Vo_NationalDay_xl.validCfgId))
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.titlebg, "weekender_json.titlebg"), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.titlebg, null), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(VNationalDay_xl.prototype, "VNationalDay_xl");
var VNationalDay_xlItem = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.gridArr = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "VNationalDay_xlItemSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnHandLJC.label = "领取", DisplayUtil.popBtnStyle(this.btnHandEry), this.btnHandEry.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHandLJC.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.role = UIRole.create(), this.role.scaleX = this.role.scaleY = 1.3, this.mxContainer.addChild(this.role)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        if (0 != e.enabled) switch (e) {
            case this.btnHandEry:
                GameGlobal.modelNationalDay.CG4123(this.data.cfg.id);
                break;
            case this.btnHandLJC:
                GameGlobal.modelNationalDay.CG4125(Vo_NationalDay_xl.leiJiCZDays)
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = Vo_NationalDay_xl;
            this.txtHasLJCZ.text = "已累计充值" + e.leiJiCZDays + "天";
            var i = e.toDayCZValue,
                o = t.cfg,
                n = o.mrcz - i;
            if (this.txtEryRMB.textFlow = HtmlUtil.parse(HtmlUtil.color("双11期间每日充值", "#a83503") + o.mrcz + HtmlUtil.color("元领豪礼", "#a83503")), n > 0) this.txtCZGot.text = "今日再充值" + n + "元可领", this.iconNotice.visible = !1, this.btnHandEry.visible = !0;
            else switch (this.btnHandEry.visible = !0, t.gotState) {
                case 0:
                    this.txtCZGot.text = "今日奖励", this.iconNotice.visible = !1;
                    break;
                case 1:
                    this.txtCZGot.text = "今日可领奖励", this.iconNotice.visible = !0;
                    break;
                case 2:
                    this.txtCZGot.text = "今日奖励已领", this.iconNotice.visible = !1, this.btnHandEry.visible = !1
            }
            if (n = o.ts - e.leiJiCZDays, this.txtEryRMB2.text = o.mrcz + "", this.txtLJDay.text = o.ts + "", n > 0) this.btnHandLJC.visible = !1;
            else switch (this.btnHandLJC.visible = !0, e.leiJiAwardGotSt) {
                case 0:
                    this.btnHandLJC.label = "不可领取", this.btnHandLJC.enabled = !1, this.btnHandLJC.setNoticeVis(!1);
                    break;
                case 1:
                    this.btnHandLJC.label = "领取", this.btnHandLJC.enabled = !0, this.btnHandLJC.setNoticeVis(!0);
                    break;
                case 2:
                    this.btnHandLJC.label = "已领取", this.btnHandLJC.enabled = !1, this.btnHandLJC.setNoticeVis(!1)
            }
            ConfigHelp.makeStrGrids(o.mrjl, this.gridArr, 0, 0, this.gridContainer, !0);
            var a, s = parseInt(CFG_NationalDay.LIB4[1].ljjl.split(",")[1]);
            for (var r in CFG_PeiYang.LIB_HORSESKIN) {
                var l = CFG_PeiYang.LIB_HORSESKIN[r];
                l.dj == s && (a = l.id)
            }
            this.role.play(700), this.role.setHorse(a), this.role.setWay(3), this.role.validParts(), this.txtName.text = CFG_Item.LIB[s].name
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.$removeFromStage = function () {
        this.role.stopAndClear()
    }, e
}(ItemBase);
__reflect(VNationalDay_xlItem.prototype, "VNationalDay_xlItem");
var Vo_NationalDay_xl = function () {
    function t() {
        this.gotState = 0
    }
    return t.initLib = function () {
        var e = CFG_NationalDay.LIB4;
        for (var i in e) {
            var o = new t;
            o.cfg = e[i], o.gotState = 0, this.map.add(o, i)
        }
    }, t.update = function (t, e) {
        var i = this.map.getByKey(t);
        i && (i.gotState = e, this.validCfgId = t)
    }, t.getDataAsListSrc = function (t) {
        var e = this.map.getByKey(t);
        return [e]
    }, t.notice = function () {
        var t = this.map.getByKey(this.validCfgId);
        if (t) {
            var e = this.map.getByKey(this.validCfgId).cfg,
                i = e.mrcz - this.toDayCZValue,
                o = 0 >= i && 1 == t.gotState;
            return i = e.ts - this.leiJiCZDays, o = o || 0 >= i && 1 == this.leiJiAwardGotSt
        }
        return !1
    }, t.map = new CommondMap, t.leiJiAwardGotSt = 1, t.toDayCZValue = 0, t.validCfgId = 0, t
}();
__reflect(Vo_NationalDay_xl.prototype, "Vo_NationalDay_xl");
var VNationalDay_sign = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.items = [], e.gridArr = [], e.curDay = 1, e.skinName = "VNationalDay_signSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this.base;
        this.addCloseListen(t.btnClose).addCloseListen(t.btnReturn);
        for (var e = 1; 7 >= e; e++) {
            var i = this["s" + e];
            i._data = CFG_NationalDay.LIB2[e], i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onItemT, this), this.items.push(i)
        }
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btn.label = "领取"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.titlebg, "nationalDay_title_BG_png"), IconUtil.setIconSrc(this.title, "bg1_jpg"), this.setSel(this.curDay), GameGlobal.tick.addInterv(this.tickTime, 1e3, this), GameGlobal.modelNationalDay.on(ModelNationalDay.MSG_UPDATE, this.update, this), GameGlobal.modelNationalDay.CG4101()
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.titlebg, null), IconUtil.setIconSrc(this.title, null), GameGlobal.tick.removeInterv(this.tickTime, this), GameGlobal.modelNationalDay.off(ModelNationalDay.MSG_UPDATE, this.update, this), ConfigHelp.clearGrids(this.gridArr), this.setSel(-1)
    }, e.prototype.update = function () {
        this.curDay = GameGlobal.modelNationalDay.NaDaySignDay, this.setSel(this.curDay);
        for (var t = 1; 7 >= t; t++) {
            var e = this["s" + t];
            e.update()
        }
        this.updateCur()
    }, e.prototype.setSel = function (t) {
        for (var e = 1; 7 >= e; e++) {
            var i = this["s" + e];
            i.selected = t == e
        }
    }, e.prototype.onItemT = function (t) {
        var e = this.items.indexOf(t.currentTarget);
        e >= 0 && (this.curDay = e + 1, this.updateCur(), this.setSel(this.curDay))
    }, e.prototype.updateCur = function () {
        var t = CFG_NationalDay.LIB2[this.curDay];
        t && (this.lb.text = Lang.reTxt("第{0}天奖励", this.curDay), ConfigHelp.makeStrGrids(t.reward, this.gridArr, 0, 0, this.gridGrp));
        var e = GameGlobal.modelNationalDay.NaDaySignData[this.curDay];
        1 == e ? (this.btn.enabled = !0, this.btn.label = "领取") : 2 == e ? (this.btn.enabled = !1, this.btn.label = "已领取") : (this.btn.enabled = !1, this.btn.label = "未达条件"), this.btn.setNoticeVis(this.btn.enabled)
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelNationalDay.NaDaySignData[this.curDay];
        1 == t ? GameGlobal.modelNationalDay.CG4103(this.curDay) : 2 == t ? ViewText.text("已领取,不能重复领取") : ViewText.text("该天未登录,不能领取")
    }, e.prototype.tickTime = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(25);
        if (e) {
            var i = e.getChildByID(60);
            if (i) {
                var o = i.getRemainSec();
                if (o > 0) return
            }
        }
        t.closeHandler()
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VNationalDay_sign.prototype, "VNationalDay_sign");
var VNationalDay_signItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.skinName = "ActHFSignItem", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {}, e.prototype.update = function () {
        IconUtil.setIconSrc(this.imgDay, "hfSignD" + this._data.day + "_png");
        var t = GameGlobal.modelNationalDay.NaDaySignData[this._data.day];
        1 == t ? (this.imgSign.visible = !1, this.imgRed.visible = !0) : 2 == t ? (this.imgSign.visible = !0, this.imgRed.visible = !1) : (this.imgSign.visible = !1, this.imgRed.visible = !1)
    }, Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel != t && (this._sel = t, t ? this.filters = Color.getRedFilters() : this.filters = null)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.$removeFromStage = function () {
        IconUtil.setIconSrc(this.imgDay)
    }, e
}(eui.Component);
__reflect(VNationalDay_signItem.prototype, "VNationalDay_signItem");
var VNationalDay_mysy = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VNationalDay_mysySkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this.base;
        this.addCloseListen(t.btnClose).addCloseListen(t.btnReturn), this.lb.textFlow = HtmlUtil.parse("每购买一个礼物,您和您所选择的好友都可获得一份,\n还有" + HtmlUtil.colorSize("鸭鸭卡", "#ba3202", 24) + "相送哦！");
        var e = GameGlobal.layerMgr;
        e.reg(UIConst.NATIONALDAY_MYSYGIFT, VNationalDay_mysyGift, e.UI_Message), e.reg(UIConst.NATIONALDAY_MYSYAWARD, VNationalDay_mysyPHBjl, e.UI_Message), this.shopdata = new eui.ArrayCollection, this.shoplist.itemRenderer = VNationalDay_mysyShopItem, this.shoplist.dataProvider = this.shopdata, this.phbdata = new eui.ArrayCollection, this.phblist.itemRenderer = VNationalDay_mysyPHBItem, this.phblist.dataProvider = this.phbdata, this.frienddata = new eui.ArrayCollection, this.friendlist.itemRenderer = VQiXiFriendItem, this.friendlist.dataProvider = this.frienddata, DisplayUtil.popBtnStyle(this.btnSelFriend), DisplayUtil.popBtnStyle(this.btnGetAward), DisplayUtil.popBtnStyle(this.btnGift), DisplayUtil.popBtnStyle(this.btnRefresh), this.lbckjl.textFlow = HtmlUtil.underLine("奖励"), this.btnGetAward.addEventListener(egret.TouchEvent.TOUCH_TAP, this.getawardT, this), this.btnSelFriend.addEventListener(egret.TouchEvent.TOUCH_TAP, this.selfriendT, this), this.btnGift.addEventListener(egret.TouchEvent.TOUCH_TAP, this.giftT, this), this.lbckjl.addEventListener(egret.TouchEvent.TOUCH_TAP, this.ckjlT, this), this.btnRefresh.addEventListener(egret.TouchEvent.TOUCH_TAP, this.refreshT, this), this.friendlist.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.friendT, this)
    }, e.prototype.refreshT = function () {
        GameGlobal.modelNationalDay.CG4081()
    }, e.prototype.friendT = function (t) {
        var i = t.item;
        i && (e.selFri = i, this.lbname.text = i ? i.name : "", GameGlobal.modelNationalDay.CG4077(i.id))
    }, e.prototype.ckjlT = function () {
        GameGlobal.layerMgr.open(UIConst.NATIONALDAY_MYSYAWARD)
    }, e.prototype.giftT = function () {
        GameGlobal.layerMgr.open(UIConst.NATIONALDAY_MYSYGIFT)
    }, e.prototype.getawardT = function () {
        var t = GameGlobal.modelNationalDay,
            e = Util.parseIntStr(CFG_Param.LIB[27].key),
            i = e[2],
            o = e[1],
            n = GameGlobal.modelBag.getItemCount(o);
        t.isget ? ViewText.text("已兑换,请勿重复兑换") : n >= i ? GameGlobal.modelNationalDay.CG4079() : ViewText.text("鸭鸭卡不足，无法兑换！")
    }, e.prototype.selfriendT = function () {
        this.friGrp.visible = !this.friGrp.visible, this.friGrp.visible && GameGlobal.modelFriend.CG_FriendData(1)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.titlebg, "nationalDay_title_BG_png"), IconUtil.setIconSrc(this.bg1, "nation_jz_BG_png"), IconUtil.setIconSrc(this.bg2, "nation_yz_BG_png"), this.friGrp.visible = !1, this.lbxh.text = Util.parseIntStr(CFG_Param.LIB[26].key)[2], this.update(), GameGlobal.tick.addInterv(this.tickTime, 1e3, this), GameGlobal.modelNationalDay.on(ModelNationalDay.MSG_UPDATE, this.update, this), GameGlobal.modelNationalDay.on(ModelNationalDay.MSG_UPDATE_SHOP, this.upShop, this), GameGlobal.modelNationalDay.on(ModelNationalDay.MSG_UPDATE_CHOOSE, this.dealretT, this), GameGlobal.modelFriend.on(ModelFriend.MSG_FLIST, this.upFriend, this), GameGlobal.modelNationalDay.CG4071()
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.titlebg, null), IconUtil.setIconSrc(this.bg1), IconUtil.setIconSrc(this.bg2), GameGlobal.tick.removeInterv(this.tickTime, this), GameGlobal.modelNationalDay.off(ModelNationalDay.MSG_UPDATE, this.update, this), GameGlobal.modelNationalDay.off(ModelNationalDay.MSG_UPDATE_SHOP, this.upShop, this), GameGlobal.modelNationalDay.off(ModelNationalDay.MSG_UPDATE_CHOOSE, this.dealretT, this), GameGlobal.modelFriend.off(ModelFriend.MSG_FLIST, this.upFriend, this)
    }, e.prototype.update = function () {
        this.upShop(), this.upAward(), this.upPHB();
        var t = 0 == Vo_NaDay_mysy_PHB.myrank ? "未上榜" : Vo_NaDay_mysy_PHB.myrank;
        this.lbrank.text = "我的排名：" + t
    }, e.prototype.upAward = function () {
        var t = Util.parseIntStr(CFG_Param.LIB[27].key),
            e = t[2],
            i = GameGlobal.modelBag.getItemCount(t[1]);
        this.lbnum.textFlow = HtmlUtil.parse(i + HtmlUtil.color("/" + e, "#ea2b2b"));
        var o = GameGlobal.modelNationalDay;
        if (o.isget) var n = "已兑换",
            a = !1,
            s = !1;
        else s = i >= e, n = "兑换", a = !0;
        this.btnGetAward.label = n, this.btnGetAward.enabled = a, this.btnGetAward.setNoticeVis(s);
        var r = GameGlobal.modelAct.actData.getChildByID(22);
        if (r) {
            var l = r.getBtn();
            l.setNoticVis(s)
        }
    }, e.prototype.upShop = function () {
        DisplayUtil.fillDataAC(this.shopdata, Vo_NaDay_mysy_Shop.List)
    }, e.prototype.upPHB = function () {
        DisplayUtil.fillDataAC(this.phbdata, Vo_NaDay_mysy_PHB.List)
    }, e.prototype.upFriend = function () {
        for (var t = [], e = GameGlobal.modelFriend.friendList, i = 0; i < e.length; i++) {
            var o = e[i];
            1 == o.friendSt && t.push(o)
        }
        this.lbtipfri.visible = 0 == t.length, DisplayUtil.fillDataAC(this.frienddata, t)
    }, e.prototype.dealretT = function (t) {
        1 == t ? this.friGrp.visible = !1 : 2 == t && (ViewText.text("该好友受赠次数已达最高值，今日无法赠送，请明日再来！"), this.friendlist.selectedIndex = -1, this.lbname.text = "", e.selFri = null)
    }, e.prototype.tickTime = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(25);
        if (e) {
            var i = e.getChildByID(61);
            if (i) {
                var o = i.getRemainSec();
                if (o > 0) return
            }
        }
        t.closeHandler()
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VNationalDay_mysy.prototype, "VNationalDay_mysy");
var VNationalDay_mysyGift = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiGiftSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.data = new eui.ArrayCollection, this.list.itemRenderer = VNationalDay_mysyGiftItem, this.list.dataProvider = this.data
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "qixiyouni_gift_BG_png"), GameGlobal.modelNationalDay.on(ModelNationalDay.MSG_UPDATE_RECORD, this.update, this), GameGlobal.modelNationalDay.CG4073()
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.bg, null), GameGlobal.modelNationalDay.off(ModelNationalDay.MSG_UPDATE_RECORD, this.update, this)
    }, e.prototype.update = function () {
        DisplayUtil.fillDataAC(this.data, Vo_NaDay_mysy_Record.List)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VNationalDay_mysyGift.prototype, "VNationalDay_mysyGift");
var VNationalDay_mysyGiftItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiGiftItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.lbtime.text = DateUtil.getYMDHM(t.date);
            var e = CFG_Item.LIB[t.shopid],
                i = e ? e.name : "";
            if (1 == t.type) var o = HtmlUtil.parse("赠送给" + HtmlUtil.color(t.name, "#ab67cc") + HtmlUtil.color(i + "*" + t.shopnum, "#a83503"));
            else o = HtmlUtil.parse("收到" + HtmlUtil.color(t.name, "#ab67cc") + "赠送的" + HtmlUtil.color(i + "*" + t.shopnum, "#a83503"));
            this.lbdes.textFlow = o
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VNationalDay_mysyGiftItem.prototype, "VNationalDay_mysyGiftItem");
var VNationalDay_mysyPHBItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiPHBItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.lbname.text = t.name, this.lbnum.text = t.num.toString()
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VNationalDay_mysyPHBItem.prototype, "VNationalDay_mysyPHBItem");
var VNationalDay_mysyPHBjl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiPHBjlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.data = new eui.ArrayCollection, this.list.itemRenderer = VNationalDay_mysyPHBjlItem, this.list.dataProvider = this.data, this.base.title = "加油榜排行奖励", this.txt1.text = "1.买一送伊获得的鸭鸭卡数量为加油榜的加油积分（其他活动的鸭鸭卡数量不计入在内）\n2.活动结束后，加油榜前10名奖励将通过邮件发送"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.update = function () {
        Vo_NaDay_mysy_Jl.create(), DisplayUtil.fillDataAC(this.data, Vo_NaDay_mysy_Jl.List)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VNationalDay_mysyPHBjl.prototype, "VNationalDay_mysyPHBjl");
var VNationalDay_mysyPHBjlItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "ChengZhuZWJLItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.btnGet.visible = !1, this.scrol.width = 416
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.bg.source = t.index % 2 == 0 ? "CM2_json.bg1" : "CM2_json.bg2", this.imgTitle.source = "qxyl_json.no" + t.cfg.id, ConfigHelp.makeStrGrids(t.cfg.pmjl, this.grids, 0, 0, this.group, !0)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VNationalDay_mysyPHBjlItem.prototype, "VNationalDay_mysyPHBjlItem");
var VNationalDay_mysyShopItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiShopItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btn.label = " ", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.grid.enableTip(), this.icon.source = IconUtil.getIconUrlById(1794)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t;
            var e = ConfigHelp.makeVoList(t.cfg.sp)[0];
            this.grid.data = e, this.grid.bg.source = "";
            var i = Util.parseIntStr(t.cfg.hrksl)[2];
            this.lbitemnum.text = "x" + i, this.lbxgnum.textFlow = HtmlUtil.parse(t.buyNum.toString() + "/" + t.cfg.xzgm);
            var o = Util.parseIntStr(t.cfg.xh),
                n = 32 == o[0] ? "MainScreen_json.byl" : "MainScreen_json.bm_yb";
            this.imgxh.source = n, this.lbxhnum.text = o[2].toString()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onT = function () {
        if (!VNationalDay_mysy.selFri) return void ViewText.text("请先选择赠送对象，再进行购买！");
        var t = Util.parseIntStr(this.vo.cfg.xh);
        return 32 == t[0] && GameGlobal.modelRole.voMine.bYuanbao < t[2] ? void ViewText.text("绑定元宝不足") : void GameGlobal.modelNationalDay.CG4075(VNationalDay_mysy.selFri.id, this.vo.id)
    }, e
}(eui.ItemRenderer);
__reflect(VNationalDay_mysyShopItem.prototype, "VNationalDay_mysyShopItem");
var Vo_NaDay_mysy_PHB = function () {
    function t() {}
    return t.List = [], t.myrank = 0, t
}();
__reflect(Vo_NaDay_mysy_PHB.prototype, "Vo_NaDay_mysy_PHB");
var Vo_NaDay_mysy_Shop = function () {
    function t() {
        this.buyNum = 0
    }
    return t.getVoByid = function (t) {
        for (var e = this.List, i = 0; i < e.length; i++) {
            var o = e[i];
            if (o.id == t) return o
        }
        return null
    }, t.List = [], t
}();
__reflect(Vo_NaDay_mysy_Shop.prototype, "Vo_NaDay_mysy_Shop");
var Vo_NaDay_mysy_Record = function () {
    function t() {}
    return t.List = [], t
}();
__reflect(Vo_NaDay_mysy_Record.prototype, "Vo_NaDay_mysy_Record");
var Vo_NaDay_mysy_Jl = function () {
    function t() {}
    return t.create = function () {
        if (!this.List.length) {
            var e = 0,
                i = CFG_NationalDay.LIB1;
            for (var o in i) {
                var n = i[o],
                    a = new t;
                a.cfg = n, a.index = e, this.List.push(a), e++
            }
        }
    }, t.List = [], t
}();
__reflect(Vo_NaDay_mysy_Jl.prototype, "Vo_NaDay_mysy_Jl");
var VNationalDay_ssbz = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VNationalDay_ssbzSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = GameGlobal.layerMgr;
        e.reg(UIConst.NATIONALDAY_SSBZREC, VNationalDay_ssbzRecord, e.UI_Message), e.reg(UIConst.NATIONALDAY_SSBZJL, VNationalDay_ssbzGetAward, e.UI_Message);
        var i = this.base;
        this.addCloseListen(i.btnClose).addCloseListen(i.btnReturn), this.txtNoteLink.textFlow = HtmlUtil.underLine(this.txtNoteLink.text), DisplayUtil.popBtnStyle(this.txtNoteLink), this.txtNoteLink.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLink, this), this.list.dataProvider = this.sourceData = new eui.ArrayCollection, this.list.itemRenderer = VNationalDay_ssbzItem, Vo_NationalDay_ssbz.initLib()
    }, e.prototype.onLink = function () {
        GameGlobal.layerMgr.open(UIConst.NATIONALDAY_SSBZREC)
    }, e.prototype.addTick = function () {
        GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.onTick = function (t) {
        t.displayTimetxt(), Vo_NationalDay_ssbz.actLeftTime < 0 && (t.showActTime(!1), t.closeHandler())
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.showActTime = function (t) {
        t ? this.addTick() : (this.txtActTime.text = "00:00:00", this.removeTick())
    }, e.prototype.displayTimetxt = function () {
        DateUtil.isLessThan1Day(Vo_NationalDay_ssbz.actLeftTime) ? this.txtActTime.textFlow = HtmlUtil.parse(DateUtil.getHMSBySecond(Vo_NationalDay_ssbz.actLeftTime, "时分秒")) : this.txtActTime.textFlow = HtmlUtil.parse(DateUtil.getDayHourStr(Vo_NationalDay_ssbz.actLeftTime))
    }, e.prototype.addMsg = function () {
        GameGlobal.modelNationalDay.on(ModelNationalDay.MSG_UPDATE, this.onUpdate, this), GameGlobal.modelNationalDay.CG4111()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelNationalDay.off(ModelNationalDay.MSG_UPDATE, this.onUpdate, this)
    }, e.prototype.onUpdate = function () {
        this.txtOwnKey.text = Vo_NationalDay_ssbz.ownKeys + "", this.showActTime(Vo_NationalDay_ssbz.actLeftTime > 0), DisplayUtil.fillDataAC(this.sourceData, Vo_NationalDay_ssbz.map.getList())
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.titlebg, "nationalDay_title_BG_png"), IconUtil.setIconSrc(this.title, "nationalDay_ssbz_BG_png"), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.titlebg, null), IconUtil.setIconSrc(this.title, null), this.removeMsg(), this.showActTime(!1)
    }, e.showUnLockEff = function () {
        for (var t = GameGlobal.layerMgr.getView(UIConst.NATIONALDAY_SSBZ), e = 0; e < t.list.numChildren; e++) {
            var i = t.list.$children[e];
            if (1 == i.data.lockState) {
                i.showUnLockEff();
                break
            }
        }
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VNationalDay_ssbz.prototype, "VNationalDay_ssbz");
var VNationalDay_ssbzGetAward = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.content = "开启你的宝藏之旅", e.timeremain = 0, e.skinName = "VNationalDay_ssbzGetAwardSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnok), this.addCloseListen(this.bg)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e.sort(ConfigHelp.ITEMSORT), ConfigHelp.makeVoGrids(e, this.grids, 0, 0, this.itemGroup, !0, 0, 1, 2), this.itemGroup.scrollV = 0;
        for (var i = 0, o = e.length; o > i; i++) {
            var n = e[i];
            2 == n.type && ViewItemFloatTip.checkShowEquipID(n.id)
        }
        this.timeremain = 3e3, this.updateTime(this, 0), GameGlobal.tick.addInterv(this.updateTime, 500, this), this.isShowGetKey = this.hasKey(e), this.nxtGroup.visible = this.isShowGetKey, this.isShowGetKey && (this.isShowGetKey ? this.txtDes.textFlow = HtmlUtil.parse(HtmlUtil.fontSize(this.content, 26)) : this.txtDes.text = "可前往下一层挖宝")
    }, e.prototype.hasKey = function (t) {
        for (var e = 1794, i = 0; i < t.length; i++) {
            var o = t[i];
            if (o.id == e) return !0
        }
        return !1
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.updateTime), ConfigHelp.clearGrids(this.grids), e.fistAwardGet ? e.fistAwardGet = !1 : this.isShowGetKey ? (VNationalDay_ssbz.showUnLockEff(), GameGlobal.tick.addInterv(function () {
            GameGlobal.modelNationalDay.CG4111()
        }, 1100, this, !0)) : GameGlobal.modelNationalDay.CG4111()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.updateTime = function (t, e) {
        t.timeremain -= e;
        var i = Math.ceil(t.timeremain / 1e3);
        0 > i && (i = 0, t.closeHandler()), t.btnok.label = "关闭(" + i + ")"
    }, e.fistAwardGet = !1, e
}(BaseEUIView);
__reflect(VNationalDay_ssbzGetAward.prototype, "VNationalDay_ssbzGetAward");
var VNationalDay_ssbzItem = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.baoxiangs = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemSSBDSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        for (var e = 0; 9 > e; e++) {
            var i = this["iconBX" + e];
            this.baoxiangs.push(i), i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGetLitAward, this)
        }
        this.gridCost.enableTip(), this.gridAward.enableTip()
    }, e.prototype.onGetLitAward = function (t) {
        var e = t.currentTarget,
            i = this.baoxiangs.indexOf(e);
        i >= 0 && GameGlobal.modelNationalDay.CG4113(this.data.cfg.id, i)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, 1 == t.lockState ? (this.awardLock.visible = !0, this.totalLock.visible = !0) : (this.awardLock.visible = !1, this.totalLock.visible = !1), this.gridAward.data = ConfigHelp.makeVoList(t.cfg.zdjl)[0], this.gridAward.isShowEff(!0);
            var e = ConfigHelp.makeVoList(t.cfg.kxxh)[0];
            this.gridCost.data = e, this.txtLayer.text = t.cfg.rw;
            var i = ConfigHelp.costTxt(e);
            this.txtCost.textFlow = i, this.iconBigAdGot.visible = 2 == t.bigAwardGot, this.updateBaoXiangSt()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateBaoXiangSt = function () {
        for (var t = this.data.bxOpenedInfo, e = 0; e < t.length; e++) {
            var i = t[e],
                o = i.index,
                n = this.baoxiangs[o],
                a = this["iconOpened" + o];
            2 == i.state ? (n.source = "HJSDAtlas_json.bxOpened", a.visible = !0) : (n.source = "HJSDAtlas_json.bxClose", a.visible = !1)
        }
        if (0 == t.length)
            for (var e = 0; e < this.baoxiangs.length; e++) n = this.baoxiangs[e], a = this["iconOpened" + e], n.source = "HJSDAtlas_json.bxClose", a.visible = !1
    }, e.prototype.showUnLockEff = function () {
        EffectMgr.addEff("uieff/hjsdUnLock", this, 320, 190, 1e3, 1e3)
    }, e
}(ItemBase);
__reflect(VNationalDay_ssbzItem.prototype, "VNationalDay_ssbzItem");
var VNationalDay_ssbzRecord = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VBDRecordSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose).addCloseListen(this.background), DisplayUtil.popBtnStyle(this.btnClose), this.list.dataProvider = this.sourceData = new eui.ArrayCollection, this.list.itemRenderer = ItemBZRec
    }, e.prototype.onUpdate = function () {
        var t = Vo_NationalDay_ssbz.record;
        t.sort(this.sortFun), DisplayUtil.fillDataAC(this.sourceData, t)
    }, e.prototype.sortFun = function (t, e) {
        var i = t.time,
            o = e.time;
        return o - i
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelNationalDay.on(ModelNationalDay.MSG_UPDATE_RECORD, this.onUpdate, this), GameGlobal.modelNationalDay.CG4115()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelNationalDay.off(ModelNationalDay.MSG_UPDATE_RECORD, this.onUpdate, this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(VNationalDay_ssbzRecord.prototype, "VNationalDay_ssbzRecord");
var Vo_NationalDay_ssbz = function () {
    function t() {
        this.cfg = null, this.lockState = 1, this.bigAwardGot = 0
    }
    return t.initLib = function () {
        if (!(this.map.getLength() > 0)) {
            var e = CFG_NationalDay.LIB3,
                i = 0;
            for (var o in e) {
                var n = e[o],
                    a = new t;
                a.cfg = n, a.bxOpenedInfo = [], this.map.add(a, o), 0 == i ? a.lockState = 2 : a.lockState = 1, i++
            }
        }
    }, t.update = function (t, e, i) {
        var o = this.map.getByKey(t);
        o && (o.bxOpenedInfo = e, o.bigAwardGot = i)
    }, t.updateLocks = function (t) {
        for (var e = 0; e < this.map.getLength(); e++) {
            var i = this.map.getByIndex(e);
            i.cfg.id <= t && (i.lockState = 2)
        }
    }, Object.defineProperty(t, "actLeftTime", {
        get: function () {
            var t = GameGlobal.modelAct.actData.getChildByID(25);
            return t && t.getChildByID(62).getRemainSec()
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "ownKeys", {
        get: function () {
            var t = 1724,
                e = this.map.getList()[0];
            return e && (t = Util.parseIntStr(e.cfg.kxxh)[1]), GameGlobal.modelBag.getItemCount(t)
        },
        enumerable: !0,
        configurable: !0
    }), t.notice = function () {
        return !1
    }, t.map = new CommondMap, t
}();
__reflect(Vo_NationalDay_ssbz.prototype, "Vo_NationalDay_ssbz");
var CommonHttp = function () {
    function t() {}
    return t.queryQB = function (t, e, i) {
        var o = HttpReqPack.create("/fsqy/pay/midasGetBalance", {}, egret.HttpMethod.GET);
        App.httpGame.send(o, i).register(t, e)
    }, t.rechargeQZone = function (t, e, i, o, n) {
        var a = HttpReqPack.create("/fsqy/pay/midasPay", {
            amt: t,
            goods_id: e,
            heroid: GameGlobal.modelRole.voMine.id
        }, egret.HttpMethod.GET);
        App.httpGame.send(a, n).register(i, o)
    }, t.recharge = function (t, e, i, o, n, a) {
        var s = HttpReqPack.create("/" + AppConfig.pfname + "/pay/order", {
            amt: e,
            heroid: GameGlobal.modelRole.voMine.id,
            goods_id: t,
            goods_name: i
        });
        App.httpGame.send(s, t).register(o, n)
    }, t
}();
__reflect(CommonHttp.prototype, "CommonHttp");
var CommonWanba = function () {
    function t() {}
    return t.checkCover = function (t, e, i, o) {
        var n = new HttpWanBa;
        n.initServer("https://api.urlshare.cn");
        var a = HttpReqPack.create("/v3/cover/judge_cover_type", {
            id: t
        }, egret.HttpMethod.POST);
        n.send(a, o).register(e, i)
    }, t
}();
__reflect(CommonWanba.prototype, "CommonWanba");
var Http = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.ensurePackData = function (t) {
        var e = t.respFormat == egret.HttpResponseType.TEXT ? t.parseToObject(t.data) : t.data,
            i = GameGlobal.loginArg;
        e.openid = i.account, e.uid = i.account, e.curpf = void 0 == i.curpf ? i.pf : i.curpf, e.curpd = void 0 == i.curpd ? i.pd : i.curpd, e.zoneid = i.zoneid, e.openkey = i.openkey, e.token = i.sign, e.midas_pf = platform.isIOS ? "ios" : "android", t.data = t.respFormat == egret.HttpResponseType.TEXT ? t.parseToString(e) : e
    }, e
}(HttpBase);
__reflect(Http.prototype, "Http");
var HttpWanBa = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.appkey = "uUsYRed5AXRqiG9U", e
    }
    return __extends(e, t), e.prototype.ensurePackData = function (t) {
        var e = t.respFormat == egret.HttpResponseType.TEXT ? t.parseToObject(t.data) : t.data,
            i = window.OPEN_DATA;
        e.appid = i.appid, e.openid = i.openid, e.openkey = i.openkey, e.pf = i.pf, e.format = "json", e.userip = "", e.sig = this.getPlatformSig(t.key, e, t.method), t.data = t.respFormat == egret.HttpResponseType.TEXT ? t.parseToString(e) : e
    }, e.prototype.getPlatformSig = function (t, e, i) {
        var o = this.appkey,
            n = [];
        for (var a in e) {
            var s = a + "=" + e[a];
            n.push(s)
        }
        n.sort();
        var r = n.join("&");
        r = i + "&" + encodeURIComponent(t) + "&" + encodeURIComponent(r);
        var l = new SHA1,
            h = l.b64_hmac_sha1(o + "&", r) + "=";
        return h
    }, e
}(HttpBase);
__reflect(HttpWanBa.prototype, "HttpWanBa");
var RoleShowData = function () {
    function t(t) {
        if (t) {
            var e = JSON.parse(t);
            this.name = e.name, this.str = e.strength, this.titleId = e.titleId, this.job = e.job, this.fashionId = e.fashionId, this.haloId = e.haloId, this.horseId = e.horseId, this.weaponId = e.weaponId, this.wingId = e.wingId
        }
    }
    return t.prototype.getBody = function () {
        return this.fashionId || this.job
    }, t.prototype.setRoleShowIdByType = function (t, e) {
        t == E_RoleShowType.BODY ? this.fashionId = e : t == E_RoleShowType.HORSE ? this.horseId = e : t == E_RoleShowType.WING ? this.wingId = e : t == E_RoleShowType.WEAPON ? this.weaponId = e : t == E_RoleShowType.HALO && (this.haloId = e)
    }, t.prototype.setSingleShowByType = function (t, e) {
        t == E_RoleShowType.BODY ? (this.fashionId = e, this.horseId = 1001) : t == E_RoleShowType.HORSE ? this.horseId = e : t == E_RoleShowType.WING ? (this.wingId = e, this.horseId = 1) : t == E_RoleShowType.WEAPON ? (this.weaponId = e, this.horseId = 1) : t == E_RoleShowType.HALO && (this.haloId = e)
    }, t
}();
__reflect(RoleShowData.prototype, "RoleShowData");
var UIRole = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._way = 3, e._act = "idle", e._playing = !1, e._actTime = 0, e._actInterv = 0, e.scale = 1, e._monsterId = 0, e
    }
    return __extends(e, t), e.create = function (t) {
        var i = new e;
        return t && (i.setTitle(t.titleId), i.setBody(t.getBody()), i.setHalo(t.haloId), i.setWeapon(t.weaponId), i.setWing(t.wingId), i.setHorse(t.horseId), i.validParts()), i
    }, e.prototype.setData = function (t) {
        this.setTitle(t.titleId), this.setBody(t.getBody()), this.setHalo(t.haloId), this.setWeapon(t.weaponId), this.setWing(t.wingId), this.setHorse(t.horseId), this.validParts()
    }, e.prototype.setAny1 = function (t) {
        if (this._any1 != t)
            if (this._any1 = t, t) {
                var e = this.uiAddPart(9999, 9999);
                e.setVal(t)
            } else this.uiRemovePart(9999)
    }, e.prototype.setFashion = function (t, e) {
        e ? this.setBody(e) : this.setBody(t)
    }, e.prototype.setBody = function (t) {
        this._body = t, t ? this.uiAddPart(Parts.P_BODY, Parts.P_BODY) : this.uiRemovePart(Parts.P_BODY)
    }, e.prototype.setHorse = function (t) {
        this._horse = t, t ? (this.uiAddPart(Parts.P_HORSEDOWN, Parts.P_HORSEDOWN), this.uiAddPart(Parts.P_HORSEFRONT, Parts.P_HORSEFRONT)) : (this.uiRemovePart(Parts.P_HORSEDOWN), this.uiRemovePart(Parts.P_HORSEFRONT))
    }, e.prototype.setWeapon = function (t) {
        this._weapon = t, t ? this.uiAddPart(Parts.P_WEAPON, Parts.P_WEAPON) : this.uiRemovePart(Parts.P_WEAPON)
    }, e.prototype.setWing = function (t) {
        this._wing = t, t ? this.uiAddPart(Parts.P_WING, Parts.P_WING) : this.uiRemovePart(Parts.P_WING)
    }, e.prototype.setHalo = function (t) {
        this._halo = t, t ? this.uiAddPart(Parts.P_SHADOW, Parts.P_SHADOW) : this.uiRemovePart(Parts.P_SHADOW)
    }, e.prototype.setHero = function () {
        var t = GameGlobal.modelRole.voMine.sceneChars[0];
        this.setBody(t._body), this.setWeapon(t._weapon), this.setWing(t._wing), this.setHorse(t._horse)
    }, e.prototype.setTitle = function (t, e) {
        if (void 0 === e && (e = -130), this._title = t, t) {
            this.uiAddPart(Parts.P_TITLE, Parts.P_TITLE);
            var i = this.dic[Parts.P_TITLE];
            i.y = e
        } else this.uiRemovePart(Parts.P_TITLE)
    }, e.prototype.setWay = function (t) {
        void 0 === t && (t = 3), this._way = t, this.setVal(t);
        var e = this.dic[Parts.P_TITLE];
        e && e.setAct(1);
        var i = this.dic[Parts.P_SHADOW];
        i && i.setAct(1)
    }, e.prototype.setShouLing = function (t) {
        this._shouLing = t, t ? this.uiAddPart(Parts.P_BODY, Parts.P_BODY) : this.uiRemovePart(Parts.P_BODY)
    }, e.prototype.setFaBao = function (t) {
        this._fabao = t, t ? this.uiAddPart(Parts.P_BODY, Parts.P_BODY) : this.uiRemovePart(Parts.P_BODY)
    }, e.prototype.validParts = function () {
        if (this._halo) {
            var t = this.dic[Parts.P_SHADOW],
                e = "halo/" + this._halo;
            t.setVal(e), t.setAct(1)
        }
        if (this._fabao) {
            var i = "fabao/" + this._fabao;
            this.setPart(Parts.P_BODY, i)
        }
        if (this._shouLing) {
            var o = "shouling/" + this._shouLing;
            this.setPart(Parts.P_BODY, o)
        } else if (this._body) {
            if (this._horse) var o = "body/" + this._body + "/z_" + this._act;
            else var o = "body/" + this._body + "/" + this._act;
            this.setPart(Parts.P_BODY, o)
        }
        if (this._horse) {
            var n = "horse/" + this._horse + "/" + this._act;
            if (this._body && !CFG_MOD.LIBNOHEAD[this._horse]) var a = "horse/" + this._horse + "h/" + this._act;
            else a = null;
            this.setPart(Parts.P_HORSEDOWN, n), this.setPart(Parts.P_HORSEFRONT, a)
        }
        if (this._weapon) {
            if (this._horse) var s = "weapon/" + this._weapon + "/z_" + this._act;
            else var s = "weapon/" + this._weapon + "/" + this._act;
            this.setPart(Parts.P_WEAPON, s)
        }
        if (this._wing) {
            var r = this.dic[Parts.P_WING];
            if (this._horse) var l = "wing/" + this._wing + "/z_" + this._act;
            else var l = "wing/" + this._wing + "/" + this._act;
            r && (3 == this._way ? r.dep = Parts.P_WINGDOWN : r.dep = Parts.P_WING, r.setVal(l))
        }
        if (this._title) {
            var h = this.dic[Parts.P_TITLE],
                c = "title/" + this._title;
            h.setVal(c), h.setAct(1)
        }
        this.sort()
    }, e.prototype.uiAddPart = function (t, e) {
        var i = this.dic[t];
        return i || (i = Part.create(), i.type = t, i.dep = e, this.addPart(i)), i
    }, e.prototype.uiRemovePart = function (t) {
        var e = this.dic[t];
        e && this.removePart(e)
    }, e.prototype.play = function (t) {
        void 0 === t && (t = 800), this._actInterv = t, this._actTime = 0, this._playing || (GameGlobal.tick.addInterv(this.onInterv, 50, this, !1, null, !0), this._playing = !0)
    }, e.prototype.stop = function () {
        this._playing && (GameGlobal.tick.removeInterv(this.onInterv, this), this._playing = !1)
    }, e.prototype.stopAndClear = function () {
        this.setHalo(null), this.setBody(null), this.setHorse(null), this.setWing(null), this.setWeapon(null), this.setTitle(null), this.setShouLing(null), this.setAny1(null), this.stop()
    }, e.prototype.onInterv = function (t, e) {
        t._actTime += e;
        var i = t._actTime / t._actInterv;
        i > 1 && t.ptype == Parts.DIS_REAPEAT && (i = 0, t._actTime = 0), t.perc = i
    }, e.prototype.setMonsterID = function (t, e) {
        void 0 === e && (e = !1), this._monsterId = t;
        var i = CFG_MONSTER.LIB[t];
        if (!i) return ViewText.text("errorMonsterID:" + t), void this.setBody(20001);
        var o = CFG_MOD.LIB[i.mx];
        if (!o) return ViewText.text("ErrorModID:" + i.mx), void this.setBody(20001);
        var n = o.mid;
        if (e) {
            var a = o.scale / 100 * this.scale;
            this.scaleX = this.scaleY = a
        }
        this.setBody(n)
    }, e.prototype.setPetID = function (t, e) {
        void 0 === e && (e = !1);
        var i = CFG_Pet.PETLIB[t];
        return i ? void this.setModID(i.m) : (ViewText.text("errorPetID:" + t), void this.setBody(20001))
    }, e.prototype.setModID = function (t, e) {
        void 0 === e && (e = !1);
        var i = CFG_MOD.LIB[t];
        if (!i) return void ViewText.text("ErrorModID:" + t);
        var o = i.mid;
        if (e) {
            var n = i.scale / 100 * this.scale;
            this.scaleX = this.scaleY = n
        }
        this.setBody(o)
    }, e.prototype.playAttack = function (t, e) {
        void 0 === t && (t = 800), void 0 === e && (e = 800), this._act = "attack", this.perc = 0, this._actInterv = t, this.validParts(), e && GameGlobal.tick.addInterv(this.onActEnd, e, this, !0)
    }, e.prototype.playDie = function (t, e) {
        void 0 === t && (t = 400), void 0 === e && (e = 0), this._act = "die", this.perc = 0, this._actInterv = t, this.validParts(), this.ptype = Parts.DIS_ONCE, e && GameGlobal.tick.addInterv(this.onActEnd, e, this, !0)
    }, e.prototype.idle = function () {
        var t = this;
        t.ptype = Parts.DIS_REAPEAT, t._act = "idle", t._actInterv = 800, t.validParts()
    }, e.prototype.onActEnd = function (t) {
        t._act = "idle", t._actInterv = 800, t.validParts()
    }, e
}(Parts);
__reflect(UIRole.prototype, "UIRole");
var VChangeName = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ChangeName", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.rect), this.addCloseListen(this.btnCancel), this.btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOkT, this), this.btnCancel.label = "取消", this.btnOk.label = "修改名称", this.input.maxChars = 6
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = GameGlobal.modelRole.voMine;
        this.input.text = i.name, this.updateCost()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onOkT = function () {
        var t = 1701,
            e = this.input.text;
        return e && e != GameGlobal.modelRole.voMine.name ? void(GameGlobal.modelBag.getItemCount(t) ? GameGlobal.modelRole.CG_CHANGENAME(e, 1) : GameGlobal.modelRole.voMine.yuanbao >= 200 ? GameGlobal.modelRole.CG_CHANGENAME(this.input.text, 2) : ViewText.text("元宝不足")) : void ViewText.text("请输入名字")
    }, e.prototype.updateCost = function () {
        var t = 1701;
        if (GameGlobal.modelBag.getItemCount(t)) {
            var e = CFG_Item.LIB[t];
            this.imgCost.source = IconUtil.getIconUrl(e.icon), this.lbCost.text = "X1"
        } else this.imgCost.source = IconUtil.getIconUrl(33), this.lbCost.text = "X200"
    }, e
}(BaseEUIView);
__reflect(VChangeName.prototype, "VChangeName");
var ModelSetting = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.isGMOpen = !1, e.isReverBattleForce = !1, e.showBattleHpVal = !1, e.soundEnable = !1, e
    }
    return __extends(e, t), e.gameLog = function (t) {
        if (this._consoleTxt += "\n" + t, this._consoleTxt.length >= 2048) {
            var e = this._consoleTxt.length - 2048;
            this._consoleTxt = this._consoleTxt.slice(e, this._consoleTxt.length)
        }
    }, e.prototype.setWing = function (t) {
        this._wingVal = t;
        var e = GameGlobal.modelRole.voMine.sceneChars[0];
        e.setWing(t)
    }, e.prototype.setWeapon = function (t) {
        this._weaponVal = t;
        var e = GameGlobal.modelRole.voMine.sceneChars[0];
        e.setWeapon(t)
    }, e.prototype.setHorse = function (t) {
        this._horseVal = t;
        var e = GameGlobal.modelRole.voMine.sceneChars[0];
        e.setHorse(t)
    }, e.prototype.setBody = function (t) {
        this._bodyVal = t;
        var e = GameGlobal.modelRole.voMine.sceneChars[0];
        e.setBody(t)
    }, e.prototype.setStaticMonsterModel = function (t) {
        this.staticMonsterModel = t
    }, e.prototype.reverBattleForce = function () {
        this.isReverBattleForce = !this.isReverBattleForce
    }, e.prototype.revShowBattleHpVal = function () {
        this.showBattleHpVal = !this.showBattleHpVal
    }, e.prototype.setIsShowUIBG = function (t) {
        this.isShowUIBG = t, t ? egret.localStorage.setItem("isShowUIBG", "true") : egret.localStorage.setItem("isShowUIBG", "true"), this.updateUIBGV()
    }, e.prototype.updateUIBGV = function () {
        this.isShowUIBG ? GameGlobal.layerMgr.delUIHideF(UIConst.UIBG, "setting") : GameGlobal.layerMgr.addUIHideF(UIConst.UIBG, "setting")
    }, e.prototype.listenServ = function (t) {
        var e = egret.localStorage.getItem("sound"),
            i = egret.localStorage.getItem("battleScale");
        "false" != e ? this.soundEnable = !0 : (this.soundEnable = !1, SoundManager.getInstance().addStopFlag("setting")), "2" == i ? GameGlobal.modelBattle.setTimeScale(2, 1.5) : GameGlobal.modelBattle.setTimeScale(1, 1.2), this.isShowUIBG = "false" == egret.localStorage.getItem("isShowUIBG") ? !1 : !0, this.updateUIBGV()
    }, e.prototype.setSoundEnable = function (t) {
        this.soundEnable = t, t ? (egret.localStorage.setItem("sound", "true"), SoundManager.getInstance().removeStopFlag("setting")) : (egret.localStorage.setItem("sound", "false"), SoundManager.getInstance().addStopFlag("setting")), this.notify(e.MSG_S)
    }, e.prototype.setGameSpeed = function (t) {
        GameGlobal.modelBattle.timeScaleText != t && (1 == t ? GameGlobal.modelBattle.setTimeScale(1, 1.2) : GameGlobal.modelBattle.setTimeScale(2, 1.5))
    }, e.prototype.setGMVis = function (t) {
        if (this.isGMOpen != t) {
            this.isGMOpen = t;
            var i = GameGlobal;
            i.layerMgr._regMap.gmEntry || GameGlobal.layerMgr.reg("gmEntry", ViewGMEntry, GameGlobal.layerMgr.UI_Message), t ? GameGlobal.layerMgr.open("gmEntry") : GameGlobal.layerMgr.close("gmEntry"), this.notify(e.MSG_GMV)
        }
    }, e.MSG_S = "MSG_S", e.MSG_GMV = "gmv", e._consoleTxt = "", e
}(BaseModel);
__reflect(ModelSetting.prototype, "ModelSetting");
var VGameSetting = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "GameSetting", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.imgSound.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSoundCB, this), this.addCloseListen(this.rect), this.imgSP1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSpeedCB, this), this.imgSP2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSpeedCB, this), this.cbShowBG.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBGT, this), AppConfig.pftype == E_PF_CONFIG_TYPE.MI ? this.qq.text = "客服QQ：901312770" : this.qq.text = "客服QQ：3344987762"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.updateSCB(), this.updateBSpeedV(), GameGlobal.modelSetting.on(ModelSetting.MSG_S, this.updateSCB, this), GameGlobal.modelBattle.on(ModelBattle.MSG_BTIMESCALE, this.updateBSpeedV, this), this.cbShowBG.selected = GameGlobal.modelSetting.isShowUIBG
    }, e.prototype.onClose = function () {
        GameGlobal.modelSetting.off(ModelSetting.MSG_S, this.updateSCB, this), GameGlobal.modelBattle.off(ModelBattle.MSG_BTIMESCALE, this.updateBSpeedV)
    }, e.prototype.onSoundCB = function (t) {
        GameGlobal.modelSetting.setSoundEnable(!GameGlobal.modelSetting.soundEnable)
    }, e.prototype.onSpeedCB = function (t) {
        t.currentTarget == this.imgSP1 ? (GameGlobal.modelBattle.setTimeScale(1, 1.2), egret.localStorage.setItem("battleScale", "1")) : (GameGlobal.modelBattle.setTimeScale(2, 1.5), egret.localStorage.setItem("battleScale", "2"))
    }, e.prototype.onBGT = function () {
        var t = GameGlobal.modelSetting;
        t.setIsShowUIBG(!t.isShowUIBG), this.cbShowBG.selected = t.isShowUIBG
    }, e.prototype.updateSCB = function () {
        var t = GameGlobal.modelSetting;
        this.imgSoundY.visible = t.soundEnable
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.updateBSpeedV = function () {
        var t = GameGlobal.modelBattle;
        1 == t.timeScaleText ? (this.imgSP1Y.visible = !0, this.imgSP2Y.visible = !1) : (this.imgSP1Y.visible = !1, this.imgSP2Y.visible = !0)
    }, e
}(BaseEUIView);
__reflect(VGameSetting.prototype, "VGameSetting");
var VHeroDetail = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "HeroDetail", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.rect), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.btnChangeName.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onNameT, this), this.btnSetting.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSetT, this), this.btnChangeName.label = "修改昵称", this.btnSetting.label = "游戏设置"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), this.mod || (this.mod = UIRole.create(), this.cont.addChildAt(this.mod, 5), this.mod.x = 300, this.mod.y = 320), this.mod.setHero(), this.mod.setWay(3), this.mod.validParts(), this.mod.play(1e3)
    }, e.prototype.onClose = function () {
        this.mod.stopAndClear()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onNameT = function () {
        this.closeHandler(), GameGlobal.layerMgr.open(UIConst.CHANGENAME)
    }, e.prototype.onSetT = function () {
        this.closeHandler(), GameGlobal.layerMgr.open(UIConst.SETTING)
    }, e.prototype.update = function () {
        var t = GameGlobal.modelRole.voMine;
        this.lbCurName.text = this.lbName.text = t.name, this.lbSex.text = 1 == t.job ? "男" : "女", this.lbLv.text = t.level + "", this.lbMenPai.text = t.menpaiId ? VoMenPai.getInst().name : "无", this.imgHead.source = IconUtil.getRoleHead(t.job)
    }, e
}(BaseEUIView);
__reflect(VHeroDetail.prototype, "VHeroDetail");
var ModelPaiHangBang = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(1340, i.GC1340, i), e.regHand(1342, i.GC1342, i), e.regHand(1346, i.GC1346, i), e.regHand(1348, i.GC1348, i)
    }, e.prototype.GC1340 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte(),
                s = i.readByte();
            VoPaiHangBang.wordshipMap[a] = s
        }
        t.notify(e.msg_wordship)
    }, e.prototype.CG1341 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeByte(e), this.sendSocket(1341, i)
    }, e.prototype.GC1342 = function (t, i) {
        var o = (i.readByte(), i.readByte()),
            n = i.readByte(),
            a = i.readInt(),
            s = i.readByte(),
            r = i.readShort();
        VoPaiHangBang.removeToPool();
        for (var l = 0; r > l; l++) {
            var h = i.readByte(),
                c = i.readLong(),
                p = i.readUTF(),
                u = i.readByte(),
                d = i.readInt(),
                f = i.readInt();
            VoPaiHangBang.update(h, c, p, u, d, f)
        }
        VoPaiHangBang.maxPage = s, VoPaiHangBang.minePaiMing = n, VoPaiHangBang.xianShenTotalZhanLi = a;
        var g = GameGlobal.layerMgr.getView(UIConst.PAIHANGBANG);
        g && g.displayPage(o), t.notify(e.msg_data, o)
    }, e.prototype.CG1345 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1345, e)
    }, e.prototype.GC1346 = function (t, i) {
        var o = i.readByte(),
            n = i.readByte();
        if (1 == o) {
            if (100 == n)
                for (var a = VoPaiHangBang.labels.length, s = 0; a > s; s++) {
                    var r = s + 1;
                    VoPaiHangBang.wordshipMap[r] = 1
                } else VoPaiHangBang.wordshipMap[n] = 1;
            t.notify(e.msg_wordship)
        } else 4 == o ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["", "", "不能重复崇拜", "传入参数异常", null, "已经全部膜拜", "不符合一键崇拜条件"][o])
    }, e.prototype.GC1348 = function (t, i) {
        var o = i.readByte(),
            n = i.readLong(),
            a = i.readInt(),
            s = i.readInt(),
            r = i.readInt(),
            l = i.readInt(),
            h = i.readInt(),
            c = i.readInt(),
            p = i.readInt(),
            u = i.readInt();
        VoPaiHangBang.update1stInfo(o, n, a, s, r, l, h, c, p, u), t.notify(e.msg_1stInfo)
    }, e.prototype.notice = function () {
        var t = GameGlobal.modelRole.voMine.level,
            e = CFG_COMMOND.getOpenLevel(CFG_COMMOND.PANGHANGBANG);
        if (t >= e)
            for (var i = VoPaiHangBang.labels.length, o = 1; i >= o; o++) {
                var n = VoPaiHangBang.wordshipMap[o],
                    a = VoPaiHangBang.getOpenLvByType(o);
                if (t >= a && (!n || 0 == n)) return !0
            }
        return !1
    }, e.msg_wordship = "msg_wordship", e.msg_data = "msg_data", e.msg_1stInfo = "msg_1stInfo", e
}(BaseModel);
__reflect(ModelPaiHangBang.prototype, "ModelPaiHangBang");
var VoPaiHangBang = function () {
    function t() {}
    return t.update1stInfo = function (e, i, o, n, a, s, r, l, h, c) {
        var p = t._1stInfo;
        p || (p = t._1stInfo = new FirstInfo), p.type = e, p.sysId = i, p.job = o, p.petId = n, p.huobanId = a, p.horseMX = s, p.shenBing = r, p.wing = l, p.fashion = h, p.halo = c
    }, t.update = function (e, i, o, n, a, s) {
        var r = t.create();
        r.paiming = e, r.sysId = i, r.name = o, r.vip = n, r.mixInfo = a, r.zhanli = s, t.list.push(r)
    }, t.removeToPool = function () {
        for (; t.list.length;) t.pool.push(t.list.pop())
    }, t.create = function () {
        return t.pool.pop() || new t
    }, t.getOpenLvByType = function (t) {
        switch (t) {
            case 1:
            case 2:
                return 1;
            case 3:
                return CFG_COMMOND.getOpenLevel(CFG_COMMOND.PET);
            case 4:
                return CFG_COMMOND.getOpenLevel(CFG_COMMOND.HUOBAN);
            case 5:
                return CFG_COMMOND.getOpenLevel(CFG_COMMOND.HORSE);
            case 6:
                return CFG_COMMOND.getOpenLevel(CFG_COMMOND.WING);
            case 7:
                return CFG_COMMOND.getOpenLevel(CFG_COMMOND.SHENBING);
            case 8:
                return CFG_COMMOND.getOpenLevel(CFG_COMMOND.HALO);
            case 9:
                return CFG_COMMOND.getOpenLevel(CFG_COMMOND.FUWEN);
            case 10:
                return CFG_COMMOND.getOpenLevel(CFG_COMMOND.SHOULING);
            case 11:
                return CFG_COMMOND.getOpenLevel(CFG_COMMOND.HUOBAN)
        }
    }, t.wordshipMap = {}, t.list = [], t.xianShenTotalZhanLi = 0, t.labels = ["战力榜", "等级榜", "灵兽榜", "仙神榜", "坐骑榜", "翅膀榜", "神兵榜", "光环榜", "符文榜", "兽灵榜", "仙神洗练榜"], t.zsyjIndex = [0, 0, 0, 0, 101, 201, 301, 401, 0, 501, 0], t.pool = [], t
}();
__reflect(VoPaiHangBang.prototype, "VoPaiHangBang");
var FirstInfo = function () {
    function t() {}
    return t
}();
__reflect(FirstInfo.prototype, "FirstInfo");
var VPaiHangBang = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData2 = new eui.ArrayCollection, e.tabLabels = [], e.selLabel = -1, e.last_time = 0, e.skinName = "VPaiHangBangSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.initLabels(), this.base.title = "排行榜", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), DisplayUtil.popBtnStyle(this.btnLeft), DisplayUtil.popBtnStyle(this.btnRight), DisplayUtil.popBtnStyle(this.btnChongBai), DisplayUtil.popBtnStyle(this.btnzsyj), this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnChongBai.addEventListener(egret.TouchEvent.TOUCH_TAP, this.chongBai, this), this.btnzsyj.addEventListener(egret.TouchEvent.TOUCH_TAP, this.zsyjT, this), this.listContents.itemRenderer = ItemPHB, this.listContents.dataProvider = this.sourceData2, this.listContents.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onItemSel, this), this.uirole = UIRole.create(), this.partContainer.addChild(this.uirole), this.base.btnReturn.bottom = 32
    }, e.prototype.initLabels = function () {
        for (var t = VoPaiHangBang.labels, e = 0; e < t.length; e++) {
            var i = t[e],
                o = new ItemPHBLabel;
            o.data = i, this.listBtns.addChild(o), this.tabLabels.push(o), o.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSel, this)
        }
    }, e.prototype.zsyjT = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(10);
        t && CFG_COMMOND.isOpen(CFG_COMMOND.ZHISHENGYIJIE, !0) && GameGlobal.layerMgr.open(UIConst.UIID_ZHISHENGYIJIE)
    }, e.prototype.chongBai = function () {
        var t = GameGlobal.modelRole.voMine.level,
            e = GameGlobal.modelRole.voMine.vip,
            i = CFG_COMMOND.LIB[1020].arg;
        t >= i.oneKeyLv || e >= i.oneKeyVipLv ? GameGlobal.modelpaihangbang.CG1345(100) : GameGlobal.modelpaihangbang.CG1345(this.getType())
    }, e.prototype.onItemSel = function (t) {
        var e = t.item;
        GameGlobal.modelChat.CG473(e.sysId)
    }, e.prototype.getType = function () {
        return this.selLabel
    }, e.prototype.onSel = function (t) {
        var e = t.currentTarget,
            i = this.tabLabels.indexOf(e);
        this.setSel(i + 1)
    }, e.prototype.setSel = function (t) {
        var e = this.tabLabels[this.selLabel - 1];
        e && (e.selected = !1), this.selLabel = t, e = this.tabLabels[t - 1], e.selected = !0, GameGlobal.modelpaihangbang.CG1341(t, 1), this.upzsyjIcon(t - 1)
    }, e.prototype.upzsyjIcon = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(10);
        if (!e) return void DisplayUtil.remove(this.btnzsyj);
        var i = VoPaiHangBang.zsyjIndex[t],
            o = VoZhiShengYiJie.getFirstCanGot();
        if (!o) return void DisplayUtil.remove(this.btnzsyj);
        var n = o.cfg.bh;
        i != n ? DisplayUtil.remove(this.btnzsyj) : (this.btnzsyj = e.getBtn(), this.btnzsyj.x = 562, this.btnzsyj.y = 99, this.addChild(this.btnzsyj), this.checkZSYJNotice())
    }, e.prototype.checkZSYJNotice = function (t) {
        void 0 === t && (t = GameGlobal.modelpeiyang.zsyjNotice);
        var e = GameGlobal.modelAct.actData.getChildByID(10);
        if (e) {
            var i = this.btnzsyj;
            i.setNoticVis(t);
            for (var o = 0, n = VoZhiShengYiJie.map.getLength(); n > o; o++) {
                var a = VoZhiShengYiJie.map.getByIndex(o);
                2 == a.gotState && DisplayUtil.remove(i)
            }
        }
    }, e.prototype.displayPage = function (t) {
        this.curPage = t, this.txtPage.text = t + "/" + VoPaiHangBang.maxPage
    }, e.prototype.onChange = function (t) {
        var e = egret.getTimer();
        if (!(e - this.last_time < 600)) {
            this.last_time = e;
            var i = t.currentTarget,
                o = this.curPage;
            switch (i) {
                case this.btnLeft:
                    o--;
                    break;
                case this.btnRight:
                    o++
            }
            var n = VoPaiHangBang.maxPage;
            n >= o && o >= 1 && GameGlobal.modelpaihangbang.CG1341(this.getType(), o)
        }
    }, e.prototype.addMsg = function () {
        GameGlobal.modelpaihangbang.on(ModelPaiHangBang.msg_data, this.updateData, this), GameGlobal.modelpaihangbang.on(ModelPaiHangBang.msg_1stInfo, this.update1st, this), GameGlobal.modelpaihangbang.on(ModelPaiHangBang.msg_wordship, this.updateWordship, this), GameGlobal.modelpeiyang.on(ModelPeiYang.msg_ZhiShengYiJieNitice, this.checkZSYJNotice, this), GameGlobal.modelAct.on(Model_Act.MSG_ACTLIST_UPDATE, this.upzsyjIcon, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelpaihangbang.off(ModelPaiHangBang.msg_data, this.updateData, this), GameGlobal.modelpaihangbang.off(ModelPaiHangBang.msg_1stInfo, this.update1st, this), GameGlobal.modelpaihangbang.off(ModelPaiHangBang.msg_wordship, this.updateWordship, this), GameGlobal.modelpeiyang.off(ModelPeiYang.msg_ZhiShengYiJieNitice, this.checkZSYJNotice, this), GameGlobal.modelAct.off(Model_Act.MSG_ACTLIST_UPDATE, this.upzsyjIcon, this)
    }, e.prototype.updateData = function () {
        var t = VoPaiHangBang.list;
        this.sourceData2.source = t;
        var e = VoPaiHangBang.minePaiMing;
        0 == e ? this.txtMinePM.text = "未上榜" : this.txtMinePM.text = Lang.reTxt("第{0}名", e);
        var i = t.length;
        if (i > 0) {
            if (this.partContainer.visible = !0, this.roleBg.visible = !0, 1 == this.curPage) {
                var o = t[0];
                this.txtName.text = o.name
            }
        } else this.partContainer.visible = !1, this.txtName.text = "", this.btnChongBai.visible = !1, this.iconChongbai.visible = !1, this.roleBg.visible = !1;
        this.updateWordship(), this.isFuWenBang() ? this.txtXianShenZL.textFlow = HtmlUtil.parse("上阵仙神符文总战力: " + HtmlUtil.color(VoPaiHangBang.xianShenTotalZhanLi, "#10a244")) : this.txtXianShenZL.text = ""
    }, e.prototype.isFuWenBang = function () {
        return 9 == this.getType()
    }, e.prototype.update1st = function () {
        var t = VoPaiHangBang._1stInfo,
            e = t.fashion,
            i = t.job;
        e > 0 ? i = e : t.petId > 0 ? i = CFG_Pet.PETLIB[t.petId].m : t.huobanId > 0 && (i = CFG_HUOBAN1.LIB[t.huobanId].m);
        var o = t.horseMX,
            n = t.wing,
            a = t.shenBing;
        this.uirole.setHalo(t.halo), this.uirole.setBody(i), this.uirole.setHorse(o), this.uirole.setWing(n), this.uirole.setWeapon(a), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play()
    }, e.prototype.updateWordship = function () {
        var t = this.getType(),
            e = VoPaiHangBang.wordshipMap[t];
        1 == e ? (this.btnChongBai.visible = !1, this.iconChongbai.visible = !1) : (this.btnChongBai.visible = !0, this.iconChongbai.visible = !0);
        var i = GameGlobal.modelRole.voMine.level,
            o = GameGlobal.modelRole.voMine.vip,
            n = CFG_COMMOND.LIB[1020].arg;
        i >= n.oneKeyLv || o >= n.oneKeyVipLv ? this.btnChongBai.source = "PHBAtlas_json.onekey" : this.btnChongBai.source = "PHBAtlas_json.cb"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), this.dealWithSysOpen(), this.setSel(1)
    }, e.prototype.getTabByIndex = function (t) {
        return this.tabLabels[t]
    }, e.prototype.dealWithSysOpen = function () {
        for (var t = 0; t < this.tabLabels.length; t++) {
            var e = t + 1;
            this.visiTabLabel(t, VoPaiHangBang.getOpenLvByType(e))
        }
    }, e.prototype.visiTabLabel = function (t, e) {
        var i = this.getTabByIndex(t),
            o = GameGlobal.modelRole.voMine.level;
        o >= e ? DisplayUtil.addBy(i, this.listBtns, t) : DisplayUtil.remove(i)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), this.uirole.stopAndClear()
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(VPaiHangBang.prototype, "VPaiHangBang");
var ItemPHB = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.huobanAttTypes = ["物攻型", "法攻型", "辅助型"], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemPHBSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.imgText = new ImageText, this.imgText.container = this.vipWords, this.imgText.charFunc = ImageText.PHBFUNC
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (e) {
            t.prototype.onData.call(this), this._data = e;
            var i = e.paiming;
            4 > i ? (this.iconPM.source = "PHBAtlas_json." + i, this.TxtPM.text = "") : (this.iconPM.source = null, this.TxtPM.text = i + "");
            var o = e.vip;
            o > 0 ? (this.vipGroup.visible = !0, this.imgText.setText(o + "")) : this.vipGroup.visible = !1, this.txtName.text = e.name, this.updateByType()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateByType = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.PAIHANGBANG),
            e = t.getType();
        switch (this.txtHBT.text = "", e) {
            case 1:
            case 2:
                this.txtLv.text = this.data.mixInfo + "级", this.txtZL.text = "人物战力: " + this.data.zhanli;
                break;
            case 3:
                var i = CFG_Pet.PETLIB[this.data.mixInfo];
                i ? this.txtLv.text = i.n : this.txtLv.text = "未知宠物", this.txtZL.text = "宠物战力: " + this.data.zhanli;
                break;
            case 4:
                var o = CFG_HUOBAN1.LIB[this.data.mixInfo];
                if (o) {
                    var e = o.t,
                        n = o.n;
                    this.txtHBT.text = this.huobanAttTypes[e - 1], this.txtLv.text = n
                }
                this.txtZL.text = "仙神战力: " + this.data.zhanli;
                break;
            case 5:
                this.txtLv.text = this.data.mixInfo + "阶", this.txtZL.text = "坐骑战力: " + this.data.zhanli;
                break;
            case 6:
                this.txtLv.text = this.data.mixInfo + "阶", this.txtZL.text = "翅膀战力: " + this.data.zhanli;
                break;
            case 7:
                this.txtLv.text = this.data.mixInfo + "阶", this.txtZL.text = "神兵战力: " + this.data.zhanli;
                break;
            case 8:
                this.txtLv.text = this.data.mixInfo + "阶", this.txtZL.text = "光环战力: " + this.data.zhanli;
                break;
            case 9:
                this.txtLv.text = this.data.mixInfo + "级", this.txtZL.text = "符文战力: " + this.data.zhanli;
                break;
            case 10:
                this.txtLv.text = this.data.mixInfo + "阶", this.txtZL.text = "兽灵战力: " + this.data.zhanli;
                break;
            case 11:
                this.txtLv.text = this.data.mixInfo + "级", this.txtZL.text = "洗炼总战力: " + this.data.zhanli
        }
    }, Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.bg.source = "CM2_json.bg1" : this.bg.source = "CM2_json.bg2"
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onAdd = function () {
        if (!this.twing) {
            this.twing = 1, this.cont.skewX = -80;
            var t = 200 + 100 * this.itemIndex;
            egret.Tween.get(this.cont).to({
                skewX: 0
            }, t).call(this.tweenEnd, this)
        }
    }, e.prototype.tweenEnd = function () {
        this.twing = 0
    }, e
}(ItemBase);
__reflect(ItemPHB.prototype, "ItemPHB");
var ItemPHBLabel = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemPHBLabelSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.label.text = t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            t ? this.bg.source = "PHBAtlas_json.chosen" : this.bg.source = "PHBAtlas_json.nChosen"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemPHBLabel.prototype, "ItemPHBLabel");
var ChildPeiYang = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.description = "({0}提升的属性只对主角加成)", e.WIDTH = 480, e.tipsString = "【一键培养】会消耗背包中的相应材料，若背包中材料不足，则会消耗绑定元宝或元宝自动购买，直至进阶成功或银两不足或绑定元宝和元宝不足，是否继续？", e.isCheckBoxUp = !1, e.lastPeiYangTime = 0, e.isOneKey = !1, e.skinName = "ChildPeiYangSkin", e
    }
    return __extends(e, t), e.prototype.guidePY = function () {
        var t = this.btnPeiYang2;
        QuestGuideArrow.getIns().guideTo(t, 50, 25), this.guidingPY = !0
    }, e.prototype.exitGuidePY = function () {}, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.imgText = new ImageText, this.imgText.charFunc = ImageText.STRFUNC, this.imgText.container = this.zhanliContainer, this.uirole = UIRole.create(), this.partCont.addChild(this.uirole), DisplayUtil.popBtnStyle(this.btnSearch), DisplayUtil.popBtnStyle(this.btnLeft), DisplayUtil.popBtnStyle(this.btnRight), DisplayUtil.popBtnStyle(this.iconSkin), DisplayUtil.popBtnStyle(this.checkBox), this.btnSearch.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSearch, this), this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.iconSkin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSkin, this), this.btnHuanHua.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHuanHua, this), this.btnPeiYang.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnPeiYang2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.checkBox.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCheckBox, this), this.zhiShengDanCont.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onZhiShengUse, this), this.progressVisitor = new ProgressVisitor(this.progressBar, this.txtProgress, this.WIDTH), this.btnPeiYang.label = "培养", this.btnPeiYang2.label = "一键培养", this.iconGou.visible = !1, this.txtUpgrade.visible = !1, this.txtManji.visible = !1, this.costGrid.setShowCount(!1), this.costGrid.enableTip(), this.skillgrid.lbLv.visible = this.skillgrid.txtNm.visible = !1, this.skillgrid.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onskillT, this), this.btnQuest.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            var t = 1 == GameGlobal.modelRole.voMine.job ? 100901 : 100902;
            ViewWenHao.show(CFG_COMMOND.LIBWFSM[t].detail)
        }, this)
    }, e.prototype.onZhiShengUse = function () {
        var t = this.data.getType(),
            e = VoZhiShengYiJie.zhiShengDans[t],
            i = GameGlobal.modelBag.getItemCount(e) > 0;
        i ? this.sureOpenZSD() : GameGlobal.layerMgr.open(UIConst.UIID_ZHISHENGYIJIE)
    }, e.prototype.sureOpenZSD = function () {
        var t = "5阶以下使用立刻提升1阶，6阶以后使用固定增加400点培养经验!\n" + HtmlUtil.color("(建议在5阶时使用)", "#10a244"),
            e = this.data.getType(),
            i = VoZhiShengYiJie.zhiShengDans[e],
            o = GameGlobal.modelBag.getItemCount(i) > 0;
        ViewAlert.show(t, function () {
            o ? GameGlobal.modelpeiyang.CG3135(i) : GameGlobal.layerMgr.open(UIConst.UIID_ZHISHENGYIJIE)
        }, 3, this, null, "使用")
    }, e.prototype.onCheckBox = function () {
        this.isCheckBoxUp = !this.isCheckBoxUp, this.iconGou.visible = this.isCheckBoxUp
    }, e.prototype.onHand = function (t) {
        var e = this,
            i = egret.getTimer();
        if (!(i < this.lastPeiYangTime + 500)) {
            this.lastPeiYangTime = i;
            var o = t.currentTarget;
            switch (o) {
                case this.btnPeiYang:
                    if (0 == o.enabled) return;
                    this.isOneKey = !1;
                    break;
                case this.btnPeiYang2:
                    if ("取消" == o.label) return void this.setOneKeyDisplay(!1);
                    if (this.isCheckBoxUp) return void ViewAlert.show(this.tipsString, function () {
                        e.setOneKeyDisplay(!0), e.realToServ()
                    });
                    this.setOneKeyDisplay(!0)
            }
            this.realToServ()
        }
    }, e.prototype.setOneKeyDisplay = function (t) {
        t ? (this.isOneKey = !0, this.btnPeiYang.enabled = !1, this.btnPeiYang2.skinName = "EasyButton_1Skin", this.btnPeiYang2.label = "取消", QuestGuideArrow.hide("autoPY", !0)) : (this.isOneKey = !1, this.btnPeiYang.enabled = !0, this.btnPeiYang2.skinName = "EasyButton_ySkin", this.btnPeiYang2.label = "一键培养", QuestGuideArrow.show("autoPY", !0)), this.updatePeiYangNotice()
    }, e.prototype.onHuanHua = function () {
        0 != this.btnHuanHua.enabled && GameGlobal.modelpeiyang.huanHua(this.curId, this.data.getType())
    }, e.prototype.onSkin = function () {
        GameGlobal.layerMgr.open(UIConst.UIID_PEIYANGSKIN, this.data)
    }, e.prototype.onSearch = function () {
        GameGlobal.layerMgr.open(UIConst.UIID_PEIYANGATT, this.data)
    }, e.prototype.onChange = function (t) {
        var e = t.currentTarget,
            i = this.curId;
        switch (e) {
            case this.btnLeft:
                i--;
                break;
            case this.btnRight:
                if (this.curId > this.data.highestJie) return void ViewText.text("升阶可开放更多外形");
                i++
        }
        this.setSel(i)
    }, e.prototype.setSel = function (t) {
        this.curId = t, this.watchLeft(t), this.watchRight(t), this.onUpdate()
    }, e.prototype.watchLeft = function (t) {
        1 == t ? this.btnLeft.visible = !1 : this.btnLeft.visible = !0
    }, e.prototype.watchRight = function (t) {
        t == this.maxId ? this.btnRight.visible = !1 : this.btnRight.visible = !0
    }, e.prototype.addMsg = function () {
        GameGlobal.modelpeiyang.on(ModelPeiYang.msg_data, this.onUpdate, this), GameGlobal.modelpeiyang.on(ModelPeiYang.msg_peiyang, this.updatePeiYangInfo, this), GameGlobal.modelpeiyang.on(ModelPeiYang.msg_peiyangHH, this.updateHuanHuaInfo, this), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.onNotice, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onNotice, this), GameGlobal.modelpeiyang.on(ModelPeiYang.msg_zhishengYijieData, this.showZhiShengYiJie, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelpeiyang.off(ModelPeiYang.msg_data, this.onUpdate, this), GameGlobal.modelpeiyang.off(ModelPeiYang.msg_peiyang, this.updatePeiYangInfo, this), GameGlobal.modelpeiyang.off(ModelPeiYang.msg_peiyangHH, this.updateHuanHuaInfo, this), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.onNotice, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onNotice, this), GameGlobal.modelpeiyang.off(ModelPeiYang.msg_zhishengYijieData, this.showZhiShengYiJie, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.data = e, this.maxId = this.data.getMaxId(), this.setSel(this.data.highestJie), this.staticProgress(), this.onNotice(), this.showZhiShengYiJie(), this.updateZhiShengNot(), this.addMsg(), this.upSkillGrid()
    }, e.prototype.upSkillGrid = function () {
        this.skillgrid.tipGrp.visible = this.skillgrid.imglv.visible = !0;
        var t = [.3, .6, 0, 0, 0, .3, .6, 0, 0, 0, .3, .6, 0, 0, 0, 0, 0, 0, 1, 0],
            e = new egret.ColorMatrixFilter(t);
        this.skillgrid.imgIcon.filters = [e];
        var i = this.getOpenJie(!0),
            o = this.skillvo = CFG_Hero.getSkill(this.data, this.data.highestJie);
        if (this.data.lib[this.data.highestJie + 1] ? o = this.nextskillvo = CFG_Hero.getNextSkill(this.data, o.level) : (this.skillgrid.tipGrp.visible = !1, this.skillgrid.imgIcon.filters = null), this.data.highestJie < i) var n = i + "阶激活";
        else i = this.getOpenJie(!1), n = i + "阶提升";
        this.data.isJsNextJieSkill && (this.data.isJsNextJieSkill = !1, this.data.nextJieSkill = i), this.skillgrid.data = o, this.skillgrid.lbtip.text = n, this.skillgrid.imglv.source = "skillPage_json." + (o.id % 10 + 1)
    }, e.prototype.getOpenJie = function (t) {
        var e = this.data.lib,
            i = t ? 1 : this.data.highestJie,
            o = e[i],
            n = !1,
            a = GameGlobal.modelRole.voMine.job,
            s = 1 == a ? o.jnnan : o.jnnv;
        for (var r in e) {
            var l = e[r],
                h = 1 == a ? l.jnnan : l.jnnv;
            if (n && s != h) return parseInt(r);
            s == h && (n = !0)
        }
        return 1
    }, e.prototype.onskillT = function () {
        GameGlobal.layerMgr.open(UIConst.PEIYANGSKILLTIP, {
            skill: this.skillvo,
            nextskill: this.nextskillvo,
            peiyang: this.data
        })
    }, e.prototype.showZhiShengYiJie = function () {
        var t = this.data.getType();
        if (VoZhiShengYiJie.isInActionTime(t)) {
            var e = GameGlobal.modelAct.actData.getChildByID(10);
            if (e) {
                var i = e.clone();
                this.zhiShengDanBtn || (this.zhiShengDanBtn = i.getBtn(), this.zhiShengDanBtn.$setX(0), this.zhiShengDanBtn.$setY(0), i.disableTouch()), i.remainTime = e.getRemainSec(), this.zhiShengDanBtn.x = this.zhiShengDanBtn.y = 0, DisplayUtil.addBy(this.zhiShengDanBtn, this.zhiShengDanCont), this.zhiShengDanBtn.startTime()
            } else this.zhiShengDanBtn && DisplayUtil.remove(this.zhiShengDanBtn)
        } else this.zhiShengDanBtn && DisplayUtil.remove(this.zhiShengDanBtn)
    }, e.prototype.updateZhiShengNot = function () {
        if (this.zhiShengDanBtn) {
            var t = this.data.getType(),
                e = GameGlobal.modelpeiyang.zsyjNotice || GameGlobal.modelpeiyang.getNoticeZSYJPY(VoZhiShengYiJie.zhiShengDans[t], this.data);
            this.zhiShengDanBtn.setNoticVis(e)
        }
    }, e.prototype.updatePeiYangInfo = function () {
        var t = this.data.isManji();
        if (!t) {
            var e = (this.data.getCfgById(this.data.highestJie), this.data.getCost());
            this.costGrid.data = e[0], this.costYL.source = "CM2_json.yinliang";
            var i = ConfigHelp.costTxt(e[0], "#10a244");
            this.txtCostItem.textFlow = i, this.txtCostYL.text = e[1].count + "", GameGlobal.modelRole.voMine.yinliang < e[1].count ? this.txtCostYL.textColor = 16646144 : this.txtCostYL.textColor = 1090116
        }
        this.groupCost.visible = !t, this.checkBox.visible = !t, this.btnPeiYang.visible = !t, this.btnPeiYang2.visible = !t, this.txtManji.visible = t, this.upSkillGrid()
    }, e.prototype.updateAtt = function () {
        for (var t = this.attContainer.$children, e = Object.keys(PeiYangAttObject.attObjs), i = 0; i < t.length; i++) {
            var o = t[i],
                n = parseInt(e[i]),
                a = PeiYangAttObject.attObjs[n],
                s = PeiYangAttObject.clone(a);
            s.val = this.data.setAttValue(s.id);
            var r = this.data.getChuShiAtt(s.id);
            s.val += r, o.textFlow = HtmlUtil.parse(s.name + ": " + HtmlUtil.color(s.val, "#10a244"))
        }
    }, e.prototype.staticProgress = function () {
        var t = this.data.getCfgById(this.data.highestJie),
            e = t.jy,
            i = this.data.curExp;
        this.progressVisitor.staticToValue(i, e), this.progressVisitor.setManji(this.data.isManji())
    }, e.prototype.showEff = function () {
        var t = this;
        egret.Tween.removeTweens(this.txtUpgrade), this.txtUpgrade.y = 600, this.txtUpgrade.visible = !0, egret.Tween.get(this.txtUpgrade).to({
            y: 570
        }, 500, egret.Ease.backOut).call(function () {
            t.txtUpgrade.visible = !1
        }, this)
    }, e.prototype.dynamicProgress = function () {
        var t = this.data.getCfgById(this.data.highestJie),
            e = t.jy,
            i = this.data.curExp;
        this.progressVisitor.dynamicToValue(i, e)
    }, e.prototype.jumpJie = function () {
        this.setOneKeyDisplay(!1), this.progressVisitor.showFire(), this.setSel(this.data.highestJie), ModelPeiYang.showNewHorseJieMod(this.data);
        var t = this.data.getType(),
            e = VoZhiShengYiJie.zhiShengDans[t],
            i = GameGlobal.modelBag.getItemCount(e) > 0;
        this.data.highestJie >= 5 && VoZhiShengYiJie.isInActionTime(this.data.getType()) && i && (this.sureOpenZSD(), this.updateZhiShengNot())
    }, e.prototype.tryToServ = function () {
        var t = this;
        this.isOneKey && GameGlobal.tick.addInterv(function () {
            t.isOneKey && t.realToServ()
        }, 400, this, !0)
    }, e.prototype.realToServ = function () {
        var t = this;
        if (!t.hasEnoughMetirial() || t.data.isManji()) return void t.setOneKeyDisplay(!1);
        var e = t.isCheckBoxUp ? 1 : 0;
        GameGlobal.modelpeiyang.peiyang(e, t.data.getType())
    }, e.prototype.hasEnoughCurrancy = function (t, e) {
        var i = CFG_STORE.priorChosen(t),
            o = i.xh[2],
            n = o * e;
        return GameGlobal.modelRole.voMine.bYuanbao >= n ? !0 : (i = CFG_STORE.priorChosen(t, 2), o = i.xh[2], n = o * e, GameGlobal.modelRole.voMine.yuanbao >= n ? !0 : !1)
    }, e.prototype.hasEnoughMetirial = function () {
        var t = (this.data.getType(), this.data.getCost()),
            e = t[0],
            i = GameGlobal.modelBag.getItemCount(e.id),
            o = e.count - i;
        if (!this.hasEnoughYL(t[1])) return !1;
        if (o > 0) {
            if (!this.guidingPY)
                if (this.isCheckBoxUp) {
                    if (this.hasEnoughCurrancy(e.id, o)) return !0;
                    GameGlobal.layerMgr.open(UIConst.UIID_STOREBUYTIP, PeiYangCost.getInst().setInfo(e.id, o, this.data))
                } else GameGlobal.layerMgr.open(UIConst.UIID_STOREBUYTIP, PeiYangCost.getInst().setInfo(e.id, o, this.data));
            return !1
        }
        return !0
    }, e.prototype.hasEnoughYL = function (t) {
        return GameGlobal.modelRole.voMine.yinliang < t.count ? (this.guidingPY || GameGlobal.layerMgr.open(UIConst.CAILIAOGET, t.id), !1) : !0
    }, e.prototype.updateHuanHuaInfo = function () {
        var t = (this.data, this.data.getCfgById(this.curId)),
            e = this.data.huanHuaMXId,
            i = 0;
        switch (this.data.getType()) {
            case 0:
                i = t.mx;
                break;
            case 1:
                i = t.mx;
                break;
            case 2:
                i = 1 == GameGlobal.modelRole.voMine.job ? t.mx : t.mxv;
                break;
            case 3:
                i = t.mx
        }
        if (e == i) this.iconHuanHua.visible = !0, this.btnHuanHua.visible = !1;
        else {
            var o = this.data.highestJie >= this.curId;
            this.iconHuanHua.visible = !1, this.btnHuanHua.visible = !0, o ? (this.btnHuanHua.enabled = !0, this.btnHuanHua.label = "幻化") : (this.btnHuanHua.enabled = !1, this.btnHuanHua.label = "未激活")
        }
    }, e.prototype.showJHZhanli = function () {
        if (this.curId == this.data.highestJie) {
            var t = this.data.getJHZhanli(this.curId + 1);
            t > 0 ? this.txtDescription1.textFlow = HtmlUtil.parse("进阶可提升" + HtmlUtil.color(t, "#10a244") + "战力") : this.txtDescription1.text = ""
        } else this.txtDescription1.text = ""
    }, e.prototype.onUpdate = function () {
        var t = this.data,
            e = t.getCfgById(this.curId);
        this.txtDescription.text = Lang.reTxt(this.description, t.getTitle()), this.imgText.setText("z" + t.zhanli), this.txtJie.text = VoPeiYang.getChiniseNum(e.js) + "阶", this.showJHZhanli();
        var i = GameGlobal.modelRole.voMine.sceneChars[0],
            o = GameGlobal.modelRole.voMine,
            n = i._halo,
            a = i._body,
            s = i._horse,
            r = i._wing,
            l = i._weapon,
            h = this.data.getType();
        switch (h) {
            case 0:
                s = e.mx, this.txtName.text = e.mc, this.txtUpgrade.text = "坐骑经验+10";
                break;
            case 1:
                r = e.mx, this.txtName.text = e.mc, this.txtUpgrade.text = "翅膀经验+10";
                break;
            case 2:
                1 == o.job ? (l = e.mx, this.txtName.text = e.mc) : (l = e.mxv, this.txtName.text = e.mcv), this.txtUpgrade.text = "神兵经验+10";
                break;
            case 3:
                n = e.mx, this.txtName.text = e.mc, this.txtUpgrade.text = "光环经验+10"
        }
        this.uirole.setHalo(n), this.uirole.setBody(a), this.uirole.setHorse(s), this.uirole.setWing(r), this.uirole.setWeapon(l), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play(), this.updateHuanHuaInfo(), this.updatePeiYangInfo(), this.updateAtt()
    }, e.prototype.onNotice = function () {
        this.updateSkinNotice(), this.updatePeiYangNotice(), this.updatePeiYangInfo(), this.updateZhiShengNot()
    }, e.prototype.updateSkinNotice = function () {
        var t = this.data,
            e = t.getSkinNotice();
        this.skinNotice.visible = e
    }, e.prototype.updatePeiYangNotice = function () {
        var t = this.data.getPeiYangNotice();
        this.btnPeiYang.setNoticeVis(t), this.btnPeiYang2.setNoticeVis(t)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.uirole.stopAndClear(), this.progressVisitor.stop(), this.setOneKeyDisplay(!1), this.removeMsg(), this.guidingPY = !1, this.zhiShengDanBtn && this.zhiShengDanBtn.stage && this.zhiShengDanBtn.endTime()
    }, e
}(BaseEUIView);
__reflect(ChildPeiYang.prototype, "ChildPeiYang");
var ModelPeiYang = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.PYSYSTYPE = 0, e.WAITOPCFGID = 0, e.zsyjNotice = !1, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1170, this.GC1170, this), e.regHand(1200, this.GC1200, this), e.regHand(1230, this.GC1230, this), e.regHand(1172, this.GC1172, this), e.regHand(1202, this.GC1202, this), e.regHand(1232, this.GC1232, this), e.regHand(1174, this.GC1174, this), e.regHand(1204, this.GC1204, this), e.regHand(1234, this.GC1234, this), e.regHand(1176, this.GC1176, this), e.regHand(1206, this.GC1206, this), e.regHand(1236, this.GC1236, this), e.regHand(1178, this.GC1178, this), e.regHand(1208, this.GC1208, this), e.regHand(1238, this.GC1238, this), e.regHand(3e3, this.GC3000, this), e.regHand(3002, this.GC3002, this), e.regHand(3004, this.GC3004, this), e.regHand(3006, this.GC3006, this), e.regHand(3008, this.GC3008, this), e.regHand(3150, this.GC3150SL, this), e.regHand(3152, this.GC3152SLPY, this), e.regHand(3154, this.GC3154SLPF, this), e.regHand(3156, this.GC3156SLPFJH, this), e.regHand(3158, this.GC3158SLHH, this), e.regHand(3132, this.GC3132, this), e.regHand(3134, this.GC3134, this), e.regHand(3136, this.GC3136, this)
    }, e.prototype.peiyang = function (t, e) {
        var i = this.getBytes();
        switch (i.writeByte(t), e) {
            case 0:
                this.sendSocket(1171, i);
                break;
            case 1:
                this.sendSocket(1201, i);
                break;
            case 2:
                this.sendSocket(1231, i);
                break;
            case 3:
                this.sendSocket(3001, i);
                break;
            case 4:
                this.sendSocket(3151, i)
        }
    }, e.prototype.openSkin = function (t) {
        switch (t) {
            case 0:
                this.sendSocket(1173, this.getBytes());
                break;
            case 1:
                this.sendSocket(1203, this.getBytes());
                break;
            case 2:
                this.sendSocket(1233, this.getBytes());
                break;
            case 3:
                this.sendSocket(3003, this.getBytes());
                break;
            case 4:
                this.sendSocket(3153, this.getBytes())
        }
    }, e.prototype.jiHuo = function (t, e) {
        var i = this.getBytes();
        switch (i.writeInt(t), e) {
            case 0:
                this.sendSocket(1175, i);
                break;
            case 1:
                this.sendSocket(1205, i);
                break;
            case 2:
                this.sendSocket(1235, i);
                break;
            case 3:
                this.sendSocket(3005, i);
                break;
            case 4:
                this.sendSocket(3155, i)
        }
    }, e.prototype.huanHua = function (t, e) {
        var i = this.getBytes();
        switch (i.writeInt(t), e) {
            case 0:
                this.sendSocket(1177, i);
                break;
            case 1:
                this.sendSocket(1207, i);
                break;
            case 2:
                this.sendSocket(1237, i);
                break;
            case 3:
                this.sendSocket(3007, i);
                break;
            case 4:
                this.sendSocket(3157, i)
        }
    }, e.prototype.GC1170 = function (t, e) {
        t.initialData(e, VoHorse.getInst())
    }, e.prototype.GC1200 = function (t, e) {
        t.initialData(e, VoWing.getInst())
    }, e.prototype.GC1230 = function (t, e) {
        t.initialData(e, VoWeapon.getInst())
    }, e.prototype.GC3000 = function (t, e) {
        t.initialData(e, VoHalo.getInst())
    }, e.prototype.GC1172 = function (t, e) {
        t.updateData(e, VoHorse.getInst())
    }, e.prototype.GC1202 = function (t, e) {
        t.updateData(e, VoWing.getInst())
    }, e.prototype.GC1232 = function (t, e) {
        t.updateData(e, VoWeapon.getInst())
    }, e.prototype.GC3002 = function (t, e) {
        t.updateData(e, VoHalo.getInst())
    }, e.prototype.GC1174 = function (t, e) {
        t.updateJHSkins(e, VoHorse.getInst())
    }, e.prototype.GC1204 = function (t, e) {
        t.updateJHSkins(e, VoWing.getInst())
    }, e.prototype.GC1234 = function (t, e) {
        t.updateJHSkins(e, VoWeapon.getInst())
    }, e.prototype.GC3004 = function (t, e) {
        t.updateJHSkins(e, VoHalo.getInst())
    }, e.prototype.GC1176 = function (t, e) {
        t.updateJHSkin(e, VoHorse.getInst())
    }, e.prototype.GC1206 = function (t, e) {
        t.updateJHSkin(e, VoWing.getInst())
    }, e.prototype.GC1236 = function (t, e) {
        t.updateJHSkin(e, VoWeapon.getInst())
    }, e.prototype.GC3006 = function (t, e) {
        t.updateJHSkin(e, VoHalo.getInst())
    }, e.prototype.GC1178 = function (t, e) {
        t.updateHH(e, VoHorse.getInst())
    }, e.prototype.GC1208 = function (t, e) {
        t.updateHH(e, VoWing.getInst())
    }, e.prototype.GC1238 = function (t, e) {
        t.updateHH(e, VoWeapon.getInst())
    }, e.prototype.GC3008 = function (t, e) {
        t.updateHH(e, VoHalo.getInst())
    }, e.prototype.GC3150SL = function (t, e) {
        t.initialData(e, VoShouLing.getInst())
    }, e.prototype.GC3152SLPY = function (t, e) {
        t.updateData(e, VoShouLing.getInst())
    }, e.prototype.GC3154SLPF = function (t, e) {
        t.updateJHSkins(e, VoShouLing.getInst())
    }, e.prototype.GC3156SLPFJH = function (t, e) {
        t.updateJHSkin(e, VoShouLing.getInst())
    }, e.prototype.GC3158SLHH = function (t, e) {
        t.updateHH(e, VoShouLing.getInst())
    }, e.prototype.initialData = function (t, i) {
        i.highestJie = t.readByte(), i.curExp = t.readInt(), i.zhanli = t.readInt(), i.huanHuaMXId = t.readInt(), this.notify(e.msg_data), CFG_Hero.setSkill(i)
    }, e.prototype.updateData = function (t, i) {
        var o = t.readByte();
        if (1 == o) {
            var n = t.readByte(),
                a = !1;
            i.highestJie != n && (a = !0), i.highestJie = n, i.curExp = t.readInt(), i.zhanli = t.readInt(), this.notify(e.msg_data), CFG_Hero.setSkill(i);
            var s = i.getType();
            if (3 >= s) {
                var r = GameGlobal.layerMgr.getView(UIConst.UIID_CHILDPEIYANG);
                r && (r.dynamicProgress(), r.showEff(), a ? r.jumpJie() : r.tryToServ())
            } else if (4 == s) {
                var l = GameGlobal.layerMgr.getView(UIConst.SHOULING);
                l && (l.dynamicProgress(), l.showEff(), a ? l.jumpJie() : l.tryToServ())
            }
        } else 2 == o && ViewText.text("材料不足")
    }, e.prototype.updateJHSkins = function (t, i) {
        for (var o = t.readShort(), n = 0; o > n; n++) {
            var a = t.readInt();
            i.updateJHSkin(a)
        }
        i.skinZhanli = t.readInt(), this.notify(e.msg_peiyangSkin)
    }, e.prototype.updateJHSkin = function (t, i) {
        var o = t.readByte();
        if (1 == o) {
            var n = t.readInt();
            i.updateJHSkin(n), i.skinZhanli = t.readInt(), i.zhanli = t.readInt(), this.notify(e.msg_peiyangJH)
        }
    }, e.prototype.updateHH = function (t, i) {
        var o = t.readInt();
        o > 100 ? i.huanHuaMXId = o : i instanceof VoWeapon ? 1 == GameGlobal.modelRole.voMine.job ? i.huanHuaMXId = i.lib[o].mx : i.huanHuaMXId = i.lib[o].mxv : i.huanHuaMXId = i.lib[o].mx, this.notify(e.msg_peiyangHH)
    }, e.showNewHorseJieMod = function (t) {
        var e = t.getCfgById(t.highestJie),
            i = GameGlobal.modelRole.voMine.job,
            o = GameGlobal.modelRole.voMine.sceneChars[0],
            n = o._halo,
            a = o._body,
            s = o._horse,
            r = o._wing,
            l = o._weapon;
        if (t instanceof VoHorse ? s = e.mx : t instanceof VoWing ? r = e.mx : l = 1 == i ? e.mx : e.mxv, t instanceof VoShouLing) {
            var h = e.mx;
            a = GameGlobal.modelPet.curPetVo.getPetModel(), GameGlobal.layerMgr.open(UIConst.NEWMOD, {
                type: t.getType(),
                isSL: !0,
                bodySL: h,
                body: a,
                name: e.mc
            })
        } else GameGlobal.layerMgr.open(UIConst.NEWMOD, {
            type: t.getType(),
            isSL: !1,
            halo: n,
            body: a,
            horse: s,
            wing: r,
            weapon: l,
            name: e.mc,
            vodata: t
        })
    }, e.prototype.notice = function () {
        var t = VoHorse.getInst().getPeiYangNotice(),
            e = VoWing.getInst().getPeiYangNotice(),
            i = VoWeapon.getInst().getPeiYangNotice(),
            o = VoHalo.getInst().getPeiYangNotice(),
            n = VoHorse.getInst().getSkinNotice(),
            a = VoWing.getInst().getSkinNotice(),
            s = VoWeapon.getInst().getSkinNotice(),
            r = VoHalo.getInst().getSkinNotice(),
            l = this.getNoticeZSYJAll();
        return t || e || i || n || a || s || o || r || l
    }, e.prototype.CG3131ANDWAITSYS = function (t, e) {
        this.PYSYSTYPE = t, this.WAITOPCFGID = e, this.CG3131()
    }, e.prototype.CG3131 = function () {
        this.sendSocket(3131, this.getBytes())
    }, e.prototype.GC3132 = function (t, i) {
        VoZhiShengYiJie.map.clear();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte(),
                s = i.readShort();
            VoZhiShengYiJie.updateState(s, a), t.WAITOPCFGID == s && 2 > a && (GameGlobal.layerMgr.isOpenView(UIConst.UIID_ZHISHENGYIJIE) || GameGlobal.layerMgr.open(UIConst.UIID_ZHISHENGYIJIE))
        }
        t.WAITOPCFGID = 0, VoZhiShengYiJie.jinRiChongZhi = i.readInt(), t.notify(e.msg_zhishengYijieData), t.noticeZhiShengYiJie(), t.upzsyjIcon()
    }, e.prototype.upzsyjIcon = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(10);
        if (t) {
            var e = VoZhiShengYiJie.getFirstCanGot(),
                i = t.getBtn();
            i.icon = e.cfg.icon
        }
    }, e.prototype.CG3133 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(3133, e)
    }, e.prototype.GC3134 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort();
            VoZhiShengYiJie.updateState(n, 2), t.notify(e.msg_zhiShengYijieGet), t.noticeZhiShengYiJie()
        } else 4 == o ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["", "", "该奖励已领取", "充值金额未达标"][o])
    }, e.prototype.CG3135 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(3135, e)
    }, e.prototype.GC3136 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                t.updateData(i, VoHorse.getInst());
                break;
            case 2:
                t.updateData(i, VoWing.getInst());
                break;
            case 3:
                t.updateData(i, VoWeapon.getInst());
                break;
            case 4:
                t.updateData(i, VoHalo.getInst());
                break;
            case 5:
                t.updateData(i, VoShouLing.getInst())
        }
        t.notify(e.msg_zhiShengYijieUse)
    }, e.prototype.noticeZhiShengYiJie = function () {
        this.zsyjNotice = !1;
        for (var t = 0, i = VoZhiShengYiJie.map.getLength(); i > t; t++) {
            var o = VoZhiShengYiJie.map.getByIndex(t);
            if (1 == o.gotState) {
                this.zsyjNotice = !0;
                break
            }
        }
        this.notify(e.msg_ZhiShengYiJieNitice, this.zsyjNotice)
    }, e.prototype.getNoticeZSYJPY = function (t, e) {
        var i = GameGlobal.modelBag.getItemCount(t);
        return i > 0 && e.highestJie >= 5 ? !0 : !1
    }, e.prototype.getNoticeByType = function (t) {
        var e = VoZhiShengYiJie.zhiShengDans[t];
        if (VoZhiShengYiJie.isInActionTime(t)) switch (t) {
            case 0:
                return this.getNoticeZSYJPY(e, VoHorse.getInst());
            case 1:
                return this.getNoticeZSYJPY(e, VoWing.getInst());
            case 2:
                return this.getNoticeZSYJPY(e, VoWeapon.getInst());
            case 3:
                return this.getNoticeZSYJPY(e, VoHalo.getInst());
            case 4:
                return this.getNoticeZSYJPY(e, VoShouLing.getInst())
        }
        return !1
    }, e.prototype.getNoticeZSYJAll = function () {
        for (var t = !1, e = 0; 4 > e && (t = this.getNoticeByType(e), 1 != t); e++);
        return t
    }, e.hasEnoughLevelNotice = function (t) {
        var e = 0;
        switch (t) {
            case 0:
                e = CFG_COMMOND.getOpenLevel(CFG_COMMOND.HORSE);
                break;
            case 1:
                e = CFG_COMMOND.getOpenLevel(CFG_COMMOND.WING);
                break;
            case 2:
                e = CFG_COMMOND.getOpenLevel(CFG_COMMOND.SHENBING);
                break;
            case 3:
                e = CFG_COMMOND.getOpenLevel(CFG_COMMOND.HALO)
        }
        return GameGlobal.modelRole.voMine.level >= e
    }, e.msg_data = "msg_data", e.msg_peiyang = "msg_peiyang", e.msg_peiyangSkin = "msg_peiyangSkin", e.msg_peiyangJH = "msg_peiyangJH", e.msg_peiyangHH = "msg_peiyangHH", e.msg_zhishengYijieData = "msg_zhishengYijieData", e.msg_zhiShengYijieGet = "msg_zhiShengYijieGet", e.msg_zhiShengYijieUse = "msg_zhiShengYijieUse", e.msg_ZhiShengYiJieNitice = "msg_ZhiShengYiJieNitice", e
}(BaseModel);
__reflect(ModelPeiYang.prototype, "ModelPeiYang");
var ProgressVisitor = function () {
    function t(t, e, i) {
        this.isMoving = !1, this.bar = t, this.txt = e, this.WIDTH = i, this.effNumber = new EffectNumber
    }
    return t.prototype.staticToValue = function (t, e) {
        this.bar.width = this.WIDTH * t / e, this.txt.text = t + "/" + e, this.effNumber.setValue(t)
    }, t.prototype.setManji = function (t) {
        t && (this.bar.width = this.WIDTH, this.txt.text = "满级")
    }, t.prototype.dynamicToValue = function (t, e) {
        this.isMoving && this.stop(), this.curVal = t, this.maxVal = e, this.effNumber.setDiffValue(t), this.startTime = egret.getTimer(), this.isMoving = !0, this.start()
    }, t.prototype.getEffSrc = function () {
        return "uieff/progBullet"
    }, t.prototype.getDuration = function () {
        return 400
    }, t.prototype.getOffSetX = function () {
        return -10
    }, t.prototype.getOffSetY = function () {
        return 12
    }, t.prototype.onMove = function (t) {
        var e = egret.getTimer(),
            i = e - t.startTime,
            o = i / t.getDuration();
        if (1 > o) {
            var n = t.effNumber.setPersent(o);
            t.bar.width = t.WIDTH * n / t.maxVal, t.txt.text = n + "/" + t.maxVal, t.updateEffPosition()
        } else t.stop()
    }, t.prototype.updateEffPosition = function () {
        var t = this.bar.x + this.bar.width,
            e = this.bar.y;
        this.uiEff ? this.uiEff.x = t + this.getOffSetX() : this.uiEff = EffectMgr.addEff(this.getEffSrc(), this.bar.parent, t + this.getOffSetX(), e + this.getOffSetY(), 1e3, -1)
    }, t.prototype.showFire = function () {
        var t = this.bar.x + 245,
            e = this.bar.y - 2,
            i = EffectMgr.addEff("uieff/progFire", this.bar.parent, t, e, 1e3, 1e3);
        i.scaleX = 4, i.scaleY = 3
    }, t.prototype.start = function () {
        this.updateEffPosition(), GameGlobal.tick.addInterv(this.onMove, 1, this)
    }, t.prototype.stop = function () {
        this.isMoving && (this.isMoving = !1, GameGlobal.tick.removeInterv(this.onMove, this), this.uiEff && (EffectMgr.getIns().removeEff(this.uiEff), this.uiEff = null), this.staticToValue(this.curVal, this.maxVal))
    }, t
}();
__reflect(ProgressVisitor.prototype, "ProgressVisitor");
var EffectNumber = function () {
    function t() {
        this.diffValue = 10, this.value = 0, this.diffValue = 0
    }
    return t.prototype.setValue = function (t) {
        this.value = t
    }, t.prototype.setPersent = function (t) {
        var e = this.value;
        return e = this.value + this.diffValue * t >> 0
    }, t.prototype.setDiffValue = function (t) {
        this.diffValue = t - this.value
    }, t
}();
__reflect(EffectNumber.prototype, "EffectNumber");
var ViewPeiYangPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.labels = ["坐骑", "翅膀", "神兵", "光环"], e.uiid_to_indexs = [1037, 1038, 1039, 1075], e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.base.btnReturn, 30, 30)
    }, e.prototype.checkPage = function (t) {
        var e = this._index == t;
        return e
    }, e.prototype.guidePage = function (t) {
        var e = this.base.getTabBySort(t);
        e && QuestGuideArrow.getIns().guideTo(e, 50, 25)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.base.createTabGroup(), this.base.addTab("坐骑", 0), this.base.addTab("翅膀", 1, 2), this.base.addTab("神兵", 2, 3), this.base.addTab("光环", 3, 4), this.base.listenTabClick(this.onSel, this), GameGlobal.layerMgr.reg(UIConst.UIID_CHILDPEIYANG, ChildPeiYang, this)
    }, e.prototype.onSel = function (t) {
        var e = t.sort;
        this.setSel(e)
    }, e.prototype.canOpen = function (t) {
        var e = !1;
        switch (t) {
            case 0:
                e = CFG_COMMOND.isOpen(CFG_COMMOND.HORSE, !0);
                break;
            case 1:
                e = CFG_COMMOND.isOpen(CFG_COMMOND.WING, !0);
                break;
            case 2:
                e = CFG_COMMOND.isOpen(CFG_COMMOND.SHENBING, !0);
                break;
            case 3:
                e = CFG_COMMOND.isOpen(CFG_COMMOND.HALO, !0)
        }
        return e
    }, e.prototype.setSel = function (t) {
        if (!(t >= 0) || this.canOpen(t)) {
            var e;
            switch (this._index) {
                case 0:
                    GameGlobal.layerMgr.close(UIConst.UIID_CHILDPEIYANG);
                    break;
                case 1:
                    GameGlobal.layerMgr.close(UIConst.UIID_CHILDPEIYANG);
                    break;
                case 2:
                    GameGlobal.layerMgr.close(UIConst.UIID_CHILDPEIYANG);
                    break;
                case 3:
                    GameGlobal.layerMgr.close(UIConst.UIID_CHILDPEIYANG)
            }
            switch (t) {
                case 0:
                    e = VoHorse.getInst(), this.base.title = "坐骑培养", GameGlobal.layerMgr.open(UIConst.UIID_CHILDPEIYANG, e);
                    break;
                case 1:
                    e = VoWing.getInst(), this.base.title = "翅膀培养", GameGlobal.layerMgr.open(UIConst.UIID_CHILDPEIYANG, e);
                    break;
                case 2:
                    e = VoWeapon.getInst(), this.base.title = "神兵培养", GameGlobal.layerMgr.open(UIConst.UIID_CHILDPEIYANG, e);
                    break;
                case 3:
                    e = VoHalo.getInst(), this.base.title = "光环培养", GameGlobal.layerMgr.open(UIConst.UIID_CHILDPEIYANG, e)
            }
            this.base.setTabSelBySort(t), this._index = t
        }
    }, e.prototype.updateTabNotice = function () {
        var t = VoHorse.getInst().getPeiYangNotice() || VoHorse.getInst().getSkinNotice(),
            e = VoWing.getInst().getPeiYangNotice() || VoWing.getInst().getSkinNotice(),
            i = VoWeapon.getInst().getPeiYangNotice() || VoWeapon.getInst().getSkinNotice(),
            o = VoHalo.getInst().getPeiYangNotice() || VoHalo.getInst().getSkinNotice();
        this.base.setNoticBySort(0, t || GameGlobal.modelpeiyang.getNoticeByType(0)), this.base.setNoticBySort(1, e || GameGlobal.modelpeiyang.getNoticeByType(1)), this.base.setNoticBySort(2, i || GameGlobal.modelpeiyang.getNoticeByType(2)), this.base.setNoticBySort(3, o || GameGlobal.modelpeiyang.getNoticeByType(3))
    }, e.prototype.addMsg = function () {
        GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.updateTabNotice, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateTabNotice, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.updateTabNotice, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateTabNotice, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = parseInt(e);
        if (i >= 0)
            if (i >= 1e3) {
                var o = this.uiid_to_indexs.indexOf(i);
                this.setSel(o >= 0 ? o : 0)
            } else this.setSel(i);
        else this.setSel(0);
        this.updateTabNotice(), this.addMsg()
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.setSel(-1), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(ViewPeiYangPage.prototype, "ViewPeiYangPage");
var VNewModTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/horse/NewModTip.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.sure), this.role = UIRole.create(), this.role.scaleX = this.role.scaleY = 1.2, this.contaienr.addChild(this.role), this.roleSL = UIRole.create(), this.roleSL.x = 50, this.contaienr.addChild(this.roleSL)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.openArg = e, this.vo = e.vodata, this.update(e), this.resetTime(), GameGlobal.tick.addInterv(this.frame, 1, this), GameGlobal.tick.addInterv(this.tick, 1e3, this)
    }, e.prototype.onClose = function () {
        if (this.role.stopAndClear(), this.roleSL.stopAndClear(), GameGlobal.tick.removeInterv(this.frame), GameGlobal.tick.removeInterv(this.tick), this.openArg) {
            var t = GameGlobal.modelAct.actData.getChildByID(10);
            t && t.getRemainSec() >= 0 && (0 == this.openArg.type ? 5 == VoHorse.getInst().highestJie && GameGlobal.modelpeiyang.CG3131ANDWAITSYS(0, 101) : 1 == this.openArg.type ? 5 == VoWing.getInst().highestJie && GameGlobal.modelpeiyang.CG3131ANDWAITSYS(1, 201) : 2 == this.openArg.type ? 5 == VoWeapon.getInst().highestJie && GameGlobal.modelpeiyang.CG3131ANDWAITSYS(2, 301) : 3 == this.openArg.type ? 5 == VoHalo.getInst().highestJie && GameGlobal.modelpeiyang.CG3131ANDWAITSYS(3, 401) : 4 == this.openArg.type && 5 == VoHalo.getInst().highestJie && GameGlobal.modelpeiyang.CG3131ANDWAITSYS(4, 501))
        }
        this.vo && this.vo.highestJie == this.vo.nextJieSkill && (this.vo.isJsNextJieSkill = !0, GameGlobal.layerMgr.open(UIConst.NEWSKILL, {
            vo: this.vo
        }))
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function (t) {
        if (t.isSL) {
            this.role.stopAndClear(), i = t.body, this.role.setBody(i);
            var e = t.bodySL;
            this.roleSL.setShouLing(e), this.roleSL.setWay(1), this.roleSL.validParts(), this.roleSL.$setY(-130), this.roleSL.play()
        } else {
            this.roleSL.stopAndClear();
            var i = t.body,
                o = t.weapon,
                n = t.horse,
                a = t.wing,
                s = t.halo;
            this.role.setHalo(s), this.role.setBody(i), this.role.setWeapon(o), this.role.setHorse(n), this.role.setWing(a)
        }
        this.role.setWay(3), this.role.validParts(), this.role.play(), this.lbModName.text = t.name ? t.name : ""
    }, e.prototype.resetTime = function () {
        this.closeSec = 8, this.updateTime()
    }, e.prototype.frame = function (t) {
        t.imgHightLine.rotation += 2
    }, e.prototype.tick = function (t) {
        t.closeSec -= 1, t.updateTime(), t.closeSec <= 0 && t.closeHandler()
    }, e.prototype.updateTime = function () {
        this.sure.label = this.closeSec + "秒后关闭"
    }, e
}(BaseEUIView);
__reflect(VNewModTip.prototype, "VNewModTip");
var VNewSkillTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "NewModTip", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.sure), this.skillgrid.visible = !0, this.skillgrid.tipGrp.visible = this.skillgrid.lbLv.visible = this.skillgrid.txtNm.visible = !1, this.skillgrid.imglv.visible = !0
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = CFG_Hero.getSkill(e.vo, e.vo.highestJie);
        this.skillgrid.data = i, this.lbText.text = "解锁技能", this.lbModName.text = i.name, this.closeSec = 6, this.updateTime(), GameGlobal.tick.addInterv(this.frame, 1, this), GameGlobal.tick.addInterv(this.tick, 1e3, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.frame), GameGlobal.tick.removeInterv(this.tick)
    }, e.prototype.tick = function (t) {
        t.closeSec -= 1, t.updateTime(), t.closeSec <= 0 && t.closeHandler()
    }, e.prototype.updateTime = function () {
        this.sure.label = this.closeSec + "秒后关闭"
    }, e.prototype.frame = function (t) {
        t.imgHightLine.rotation += 2
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VNewSkillTip.prototype, "VNewSkillTip");
var VPeiYangAtt = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VPeiYangAttSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.addCloseListen(this.backGround), DisplayUtil.popBtnStyle(this.btnClose), this.uirole = UIRole.create(), this.partCont.addChild(this.uirole), this.partCont.scaleX = 1.5, this.partCont.scaleY = 1.5, this.shoulingRole = UIRole.create(), this.shoulingRole.x = 50, this.partCont.addChild(this.shoulingRole), this.imgText = new ImageText, this.imgText.container = this.zhanliContainer, this.imgText.charFunc = ImageText.STRFUNC
    }, e.prototype.addMsg = function () {
        GameGlobal.modelpeiyang.on(ModelPeiYang.msg_peiyangSkin, this.updateSkinAtt, this), GameGlobal.modelpeiyang.on(ModelPeiYang.msg_peiyang, this.updateSkinAtt, this), GameGlobal.modelpeiyang.openSkin(this.data.getType())
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelpeiyang.off(ModelPeiYang.msg_peiyangSkin, this.updateSkinAtt, this), GameGlobal.modelpeiyang.off(ModelPeiYang.msg_peiyang, this.updateSkinAtt, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.data = e, this.addMsg(), this.onUpdate()
    }, e.prototype.onUpdate = function () {
        this.txtTitle.text = this.data.getTitle() + "属性", this.imgText.setText("z" + this.data.zhanli);
        var t = GameGlobal.modelRole.voMine.sceneChars[0],
            e = t._halo,
            i = t._body,
            o = t._horse,
            n = t._weapon,
            a = t._wing,
            s = this.data.getType();
        switch (s) {
            case 0:
                o = this.data.huanHuaMXId;
                break;
            case 1:
                a = this.data.huanHuaMXId;
                break;
            case 2:
                n = this.data.huanHuaMXId;
                break;
            case 3:
                e = this.data.huanHuaMXId;
                break;
            case 4:
                i = GameGlobal.modelPet.curPetVo.getPetModel();
                var r = this.data.huanHuaMXId
        }
        4 != s ? (this.shoulingRole.stopAndClear(), this.uirole.setHalo(e), this.uirole.setBody(i), this.uirole.setHorse(o), this.uirole.setWing(a), this.uirole.setWeapon(n)) : (this.uirole.stopAndClear(), this.uirole.setBody(i), this.shoulingRole.setShouLing(r), this.shoulingRole.setVal(1), this.shoulingRole.validParts(), this.shoulingRole.$setY(-130), this.shoulingRole.play()), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play(), this.updatePeiYangAtt(), this.updateSkinAtt()
    }, e.prototype.updatePeiYangAtt = function () {
        var t = PeiYangAttObject.attObjs,
            e = 0,
            i = "",
            o = "";
        for (var n in t) {
            var a = t[n],
                s = PeiYangAttObject.clone(a);
            s.val = this.data.setAttValue(s.id);
            var r = this.data.getChuShiAtt(s.id);
            s.val += r, 2 > e ? i += s.name + ": " + HtmlUtil.color(s.val, "#10a244") + "\n" : o += s.name + ": " + HtmlUtil.color(s.val, "#10a244") + "\n", e++
        }
        this.txtPYAtt1.textFlow = HtmlUtil.parse(i), this.txtPYAtt2.textFlow = HtmlUtil.parse(o)
    }, e.prototype.updateSkinAtt = function () {
        var t = PeiYangAttObject.attObjs,
            e = 0,
            i = "",
            o = "";
        for (var n in t) {
            var a = t[n],
                s = PeiYangAttObject.clone(a);
            s.val = this.data.getAllSkinAtt(s.id), 2 > e ? i += s.name + ": " + HtmlUtil.color(s.val, "#10a244") + "\n" : o += s.name + ": " + HtmlUtil.color(s.val, "#10a244") + "\n", e++
        }
        this.txtSkinAtt1.textFlow = HtmlUtil.parse(i), this.txtSkinAtt2.textFlow = HtmlUtil.parse(o)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.uirole.stop(), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VPeiYangAtt.prototype, "VPeiYangAtt");
var VPeiYangSkillTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VRoleSkillTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this;
        this.skillgrid.txtNm.visible = !1, this.skillgrid.lbLv.visible = !1, this.skillgrid.imglv.visible = !0, this.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            t.closeHandler()
        }, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(e.skill, e.nextskill, e.peiyang)
    }, e.prototype.update = function (t, e, i) {
        if (t.name.indexOf(".") >= 0) var o = t.name.split(".")[1];
        else o = t.name;
        if (this.lbdes1.textFlow = HtmlUtil.parse(this.getDes(t) + "\n" + HtmlUtil.colorSize("(对主角技能:" + o + "生效)", "#02f156", 20)), !i.lib[i.highestJie + 1]) return this.skillgrid.data = t, this.skillgrid.imglv.source = "skillPage_json." + (t.id % 10 + 1), this.lbname.textFlow = HtmlUtil.parse(t.name + "\n" + HtmlUtil.colorSize("对主角技能生效", "#FFee5d", 22)), this.lbname.lineSpacing = 10, DisplayUtil.remove(this.grp1), void DisplayUtil.remove(this.grp2);
        DisplayUtil.addBy(this.grp1, this.con), DisplayUtil.addBy(this.grp2, this.con), this.lbdes2.visible = this.lbreq.visible = !0;
        var n = i.lib,
            a = GameGlobal.modelRole.voMine.job;
        for (var s in n) {
            var r = n[s],
                l = 1 == a ? r.jnnan : r.jnnv;
            if (e.id == l) {
                this.lbreq.textFlow = HtmlUtil.parse(this.getNameByType(i) + "等级达到" + HtmlUtil.color(s + "阶", "#02f156"));
                break
            }
        }
        this.lbdes2.textFlow = HtmlUtil.parse(this.getNextDes(t, e.id)), this.skillgrid.data = e, this.skillgrid.imglv.source = "skillPage_json." + (e.id % 10 + 1), this.lbname.textFlow = HtmlUtil.parse(e.name + "\n" + HtmlUtil.colorSize("对主角技能生效", "#FFee5d", 22)), this.lbname.lineSpacing = 10
    }, e.prototype.getNameByType = function (t) {
        return t instanceof VoHorse ? "坐骑" : t instanceof VoWing ? "翅膀" : t instanceof VoWeapon ? "神兵" : t instanceof VoHalo ? "光环" : void 0
    }, e.prototype.getDes = function (t) {
        var e = CFG_Skill.LIB[t.id],
            i = e.des;
        if (i.indexOf("#") >= 0 && (i = i.replace(Vo_Skill.REGPP, HtmlUtil.color((t.pp / 100).toString() + "%", "#a8ff00")), i = i.replace(Vo_Skill.REGP, t.p.toString())), i.indexOf("，") >= 0) {
            var o = i.split("，");
            o[o.length - 1] = HtmlUtil.color(o[o.length - 1], "#a8ff00"), i = o.join("，")
        }
        return i
    }, e.prototype.getNextDes = function (t, e) {
        var i = CFG_Skill.LIB[e],
            o = i.des;
        if (o.indexOf("#") >= 0) {
            var n = i.attp + (t.level - 1) * i.attpg,
                a = i.bp + (t.level - 1) * i.pg;
            o = o.replace(Vo_Skill.REGPP, HtmlUtil.color((n / 100).toString() + "%", "#a8ff00")), o = o.replace(Vo_Skill.REGP, a.toString())
        }
        if (o.indexOf("，") >= 0) {
            var s = o.split("，");
            s[s.length - 1] = HtmlUtil.color(s[s.length - 1], "#a8ff00"), o = s.join("，")
        }
        return o
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VPeiYangSkillTip.prototype, "VPeiYangSkillTip");
var VPeiyangSkin = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "VPeiyangSkinSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.txtCostSource), DisplayUtil.popBtnStyle(this.btnLeft), DisplayUtil.popBtnStyle(this.btnRight), this.container.itemRenderer = ItemPeiYangSkin, this.container.dataProvider = this.sourceData, this.container.useVirtualLayout = !1, this.container.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onSel, this), this.txtCostSource.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLink, this), this.btnJiHuo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHuanHua.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnSearch.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOpenAtt, this), this.btnJiHuo.label = "激活", this.btnHuanHua.label = "幻化", this.uirole = UIRole.create(), this.partCont.addChild(this.uirole), this.partCont.scaleX = 1.5, this.partCont.scaleY = 1.5, this.shoulingRole = UIRole.create(), this.shoulingRole.x = 50, this.partCont.addChild(this.shoulingRole), this.imgText = new ImageText, this.imgText.container = this.zhanliContainer, this.imgText.charFunc = ImageText.STRFUNC
    }, e.prototype.onOpenAtt = function () {
        GameGlobal.layerMgr.open(UIConst.UIID_PEIYANGATT, this.data)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget,
            i = this.container.selectedItem;
        switch (e) {
            case this.btnJiHuo:
                if (!i.canBeJiHuo()) return void ViewText.text("材料不足");
                GameGlobal.modelpeiyang.jiHuo(i.cfg.id, this.data.getType());
                break;
            case this.btnHuanHua:
                GameGlobal.modelpeiyang.huanHua(i.cfg.id, this.data.getType())
        }
    }, e.prototype.onLink = function (t) {
        var e = this.container.selectedItem,
            i = e.cfg.dj,
            o = CFG_Item.LIB[i].src,
            n = o.split(","),
            a = n[0];
        this.onTouch(a)
    }, e.prototype.onTouch = function (t) {
        var e = CFG_ATTR.LIB_CLHQ[t];
        CFG_ATTR.openBySrc(e)
    }, e.prototype.setState = function (t) {
        this.currentState = t
    }, e.prototype.onSel = function (t) {
        var e = t.itemIndex;
        this.setSel(e)
    }, e.prototype.setSel = function (t) {
        "number" == typeof t ? (this.container.selectedIndex = t, t >= 0 && this.showInfo()) : (this.container.selectedItem = t, t && this.showInfo())
    }, e.prototype.addMsg = function () {
        GameGlobal.modelpeiyang.on(ModelPeiYang.msg_peiyangHH, this.showInfo, this), GameGlobal.modelpeiyang.on(ModelPeiYang.msg_peiyangJH, this.showInfo, this), GameGlobal.modelpeiyang.on(ModelPeiYang.msg_peiyangSkin, this.onUpdate, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onNotice, this), GameGlobal.modelpeiyang.openSkin(this.data.getType())
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelpeiyang.off(ModelPeiYang.msg_peiyangHH, this.showInfo, this), GameGlobal.modelpeiyang.off(ModelPeiYang.msg_peiyangJH, this.showInfo, this), GameGlobal.modelpeiyang.off(ModelPeiYang.msg_peiyangSkin, this.onUpdate, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onNotice, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e.skin ? (this.data = e.vo, DisplayUtil.fillDataAC(this.sourceData, e.vo.skinMap.getList()), this.container.validateNow(), this.setSel(e.skin), this.txtTitle.text = this.data.getTitle() + "皮肤", this.onNotice(), this.addMsg()) : (this.data = e, DisplayUtil.fillDataAC(this.sourceData, e.skinMap.getList()), this.container.validateNow(), this.setSel(0), this.txtTitle.text = this.data.getTitle() + "皮肤", this.onNotice(), this.addMsg())
    }, e.prototype.onUpdate = function () {
        DisplayUtil.fillDataAC(this.sourceData, this.data.skinMap.getList())
    }, e.prototype.showInfo = function () {
        var t = this.container.selectedItem;
        if (t) {
            var e = this.data.getType(),
                i = GameGlobal.modelRole.voMine.sceneChars[0],
                o = i._halo,
                n = i._body,
                a = i._horse,
                s = i._weapon,
                r = i._wing;
            switch (e) {
                case 0:
                    a = t.cfg.id;
                    break;
                case 1:
                    r = t.cfg.id;
                    break;
                case 2:
                    var l;
                    l = 1 == GameGlobal.modelRole.voMine.job ? t.cfg.mx : t.cfg.mxv, s = l;
                    break;
                case 3:
                    o = t.cfg.id;
                    break;
                case 4:
                    n = GameGlobal.modelPet.curPetVo.getPetModel();
                    var h = t.cfg.id
            }
            if (4 != e ? (this.shoulingRole.stopAndClear(), this.uirole.setHalo(o), this.uirole.setBody(n), this.uirole.setHorse(a), this.uirole.setWing(r), this.uirole.setWeapon(s)) : (this.uirole.stopAndClear(), this.uirole.setBody(n), this.shoulingRole.setShouLing(h), this.shoulingRole.setVal(1), this.shoulingRole.validParts(), this.shoulingRole.$setY(-130), this.shoulingRole.play()), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play(), t.isJH) this.setState("st1"), this.data.huanHuaMXId == t.cfg.id ? (this.iconHuanHua.visible = !0, this.btnHuanHua.visible = !1) : (this.iconHuanHua.visible = !1, this.btnHuanHua.visible = !0), this.btnJiHuo.setNoticeVis(!1);
            else {
                this.setState("st2");
                var c = t.cfg.dj;
                this.costData || (this.costData = new VoItem), this.costData.init(c), this.grid.data = this.costData;
                var p = GameGlobal.modelBag.getItemCount(c);
                this.txtCostName.text = this.costData.name + p + "/1", this.txtCostSource.textFlow = HtmlUtil.underLine(t.cfg.ly), this.btnJiHuo.setNoticeVis(t.canBeJiHuo())
            }
            this.sourceData.itemUpdated(t);
            var u = Vo_TitleItem.ZhanLi(t.cfg.sx);
            this.imgText.setText("z" + u), this.txtTotalZhanli.textFlow = HtmlUtil.parse(this.data.getTitle() + "皮肤总战力: " + HtmlUtil.color(this.data.skinZhanli, "#10a244")), this.txtTotalSkin.textFlow = HtmlUtil.parse("已激活" + this.data.getTitle() + "皮肤总数: " + HtmlUtil.color(this.data.getJiHuoSkins(), "#10a244")), this.showJHAtt()
        }
    }, e.prototype.onNotice = function () {
        var t = this.container.$children;
        if (t.length > 0)
            for (var e = 0, i = t.length; i > e; e++) {
                var o = t[e];
                o.notice()
            }
    }, e.prototype.showJHAtt = function () {
        var t = this.container.selectedItem,
            e = 0;
        for (var i in PeiYangAttObject.attObjs) {
            var o = PeiYangAttObject.attObjs[i],
                n = PeiYangAttObject.clone(o);
            n.val = t.getJhAttribute(n.id);
            var a = this.attContainer.getChildAt(e++);
            t.isJH ? (this.txtAttDescript.textColor = 12082702, a.textFlow = HtmlUtil.parse(HtmlUtil.color(n.name + ": ", "#684c43") + HtmlUtil.color(n.val, "#10a244"))) : (this.txtAttDescript.textColor = 10066329, a.textFlow = HtmlUtil.parse(HtmlUtil.color(n.name + ": ", "#999999") + HtmlUtil.color(n.val, "#999999")))
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.setSel(-1), this.removeMsg(), this.uirole.stopAndClear(), this.shoulingRole.stopAndClear()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VPeiyangSkin.prototype, "VPeiyangSkin");
var VStoreBuyTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VStoreBuyTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.txtSource), DisplayUtil.popBtnStyle(this.btnAdd), DisplayUtil.popBtnStyle(this.btnMinus), this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnAdd10.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnMinus.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnMinus10.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnCancle.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.txtSource.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnCancle.label = "取消", this.btnSure.label = "购买", this.btnAdd10.label = "+10", this.btnMinus10.label = "-10", this.txtSource.textFlow = HtmlUtil.underLine("材料副本")
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnCancle:
                this.closeHandler();
                break;
            case this.btnSure:
                var i = this.cfg.id.toString().charAt(0);
                this.hasEnoughOwn() && (GameGlobal.modelShangCheng.CG905(parseInt(i), this.cfg.id, parseInt(this.txtCount.text)), this.closeHandler());
                break;
            case this.txtSource:
                GameGlobal.layerMgr.open(UIConst.VCLFB), this.closeHandler()
        }
    }, e.prototype.hasEnoughOwn = function () {
        var t = this.getCost(),
            e = this.getOwnCount(t),
            i = parseInt(this.txtCount.text),
            o = t.count;
        return o * i > e ? (33 == t.type ? (GameGlobal.layerMgr.close(this.id), platform.askOpenRecharge()) : GameGlobal.layerMgr.open(UIConst.CAILIAOGET, t.id), !1) : !0
    }, e.prototype.getOwnCount = function (t) {
        var e = 0;
        switch (t.type) {
            case 1:
                e = GameGlobal.modelBag.getItemCount(t.id);
                break;
            case 2:
                e = GameGlobal.modelBag.getEquipCount(t.id);
                break;
            case 31:
                e = GameGlobal.modelRole.voMine.yinliang;
                break;
            case 32:
                e = GameGlobal.modelRole.voMine.bYuanbao;
                break;
            case 33:
                e = GameGlobal.modelRole.voMine.yuanbao
        }
        return e
    }, e.prototype.onChange = function (t) {
        var e = t.currentTarget,
            i = parseInt(this.txtCount.text);
        switch (e) {
            case this.btnAdd:
                i++;
                break;
            case this.btnAdd10:
                i += 10;
                break;
            case this.btnMinus:
                i--;
                break;
            case this.btnMinus10:
                i -= 10
        }
        i = Math.max(1, i);
        var o = Math.min(i, this.getMaxCount());
        this.updateCost(o)
    }, e.prototype.getMaxCount = function () {
        var t = VoShangCheng.getBoughtNumById(this.cfg.id),
            e = this.cfg.dayxg,
            i = this.cfg.fxg;
        return e + i == 0 ? 1e7 : e + i - t
    }, e.prototype.dealWithArg = function (t) {
        if ("number" == typeof t) this.cfg = CFG_STORE.priorChosen(t), this.updateCost(1);
        else if (t instanceof PeiYangCost) {
            this.cfg = CFG_STORE.priorChosen(t.id);
            var e = Math.min(this.getMaxCount(), t.needCount);
            this.updateCost(e), this.isAddEff(t.vopy)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.dealWithArg(e), this.onUpdate()
    }, e.prototype.isAddEff = function (t) {
        if (this.btnSure.hideEff(), t.highestJie >= 2 && t.highestJie <= 5) {
            var e = t.getCfgById(t.highestJie),
                i = e.jy,
                o = t.curExp;
            o / i >= .9 && this.btnSure.showEff(1.4, 1.3)
        }
    }, e.prototype.onUpdate = function () {
        var t = this.cfg.wpid.join(","),
            e = ConfigHelp.makeVoList(t)[0];
        this.grid.data = e, this.txtName.text = e.name, this.txtName.textColor = Color.getColorInt(e.quality);
        var i = this.getCost();
        this.iconCost.source = IconUtil.getIconUrl(i.icon)
    }, e.prototype.updateCost = function (t) {
        var e = this.getCost(),
            i = e.count;
        this.txtCount.text = t + "", this.txtPrice.text = i * t + "";
        var o = this.getOwnCount(e);
        o < parseInt(this.txtPrice.text) ? this.txtPrice.textColor = 16646144 : this.txtPrice.textColor = 1090116
    }, e.prototype.getCost = function () {
        var t = this.cfg.xh,
            e = ConfigHelp.makeVoList(t.join(","))[0];
        return e
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VStoreBuyTip.prototype, "VStoreBuyTip");
var ItemPeiYangSkin = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemPeiYangSkinSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtName.text = t.cfg.n, t.isJH ? this.iconJiHuo.source = "PYAtlas_json.jhBtn" : this.iconJiHuo.source = "PYAtlas_json.jhPoint", this.notice()
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, this.chosen.visible = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.notice = function () {
        this.noticeIcon.visible = this.data.canBeJiHuo()
    }, e
}(ItemBase);
__reflect(ItemPeiYangSkin.prototype, "ItemPeiYangSkin");
var VoHalo = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.lib = CFG_PeiYang.LIB_HALO, e.initSkins(CFG_PeiYang.LIB_HALOSKIN), e.initAttMap(), e
    }
    return __extends(e, t), e.getInst = function () {
        return this._inst || (this._inst = new e)
    }, e.prototype.getTitle = function () {
        return "光环"
    }, e.prototype.getType = function () {
        return 3
    }, e
}(VoPeiYang);
__reflect(VoHalo.prototype, "VoHalo");
var VoHorse = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.lib = CFG_PeiYang.LIB_HORSE, e.initSkins(CFG_PeiYang.LIB_HORSESKIN), e.initAttMap(), e
    }
    return __extends(e, t), e.getInst = function () {
        return this._inst || (this._inst = new e)
    }, e.prototype.getTitle = function () {
        return "坐骑"
    }, e.prototype.getType = function () {
        return 0
    }, e
}(VoPeiYang);
__reflect(VoHorse.prototype, "VoHorse");
var CFG_BuyOneGiveOne = function () {
    function t() {}
    return t
}();
__reflect(CFG_BuyOneGiveOne.prototype, "CFG_BuyOneGiveOne");
var VoPeiYangSkin = function () {
    function t() {
        this.zhanli = 0
    }
    return t.prototype.canBeJiHuo = function () {
        var t = this.cfg.dj;
        if (!this.isJH && t > 0) {
            var e = GameGlobal.modelBag.getItemCount(t);
            if (e > 0) return !0
        }
        return !1
    }, t.prototype.getJhAttribute = function (t) {
        for (var e = Util.strToIntArr(this.cfg.sx), i = 0; i < e.length; i++) {
            var o = e[i][0],
                n = e[i][1];
            if (o == t) return n
        }
        return 0
    }, t
}();
__reflect(VoPeiYangSkin.prototype, "VoPeiYangSkin");
var VoShouLing = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.lib = CFG_PeiYang.LIB_SHOULING, e.initSkins(CFG_PeiYang.LIB_SHOULINSKIN), e.initAttMap(), e
    }
    return __extends(e, t), e.getInst = function () {
        return this._inst || (this._inst = new e)
    }, e.prototype.getTitle = function () {
        return "兽灵"
    }, e.prototype.getType = function () {
        return 4
    }, e
}(VoPeiYang);
__reflect(VoShouLing.prototype, "VoShouLing");
var VoWeapon = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.lib = CFG_PeiYang.LIB_WEAPON, e.initSkins(CFG_PeiYang.LIB_WEAPONSKIN), e.initAttMap(), e
    }
    return __extends(e, t), e.getInst = function () {
        return this._inst || (this._inst = new e)
    }, e.prototype.getTitle = function () {
        return "神兵"
    }, e.prototype.getType = function () {
        return 2
    }, e
}(VoPeiYang);
__reflect(VoWeapon.prototype, "VoWeapon");
var VoWing = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.lib = CFG_PeiYang.LIB_WING, e.initSkins(CFG_PeiYang.LIB_WINGSKIN), e.initAttMap(), e
    }
    return __extends(e, t), e.getInst = function () {
        return this._inst || (this._inst = new e)
    }, e.prototype.getTitle = function () {
        return "翅膀"
    }, e.prototype.getType = function () {
        return 1
    }, e
}(VoPeiYang);
__reflect(VoWing.prototype, "VoWing");
var ViewZSRemindTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewZSRemindTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.btnHand.label = "去使用", this.btnClose.label = "关闭", this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.addCloseListen(this.btnClose)
    }, e.prototype.onHand = function () {
        var t = this.getType();
        switch (t) {
            case 0:
                break;
            case 1:
                break;
            case 2:
                break;
            case 3:
                break;
            case 4:
        }
    }, e.prototype.getType = function () {
        return 0
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewZSRemindTip.prototype, "ViewZSRemindTip");
var VoZhiShengYiJie = function () {
    function t() {
        this.gotState = 0
    }
    return t.updateState = function (e, i) {
        var o = this.map.getByKey(e);
        o || (o = new t, o.cfg = CFG_PeiYang.LIB_ZHISHENG[e], this.map.add(o, e)), o.gotState = i
    }, t.getFirstCanGot = function () {
        for (var t = this.map.getByIndex(0), e = !1, i = 0, o = this.map.getLength(); o > i; i++) {
            var n = this.map.getByIndex(i);
            if (1 == n.gotState) {
                t = n, e = !0;
                break
            }
        }
        if (0 == e)
            for (var i = 0, o = this.map.getLength(); o > i; i++) {
                var n = this.map.getByIndex(i);
                if (2 == n.gotState) {
                    t = n;
                    break
                }
            }
        return t
    }, t.hasNotAwardToGot = function () {
        for (var t = !0, e = 0, i = this.map.getLength(); i > e; e++) {
            var o = this.map.getByIndex(e);
            if (1 == o.gotState) {
                t = !1;
                break
            }
        }
        return t
    }, t.isInActionTime = function (e) {
        switch (e) {
            case 0:
                return null != t.map.getByKey(101);
            case 1:
                return null != t.map.getByKey(201);
            case 2:
                return null != t.map.getByKey(301);
            case 3:
                return null != t.map.getByKey(401);
            case 4:
                return null != t.map.getByKey(501)
        }
        return !1
    }, t.isZhiShengDan = function (t) {
        return this.zhiShengDans.indexOf(t) >= 0
    }, t.getStateByType = function (e) {
        switch (e) {
            case 0:
                return t.map.getByKey(101).gotState;
            case 1:
                return t.map.getByKey(201).gotState;
            case 2:
                return t.map.getByKey(301).gotState;
            case 3:
                return t.map.getByKey(401).gotState;
            case 4:
                return t.map.getByKey(501).gotState
        }
    }, t.jinRiChongZhi = 0, t.map = new CommondMap, t.zhiShengDans = [1610, 1611, 1612, 1613, 1614], t
}();
__reflect(VoZhiShengYiJie.prototype, "VoZhiShengYiJie");
var VZhiShengYiJie = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.description = "今日充值100元\n送{0}直升丹\n{0}立刻提升一阶", e.desName = "{0}直升丹", e.skinName = "VZhiShengYiJieSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.btnHand.label = "点击领取", this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.role = UIRole.create(), this.rolePart.addChild(this.role), this.skillgrid.lbLv.visible = this.skillgrid.txtNm.visible = !1, this.skillgrid.imgBg.source = "CM1_json.bm_gridbg5", this.skillgrid.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onskillT, this), this.imgtxt = new ImageText, this.imgtxt.container = this.zlGrp, this.imgtxt.charFunc = ImageText.STRFUNC, this.imgtxt.setText("25688")
    }, e.prototype.onskillT = function () {
        GameGlobal.layerMgr.open(UIConst.PEIYANGSKILLTIP, {
            skill: this.skillvo,
            nextskill: this.nextskillvo,
            peiyang: this.vopy
        })
    }, e.prototype.onHand = function () {
        var t = this.curVo.gotState;
        return 0 == t ? (platform.openRecharge(), void this.closeHandler()) : void(0 != this.btnHand.enabled && GameGlobal.modelpeiyang.CG3133(this.curVo.cfg.bh))
    }, e.prototype.addMsg = function () {
        GameGlobal.modelpeiyang.on(ModelPeiYang.msg_zhishengYijieData, this.onUpdate, this), GameGlobal.modelpeiyang.on(ModelPeiYang.msg_zhiShengYijieGet, this.updateGot, this), GameGlobal.modelpeiyang.CG3131()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelpeiyang.off(ModelPeiYang.msg_zhishengYijieData, this.onUpdate, this), GameGlobal.modelpeiyang.off(ModelPeiYang.msg_zhiShengYijieGet, this.updateGot, this)
    }, e.prototype.onUpdate = function () {
        this.curVo = VoZhiShengYiJie.getFirstCanGot(), this.updateIcons(), this.upRoleAndSkill(), ConfigHelp.makeStrGrids(this.curVo.cfg.jl, this.grids, 0, 0, this.gridContainer, !0), this.txtChongZhi.textFlow = HtmlUtil.parse("今日已充值: " + HtmlUtil.colorSize(VoZhiShengYiJie.jinRiChongZhi + "元", "#d1fe1d", 24));
        var t = this.curVo.gotState;
        switch (t) {
            case 0:
                this.btnHand.label = "前往充值", this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!1);
                break;
            case 1:
                this.btnHand.label = "点击领取", this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!0);
                break;
            case 2:
                this.btnHand.label = "已领取", this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1)
        }
        var e = GameGlobal.modelAct.actData.getChildByID(10),
            i = e.remainTime;
        i > 0 ? this.addTick() : this.removeTick()
    }, e.prototype.updateIcons = function () {
        switch (this.curVo.cfg.bh) {
            case 101:
                this.iconType.source = "ZSYJAtlas_json.horse", this.iconTypeDan.source = "ZSYJAtlas_json.horseDan";
                break;
            case 201:
                this.iconType.source = "ZSYJAtlas_json.wing", this.iconTypeDan.source = "ZSYJAtlas_json.wingDan";
                break;
            case 301:
                this.iconType.source = "ZSYJAtlas_json.weapon", this.iconTypeDan.source = "ZSYJAtlas_json.weaponDan";
                break;
            case 401:
                this.iconType.source = "ZSYJAtlas_json.halo", this.iconTypeDan.source = "ZSYJAtlas_json.haloDan";
                break;
            case 501:
                this.iconType.source = "ZSYJAtlas_json.shouLing", this.iconTypeDan.source = "ZSYJAtlas_json.shouLingDan"
        }
    }, e.prototype.addTick = function () {
        GameGlobal.modelAct.actData.getChildByID(10);
        GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onTick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(10);
        if (e) {
            var i = e.getRemainSec();
            0 >= i && t.closeHandler()
        } else t.closeHandler()
    }, e.prototype.updateGot = function () {
        var t = VoZhiShengYiJie.hasNotAwardToGot();
        t ? this.closeHandler() : this.onUpdate()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeTick(), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.prototype.upRoleAndSkill = function () {
        var t = this.curVo.cfg.bh;
        switch (t) {
            case 101:
                var e = VoHorse.getInst();
                break;
            case 201:
                e = VoWing.getInst();
                break;
            case 301:
                e = VoWeapon.getInst();
                break;
            case 401:
                e = VoHalo.getInst();
                break;
            case 501:
                e = VoShouLing.getInst()
        }
        if (this.vopy = e, 501 != t) {
            this.skillgrid.visible = this.skillgrid.tipGrp.visible = this.skillgrid.imglv.visible = !0, this.slGrp.visible = !1, this.lbdes.text = "提升主角技能品阶";
            var i = this.getOpenJie(!0, e),
                o = this.skillvo = CFG_Hero.getSkill(e, e.highestJie);
            o = this.nextskillvo = CFG_Hero.getNextSkill(e, o.level, !1);
            var n = i + "阶激活";
            this.skillgrid.data = o, this.skillgrid.imglv.source = "skillPage_json." + (o.id % 10 + 1), this.skillgrid.lbtip.text = n
        } else this.skillgrid.visible = !1, this.slGrp.visible = !0, this.lbdes.text = "兽灵8阶可上阵", i = 6;
        var a = GameGlobal.modelRole.voMine.job,
            s = e.getCfgById(i);
        if (s)
            if (301 == t) {
                var r = 1 == a ? s.mx : s.mxv;
                this.txtName.text = 1 == a ? s.mc : s.mcv
            } else r = s.mx, this.txtName.text = s.mc;
        else this.txtName.text = "", console.log("error mx");
        var l = this.role;
        l.stopAndClear(), l.scaleX = l.scaleY = 1, l.x = l.y = 0, l.rotation = 0;
        var h = 700;
        switch (t) {
            case 101:
                l.y = 20, l.scaleX = l.scaleY = 1.2, l.setHorse(r);
                break;
            case 201:
                l._horse = 1, l.y = 190, l.x = 50, l.scaleX = l.scaleY = 2.3, l.setWing(r);
                break;
            case 301:
                l._horse = 1, 1 == a ? (l.y = 40, l.x = 5, l.rotation = 40, l.scaleX = l.scaleY = 1.3) : (l.y = 70, l.x = 10, l.rotation = 50, l.scaleX = l.scaleY = 2.5), l.setWeapon(r);
                break;
            case 401:
                l.y = -20, l.x = 5, l.scaleX = l.scaleY = 1.3, l.setHalo(r), h = 350;
                break;
            case 501:
                l.y = -40, l.x = 5, l.scaleX = l.scaleY = 3, l.setShouLing(r)
        }
        501 == t ? l.setWay(1) : l.setWay(3), l.validParts(), l.play(h)
    }, e.prototype.getOpenJie = function (t, e) {
        var i = e.lib,
            o = t ? 1 : e.highestJie,
            n = i[o],
            a = !1,
            s = GameGlobal.modelRole.voMine.job,
            r = 1 == s ? n.jnnan : n.jnnv;
        for (var l in i) {
            var h = i[l],
                c = 1 == s ? h.jnnan : h.jnnv;
            if (a && r != c) return parseInt(l);
            r == c && (a = !0)
        }
        return parseInt(l)
    }, e
}(BaseEUIView);
__reflect(VZhiShengYiJie.prototype, "VZhiShengYiJie");
var ModelPet = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.neverWarnGoodZZ = !1, e.isShowSkillLock = !1, e.petMap = {}, e.petVos = [], e.isInit = !1, e.neverWarnGP = !1, e.selposid = -1, e.shangZhenVos = [], e.hasCatchPet = !1, e.isCatching = !1, e.canCatchNum = 0, e.nextCatchTime = 99999, e.nextCatchTimeFlag = 0, e.catchingPets = [], e.remainAssistTimes = 0, e
    }
    return __extends(e, t), e.getPetSpecName = function (t) {
        if (1 == t) var e = "宝宝";
        else 2 == t ? e = "变异" : 3 == t ? e = "灵兽" : 4 == t && (e = "神兽");
        return e
    }, e.getPetTypeName = function (t) {
        if (1 == t) var e = "物攻";
        else e = "法攻";
        return e
    }, e.prototype.setZZLVLabel = function (t, e) {
        var i = this.getZZLVText(e),
            o = this.getZZColorInt(e);
        t.$setText(i), t.$setTextColor(o)
    }, e.prototype.getZZColorInt = function (t) {
        var e;
        return e = t >= 3 ? Color.OR : t >= 2 ? Color.PU : t >= 1 ? Color.BL : Color.GR
    }, e.prototype.getZZColorStr = function (t) {
        var e;
        return e = t >= 3 ? Color.OR_STR : t >= 2 ? Color.PU_STR : t >= 1 ? Color.BL_STR : Color.GR_STR
    }, e.prototype.getZZLVText = function (t) {
        var e;
        return e = t >= 3 ? "万里挑一" : t >= 2 ? "出类拔萃" : t >= 1 ? "资质优良" : "资质平庸"
    }, e.prototype.caculateZZLV = function (t, e) {
        for (var i = CFG_Pet.PETLIB[t], o = Util.parseIntStr(i.wz), n = o.length - 1; n >= 0; n--)
            if (e >= o[n]) return n;
        return 0
    }, e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(730, this.GC_PETALLINFO730, this), e.regHand(734, this.GC_ENABEL734, this), e.regHand(736, this.GC_XISUIRET, this), e.regHand(738, this.GC_PETATTR, this), e.regHand(732, this.GC_FSTATE, this), e.regHand(740, this.GC_SKILLLIST, this), e.regHand(742, this.GC_EXPPEIYANG, this), e.regHand(744, this.GC_PETZZPEYANG, this), e.regHand(746, this.GC_PETCZPEYANG, this), e.regHand(748, this.GC_NAEMING, this), e.regHand(750, this.GC_SKILLLOCK, this), e.regHand(754, this.GC_PETJINJIE, this), e.regHand(752, this.GC_PETEXP, this), e.regHand(756, this.GC_SAVEXILIAN, this), e.regHand(758, this.GC_XYCHECK, this), e.regHand(1570, this.GC_ZHUOPET, this), e.regHand(1572, this.GC_ZHUOPETTIME, this), e.regHand(1574, this.GC_ZHUOPETRET, this), e.regHand(1582, this.GC_TEAMUPDATE, this), e.regHand(1584, this.GC_JOINTEAMRET, this), e.regHand(1586, this.GC_TEAMCATCH, this), e.regHand(1588, this.GC_LEAVETEAM, this), e.regHand(3222, this.GC3222, this), e.regHand(3224, this.GC3224, this), e.regHand(3226, this.GC3226, this), e.regHand(3228, this.GC3228, this)
    }, e.prototype.setIsShowPetLock = function (t) {
        this.isShowSkillLock = t, this.notify(e.MSG_FIGHTSTCHANGE)
    }, e.prototype.getPetVoByPetID = function (t) {
        var e = CFG_Pet.PETLIB[t];
        return this.getPetMap()[e.p]
    }, e.prototype.getFightPetList = function () {
        var t = [];
        for (var e in this.petMap) {
            var i = this.petMap[e];
            i.fightPos > 0 && t.push(i)
        }
        return t
    }, e.prototype.getPetMap = function () {
        return this.isInit || this.initVos(), this.petMap
    }, e.prototype.getPetArr = function () {
        return this.isInit || this.initVos(), this.petVos
    }, e.prototype.getSZPetVo = function () {
        var t = this.shangZhenVos;
        return t.length ? t[0] : this.getPetVoByPetID(10001)
    }, e.prototype.getEOrCEBestPetVo = function (t) {
        for (var e, i = this.getPetArr(), o = 0, n = i.length; n > o; o++) {
            var a = i[o];
            (1 & t && a.isEnable || 2 & t && a.canEnable()) && (!e || a.pos > e.pos) && (e = a)
        }
        return e
    }, e.petHeadSort = function (t, e) {
        GameGlobal.modelPet;
        if (t.fightPos && e.fightPos) return t.fightPos - e.fightPos;
        if (t.fightPos) return -1;
        if (e.fightPos) return 1;
        var i = (t.isEnable ? 1e9 : 0) + (t.canEnable() ? 1e8 : 0) - t.pos,
            o = (e.isEnable ? 1e9 : 0) + (e.canEnable() ? 1e8 : 0) - e.pos;
        return o - i
    }, e.prototype.initVos = function () {
        this.isInit = !0;
        var t = CFG_Pet.POSLIB;
        for (var e in t) {
            var i = t[e],
                o = this.petVos[e];
            o || (o = new VoPet, o.pos = i.pos, o.poscfg = i, o.initLib(i.pos)), this.petMap[o.pos] = o, this.petVos.push(o)
        }
    }, e.prototype.setSelID = function (t) {
        var i = this.getPetVoByPetID(t);
        i && (this.curPetCFG = i.petcfg, this.curPetVo = i, this.notify(e.MSG_SELCHANGE))
    }, e.prototype.selSelPos = function (t) {
        this.selposid = t, this.curPetVo = this.getPetMap()[t], this.curPetVo.isEnable ? this.curPetCFG = this.curPetVo.petcfg : this.curPetCFG = this.curPetVo.basecfg, this.notify(e.MSG_SELCHANGE, this.curPetVo.sysid)
    }, e.prototype.setCurPetCFG = function (t) {
        this.curPetCFG = t, this.notify(e.MSG_FIGHTSTCHANGE)
    }, e.prototype.enablePet = function (t) {
        var e = CFG_Pet.PETLIB[t];
        if ("0" != e.item) {
            if (GameGlobal.modelBag.getItemCount(e.item[1]) < e.item[2]) return void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, e.item[1])
        } else if (GameGlobal.modelRole.voMine.level < e.level) return void ViewText.text("等级未达");
        this.CG_ENABLE733(t)
    }, e.prototype.changePetSkillLock = function (t, e) {
        var i = -1,
            o = t.skillLst.length,
            n = Config.getConfig(petskill_131).get(o);
        if (n) {
            for (var a = n.lockingmaximum, s = 0; o > s; s++)
                if (t.skillLst[s] && t.skillLst[s].id == e) {
                    i = s;
                    break
                } if (-1 != i) {
                var r = t.skillLst[s],
                    l = t.getSkillLockNum();
                if (!r.skillLock && l >= a) {
                    for (var h = Config.getConfig(petskill_131).values, c = 0, p = 0, s = 0, u = h.length; u > s; s++) {
                        var d = h[s];
                        if (d.lockingmaximum > a) {
                            c = s + 1, p = d.lockingmaximum;
                            break
                        }
                    }
                    return void(c > 0 ? ViewText.text(Lang.reTxt("开孔数量达到{0}个,才能锁定{1}个技能", c, p)) : ViewText.text("已达到最大的锁定数！"))
                }
                var f = r.skillLock ? 0 : 1;
                this.CG_SKILLLOCK(i, t.sysid, f)
            }
        }
    }, e.prototype.GC_PETALLINFO730 = function (t, i) {
        var o = i.readShort();
        t.flag730 || (t.clearFightStatus(), t.flag730 = !0);
        for (var n = 0; o > n; n++) {
            var a = i.readInt(),
                s = t.getPetVoByPetID(a),
                r = !1;
            s.isEnable && s.sysid != a && (GameGlobal.layerMgr.open(UIConst.PETENBLETIP, a), r = !0), s.setPetSysid(a), s.isEnable = !0, s.nickName = i.readUTF();
            var l = i.readByte();
            r || (s.fightPos = l), s.fightPos > 0 && (t.shangZhenVos[s.fightPos - 1] = s), 1 == s.fightPos && GameGlobal.modelRole.voMine.setFollowPetVo(s), s.level = i.readShort(), s.exp = i.readInt(), s.z_hp = i.readInt(), s.z_att = i.readInt(), s.z_pDef = i.readInt(), s.z_mDef = i.readInt(), s.z_speed = i.readInt(), s.z_growup = i.readInt(), s.zztimes = i.readByte(), s.growuptimes = i.readByte(), s.hp = i.readInt(), s.att = i.readInt(), s.phyDef = i.readInt(), s.speDef = i.readInt(), s.speed = i.readInt(), s.crit = i.readShort(), s.resCrit = i.readShort(), s.str = i.readInt();
            var h = i.readShort();
            s.skillLst || (s.skillLst = []);
            for (var c = 0, h = h; h > c; c++) {
                var p = i.readByte(),
                    a = i.readInt(),
                    u = 0 != i.readByte(),
                    d = Vo_Skill.create(a, 1);
                d.index = p, s.skillLst[p] = d, d.skillLock = u, d.must = d.id == s.petcfg.bdjn, d.initPetData()
            }
        }
        t.notify(e.MSG_LISTCHANGE)
    }, e.prototype.CG_ENABLE733 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(733, e)
    }, e.prototype.GC_ENABEL734 = function (t, e) {
        var i = (e.readByte(), e.readInt());
        if (10001 != i) {
            var o = t.getPetVoByPetID(i);
            o && (GameGlobal.layerMgr.open(UIConst.PETENBLETIP, i), GameGlobal.modelTuJian.noticNow()), ViewText.text("成功激活")
        }
    }, e.prototype.GC_XISUIRET = function (t, i) {
        var o = i.readInt(),
            n = t.getPetVoByPetID(o);
        if (n) {
            n.setPetSysid(o), n.xilian = !0, n.s_hp = i.readInt(), n.s_att = i.readInt(), n.s_pDef = i.readInt(), n.s_mDef = i.readInt(), n.s_speed = i.readInt(), n.s_growup = i.readInt(), n.zztimes = 0, n.growuptimes = 0;
            i.readByte()
        }
        t.notify(e.MSG_PETZZCHANGE), GameGlobal.layerMgr.isOpenView(UIConst.PET) && ViewText.text("洗髓成功"), t.removeFlage(735)
    }, e.prototype.GC_PETATTR = function (t, i) {
        var o = i.readInt(),
            n = t.getPetVoByPetID(o);
        n && (n.hp = i.readInt(), n.att = i.readInt(), n.phyDef = i.readInt(), n.speDef = i.readInt(), n.speed = i.readInt(), n.crit = i.readShort(), n.resCrit = i.readShort(), n.str = i.readInt(), t.notify(e.MSG_PETZZCHANGE, o))
    }, e.prototype.CG_NAMING = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeUTF(e), this.sendSocket(747, i)
    }, e.prototype.GC_NAEMING = function (t, i) {
        var o = i.readByte(),
            n = i.readInt(),
            a = t.getPetVoByPetID(n);
        if (2 == o) return void ViewText.text("宠物名字含有敏感字");
        if (a) {
            var s = i.readUTF();
            a.nickName = s, ViewText.text("取名成功"), t.notify(e.MSG_SELCHANGE)
        }
    }, e.prototype.CG_FSTATE = function (t) {
        var e = this.getBytes();
        e.writeShort(t.length);
        for (var i = 0; i < t.length; i++) e.writeInt(t[i]);
        this.sendSocket(731, e)
    }, e.prototype.clearFightStatus = function () {
        for (var t = 0, e = this.shangZhenVos.length; e > t; t++) this.shangZhenVos[t] && (this.shangZhenVos[t].fightPos = 0);
        this.shangZhenVos.length = 0
    }, e.prototype.GC_FSTATE = function (t, i) {
        t.clearFightStatus();
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = i.readInt();
            if (0 != a) {
                var s = t.getPetVoByPetID(a);
                s.fightPos = o + 1, t.shangZhenVos[s.fightPos - 1] = s
            }
        }
        t.shangZhenVos.length ? GameGlobal.modelRole.voMine.setFollowPetVo(t.shangZhenVos[0]) : GameGlobal.modelRole.voMine.setFollowPetVo(null), t.notify(e.MSG_FIGHTSTCHANGE)
    }, e.prototype.CG_XISUI = function (t) {
        if (!this.isFlag(735)) {
            this.setFlag(735);
            var e = this.getBytes();
            e.writeInt(t), this.sendSocket(735, e)
        }
    }, e.prototype.CG_JINJIE = function (t) {
        var e = GameGlobal.modelPet.curPetVo.gift;
        e && (Vo_PetGiftSkill.lockskill = e.findLockSkill());
        var i = this.getBytes();
        i.writeInt(t), this.sendSocket(737, i)
    }, e.prototype.CG_SKILLLOCK = function (t, e, i) {
        var o = this.getBytes();
        o.writeByte(t), o.writeInt(e), o.writeByte(i), this.sendSocket(749, o)
    }, e.prototype.GC_SKILLLIST = function (t, i) {
        var o = i.readInt(),
            n = t.getPetVoByPetID(o),
            a = i.readShort();
        if (!a) return void ViewText.text("没有发生任何变化！！！");
        var s = [];
        if (n)
            for (var r = 0; a > r; r++) {
                var l = i.readByte(),
                    h = i.readInt(),
                    c = (i.readByte(), n.skillLst[l]);
                c ? (c.id != h && s.push(h), c.setTo(h, 1)) : (c = Vo_Skill.create(h, 1), n.skillLst[l] = c, c.id == n.petcfg.bdjn ? c.must = !0 : c.must = !1, s.push(h)), c.initPetData()
            }
        t.notify(e.MSG_SKILLCHANGE), t.notify(e.MSG_NEWSKILL, s)
    }, e.prototype.GC_EXPPEIYANG = function (t, i) {
        var o = (i.readByte(), i.readInt()),
            n = i.readShort(),
            a = i.readInt(),
            s = t.getPetVoByPetID(o),
            r = i.readInt();
        if (s) {
            var l = VoPet.caculateSkillLen(s.level),
                h = VoPet.caculateSkillLen(n),
                c = s.gift;
            if (c) var p = c.findLockSkill();
            if (s.level = n, s.exp = a, s.str = r, c)
                for (var u, d = 0, f = 0; f < p.length; f++) {
                    var g = parseInt(p[f].parm.split(",")[0]);
                    if (1 == g && !p[f].isLock()) {
                        var m = parseInt(p[f].parm.split(",")[1]);
                        m > d && (d = m, u = p[f])
                    }
                }
            h > l && GameGlobal.layerMgr.open(UIConst.PETSKILLOPENTIP, {
                vo: s,
                curr: h,
                prev: l
            }), c && u && (GameGlobal.layerMgr.close(UIConst.PETSKILLOPENTIP), GameGlobal.layerMgr.open(UIConst.PETSKILLOPENTIP, {
                vo: u
            }))
        }
        t.notify(e.MSG_EXPPYREST)
    }, e.prototype.GC_PETZZPEYANG = function (t, i) {
        var o = i.readInt(),
            n = t.getPetVoByPetID(o);
        if (n) {
            var a = i.readByte(),
                s = i.readShort();
            1 == a ? n.z_hp = s : 2 == a ? n.z_att = s : 3 == a ? n.z_pDef = s : 4 == a ? n.z_mDef = s : 5 == a && (n.z_speed = s), n.zztimes = i.readByte(), n.str = i.readInt(), t.notify(e.MSG_PETZZCHANGE), t.notify(e.MSG_ZZPYRET)
        }
    }, e.prototype.CG_ZZPEIYANG = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeByte(e), this.sendSocket(743, i)
    }, e.prototype.GC_SKILLLOCK = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = i.readByte(),
                s = i.readByte(),
                r = t.getPetVoByPetID(n);
            if (r) {
                var l = r.skillLst[a];
                l && (l.skillLock = 1 == s, t.notify(e.MSG_SKILLLOCKVIS))
            }
        } else console.log("SKILLLOCKRET: " + o)
    }, e.prototype.CG_LEARNSKILL = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeUTF(e), this.sendSocket(739, i)
    }, e.prototype.CG_UPGRADEITEM = function (t, e, i) {
        var o = this.getBytes();
        o.writeInt(e), o.writeInt(i), o.writeByte(t), this.sendSocket(741, o)
    }, e.prototype.CG_CHENGZHANG = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(745, e)
    }, e.prototype.GC_PETCZPEYANG = function (t, i) {
        var o = i.readInt(),
            n = t.getPetVoByPetID(o);
        n && (n.z_growup = i.readInt(), n.str = i.readInt(), n.growuptimes = i.readByte(), t.notify(e.MSG_LISTCHANGE), t.notify(e.MSG_ZZPYRET))
    }, e.prototype.CG_PETSKILLLOCK = function (t, e, i) {
        var o = this.getBytes();
        o.writeByte(t), o.writeInt(e), o.writeByte(i)
    }, e.prototype.GC_PETSKILLLOCK = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = e.readInt(),
                n = t.getPetVoByPetID(o),
                a = e.readByte(),
                s = e.readByte(),
                r = n.skillLst[a];
            if (!r) return;
            r.skillLock = s > 0
        }
    }, e.prototype.GC_PETEXP = function (t, i) {
        var o = t.getPetVoByPetID(i.readInt());
        o && (o.exp = i.readInt()), t.notify(e.MSG_PETEXP)
    }, e.prototype.GC_PETJINJIE = function (t, e) {
        var i = e.readByte();
        e.readInt();
        if (1 == i) {
            var o = GameGlobal.modelPet.curPetVo.gift;
            if (!o) return;
            for (var n, a = Vo_PetGiftSkill.lockskill, s = 0, r = 0; r < a.length; r++) {
                var l = parseInt(a[r].parm.split(",")[0]);
                if (2 == l && !a[r].isLock()) {
                    var h = parseInt(a[r].parm.split(",")[1]);
                    h > s && (s = h, n = a[r])
                }
            }
            n && (GameGlobal.layerMgr.close(UIConst.PETSKILLOPENTIP), GameGlobal.layerMgr.open(UIConst.PETSKILLOPENTIP, {
                vo: n
            }))
        }
    }, e.prototype.CG_SAVEXILIAN = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeByte(e), this.sendSocket(755, i)
    }, e.prototype.GC_SAVEXILIAN = function (t, i) {
        var o = i.readInt(),
            n = i.readByte();
        if (1 == n) {
            var a = t.getPetVoByPetID(o);
            a.xilian = !1, a.copyXiLianAttr(), t.notify(e.MSG_PETZZCHANGE)
        }
    }, e.prototype.CG_XY = function (t) {
        if (this.isFlag(757)) ViewText.text("3分钟内只能炫耀一次");
        else {
            this.addDelayFlag(757, 18e4), ViewText.text("炫耀已发出");
            var e = this.getBytes();
            e.writeInt(t), this.sendSocket(757, e)
        }
    }, e.prototype.GC_XYCHECK = function (t, e) {
        var i = Util.getTempObj();
        i.id = e.readInt(), i.name = e.readUTF(), i.str = e.readInt(), i.hp = e.readInt(), i.att = e.readInt(), i.phyDef = e.readInt(), i.speDef = e.readInt(), i.speed = e.readInt(), i.growup = e.readInt();
        for (var o = [], n = 0, a = e.readShort(); a > n; n++) {
            var s = e.readByte(),
                r = e.readInt(),
                l = Vo_Skill.create(r, 1);
            l.index = s;
            var h = Config.getConfig(chongwu_122).get(i.id);
            l.must = l.id == h.bdjn, l.initPetData(), o[s] = l
        }
        var c = GameGlobal.layerMgr;
        c._regMap[UIConst.PETINFO] || c.reg(UIConst.PETINFO, VPetInfo, c.UI_Message), GameGlobal.layerMgr.open(UIConst.PETINFO, {
            arg: i,
            skillList: o
        })
    }, e.prototype.CG_XYCHECK = function (t, e) {
        var i = this.getBytes();
        i.writeLong(t), i.writeInt(e), this.sendSocket(759, i)
    }, e.prototype.checkAnyPetEnable = function () {
        for (var t = this.getPetArr(), e = GameGlobal.modelBag, i = 0, o = t.length; o > i; i++) {
            var n = t[i];
            if (!n.isEnable && e.getItemCount(n.basecfg.item[1]) >= n.basecfg.item[2]) return !0
        }
        return !1
    }, e.prototype.isPosCanEnable = function (t) {
        var e = this.getPetMap()[t];
        return !e.isEnable && GameGlobal.modelBag.getItemCount(e.basecfg.item[1]) >= e.basecfg.item[2] ? !0 : void 0
    }, e.prototype.checkTip = function () {
        if (CFG_COMMOND.isOpen(CFG_COMMOND.SHOULING, !1)) var t = VoShouLing.getInst().getPeiYangNotice() || GameGlobal.modelpeiyang.getNoticeByType(4) || VoShouLing.getInst().getSkinNotice();
        else t = !1;
        var e = this.checkEnable() || t || this.checkExpNotice();
        return e
    }, e.prototype.checkExpNotice = function () {
        for (var t = VoPet.iteml, e = GameGlobal.modelPet.shangZhenVos, i = 0; i < e.length; i++) {
            var o = e[i];
            if (o && o.level && !(o.level >= GameGlobal.modelRole.voMine.level)) {
                var n = CFG_Pet.PETLEVEL[o.level].exp;
                if (n > 0)
                    for (var a = n - o.exp, s = 0; s < t.length; s++) {
                        var r = CFG_Item.LIB[t[s]],
                            l = r.canshu.exp,
                            h = GameGlobal.modelBag.getItemCount(t[s]);
                        if (l * h >= a) return !0
                    }
            }
        }
        return !1
    }, e.prototype.checkEnable = function () {
        for (var t = this.getPetArr(), e = 0, i = t.length; i > e; e++) {
            var o = t[e];
            if (!o.isEnable && o.canEnable()) return !0
        }
        return !1
    }, e.prototype.requestPY = function (t, e, i) {
        var o = ViewZiZhiPeiYangPnl.getZiZhiValue(e, t),
            n = ViewZiZhiPeiYangPnl.getZiZhiMaxValue(e.sysid, t);
        if (o >= n) return void ViewText.text("该资质已满,不能洗髓");
        if (6 > t) {
            if (e.zztimes >= 10) return void ViewText.text("培养次数已满")
        } else if (e.growuptimes >= 10) return void ViewText.text("培养次数已满");
        var a = GameGlobal.modelBag.getItemCount(i);
        if (1 > a) {
            var s = VoItem.create();
            return s.init(i), GameGlobal.layerMgr.open(UIConst.CAILIAOGET, s), void GameGlobal.layerMgr.close(UIConst.PETZIZHI)
        }
        6 > t ? this.CG_ZZPEIYANG(e.sysid, t) : this.CG_CHENGZHANG(e.sysid)
    }, e.prototype.WARNTXT = function (t) {
        var e;
        1 == t ? e = "宠物等级不能高于主角等级" : 2 == t && (e = "道具不足"), e && ViewText.text(e)
    }, e.prototype.GC_ZHUOPET = function (t, e) {
        t.canCatchNum = e.readByte(), t.nextCatchTime = e.readInt(), t.updateCatchTime(), t.catchingPets.length = 0;
        for (var i = 0, o = e.readShort(); o > i; i++) t.catchingPets[i] = {
            uid: e.readInt(),
            sysid: e.readInt()
        };
        t.remainAssistTimes = e.readByte(), t.hasCatchPet = t.catchingPets.length > 0, GameGlobal.modelDaliy.notify(ModelDaliy.NOTICE)
    }, e.prototype.GC_ZHUOPETTIME = function (t, i) {
        var o = i.readInt(),
            n = i.readInt();
        i.readByte();
        if (!ArrayUtil.getItem(t.catchingPets, "uid", o)) {
            t.nextCatchTime = 1800, t.updateCatchTime();
            var a = {
                uid: o,
                sysid: n
            };
            t.catchingPets.push(a), t.hasCatchPet = t.catchingPets.length > 0, GameGlobal.modelDaliy.notify(ModelDaliy.NOTICE), t.notify(e.MSG_ADDCATCHPET, a)
        }
    }, e.prototype.CG_ZHUAPET = function (t, e) {
        if (!this.isFlag(1573)) {
            this.addDelayFlag(1573, 2e3);
            var i = this.getBytes();
            i.writeInt(t), i.writeByte(e), this.sendSocket(1573, i)
        }
    }, e.prototype.GC_ZHUOPETRET = function (t, i) {
        var o = i.readByte(),
            n = i.readInt();
        i.readByte();
        if (GameGlobal.layerMgr.close(UIConst.BUZHUOPET), n) {
            t.nextCatchTime = i.readInt(), t.updateCatchTime();
            var a = t.removeCatchPet(n);
            if (a) {
                t.hasCatchPet = t.catchingPets.length > 0, GameGlobal.modelDaliy.notify(ModelDaliy.NOTICE), a.result = o;
                var s = {
                    petId: a.sysid,
                    members: null,
                    result: o
                };
                GameGlobal.layerMgr.open(UIConst.BUZHUOPETBTL, s)
            }
            t.notify(e.MSG_DELCATCHPET, n)
        }
    }, e.prototype.CG_CREATETEAM = function (t, e) {
        if (!this.isFlag(1575)) {
            this.addDelayFlag(1575, 2e3);
            var i = this.getBytes();
            i.writeInt(t), i.writeByte(e), this.sendSocket(1575, i)
        }
    }, e.prototype.CG_INVITEFRIEND = function () {
        var t = this.getBytes();
        this.sendSocket(1579, t)
    }, e.prototype.CG_INVITEGANG = function () {
        var t = this.getBytes();
        this.sendSocket(1577, t)
    }, e.prototype.GC_INVITE = function (t, e) {}, e.prototype.CG_JOIN = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1581, e)
    }, e.prototype.CG_KICK = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(1589, e)
    }, e.prototype.GC_TEAMUPDATE = function (t, i) {
        for (var o = [], n = 0, a = i.readShort(); a > n; n++) {
            var s = i.readLong(),
                r = i.readUTF(),
                l = i.readByte(),
                h = i.readShort(),
                c = i.readInt(),
                p = i.readUTF();
            o[n] = [s, r, l, h, c, p]
        }
        var u = i.readLong(),
            d = i.readInt();
        t.buZhuoTeam = {
            sysid: d,
            itemRoleID: u,
            members: o,
            capId: 0
        }, o.length && (t.buZhuoTeam.capId = o[0][0]), GameGlobal.layerMgr.isOpenView(UIConst.BUZHUOPET) || GameGlobal.layerMgr.open(UIConst.BUZHUOPET, t.buZhuoTeam), t.notify(e.MSG_PETTEAM)
    }, e.prototype.CG_USETEAMITEM = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeByte(e), this.sendSocket(1583, i)
    }, e.prototype.CG_STARTTEAMCATCH = function () {
        var t = this.getBytes();
        this.sendSocket(1585, t)
    }, e.prototype.GC_JOINTEAMRET = function (t, e) {
        var i = e.readByte();
        ViewText.text([null, null, "队伍已满", "队伍已解散", "协助次数已满5次"][i])
    }, e.prototype.GC_TEAMCATCH = function (t, i) {
        for (var o = i.readInt(), n = i.readInt(), a = i.readByte(), s = [], r = 0, l = i.readShort(); l > r; r++) {
            var h = [i.readLong(), i.readByte(), i.readInt(), i.readInt(), i.readInt(), i.readInt(), i.readInt()],
                c = t.removeCatchPet(o);
            c && (t.notify(e.MSG_DELCATCHPET, o), t.hasCatchPet = t.catchingPets.length > 0, GameGlobal.modelDaliy.notify(ModelDaliy.NOTICE)), s[r] = h
        }
        var p = {
            petId: n,
            result: a,
            members: s
        };
        GameGlobal.layerMgr.isOpenView(UIConst.BUZHUOPETBTL) || GameGlobal.layerMgr.open(UIConst.BUZHUOPETBTL, p)
    }, e.prototype.CG_LEAVETEAM = function () {
        var t = this.getBytes();
        this.sendSocket(1587, t)
    }, e.prototype.GC_LEAVETEAM = function (t, i) {
        t.buZhuoTeam = null, t.remainAssistTimes = i.readByte(), t.notify(e.MSG_PETTEAM), GameGlobal.layerMgr.close(UIConst.BUZHUOPET)
    }, e.prototype.CG3221 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(3221, e)
    }, e.prototype.GC3222 = function (t, i) {
        for (var o = i.readInt(), n = t.getPetVoByPetID(o), a = n.gift, s = i.readShort(), r = 0; s > r; r++) {
            var l = i.readShort(),
                h = i.readByte(),
                c = a.skill[l];
            c.lev = h, c.jh = !0
        }
        a.tfd = i.readInt(), t.notify(e.MSG_PETGIFT)
    }, e.prototype.CG3223 = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeShort(e), this.sendSocket(3223, i)
    }, e.prototype.GC3224 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                var n = i.readInt(),
                    a = t.getPetVoByPetID(n),
                    s = a.gift,
                    r = i.readShort();
                s.tfd = i.readInt();
                var l = s.skill[r];
                l.lev = 1, l.jh = !0, t.notify(e.MSG_PETGIFT);
                break;
            case 2:
                ViewText.text("天赋点不足");
                break;
            case 3:
                ViewText.text("条件不足");
                break;
            case 4:
                ViewText.text("技能已激活")
        }
    }, e.prototype.CG3225 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t.length);
        for (var o = 0; o < t.length; o++) i.writeInt(t[o].id), i.writeInt(t[o].count);
        i.writeInt(e), this.sendSocket(3225, i)
    }, e.prototype.GC3226 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = t.getPetVoByPetID(n),
                s = a.gift;
            s.tfd = i.readInt(), t.notify(e.MSG_PETGIFTPOINT)
        }
        GameGlobal.layerMgr.close(UIConst.PETGETTIP1)
    }, e.prototype.CG3227 = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeShort(e), this.sendSocket(3227, i)
    }, e.prototype.GC3228 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                var n = i.readInt(),
                    a = i.readShort(),
                    s = i.readByte(),
                    r = t.getPetVoByPetID(n),
                    l = r.gift;
                l.tfd = i.readInt();
                var h = l.skill[a];
                h.lev = s, t.notify(e.MSG_PETGIFT);
                break;
            case 2:
                ViewText.text("天赋点不足")
        }
    }, e.prototype.removeCatchPet = function (t) {
        for (var e = this, i = e.catchingPets.length - 1; i >= 0; i--) {
            var o = e.catchingPets[i];
            if (t == o.uid) return e.catchingPets.splice(i, 1), o
        }
        return null
    }, e.prototype.updateCatchTime = function () {
        this.nextCatchTimeFlag = egret.getTimer()
    }, e.prototype.getNxtCatchPetSec = function () {
        var t = egret.getTimer(),
            e = this.nextCatchTime - (t - this.nextCatchTimeFlag) / 1e3;
        return 0 > e && (e = 0), e
    }, e.prototype.getShangZhenList = function () {
        return this.shangZhenVos
    }, e.prototype.calculateSZPetStr = function () {
        for (var t = 0, e = 0, i = this.petVos.length; i > e; e++) {
            var o = this.petVos[e];
            o.fightPos > 0 && (t += o.str)
        }
        return t
    }, e.XXITEM1 = 1010, e.XXITEM2 = 1011, e.MSG_SELCHANGE = 1, e.MSG_PETZZCHANGE = 2, e.MSG_LISTCHANGE = 3, e.MSG_ZZPYRET = 555, e.MSG_FIGHTSTCHANGE = 0, e.MSG_NEWSKILL = 6, e.MSG_SKILLCHANGE = 4, e.MSG_SKILLLOCKVIS = 5, e.MSG_CURSKILLBOOK = "MSG_CURSKILLBOOK", e.MSG_PETEXP = "MSG_PETEXP", e.MSG_EXPPYREST = "MSG_EXPPYREST", e.MSG_PETTEAM = "MSG_PETTEAM", e.MSG_INVITE = "MSG_INVITE", e.MSG_PETGIFT = "MSG_PETGIFT", e.MSG_PETGIFTFJ = "MSG_PETGIFTFJ", e.MSG_PETGIFTALLSEL = "MSG_PETGIFTALLSEL", e.MSG_PETGIFTPOINT = "MSG_PETGIFTPOINT", e.MSG_ZHUOCHONGRET = "zhuopet", e.MSG_ADDCATCHPET = "addCatchP", e.MSG_DELCATCHPET = "delCatchP", e
}(BaseModel);
__reflect(ModelPet.prototype, "ModelPet");
var VHuoBanInfo = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skills = [], e.items = [], e.attributes = [{
            id: 102,
            name: "气血",
            val: 0
        }, {
            id: 105,
            name: "物防",
            val: 0
        }, {
            id: 106,
            name: "法防",
            val: 0
        }, {
            id: 103,
            name: "攻击",
            val: 0
        }, {
            id: 119,
            name: "速度",
            val: 0
        }, {
            id: 108,
            name: "暴击",
            val: 0
        }, {
            id: 110,
            name: "抗暴",
            val: 0
        }, {
            id: 111,
            name: "暴击增伤",
            val: 0
        }, {
            id: 113,
            name: "暴伤减少",
            val: 0
        }, {
            id: 115,
            name: "伤害增加",
            val: 0
        }, {
            id: 117,
            name: "物伤减少",
            val: 0
        }, {
            id: 118,
            name: "法伤减少",
            val: 0
        }, {
            id: 151,
            name: "伤害减少",
            val: 0
        }], e.typeUrl = ["HBAtlas2_json.wugong", "HBAtlas2_json.fa", "HBAtlas2_json.fu"], e.starUrl = ["HBAtlas2_json.starGrey", "HBAtlas2_json.star"], e.QUALITY0 = "HBAtlas2_json.R", e.QUALITY1 = "HBAtlas2_json.SR", e.QUALITY2 = "HBAtlas2_json.SSR", e.QUALITY3 = "HBAtlas2_json.SSSR", e.souceDataSkill = new eui.ArrayCollection, e.itemData = [], e.isHasFWInfo = !1, e.skinName = "resource/eui_skins/game/pet/HuoBanInfoSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), VoHBFuWen.initMap(), this.xianshen.label = "仙神", this.fuwen.label = "仙神符文";
        for (var e = 0; 6 > e; e++) {
            var i = this["item" + e];
            i.itemIndex = e, i.data = null, i.setStatus(3), this.items.push(i)
        }
        this.zhanliImg = new ImageText, this.zhanliImg.charFunc = ImageText.STRFUNC, this.zhanliImg.container = this.gpZhanli, this.uiroleXianShen = UIRole.create(), this.hbPart.addChild(this.uiroleXianShen), this.uiroleXianShen.x = 0, this.uiroleXianShen.y = 0, this.uiroleXianShen.scaleX = this.uiroleXianShen.scaleY = 1.5, this.uiroleFuwen = UIRole.create(), this.partContainer.addChild(this.uiroleFuwen), this.uiroleFuwen.x = 0, this.uiroleFuwen.y = 0, this.partContainer.scaleX = this.partContainer.scaleY = 1.5, this.skillList.touchEnabled = !0, this.skillGrp1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSkilLT, this), this.xianshen.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSel, this), this.fuwen.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSel, this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), this.uiroleXianShen.play(), this.uiroleFuwen.play(), this.currentState = "normal"
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), this.uiroleXianShen.stopAndClear(), this.uiroleFuwen.stopAndClear()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function (t) {
        if (null != t && 0 != t.length) {
            this._curHbId = t.hbId;
            var e = CFG_HUOBAN1.LIB[t.hbId];
            this.XSid = null;
            var i = e.n;
            for (var o in CFG_XSBDJN.LIB) {
                var n = CFG_XSBDJN.LIB[o];
                n.xs == i && (this.XSid = t.hbId)
            }
            this.XSid && GameGlobal.modelhb.CG685(this.XSid), this.iconHBType.source = this.typeUrl[e.t - 1], this.txtHBName.textFlow = HtmlUtil.parse(HtmlUtil.color(e.n, VoHuoban.getColorByQuality(e.pz))), this.zhanliImg.setText("z" + t.zhanli), this.zhanliImg.container.x = 150 - this.zhanliImg.totalWid / 2, this.txtAttType.text = "特点：" + e.cha;
            var a = e.m;
            this.uiroleXianShen.setBody(a), this.uiroleXianShen.setWay(3), this.uiroleXianShen.validParts(), this.updateSkill(t), this.updateZhanli(t), this.updateAtt(t), this.updateQuality(t), this.updateStar(t)
        }
    }, e.prototype.updateSkill = function (t) {
        this.skills.length = 0;
        var e = t.xingJiId;
        if (0 == e) {
            e = 100 * t.hbId;
            for (var i = CFG_HUOBAN1.LIB[t.hbId], o = i.jnzs.split(/\;|\,/), n = o.length, a = 0; n > a; a += 2) {
                var s = parseInt(o[a]),
                    r = parseInt(o[a + 1]),
                    l = Vo_Skill.create(s, r),
                    h = new VoHBSkill;
                h.voSkill = l, this.skills.push(h)
            }
        } else {
            e = t.xingJiId;
            for (var c = CFG_HUOBAN1.LIB2[e], p = c.jn.split(/\;|\,/), u = p.length, a = 0; u > a; a += 2) {
                var s = parseInt(p[a]),
                    r = parseInt(p[a + 1]),
                    l = Vo_Skill.create(s, r),
                    h = new VoHBSkill;
                h.voSkill = l, this.skills.push(h)
            }
        }
        this.XSid && this.tempSKill && (this.skills[2] = this.tempSKill), this.souceDataSkill.source = this.skills, this.skillList.dataProvider = this.souceDataSkill, this.skillList.itemRenderer = ItemHbSkill
    }, e.prototype.getBDJNskillData = function (t) {
        if (this.tempSKill = null, 0 != t) {
            var e = parseInt(CFG_XSBDJN.LIB[t].jnqd.split(",")[0]),
                i = CFG_XSBDJN.LIB[t].dj,
                o = Vo_Skill.create(e, i),
                n = new VoHBSkill;
            n.voSkill = o, this.tempSKill = n
        }
    }, e.prototype.updateZhanli = function (t) {
        CFG_HUOBAN1.LIB[t.hbId];
        this.zhanliImg.setText("z" + t.zhanli)
    }, e.prototype.updateAtt = function (t) {
        this.hp.text = "" + t.hp, this.att.text = "" + t.attack, this.phyDef.text = "" + t.physicDef, this.speDef.text = "" + t.magicalDef, this.speed.text = "" + t.speed, this.baoji.text = "" + t.baoji, this.baojiDef.text = "" + t.baojiDef
    }, e.prototype.updateQuality = function (t) {
        var e = CFG_HUOBAN1.LIB[t.hbId],
            i = e.pz;
        switch (i) {
            case 3:
                this.iconPZ.source = this.QUALITY0;
                break;
            case 4:
                this.iconPZ.source = this.QUALITY1;
                break;
            case 5:
                this.iconPZ.source = this.QUALITY2;
                break;
            case 6:
                this.iconPZ.source = this.QUALITY3;
                break;
            default:
                this.iconPZ.source = null
        }
    }, e.prototype.updateStar = function (t) {
        var e = t.xingJiId;
        e = 0 == e ? 100 * t.hbId : t.xingJiId;
        var i = CFG_HUOBAN1.LIB2[e],
            o = this.starCont.$children.length;
        if (parseInt(i.hblevel.toString()) >= 0)
            for (var n = i.hblevel, a = 0; o > a; a++) {
                var s = this.starCont.getChildAt(a);
                n > a ? s.source = this.starUrl[1] : s.source = this.starUrl[0]
            } else
                for (var a = 0; o > a; a++) s = this.starCont.getChildAt(a), s.source = this.starUrl[0]
    }, e.prototype.onSkilLT = function (t) {
        var e = t.target;
        e.voSkill && GameGlobal.layerMgr.open(VHBSkillTip, e.voSkill)
    }, e.prototype.ensureZeroAtt = function () {
        for (var t in this.attributes) {
            var e = this.attributes[t];
            e.val = 0
        }
    }, e.prototype.updateAtts = function (t) {
        if (null != t) {
            this.ensureZeroAtt();
            for (var e = t.fwValList, i = e.length, o = 0; i > o; o++) {
                var n = e[o],
                    a = n[0],
                    s = n[1],
                    r = this.findAttObj(a);
                r && (r.val = s)
            }
            var i = this.group1.$children.length;
            this.group1.validateNow(), this.sureAddAtts()
        }
    }, e.prototype.sureAddAtts = function () {
        for (var t = this, e = 0; 3 > e; e++) {
            var i = t.group1.getChildAt(e),
                o = t.attributes[e];
            i.textFlow = HtmlUtil.parse(o.name + ": " + HtmlUtil.color(VoHBFuWen.getRealVal(o), "#10a244"))
        }
        for (var e = 3; 6 > e; e++) i = t.group2.getChildAt(e - 3), o = t.attributes[e], i.textFlow = HtmlUtil.parse(o.name + ": " + HtmlUtil.color(VoHBFuWen.getRealVal(o), "#10a244"));
        for (var e = 6; 9 > e; e++) i = t.group3.getChildAt(e - 6), o = t.attributes[e], i.textFlow = HtmlUtil.parse(o.name + ": " + HtmlUtil.color(VoHBFuWen.getRealVal(o), "#10a244"));
        for (var e = 9; 12 > e; e++) i = t.group4.getChildAt(e - 9), o = t.attributes[e], i.textFlow = HtmlUtil.parse(o.name + ": " + HtmlUtil.color(VoHBFuWen.getRealVal(o), "#10a244"))
    }, e.prototype.findAttObj = function (t) {
        for (var e = this.attributes.length, i = 0; e > i; i++) {
            var o = this.attributes[i];
            if (o.id == t) return o
        }
        return null
    }, e.prototype.updateFuWen = function (t) {
        for (var e = t.FwList, i = 0; i < this.items.length; i++) {
            var o = this.items[i];
            o.data = null
        }
        for (var n = e.length, i = 0; n > i; i++) {
            var a = t.FwList[i],
                o = this.getItemByPos(a.position);
            o.data = a, this.itemData.push(a)
        }
    }, e.prototype.getItemByPos = function (t) {
        return this.items[t - 1]
    }, e.prototype.addMsg = function () {
        GameGlobal.modelhb.on(ModelHB.msg_hbFuWen, this.onUpdate, this), GameGlobal.modelhb.on(ModelHB.msg_hbFuWenVal, this.updateAtts, this), GameGlobal.modelhb.on(ModelHB.msg_refAttributes, this.update, this), GameGlobal.modelhb.on(ModelHB.msg_hbHasFWInfo, this.updateState, this), GameGlobal.modelhb.on(ModelHB.MSG_BDJNINFO, this.getBDJNskillData, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelhb.off(ModelHB.msg_hbFuWenVal, this.updateAtts, this), GameGlobal.modelhb.off(ModelHB.msg_refAttributes, this.update, this), GameGlobal.modelhb.off(ModelHB.msg_hbFuWen, this.onUpdate, this), GameGlobal.modelhb.on(ModelHB.msg_hbHasFWInfo, this.updateState, this), GameGlobal.modelhb.off(ModelHB.MSG_BDJNINFO, this.getBDJNskillData, this)
    }, e.prototype.updateState = function (t) {
        0 == t.isEmpty ? this.isHasFWInfo = !1 : this.isHasFWInfo = !0
    }, e.prototype.onUpdate = function (t) {
        if (null != t) {
            var e = CFG_HUOBAN1.LIB[t.hbId],
                i = e.m;
            this.uiroleFuwen.setBody(i), this.uiroleFuwen.setWay(3), this.uiroleFuwen.validParts(), this.updateFuWen(t)
        }
    }, e.prototype.onSel = function (t) {
        t.target == this.xianshen ? this.currentState = "normal" : t.target == this.fuwen && (0 == this.isHasFWInfo ? ViewText.text("暂时没有该仙神符文信息！") : this.currentState = "fuwen")
    }, e
}(BaseEUIView);
__reflect(VHuoBanInfo.prototype, "VHuoBanInfo");
var ViewLevelPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e._downTime = 0, e._pressInterv = 500, e.requesting = !1, e.skinName = "resource/eui_skins/game/pet/PetLevelSkin.exml", e
    }
    return __extends(e, t), e.prototype.guideLvUp = function () {
        var t = this.btnOneKey;
        QuestGuideArrow.getIns().guideTo(t.parent, t.x + 55, t.y + 25)
    }, e.prototype.guideClose = function () {
        var t = this.btnClose;
        QuestGuideArrow.getIns().guideTo(t.parent, t.x + 30, t.y + 30)
    }, e.prototype.initView = function () {
        var t = egret.TouchEvent.TOUCH_TAP;
        this.addCloseListen(this.btnClose), this.addCloseListen(this.rect);
        for (var e = [1012, 1029, 1013], i = 0; i < e.length; i++) {
            var o = this["g" + i],
                n = VoItem.create();
            n.init(e[i]), o.data = n, o.showZero = o.showOne = !0, o.updateName();
            var a = this["exp" + i];
            a.text = "+" + n.useParam.exp, o.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onGridTB, this), o.addEventListener(egret.TouchEvent.TOUCH_END, this.onGridTE, this), o.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE, this.onGridOut, this), this.grids[i] = o
        }
        this.btn.addEventListener(t, this.onBtnT, this), this.btnOneKey.addEventListener(t, this.onOneKeyT, this), this.lbSrc.textFlow = HtmlUtil.underLine(this.lbSrc.text), this.lbSrc.touchEnabled = !0, this.lbSrc.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSrcT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelPet.on(ModelPet.MSG_PETEXP, this.update, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateItem, this), GameGlobal.modelPet.on(ModelPet.MSG_EXPPYREST, this.onPYRest, this);
        var i = this.vo = e;
        this.lbName.text = i.nickName, this.imgHead.source = IconUtil.getIconUrl(i.petcfg.icon), this.update(), this.updateItem(), GameGlobal.tick.addInterv(this.onTick, 1, this), this.requesting = !1, GameGlobal.stage.addEventListener(egret.TouchEvent.TOUCH_END, this.onGridOut, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelPet.off(ModelPet.MSG_PETEXP, this.update), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateItem), GameGlobal.modelPet.off(ModelPet.MSG_EXPPYREST, this.onPYRest), GameGlobal.tick.removeInterv(this.onTick), GameGlobal.stage.removeEventListener(egret.TouchEvent.TOUCH_END, this.onGridOut, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function () {
        var t = this.vo;
        this.lbLv.text = "等级:" + t.level;
        var e = CFG_Pet.PETLEVEL[t.level].exp,
            i = t.exp / e;
        i > 1 && (i = 1), e > 0 ? (this.imgProg.width = 316 * i, this.lbProg.text = t.exp + "/" + e) : (this.imgProg.width = 316, this.lbProg.text = t.exp + "/" + e), this.oldLv = t.level
    }, e.prototype.updateLB = function () {
        GameGlobal.modelPet.curPetVo
    }, e.prototype.updateItem = function () {
        for (var t = 0, e = this.grids.length; e > t; t++) {
            var i = this.grids[t];
            i._data.count = GameGlobal.modelBag.getItemCount(i._data.id), i.data = i._data
        }
    }, e.prototype.onPYRest = function () {
        var t = this.oldLv,
            e = this.imgProg.x + this.imgProg.width;
        this.update();
        var i = this.imgProg.x + this.imgProg.width;
        if (this.vo.level > t) {
            var o = EffectMgr.addEff("uieff/progFire", this.imgProg.parent, this.imgProg.x + 158, this.imgProg.y - 2, 500, 500);
            o.scaleX = 2.6, o.scaleY = 2
        } else i > e && (this.effectBullet ? egret.Tween.removeTweens(this.effectBullet) : this.effectBullet = EffectMgr.addEff("uieff/progBullet", this.imgProg.parent, e, this.imgProg.y + 9, 500, -1, !0), egret.Tween.get(this.effectBullet).to({
            x: i
        }, 300).wait(500).call(this.removeBullet, this).call(this.onEffEnd, this))
    }, e.prototype.onEffEnd = function () {
        this.effectBullet && (EffectMgr.getIns().removeEff(this.effectBullet), this.effectBullet = null)
    }, e.prototype.removeBullet = function () {
        this.effectBullet && (EffectMgr.getIns().removeEff(this.effectBullet), this.effectBullet = null)
    }, e.prototype.onBtnT = function (t) {
        this.onkeyXX(2)
    }, e.prototype.onOneKeyT = function (t) {
        this.onkeyXX(3)
    }, e.prototype.onkeyXX = function (t) {
        if (this.vo.level >= GameGlobal.modelRole.voMine.level) return void GameGlobal.modelPet.WARNTXT(1);
        for (var e = 0, i = this.grids.length; i > e; e++) {
            var o = this.grids[e]._data;
            if (o.count > 0) return void GameGlobal.modelPet.CG_UPGRADEITEM(t, this.vo.sysid, 0)
        }
        GameGlobal.modelPet.WARNTXT(2)
    }, e.prototype.onSrcT = function (t) {
        GameGlobal.layerMgr.open(UIConst.CAILIAOGET, this.g0._data)
    }, e.prototype.onGridTB = function (t) {
        var e = t.currentTarget;
        this.touchItemVo = e._data, this._pressInterv = 500, this._downTime = egret.getTimer()
    }, e.prototype.onGridTE = function (t) {
        var e = t.currentTarget;
        this.touchItemVo = e._data, egret.getTimer() - this._downTime <= 500 && this.touchItemVo == e._data && this.pressSend()
    }, e.prototype.onGridOut = function (t) {
        this.touchItemVo = null
    }, e.prototype.onTick = function (t, e) {
        !t.requesting && t.touchItemVo && (t._pressInterv -= e, t._pressInterv <= 0 && (t.pressSend(), t._pressInterv = 500))
    }, e.prototype.pressSend = function () {
        var t = this,
            e = GameGlobal.modelBag.getItemCount(t.touchItemVo.id);
        return 0 >= e ? (GameGlobal.modelPet.WARNTXT(2), void(t.touchItemVo = null)) : t.vo.level >= GameGlobal.modelRole.voMine.level ? (GameGlobal.modelPet.WARNTXT(1), void(t.touchItemVo = null)) : void t.requestUse(t.touchItemVo.id)
    }, e.prototype.requestUse = function (t) {
        GameGlobal.modelPet.CG_UPGRADEITEM(1, this.vo.sysid, t)
    }, e
}(BaseEUIView);
__reflect(ViewLevelPnl.prototype, "ViewLevelPnl");
var ViewPetPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.petListData = new eui.ArrayCollection, e.curSt = -1, e.skinName = "resource/eui_skins/game/pet/PetPanelSkin.exml", e
    }
    return __extends(e, t), e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.base.btnReturn, 30, 30)
    }, e.prototype.guidePage = function (t) {
        var e = this.base.getTabByIdx(t);
        e && QuestGuideArrow.getIns().guideTo(e, 55, 30)
    }, e.prototype.checkPage = function (t) {
        return this.curSt == t
    }, e.prototype.guideSelPet = function (t) {
        var e, i = GameGlobal.modelPet;
        if (100 > t) var o = i.getEOrCEBestPetVo(t);
        else o = 0 == t ? i.getSZPetVo() : i.getPetVoByPetID(t);
        for (var n = 0, a = this.petList.numChildren; a > n; n++) {
            var s = this.petList.getChildAt(n);
            if (o == s.vo) {
                e = s;
                break
            }
        }
        e || (e = this.petList.getChildAt(0)), QuestGuideArrow.getIns().guideTo(e, 45, 45)
    }, e.prototype.initView = function () {
        var t = this,
            e = GameGlobal.layerMgr;
        t.base.createTabGroup(), t.base.title = "灵兽", t.base.height = 1050, e.reg(UIConst.PETPAGE, VPetPage, t.pageGroup), e.reg(UIConst.PETGROWUP, VPetGrowupPage, t.pageGroup), e.reg(UIConst.PETSKILL, VPetSkillPage, t.pageGroup), e.reg(UIConst.PETPEIYANG, VPetPeiYangPage, t.pageGroup), e.reg(UIConst.PETGIFT, VPetGift, t.pageGroup), t.base.addTab("灵兽", 0, 1), t.base.addTab("成长", 1, 2), t.base.addTab("技能", 2, 3), t.base.listenTabClick(t.onTbtnT, t), t.skillGrids.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onSkillGrpT, t), t.petv = UIRole.create(), t.petv.scale = 1.2, t.petGroup.addChildAt(t.petv, 1), t.petv.x = 150, t.petv.y = 275, t.addCloseListen(t.base.btnClose), t.base.btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnReturnT, this), this.petList.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onTouchList, this), t.imgStr = new ImageText, t.imgStr.makeContainer(), t.imgStr.charFunc = ImageText.STRFUNC, t.imgStr.container.x = 0, t.imgStr.container.y = 46, t.petGroup.addChild(t.imgStr.container), new ScrollMove(t.btnRight, t.btnLeft, t.petList, "width"), this.petList.itemRenderer = VPetTabItem, this.petList.dataProvider = this.petListData
    }, e.prototype.btnReturnT = function () {
        GameGlobal.layerMgr.isOpenView(UIConst.PETGIFT) ? this.setCurrentSt(0) : this.closeHandler()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = GameGlobal;
        if (i.tick.addInterv(this.onTick, 50, this), i.modelPet.on(ModelPet.MSG_SELCHANGE, this.onPetChange, this), i.modelPet.on(ModelPet.MSG_LISTCHANGE, this.onListChange, this), i.modelPet.on(ModelPet.MSG_FIGHTSTCHANGE, this.onFightSt, this), i.modelPet.on(ModelPet.MSG_SKILLCHANGE, this.updateSkill, this), i.modelPet.on(ModelPet.MSG_SKILLLOCKVIS, this.onLockVis, this), i.modelPet.on(ModelPet.MSG_EXPPYREST, this.onExp, this), i.modelBag.on(ModelBag.MSG_CHANGE, this.onBagC, this), GameGlobal.modelPet.on(ModelPet.MSG_NEWSKILL, this.onNewSkill, this), GameGlobal.modelPet.on(ModelPet.MSG_PETZZCHANGE, this.onZZChange, this), e) {
            var o = i.modelPet.getPetArr();
            if (i.modelPet.curPetVo = o[0], parseInt(e) <= 1e3) {
                var o = i.modelPet.getPetArr();
                i.modelPet.curPetVo = o[0], i.modelPet.curPetCFG = i.modelPet.curPetVo.petcfg, this.setCurrentSt(parseInt(e))
            } else i.modelPet.setSelID(e), this.setCurrentSt(0)
        } else this.setCurrentSt(0);
        this.updatePets();
        var o = i.modelPet.getPetArr();
        i.modelPet.selSelPos(o[0].pos), DisplayUtil.resetScroller(this.headScroll), this.checkTip(), GameGlobal.layerMgr.setVisible(UIConst.HEADUI, !1), GameGlobal.layerMgr.setVisible(UIConst.BOTTOM2, !1), GameGlobal.layerMgr.setVisible(UIConst.QUEST, !1), GameGlobal.layerMgr.setVisible(UIConst.LEFTUI, !1), GameGlobal.layerMgr.setVisible(UIConst.RIGHTUI, !1)
    }, e.prototype.onClose = function () {
        this.setCurrentSt(-1);
        var t = GameGlobal;
        t.tick.removeInterv(this.onTick), t.modelPet.off(ModelPet.MSG_SELCHANGE, this.onPetChange), t.modelPet.off(ModelPet.MSG_LISTCHANGE, this.onListChange), t.modelPet.off(ModelPet.MSG_FIGHTSTCHANGE, this.onFightSt), t.modelPet.off(ModelPet.MSG_SKILLCHANGE, this.updateSkill), t.modelPet.off(ModelPet.MSG_SKILLLOCKVIS, this.onLockVis), t.modelPet.off(ModelPet.MSG_EXPPYREST, this.onExp), t.modelBag.off(ModelBag.MSG_CHANGE, this.onBagC), t.modelPet.off(ModelPet.MSG_NEWSKILL, this.onNewSkill), GameGlobal.modelPet.off(ModelPet.MSG_PETZZCHANGE, this.onZZChange), this.skillGrids.clearGrids(), GameGlobal.layerMgr.setVisible(UIConst.HEADUI, !0), GameGlobal.layerMgr.setVisible(UIConst.BOTTOM2, !0), GameGlobal.layerMgr.setVisible(UIConst.QUEST, !0), GameGlobal.layerMgr.setVisible(UIConst.LEFTUI, !0), GameGlobal.layerMgr.setVisible(UIConst.RIGHTUI, !0)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.setCurrentSt = function (t) {
        var e = this,
            i = GameGlobal.layerMgr,
            o = GameGlobal.modelPet.curPetVo;
        switch (e.curSt) {
            case 0:
                i.close(UIConst.PETPAGE);
                break;
            case 1:
                i.close(UIConst.PETPAGE), i.close(UIConst.PETGROWUP);
                break;
            case 2:
                i.close(UIConst.PETPAGE), i.close(UIConst.PETSKILL);
                break;
            case 3:
                i.close(UIConst.PETPAGE), i.close(UIConst.PETPEIYANG);
                break;
            case 4:
                i.close(UIConst.PETPAGE), i.close(UIConst.PETGIFT)
        }
        var n = t;
        switch (t) {
            case 0:
                n = 0, i.open(UIConst.PETPAGE), e.petGroup.visible = !0;
                break;
            case 1:
                o.isEnable ? (i.open(UIConst.PETGROWUP), e.petGroup.visible = !1) : (i.open(UIConst.PETPAGE), e.petGroup.visible = !0);
                break;
            case 2:
                o.isEnable ? (i.open(UIConst.PETSKILL), e.petGroup.visible = !1) : (i.open(UIConst.PETPAGE), e.petGroup.visible = !0);
                break;
            case 3:
                o.isEnable ? i.open(UIConst.PETPEIYANG) : i.open(UIConst.PETPAGE), e.petGroup.visible = !0;
                break;
            case 4:
                GameGlobal.modelPet.curPetVo.createGift(), o.isEnable && GameGlobal.modelPet.curPetVo.gift ? (i.open(UIConst.PETGIFT), e.petGroup.visible = !1) : (i.open(UIConst.PETPAGE), e.petGroup.visible = !0)
        } - 1 != t && e.checkSkillOpen(t), this.base.setTabSelIdx(t), e.curSt = t
    }, e.prototype.onExp = function () {
        this.updatePets(), this.updateSkill(), this.updateSel()
    }, e.prototype.updatePets = function () {
        var t = GameGlobal.modelPet,
            e = t.getPetArr();
        e.sort(ModelPet.petHeadSort), this.petListData.replaceAll(e)
    }, e.prototype.showCFG = function (t) {
        t.q >= 3 ? (this.imgQType.source = null, this.imgSXBG.visible = !0, this.lbSX.visible = !0, this.lbSX.text = VoPeiYang.getChiniseNum(t.d) + "\n阶") : (this.imgQType.source = "pet_json.bm_q" + t.q, this.imgSXBG.visible = !1, this.lbSX.visible = !1), this.imgSpecType.source = "pet_json.bm_t" + t.cha
    }, e.prototype.onTouchList = function (t) {
        var e = t.itemRenderer;
        GameGlobal.modelPet.selSelPos(e.vo.pos)
    }, e.prototype.onSkillGrpT = function (t) {
        var e = t.target,
            i = this;
        if (e.isGrid) {
            var o = e.parent.getChildIndex(e);
            if (e._vo) {
                var n = GameGlobal.layerMgr.isOpenView(UIConst.PETSKILL);
                if (n && !e._vo.must) {
                    var a = [e._vo, n];
                    GameGlobal.layerMgr.open(UIConst.PETSKIPPTIP, a)
                } else GameGlobal.layerMgr.open(UIConst.PETSKIPPTIP1, e._vo)
            } else {
                var s = GameGlobal.modelPet.curPetVo;
                if (e.learnClassCount > 0) s.petcfg.d >= e.learnClassCount ? 0 == i.curSt && ViewAlert.show("该技能未学习,是否前往学习新技能?", function () {
                    GameGlobal.layerMgr.isOpenView(UIConst.PET) && i.setCurrentSt(2)
                }, ViewAlert.OKANDCANCEL, i, "提   示", "前往") : ViewAlert.show("该技能达到" + e.learnClassCount + "阶方可解锁，是否前往进阶?", function () {
                    GameGlobal.layerMgr.isOpenView(UIConst.PET) && i.setCurrentSt(3)
                }, ViewAlert.OKANDCANCEL, i, "提   示", "前往");
                else {
                    var r = CFG_Pet.PETSKILLL[o + 1].oplv;
                    GameGlobal.modelPet.curPetVo.level < r ? ViewAlert.show(Lang.reTxt("开启该技能孔需要宠物达到{0}级,是否前往升级?", r), function () {
                        GameGlobal.layerMgr.open(UIConst.PETLEVEL, GameGlobal.modelPet.curPetVo)
                    }) : 0 == i.curSt && ViewAlert.show("该技能未学习,是否前往学习新技能?", function () {
                        GameGlobal.layerMgr.isOpenView(UIConst.PET) && i.setCurrentSt(2)
                    }, ViewAlert.OKANDCANCEL, i, "提   示", "前往")
                }
            }
        }
    }, e.prototype.updateSel = function () {
        for (var t = GameGlobal.modelPet.curPetVo.basecfg.id, e = 0, i = this.petList.numChildren; i > e; e++) {
            var o = this.petList.getChildAt(e);
            o.setSel(o.vo.basecfg.id == t), !o.vo.isEnable && o.vo.canEnable() ? (o.lbCenter.visible = !0, o.lbCenter.text = "可激活") : o.lbCenter.visible = !1, o.imgTip.visible = o.vo.checkTip()
        }
    }, e.prototype.onTick = function (t) {
        var e = t.petv._perc + .1;
        e >= 1 && (e = 0), t.petv.perc = e
    }, e.prototype.updatePet = function () {
        var t = this,
            e = GameGlobal.modelPet,
            i = GameGlobal.modelRole.voMine;
        t.petv.setModID(e.curPetVo.getPetModel(), !0), t.petv.setWay(3), t.petv.scaleX = -t.petv.scaleX, t.petv.validParts(), e.curPetVo.nickName ? t.lbName.text = e.curPetVo.nickName : t.lbName.text = e.curPetVo.basecfg.n, e.curPetVo.str > 0 && e.curPetVo.sysid ? (t.imgStr.setText("z" + (e.curPetVo.str + i.teamStr)), t.imgStr.container.x = 145 - t.imgStr.totalWid / 2, e.setZZLVLabel(t.lbZZ, e.caculateZZLV(e.curPetVo.sysid, e.curPetVo.z_growup))) : (t.imgStr.setText(""), t.lbZZ.text = ""), e.curPetVo.isEnable ? t.bm_att.source = "CMS1_json.bm_at" + e.curPetVo.petcfg.t : t.bm_att.source = "CMS1_json.bm_at" + e.curPetVo.basecfg.t, this.updateSkill();
        var o = e.curPetCFG;
        this.showCFG(o)
    }, e.prototype.updateSkill = function () {
        var t = GameGlobal.modelPet,
            e = t.curPetVo;
        e.petcfg;
        if (e && e.isEnable) {
            var i = new SkillGroupData;
            i.count = e.maxJNK, i.dataArr = e.skillLst, i.isLock = t.isShowSkillLock, i.classType = e.petcfg.classtype, i.petLayer = e.petcfg.d, i.petLevel = e.level, this.skillGrids.setData(i)
        }
    }, e.prototype.onPetChange = function () {
        var t = GameGlobal.modelPet.curPetVo;
        this.checkTabVis(), this.updatePets(), this.updatePet(), t.isEnable ? this.setCurrentSt(this.curSt) : this.setCurrentSt(this.curSt), this.updateSel(), this.checkSkillOpen(this.curSt), this.updateSkill(), this.checkTip(), this.headScroll.viewport.scrollV = 0, GameGlobal.tick.removeInterv(this.playAttack, this), GameGlobal.tick.addInterv(this.playAttack, 1500, this, !0)
    }, e.prototype.checkTabVis = function () {
        var t = GameGlobal.modelPet.curPetVo;
        t && (t.basecfg.q >= 3 ? this.base.addTab("升阶", 3, 4) : (this.base.removeTabByID(4), 3 == this.curSt && this.setCurrentSt(0)))
    }, e.prototype.playAttack = function (t) {
        t.petv.playAttack()
    }, e.prototype.onListChange = function () {
        this.setCurrentSt(this.curSt), this.updatePets(), this.updateSkill(), this.updateSel(), this.checkTip(), this.showCFG(GameGlobal.modelPet.curPetVo.petcfg)
    }, e.prototype.onFightSt = function () {
        this.updatePets(), this.updateSel(), this.checkTip(), this.showCFG(GameGlobal.modelPet.curPetCFG)
    }, e.prototype.onTbtnT = function (t) {
        var e = t.sort;
        this.curSt != e && this.setCurrentSt(e)
    }, e.prototype.checkSkillOpen = function (t) {
        var e = GameGlobal.modelPet,
            i = !0;
        0 == t ? e.curPetVo && !e.curPetVo.isEnable && (i = !1) : 1 == t ? e.curPetVo && e.curPetVo.isEnable && (i = !1) : 3 == t ? e.curPetVo && e.curPetVo.isEnable && (i = !1) : 4 == t && (i = !1, GameGlobal.layerMgr.isOpenView(UIConst.PETPAGE) && (i = !0)), e.curPetVo && !e.curPetVo.isEnable && (i = !1), this.skillGrids.visible = i
    }, e.prototype.onBagC = function () {
        this.checkTip()
    }, e.prototype.onLockVis = function () {
        this.updateSkill()
    }, e.prototype.onNewSkill = function (t) {
        for (var e = 0; e < this.skillGrids.skillGrp1.numChildren; e++) {
            var i = this.skillGrids.skillGrp1.getChildAt(e);
            i._vo && -1 != t.indexOf(i._vo.id) && EffectMgr.addEff("uieff/dzsuccess", i, 45, 45, 1e3, 1e3)
        }
    }, e.prototype.onZZChange = function (t) {
        GameGlobal.modelPet.curPetVo && GameGlobal.modelPet.curPetVo.sysid == t && (this.updatePet(), this.showCFG(GameGlobal.modelPet.curPetCFG))
    }, e.prototype.checkTip = function () {
        GameGlobal.tick.addInterv(this._checkTip, 100, this, !0)
    }, e.prototype._checkTip = function (t) {
        var e = GameGlobal.modelPet;
        t.base.setNoticByIndex(0, e.checkTip())
    }, e
}(BaseEUIView);
__reflect(ViewPetPnl.prototype, "ViewPetPnl");
var ViewZiZhiPeiYangPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/pet/PeiZiZhiPeiYangSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.cbGroup.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCBT, this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnCancel), this.btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOKT, this), this.grid.enableTip()
    }, e.getZiZhinameT = function (t) {
        var e;
        return 1 == t ? e = "气血" : 2 == t ? e = "攻击" : 3 == t ? e = "物防" : 4 == t ? e = "法防" : 5 == t ? e = "速度" : 6 == t && (e = "成长"), e
    }, e.getZiZhiValue = function (t, e) {
        var i;
        return 1 == e ? i = t.z_hp : 2 == e ? i = t.z_att : 3 == e ? i = t.z_pDef : 4 == e ? i = t.z_mDef : 5 == e ? i = t.z_speed : 6 == e && (i = t.z_growup / 1e4), i
    }, e.getZiZhiMaxValue = function (t, e) {
        var i, o = CFG_Pet.PETLIB[t];
        1 == e ? i = o.hpqu : 2 == e ? i = o.attqu : 3 == e ? i = o.phydqu : 4 == e ? i = o.magdqu : 5 == e ? i = o.spedqu : 6 == e && (i = o.grovdqu / 1e4);
        var n = GameGlobal.modelPet.curPetVo.gift;
        if (n)
            for (var a in n.skill) {
                var s = n.skill[a];
                parseInt(s.osz[0]) == Vo_PetGiftSkill.idl[e - 1] && 0 != s.lev && (i += parseInt(s.osz[s.lev]))
            }
        return i
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i), this.pyType = i[0], this.vopet = i[1], this.itemid = i[2], this.updateItem(), this.updateZZ(), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateItem, this), GameGlobal.modelPet.on(ModelPet.MSG_PETZZCHANGE, this.updateZZ, this), GameGlobal.modelPet.on(ModelPet.MSG_ZZPYRET, this.onZZPYRet, this), GameGlobal.modelBag.on(ModelPet.MSG_LISTCHANGE, this.updateZZ, this);
        var o = CFG_Item.LIB[this.itemid].name,
            n = this.vopet.petcfg.n,
            a = e.getZiZhinameT(this.pyType);
        this.lbMain.textFlow = HtmlUtil.parse(Lang.reTxt("是否使用<font color='#3BBD50'>{0}</font>提升<font color='#C6721D'>{1}</font>的\n{2}资质?", o, n, a))
    }, e.prototype.onClose = function () {
        GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateItem), GameGlobal.modelPet.off(ModelPet.MSG_PETZZCHANGE, this.updateZZ), GameGlobal.modelPet.off(ModelPet.MSG_ZZPYRET, this.onZZPYRet), GameGlobal.modelBag.off(ModelPet.MSG_LISTCHANGE, this.updateZZ)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.updateRemain = function () {
        GameGlobal.modelPet;
        if (this.pyType < 6) var t = 10 - this.vopet.zztimes;
        else t = 10 - this.vopet.growuptimes;
        this.lbTimes.textFlow = HtmlUtil.parse(Lang.reTxt("该宠物的资质剩余培养次数:<font color='#3BBD50'>{0}</font>", t))
    }, e.prototype.updateItem = function () {
        var t = GameGlobal.modelBag.getItemCount(this.itemid);
        t >= 1 ? this.lbCount.textColor = Color.UIGREY : this.lbCount.textColor = Color.UIRED, this.lbCount.text = t + "/1";
        var e = this.grid._data;
        e || (e = VoItem.create()), e.init(this.itemid), this.grid.setData(e), e.count = t
    }, e.prototype.updateZZ = function () {
        var t, i = this.vopet,
            o = e.getZiZhiValue(i, this.pyType),
            n = e.getZiZhiMaxValue(i.sysid, this.pyType),
            a = e.getZiZhinameT(this.pyType),
            s = CFG_Item.LIB[this.itemid];
        1 == this.pyType ? t = s.canshu.hpqlAdd[0] + "-" + s.canshu.hpqlAdd[1] : 2 == this.pyType ? t = s.canshu.attqlAdd[0] + "-" + s.canshu.attqlAdd[1] : 3 == this.pyType ? t = s.canshu.phydefqlAdd[0] + "-" + s.canshu.phydefqlAdd[1] : 4 == this.pyType ? t = s.canshu.spedefqlAdd[0] + "-" + s.canshu.spedefqlAdd[1] : 5 == this.pyType ? t = s.canshu.speedqlAdd[0] + "-" + s.canshu.speedqlAdd[1] : 6 == this.pyType && (t = s.canshu.min + "-" + s.canshu.max), o >= n ? this.lbZiZhi.textFlow = HtmlUtil.parse(Lang.reTxt("{0}资质:{1}<font color='#EE3333'>(已满)</font>", a, o)) : this.lbZiZhi.textFlow = HtmlUtil.parse(Lang.reTxt("{0}资质:{1}<font color='#3BBD50'>({2})</font>", a, o, t)), this.updateRemain()
    }, e.prototype.onZZPYRet = function () {
        EffectMgr.addEff("uieff/baozha", this.mainGroup, 180, 220, 500, 500), this.updateRemain()
    }, e.prototype.onBtnT = function (t) {
        var e = GameGlobal.modelBag.getItemCount(this.itemid),
            i = GameGlobal.modelPet.curPetVo,
            o = this.pyType;
        if (0 >= e) return void ViewText.text(Lang.reTxt("{0}不足", CFG_Item.LIB[this.itemid].name));
        if (this.pyType < 6) var n = 10 - i.zztimes;
        else n = 10 - i.growuptimes;
        return 0 >= n ? void ViewText.text(Lang.reTxt("培养次数已满", CFG_Item.LIB[this.itemid].name)) : void GameGlobal.modelPet.CG_ZZPEIYANG(GameGlobal.modelPet.curPetVo.sysid, o)
    }, e.prototype.onCBT = function () {
        var t = GameGlobal.modelPet;
        t.neverWarnGP = !t.neverWarnGP, this.imgCB.visible = t.neverWarnGP
    }, e.prototype.onOKT = function () {
        GameGlobal.modelPet.requestPY(this.pyType, this.vopet, this.itemid)
    }, e
}(BaseEUIView);
__reflect(ViewZiZhiPeiYangPnl.prototype, "ViewZiZhiPeiYangPnl");
var VoPet = function () {
    function t() {
        this.nickName = "", this.fightPos = 0, this.isEnable = !1, this.level = 0, this.exp = 0, this.zztimes = 0, this.growuptimes = 0, this.z_hp = 0, this.z_att = 0, this.z_pDef = 0, this.z_mDef = 0, this.z_speed = 0, this.z_growup = 0, this.s_hp = 0, this.s_att = 0, this.s_pDef = 0, this.s_mDef = 0, this.s_speed = 0, this.s_growup = 0, this.str = 0, this.hp = 0, this.att = 0, this.phyDef = 0, this.speDef = 0, this.crit = 0, this.resCrit = 0, this.critDmgAdd = 0, this.critDmgRed = 0, this.speCritDmgRed = 0, this.dmgAddPer = 0, this.phyDmgRedPer = 0, this.speDmgRedPer = 0, this.speed = 0, this.xilian = !1, this.maxJNK = 3
    }
    return t.prototype.getName = function () {
        return this.petcfg ? this.petcfg.n : this.basecfg.n
    }, t.prototype.initLib = function (t) {
        this.pos = t;
        var e = this.poscfg = CFG_Pet.POSLIB[t];
        this.basecfg = CFG_Pet.PETLIB[e.petId]
    }, t.prototype.setPetSysid = function (t) {
        t ? (this.petcfg = CFG_Pet.PETLIB[t], this.maxJNK = this.petcfg.jnk) : this.petcfg = CFG_Pet.PETLIB[this.poscfg.petId], this.sysid = t, this.nextid = this.getNextSysid();
        var e = this.nextcfg = CFG_Pet.PETLIB[this.nextid];
        e ? (this.jitemid = e.item[1], this.jitemnum = e.item[2]) : this.jitemid = this.jitemnum = 0
    }, t.prototype.getXiSuiCostID = function () {
        return this.petcfg.xsitem[1]
    }, t.prototype.getXSuiCostCount = function () {
        return this.petcfg.xsitem[2]
    }, t.prototype.getJinJieItemID = function () {
        switch (this.petcfg.q) {
            case 1:
                return 1010;
            case 2:
                return 1011
        }
        return 0
    }, t.prototype.isShenShou = function () {
        return 3 == this.petcfg.q || 4 == this.petcfg.q
    }, t.prototype.getJinJies = function () {
        return this.jinjies || (this.jinjies = Util.parseIntStr(this.poscfg.upgrade)), this.jinjies
    }, t.prototype.getNextSysid = function () {
        var t = this.getJinJies(),
            e = t.indexOf(this.sysid);
        return t[e + 1]
    }, t.prototype.hasSkill = function (t) {
        for (var e = 0, i = this.skillLst.length; i > e; e++)
            if (this.skillLst[e] && this.skillLst[e].id == t) return !0;
        return !1
    }, t.prototype.getRelateBestSkill = function (t) {
        var e = 0,
            i = CFG_Skill.LIB[t];
        if (i) {
            var o = CFG_Skill.LIBRELATE[i.g];
            if (o) {
                if (!this.skillLst) return !1;
                for (var n = 0, a = this.skillLst.length; a > n; n++) {
                    var s = this.skillLst[n];
                    if (s && s.petSkillGroupID == o.id) {
                        var r = o.ids.indexOf(t),
                            l = o.ids.indexOf(s.id);
                        l > r && (e = s.id)
                    }
                }
            }
        }
        return e
    }, t.prototype.hasBetterRSkill = function (t) {
        return 0 != this.getRelateBestSkill(t)
    }, t.prototype.getSkillLockNum = function () {
        for (var t = 0, e = 0, i = this.skillLst.length; i > e; e++) this.skillLst[e].skillLock && t++;
        return t
    }, t.prototype.getPetModel = function () {
        return this.isEnable ? this.petcfg.m : this.basecfg.m
    }, t.prototype.canEnable = function () {
        var t = this.basecfg.item;
        return t ? 0 != t[0] ? ConfigHelp.checkEnough1(this.basecfg.item) : void egret.warn("VoPet:this is a gift!") : GameGlobal.modelRole.voMine.level >= this.basecfg.level
    }, t.prototype.canUpLev = function () {
        if (!this.level) return !1;
        if (this.level >= GameGlobal.modelRole.voMine.level) return !1;
        for (var e = t.iteml, i = GameGlobal.modelPet.shangZhenVos, o = 0; o < i.length; o++) {
            var n = i[o];
            if (n && this.sysid == n.sysid) {
                var a = CFG_Pet.PETLEVEL[n.level].exp;
                if (a > 0)
                    for (var s = a - n.exp, r = 0; r < e.length; r++) {
                        var l = CFG_Item.LIB[e[r]],
                            h = l.canshu.exp,
                            c = GameGlobal.modelBag.getItemCount(e[r]);
                        if (h * c >= s) return !0
                    }
            }
        }
        return !1
    }, t.prototype.checkTip = function () {
        var t = !this.isEnable && this.canEnable() || this.canUpLev();
        return t
    }, t.prototype.getNameColor = function () {
        return Color.getColorInt(this.basecfg.ys)
    }, t.prototype.getNameColorStr = function () {
        return Color.getColorStr(this.basecfg.ys)
    }, t.prototype.copyXiLianAttr = function () {
        this.z_hp = this.s_hp, this.z_att = this.s_att, this.z_pDef = this.s_pDef, this.z_mDef = this.s_mDef, this.z_speed = this.s_speed, this.z_growup = this.s_growup
    }, t.caculateSkillLen = function (t) {
        var e = CFG_Pet.PETSKILLL,
            i = 0;
        for (var o in CFG_Pet.PETSKILLL) t >= e[o].oplv && e[o].pos > i && (i = e[o].pos);
        return i
    }, t.caculateSkillLenNew = function (t) {
        for (var e = Config.getConfig(petskill_131).values, i = 0, o = e.length, n = 0; o > n; n++) {
            var a = e[n],
                s = t.petcfg.classtype,
                r = 1 == s ? a.classtype1 : a.classtype2,
                l = t.petcfg.d,
                h = t.level;
            r > 0 ? l >= r && i++ : h >= a.oplv && i++
        }
        return i
    }, t.prototype.createGift = function () {
        if (this.isEnable && CFG_COMMOND.isOpen(CFG_COMMOND.PETGIFT)) {
            var t = CFG_Pet.GIFTLIB1[this.sysid];
            t && (this.gift || (this.gift = new Vo_PetGift, this.gift.id = this.pos, this.gift.setSkill(t.jn)))
        }
    }, t.prototype.getCurZZScore = function () {
        return t.cucalateZZScore(this.z_hp, this.z_att, this.z_pDef, this.z_mDef, this.z_speed, this.z_growup)
    }, t.prototype.getNxtZZScore = function () {
        return t.cucalateZZScore(this.s_hp, this.s_att, this.s_pDef, this.s_mDef, this.s_speed, this.s_growup)
    }, t.cucalateZZScore = function (t, e, i, o, n, a) {
        var s = (.5 * t + 6.5 * e + 2 * i + 2 * o + 5 * n) * a / 10;
        return s = Math.floor(s)
    }, t.iteml = [1012, 1029, 1013], t
}();
__reflect(VoPet.prototype, "VoPet");
var VPetEnabelTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/huoban/VGetHuoBanSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.part = Part.create(), this.contaienr.addChild(this.part), this.addCloseListen(this.sure), this.starCont.visible = !1
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = e,
            o = CFG_Pet.PETLIB[i];
        2 == o.q ? this.lbText.text = "恭喜成功变异" : o.d > 1 ? this.lbText.text = "恭喜成功进阶" : this.lbText.text = "恭喜成功激活", this.part.setAct(3), this.part.setVal("body/" + o.m + "/idle"), this.resetRemain(), this.part.scaleX = -1.5, this.part.scaleY = 1.5, GameGlobal.tick.addInterv(this.onTick, 100, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.resetRemain = function () {
        this.remainTime = 1e4, this.updateTimeView()
    }, e.prototype.updateTimeView = function () {
        var t = Math.ceil(this.remainTime / 1e3);
        this.sure.label = t + "秒后关闭"
    }, e.prototype.onTick = function (t, e) {
        var i = t.part._perc + .1;
        i >= 1 && (i = 0), t.part.setPec(i), t.remainTime -= e, t.remainTime <= 0 ? t.closeHandler() : t.updateTimeView()
    }, e
}(BaseEUIView);
__reflect(VPetEnabelTip.prototype, "VPetEnabelTip");
var VPetInfo = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/pet/PetInfoSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.petView = UIRole.create(), this.petView.x = 0, this.petView.y = 0, this.uirolePos.addChild(this.petView), this.petView.scale = 1.5, this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.textStr = new ImageText, this.textStr.makeContainer(), this.mainGroup.addChild(this.textStr.container), this.textStr.charFunc = ImageText.STRFUNC, this.textStr.container.y = 125, this.skillGrids.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSkilLT, this)
    }, e.prototype.onOpen = function (e) {
        var i = e.arg,
            o = e.skillList;
        t.prototype.onOpen.call(this, {
            arg: i,
            skillList: o
        }), this.petView.play(), this.update({
            arg: i,
            skillList: o
        })
    }, e.prototype.showCFG = function (t) {
        t.q >= 3 ? (this.imgQType.source = null, this.imgSXBG.visible = !0, this.lbSX.visible = !0, this.lbSX.text = VoPeiYang.getChiniseNum(t.d) + "\n阶") : (this.imgQType.source = "pet_json.bm_q" + t.q, this.imgSXBG.visible = !1, this.lbSX.visible = !1), this.bm_att.source = "CMS1_json.bm_at" + t.t, this.imgSpecType.source = "pet_json.bm_t" + t.cha
    }, e.prototype.onClose = function () {
        this.petView.stopAndClear(), this.skillGrids.clearGrids()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function (t) {
        var e = CFG_Pet.PETLIB[t.arg.id];
        this.lbName.text = t.arg.name, this.hp.text = "" + t.arg.hp, this.att.text = "" + t.arg.att, this.phyDef.text = "" + t.arg.phyDef, this.speDef.text = "" + t.arg.speDef, this.speed.text = "" + t.arg.speed, this.growup.text = "" + t.arg.growup / 1e4;
        var i = GameGlobal.modelPet.caculateZZLV(t.arg.id, t.arg.growup);
        GameGlobal.modelPet.setZZLVLabel(this.lbZZLV, i), this.textStr.setText("z" + t.arg.str), this.textStr.container.x = 175 - this.textStr.totalWid / 2, this.petView.setPetID(e.id, !0), this.petView.setWay(3), this.petView.validParts();
        var o = new SkillGroupData,
            n = Config.getConfig(chongwu_122).get(t.arg.id);
        o.count = n.jnk, o.dataArr = t.skillList;
        var a = GameGlobal.modelPet;
        o.isLock = a.isShowSkillLock, o.classType = n.classtype, o.petLayer = n.d, o.petLevel = 0, this.skillGrids.setData(o), this.showCFG(e)
    }, e.prototype.onSkilLT = function (t) {
        var e = t.target;
        e._vo && GameGlobal.layerMgr.open(UIConst.PETSKIPPTIP1, e._vo)
    }, e
}(BaseEUIView);
__reflect(VPetInfo.prototype, "VPetInfo");
var VPetRename = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/pet/PetRenameSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.input.maxChars = 5, this.input.restrict = "a-z A-Z 0-9 一-龥", this.btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.curVo = e
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onT = function (t) {
        var e = this.input.text;
        return e ? e == this.curVo.nickName ? void ViewText.text("请输入不同名称") : (GameGlobal.modelPet.CG_NAMING(this.curVo.sysid, e), void this.closeHandler()) : void ViewText.text("请输入名字")
    }, e
}(BaseEUIView);
__reflect(VPetRename.prototype, "VPetRename");
var VPetSkillOpenTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "PetSkillOpenTip", e
    }
    return __extends(e, t), e.prototype.initView = function () {}, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this._openArg = e, e.vo instanceof VoPet ? (this.showGridGrp(), this.index = 1) : e.vo instanceof Vo_PetGiftSkill && (this.showGiftGrp(), this.index = 2), this.sure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.toGrid, this), this.resetRemain(), GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.showGridGrp = function () {
        this.lbText.text = "恭喜开放新技能孔", this.gridGrp.visible = !0, this.giftGrp.visible = !1
    }, e.prototype.showGiftGrp = function () {
        this.lbText.text = "恭喜开放新天赋技能", this.gridGrp.visible = !1, this.giftGrp.visible = !0;
        var t = this._openArg.vo;
        this.imgicon.source = t.icon, this.imgLv.source = "petgift_json.lv" + t.type, this.lbskill.text = t.name
    }, e.prototype.onClose = function () {
        this.removeCloseListen(this.sure), GameGlobal.tick.removeInterv(this.onTick, this)
    }, e.prototype.resetRemain = function () {
        this.remainTime = 5e3, this.updateTimeView()
    }, e.prototype.updateTimeView = function () {
        var t = Math.ceil(this.remainTime / 1e3);
        this.sure.label = t + "秒后关闭"
    }, e.prototype.onTick = function (t, e) {
        t.remainTime -= e, t.remainTime <= 0 ? 1 == t.index ? t.toGrid() : t.closeHandler() : t.updateTimeView()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.toGrid = function () {
        this.closeHandler();
        var t = GameGlobal.layerMgr.getView(UIConst.PET);
        if (t && t.stage)
            for (var e = this._openArg.prev, i = this._openArg.curr - 1, o = e; i >= o; o++) {
                var n = t.skillGrids.skillGrp1.getChildAt(o);
                n && EffectMgr.addEff("uieff/dzsuccess", n, 45, 45, 1e3, 1e3)
            }
    }, e
}(BaseEUIView);
__reflect(VPetSkillOpenTip.prototype, "VPetSkillOpenTip");
var VPetSkillTj = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/pet/PetSkillTJSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.rect), this.skillList.itemRenderer = VPetSkillTJItem, this.listData = new eui.ArrayCollection, this.skillList.dataProvider = this.listData, this.lbTip.textFlow = HtmlUtil.parse("使用以上技能的<font color='#FA6E0A'>高级版本</font>效果更佳"), this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGoT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = e,
            o = CFG_Pet.PETLIB[i];
        if (this.lb0.text = ModelPet.getPetTypeName(o.t) + "型", o.tjs ? this.lb1.textFlow = HtmlUtil.parse(o.tjs) : this.lb1.text = "error", o.tj) {
            var n = o.tj.split(",");
            this.listData.source = n
        }
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onGoT = function () {
        this.closeHandler(), GameGlobal.layerMgr.open(UIConst.PETSKILLLEARN)
    }, e
}(BaseEUIView);
__reflect(VPetSkillTj.prototype, "VPetSkillTj");
var VPetSkillTJItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/pet/PetSkillTJItemSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.imgIco.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGridT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return null
        },
        set: function (t) {
            var e = CFG_Skill.LIB[t];
            this.voSkill ? this.voSkill.setTo(t, 1) : this.voSkill = Vo_Skill.create(t, 1), e ? (this.lbName.text = e.n, this.lbDes.textFlow = HtmlUtil.parse(e.tj), this.imgIco.source = IconUtil.getIconUrl(e.ico)) : this.lbName.text = "id:" + t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onGridT = function () {
        GameGlobal.layerMgr.open(UIConst.PETSKIPPTIP1, this.voSkill)
    }, e
}(eui.Component);
__reflect(VPetSkillTJItem.prototype, "VPetSkillTJItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VPetTabItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.index = 0, e._sel = !1, e.skinName = "resource/eui_skins/game/pet/PetTabGridSkin.exml", e.touchChildren = !1, e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.imgGrey.visible = !1
    }, e.prototype.setSel = function (t) {
        this.selectFrame.visible = t
    }, e.prototype.dataChanged = function () {
        var t, e, i = this.data,
            o = this;
        i.isEnable ? (t = i.nickName, e = "等级 " + i.level, o.filters = null, o.setGrey(!1), o.imgbg.source = "CM1_json.bm_gridbg" + i.petcfg.ys) : (t = i.basecfg.n, o.setGrey(!0), e = "未激活", o.imgbg.source = "CM1_json.bm_gridbg" + i.basecfg.ys), o.vo = i, o.imghead.source = IconUtil.getIconUrl(i.basecfg.icon), i.fightPos ? (o.bmFight.visible = o.lbFight.visible = !0, o.lbFight.text = "出战:" + i.fightPos) : o.bmFight.visible = o.lbFight.visible = !1, 3 == i.basecfg.q ? (o.bmTypebg.visible = o.lbType.visible = !0, o.lbType.text = "珍", o.lbType.textColor = 5977861) : 4 == i.basecfg.q ? (o.bmTypebg.visible = o.lbType.visible = !0, o.lbType.textColor = 16711680, o.lbType.text = "神") : o.bmTypebg.visible = o.lbType.visible = !1;
        var n = i.getNameColorStr(),
            a = HtmlUtil.colorSize(t, n, 24) + "\n" + HtmlUtil.colorSize(e, "#AF8411", 20);
        this.nameAndLevel.textFlow = HtmlUtil.parse(a), this.setSel(GameGlobal.modelPet.curPetVo == i), !i.isEnable && i.canEnable() ? (this.lbCenter.visible = !0, this.lbCenter.text = "可激活") : this.lbCenter.visible = !1, this.imgTip.visible = i.checkTip()
    }, e.prototype.setGrey = function (t) {
        t ? this.imgGrey.visible = !0 : this.imgGrey.visible = !1
    }, e
}(eui.ItemRenderer);
__reflect(VPetTabItem.prototype, "VPetTabItem");
var VPetCLGet = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VHBGetItemsSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btn), this.grid.setShowCount(!1), this.btn.label = "前往", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function (t) {
        var e = this.huoban.cfg.tz;
        e > 0 ? CFG_COMMOND.isOpen(e, !0) && (GameGlobal.layerMgr.open(e), this.closeHandler()) : ViewText.text("系统尚未开启，敬请期待")
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.huoban = e;
        var i = ConfigHelp.makeVoList(e.cfg.con)[0];
        this.grid.data = i, this.txtName.textColor = Color.getColorInt(i.quality), this.txtName.text = i.name;
        var o = HtmlUtil.parse("拥有: ");
        this.txtOwn.textFlow = o.concat(ConfigHelp.costTxt(i)), this.txtGet.text = "获取途径: " + e.cfg.tj
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VPetCLGet.prototype, "VPetCLGet");
var VPetGrowupPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/pet/PetGrowupSkin.exml", e
    }
    return __extends(e, t), e.prototype.guideXiSui = function () {
        var t = this.btn;
        QuestGuideArrow.getIns().guideTo(t, t.width / 2, t.height / 2)
    }, e.prototype.guideSave = function () {
        var t = this.btnSave;
        QuestGuideArrow.getIns().guideTo(t, t.width / 2, t.height / 2)
    }, e.prototype.initView = function () {
        this.grid.enableTip(), this.btnSave.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSaveT, this), this.btnCancel.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCancelT, this), this.pys = [null, this.py1, this.py2, this.py3, this.py4, this.py5, this.py6];
        for (var t = 0, e = this.pys.length; e > t; t++) {
            var i = this.pys[t];
            i && (i.$setTouchChildren(!1), i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPYT, this))
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), GameGlobal.modelPet.on(ModelPet.MSG_PETZZCHANGE, this.update, this), GameGlobal.modelPet.on(ModelPet.MSG_SELCHANGE, this.update, this), GameGlobal.modelPet.on(ModelPet.MSG_PETGIFT, this.updateLeft, this), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnTh, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelPet.off(ModelPet.MSG_PETZZCHANGE, this.update), GameGlobal.modelPet.off(ModelPet.MSG_SELCHANGE, this.update), GameGlobal.modelPet.off(ModelPet.MSG_PETGIFT, this.updateLeft, this)
    }, e.prototype.CGgetGiftNotice = function () {
        if (CFG_COMMOND.isOpen(CFG_COMMOND.PETGIFT, !1)) {
            var t = GameGlobal.modelPet.curPetVo;
            t && (t.createGift(), t.gift && GameGlobal.modelPet.CG3221(t.sysid))
        }
    }, e.prototype.update = function () {
        this.update2(), this.updateRightAttr(), this.CGgetGiftNotice()
    }, e.prototype.update2 = function () {
        var t = this;
        GameGlobal.modelPet.curPetVo;
        this.updateLeft(), t.updateCost()
    }, e.prototype.updateLeft = function () {
        var t = this,
            e = GameGlobal.modelPet,
            i = e.curPetVo,
            o = e.caculateZZLV(i.sysid, i.z_growup);
        e.setZZLVLabel(this.nowLv, o), this.setL(i.z_hp, i.petcfg.hpql, i.petcfg.hpqu, t.z_hp, t.p_hp, 0), this.setL(i.z_att, i.petcfg.attql, i.petcfg.attqu, t.z_att, t.p_att, 1), this.setL(i.z_pDef, i.petcfg.phydql, i.petcfg.phydqu, t.z_phyDef, t.p_phyDef, 2), this.setL(i.z_mDef, i.petcfg.magdql, i.petcfg.magdqu, t.z_speDef, t.p_speDef, 3), this.setL(i.z_speed, i.petcfg.spedql, i.petcfg.spedqu, t.z_speed, t.p_speed, 4), this.setL(i.z_growup, i.petcfg.grovdql, i.petcfg.grovdqu, t.z_growup, t.p_growup, 5, 1e4), this.lbCurScore.text = "资质评分:" + i.getCurZZScore()
    }, e.prototype.setL = function (t, e, i, o, n, a, s) {
        void 0 === s && (s = 1);
        var r = t / i;
        if (r > 1 && (r = 1), s > 1) o.text = t / s + "/" + i / s;
        else {
            if (5 != a) {
                var l = GameGlobal.modelPet.curPetVo.gift;
                if (l)
                    for (var h in l.skill) {
                        var c = l.skill[h];
                        parseInt(c.osz[0]) == Vo_PetGiftSkill.idl[a] && 0 != c.lev && (i += parseInt(c.osz[c.lev]), r = t / i)
                    }
            }
            o.text = t + "/" + i
        }
        n.width = 133 * r
    }, e.prototype.updateRightAttr = function () {
        var t = this,
            e = GameGlobal.modelPet,
            i = e.curPetVo,
            o = e.caculateZZLV(i.sysid, i.s_growup);
        e.setZZLVLabel(this.nxtLv, o), i.xilian ? (t.introduce.visible = !1, t.ziZhiGrp0.visible = !0, t.replaceGrp.visible = !0, t.xiSuiGrp.visible = !1, t.setRV(i.z_hp, i.s_hp, i.petcfg.hpqu, t.p_hp1, t.z_hp1, t.a_hp, t.up_hp, 0), t.setRV(i.z_att, i.s_att, i.petcfg.attqu, t.p_att1, t.z_att1, t.a_att, t.up_att, 1), t.setRV(i.z_pDef, i.s_pDef, i.petcfg.phydqu, t.p_phyDef1, t.z_phyDef1, t.a_phyDef, t.up_phyDef, 2), t.setRV(i.z_mDef, i.s_mDef, i.petcfg.magdqu, t.p_speDef1, t.z_speDef1, t.a_speDef, t.up_speDef, 3), t.setRV(i.z_speed, i.s_speed, i.petcfg.spedqu, t.p_speed1, t.z_speed1, t.a_speed, t.up_speed, 4), t.setRV(i.z_growup, i.s_growup, i.petcfg.grovdqu, t.p_growup1, t.z_growup1, t.a_growup, t.up_growup, 5, 1e4), t.lbNxtScore.text = "资质评分:" + i.getNxtZZScore()) : (t.introduce.visible = !0, t.ziZhiGrp0.visible = !1, t.replaceGrp.visible = !1, t.xiSuiGrp.visible = !0, t.lbNxtScore.text = "")
    }, e.prototype.setRV = function (t, e, i, o, n, a, s, r, l) {
        void 0 === l && (l = 1);
        var h = e / i;
        if (h > 1 && (h = 1), 1 == l) {
            var c = e - t;
            if (5 != r) {
                var p = GameGlobal.modelPet.curPetVo.gift;
                if (p)
                    for (var u in p.skill) {
                        var d = p.skill[u];
                        parseInt(d.osz[0]) == Vo_PetGiftSkill.idl[r] && 0 != d.lev && (i += parseInt(d.osz[d.lev]), h = e / i)
                    }
            }
        } else c = (e - t) / 1e4, t /= 1e4, e /= 1e4, i /= 1e4;
        c >= 0 ? (s.$setTextColor(Color.UIGREEN), s.$setText(c.toString()), a.source = "CMS1_json.bm_greenUp") : (s.$setTextColor(Color.UIRED), s.$setText(Math.abs(c).toString()), a.source = "CMS1_json.bm_redDown"), o.width = 133 * h, n.$setText(e + "/" + i)
    }, e.prototype.updateCost = function () {
        var t = this,
            e = GameGlobal.modelPet.curPetVo,
            i = e.petcfg.xsitem[1],
            o = e.petcfg.xsitem[2];
        if (i) {
            t.xiSuiGrp.visible = !0;
            var n = t.grid._data;
            n || (n = VoItem.create());
            var a = GameGlobal.modelBag.getItemCount(i);
            n.init(i), n.count = a, t.grid.data = n, t.lbItem.text = n.name, t.lbNum.text = a + "/" + o, a >= o ? t.lbNum.textColor = 8143368 : t.lbNum.textColor = Color.UIRED
        } else t.xiSuiGrp.visible = !1
    }, e.prototype.setPerc = function (t, e) {
        e.text = t.toString()
    }, e.prototype.onBtnTh = function () {
        var t = GameGlobal.modelPet.curPetVo,
            e = t.petcfg.xsitem[1],
            i = t.petcfg.xsitem[2];
        GameGlobal.modelBag.getItemCount(e) >= i ? GameGlobal.modelPet.CG_XISUI(t.sysid) : (ViewText.text("道具不足"), GameGlobal.layerMgr.open(UIConst.CAILIAOGET, this.grid._data))
    }, e.prototype.onSaveT = function () {
        var t = GameGlobal.modelPet,
            e = t.curPetVo,
            i = t.caculateZZLV(e.sysid, e.z_growup),
            o = t.caculateZZLV(e.sysid, e.s_growup),
            n = t.getZZLVText(i),
            a = t.getZZLVText(o),
            s = t.getZZColorStr(i),
            r = t.getZZColorStr(o);
        i >= 3 ? t.neverWarnGoodZZ ? t.CG_SAVEXILIAN(e.sysid, 1) : ViewPrompt.show(Lang.reTxt("宠物当前资质为<font color='{0}'>{1}</font>\n是否替换为的<font color='{2}'>{3}</font>?", s, n, r, a), function (i, o) {
            t.neverWarnGoodZZ = o, t.CG_SAVEXILIAN(e.sysid, 1)
        }, ViewAlert.OKANDCANCEL, this, "此次登录不再提醒", !1, null, "替换属性", "让我想想") : t.CG_SAVEXILIAN(e.sysid, 1)
    }, e.prototype.onCancelT = function () {
        var t = GameGlobal.modelPet,
            e = t.curPetVo,
            i = t.caculateZZLV(e.sysid, e.s_growup),
            o = t.getZZLVText(i),
            n = t.getZZColorStr(i),
            a = this;
        i >= 3 && e.s_growup > e.z_growup ? ViewAlert.show(Lang.reTxt("当前已洗出更好的<font color='{0}'>{1}</font>资质\n是否忽略该属性?", n, o), function () {
            e.xilian = !1, a.updateRightAttr(), t.CG_SAVEXILIAN(e.sysid, 0)
        }, ViewAlert.OKANDCANCEL, this, null, "忽略该属性", "让我想想") : (e.xilian = !1, a.updateRightAttr(), t.CG_SAVEXILIAN(e.sysid, 0))
    }, e.prototype.onPYT = function (t) {
        var e = this.pys.indexOf(t.target);
        if (-1 != e) {
            if (6 == e) var i = 1009;
            else i = 1008;
            var o = GameGlobal.modelPet.curPetVo;
            if (6 > e) var n = 10 - o.zztimes;
            else n = 10 - o.growuptimes;
            if (0 >= n) return void ViewText.text(Lang.reTxt("培养次数已满", CFG_Item.LIB[i].name));
            if (GameGlobal.modelPet.neverWarnGP) GameGlobal.modelPet.requestPY(e, GameGlobal.modelPet.curPetVo, i);
            else {
                var a = Util.getTempArr();
                a[0] = e, a[1] = GameGlobal.modelPet.curPetVo, a[2] = i, GameGlobal.layerMgr.open(UIConst.PETZIZHI, a)
            }
        }
    }, e
}(BaseEUIView);
__reflect(VPetGrowupPage.prototype, "VPetGrowupPage");
var SkillLearnData = function () {
    function t(t) {
        this.isSelected = !1, this.isSelect = !1, this.isShowCount = !0, this.orderNum = 0, this.nameColor = 5581328, this.itemVo = t
    }
    return Object.defineProperty(t.prototype, "id", {
        get: function () {
            return this.itemVo.id
        },
        enumerable: !0,
        configurable: !0
    }), t
}();
__reflect(SkillLearnData.prototype, "SkillLearnData");
var FilterType;
! function (t) {
    t[t.ALL = 0] = "ALL", t[t.ATTACK = 1] = "ATTACK", t[t.COMMON = 2] = "COMMON"
}(FilterType || (FilterType = {}));
var Vo_PetGift = function () {
    function t() {
        this.skill = {}, this.skillIdList = [], this.tfd = 0
    }
    return t.prototype.setSkill = function (t) {
        var e = t.split(",");
        this.maxcolumn = 1;
        for (var i = 0; i < e.length; i++) {
            var o = parseInt(e[i]);
            0 == i && (this.tfFristid = o);
            var n = new Vo_PetGiftSkill(o, this);
            this.skillIdList.push(o), this.skill[o] = n, n.posY + 1 > this.maxcolumn && (this.maxcolumn = n.posY + 1)
        }
    }, t.Notice = function () {
        var t = GameGlobal.modelPet,
            e = t.shangZhenVos[0],
            i = t.curPetVo;
        if (!e && i) return !1;
        if (e.poscfg.pos != i.poscfg.pos) return !1;
        var o = i.gift;
        if (o)
            for (var n in o.skill) {
                var a = o.skill[n];
                if (a.jh) {
                    if (o.tfd >= a.getUplevtfd()) return !0
                } else if (!a.isLock() && o.tfd >= a.jhtfd && a.getisQZTJOpen()) return !0
            }
        return !1
    }, t.prototype.findLockSkill = function () {
        var t = [];
        for (var e in this.skill) {
            var i = this.skill[e];
            i.isLock() && t.push(i)
        }
        return t
    }, t
}();
__reflect(Vo_PetGift.prototype, "Vo_PetGift");
var Vo_PetGiftSkill = function () {
    function t(t, e) {
        this.jh = !1, this.lev = 0, this.require = [], this.uprequire = [], this.id = t, this.parent = e, this.init()
    }
    return t.prototype.init = function () {
        var t = CFG_Pet.GIFTLIB2[this.id];
        if (t) {
            this.icon = 0 != t.icon ? "petgift2_json." + t.icon : "petgift_json.bottom", this.parm = t.parm, this.name = t.zd, this.des = t.ms, this.type = t.type, this.posX = t.x, this.posY = t.y, this.setData(t.osz, t.tfd);
            var e = t.jstj.split(";");
            this.setJstj(e)
        } else console.log("lib error")
    }, t.prototype.setJstj = function (t) {
        for (var e = 0; e < t.length; e++) {
            var i = t[e].split(","),
                o = parseInt(i[0]),
                n = parseInt(i[1]),
                a = parseInt(i[2]);
            if (0 == o) return;
            var s = this.parent,
                r = new Vo_PetGiftSkillRequire;
            r.requireId = o, r.requireLev = n, r.requireMust = 0 == a ? !1 : !0, r.posY = s.skill[o].posY, this.require.push(r);
            var l = s.skill[o],
                h = new Vo_PetGiftSkillRequire;
            h.requireId = this.id, h.posY = this.posY, h.posX = this.posX, l.uprequire.push(h), l.uprequire.sort(this.sortFun)
        }
        this.require.sort(this.sortFun)
    }, t.prototype.sortFun = function (t, e) {
        var i = t.posY,
            o = e.posY;
        return i - o
    }, t.prototype.isLock = function () {
        if ("0" == this.parm) return !1;
        var t = GameGlobal.modelPet.curPetVo,
            e = parseInt(this.parm.split(",")[0]),
            i = parseInt(this.parm.split(",")[1]);
        if (1 == e) {
            if (t.level >= i) return !1
        } else {
            var o = t.sysid,
                n = Config.getConfig(chongwu_122).get(o),
                a = n.d;
            if (a >= i) return !1
        }
        return !0
    }, t.prototype.getLockDes = function () {
        var t = parseInt(this.parm.split(",")[0]),
            e = this.parm.split(",")[1];
        return 1 == t ? "灵兽等级到达" + e + "级解锁" : "灵兽等阶到达" + e + "阶解锁"
    }, t.prototype.setData = function (t, e) {
        if (t.indexOf(";") > -1 ? (this.osz = t.split(";"), this.osz.unshift("")) : this.osz = t.split(","), e.indexOf(",") > -1) {
            var i = e.split(",");
            this.jhtfd = parseInt(i[0]), this.tfd = i
        } else this.jhtfd = parseInt(e), this.tfd = [e];
        this.MaxLev = this.tfd.length
    }, t.prototype.getUplevtfd = function () {
        return parseInt(this.tfd[this.lev])
    }, t.prototype.isType3 = function (t) {
        if (t.indexOf(",") > -1) {
            for (var e = [132, 129, 130, 131, 133], i = t.split(","), o = "", n = 0; n < e.length; n++) {
                var a = CFG_ATTR.LIB[e[n]];
                if (a) {
                    var s = a.n;
                    o += Lang.reTxt2(this.des, [i[n], s]), n != e.length - 1 && (o += ",")
                } else console.log("error")
            }
            return o
        }
        if (3 == this.type) var r = (parseInt(t) / 100).toString();
        else r = t;
        return r
    }, t.prototype.getXgDes = function (t) {
        var e = t ? this.lev + 1 : this.lev;
        if (this.osz[e].indexOf(",") > -1) var i = this.isType3(this.osz[e]);
        else i = Lang.reTxt(this.des, this.isType3(this.osz[e]));
        return i
    }, t.prototype.getisQZTJOpen = function () {
        var t = !1;
        if (0 == this.require.length) return !0;
        for (var e = 0; e < this.require.length; e++) {
            var i = this.parent.skill[this.require[e].requireId];
            this.require[e].requireMust ? t = i.lev >= this.require[e].requireLev ? !0 : !1 : i.lev >= this.require[e].requireLev && (t = !0)
        }
        return t
    }, t.lockskill = [], t.idl = [132, 129, 130, 131, 133], t
}();
__reflect(Vo_PetGiftSkill.prototype, "Vo_PetGiftSkill");
var Vo_PetGiftSkillRequire = function () {
    function t() {}
    return t
}();
__reflect(Vo_PetGiftSkillRequire.prototype, "Vo_PetGiftSkillRequire");
var VPetGetTip1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "PetGiftTip1Skin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.btnFJ.addEventListener(egret.TouchEvent.TOUCH_TAP, this.fjT, this), this.btnOneGet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onegetT, this), this.btnOneGet.label = "一键添加", this.btnFJ.label = "分解", this.txtdes.textFlow = HtmlUtil.parse("灵兽100级可获得" + HtmlUtil.color("20点", "#4b8e09") + "天赋点\n100级之后每提升1级，可获得" + HtmlUtil.color("3点", "#4b8e09") + "天赋点\n" + HtmlUtil.color("每个灵兽的天赋点只能提升自己的天赋，\n不可提升其他灵兽的天赋", "#d83503"))
    }, e.prototype.fjT = function () {
        var t = e.selitems;
        return 0 != t.length ? void GameGlobal.modelPet.CG3225(t, GameGlobal.modelPet.curPetVo.sysid) : void ViewText.text("暂无可分解的道具")
    }, e.prototype.onegetT = function () {
        e.selitems = [];
        for (var t = e.items, i = 0; i < t.length; i++) {
            var o = GameGlobal.modelBag.getItemCount(t[i]);
            if (0 != o) {
                var n = VoItem.create();
                n.init(t[i]), n.count = o, e.selitems.push(n)
            }
        }
        return 0 == e.selitems.length ? void ViewText.text("暂无可分解的道具") : void this.upGrid()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.uptfd(), this.upGrid(), this.init(), GameGlobal.modelPet.on(ModelPet.MSG_PETGIFTFJ, this.upGrid, this), GameGlobal.modelPet.on(ModelPet.MSG_PETGIFTALLSEL, this.onegetT, this), GameGlobal.modelPet.on(ModelPet.MSG_PETGIFTPOINT, this.uptfd, this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), e.selitems = [], GameGlobal.modelPet.off(ModelPet.MSG_PETGIFTFJ, this.upGrid, this), GameGlobal.modelPet.off(ModelPet.MSG_PETGIFTALLSEL, this.onegetT, this), GameGlobal.modelPet.off(ModelPet.MSG_PETGIFTPOINT, this.uptfd, this)
    }, e.prototype.uptfd = function () {
        this.txtTfnum.text = GameGlobal.modelPet.curPetVo.gift.tfd.toString()
    }, e.prototype.upCanGettfd = function () {
        for (var t = e.selitems, i = 0, o = 0; o < t.length; o++) {
            var n = t[o],
                a = CFG_Pet.GIFTLIB5[n.id];
            a && (i += a.tfd * n.count)
        }
        this.dianGrp.visible = 0 >= i ? !1 : !0, this.txtDian.textFlow = HtmlUtil.parse("分解可获得" + HtmlUtil.color(i + "点", "#10a244") + "天赋点")
    }, e.prototype.upGrid = function () {
        for (var t = 0; t < this.grids.length; t++) {
            var i = this.grids[t];
            i.data = null
        }
        var o = e.selitems;
        for (t = 0; t < o.length; t++) {
            var i = this.grids[t];
            i.data = o[t]
        }
        this.upCanGettfd()
    }, e.prototype.init = function () {
        var t = CFG_Pet.GIFTLIB5,
            i = 0;
        for (var o in t) {
            var n = this.grids[i];
            n || (n = new VPetGetTip1Item, this.gridGroup.addChild(n), this.grids.push(n), e.items.push(parseInt(o))), n.data = null, i++
        }
        e.selitems = []
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.items = [], e.selitems = [], e
}(PopUpUI);
__reflect(VPetGetTip1.prototype, "VPetGetTip1");
var VPetGetTip1Item = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "PetGetTip1ItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.btnClose.visible = !1, this.itemGrid.addEventListener(egret.TouchEvent.TOUCH_TAP, this.gridT, this), this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP, this.closeT, this)
    }, e.prototype.gridT = function () {
        this.vo || GameGlobal.layerMgr.open(UIConst.PETGETTIP2)
    }, e.prototype.closeT = function () {
        for (var t = VPetGetTip1.selitems, e = 0; e < t.length; e++)
            if (t[e].id == this.vo.id) {
                t.splice(e, 1);
                break
            } this.data = null, GameGlobal.modelPet.notify(ModelPet.MSG_PETGIFTFJ)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, t ? (this.imgAdd.visible = !1, this.btnClose.visible = !0, this.grid.data = t, this.txtname.text = t.name, this.txtname.textColor = Color.getColorInt(t.quality)) : (this.imgAdd.visible = !0, this.btnClose.visible = !1, this.txtname.text = "", this.grid.data = null)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VPetGetTip1Item.prototype, "VPetGetTip1Item");
var VPetGetTip2 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.volist = [], e.skinName = "PetGiftTip2Skin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.list.itemRenderer = VPetGetTip2Item, this.listAC = new eui.ArrayCollection, this.list.dataProvider = this.listAC, this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnSub), DisplayUtil.popBtnStyle(this.btnAdd), DisplayUtil.popBtnStyle(this.btnMin), DisplayUtil.popBtnStyle(this.btnMax), this.btnSub.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnMin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnMax.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnAllSel.addEventListener(egret.TouchEvent.TOUCH_TAP, this.allSelT, this), this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, this.sureT, this), this.list.addEventListener(egret.TouchEvent.CHANGE, this.listT, this), this.btnAllSel.label = "全部选择", this.btnSure.label = "确定", this.init()
    }, e.prototype.onT = function (t) {
        var i = this.list.selectedItem,
            o = GameGlobal.modelBag.getItemCount(i.id);
        if (0 != o) {
            var n = t.currentTarget;
            switch (n) {
                case this.btnSub:
                    e.selnum--;
                    break;
                case this.btnAdd:
                    e.selnum++;
                    break;
                case this.btnMin:
                    e.selnum -= 10;
                    break;
                case this.btnMax:
                    e.selnum += 10
            }
            e.selnum = Math.max(e.selnum, 0), e.selnum = Math.min(e.selnum, o), this.num.text = e.selnum.toString();
            var a = this.list.selectedIndex;
            this.listAC.itemUpdated(i), this.list.selectedIndex = a
        }
    }, e.prototype.allSelT = function () {
        GameGlobal.modelPet.notify(ModelPet.MSG_PETGIFTALLSEL), this.closeHandler()
    }, e.prototype.sureT = function () {
        var t = this.list.selectedItem,
            i = GameGlobal.modelBag.getItemCount(t.id);
        if (0 != i && 0 != e.selnum) {
            t.count = e.selnum;
            for (var o = VPetGetTip1.selitems, n = !1, a = 0; a < o.length; a++)
                if (o[a].id == t.id) {
                    i = GameGlobal.modelBag.getItemCount(t.id), o[a].count < i && (o[a].count = Math.min(i, t.count + o[a].count)), n = !0;
                    break
                } n || o.push(t), GameGlobal.modelPet.notify(ModelPet.MSG_PETGIFTFJ)
        }
        this.closeHandler()
    }, e.prototype.listT = function () {
        this.num.text = e.selnum.toString()
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i), e.selnum = 0, this.num.text = e.selnum.toString(), DisplayUtil.fillDataAC(this.listAC, this.volist), this.list.selectedIndex = 0
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.init = function () {
        for (var t = VPetGetTip1.items, e = 0; e < t.length; e++) {
            var i = VoItem.create();
            i.init(t[e]), this.volist.push(i)
        }
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.selnum = 0, e
}(PopUpUI);
__reflect(VPetGetTip2.prototype, "VPetGetTip2");
var VPetGetTip2Item = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.count = 0, e.skinName = "PetGiftTip2ItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.touchChildren = !1
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.itemGrid.data = t, this.itemGrid.setShowCount(!1), this.txtname.text = t.name, this.txtname.textColor = Color.getColorInt(t.quality), this.count = GameGlobal.modelBag.getItemCount(t.id), this.num1.textFlow = this._sel ? HtmlUtil.parse(HtmlUtil.color(VPetGetTip2.selnum + "/" + this.count, "#8a4716")) : HtmlUtil.parse(HtmlUtil.color(this.count, "#4c7105")), this.num2.textFlow = this._sel ? HtmlUtil.parse("已选择:" + HtmlUtil.color(VPetGetTip2.selnum + "/" + this.count, "#d25002")) : HtmlUtil.parse("已拥有:" + HtmlUtil.color(this.count, "#10a244"))
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            if (this._sel != t) {
                this._sel = t;
                var e = GameGlobal.modelBag.getItemCount(this.vo.id);
                e < VPetGetTip2.selnum && (VPetGetTip2.selnum = e), this.itemGrid.selected = t, this.bg.source = t ? "recharge_json.dblbg" : "FLAtlas_json.signbg2", this.num1.textFlow = t ? HtmlUtil.parse(HtmlUtil.color(VPetGetTip2.selnum + "/" + this.count, "#8a4716")) : HtmlUtil.parse(HtmlUtil.color(this.count, "#4c7105")), this.num2.textFlow = t ? HtmlUtil.parse("已选择:" + HtmlUtil.color(VPetGetTip2.selnum + "/" + this.count, "#d25002")) : HtmlUtil.parse("已拥有:" + HtmlUtil.color(this.count, "#10a244"))
            }
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VPetGetTip2Item.prototype, "VPetGetTip2Item");
var VPetGift = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "PetGiftSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = GameGlobal.layerMgr;
        e.reg(UIConst.PETGETTIP1, VPetGetTip1, e.UI_Message), e.reg(UIConst.PETGETTIP2, VPetGetTip2, e.UI_Message), this.btnUp.label = "升级", this.btnGetGift.textFlow = [{
            text: "获取天赋点",
            style: {
                underline: !0
            }
        }], this.btnUp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnUpT, this), this.btnGetGift.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnGetGiftT, this), this.container.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this)
    }, e.prototype.limitXiongMao = function (t) {
        var e = (GameGlobal.modelPet.curPetVo, t.target),
            i = this.container.$children.indexOf(e);
        if (i > -1) {
            var o = this.container.getChildAt(i);
            if (this.xz(o.vo.id)) return ViewText.text("该天赋即将开放，敬请期待"), !0
        }
        return !1
    }, e.prototype.xz = function (t) {
        return !1
    }, e.prototype.onChange = function (t) {
        if (!this.limitXiongMao(t)) {
            if (VPetGiftItem._selvid) {
                var e = VPetGiftItem.Map[VPetGiftItem._selvid];
                e.setSel(!1)
            }
            var i = t.target,
                o = this.container.$children.indexOf(i);
            o > -1 ? (e = this.container.getChildAt(o), e.setSel(!0)) : e.setSel(!0), this.upMessage()
        }
    }, e.prototype.btnUpT = function () {
        if (this.btnUp.enabled) {
            var t = VPetGiftItem.Map[VPetGiftItem._selvid].vo,
                e = GameGlobal.modelPet.curPetVo;
            t.jh ? GameGlobal.modelPet.CG3227(e.sysid, t.id) : GameGlobal.modelPet.CG3223(e.sysid, t.id)
        }
    }, e.prototype.btnGetGiftT = function () {
        GameGlobal.layerMgr.open(UIConst.PETGETTIP1)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = GameGlobal.modelPet.curPetVo;
        i.createGift();
        var o = i.gift;
        VPetGiftItem._selvid = o.tfFristid, this.update(), GameGlobal.modelPet.on(ModelPet.MSG_PETGIFT, this.update, this), GameGlobal.modelPet.on(ModelPet.MSG_PETGIFTPOINT, this.update, this), GameGlobal.modelPet.CG3221(i.sysid)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelPet.off(ModelPet.MSG_PETGIFT, this.update, this), GameGlobal.modelPet.off(ModelPet.MSG_PETGIFTPOINT, this.update, this)
    }, e.prototype.update = function () {
        this.txtTfnum.text = GameGlobal.modelPet.curPetVo.gift.tfd.toString(), this.updateView(), this.upMessage()
    }, e.prototype.upMessage = function () {
        var t = VPetGiftItem.Map[VPetGiftItem._selvid].vo;
        if (this.txtXh.visible = this.txtName1.visible = this.txtdes1.visible = this.imgnext.visible = !0, this.txtdes0.lineSpacing = 0, this.txtdes0.height = 61, this.txtXh.textColor = GameGlobal.modelPet.curPetVo.gift.tfd >= t.jhtfd ? 16181978 : 14169347, t.jh) this.txtName0.textFlow = HtmlUtil.parse(t.name + " Lv." + t.lev), this.txtdes0.textFlow = HtmlUtil.parse(t.getXgDes(!1)), t.lev >= t.MaxLev ? (1 == t.MaxLev ? (this.txtdes0.lineSpacing = 8, this.txtdes0.height = 0 / 0, this.txtdes0.textFlow = HtmlUtil.parse(HtmlUtil.colorSize(t.getXgDes(!1), "#10a244", "20"))) : this.txtdes0.textFlow = HtmlUtil.parse(HtmlUtil.color(t.getXgDes(!1), "#10a244")), this.txtName1.visible = this.imgnext.visible = this.txtXh.visible = !1, this.txtName0.textFlow = HtmlUtil.parse(t.name + " Lv." + t.lev + HtmlUtil.color("    (已满级,请提升其他天赋)", "#FFB15D")), this.txtdes1.text = "", this.btnUp.label = "已满级", this.btnUp.setNoticeVis(!1), this.btnUp.enabled = !1) : (this.txtName1.textFlow = HtmlUtil.parse(t.name + " Lv." + (t.lev + 1)), this.txtdes1.textFlow = HtmlUtil.parse(HtmlUtil.colorSize(t.getXgDes(!0), "#FFB15D", "22")), this.txtXh.text = "消耗:" + t.getUplevtfd(), this.btnUp.label = "升级", GameGlobal.modelPet.curPetVo.gift.tfd >= t.getUplevtfd() ? (this.btnUp.setNoticeVis(!0), this.btnUp.enabled = !0) : (this.btnUp.setNoticeVis(!1), this.btnUp.enabled = !1));
        else {
            if (this.txtXh.visible = !1, t.isLock()) return 1 == t.MaxLev ? (this.txtdes0.lineSpacing = 5, this.txtdes0.height = 0 / 0, this.txtName1.visible = this.imgnext.visible = this.txtdes1.visible = !1, this.txtdes0.textFlow = HtmlUtil.parse(HtmlUtil.colorSize(t.getLockDes() + "\n", "#d83503", "22") + HtmlUtil.colorSize(t.getXgDes(!0), "#10a244", "19"))) : (this.txtdes0.textFlow = HtmlUtil.parse(HtmlUtil.colorSize(t.getLockDes(), "#d83503", "22")), this.txtName1.textFlow = HtmlUtil.parse(t.name + " Lv." + (t.lev + 1)), this.txtdes1.textFlow = HtmlUtil.parse(HtmlUtil.colorSize(t.getXgDes(!0), "#10a244", "22"))), this.txtName0.textFlow = HtmlUtil.parse(t.name + " Lv." + t.lev), this.btnUp.setNoticeVis(!1), this.btnUp.enabled = !1, void(this.btnUp.label = "未解锁");
            for (var e = GameGlobal.modelPet.curPetVo, i = e.gift, o = "", n = 0; n < t.require.length; n++) {
                var a = i.skill[t.require[n].requireId];
                o += a.name + "达到" + t.require[n].requireLev + "级", t.require[n].requireMust ? n != t.require.length - 1 && (o += "、") : n != t.require.length - 1 && (o += "或,")
            }
            if ("" == o) var s = "可直接激活";
            else s = "激活需要:" + o;
            this.txtName0.textFlow = HtmlUtil.parse(t.name + " Lv." + t.lev + HtmlUtil.colorSize("   未激活", "#d83503", "22")), 1 == t.MaxLev ? (this.txtdes0.lineSpacing = 8, this.txtdes0.height = 0 / 0, this.txtName1.visible = this.imgnext.visible = this.txtdes1.visible = !1, this.txtdes0.textFlow = HtmlUtil.parse(HtmlUtil.colorSize(s + "\n", "#d83503", "22") + HtmlUtil.colorSize(t.getXgDes(!0), "#10a244", "20"))) : (this.txtdes0.textFlow = HtmlUtil.parse(HtmlUtil.colorSize(s, "#d83503", "22")), this.txtName1.textFlow = HtmlUtil.parse(t.name + " Lv." + (t.lev + 1)), this.txtdes1.textFlow = HtmlUtil.parse(HtmlUtil.colorSize(t.getXgDes(!0), "#10a244", "22"))), this.txtXh.visible = !0, this.txtXh.text = "消耗:" + t.jhtfd, GameGlobal.modelPet.curPetVo.gift.tfd >= t.jhtfd && t.getisQZTJOpen() ? (this.btnUp.setNoticeVis(!0), this.btnUp.enabled = !0) : (this.btnUp.setNoticeVis(!1), this.btnUp.enabled = !1), this.btnUp.label = "激活"
        }
    }, e.prototype.updateView = function () {
        this.container.removeChildren();
        var t = GameGlobal.modelPet.curPetVo,
            e = t.gift,
            i = e.skill,
            o = e.skillIdList,
            n = 0;
        Util.clearKeys(VPetGiftItem.Map);
        for (var a = 0; a < o.length; a++) {
            var s = i[o[a]],
                r = VPetGiftItem.List[n];
            r || (r = new VPetGiftItem, VPetGiftItem.List.push(r)), VPetGiftItem.Map[s.id] = r, r.anchorOffsetX = r.width / 2, r.anchorOffsetY = r.height / 2;
            var l = (this.scroll.width - 4 * r.width) / 3,
                h = l;
            if (e.maxcolumn < 4) var c = (this.scroll.width - (r.width * e.maxcolumn + l * (e.maxcolumn - 1))) / 2;
            else l = (this.scroll.width - r.width * e.maxcolumn) / (e.maxcolumn - 1), h = 50, c = 0;
            r.x = s.posY * (r.width + l) + r.width / 2 + c, r.y = s.posX * (r.height + h) + r.height / 2, r.data = s, this.container.addChild(r), n++
        }
        for (; n < VPetGiftItem.List.length; n++) {
            var p = VPetGiftItem.List.splice(n, 1);
            n--, p = null
        }
        for (a = 0; a < VPetGiftItem.List.length; a++) VPetGiftItem.List[a].bulid();
        var u = VPetGiftItem.Map[VPetGiftItem._selvid];
        u.setSel(!0)
    }, e
}(BaseEUIView);
__reflect(VPetGift.prototype, "VPetGift");
var VPetGiftItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.line = [], e.rect = [], e.skinName = "PetGiftItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.touchChildren = !1
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.isPosY = function (t) {
        for (var e = 1 == t ? this.vo.uprequire : this.vo.require, i = 0; i < e.length; i++)
            if (e[i].posY == this.vo.posY) return !0;
        return !1
    }, e.prototype.getIndexPosY = function (t) {
        var i = 1 == t ? this.vo.uprequire : this.vo.require,
            o = e.Map[i[0].requireId];
        return this.posYHeight = 1 == t ? (o.y - this.y) / 2 : (this.y - o.y) / 2, this.vo.posY < i[0].posY ? 1 : this.vo.posY > i[0].posY && this.vo.posY < i[i.length - 1].posY ? 3 : this.vo.posY > i[i.length - 1].posY ? 2 : void 0
    }, e.prototype.bulid = function () {
        var t = this.vo;
        this.imgSel.visible = this._sel = this.iconNotice.visible = !1, t.jh ? t.lev >= t.MaxLev ? this.iconNotice.visible = !1 : this.iconNotice.visible = GameGlobal.modelPet.curPetVo.gift.tfd >= t.getUplevtfd() : t.isLock() ? this.iconNotice.visible = !1 : this.iconNotice.visible = GameGlobal.modelPet.curPetVo.gift.tfd >= t.getUplevtfd() && t.getisQZTJOpen(), this.grey.alpha = .7, this.lock.visible = t.isLock(), this.grey.visible = !t.jh, this.icon.source = t.icon, this.txtlv.text = "Lv." + t.lev, this.imgLv.source = "petgift_json.lv" + t.type;
        this.n = this.r = 0;
        var i = this.vo.uprequire;
        if (i.length > 1 && (this.bulidOneForAll(), !this.isPosY(1))) {
            var o = this.createLine2(this, t, 1);
            o.y = this.anchorOffsetY;
            var n = this.getIndexPosY(1);
            switch (o.height = this.posYHeight, n) {
                case 1:
                    var a = this.createRect2(this, t, o, 2, 1);
                    break;
                case 2:
                    a = this.createRect2(this, t, o, 2, 2);
                    break;
                case 3:
                    a = this.createRect2(this, t, o, 3)
            }
            a.y = this.anchorOffsetY + o.height
        }
        var s = this.clearRequireIdList();
        if (s.length > 0 && e.Map[s[0].requireId].vo.uprequire.length > 1) return this.clearLine(), void this.clearRect();
        if (this.bulidAllForOne(), s.length > 0 && !this.isPosY(2)) {
            var r = this.createLine(this, t, 1),
                n = this.getIndexPosY(2);
            switch (r.height = this.posYHeight, r.y = this.anchorOffsetY - r.height, n) {
                case 1:
                    var a = this.createRect2(this, t, r, 2, 1);
                    break;
                case 2:
                    a = this.createRect2(this, t, r, 2, 2);
                    break;
                case 3:
                    a = this.createRect2(this, t, r, 3)
            }
            a.y = this.anchorOffsetY - r.height
        }
        this.clearLine(), this.clearRect()
    }, e.prototype.bulidOneForAll = function () {
        for (var t, i = this.vo, o = this.vo.uprequire, n = 0; n < o.length; n++) {
            var a = (o[n], e.Map[o[n].requireId]),
                s = this.createLine2(a, i, 1),
                r = !1;
            if (this.vo.posY == a.vo.posY ? (s.height = a.y - this.y, r = !0) : s.height = (a.y - this.y) / 2, 0 == n) {
                t = a;
                var l = r ? 1 : 2,
                    h = this.createLine2(a, i, 2, s);
                this.createRect2(a, i, s, l, 1)
            } else n == o.length - 1 ? (h.height = a.x - t.x, l = r ? 1 : 2, this.createRect2(a, i, s, l, 2)) : this.createRect2(a, i, s, 3)
        }
    }, e.prototype.bulidAllForOne = function () {
        for (var t, i = this.vo, o = this.clearRequireIdList(), n = 0; n < o.length; n++) {
            var a = e.Map[o[n].requireId];
            if (1 == o.length) {
                var s = this.createLine(a, i, 1);
                s.height = this.y - a.y
            } else if (o.length > 1) {
                s = this.createLine(a, i, 1);
                var r = !1;
                if (this.vo.posY == a.vo.posY ? (s.height = this.y - a.y, r = !0) : s.height = (this.y - a.y) / 2, 0 == n) {
                    t = a;
                    var l = r ? 1 : 2;
                    this.createRect(a, i, s, l, 1);
                    var h = this.createLine(a, i, 2, s)
                } else n == o.length - 1 ? (h.height = a.x - t.x, l = r ? 1 : 2, this.createRect(a, i, s, l, 2)) : this.createRect(a, i, s, 3)
            }
        }
    }, e.prototype.clearLine = function () {
        for (var t = this.n; t < this.line.length; t++) {
            this.line[t].parent && this.line[t].parent.removeChild(this.line[t]);
            var e = this.line.splice(t, 1);
            t--, e = null
        }
    }, e.prototype.clearRect = function () {
        for (var t = this.r; t < this.rect.length; t++) {
            this.rect[t].parent && this.rect[t].parent.removeChild(this.rect[t]);
            var e = this.rect.splice(t, 1);
            t--, e = null
        }
    }, e.prototype.createLine2 = function (t, e, i, o) {
        void 0 === o && (o = null);
        var n = this.line[this.n];
        return n || (n = new eui.Image, this.line.push(n), n.scale9Grid = new egret.Rectangle(5, 5, 1, 1), n.anchorOffsetX = 5), n.source = this.vo.lev >= this.vo.MaxLev ? "petgift_json.line1" : "petgift_json.line2", 1 == i ? (n.rotation = 0, n.x = t.x - this.x + this.anchorOffsetX, n.y = this.vo.posY == t.vo.posY ? this.anchorOffsetY : this.anchorOffsetY + (t.y - this.y) / 2, this.addChildAt(n, 1)) : 2 == i && (n.rotation = -90, n.x = o.x, n.y = this.anchorOffsetY + (t.y - this.y) / 2, this.addChildAt(n, 0)), this.n++, n
    }, e.prototype.createRect2 = function (t, e, i, o, n) {
        void 0 === n && (n = 1);
        var a = this.rect[this.r];
        return a || (a = new eui.Image, this.rect.push(a)), a.y = t.anchorOffsetY + (t.y - this.y) / 2, a.x = i.x, a.rotation = 0, a.scaleX = 1, a.width = a.height = 10, a.anchorOffsetX = a.anchorOffsetY = 5, 1 == o ? (2 == n && (a.scaleX = -1), a.width = 8, a.source = this.vo.lev >= this.vo.MaxLev ? "petgift_json.line1_2" : "petgift_json.line2_2") : 2 == o ? (a.rotation = 90, 2 == n ? a.scaleY = -1 : (a.width = 8, a.anchorOffsetX = 4.5), a.source = this.vo.lev >= this.vo.MaxLev ? "petgift_json.line1_3" : "petgift_json.line2_3") : 3 == o && (a.width = 12, a.height = 6, a.anchorOffsetY = 3, a.anchorOffsetX = 6, a.source = this.vo.lev >= this.vo.MaxLev ? "petgift_json.line1_1" : "petgift_json.line2_1"), this.addChild(a), this.r++, a
    }, e.prototype.createLine = function (t, e, i, o) {
        void 0 === o && (o = null);
        var n = this.line[this.n];
        return n || (n = new eui.Image, this.line.push(n), n.scale9Grid = new egret.Rectangle(5, 5, 1, 1), n.anchorOffsetX = 5), n.source = e.jh ? "petgift_json.line1" : "petgift_json.line2", 1 == i ? (n.rotation = 0, n.x = t.anchorOffsetX, n.y = t.anchorOffsetY, t.addChildAt(n, 0)) : 2 == i && (n.rotation = -90, n.x = o.x, n.y = t.anchorOffsetY + (this.y - t.y) / 2, t.addChildAt(n, 1)), this.n++, n
    }, e.prototype.createRect = function (t, e, i, o, n) {
        void 0 === n && (n = 1);
        var a = this.rect[this.r];
        return a || (a = new eui.Image, this.rect.push(a)), a.y = t.anchorOffsetY + (this.y - t.y) / 2, a.x = i.x, a.rotation = 0, a.scaleX = 1, a.width = a.height = 10, a.anchorOffsetX = a.anchorOffsetY = 5, 1 == o ? (2 == n && (a.scaleX = -1), a.width = 8, a.source = e.jh ? "petgift_json.line1_2" : "petgift_json.line2_2") : 2 == o ? (2 == n ? a.scaleX = -1 : (a.width = 8, a.anchorOffsetX = 4.5), a.source = e.jh ? "petgift_json.line1_3" : "petgift_json.line2_3") : 3 == o && (a.width = 12, a.height = 6, a.anchorOffsetY = 3, a.anchorOffsetX = 6, a.source = e.jh ? "petgift_json.line1_1" : "petgift_json.line2_1"), t.addChild(a), this.r++, a
    }, e.prototype.clearRequireIdList = function () {
        for (var t = this.vo.require.concat(), i = 0; i < this.vo.require.length; i++)
            for (var o = e.Map[this.vo.require[i].requireId].vo, n = 0; n < t.length; n++) {
                var a = e.Map[t[n].requireId].vo;
                o.id != a.id && o.posY == a.posY && o.posX > a.posX && (t.splice(n, 1), n--)
            }
        return t
    }, e.prototype.setSel = function (t) {
        this._sel != t && (this._sel = t, e._selvid = this.vo.id, this.imgSel.visible = t)
    }, e.List = [], e.Map = {}, e
}(eui.Component);
__reflect(VPetGiftItem.prototype, "VPetGiftItem");
var VPetLearnSkillGrid = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "PetLearnSkillGrid", e
    }
    return __extends(e, t), e.prototype.dataChanged = function () {
        var t = this.data,
            e = t.itemVo;
        e ? (this.imgIcon.source = IconUtil.getIconUrl(e.icon), this.lbCount.text = "" + e.count, e.quality <= 1 ? this.imgBg.source = "CM1_json.grid1" : this.imgBg.source = "CM1_json.bm_gridbg" + e.quality, this.lbName.text = e.name) : (this.imgIcon.source = null, this.imgBg.source = "CM1_json.grid1", this.imgIcon.source = "CMS1_json.bm_close"), this.lbName.textColor = t.nameColor, this.lbCount.visible = t.isShowCount, this.setSelected(t.isSelected), this.setSelect(t.isSelect), this.setOrderNum(t.orderNum)
    }, e.prototype.setSelected = function (t) {
        this.chosen.visible = t
    }, e.prototype.setOrderNum = function (t) {
        t ? (this.orderNum.text = t + "", this.orderNumGroup.visible = !0) : (this.orderNum.text = "", this.orderNumGroup.visible = !1)
    }, e.prototype.setSelect = function (t) {
        this.imgYesBG.visible = this.imgYes.visible = t
    }, e
}(eui.ItemRenderer);
__reflect(VPetLearnSkillGrid.prototype, "VPetLearnSkillGrid");
var VPetSkillGrid = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isGrid = !0, e.learnClassCount = 0, e.skinName = "PetSkillGrid", e.touchChildren = !1, e
    }
    return __extends(e, t), e.create = function () {
        return this.P.length ? this.P.pop() : new e
    }, e.prototype.dispose = function () {
        this.learnClassCount = 0, e.P.push(this)
    }, e.prototype.setVo = function (t) {
        var e = this;
        e._vo = t, this.imgGrey.visible = !1, this.lbCenter && (this.lbCenter.visible = !1), t ? (e.imgIcon.source = IconUtil.getIconUrl(t.icon), e.imgIcon.width = e.imgIcon.height = 80, e.lbLv.text = t.name, e.bmLock.visible = t.skillLock && e.isShowLock, t.quality <= 1 ? e.imgBg.source = "CM1_json.grid1" : e.imgBg.source = "CM1_json.bm_gridbg" + t.quality, e.imgMust.visible = e.lbMust.visible = 1 == t.must, e.currentState = "any") : (e.imgIcon.source = null, e.lbLv.text = "", e.bmLock.visible = !1, e.imgMust.visible = e.lbMust.visible = !1, e.imgBg.source = "CM1_json.grid1", e.imgIcon.source = "CMS1_json.bm_close", e.imgIcon.width = 46, e.imgIcon.height = 52)
    }, e.prototype.setOpenCond = function (t) {
        var e = this;
        this._vo = null, e.lbCenter || (e.lbCenter = new eui.Label, e.lbCenter.verticalCenter = e.lbCenter.horizontalCenter = 0, e.lbCenter.size = 26, e.addChild(e.lbCenter)), e.bmLock.visible = !1, e.imgIcon.width = 46, e.imgIcon.height = 52, e.lbLv.text = "", e.imgBg.source = "CM1_json.grid1", e.imgIcon.source = null == t ? "pet_json.unknown " : "CMS1_json.bm_close", e.imgGrey.visible = null != t, e.lbCenter.visible = !0, e.lbCenter.text = t, e.imgMust.visible = e.lbMust.visible = !1
    }, e.prototype.setLockVis = function (t) {
        var e = this;
        e._vo ? e.bmLock.visible = e._vo.skillLock : e.bmLock.visible = !1
    }, e.P = [], e
}(eui.Component);
__reflect(VPetSkillGrid.prototype, "VPetSkillGrid");
var PetSkillLearnModel = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skillList = new Dictionary, e._selectedArr = [null, null, null, null, null], e.curSelectCount = 0, e
    }
    return __extends(e, t), e.prototype.resetSelected = function () {
        this.curSelectCount = 0, this._selectedArr = [null, null, null, null, null]
    }, e.prototype.addSelected = function (t, e) {
        this._selectedArr[e - 1] = t, this.curSelectCount++
    }, e.prototype.removeSelected = function (t) {
        var e = this._selectedArr.indexOf(t); - 1 != e && (this._selectedArr[e] = null, this.curSelectCount--)
    }, e.prototype.isSelected = function (t) {
        var e = -1 != this._selectedArr.indexOf(t);
        return e
    }, e.prototype.isCanSelect = function () {
        return this.curSelectCount < 5
    }, e.prototype.getCanSelectNum = function () {
        for (var t = 0, e = this._selectedArr.length; e > t; t++)
            if (!this._selectedArr[t]) return t + 1;
        return null
    }, Object.defineProperty(e.prototype, "curSelectedId", {
        get: function () {
            var t = this.curSelectedData ? this.curSelectedData.id : null;
            return t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selectedArr", {
        get: function () {
            return this._selectedArr
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.filterSkill = function (t, e, i, o) {
        for (var n = Math.min(VoPet.caculateSkillLenNew(e), e.petcfg.jnk), a = e.skillLst.length, s = 0, r = i.length; r > s; s++) {
            var l = i[s],
                h = void 0,
                c = 31 == l.itemType || 10 == l.itemType && l.count > 0 && !e.hasSkill(l.useParam.skillid) && !e.hasBetterRSkill(l.useParam.skillid);
            if (c) {
                if (31 == l.itemType) {
                    var p = l.useParam.max,
                        u = l.useParam.min,
                        d = a + 1;
                    n >= d && p >= d && d >= u && !t.exist(l.id) && (h = new SkillLearnData(l))
                } else {
                    var f = CFG_Skill.LIB[l.useParam.skillid];
                    0 != f.lid ? c = c && f.lid.indexOf(e.sysid) >= 0 : o == FilterType.ALL ? c = c && e.petcfg.t == f.roleocc || 3 == f.roleocc : o == FilterType.ATTACK ? c = e.petcfg.t == f.roleocc : o == FilterType.COMMON && (c = 3 == f.roleocc), !c || e.petcfg.t != f.roleocc && 3 != f.roleocc || t.exist(l.id) || (h = new SkillLearnData(l))
                }
                h && t.set(h.id, h)
            }
        }
    }, e.prototype.reset = function () {
        this.curSelectedData = null, this.skillList.clear(), this.resetSelected()
    }, e
}(GameCtrlBase);
__reflect(PetSkillLearnModel.prototype, "PetSkillLearnModel");
var VPetPeiYangPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/pet/PetPeiYangSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.grid.data = VoItem.create(), this.grid.enableTip(), this.sGrid.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSGridT, this)
    }, e.prototype.onSGridT = function () {
        GameGlobal.layerMgr.open(UIConst.PETSKIPPTIP1, this.sGrid._vo)
    }, e.prototype.showCostItems = function () {}, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelPet.on(ModelPet.MSG_SELCHANGE, this.onSelChange, this), GameGlobal.modelPet.on(ModelPet.MSG_PETZZCHANGE, this.updateAll, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onBagChange, this), this.updateAll()
    }, e.prototype.onClose = function () {
        GameGlobal.modelPet.off(ModelPet.MSG_SELCHANGE, this.onSelChange), GameGlobal.modelPet.on(ModelPet.MSG_PETZZCHANGE, this.updateAll, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onBagChange)
    }, e.prototype.updateAttr = function () {
        var t = GameGlobal.modelPet.curPetVo;
        if (t.isEnable && t.petcfg.q >= 3) {
            var e = t.nextcfg;
            if (e) {
                this.setPV(this.hp, t.z_hp, e.hpqu - t.petcfg.hpqu), this.setPV(this.att, t.z_att, e.attqu - t.petcfg.attqu), this.setPV(this.phyDef, t.z_pDef, e.phydqu - t.petcfg.phydqu), this.setPV(this.speDef, t.z_mDef, e.magdqu - t.petcfg.magdqu), this.setPV(this.speed, t.z_speed, e.spedqu - t.petcfg.spedqu), this.setPV(this.growup, t.z_growup / 1e4, (e.grovdqu - t.petcfg.grovdqu) / 1e4);
                var i = this.sGrid._vo;
                i ? i.setTo(e.bdjn, 1) : i = Vo_Skill.create(e.bdjn, 1), this.sGrid.setVo(i), this.lbMax.visible = !1;
                var o = t.petcfg.d;
                this.lbLv1.text = "Lv." + o, this.lbLv2.text = "Lv." + (o + 1)
            } else this.setPV(this.hp, t.z_hp, 0), this.setPV(this.att, t.z_att, 0), this.setPV(this.phyDef, t.z_pDef, 0), this.setPV(this.speDef, t.z_mDef, 0), this.setPV(this.speed, t.z_speed, 0), this.setPV(this.growup, t.z_growup / 1e4, 0)
        }
    }, e.prototype.setPV = function (t, e, i) {
        i ? t.textFlow = HtmlUtil.parse(e + "<font color='#10a244'>+" + i + "</font>") : t.text = "" + e
    }, e.prototype.onSelChange = function () {}, e.prototype.onBagChange = function () {
        this.updateCost()
    }, e.prototype.updateAll = function () {
        this.updateAttr(), this.updateCost()
    }, e.prototype.updateSkil = function () {}, e.prototype.updateCost = function () {
        var t = GameGlobal.modelPet.curPetVo,
            e = t.nextcfg;
        if (!e) return this.lbMax.visible = !0, void(this.enableGrp.visible = !1);
        if (this.lbMax.visible = !1, t.isEnable && e.q >= 3) {
            this.enableGrp.visible = !0;
            var i = e.item[1],
                o = e.item[2],
                n = GameGlobal.modelBag.getItemCount(i);
            this.lbNUm.text = n + "/" + o, this.imgProg.width = 465 * Math.min(1, n / o);
            var a = this.grid._data;
            a.init(i), a.count = n, this.grid.data = a, t.level < e.nlv ? (this.lbLevel.text = Lang.reTxt("宠物等级达到{0}可升阶", e.nlv), this.btn.visible = !1) : (this.lbLevel.text = "", this.btn.visible = !0)
        }
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelPet.curPetVo,
            e = t.nextcfg;
        return ConfigHelp.checkEnough1(e.item) ? void GameGlobal.modelPet.CG_JINJIE(t.sysid) : (GameGlobal.layerMgr.open(UIConst.CAILIAOGET, this.grid._data), void ViewText.text("升阶所需道具不足"))
    }, e
}(BaseEUIView);
__reflect(VPetPeiYangPage.prototype, "VPetPeiYangPage");
var VPetPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.attrSt = 0, e.tbtns = [], e.skinName = "resource/eui_skins/game/pet/PetPageSkin.exml", e
    }
    return __extends(e, t), e.prototype.guideEnable = function () {
        var t = this.btnEnable;
        QuestGuideArrow.getIns().guideTo(t, 45, 20)
    }, e.prototype.guideOpenSZ = function () {
        var t = this.btnRest;
        QuestGuideArrow.getIns().guideViewCenter(t)
    }, e.prototype.guideOpenLV = function () {
        var t = this.bmAdd;
        QuestGuideArrow.getIns().guideTo(this, t.x + 30, t.y + 90)
    }, e.prototype.initView = function () {
        var t = this;
        t.btnEnable.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onEnable, t), t.skillGrp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSkillT, this), t.detailGrp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onFunBtnT, this), t.grid.enableTip(), DisplayUtil.popBtnStyle(this.bmAdd), this.bmAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAddT, this), this.tbtnAttr0.selected = !0, this.attrZZGrp.visible = !1, this.tbtnAttr0.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAttrBtnT, this), this.tbtnAttr1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAttrBtnT, this), this.attrText.setLineSpacing(22), this.attrText.setTextSize(24), this.aptitudeText.setLineSpacing(22), this.aptitudeText.setTextSize(24)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), GameGlobal.modelPet.on(ModelPet.MSG_SELCHANGE, this.update, this), GameGlobal.modelPet.on(ModelPet.MSG_LISTCHANGE, this.update, this), GameGlobal.modelPet.on(ModelPet.MSG_FIGHTSTCHANGE, this.updateCZ, this), GameGlobal.modelPet.on(ModelPet.MSG_PETEXP, this.onExp, this), GameGlobal.modelPet.on(ModelPet.MSG_EXPPYREST, this.onExp, this), GameGlobal.modelPet.on(ModelPet.MSG_PETZZCHANGE, this.onZZchange, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateNotice, this), GameGlobal.modelPet.on(ModelPet.MSG_PETGIFT, this.upGiftNotice, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelPet.off(ModelPet.MSG_SELCHANGE, this.update), GameGlobal.modelPet.off(ModelPet.MSG_LISTCHANGE, this.update), GameGlobal.modelPet.off(ModelPet.MSG_FIGHTSTCHANGE, this.updateCZ), GameGlobal.modelPet.off(ModelPet.MSG_PETEXP, this.onExp), GameGlobal.modelPet.off(ModelPet.MSG_EXPPYREST, this.onExp), GameGlobal.modelPet.off(ModelPet.MSG_PETZZCHANGE, this.onZZchange), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateNotice), GameGlobal.modelPet.off(ModelPet.MSG_PETGIFT, this.upGiftNotice, this)
    }, e.prototype.onSkillT = function (t) {
        var e = t.target;
        e.isGrid && e._vo && GameGlobal.layerMgr.open(UIConst.PETSKIPPTIP1, e._vo)
    }, e.prototype.onFunBtnT = function (t) {
        var e = GameGlobal.modelPet.curPetVo;
        switch (t.target) {
            case this.btnRest:
                GameGlobal.layerMgr.open(UIConst.PETSHANGZHEN, e);
                break;
            case this.btnRename:
                GameGlobal.layerMgr.open(UIConst.PETRENAME, e);
                break;
            case this.btnXY:
                GameGlobal.modelPet.CG_XY(e.sysid);
                break;
            case this.btnPY:
                CFG_COMMOND.isOpen(CFG_COMMOND.SHOULING, !0) && GameGlobal.layerMgr.open(UIConst.PEIYANG2);
                break;
            case this.btnTF:
                if (CFG_COMMOND.isOpen(CFG_COMMOND.PETGIFT, !0)) {
                    var i = GameGlobal.modelPet.curPetVo;
                    if (!i.gift && (8 == i.pos || 9 == i.pos)) return void ViewText.text("该天赋即将开放，敬请期待");
                    var o = GameGlobal.layerMgr.getView(UIConst.PET);
                    o && o.setCurrentSt(4)
                }
        }
    }, e.prototype.onEnable = function () {
        var t = GameGlobal.modelPet.curPetVo;
        GameGlobal.modelPet.enablePet(t.basecfg.id)
    }, e.prototype.updateNotice = function () {
        if (CFG_COMMOND.isOpen(CFG_COMMOND.SHOULING, !1)) {
            var t = VoShouLing.getInst().getPeiYangNotice() || GameGlobal.modelpeiyang.getNoticeByType(4) || VoShouLing.getInst().getSkinNotice();
            this.btnPY.setNoticeVis(t)
        }
        this.updateExpNotice()
    }, e.prototype.upGiftNotice = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.PETGIFT, !1) && (this.btnTF.setNoticeVis(Vo_PetGift.Notice()), this.updateZZ())
    }, e.prototype.CGgetGiftNotice = function () {
        if (CFG_COMMOND.isOpen(CFG_COMMOND.PETGIFT, !1)) {
            this.btnTF.setNoticeVis(!1);
            var t = GameGlobal.modelPet.curPetVo;
            t && (t.createGift(), t.gift && GameGlobal.modelPet.CG3221(t.sysid))
        }
    }, e.prototype.isAddbtnTF = function () {
        var t = GameGlobal.modelPet.curPetVo;
        t && (t.createGift(), t.gift ? DisplayUtil.addBy(this.btnTF, this.btnGrp) : (DisplayUtil.remove(this.btnTF), (8 == t.pos || 9 == t.pos) && DisplayUtil.addBy(this.btnTF, this.btnGrp)))
    }, e.prototype.onZZchange = function (t) {
        var e = GameGlobal.modelPet,
            i = e.curPetVo;
        i.sysid == t && this.update()
    }, e.prototype.update = function () {
        var t = GameGlobal.modelPet,
            e = t.curPetVo,
            i = this;
        if (e) {
            this.updateNotice(), this.isAddbtnTF(), this.CGgetGiftNotice();
            e.petcfg, e.basecfg, GameGlobal.modelRole.voMine;
            e.isEnable ? (i.enableGrp.visible = !1, i.attrGrp.visible = !0, i.detailGrp.visible = !0, i.ziZhiGrp.visible = !1, i.updateZZ(), i.updateExp()) : (i.ziZhiGrp.visible = !0, i.enableGrp.visible = !0, i.attrGrp.visible = !1, i.detailGrp.visible = !1, i.updateItemCond(), i.updateLvCond(), i.updateTabs(), i.setTabIndex(0)), e.isEnable ? i.skillGrp.visible = !1 : i.updteSkill(), i.updateCZ()
        }
    }, e.prototype.updateZZ = function () {
        var t = this,
            e = GameGlobal.modelPet.curPetVo,
            i = GameGlobal.modelRole.voMine,
            o = e.hp + i.hpmax,
            n = e.att + i.att,
            a = e.phyDef + i.phyDef,
            s = e.speDef + i.speDef,
            r = e.speed + i.speed,
            l = e.z_growup / 1e4;
        this.setAttr(o, n, a, s, r, l), t.setL(e.z_hp, e.petcfg.hpql, e.petcfg.hpqu, t.cz_hp, t.p_hp, 0), t.setL(e.z_att, e.petcfg.attql, e.petcfg.attqu, t.cz_att, t.p_att, 1), t.setL(e.z_pDef, e.petcfg.phydql, e.petcfg.phydqu, t.cz_phyDef, t.p_pDef, 2), t.setL(e.z_mDef, e.petcfg.magdql, e.petcfg.magdqu, t.cz_speDef, t.p_mDef, 3), t.setL(e.z_speed, e.petcfg.spedql, e.petcfg.spedqu, t.cz_speed, t.p_speed, 4), t.setL(e.z_growup, e.petcfg.grovdql, e.petcfg.grovdqu, t.cz_growup, t.p_growup, 5, 1e4)
    }, e.prototype.setAttr = function (t, e, i, o, n, a) {
        var s = ["气       血", "攻       击", "物理防御", "法术防御", "速       度", "成       长"];
        this.attrArr || (this.attrArr = []);
        for (var r = 0, l = s.length; l > r; r++) {
            var h = this.attrArr[r];
            h || (h = new AttributeData, this.attrArr[r] = h), h.name = s[r], h.value = arguments[r], h.nameColor = "#93271F", h.valueColor = "#684C43"
        }
        this.attrText.setData(this.attrArr)
    }, e.prototype.setL = function (t, e, i, o, n, a, s) {
        void 0 === s && (s = 1);
        var r = t / i;
        if (r > 1 && (r = 1), s > 1) o.text = t / s + "/" + i / s;
        else {
            if (5 != a) {
                var l = GameGlobal.modelPet.curPetVo.gift;
                if (l)
                    for (var h in l.skill) {
                        var c = l.skill[h];
                        parseInt(c.osz[0]) == Vo_PetGiftSkill.idl[a] && 0 != c.lev && (i += parseInt(c.osz[c.lev]), r = t / i)
                    }
            }
            o.text = t + "/" + i
        }
        n.width = 133 * r
    }, e.prototype.updateExp = function () {
        var t = GameGlobal.modelPet.curPetVo;
        if (t.level) {
            var e = CFG_Pet.PETLEVEL[t.level].exp;
            if (e > 0) {
                var i = t.exp / e;
                i > 1 && (i = 1), this.imgExp.width = 245 * i
            }
            this.lbExp.text = t.exp + "/" + e
        }
    }, e.prototype.updateExpNotice = function () {
        DisplayUtil.remove(this.bmAddTip);
        var t = GameGlobal.modelPet.curPetVo;
        if (t.level && !(t.level >= GameGlobal.modelRole.voMine.level))
            for (var e = [1012, 1029, 1013], i = GameGlobal.modelPet.shangZhenVos, o = 0; o < i.length; o++) {
                var n = i[o];
                if (n && t.sysid == n.sysid) {
                    var a = CFG_Pet.PETLEVEL[n.level].exp;
                    if (a > 0)
                        for (var s = a - n.exp, r = 0; r < e.length; r++) {
                            var l = CFG_Item.LIB[e[r]],
                                h = l.canshu.exp,
                                c = GameGlobal.modelBag.getItemCount(e[r]);
                            h * c >= s && DisplayUtil.addBy(this.bmAddTip, this.bmAdd)
                        }
                }
            }
    }, e.prototype.updateCZ = function () {
        var t = GameGlobal.modelPet.curPetVo;
        t.isEnable && (this.btnRest.label = "出\n战", t.fightPos ? this.btnRest.selected = !0 : this.btnRest.selected = !1), this.updateExpNotice()
    }, e.prototype.onExp = function () {
        this.updateExp(), this.updateExpNotice()
    }, e.prototype.updateTabs = function () {
        for (var t = GameGlobal.modelPet.curPetVo, e = t.getJinJies(), i = t.basecfg.q, o = e.length, n = 0; o > n; n++) {
            var a = this.tbtns[n];
            a || (a = this.tbtns[n] = new TBTN), a.skinName = "TBTNMSkin", 2 == o ? a.width = 120 : a.width = 80, a.height = 50, a.visible = !0, a.lb.size = 22, a.index = e[n], a.parent || this.upgradGrp.addChild(a), 1 == i ? 0 == n ? a.label = "宝宝" : a.label = "变异" : a.label = n + 1 + "阶", a.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTbtnT, this)
        }
        for (; n < this.tbtns.length; n++) this.tbtns[n].visible = !1, DisplayUtil.remove(this.tbtns[n])
    }, e.prototype.onTbtnT = function (t) {
        var e = this.tbtns.indexOf(t.currentTarget);
        this.setTabIndex(e)
    }, e.prototype.onAddT = function (t) {
        GameGlobal.layerMgr.open(UIConst.PETLEVEL, GameGlobal.modelPet.curPetVo)
    }, e.prototype.onAttrBtnT = function (t) {
        var e = 0;
        t.currentTarget == this.tbtnAttr1 && (e = 1), this.setAttrSt(e)
    }, e.prototype.setAttrSt = function (t) {
        this.attrSt != t && (0 == t ? (this.tbtnAttr0.selected = !0, this.tbtnAttr1.selected = !1, this.attrText.visible = !0, this.attrZZGrp.visible = !1) : (this.tbtnAttr0.selected = !1, this.tbtnAttr1.selected = !0, this.attrText.visible = !1, this.attrZZGrp.visible = !0), this.attrSt = t)
    }, e.prototype.setTabIndex = function (t) {
        for (var e, i = 0; i < this.tbtns.length; i++) i == t && (e = this.tbtns[i].index), this.tbtns[i].selected = i == t;
        this.updateBaseAttr(e), GameGlobal.modelPet.setCurPetCFG(CFG_Pet.PETLIB[e])
    }, e.prototype.updateBaseAttr = function (t) {
        var e = CFG_Pet.PETLIB[t],
            i = e.hpql + "~" + e.hpqu,
            o = e.attql + "~" + e.attqu,
            n = e.phydql + "~" + e.phydqu,
            a = e.magdql + "~" + e.magdqu,
            s = e.spedql + "~" + e.spedqu,
            r = e.grovdql / 1e4 + ("~" + e.grovdqu / 1e4),
            l = ["气血资质", "攻击资质", "物防资质", "法防资质", "速度资质", "成长资质"],
            h = [i, o, n, a, s, r];
        this.aptitudeArr || (this.aptitudeArr = []);
        for (var c = 0, p = l.length; p > c; c++) {
            var u = this.aptitudeArr[c];
            u || (u = new AttributeData, this.aptitudeArr[c] = u), u.name = l[c], u.value = h[c], u.nameColor = "#93271F", u.valueColor = "#684C43"
        }
        this.aptitudeText.setData(this.aptitudeArr)
    }, e.prototype.updteSkill = function () {
        var t = GameGlobal.modelPet.curPetVo,
            e = this;
        e.skillGrp.visible = !0;
        for (var i = Util.parseIntStr(t.basecfg.zdgl), o = 0, n = i.length; n > o; o++) {
            var a = e.skillGrp.getChildAt(o);
            if (a._vo) var s = a._vo.setTo(i[o], 1);
            else var s = Vo_Skill.create(i[o], 1);
            s.must = t.basecfg.bdjn == s.id, a && a.setVo(s)
        }
        for (; o < e.skillGrp.numChildren; o++) {
            var a = e.skillGrp.getChildAt(o);
            a.setVo(null)
        }
    }, e.prototype.updateItemCond = function () {
        var t = GameGlobal.modelPet.curPetVo;
        if (this.lbSkllGridDes.text = Lang.reTxt("{0}拥有{1}个技能孔", t.getName(), t.basecfg.jnk), 0 != t.basecfg.item[0]) {
            var e = t.basecfg.item[1],
                i = GameGlobal.modelBag.getItemCount(e),
                o = t.basecfg.item[2],
                n = VoItem.create();
            n.init(e), this.grid.data = n, this.grid.visible = !0, this.lbCond1.visible = !0, this.lbCond2.visible = !0, this.lbCond3.visible = !1, this.btnEnable.visible = !0, this.lbCond1.text = n.name, this.lbCond2.text = i + "/" + o, i >= o ? (this.lbCond1.textColor = Color.UIGREEN, this.lbCond2.textColor = Color.UIGREEN, this.btnEnable.label = "激活") : (this.lbCond1.textColor = Color.UIRED, this.lbCond2.textColor = Color.UIRED, this.btnEnable.label = "获取材料")
        }
    }, e.prototype.updateLvCond = function () {
        var t = GameGlobal.modelPet.curPetVo;
        0 == t.basecfg.item[0] && (this.grid.visible = !1, this.lbCond1.visible = !1, this.lbCond2.visible = !1, this.lbCond3.visible = !0, GameGlobal.modelRole.voMine.level >= t.basecfg.level ? (this.btnEnable.visible = !0, this.btnEnable.label = "激活", this.lbCond3.textColor = Color.UIGREEN, this.lbCond3.text = Lang.reTxt("已满足条件", t.basecfg.level)) : (this.lbCond3.textColor = Color.UIRED, this.lbCond3.text = Lang.reTxt("等级到达{0}可激活", t.basecfg.level), this.btnEnable.visible = !1))
    }, e
}(BaseEUIView);
__reflect(VPetPage.prototype, "VPetPage");
var VPetShangZhen = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "PetShangZhen", e
    }
    return __extends(e, t), e.prototype.guideClose = function () {
        var t = this.base.btnReturn;
        QuestGuideArrow.getIns().guideViewCenter(t)
    }, e.prototype.guideJoin = function () {
        var t = this.item0.btn;
        QuestGuideArrow.getIns().guideViewCenter(t)
    }, e.prototype.initView = function () {
        this.addCloseListen(this.base.btnReturn).addCloseListen(this.base.btnClose).addCloseListen(this.rect), this.base.title = "灵兽上阵"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), GameGlobal.modelPet.on(ModelPet.MSG_FIGHTSTCHANGE, this.onPetZFUD, this), this.lbCur.text = Lang.reTxt("正在改变{0}的位置", GameGlobal.modelPet.curPetVo.getName())
    }, e.prototype.onClose = function () {
        GameGlobal.modelPet.off(ModelPet.MSG_FIGHTSTCHANGE, this.onPetZFUD, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onPetZFUD = function () {
        this.update()
    }, e.prototype.update = function () {
        for (var t = GameGlobal.modelPet.editShangZhenVos = GameGlobal.modelPet.getShangZhenList().concat(), e = 0; 3 > e; e++) {
            var i = this["item" + e],
                o = t[e];
            i.index = e, i.update(o)
        }
    }, e
}(BaseEUIView);
__reflect(VPetShangZhen.prototype, "VPetShangZhen");
var VPetShangZhenItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.index = 0, e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.update = function (t) {
        var e = this,
            i = 0;
        1 == this.index ? i = 8 : 2 == this.index && (i = 12), e._voPet = t;
        var o = GameGlobal.modelPet.curPetVo;
        t ? (e.currentState = "fill", e.ico.source = IconUtil.getIconUrl(t.basecfg.icon), e.lbName.text = t.getName() + "\n" + t.level + "级", e.lbName.textColor = t.getNameColor(), t.basecfg.id == o.basecfg.id ? e.btn.label = "下阵" : t.fightPos >= 0 ? e.btn.label = "交换位置" : e.btn.label = "上阵") : this.index >= 1 && VoShouLing.getInst().highestJie < i ? (e.currentState = "disabled", e.lbCenter.text = Lang.reTxt("兽灵达到\n{0}阶开启", i), e.btn.enabled = !1, e.btn.label = "-") : (e.currentState = "empty", e.btn.label = "上阵", e.btn.enabled = !0)
    }, e.prototype.onBtnT = function () {
        if (!this.btn.enabled) return void ViewText.text("该位置尚未开启");
        var t = GameGlobal.modelPet,
            e = t.editShangZhenVos,
            i = e.indexOf(t.curPetVo);
        i == this.index ? GameGlobal.modelRole.voMine.level >= 60 ? (e[this.index] = null, this.sendChangeCG()) : ViewText.text("60级之前不能下阵宠物") : -1 == i ? (e[this.index] = t.curPetVo, this.sendChangeCG()) : this._voPet ? (ArrayUtil.swapItem(e, this._voPet, t.curPetVo), this.sendChangeCG()) : -1 == i ? (e[this.index] = t.curPetVo, this.sendChangeCG()) : (ArrayUtil.moveItem(e, t.curPetVo, this.index), this.sendChangeCG())
    }, e.prototype.sendChangeCG = function () {
        for (var t = GameGlobal.modelPet.editShangZhenVos, e = Util.getTempArr(), i = 0; 3 > i; i++) {
            var o = t[i];
            o ? e[i] = o.sysid : e[i] = 0
        }
        GameGlobal.modelPet.CG_FSTATE(e)
    }, e
}(eui.Component);
__reflect(VPetShangZhenItem.prototype, "VPetShangZhenItem");
var VShouLing = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.description = "({0}提升的属性只对灵兽加成)", e.WIDTH = 480, e.tipsString = "【一键培养】会消耗背包中的相应材料，若背包中材料不足，则会消耗绑定元宝或元宝自动购买，直至进阶成功或银两不足或绑定元宝和元宝不足，是否继续？", e.tipsArr = ["(达到8阶可上阵第二只灵兽)", "(达到12阶可上阵第三只灵兽)"], e.curId = 1, e.maxId = 15, e.isCheckBoxUp = !1, e.lastPeiYangTime = 0, e.isOneKey = !1, e.id = Role.getUniqueID(), e.skinName = "PetShouLing", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.imgText = new ImageText, this.imgText.charFunc = ImageText.STRFUNC, this.imgText.container = this.zhanliContainer, this.uirole = UIRole.create(), this.partCont.addChild(this.uirole), this.shoulingRole = UIRole.create(), this.shoulingRole.x = 50, this.partCont.addChild(this.shoulingRole), DisplayUtil.popBtnStyle(this.btnSearch), DisplayUtil.popBtnStyle(this.btnLeft), DisplayUtil.popBtnStyle(this.btnRight), DisplayUtil.popBtnStyle(this.checkBox), this.btnSearch.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSearch, this), this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnPeiYang.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnPeiYang2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.checkBox.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCheckBox, this), this.progressVisitor = new ProgressVisitor(this.progressBar, this.txtProgress, this.WIDTH), this.btnHuanHua.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHuanHua, this), this.iconSkin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSkin, this), this.zhiShengDanCont.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onZhiShengUse, this), this.btnPeiYang.label = "培养", this.btnPeiYang2.label = "一键培养", this.iconGou.visible = !1, this.txtUpgrade.visible = !1, this.txtManji.visible = !1, this.costGrid.setShowCount(!1), this.costGrid.enableTip(), this.skinNotice.visible = !1
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelShangCheng.CG903(), this.data = e, this.maxId = this.data.getMaxId(), this.setSel(this.data.highestJie), this.staticProgress(), this.onNotice(), this.showZhiShengYiJie(), this.updateZhiShengNot(), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.uirole.stopAndClear(), this.shoulingRole.stopAndClear(), this.progressVisitor.stop(), this.setOneKeyDisplay(!1), this.removeMsg(), this.guidingPY = !1
    }, e.prototype.addMsg = function () {
        GameGlobal.modelpeiyang.on(ModelPeiYang.msg_data, this.onUpdate, this), GameGlobal.modelpeiyang.on(ModelPeiYang.msg_peiyang, this.updatePeiYangInfo, this), GameGlobal.modelpeiyang.on(ModelPeiYang.msg_peiyangHH, this.updateHuanHuaInfo, this), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.onNotice, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onNotice, this), GameGlobal.modelpeiyang.on(ModelPeiYang.msg_zhishengYijieData, this.showZhiShengYiJie, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelpeiyang.off(ModelPeiYang.msg_data, this.onUpdate, this), GameGlobal.modelpeiyang.off(ModelPeiYang.msg_peiyang, this.updatePeiYangInfo, this), GameGlobal.modelpeiyang.off(ModelPeiYang.msg_peiyangHH, this.updateHuanHuaInfo, this), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.onNotice, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onNotice, this), GameGlobal.modelpeiyang.off(ModelPeiYang.msg_zhishengYijieData, this.showZhiShengYiJie, this)
    }, e.prototype.jumpJie = function () {
        this.setOneKeyDisplay(!1), this.progressVisitor.showFire(), this.setSel(this.data.highestJie), ModelPeiYang.showNewHorseJieMod(this.data), this.data.highestJie >= 5 && VoZhiShengYiJie.isInActionTime(this.data.getType()) && (this.sureOpenZSD(), this.updateZhiShengNot())
    }, e.prototype.updateZhiShengNot = function () {
        if (this.zhiShengDanBtn) {
            var t = this.data.getType();
            this.zhiShengDanBtn.setNoticVis(GameGlobal.modelpeiyang.getNoticeZSYJPY(VoZhiShengYiJie.zhiShengDans[t], this.data))
        }
    }, e.prototype.onZhiShengUse = function () {
        var t = this.data.getType(),
            e = VoZhiShengYiJie.zhiShengDans[t],
            i = GameGlobal.modelBag.getItemCount(e) > 0;
        i ? this.sureOpenZSD() : GameGlobal.layerMgr.open(UIConst.UIID_ZHISHENGYIJIE)
    }, e.prototype.sureOpenZSD = function () {
        var t = "5阶以下使用立刻提升1阶，6阶以后使用固定增加400点培养经验!\n" + HtmlUtil.color("(建议在5阶时使用)", "#10a244"),
            e = this.data.getType(),
            i = VoZhiShengYiJie.zhiShengDans[e],
            o = GameGlobal.modelBag.getItemCount(i) > 0;
        ViewAlert.show(t, function () {
            o ? GameGlobal.modelpeiyang.CG3135(i) : GameGlobal.layerMgr.open(UIConst.UIID_ZHISHENGYIJIE)
        }, 3, this, null, "使用")
    }, e.prototype.showZhiShengYiJie = function () {
        var t = this.data.getType();
        if (VoZhiShengYiJie.isInActionTime(t)) {
            var e = GameGlobal.modelAct.actData.getChildByID(10),
                i = e.clone();
            i._btn = null, this.zhiShengDanBtn || (this.zhiShengDanBtn = i.getBtn(), this.zhiShengDanBtn.$setX(0), this.zhiShengDanBtn.$setY(0), i.disableTouch()), i.remainTime = e.getRemainSec(), DisplayUtil.addBy(this.zhiShengDanBtn, this.zhiShengDanCont), this.zhiShengDanBtn.startTime()
        } else this.zhiShengDanBtn && DisplayUtil.remove(this.zhiShengDanBtn)
    }, e.prototype.onSkin = function () {
        ViewText.text("敬请期待！")
    }, e.prototype.onSearch = function () {
        GameGlobal.layerMgr.open(UIConst.UIID_PEIYANGATT, this.data)
    }, e.prototype.onChange = function (t) {
        var e = t.currentTarget,
            i = this.curId;
        switch (e) {
            case this.btnLeft:
                i--;
                break;
            case this.btnRight:
                if (this.curId > this.data.highestJie) return void ViewText.text("升阶可开放更多外形");
                i++
        }
        this.setSel(i)
    }, e.prototype.setSel = function (t) {
        this.curId = t, this.watchLeft(t), this.watchRight(t), this.onUpdate()
    }, e.prototype.watchLeft = function (t) {
        1 == t ? this.btnLeft.visible = !1 : this.btnLeft.visible = !0
    }, e.prototype.watchRight = function (t) {
        t == this.maxId ? this.btnRight.visible = !1 : this.btnRight.visible = !0
    }, e.prototype.updatePeiYangInfo = function () {
        var t = this.data.isManji();
        if (!t) {
            var e = (this.data.getCfgById(this.data.highestJie), this.data.getCost());
            this.costGrid.data = e[0], this.costYL.source = "CM2_json.yinliang";
            var i = ConfigHelp.costTxt(e[0], "#10a244");
            this.txtCostItem.textFlow = i, this.txtCostYL.text = e[1].count + "", GameGlobal.modelRole.voMine.yinliang < e[1].count ? this.txtCostYL.textColor = 16646144 : this.txtCostYL.textColor = 1090116
        }
        this.groupCost.visible = !t, this.btnPeiYang.visible = !t, this.btnPeiYang2.visible = !t, this.txtManji.visible = t
    }, e.prototype.updateAtt = function () {
        for (var t = this.attContainer.$children, e = Object.keys(PeiYangAttObject.attObjs), i = 0; i < t.length; i++) {
            var o = t[i],
                n = parseInt(e[i]),
                a = PeiYangAttObject.attObjs[n],
                s = PeiYangAttObject.clone(a);
            s.val = this.data.setAttValue(s.id);
            var r = this.data.getChuShiAtt(s.id);
            s.val += r, o.textFlow = HtmlUtil.parse(s.name + ": " + HtmlUtil.color(s.val, "#10a244"))
        }
    }, e.prototype.staticProgress = function () {
        var t = this.data.getCfgById(this.data.highestJie),
            e = t.jy,
            i = this.data.curExp;
        this.progressVisitor.staticToValue(i, e), this.progressVisitor.setManji(this.data.isManji())
    }, e.prototype.showEff = function () {
        var t = this;
        egret.Tween.removeTweens(this.txtUpgrade), this.txtUpgrade.y = 600, this.txtUpgrade.visible = !0, egret.Tween.get(this.txtUpgrade).to({
            y: 570
        }, 500, egret.Ease.backOut).call(function () {
            t.txtUpgrade.visible = !1
        }, this)
    }, e.prototype.dynamicProgress = function () {
        var t = this.data.getCfgById(this.data.highestJie),
            e = t.jy,
            i = this.data.curExp;
        this.progressVisitor.dynamicToValue(i, e)
    }, e.prototype.tryToServ = function () {
        this.isOneKey && GameGlobal.tick.addInterv(this.realToServ, 400, this, !0)
    }, e.prototype.realToServ = function (t) {
        if (!t.hasEnoughMetirial() || t.data.isManji()) return void t.setOneKeyDisplay(!1);
        var e = t.isCheckBoxUp ? 1 : 0;
        GameGlobal.modelpeiyang.peiyang(e, t.data.getType())
    }, e.prototype.hasEnoughCurrancy = function (t, e) {
        var i = CFG_STORE.priorChosen(t),
            o = i.xh[2],
            n = o * e;
        return GameGlobal.modelRole.voMine.bYuanbao >= n ? !0 : (i = CFG_STORE.priorChosen(t, 2), o = i.xh[2], n = o * e, GameGlobal.modelRole.voMine.yuanbao >= n ? !0 : !1)
    }, e.prototype.hasEnoughMetirial = function () {
        var t = (this.data.getType(), this.data.getCost()),
            e = t[0],
            i = GameGlobal.modelBag.getItemCount(e.id),
            o = e.count - i;
        if (o > 0) {
            if (!this.guidingPY)
                if (this.isCheckBoxUp) {
                    if (this.hasEnoughCurrancy(e.id, o)) return !0;
                    GameGlobal.layerMgr.open(UIConst.UIID_STOREBUYTIP, PeiYangCost.getInst().setInfo(e.id, o, this.data))
                } else GameGlobal.layerMgr.open(UIConst.UIID_STOREBUYTIP, PeiYangCost.getInst().setInfo(e.id, o, this.data));
            return !1
        }
        return e = t[1], GameGlobal.modelRole.voMine.yinliang < e.count ? (this.guidingPY || GameGlobal.layerMgr.open(UIConst.CAILIAOGET, e.id), !1) : !0
    }, e.prototype.updateHuanHuaInfo = function () {
        var t = (this.data, this.data.getCfgById(this.curId)),
            e = this.data.huanHuaMXId,
            i = 0;
        switch (this.data.getType()) {
            case 4:
                i = t.mx
        }
        if (e == i) this.iconHuanHua.visible = !0, this.btnHuanHua.visible = !1;
        else {
            var o = this.data.highestJie >= this.curId;
            this.iconHuanHua.visible = !1, this.btnHuanHua.visible = !0, o ? (this.btnHuanHua.enabled = !0, this.btnHuanHua.label = "幻化") : (this.btnHuanHua.enabled = !1, this.btnHuanHua.label = "未激活")
        }
    }, e.prototype.showJHZhanli = function () {
        if (this.curId != this.data.getMaxId())
            if (this.curId == this.data.highestJie) {
                var t = this.data.getJHZhanli(this.curId + 1);
                this.txtDescription1.textFlow = HtmlUtil.parse("进阶可提升" + HtmlUtil.color(t, "#10a244") + "战力")
            } else this.txtDescription1.text = "";
        else this.txtDescription1.text = ""
    }, e.prototype.showLevelTips = function (t) {
        this.lb_tipsShow.visible = !0, 7 >= t ? this.lb_tipsShow.text = this.tipsArr[0] : 11 >= t ? this.lb_tipsShow.text = this.tipsArr[1] : this.lb_tipsShow.visible = !1
    }, e.prototype.onUpdate = function () {
        var t = this.data,
            e = t.getCfgById(this.curId);
        this.txtDescription.text = Lang.reTxt(this.description, t.getTitle()), this.imgText.setText("z" + t.zhanli);
        var i = e.js;
        this.showLevelTips(i), this.txtJie.text = VoPeiYang.getChiniseNum(i) + "阶", this.showJHZhanli();
        var o = (GameGlobal.modelRole.voMine.sceneChars[0], GameGlobal.modelRole.voMine, this.data.getType()),
            n = null,
            a = null;
        switch (o) {
            case 4:
                var s = GameGlobal.modelPet.curPetVo;
                s || (s = GameGlobal.modelPet.getPetArr()[0]), n = s.getPetModel(), a = e.mx, this.txtName.text = e.mc, this.txtUpgrade.text = "兽灵经验+10", this.uirole.scaleX = -1
        }
        this.uirole.setBody(n), this.uirole.setVal(3), this.uirole.validParts(), this.uirole.play(), this.shoulingRole.setShouLing(a), this.shoulingRole.setVal(1), this.shoulingRole.validParts(), this.shoulingRole.$setY(-130), this.shoulingRole.play(), this.updateHuanHuaInfo(), this.updatePeiYangInfo(), this.updateAtt()
    }, e.prototype.onNotice = function () {
        this.updateSkinNotice(), this.updatePeiYangNotice(), this.updatePeiYangInfo(), this.updateZhiShengNot()
    }, e.prototype.updatePeiYangNotice = function () {
        var t = this.data.getPeiYangNotice();
        this.btnPeiYang.setNoticeVis(t), this.btnPeiYang2.setNoticeVis(t)
    }, e.prototype.updateSkinNotice = function () {
        var t = this.data;
        t.getSkinNotice()
    }, e.prototype.onCheckBox = function () {
        this.isCheckBoxUp = !this.isCheckBoxUp, this.iconGou.visible = this.isCheckBoxUp
    }, e.prototype.onHand = function (t) {
        var e = this,
            i = egret.getTimer();
        if (!(i < this.lastPeiYangTime + 500)) {
            this.lastPeiYangTime = i;
            var o = t.currentTarget;
            switch (o) {
                case this.btnPeiYang:
                    if (0 == o.enabled) return;
                    this.isOneKey = !1;
                    break;
                case this.btnPeiYang2:
                    if ("取消" == o.label) this.setOneKeyDisplay(!1);
                    else {
                        if (this.isCheckBoxUp) return void ViewAlert.show(this.tipsString, function () {
                            e.setOneKeyDisplay(!0), e.realToServ(e)
                        });
                        this.setOneKeyDisplay(!0)
                    }
            }
            this.realToServ(this)
        }
    }, e.prototype.onHuanHua = function () {
        GameGlobal.modelpeiyang.huanHua(this.curId, this.data.getType())
    }, e.prototype.setOneKeyDisplay = function (t) {
        t ? (this.isOneKey = !0, this.btnPeiYang2.label = "取消", this.btnPeiYang.enabled = !1, QuestGuideArrow.hide("autoPY", !0)) : (this.btnPeiYang2.label = "一键培养", this.btnPeiYang.enabled = !0, this.isOneKey = !1, QuestGuideArrow.show("autoPY", !0))
    }, e
}(BaseEUIView);
__reflect(VShouLing.prototype, "VShouLing");
var VShouLingPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curSt = -1, e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.base.btnReturn).addCloseListen(this.base.btnClose), this.base.createPageGrp().createTabGroup(), this.base.listenTabClick(this.onTbtnClick, this), GameGlobal.layerMgr.reg(UIConst.SHOULING, VShouLing, this.base.pageGrp)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setCurSt(0)
    }, e.prototype.onClose = function () {
        this.setCurSt(-1)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.updateTabs = function () {
        this.base.addTab("兽灵", 0, UIConst.SHOULING)
    }, e.prototype.onTbtnClick = function (t) {
        this.setCurSt(t.index)
    }, e.prototype.setCurSt = function (t) {
        this._curSt != t && (this.base.setTabSelIdx(t), 0 == this._curSt && GameGlobal.layerMgr.close(UIConst.SHOULING), 0 == t && (GameGlobal.layerMgr.open(UIConst.SHOULING, VoShouLing.getInst()), this.base.title = "兽灵"))
    }, e
}(BaseEUIView);
__reflect(VShouLingPnl.prototype, "VShouLingPnl");
var ViewPetSkillLearn = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridListData = new eui.ArrayCollection, e._st = -1, e.skinName = "PetSkillLearnSkin", e
    }
    return __extends(e, t), e.prototype.guidePage = function (t) {
        var e = this.tbtnGrp.$children[t];
        e && QuestGuideArrow.getIns().guideTo(e, 55, 30)
    }, e.prototype.checkPage = function (t) {
        return this._st == t
    }, e.prototype.guideSel = function () {
        if (this.gridList.numChildren) {
            var t = this.gridList.getChildAt(0);
            t && QuestGuideArrow.getIns().guideTo(t, 45, 45)
        }
    }, e.prototype.isSeling = function () {
        return this.model.curSelectedData ? !0 : !1
    }, e.prototype.guideSelOK = function () {
        var t = this.btnOK;
        QuestGuideArrow.getIns().guideTo(t, t.width / 2, t.height / 2)
    }, e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.gridList.itemRenderer = VPetLearnSkillGrid, this.gridList.dataProvider = this.gridListData, this.gridList.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onItemTouch, this), this.btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOKT, this), this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAddSkill, this), this.tbtnGrp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTbtnT, this), this.model = GameCtrlBase.instance.getModel(PetSkillLearnModel), this.addBtn.label = "一键添加"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = GameGlobal.modelPet.curPetVo;
        this.vopet && this.vopet.sysid != i.sysid && this.model.reset(), this.vopet = i, this.setCurSt(0), 1 == this.vopet.petcfg.t ? this.tbtn1.label = "物攻" : this.tbtn1.label = "法攻"
    }, e.prototype.onClose = function () {
        this.oldGrid = null
    }, e.prototype.update = function () {
        this._st != this.lastTabNum && this.model.reset(), this.model.filterSkill(this.model.skillList, this.vopet, GameGlobal.modelBag.items, this._st);
        var t = this.model.skillList.get(this.model.curSelectedId);
        t && (t.isSelected = !0);
        var e = this.model.skillList.values.concat();
        e.sort(function (t, e) {
            return t.itemVo.quality - e.itemVo.quality
        }), this.gridListData.source = e, this.updateSel()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onAddSkill = function () {
        if (this.model.isCanSelect()) {
            for (var t = this.gridListData.source, e = 0, i = t.length; i > e; e++) {
                var o = t[e];
                if (!o.isSelect) {
                    var n = this.model.getCanSelectNum();
                    if (o.orderNum = n, o.isSelect = !0, this.model.addSelected(o.id, n), !this.model.isCanSelect()) break
                }
            }
            this.gridListData.source = t
        }
    }, e.prototype.setCurSt = function (t) {
        0 == this._st ? this.tbtn0.selected = !1 : 1 == this._st ? this.tbtn1.selected = !1 : 2 == this._st && (this.tbtn2.selected = !1), 0 == t ? this.tbtn0.selected = !0 : 1 == t ? this.tbtn1.selected = !0 : 2 == t && (this.tbtn2.selected = !0), this._st = t, this.update(), this.lastTabNum = t
    }, e.prototype.onOKT = function () {
        EventCenter.sendMsg(ModelPet.MSG_CURSKILLBOOK, this._st), this.closeHandler()
    }, e.prototype.onItemTouch = function (t) {
        var e = t.item;
        this.model.curSelectedData && (this.model.curSelectedData.isSelected = !1), e.isSelected = !0, this.model.curSelectedData = e;
        var i = this.model.isSelected(e.id);
        if (i) e.orderNum = 0, e.isSelect = !1, this.model.removeSelected(e.id);
        else if (this.model.isCanSelect()) {
            var o = this.model.getCanSelectNum();
            e.orderNum = o, e.isSelect = !0, this.model.addSelected(e.id, o)
        }
        this.gridListData.replaceAll(this.gridListData.source), this.updateSel()
    }, e.prototype.updateSel = function () {
        var t = CFG_Item.LIB[this.model.curSelectedId];
        if (t) {
            var e = t.canshu.skillid;
            e && (this.lbDes.text = CFG_Skill.LIB[e].des)
        } else this.lbDes.text = ""
    }, e.prototype.onTbtnT = function (t) {
        var e = t.target,
            i = this.tbtnGrp.$children.indexOf(e);
        i >= 0 && this._st != i && this.setCurSt(i)
    }, e.prototype.onGrpTouch = function (t) {
        var e = t.target;
        this.oldGrid && (this.oldGrid.selected = !1), e.imgIcon && (this.oldGrid = e, e.selected = !0)
    }, e
}(BaseEUIView);
__reflect(ViewPetSkillLearn.prototype, "ViewPetSkillLearn");
var VPetSkillPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/pet/PetSkillSkin.exml", e
    }
    return __extends(e, t), e.prototype.guideOpenLearn = function () {}, e.prototype.guideLearn = function () {
        QuestGuideArrow.getIns().guideTo(this.btn, this.btn.width / 2, this.btn.height / 2)
    }, e.prototype.initView = function () {
        this.skillLearnList = new Dictionary, this.model = GameCtrlBase.instance.getModel(PetSkillLearnModel), this.skillList.itemRenderer = VPetLearnSkillGrid, this.skillListData = new eui.ArrayCollection, this.skillList.dataProvider = this.skillListData, this.curLearnSkillArr = [], this.curItemArr = [], GameGlobal.layerMgr.reg(UIConst.PETSKILLTJ, VPetSkillTj, GameGlobal.layerMgr.UI_Message), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAddT, this), this.skillFrame.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAddT, this), this.lbTJ.textFlow = HtmlUtil.underLine(this.lbTJ.text), DisplayUtil.popBtnStyle(this.lbTJ), this.lbTJ.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTJT, this), this.lbSkillDes.text = "", this.addBtn.label = "添加技能", this.lbTJ.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTJ, this), this.learnTimer = 0
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelPet.on(ModelPet.MSG_SELCHANGE, this.onSelPetChange, this), GameGlobal.modelPet.on(ModelPet.MSG_NEWSKILL, this.onNewSkill, this), EventCenter.addMsg(ModelPet.MSG_CURSKILLBOOK, this.update, this), EventCenter.addMsg(BagEvent.DELETE_ITEM, this.onDeleteItem, this), this.skillList.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onItemTouch, this), this.update()
    }, e.prototype.onClose = function () {
        GameGlobal.modelPet.off(ModelPet.MSG_SELCHANGE, this.onSelPetChange), GameGlobal.modelPet.off(ModelPet.MSG_NEWSKILL, this.onNewSkill, this), EventCenter.removeMsg(ModelPet.MSG_CURSKILLBOOK, this.onUpdateSkillBook, this), EventCenter.removeMsg(BagEvent.DELETE_ITEM, this.onDeleteItem, this), this.skillList.removeEventListener(eui.ItemTapEvent.ITEM_TAP, this.onItemTouch, this)
    }, e.prototype.onUpdateSkillBook = function (t) {
        this.filterType = t.data, this.update()
    }, e.prototype.update = function () {
        this.skillLearnList.clear(), this.curLearnSkillArr.length = 0, this.curItemArr.length = 0, this.curSelectedData = null;
        for (var t = 0, e = this.model.selectedArr.length; e > t; t++) {
            var i = this.model.selectedArr[t];
            if (i) {
                var o = this.model.skillList.get(i).itemVo,
                    n = new SkillLearnData(o);
                n.orderNum = t + 1, n.nameColor = 16777215, this.curLearnSkillArr.push(n), this.curItemArr.push(n.itemVo)
            }
        }
        this.curLearnSkillArr.length > 0 ? (this.skillListData.source = this.curLearnSkillArr, this.skillFrame.visible = !1, this.lbSkillDes.text = "") : (this.lbSkillDes.text = '点击 "添加技能" 按钮可添加技能', this.skillFrame.visible = !0, this.skillListData.source = null)
    }, e.prototype.onItemTouch = function (t) {
        var e = t.item;
        this.curSelectedData && (this.curSelectedData.isSelected = !1), e.isSelected = !0, this.curSelectedData = e, this.skillListData.refresh(), this.lbSkillDes.text = e.itemVo.des
    }, e.prototype.onNewSkill = function () {
        var t = GameGlobal.modelPet.curPetVo;
        if (this.skillLearnList.clear(), this.model.filterSkill(this.skillLearnList, t, this.curItemArr, this.filterType), this.skillLearnList.length > 0) {
            for (var e = 0, i = this.curLearnSkillArr.length; i > e; e++) {
                var o = this.curLearnSkillArr[e],
                    n = this.skillLearnList.get(o.id);
                n && (n.orderNum = o.orderNum, n.nameColor = o.nameColor)
            }
            this.skillListData.source = this.skillLearnList.values, this.lbSkillDes.text = ""
        } else this.skillListData.source = null, this.skillFrame.visible = !0, this.lbSkillDes.text = '点击 "添加技能" 按钮可添加技能';
        this.curSelectedData = null, this.model.reset()
    }, e.prototype.onDeleteItem = function (t) {
        for (var e = t.data, i = 0, o = this.curItemArr.length; o > i; i++) e.id == this.curItemArr[i].id && (this.curItemArr.splice(i, 1), this.curLearnSkillArr.splice(i, 1), o--, i--)
    }, e.prototype.onTJT = function () {}, e.prototype.onSelPetChange = function (t) {
        this.curPetId != t && (this.curPetId = t, this.model.reset(), this.update())
    }, e.prototype.onAddT = function () {
        GameGlobal.layerMgr.open(UIConst.PETSKILLLEARN)
    }, e.prototype.onBtnT = function () {
        if (!(egret.getTimer() - this.learnTimer < 200)) {
            var t = this.skillLearnList.length > 0 ? this.skillLearnList.values : this.curLearnSkillArr,
                e = t.length;
            if (0 != e) {
                this.learnTimer = egret.getTimer();
                for (var i = [], o = 0; e > o; o++) {
                    var n = t[o];
                    i.push(n.id)
                }
                var a = i.toString(),
                    s = GameGlobal.modelPet.curPetVo;
                GameGlobal.modelPet.CG_LEARNSKILL(s.sysid, a)
            }
        }
    }, e.prototype.onTJ = function () {
        GameGlobal.layerMgr.open(UIConst.PETSKILLTJ, GameGlobal.modelPet.curPetVo.sysid)
    }, e
}(BaseEUIView);
__reflect(VPetSkillPage.prototype, "VPetSkillPage");
var VPetSkillTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/skill/PetSkillTipSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.rect);
        var t = VoItem.create();
        t.init(1014), this.lockItem.data = t, this.lbLockItem.text = t.name, this.btnLock.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this,
            o = this.voskill = e[0];
        i.grid.setVo(o), i.lbName.text = o.name, i.lbDes1.text = o.des, i.lbType.text = 1 == o.cfg.efftype ? "主动技能" : "被动技能";
        GameGlobal.modelPet.curPetVo;
        i.updateLock(), i.currentState = "def", o.must ? (i.lbDes1.text = "(必带技能在学习技能时不会被替换)", DisplayUtil.addBy(i.lbDes2, i.desGroup)) : DisplayUtil.remove(i.lbDes2), GameGlobal.modelPet.on(ModelPet.MSG_SKILLLOCKVIS, this.updateLock, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateLock, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelPet.off(ModelPet.MSG_SKILLLOCKVIS, this.updateLock), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateLock)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onPetSkillChange = function () {}, e.prototype.updateLock = function () {
        var t = GameGlobal.modelBag.getItemCount(1014);
        this.lbLockCount.text = t + "/1", t > 0 ? this.lbLockCount.$setTextColor(Color.UIGREEN) : this.lbLockCount.$setTextColor(Color.UIRED);
        var e = GameGlobal.modelPet.curPetVo,
            i = e.skillLst.indexOf(this.voskill); - 1 != i && (this.voskill.skillLock ? this.btnLock.label = "解锁" : this.btnLock.label = "锁定")
    }, e.prototype.onT = function () {
        var t = this.voskill;
        return !t.skillLock && GameGlobal.modelBag.getItemCount(1014) <= 0 ? void ViewText.text("道具不足") : void(t.skillLock ? ViewAlert.show(Lang.reTxt("是否解除{0}的锁定？\n解锁后该技能将允许被顶替", t.name), function () {
            GameGlobal.modelPet.changePetSkillLock(GameGlobal.modelPet.curPetVo, t.id)
        }, ViewAlert.OKANDCANCEL) : GameGlobal.modelPet.changePetSkillLock(GameGlobal.modelPet.curPetVo, t.id))
    }, e
}(BaseEUIView);
__reflect(VPetSkillTip.prototype, "VPetSkillTip");
var VPetSkillTip1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/pet/PetSkillTip1.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.txtName.text = e.name, i.grid.setVo(e), i.txtEff.text = 1 == e.cfg.efftype ? "主动技能" : "被动技能", i.txtDes.text = e.getDes(), e.must ? (DisplayUtil.addBy(i.lbDes2, i.txtGroup), i.lbDes2.text = "(必带技能在学习技能时不会被替换)") : DisplayUtil.remove(i.lbDes2)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VPetSkillTip1.prototype, "VPetSkillTip1");
var VBuZhuoBattle = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "BuZhuoBattle", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.heroRoles = [], this.petRole = UIRole.create(), this.battleGrp.addChild(this.petRole), RoundBattleScene.initTransforn()
    }, e.prototype.showSingle = function () {
        this.setRoleNum(1);
        var t = this.heroRoles[0];
        GameGlobal.modelRole.voMine.sceneChars[0];
        t.setHero(), t.setWay(1), t.validParts(), t.play()
    }, e.prototype.showTeam = function () {
        this.setRoleNum(this.openArg.members.length);
        for (var t = 0; t < this.openArg.members.length; t++) {
            var e = this.heroRoles[t],
                i = this.openArg.members[t];
            GameGlobal.modelRole.voMine.sceneChars[0];
            e.setFashion(i[1], i[2]), e.setHorse(i[3]), e.setWeapon(i[4]), e.setWing(i[5]), e.setHalo(null), e.setWay(1), e.validParts(), e.play()
        }
    }, e.prototype.setRoleNum = function (t) {
        for (var e = [2, 1, 1, 1, 3, 1], i = 0; t > i; i++) {
            var o = this.heroRoles[i];
            if (!o) {
                o = UIRole.create(), this.battleGrp.addChild(o), this.heroRoles[i] = o;
                var n = RoundBattleScene.getPosMatrix(1).transformPoint(e[2 * i], e[2 * i + 1], MoveUtil.getTempPoint(0, 0));
                o.x = n.x, o.y = n.y
            }
        }
        for (; i < this.heroRoles.length; i++) {
            var o = this.heroRoles[i];
            o.dispose, this.battleGrp.removeChild(o)
        }
        this.heroRoles.length = t
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = RoundBattleScene.getPosMatrix(2),
            o = i.transformPoint(2, 1, MoveUtil.getTempPoint(0, 0));
        this.petRole.x = o.x, this.petRole.y = o.y, this.openArg = e;
        var n = CFG_Pet.PETLIB[e.petId],
            a = this.petRole;
        a.setBody(n.m), a.setWay(3), a.idle(), a.play(), e.members ? this.showTeam() : this.showSingle(), GameGlobal.layerMgr.addUIHideF(UIConst.BATTLESCENE, "buzhuo"), GameGlobal.layerMgr.addUIHideF(UIConst.SPECSCENEBAR, "buzhuo"), GameGlobal.layerMgr.addUIHideF(UIConst.SI_LIAO, "buzhuo"), GameGlobal.modelPet.isCatching = !0, GameGlobal.mapScene.checkVisible(), egret.Tween.get(this).wait(500).call(this.onDelay1, this).wait(500).call(this.onDelay2, this).wait(300).call(this.onCatch, this), GameGlobal.layerMgr.close(UIConst.BUZHUOPET), GameGlobal.mapScene.lockWatch = !0
    }, e.prototype.onClose = function () {
        for (var t = 0, e = this.heroRoles.length; e > t; t++) this.heroRoles[t].stopAndClear();
        this.petRole.stopAndClear(), GameGlobal.layerMgr.delUIHideF(UIConst.BATTLESCENE, "buzhuo"), GameGlobal.layerMgr.delUIHideF(UIConst.SPECSCENEBAR, "buzhuo"), GameGlobal.layerMgr.delUIHideF(UIConst.SI_LIAO, "buzhuo"), GameGlobal.modelPet.isCatching = !1, GameGlobal.mapScene.checkVisible(), GameGlobal.mapScene.lockWatch = !1
    }, e.prototype.onSize = function () {
        var t = this.stage,
            e = 0,
            i = 370,
            o = 600;
        this.battleGrp.y = e + (t.stageHeight - e - i - o >> 1), this.fullStage()
    }, e.prototype.onDelay1 = function () {
        for (var t = 0, e = this.heroRoles.length; e > t; t++) this.heroRoles[t].playAttack(800, 800)
    }, e.prototype.onDelay2 = function () {
        EffectMgr.addEff("battleeff/huojuan", this.petRole, 0, 0, 600, 600);
        GameGlobal.mapScene.shake()
    }, e.prototype.finish = function () {
        this.closeHandler()
    }, e.prototype.onCatch = function () {
        var t = this.openArg.result;
        1 == t ? (this.petRole.playAttack(), egret.Tween.get(this).wait(500).call(this.onSuc1, this)) : egret.Tween.get(this.petRole).to({
            x: this.petRole.x - 200,
            y: this.petRole.y - 100
        }, 400).call(this.onFault, this)
    }, e.prototype.onSuc1 = function () {
        this.finish(), GameGlobal.layerMgr.open(UIConst.BUZHUORET, this.openArg)
    }, e.prototype.onFault = function () {
        this.finish(), GameGlobal.layerMgr.open(UIConst.BUZHUORET, this.openArg)
    }, e
}(BaseEUIView);
__reflect(VBuZhuoBattle.prototype, "VBuZhuoBattle");
var VBuZhuoMember = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.lbInvite.touchEnabled = !0, this.btnKick.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onKickT, this), this.lbInvite.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onInviteT, this)
    }, e.prototype.update = function (t) {
        if (this._data = t, t) {
            this.currentState = "fill";
            var e = (t[0], t[1]),
                i = t[2],
                o = t[3],
                n = t[4];
            this.lbName.text = e, this.lbLv.text = "Lv:" + o, this.lbStr.text = "战力:" + n;
            var a = 0 == this.index;
            a ? this.imgCap.visible = !0 : this.imgCap.visible = !1, this.ico.source = IconUtil.getRoleHead(i)
        } else this.currentState = "empty", this.lbInvite.textFlow = HtmlUtil.underLine("邀请")
    }, e.prototype.onKickT = function () {
        GameGlobal.modelPet.CG_KICK(this._data[0])
    }, e.prototype.onInviteT = function () {
        GameGlobal.modelPet.buZhuoTeam.capId == GameGlobal.modelRole.voMine.id ? GameGlobal.layerMgr.open(UIConst.BUZHUOQIUZHU) : ViewText.text("只有队长才能邀请")
    }, e
}(eui.Component);
__reflect(VBuZhuoMember.prototype, "VBuZhuoMember");
var VBuZhuoPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "BuZhuoSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.base.title = "灵兽捕捉", this.base.btnReturn.bottom = 20, this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.uiRole = UIRole.create(), this.part.addChild(this.uiRole), this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.grid.setShowCount(!1), this.grid.enableTip(), this.cbCostItem.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTbSel, this), this.teamBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.teamBtnT, this), this.teamBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.teamBtnT, this), this.teamBtn2.label = "提升概率", this.teamBtn3.addEventListener(egret.TouchEvent.TOUCH_TAP, this.teamBtnT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelPet.buZhuoTeam && (e = GameGlobal.modelPet.buZhuoTeam), this.lbInvited.visible = !1, this.petData = e;
        var i = CFG_Pet.PETLIB[e.sysid];
        this.uiRole.setBody(i.m), this.uiRole.setWay(3), this.uiRole.validParts(), this.uiRole.play(), this.lbName.text = i.n, this.lbMap.text = "灵兽岛";
        var o = CFG_Pet.ZHUOCHONGLIB[e.sysid],
            n = ConfigHelp.makeVoByArr(Util.parseIntStr(o.item));
        this.grid.setData(n), this.cbCostItem.text = Lang.reTxt("使用1个{0}进行捕捉", n.name), this.cbCostItem.selected = !1, this.onBagC(), this.updateTeamInfo(), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onBagC, this), GameGlobal.modelPet.on(ModelPet.MSG_PETTEAM, this.updateTeamInfo, this), GameGlobal.modelPet.on(ModelPet.MSG_INVITE, this.onInvite, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onBagC), GameGlobal.modelPet.off(ModelPet.MSG_PETTEAM, this.updateTeamInfo), GameGlobal.modelPet.off(ModelPet.MSG_INVITE, this.onInvite, this)
    }, e.prototype.onBagC = function () {
        if (this.grid._data) {
            GameGlobal.modelBag.getItemCount(this.grid._data.id);
            this.updateSel()
        }
    }, e.prototype.updateSel = function () {
        var t = GameGlobal.modelBag.getItemCount(this.grid._data.id);
        t > 0 ? this.cbCostItem.lbText.textColor = Color.UIGREEN2 : this.cbCostItem.lbText.textColor = Color.UIRED, this.cbCostItem.selected && 0 > t ? this.btn1.enabled = this.btn2.enabled = !1 : this.btn1.enabled = this.btn2.enabled = !0
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onBtnT = function (t) {
        var e = this.cbCostItem.selected ? 1 : 0;
        switch (t.currentTarget) {
            case this.btn1:
                GameGlobal.modelPet.CG_ZHUAPET(this.petData.uid, e);
                break;
            case this.btn2:
                GameGlobal.modelPet.CG_CREATETEAM(this.petData.uid, e)
        }
    }, e.prototype.onTbSel = function () {
        var t = GameGlobal.modelBag.getItemCount(this.grid._data.id);
        t < this.grid._data.count ? (GameGlobal.layerMgr.open(UIConst.CAILIAOGET, this.grid._data), VCaiLiaoHuoQu.openTJCB = function () {
            GameGlobal.layerMgr.close(UIConst.BUZHUOPET)
        }) : this.cbCostItem.selected = !this.cbCostItem.selected
    }, e.prototype.updateTeamInfo = function () {
        var t = GameGlobal.modelPet;
        if (this.lbAssRemain.text = t.remainAssistTimes + "/5", t.remainAssistTimes ? this.lbAssRemain.textColor = Color.UIGREEN2 : this.lbAssRemain.textColor = Color.UIRED, t.buZhuoTeam) {
            this.selOptPage.visible = !1, this.teamPage.visible = !0;
            for (var e = 0; 3 > e; e++) this.updateTerm(e);
            var i = t.buZhuoTeam.capId == GameGlobal.modelRole.voMine.id;
            i ? (this.teamBtn1.visible = !0, this.teamBtn1.label = "取消", this.teamBtn1.va = "cancel", this.teamBtn3.visible = !0, this.teamBtn3.label = "捕捉", this.teamBtn3.va = "catch") : (this.teamBtn1.visible = !0, this.teamBtn1.label = "退出", this.teamBtn1.va = "leave", this.teamBtn3.visible = !1);
            var o = ArrayUtil.getItem(t.buZhuoTeam.members, 0, t.buZhuoTeam.itemRoleID);
            if (o) {
                this.teamBtn2.enabled = !1, this.teamBtn2.va = "";
                var n = CFG_Pet.ZHUOCHONGLIB[GameGlobal.modelPet.buZhuoTeam.sysid];
                this.lbTeamCost.text = Lang.reTxt("{0}使用了{1}，捕捉概率为100%", o[1], ConfigHelp.getToolText(Util.parseIntStr(n.item)))
            } else this.teamBtn2.enabled = !0, this.teamBtn2.va = "teamItem", this.lbTeamCost.text = ""
        } else this.selOptPage.visible = !0, this.teamPage.visible = !1
    }, e.prototype.updateTerm = function (t) {
        var e = GameGlobal.modelPet.buZhuoTeam;
        if (e && e.members) {
            var i = e.capId == GameGlobal.modelRole.voMine.id,
                o = e.members[t],
                n = this["m" + t];
            n && (n.index = t, n.update(o), 0 != t && i ? n.btnKick.visible = !0 : n.btnKick.visible = !1)
        }
    }, e.prototype.teamBtnT = function (t) {
        var e = t.currentTarget;
        if ("catch" == e.va) GameGlobal.modelPet.CG_STARTTEAMCATCH();
        else if ("leave" == e.va) GameGlobal.modelPet.CG_LEAVETEAM();
        else if ("cancel" == e.va) GameGlobal.modelPet.CG_LEAVETEAM();
        else if ("teamItem" == e.va) {
            var i = CFG_Pet.ZHUOCHONGLIB[GameGlobal.modelPet.buZhuoTeam.sysid],
                o = VoItem.create(),
                n = Util.parseIntStr(i.item);
            o.init(n[1]), o.count = n[2], i && GameGlobal.modelBag.getItemCount(o.id) >= o.count ? GameGlobal.modelPet.CG_USETEAMITEM(0, 1) : GameGlobal.layerMgr.open(UIConst.CAILIAOGET, o)
        }
    }, e.prototype.onInvite = function () {
        this.lbInvited.visible = !0, GameGlobal.tick.addInterv(this.removeInvited, 18e3, this, !0, null, !0)
    }, e.prototype.removeInvited = function (t) {
        t.lbInvited.visible = !1
    }, e
}(BaseEUIView);
__reflect(VBuZhuoPnl.prototype, "VBuZhuoPnl");
var VBuZhuoQiuZu = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.lastFriendTime = -1e6, e.lastGangTime = -1e6, e.skinName = "BuZhuoQiuZhu", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.sendToFriend), DisplayUtil.popBtnStyle(this.sendToGang), this.sendToFriend.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onFriendT, this), this.sendToGang.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGangT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e)
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onFriendT = function () {
        var t = egret.getTimer();
        return t - this.lastFriendTime <= 2e4 ? void ViewText.text("20秒内只能请求协助一次") : (this.lastFriendTime = t, GameGlobal.modelPet.CG_INVITEFRIEND(), void this.closeHandler())
    }, e.prototype.onGangT = function () {
        var t = egret.getTimer();
        return t - this.lastGangTime <= 2e4 ? void ViewText.text("20秒内只能请求协助一次") : (this.lastGangTime = t, GameGlobal.modelPet.CG_INVITEGANG(), GameGlobal.modelPet.notify(ModelPet.MSG_INVITE), void this.closeHandler())
    }, e
}(BaseEUIView);
__reflect(VBuZhuoQiuZu.prototype, "VBuZhuoQiuZu");
var VBuZhuoRet = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "BuZhuoPetRet", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.sure), this.petMod = UIRole.create(), this.contaienr.addChild(this.petMod)
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), 1 == e.result && e.petId) {
            this.currentState = "suc";
            var i = CFG_Pet.ZHUOCHONGLIB[e.petId],
                o = CFG_Pet.PETLIB[e.petId],
                n = ConfigHelp.getToolText(Util.parseIntStr(i.jl), !0);
            this.lbText.textFlow = HtmlUtil.parse("恭喜获得:" + n), GameGlobal.tick.addInterv(this.frame, 1, this), this.petMod.setBody(o.m), this.petMod.setWay(3), this.petMod.validParts(), this.petMod.play()
        } else this.currentState = "fault";
        this.resetTime(), GameGlobal.tick.addInterv(this.tick, 1e3, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.frame), GameGlobal.tick.removeInterv(this.tick), this.petMod.stopAndClear()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.resetTime = function () {
        this.closeSec = 6, this.updateTime()
    }, e.prototype.frame = function (t) {
        t.imgHightLine.rotation += 2
    }, e.prototype.tick = function (t) {
        t.closeSec -= 1, t.updateTime(), t.closeSec <= 0 && t.closeHandler()
    }, e.prototype.updateTime = function () {
        this.sure.label = this.closeSec + "秒后关闭"
    }, e
}(BaseEUIView);
__reflect(VBuZhuoRet.prototype, "VBuZhuoRet");
var VZhuaChongPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ZhuaChongSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e)
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VZhuaChongPnl.prototype, "VZhuaChongPnl");
var ModelPlayer = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.recharegDoubles = {}, e.mainMenuSt = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(158, this.GC_PLAYERATTRINIT, this), e.regHand(160, this.GC_PLAYERATTRUD, this), e.regHand(2602, this.GC_RECHARGEDOUBLE, this)
    }, e.prototype.setMainMenuSt = function (t) {
        this.mainMenuSt = t, this.notify(e.MSG_MAINMENUST)
    }, e.prototype.CG_RECHARGEDOUBLE = function () {
        this.sendSocket(2601, this.getBytes())
    }, e.prototype.GC_RECHARGEDOUBLE = function (t, i) {
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = i.readInt(),
                s = i.readByte();
            t.recharegDoubles[a] = s, t.notify(e.MSG_RECHAREDBL)
        }
    }, e.prototype.GC_PLAYERATTRINIT = function (t, e) {
        var i = GameGlobal.modelRole.voMine;
        i.job = e.readByte(), i.hpmax = e.readInt(), i.att = e.readInt(), i.phyDef = e.readInt(), i.speDef = e.readInt(), i.crit = e.readInt(), i.resCrit = e.readInt(), i.critDmgAdd = e.readInt(), i.critDmgRes = e.readInt(), i.dmgAddPer = e.readInt(), i.dmgRedPer = e.readInt(), i.phyDmgRedPer = e.readInt(), i.speDmgRedPer = e.readInt(), i.speed = e.readInt(), i.teamStr = e.readInt()
    }, e.prototype.GC_PLAYERATTRUD = function (t, e) {
        var i = e.readUTF(),
            o = JSON.parse(i),
            n = GameGlobal.modelRole.voMine;
        for (var a in o) {
            var s = o[a];
            switch (a) {
                case "str":
                    n.teamStr = s;
                    break;
                default:
                    void 0 != n[a] ? n[a] = s : console.error("erroAttr:" + a + "=" + s)
            }
        }
    }, e.MSG_RECHAREDBL = "MSG_RECHAREDBL", e.MSG_MAINMENUST = "MSG_MAINMENUST", e
}(BaseModel);
__reflect(ModelPlayer.prototype, "ModelPlayer");
var PopWindownCtr = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.onPopWindow = function (t) {
        switch (t) {
            case EPopWindowType.YB_NOT_ENOUGH:
                this.onYBNotEnough()
        }
    }, e.prototype.onYBNotEnough = function () {
        ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        })
    }, e.prototype.addMsgListeners = function () {
        this.on(PopWindowEvent.POP_WINDOW, this.onPopWindow, this)
    }, e.prototype.removeMsgListeners = function () {
        this.off(PopWindowEvent.POP_WINDOW, this.onPopWindow, this)
    }, e
}(GameCtrlBase);
__reflect(PopWindownCtr.prototype, "PopWindownCtr");
var EPopWindowType;
! function (t) {
    t[t.YB_NOT_ENOUGH = 0] = "YB_NOT_ENOUGH"
}(EPopWindowType || (EPopWindowType = {}));
var PopWindowEvent = function () {
    function t() {}
    return t.pre = "POP_WINDOW_EVENT_", t.POP_WINDOW = t.pre + "POP_WINDOW", t
}();
__reflect(PopWindowEvent.prototype, "PopWindowEvent");
var ModelQiXiYouNi = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(3460, this.GC3460, this), e.regHand(3462, this.GC3462, this), e.regHand(3464, this.GC3464, this), e.regHand(3466, this.GC3466, this), e.regHand(3468, this.GC3468, this), e.regHand(3470, this.GC3470, this), e.regHand(3472, this.GC3472, this)
    }, e.prototype.GC3460 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte(),
                s = i.readByte(),
                r = Vo_QiXiShop.List[n];
            r || (r = new Vo_QiXiShop, Vo_QiXiShop.List.push(r)), r.id = a, r.cfg = CFG_QiXiYouNi.LIB[a], r.buyNum = s
        }
        for (; n < Vo_QiXiShop.List.length; n++) {
            var l = Vo_QiXiShop.List.splice(n, 1);
            l = null
        }
        t.notify(e.MSG_UPDATE_SHOP)
    }, e.prototype.CG3461 = function () {
        var t = this.getBytes();
        this.sendSocket(3461, t)
    }, e.prototype.GC3462 = function (t, i) {
        var o = i.readByte();
        t.isget = 1 == o;
        for (var n = i.readShort(), a = 0; n > a; a++) {
            var s = Vo_QiXiPHB.List[a];
            s || (s = new Vo_QiXiPHB, Vo_QiXiPHB.List.push(s)), s.name = i.readUTF(), s.num = i.readShort()
        }
        Vo_QiXiPHB.myrank = i.readInt(), t.notify(e.MSG_UPDATE)
    }, e.prototype.CG3463 = function () {
        var t = this.getBytes();
        this.sendSocket(3463, t)
    }, e.prototype.GC3464 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = Vo_QiXiRecord.List[n];
            a || (a = new Vo_QiXiRecord, Vo_QiXiRecord.List.push(a)), a.type = i.readByte(), a.name = i.readUTF(), a.shopid = i.readShort(), a.shopnum = i.readShort(), a.date = i.readInt()
        }
        t.notify(e.MSG_UPDATE_RECORD)
    }, e.prototype.CG3465 = function (t, e) {
        var i = this.getBytes();
        i.writeLong(t), i.writeByte(e), this.sendSocket(3465, i)
    }, e.prototype.GC3466 = function (t, i) {
        var o = 0,
            n = i.readByte();
        if (1 == n) {
            var a = i.readByte(),
                s = Vo_QiXiShop.getVoByid(a);
            s && (s.buyNum++, o = s.cfg.qmd, ViewText.text("增加好感度" + o)), t.notify(e.MSG_UPDATE)
        } else if (2 == n) ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        });
        else {
            var r = ["", "", "", "未选择好友", "选择的好友没有互相关注", "购买数量超过限购", "该好友受赠次数已达最大值，请明日再来"];
            ViewText.text(r[n])
        }
    }, e.prototype.CG3467 = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(3467, e)
    }, e.prototype.GC3468 = function (t, i) {
        var o = i.readByte();
        t.notify(e.MSG_UPDATE_CHOOSE, o)
    }, e.prototype.CG3469 = function () {
        var t = this.getBytes();
        this.sendSocket(3469, t)
    }, e.prototype.GC3470 = function (t, i) {
        var o = i.readByte();
        if (1 == o) t.isget = !0, t.notify(e.MSG_UPDATE);
        else {
            var n = ["", "", "条件未达", "已领取"];
            ViewText.text(n[o])
        }
    }, e.prototype.CG3471 = function () {
        var t = this.getBytes();
        this.sendSocket(3471, t)
    }, e.prototype.GC3472 = function (t, e) {
        var i = e.readByte();
        2 == i && ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE), GameGlobal.layerMgr.close(UIConst.QIXIYOUNI)
        })
    }, e.MSG_UPDATE = "MSG_UPDATE", e.MSG_UPDATE_RECORD = "MSG_UPDATE_RECORD", e.MSG_UPDATE_SHOP = "MSG_UPDATE_SHOP", e.MSG_UPDATE_CHOOSE = "MSG_UPDATE_CHOOSE", e.red = !0, e
}(BaseModel);
__reflect(ModelQiXiYouNi.prototype, "ModelQiXiYouNi");
var Vo_QiXiPHB = function () {
    function t() {}
    return t.List = [], t.myrank = 0, t
}();
__reflect(Vo_QiXiPHB.prototype, "Vo_QiXiPHB");
var Vo_QiXiShop = function () {
    function t() {
        this.buyNum = 0
    }
    return t.getVoByid = function (t) {
        for (var e = this.List, i = 0; i < e.length; i++) {
            var o = e[i];
            if (o.id == t) return o
        }
        return null
    }, t.List = [], t
}();
__reflect(Vo_QiXiShop.prototype, "Vo_QiXiShop");
var Vo_QiXiRecord = function () {
    function t() {}
    return t.List = [], t
}();
__reflect(Vo_QiXiRecord.prototype, "Vo_QiXiRecord");
var Vo_QiXiJl = function () {
    function t() {}
    return t.create = function () {
        if (!this.List.length) {
            var e = 0,
                i = CFG_QiXiYouNi.LIB1;
            for (var o in i) {
                var n = i[o],
                    a = new t;
                a.cfg = n, a.index = e, this.List.push(a), e++
            }
        }
    }, t.List = [], t
}();
__reflect(Vo_QiXiJl.prototype, "Vo_QiXiJl");
var VQiXiFriendItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.skinName = "QiXiFriendItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.lbname.textColor = 1 == t.lineSt ? 5869579 : 6835267, this.lbname.text = t.name, this.lbnum.text = t.qmd.toString()
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel != t && (this._sel = t)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VQiXiFriendItem.prototype, "VQiXiFriendItem");
var VQiXiGift = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiGiftSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.data = new eui.ArrayCollection, this.list.itemRenderer = VQiXiGiftItem, this.list.dataProvider = this.data
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "qixiyouni_gift_BG_png"), GameGlobal.modelQiXiYouNi.on(ModelQiXiYouNi.MSG_UPDATE_RECORD, this.update, this), GameGlobal.modelQiXiYouNi.CG3463()
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.bg, null), GameGlobal.modelQiXiYouNi.off(ModelQiXiYouNi.MSG_UPDATE_RECORD, this.update, this)
    }, e.prototype.update = function () {
        DisplayUtil.fillDataAC(this.data, Vo_QiXiRecord.List)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VQiXiGift.prototype, "VQiXiGift");
var VQiXiGiftItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiGiftItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.lbtime.text = DateUtil.getYMDHM(t.date);
            var e = CFG_Item.LIB[t.shopid],
                i = e ? e.name : "";
            if (1 == t.type) var o = HtmlUtil.parse("赠送给" + HtmlUtil.color(t.name, "#ab67cc") + HtmlUtil.color(i + "*" + t.shopnum, "#a83503"));
            else o = HtmlUtil.parse("收到" + HtmlUtil.color(t.name, "#ab67cc") + "赠送的" + HtmlUtil.color(i + "*" + t.shopnum, "#a83503"));
            this.lbdes.textFlow = o
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VQiXiGiftItem.prototype, "VQiXiGiftItem");
var VQiXiPHBItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiPHBItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.lbname.text = t.name, this.lbnum.text = t.num.toString()
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VQiXiPHBItem.prototype, "VQiXiPHBItem");
var VQiXiPHBjl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiPHBjlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.data = new eui.ArrayCollection, this.list.itemRenderer = VQiXiPHBjlItem, this.list.dataProvider = this.data, this.base.title = "好人榜排行奖励"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.update = function () {
        Vo_QiXiJl.create(), DisplayUtil.fillDataAC(this.data, Vo_QiXiJl.List)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VQiXiPHBjl.prototype, "VQiXiPHBjl");
var VQiXiPHBjlItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "ChengZhuZWJLItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.btnGet.visible = !1, this.scrol.width = 416
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.bg.source = t.index % 2 == 0 ? "CM2_json.bg1" : "CM2_json.bg2", this.imgTitle.source = "qxyl_json.no" + t.cfg.id, ConfigHelp.makeStrGrids(t.cfg.pmjl, this.grids, 0, 0, this.group, !0)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VQiXiPHBjlItem.prototype, "VQiXiPHBjlItem");
var VQiXiShopItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiShopItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btn.label = " ", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.grid.enableTip()
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t;
            var e = ConfigHelp.makeVoList(t.cfg.sp)[0];
            this.grid.data = e, this.grid.bg.source = "";
            var i = Util.parseIntStr(t.cfg.hrksl)[2];
            this.lbitemnum.text = "x" + i, this.lbxgnum.textFlow = HtmlUtil.parse(t.buyNum.toString() + "/" + t.cfg.xzgm);
            var o = Util.parseIntStr(t.cfg.xh),
                n = 32 == o[0] ? "MainScreen_json.byl" : "MainScreen_json.bm_yb";
            this.imgxh.source = n, this.lbxhnum.text = o[2].toString()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onT = function () {
        if (!VQiXiYouNi.selFri) return void ViewText.text("请先选择赠送对象，再进行购买！");
        var t = Util.parseIntStr(this.vo.cfg.xh);
        return 32 == t[0] && GameGlobal.modelRole.voMine.bYuanbao < t[2] ? void ViewText.text("绑定元宝不足") : void GameGlobal.modelQiXiYouNi.CG3465(VQiXiYouNi.selFri.id, this.vo.id)
    }, e
}(eui.ItemRenderer);
__reflect(VQiXiShopItem.prototype, "VQiXiShopItem");
var VQiXiYouNi = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "QiXiYouNiSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose);
        var t = GameGlobal.layerMgr;
        t.reg(UIConst.QIXIGIFT, VQiXiGift, t.UI_Message), t.reg(UIConst.QIXIAWARD, VQiXiPHBjl, t.UI_Message), this.shopdata = new eui.ArrayCollection, this.shoplist.itemRenderer = VQiXiShopItem, this.shoplist.dataProvider = this.shopdata, this.phbdata = new eui.ArrayCollection, this.phblist.itemRenderer = VQiXiPHBItem, this.phblist.dataProvider = this.phbdata, this.frienddata = new eui.ArrayCollection, this.friendlist.itemRenderer = VQiXiFriendItem, this.friendlist.dataProvider = this.frienddata, DisplayUtil.popBtnStyle(this.btnSelFriend), DisplayUtil.popBtnStyle(this.btnGetAward), DisplayUtil.popBtnStyle(this.btnGift), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnRefresh), this.lbckjl.textFlow = HtmlUtil.underLine("奖励"), this.btnGetAward.addEventListener(egret.TouchEvent.TOUCH_TAP, this.getawardT, this), this.btnSelFriend.addEventListener(egret.TouchEvent.TOUCH_TAP, this.selfriendT, this), this.btnGift.addEventListener(egret.TouchEvent.TOUCH_TAP, this.giftT, this), this.lbckjl.addEventListener(egret.TouchEvent.TOUCH_TAP, this.ckjlT, this), this.btnRefresh.addEventListener(egret.TouchEvent.TOUCH_TAP, this.refreshT, this), this.friendlist.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.friendT, this)
    }, e.prototype.refreshT = function () {
        GameGlobal.modelQiXiYouNi.CG3471()
    }, e.prototype.friendT = function (t) {
        var i = t.item;
        i && (e.selFri = i, this.lbname.text = i ? i.name : "", GameGlobal.modelQiXiYouNi.CG3467(i.id))
    }, e.prototype.ckjlT = function () {
        GameGlobal.layerMgr.open(UIConst.QIXIAWARD)
    }, e.prototype.giftT = function () {
        GameGlobal.layerMgr.open(UIConst.QIXIGIFT)
    }, e.prototype.getawardT = function () {
        var t = GameGlobal.modelQiXiYouNi,
            e = GameGlobal.modelBag.getItemCount(1217);
        if (t.isget) ViewText.text("已兑换,请勿重复兑换");
        else {
            var i = Util.parseIntStr(CFG_Param.LIB[10].key)[2];
            e >= i ? GameGlobal.modelQiXiYouNi.CG3469() : ViewText.text("好人卡不足，无法兑换！")
        }
    }, e.prototype.selfriendT = function () {
        this.friGrp.visible = !this.friGrp.visible, this.friGrp.visible && GameGlobal.modelFriend.CG_FriendData(1)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "qixiyouni_BG_png"), ModelQiXiYouNi.red = !1, this.friGrp.visible = !1;
        var i = ConfigHelp.makeVoList("1,2704,1")[0];
        this.grid.data = i, this.grid.enableTip(), this.lbxh.text = Util.parseIntStr(CFG_Param.LIB[9].key)[2], this.update(), GameGlobal.tick.addInterv(this.tickTime, 1e3, this), GameGlobal.modelQiXiYouNi.on(ModelQiXiYouNi.MSG_UPDATE, this.update, this), GameGlobal.modelQiXiYouNi.on(ModelQiXiYouNi.MSG_UPDATE_SHOP, this.upShop, this), GameGlobal.modelQiXiYouNi.on(ModelQiXiYouNi.MSG_UPDATE_CHOOSE, this.dealretT, this), GameGlobal.modelFriend.on(ModelFriend.MSG_FLIST, this.upFriend, this), GameGlobal.modelQiXiYouNi.CG3461()
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.bg, null), GameGlobal.tick.removeInterv(this.tickTime, this), GameGlobal.modelQiXiYouNi.off(ModelQiXiYouNi.MSG_UPDATE, this.update, this), GameGlobal.modelQiXiYouNi.off(ModelQiXiYouNi.MSG_UPDATE_SHOP, this.upShop, this), GameGlobal.modelQiXiYouNi.off(ModelQiXiYouNi.MSG_UPDATE_CHOOSE, this.dealretT, this), GameGlobal.modelFriend.off(ModelFriend.MSG_FLIST, this.upFriend, this)
    }, e.prototype.update = function () {
        this.upShop(), this.upAward(), this.upPHB();
        var t = 0 == Vo_QiXiPHB.myrank ? "未上榜" : Vo_QiXiPHB.myrank;
        this.lbrank.text = "我的排名：" + t
    }, e.prototype.upAward = function () {
        var t = Util.parseIntStr(CFG_Param.LIB[10].key)[2];
        this.lbnum.textFlow = HtmlUtil.parse(GameGlobal.modelBag.getItemCount(1217) + HtmlUtil.color("/" + t, "#ea2b2b"));
        var e = GameGlobal.modelQiXiYouNi;
        if (e.isget) var i = "已兑换",
            o = !1,
            n = !1;
        else {
            var a = GameGlobal.modelBag.getItemCount(1217);
            n = a >= t, i = "兑换", o = !0
        }
        this.btnGetAward.label = i, this.btnGetAward.enabled = o, this.btnGetAward.setNoticeVis(n);
        var s = GameGlobal.modelAct.actData.getChildByID(22);
        if (s) {
            var r = s.getBtn();
            r.setNoticVis(n)
        }
    }, e.prototype.upShop = function () {
        DisplayUtil.fillDataAC(this.shopdata, Vo_QiXiShop.List)
    }, e.prototype.upPHB = function () {
        DisplayUtil.fillDataAC(this.phbdata, Vo_QiXiPHB.List)
    }, e.prototype.upFriend = function () {
        for (var t = [], e = GameGlobal.modelFriend.friendList, i = 0; i < e.length; i++) {
            var o = e[i];
            1 == o.friendSt && t.push(o)
        }
        this.lbtipfri.visible = 0 == t.length, DisplayUtil.fillDataAC(this.frienddata, t)
    }, e.prototype.dealretT = function (t) {
        1 == t ? this.friGrp.visible = !1 : 2 == t && (ViewText.text("该好友受赠次数已达最高值，今日无法赠送，请明日再来！"), this.friendlist.selectedIndex = -1, this.lbname.text = "", e.selFri = null)
    }, e.prototype.tickTime = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(22);
        if (e) {
            var i = e.getRemainSec();
            0 >= i && t.closeHandler()
        } else t.closeHandler()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VQiXiYouNi.prototype, "VQiXiYouNi");
var GuideMgr = function () {
    function t() {
        this.HADSAVEHBATTR = {}, this._starting = !1
    }
    return t.getIns = function () {
        return this._ins || (this._ins = new t), this._ins
    }, t.prototype.start = function () {
        this._starting || (this._starting = !0, GameGlobal.tick.addInterv(this.tick, 150, this))
    }, t.prototype.end = function () {
        this._starting && (this._mainGuide || this._zxGuide || (this._starting = !1, GameGlobal.tick.removeInterv(this.tick)))
    }, t.prototype.tick = function (t) {
        !GameGlobal.mapScene || GameGlobal.mapScene.map.isLoading || QuestGuideArrow.pauseLen || t.checkGuide()
    }, t.prototype.checkGuide = function () {
        var t = this._mainGuide;
        if (this._zxGuide && (t = this._zxGuide), t) {
            for (var e = t, i = 0, o = e.curIndex; o >= 0; o--) {
                var n = e.steps[o];
                if (n.cantprev) {
                    i = o;
                    break
                }
                i = o
            }
            0 > i && (i = 0);
            for (var a = !1, o = i, s = e.steps.length; s > o; o++) {
                var n = e.steps[o],
                    r = !1;
                if (n.questid) {
                    var l = GameGlobal.modelQuest.getCurVo();
                    if (!l || !l) {
                        a = !0;
                        break
                    }
                    r = 2 == l.state
                }
                if (n.xiuxianid) {
                    var h = GameGlobal.modelTarget.findAchieveQuest(n.xiuxianid);
                    (!h || h.curFinish) && (r = !0)
                }
                if (r = r || n.check && n.check(n) || n.check2 && n.check2(n, 1), !r) {
                    if (o != e.curIndex) {
                        var c = e.steps[e.curIndex];
                        if (e.curIndex = o, c && c.exit && c.exit(n, e), n.enter) {
                            var p = CFG_Quest.LIB_GUIDETEXT && CFG_Quest.LIB_GUIDETEXT[n.textid];
                            p && "0" != p.ydwz ? (QuestGuideArrow.lastGuideText = p.ydwz, QuestGuideArrow.lastGuideTextPos = p.pos) : (QuestGuideArrow.lastGuideText = null, QuestGuideArrow.lastGuideTextPos = null), n.enter(n, e)
                        }
                    }
                    break
                }
            }
            r && n && n.frame && n.frame(n, e), (a || o >= e.steps.length) && (console.log("guideFinish"), this.end(), e.exitCallBack && (e.exitCallBack.run(), e.exitCallBack.recover()))
        }
    }, t.prototype.releaseArrow = function () {
        var t = QuestGuideArrow.getIns();
        t.tar = null, this.checkGuideTarget()
    }, t.prototype.checkQuestGuide = function () {
        GameGlobal.modelQuest.checkGuide()
    }, t.prototype.checkGuideTarget = function () {
        if (!this._mainGuide) {
            var t = QuestGuideArrow.getIns(),
                e = GameGlobal.layerMgr.getView(UIConst.QUEST);
            e && e.checkGuide(), t.tar || t.hide()
        }
    }, t.prototype.setMainGuideQueue = function (t) {
        this._mainGuide = t, t.exitCallBack = Handler.create(this, this.onMainGuideExit), this.start()
    }, t.prototype.getQuestGuide = function (t) {
        if (!t.cfg.g) return null;
        if (t.cfg.g.indexOf(",") >= 0) {
            var e = t.cfg.g.split(","),
                i = this[e[0]];
            if (i) return i(t.id, e)
        } else {
            var i = this[t.cfg.g];
            if (i) return i(t.id)
        }
        return null
    }, t.prototype.getGuide = function (t) {
        var e = this[t];
        return e ? e() : null
    }, t.prototype.RLG0 = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1005
        }, {
            questid: t,
            t: "EquipRL"
        }, {
            t: "closeui",
            arg: 1005
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.RLG = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1005,
            textid: 221
        }, {
            questid: t,
            t: "EquipRL",
            textid: 222
        }, {
            t: "closeui",
            arg: 1005,
            textid: 223
        }, {
            questid: t,
            t: "getAward",
            textid: 224
        }];
        return e
    }, t.prototype.SKILLG0 = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1001
        }, {
            questid: t,
            t: "openPage",
            arg: [1001, 1]
        }, {
            questid: t,
            t: "guideSkill"
        }, {
            t: "closeui",
            arg: 1001
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.SKILLG1 = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1001,
            textid: 211
        }, {
            questid: t,
            t: "openPage",
            arg: [1001, 1]
        }, {
            questid: t,
            t: "guideSkill",
            textid: 212
        }, {
            t: "closeui",
            arg: 1001,
            textid: 213
        }, {
            questid: t,
            t: "getAward",
            textid: 214
        }];
        return e
    }, t.prototype.SKILLG = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1001,
            textid: 211
        }, {
            questid: t,
            t: "openPage",
            arg: [1001, 1]
        }, {
            questid: t,
            t: "guideSkill",
            textid: 212
        }, {
            t: "closeui",
            arg: 1001,
            textid: 213
        }, {
            questid: t,
            t: "getAward",
            textid: 214
        }];
        return e
    }, t.prototype.SKILLQ = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1001
        }, {
            questid: t,
            t: "openPage",
            arg: [1001, 1]
        }, {
            questid: t,
            textid: 101,
            t: "learnSkill2"
        }, {
            questid: t,
            textid: 102,
            t: "openSkillQ"
        }, {
            questid: t,
            textid: 103,
            t: "skillQ"
        }, {
            t: "closeuiNow",
            arg: ["SKILLSETTING", 1001]
        }, {
            t: "closeui",
            arg: "SKILLSETTING"
        }, {
            t: "closeui",
            arg: 1001
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.QHZBG = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1022
        }, {
            questid: t,
            t: "openPage",
            arg: [1022, 0]
        }, {
            questid: t,
            t: "guideQH"
        }, {
            t: "closeui",
            arg: 1022
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.QHZBG0 = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1022
        }, {
            questid: t,
            t: "openPage",
            arg: [1022, 0]
        }, {
            questid: t,
            t: "guideQH"
        }, {
            t: "closeui",
            arg: 1022
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.QHZBG1 = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1022,
            textid: 171
        }, {
            questid: t,
            t: "openPage",
            arg: [1022, 0]
        }, {
            questid: t,
            t: "guideQH",
            textid: 172
        }, {
            t: "closeui",
            arg: 1022,
            textid: 177
        }, {
            questid: t,
            t: "getAward",
            textid: 178
        }];
        return e
    }, t.prototype.ZBJL0 = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1022
        }, {
            questid: t,
            t: "openPage",
            arg: [1022, 1]
        }, {
            questid: t,
            t: "guideJL"
        }, {
            t: "closeui",
            arg: 1022
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.ZBJL = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1022
        }, {
            questid: t,
            t: "openPage",
            arg: [1022, 1]
        }, {
            questid: t,
            t: "guideJL"
        }, {
            t: "closeui",
            arg: 1022
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.ZBJL1 = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1022,
            textid: 231
        }, {
            questid: t,
            t: "openPage",
            arg: [1022, 1],
            textid: 232
        }, {
            questid: t,
            t: "guideJL",
            textid: 233
        }, {
            t: "closeui",
            arg: 1022,
            textid: 237
        }, {
            questid: t,
            t: "getAward",
            textid: 238
        }];
        return e
    }, t.prototype.ZBJL2 = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1022,
            textid: 231
        }, {
            questid: t,
            t: "openPage",
            arg: [1022, 1],
            textid: 232
        }, {
            questid: t,
            t: "guideJL",
            textid: 233
        }, {
            t: "closeui",
            arg: 1022,
            textid: 237
        }, {
            questid: t,
            t: "getAward",
            textid: 238
        }];
        return e
    }, t.prototype.ZQPY0 = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1001
        }, {
            questid: t,
            t: "openPage",
            arg: [1001, 0]
        }, {
            questid: t,
            t: "openPY",
            arg: 1
        }, {
            questid: t,
            t: "openPage",
            arg: [UIConst.UIID_PEIYANG, 0]
        }, {
            questid: t,
            t: "guidePY"
        }, {
            t: "closeui",
            arg: UIConst.UIID_PEIYANG
        }, {
            t: "closeui",
            arg: 1001
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.ZQPY = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1001,
            textid: 111
        }, {
            questid: t,
            t: "openPage",
            arg: [1001, 0]
        }, {
            questid: t,
            t: "openPY",
            arg: 1,
            textid: 112
        }, {
            questid: t,
            t: "openPage",
            arg: [UIConst.UIID_PEIYANG, 0]
        }, {
            questid: t,
            t: "guidePY",
            textid: 113
        }, {
            t: "closeui",
            arg: UIConst.UIID_PEIYANG,
            textid: 114
        }, {
            t: "closeui",
            arg: 1001
        }, {
            questid: t,
            t: "getAward",
            textid: 115
        }];
        return e
    }, t.prototype.ZQPY1 = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1001,
            textid: 111
        }, {
            questid: t,
            t: "openPage",
            arg: [1001, 0]
        }, {
            questid: t,
            t: "openPY",
            arg: 1,
            textid: 112
        }, {
            questid: t,
            t: "openPage",
            arg: [UIConst.UIID_PEIYANG, 0]
        }, {
            questid: t,
            t: "guidePY",
            textid: 113
        }, {
            t: "closeui",
            arg: UIConst.UIID_PEIYANG,
            textid: 114
        }, {
            t: "closeui",
            arg: 1001
        }, {
            questid: t,
            t: "getAward",
            textid: 115
        }];
        return e
    }, t.prototype.ZBBS = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1022
        }, {
            questid: t,
            t: "openPage",
            arg: [1022, 2]
        }, {
            questid: t,
            t: "guideBS"
        }, {
            t: "closeui",
            arg: 1022
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.GKG = function (t) {
        var e = [{
            questid: t,
            t: "waitCanBoss"
        }, {
            questid: t,
            t: "openui",
            arg: 1030,
            textid: 131
        }, {
            questid: t,
            t: "guideTG",
            textid: 132
        }, {
            t: "closeui",
            arg: 1030
        }, {
            questid: t,
            t: "getAward",
            textid: 133
        }];
        return e
    }, t.prototype.GKG2 = function (t) {
        var e = [{
            questid: t,
            t: "waitCanBoss"
        }, {
            questid: t,
            t: "openui",
            arg: 1030,
            textid: 421
        }, {
            questid: t,
            t: "guideTG",
            textid: 422
        }, {
            t: "closeui",
            arg: 1030
        }, {
            questid: t,
            t: "getAward",
            textid: 423
        }];
        return e
    }, t.prototype.GKG0 = function (t) {
        var e = [{
            questid: t,
            t: "waitCanBoss"
        }, {
            questid: t,
            t: "openui",
            arg: 1030
        }, {
            questid: t,
            t: "guideTG"
        }, {
            t: "closeui",
            arg: 1030
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.PUTEQUIPG = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1001
        }, {
            questid: t,
            t: "openPage",
            arg: [1001, 0]
        }, {
            questid: t,
            t: "guideEquip"
        }, {
            t: "closeui",
            arg: 1001
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.PUTEQUIPG0 = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1001
        }, {
            questid: t,
            t: "openPage",
            arg: [1001, 0]
        }, {
            questid: t,
            t: "guideEquip"
        }, {
            t: "closeui",
            arg: 1001
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.PUTEQUIPG1 = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1001,
            textid: 141
        }, {
            questid: t,
            t: "openPage",
            arg: [1001, 0]
        }, {
            questid: t,
            t: "guideEquip",
            textid: 142
        }, {
            t: "closeui",
            arg: 1001,
            textid: 143
        }, {
            questid: t,
            t: "getAward",
            textid: 144
        }];
        return e
    }, t.prototype.ENABLEPET = function (t, e) {
        var i = (parseInt(e[1]), [{
            questid: t,
            t: "openui",
            arg: "1013",
            textid: 251
        }, {
            questid: t,
            t: "selectPet",
            arg: 3,
            textid: 252
        }, {
            questid: t,
            t: "openPage",
            arg: [1013, 0]
        }, {
            questid: t,
            t: "enablePet",
            arg: 3,
            textid: 253
        }, {
            questid: t,
            t: "openPetSZ",
            arg: 3,
            textid: 254
        }, {
            questid: t,
            t: "joinPet",
            arg: 3,
            textid: 255
        }, {
            t: "closeui",
            arg: UIConst.PETSHANGZHEN,
            textid: 256
        }, {
            t: "closeui",
            arg: 1013,
            textid: 257
        }, {
            questid: t,
            t: "getAward",
            textid: 258
        }]);
        return i
    }, t.prototype.PETLEVEL = function (t, e) {
        var i = (parseInt(e[1]), [{
            questid: t,
            t: "openui",
            arg: 1013,
            textid: 271
        }, {
            questid: t,
            t: "selectPet",
            arg: 1
        }, {
            questid: t,
            t: "openPage",
            arg: [1013, 0]
        }, {
            questid: t,
            t: "openPetLvUp",
            textid: 272
        }, {
            questid: t,
            t: "petLvUp",
            arg: 1,
            textid: 273
        }, {
            t: "closeui",
            arg: UIConst.PETLEVEL,
            textid: 274
        }, {
            t: "closeui",
            arg: 1013,
            textid: 275
        }, {
            questid: t,
            t: "getAward",
            textid: 276
        }]);
        return i
    }, t.prototype.PETLEVEL0 = function (t, e) {
        var i = (parseInt(e[1]), [{
            questid: t,
            t: "openui",
            arg: 1013
        }, {
            questid: t,
            t: "selectPet",
            arg: 3
        }, {
            questid: t,
            t: "openPage",
            arg: [1013, 0]
        }, {
            questid: t,
            t: "openPetLvUp"
        }, {
            questid: t,
            t: "petLvUp",
            arg: 1
        }, {
            t: "closeui",
            arg: UIConst.PETLEVEL
        }, {
            t: "closeui",
            arg: 1013
        }, {
            questid: t,
            t: "getAward"
        }]);
        return i
    }, t.prototype.PETLEVEL1 = function (t, e) {
        var i = (parseInt(e[1]), [{
            questid: t,
            t: "openui",
            arg: 1013,
            textid: 571
        }, {
            questid: t,
            t: "selectPet",
            arg: 1
        }, {
            questid: t,
            t: "openPage",
            arg: [1013, 0]
        }, {
            questid: t,
            t: "openPetLvUp",
            textid: 572
        }, {
            questid: t,
            t: "petLvUp",
            arg: 1,
            textid: 573
        }, {
            t: "closeui",
            arg: UIConst.PETLEVEL,
            textid: 574
        }, {
            t: "closeui",
            arg: 1013,
            textid: 575
        }, {
            questid: t,
            t: "getAward",
            textid: 576
        }]);
        return i
    }, t.prototype.PETLEVEL2 = function (t, e) {
        var i = (parseInt(e[1]), [{
            questid: t,
            t: "openui",
            arg: 1013,
            textid: 571
        }, {
            questid: t,
            t: "selectPet",
            arg: 1
        }, {
            questid: t,
            t: "openPage",
            arg: [1013, 0]
        }, {
            questid: t,
            t: "openPetLvUp",
            textid: 572
        }, {
            questid: t,
            t: "petLvUp",
            arg: 1,
            textid: 573
        }, {
            t: "closeui",
            arg: UIConst.PETLEVEL,
            textid: 574
        }, {
            t: "closeui",
            arg: 1013,
            textid: 575
        }, {
            questid: t,
            t: "getAward",
            textid: 576
        }]);
        return i
    }, t.prototype.ENABLEHB = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1011,
            textid: 121
        }, {
            questid: t,
            t: "selectHB",
            arg: 2001
        }, {
            questid: t,
            t: "openPage",
            arg: [1011, 0]
        }, {
            questid: t,
            t: "enableHB",
            arg: 2001,
            textid: 122
        }, {
            questid: t,
            t: "openHBZF",
            textid: 123
        }, {
            questid: t,
            t: "joinHB",
            arg: 2001,
            textid: 124
        }, {
            t: "closeui",
            arg: VHBOnbattle.UIID_HBONBATTLE,
            textid: 125
        }, {
            t: "closeui",
            arg: UIConst.HUOBANPAGE,
            textid: 126
        }, {
            questid: t,
            t: "getAward",
            textid: 127
        }];
        return e
    }, t.prototype.ENABLEHB2 = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1011
        }, {
            questid: t,
            t: "selectHB",
            arg: 1901
        }, {
            questid: t,
            t: "openPage",
            arg: [1011, 0]
        }, {
            questid: t,
            t: "enableHB",
            arg: 1901
        }, {
            questid: t,
            t: "openHBZF"
        }, {
            questid: t,
            t: "joinHB",
            arg: 1901
        }, {
            t: "closeui",
            arg: VHBOnbattle.UIID_HBONBATTLE
        }, {
            t: "closeui",
            arg: UIConst.HUOBANPAGE
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.GOTOMAP2 = function (t, e) {
        var i = parseInt(e[1]),
            o = [{
                questid: t,
                t: "newHandGoToMap",
                textid: 201
            }, {
                questid: t,
                t: "guideToMap",
                t2: "openWorldPrompt",
                arg: i,
                textid: 202
            }, {
                questid: t,
                t: "guideToMapOK",
                textid: 203
            }, {
                questid: t,
                t: "getAward",
                textid: 204
            }];
        return o
    }, t.prototype.AUTOFIGHT = function (t) {
        var e = [{
            questid: t,
            t: "gkAuto"
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.HBZBSJ = function (t, e) {
        var i = parseInt(e[1]),
            o = [{
                questid: t,
                t: "openui",
                arg: 1011
            }, {
                questid: t,
                t: "selectHB",
                arg: i
            }, {
                questid: t,
                t: "openPage",
                arg: [1011, 1]
            }, {
                questid: t,
                t: "HBZBSJ"
            }, {
                t: "closeui",
                arg: 1011
            }, {
                questid: t,
                t: "getAward"
            }];
        return o
    }, t.prototype.HBZBXL = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1011
        }, {
            questid: t,
            t: "selectHB",
            arg: 2001
        }, {
            questid: t,
            t: "openPage",
            arg: [1011, 1]
        }, {
            questid: t,
            t: "HBZBXL"
        }, {
            t: "HBZBXLSAVE",
            arg: 2001
        }, {
            t: "closeui",
            arg: 1011
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.HBZBXLN = function (t) {
        var e = [{
            questid: t,
            t: "openui",
            arg: 1011,
            textid: 301
        }, {
            questid: t,
            t: "selectHB",
            arg: 2001
        }, {
            questid: t,
            t: "openPage",
            arg: [1011, 1],
            textid: 302
        }, {
            questid: t,
            t: "SELHBEQ",
            arg: 0
        }, {
            questid: t,
            t: "CURHBZBXL",
            arg: 0,
            textid: 303
        }, {
            questid: t,
            t: "CURHBZBXLSAVE",
            arg: 0,
            textid: 304
        }, {
            questid: t,
            t: "SELHBEQ",
            arg: 1,
            textid: 305
        }, {
            questid: t,
            t: "CURHBZBXL",
            arg: 1,
            textid: 306
        }, {
            questid: t,
            t: "CURHBZBXLSAVE",
            arg: 1,
            textid: 307
        }, {
            questid: t,
            t: "SELHBEQ",
            arg: 2,
            textid: 308
        }, {
            questid: t,
            t: "CURHBZBXL",
            arg: 2,
            textid: 309
        }, {
            questid: t,
            t: "CURHBZBXLSAVE",
            arg: 2,
            textid: 310
        }, {
            t: "closeui",
            arg: 1011,
            textid: 311
        }, {
            questid: t,
            t: "getAward",
            textid: 312
        }];
        return e
    }, t.prototype.WORLDCHAT = function (t) {
        var e = [{
            questid: t,
            t: "toChatChannel",
            arg: 0
        }, {
            questid: t,
            t: "sendWord"
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.SYT = function (t) {
        var e = [{
            questid: t,
            t: "openShiLian_SYT"
        }, {
            questid: t,
            t: "openSYT"
        }, {
            questid: t,
            t: "openPage",
            arg: [UIConst.VSYT, 0]
        }, {
            questid: t,
            t: "sytChallenge"
        }, {
            t: "closeui",
            arg: UIConst.VSYT
        }, {
            t: "closeui",
            arg: UIConst.SHILIAN
        }, {
            questid: t,
            t: "getAward"
        }];
        return e
    }, t.prototype.PETXISUI = function (t, e) {
        var i = parseInt(e[1]),
            o = [{
                questid: t,
                t: "openui",
                arg: 1013
            }, {
                questid: t,
                t: "selectPet",
                arg: i
            }, {
                questid: t,
                t: "openPage",
                arg: [1013, 1]
            }, {
                questid: t,
                t: "petXiSui"
            }, {
                t: "savePetXiSui"
            }, {
                t: "closeui",
                arg: UIConst.PET
            }, {
                questid: t,
                t: "getAward"
            }];
        return o
    }, t.prototype.PETLEARNSKILL = function (t, e) {
        var i = parseInt(e[1]),
            o = [{
                questid: t,
                t: "openui",
                arg: 1013
            }, {
                questid: t,
                t: "selectPet",
                arg: i
            }, {
                questid: t,
                t: "openPage",
                arg: [1013, 2]
            }, {
                questid: t,
                t: "openPetSkllLearn",
                arg: UIConst.PETSKILLLEARN,
                t2: "selPetSkill"
            }, {
                questid: t,
                t: "openPage",
                arg: [UIConst.PETSKILLLEARN, 0],
                t2: "selPetSkill"
            }, {
                questid: t,
                t: "selPetSkillOnUI",
                t2: "selPetSkill"
            }, {
                questid: t,
                t: "selPetSkillOK",
                t2: "selPetSkill"
            }, {
                questid: t,
                t: "learnPetSkill"
            }, {
                t: "closeui",
                arg: UIConst.PET
            }, {
                t: "closeui",
                arg: 1013
            }, {
                questid: t,
                t: "getAward"
            }];
        return o
    }, t.prototype.CHOUKA = function (t, e) {
        var i = [{
            questid: t,
            t: "openui",
            arg: UIConst.CHOUKA
        }, {
            questid: t,
            t: "guideChouKa"
        }, {
            t: "wait",
            arg: 200
        }, {
            t: "closeui",
            arg: UIConst.CHOUKAVIEW
        }, {
            t: "closeui",
            arg: UIConst.CHOUKA
        }, {
            questid: t,
            t: "getAward"
        }];
        return i
    }, t.prototype.FWGUIDE = function (t, e) {
        var i = [{
            t: "openui",
            arg: UIConst.MAINTOWN,
            guideMainMenu: !0,
            t2: "challengeFWBoss"
        }, {
            t: "openui",
            arg: UIConst.BOSSPAGE,
            guideMainMenu: !0,
            t2: "challengeFWBoss"
        }, {
            t: "openPage",
            arg: [UIConst.BOSSPAGE, 2],
            t2: "challengeFWBoss"
        }, {
            t: "challengeFWBoss",
            cantprev: 1
        }, {
            t: "openui",
            arg: UIConst.HUOBANPAGE,
            guideMainMenu: !0
        }, {
            t: "openPage",
            arg: [UIConst.HUOBANPAGE, 3]
        }, {
            t: "guideDressFW",
            cantprev: 1
        }];
        return i
    }, t.prototype.ENABLETITLE = function (t, e) {
        var i = [{
            t: "openui",
            questid: t,
            arg: UIConst.ROLEPNL,
            guideMainMenu: !0,
            textid: 161
        }, {
            t: "openPage",
            questid: t,
            arg: [UIConst.ROLEPNL, 0]
        }, {
            t: "openTitile",
            questid: t,
            textid: 162
        }, {
            t: "enableTitle",
            questid: t,
            textid: 163
        }, {
            t: "closeui",
            arg: UIConst.TITLEFASH,
            textid: 164
        }, {
            t: "closeui",
            arg: UIConst.ROLEPNL,
            textid: 165
        }, {
            questid: t,
            t: "getAward",
            textid: 166
        }];
        return i
    }, t.prototype.JOINMP = function (t, e) {
        var i = [{
            t: "openui",
            questid: t,
            arg: UIConst.MAINTOWN,
            guideMainMenu: !0,
            textid: 361
        }, {
            t: "openui",
            questid: t,
            arg: UIConst.MENPAI,
            guideMainMenu: !0,
            textid: 362
        }, {
            t: "joinmp",
            questid: t
        }, {
            t: "closeui",
            arg: UIConst.MENPAI
        }, {
            t: "closeui",
            arg: UIConst.MAINTOWN
        }, {
            questid: t,
            t: "getAward"
        }];
        return i
    }, t.prototype.SHANGXIANG = function (t, e) {
        var i = [{
            t: "openui",
            questid: t,
            arg: UIConst.MAINTOWN,
            guideMainMenu: !0
        }, {
            t: "openui",
            questid: t,
            arg: UIConst.MENPAI,
            guideMainMenu: !0
        }, {
            t: "openPage",
            questid: t,
            arg: [UIConst.MENPAI, 1],
            textid: 371
        }, {
            t: "guideShangXiang",
            questid: t,
            textid: 372
        }, {
            t: "closeui",
            arg: UIConst.MENPAI
        }, {
            t: "closeui",
            arg: UIConst.MAINTOWN
        }, {
            questid: t,
            t: "getAward"
        }];
        return i
    }, t.prototype.GETMENHUOYUE = function (t, e) {
        var i = [{
            t: "openui",
            questid: t,
            arg: UIConst.MAINTOWN,
            guideMainMenu: !0
        }, {
            t: "openui",
            questid: t,
            arg: UIConst.MENPAI,
            guideMainMenu: !0
        }, {
            t: "openPage",
            questid: t,
            arg: [UIConst.MENPAI, 0],
            textid: 381
        }, {
            t: "openMenPaiHuoYue",
            questid: t,
            textid: 382
        }, {
            t: "openPage",
            questid: t,
            arg: [UIConst.MPHUOYUEPAGE, 1],
            textid: 383
        }, {
            t: "guideGetMPHY",
            questid: t,
            textid: 384
        }, {
            t: "closeui",
            arg: UIConst.MPHUOYUEPAGE,
            textid: 385
        }, {
            t: "closeui",
            arg: UIConst.MENPAI,
            textid: 386
        }, {
            t: "closeui",
            arg: UIConst.MAINTOWN,
            textid: 387
        }, {
            questid: t,
            t: "getAward",
            textid: 388
        }];
        return i
    }, t.prototype.GETGKAWARD0 = function (t, e) {
        var i = [{
            t: "newHandGoToMap",
            questid: t
        }, {
            t: "guideGetGKAwd",
            questid: t
        }, {
            questid: t,
            t: "getAward"
        }];
        return i
    }, t.prototype.GETGKAWARD = function (t, e) {
        var i = [{
            t: "newHandGoToMap",
            questid: t,
            textid: 152
        }, {
            t: "guideGetGKAwd",
            questid: t,
            textid: 153
        }, {
            questid: t,
            t: "getAward",
            textid: 154
        }];
        return i
    }, t.prototype.CAILIAOFUBEN = function (t, e) {
        var i = parseInt(e[1]),
            o = [{
                t: "closeui",
                textid: 704,
                arg: UIConst.FULIDATING,
                questid: t
            }, {
                t: "openui",
                arg: UIConst.MAINTOWN,
                questid: t,
                guideMainMenu: !0,
                textid: 191
            }, {
                t: "openui",
                arg: UIConst.SHILIAN,
                questid: t,
                guideMainMenu: !0,
                textid: 192
            }, {
                t: "guideClickSLPage",
                arg: CFG_COMMOND.CAILIAOFB,
                questid: t,
                t2: "openui",
                arg2: UIConst.VCLFB,
                textid: 193
            }, {
                t: "guideCLFBTZ",
                arg: i,
                questid: t,
                textid: 194
            }, {
                t: "closeui",
                arg: UIConst.VCLFB,
                textid: 195
            }, {
                t: "closeui",
                arg: UIConst.MAINTOWN,
                textid: 195
            }, {
                questid: t,
                t: "getAward",
                textid: 196
            }];
        return o
    }, t.prototype.TZBOSS = function (t, e) {
        var i = parseInt(e[1]),
            o = parseInt(e[2]),
            n = [{
                t: "openui",
                questid: t,
                arg: UIConst.BOSSPAGE,
                textid: 331
            }, {
                t: "openPage",
                questid: t,
                arg: [UIConst.BOSSPAGE, i]
            }, {
                t: "guideTZPerBoss",
                questid: t,
                arg: o,
                textid: 332
            }, {
                t: "closeui",
                arg: UIConst.BOSSPAGE,
                textid: 333
            }, {
                t: "closeui",
                arg: UIConst.MAINTOWN,
                textid: 333
            }, {
                questid: t,
                t: "getAward",
                textid: 334
            }];
        return n
    }, t.prototype.ZTFS0 = function (t, e) {
        var i = [{
            t: "openui",
            arg: UIConst.MAINTOWN,
            questid: t,
            guideMainMenu: !0,
            t2: "openui",
            arg2: UIConst.UIID_ZTFSPAGE
        }, {
            t: "openui",
            arg: UIConst.SHILIAN,
            questid: t,
            guideMainMenu: !0,
            t2: "openui",
            arg2: UIConst.UIID_ZTFSPAGE
        }, {
            t: "guideClickSLPage",
            arg: CFG_COMMOND.ZTFS,
            questid: t,
            t2: "openui",
            arg2: UIConst.UIID_ZTFSPAGE
        }, {
            t: "openui",
            questid: t,
            arg: UIConst.UIID_ZTFSPAGE
        }, {
            t: "openPage",
            questid: t,
            arg: [UIConst.UIID_ZTFSPAGE, 0]
        }, {
            t: "ztfsToTopLv",
            questid: t
        }, {
            t: "guideZTFSTZ",
            questid: t
        }, {
            t: "closeui",
            arg: UIConst.UIID_ZTFSPAGE
        }, {
            t: "closeui",
            arg: UIConst.MAINTOWN
        }, {
            questid: t,
            t: "getAward"
        }];
        return i
    }, t.prototype.ZTFS = function (t, e) {
        var i = [{
            t: "openui",
            arg: UIConst.MAINTOWN,
            questid: t,
            guideMainMenu: !0,
            t2: "openui",
            arg2: UIConst.UIID_ZTFSPAGE,
            textid: 291
        }, {
            t: "openui",
            arg: UIConst.SHILIAN,
            questid: t,
            guideMainMenu: !0,
            t2: "openui",
            arg2: UIConst.UIID_ZTFSPAGE,
            textid: 292
        }, {
            t: "guideClickSLPage",
            arg: CFG_COMMOND.ZTFS,
            questid: t,
            t2: "openui",
            arg2: UIConst.UIID_ZTFSPAGE,
            textid: 293
        }, {
            t: "openui",
            questid: t,
            arg: UIConst.UIID_ZTFSPAGE
        }, {
            t: "openPage",
            questid: t,
            arg: [UIConst.UIID_ZTFSPAGE, 0]
        }, {
            t: "ztfsToTopLv",
            questid: t
        }, {
            t: "guideZTFSTZ",
            questid: t,
            textid: 294
        }, {
            t: "closeui",
            arg: UIConst.UIID_ZTFSPAGE,
            textid: 295
        }, {
            t: "closeui",
            arg: UIConst.MAINTOWN,
            textid: 295
        }, {
            questid: t,
            t: "getAward",
            textid: 296
        }];
        return i
    }, t.prototype.GETDAILY100AWD = function (t, e) {
        var i = [{
            t: "openui",
            arg: UIConst.DALIY,
            questid: t,
            textid: 341
        }, {
            t: "openPage",
            arg: [UIConst.DALIY, 2],
            questid: t
        }, {
            t: "get100Awd",
            questid: t,
            textid: 345
        }, {
            t: "closeui",
            arg: UIConst.DALIY,
            textid: 346
        }, {
            questid: t,
            t: "getAward",
            textid: 347
        }];
        return i
    }, t.prototype.YAOSHOULL = function (t, e) {
        var i = [{
            t: "openui",
            arg: UIConst.TARGET,
            questid: t,
            xiuxianid: 1002
        }, {
            t: "clickXiuXianItem",
            questid: t,
            xiuxianid: 1002,
            arg: 1002,
            t2: "openui",
            arg2: UIConst.DALIY
        }, {
            t: "openPage",
            arg: [UIConst.DALIY, 0],
            questid: t,
            xiuxianid: 1002
        }, {
            t: "openYSPnl",
            questid: t,
            xiuxianid: 1002,
            cantprev: 1
        }, {
            t: "attackYS",
            questid: t,
            xiuxianid: 1002,
            t2: "isFinishTarget",
            arg2: 1002,
            cantprev: 1
        }, {
            t: "closeui",
            arg: UIConst.YAOSHOU
        }];
        return i
    }, t.prototype.ENABLEVIP = function () {
        var t = [{
            t: "vipEnable1",
            cantprev: 1
        }];
        return t
    }, t.prototype.SCAWARD = function () {
        var t = [{
            t: "scaward1",
            cantprev: 1
        }, {
            t: "scaward2",
            cantprev: 1
        }, {
            t: "scaward3",
            cantprev: 1
        }];
        return t
    }, t.prototype.JUMPBATTLE = function () {
        var t = [{
            t: "waitBattleEnd",
            cantprev: 1
        }];
        return t
    }, t.prototype.TASTEVIP = function () {
        var t = [{
            t: "clicktastevip",
            cantprev: 1
        }];
        return t
    }, t.prototype.ZMGUIDE = function () {
        var t = [{
            t: "zmguide1",
            cantprev: 1
        }, {
            t: "zmguide2",
            cantprev: 1
        }];
        return t
    }, t.prototype.GETLVGIFT = function (t, e) {
        var i = [{
            t: "openui",
            textid: 701,
            questid: t,
            arg: UIConst.MAINTOWN,
            guideMainMenu: !0
        }, {
            t: "openui",
            textid: 702,
            questid: t,
            arg: UIConst.FULIDATING,
            guideMainMenu: !0
        }, {
            t: "openPage",
            questid: t,
            arg: [UIConst.FULIDATING, UIConst.LEVELGIFT]
        }, {
            t: "getLevelGift",
            textid: 703,
            questid: t
        }, {
            t: "closeui",
            textid: 704,
            arg: UIConst.FULIDATING
        }, {
            t: "closeui",
            textid: 705,
            arg: UIConst.MAINTOWN
        }];
        return i
    }, t.prototype.createQueue = function (t) {
        var e = new Guide;
        return e.fill(t), e
    }, t.prototype.createZhiXianQueue = function (t) {
        var e = new Guide;
        return e.fill(t), e.exitCallBack = Handler.create(this, this.onZhiXianEnd), e
    }, t.prototype.setZhiXianQueueByName = function (e) {
        var i = t.getIns(),
            o = i.createZhiXianQueue(i.getGuide(e));
        this._zxGuide = o
    }, t.prototype.onMainGuideExit = function () {
        this._mainGuide = null, this.end(), this.releaseArrow()
    }, t.prototype.onZhiXianEnd = function () {
        this._zxGuide = null, this.end(), this._mainGuide ? this._mainGuide.reEnter() : this.releaseArrow()
    }, t.fwBossPass = !1, t.fwBtnClick = !1, t.FWEXPFBFlag = !1, t.dailyMonsterPass = !1, t
}();
__reflect(GuideMgr.prototype, "GuideMgr");
var Guide = function () {
    function t() {
        this.curIndex = -1, this.proprity = 0
    }
    return t.prototype.reEnter = function () {
        var t = this.steps[this.curIndex];
        t && t.enter(t, this)
    }, t.prototype.fill = function (t) {
        for (var e = this, i = 0, o = t.length; o > i; i++) {
            var n = t[i];
            n.enter = e[n.t + "_enter"], n.check = e[n.t + "_check"], n.exit = e[n.t + "_exit"], n.frame = e[n.t + "_frame"], n.t2 && (n.check2 = e[n.t2 + "_check"])
        }
        e.steps = t
    }, t.prototype.openui_enter = function (t) {
        if (t.auto) GameGlobal.layerMgr.open(t.arg, t.a);
        else {
            var e = t.arg,
                i = (GameGlobal.layerMgr.getView(e), UIConst);
            if (t.guideMainMenu && (e == i.ROLEPNL || e == i.CAST || e == i.HUOBANPAGE || e == i.PET || e == i.MAINTOWN)) {
                var o = GameGlobal.layerMgr.getView(i.MAINMENU);
                return void(o && o.guideOpenBtn(e))
            }
            if (t.guideMainMenu && (e == i.BOSSPAGE || e == i.SHILIAN || e == i.MENPAI || e == i.FULIDATING)) {
                var n = GameGlobal.layerMgr.getView(i.MAINTOWN);
                return void(n && n.guideClick(e))
            }
            var a = GameGlobal.layerMgr.getView(UIConst.QUEST);
            a && a.guide()
        }
    }, t.prototype.openui_check = function (t) {
        var e = GameGlobal.layerMgr.isOpenView(t.arg);
        return e || "openui" == t.t2 && (e = GameGlobal.layerMgr.isOpenView(t.arg2)), e
    }, t.prototype.openui_frame = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.QUEST);
        e && e.guide()
    }, t.prototype.openui_exit = function (t) {
        t.auto
    }, t.prototype.closeui_enter = function (t) {
        if (t.arg == UIConst.MAINTOWN) {
            var e = GameGlobal.layerMgr.getView(UIConst.MAINMENU);
            e && e.guideOpenBtn(0)
        } else {
            var i = GameGlobal.layerMgr.getView(t.arg);
            i && i.guideClose && i.guideClose()
        }
    }, t.prototype.closeui_check = function (t) {
        var e = !GameGlobal.layerMgr.isOpenView(t.arg);
        return e
    }, t.prototype.returnMainScene_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.MAINMENU);
        e && e.guideOpenBtn(0)
    }, t.prototype.returnMainScene_check = function (t) {
        var e = GameGlobal.layerMgr.hasTypeView(1);
        return !e
    }, t.prototype.getAward_check = function (t) {
        var e = t.questid;
        if (e) {
            var i = GameGlobal.modelQuest.getQuestState(e);
            if (-1 == i) return !0
        }
        return !1
    }, t.prototype.getAward_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.QUEST);
        e && e.guide()
    }, t.prototype.getAward_frame = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.QUEST);
        e && e.guide()
    }, t.prototype.openPage_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(t.arg[0]);
        e && e.guidePage && e.guidePage(t.arg[1])
    }, t.prototype.openPage_check = function (t) {
        var e = GameGlobal.layerMgr.getView(t.arg[0]);
        return e && e.checkPage(t.arg[1]) ? !0 : !1
    }, t.prototype.openSkillQ_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.ROLESKILL);
        e && e.guideOpenSkillQ()
    }, t.prototype.openSkillQ_check = function (t) {
        return GameGlobal.layerMgr.isOpenView(UIConst.SKILLSETTING)
    }, t.prototype.skillQ_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.SKILLSETTING);
        e && e.guide(t)
    }, t.prototype.skillQ_check = function (t) {
        var e = GameGlobal.modelRole.voMine.mainRole.skillList,
            i = 0 == e[1].order;
        return 1 == i && GameGlobal.modelQuest.setCurQuestComplete(), i
    }, t.prototype.closeuiNow_check = function (t) {
        if (t.arg && t.arg.length)
            for (var e = 0; e < t.arg.length; e++) GameGlobal.layerMgr.close(t.arg[e]);
        return !0
    }, t.prototype.EquipRL_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.EQUIPRL);
        e && e.guide()
    }, t.prototype.guideSkill_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.ROLESKILL);
        e && e.guideUpgrade()
    }, t.prototype.guideQH_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.UIID_CHILDDUANZAO);
        e.guideQH()
    }, t.prototype.learnSkill2_check = function (t, e) {
        for (var i = GameGlobal.modelRole.voMine.mainRole.skillList, o = 0, n = i.length; n > o; o++)
            if (1 == i[o].idx && i[o].level > 0) return !0;
        return !1
    }, t.prototype.learnSkill2_enter = function (t, e) {
        var i = GameGlobal.layerMgr.getView(UIConst.ROLESKILL);
        i && i.guideUpgrade()
    }, t.prototype.guideJL_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.UIID_CHILDDUANZAO);
        e.guideJL()
    }, t.prototype.guideBS_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.UIID_CHILDDUANZAO);
        e.guideBS()
    }, t.prototype.waitCanBoss_enter = function (t) {
        QuestGuideArrow.hide("guanqiaboss")
    }, t.prototype.waitCanBoss_check = function () {
        var t = GameGlobal.modelGuanqia,
            e = CFG_GuanQia.LIB[t.guanqia].en,
            i = GameGlobal.modelGuanqia.wave >= e;
        return i
    }, t.prototype.waitCanBoss_exit = function (t) {
        QuestGuideArrow.show("guanqiaboss")
    }, t.prototype.guideTG_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.GUANQIABOSS);
        e.guideTG()
    }, t.prototype.guideEquip_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.ROLEPNLEQUIP);
        e.guideDress()
    }, t.prototype.selectPet_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.PET);
        e.guideSelPet(t.arg)
    }, t.prototype.selectPet_check = function (t) {
        var e = GameGlobal.modelPet;
        if (e.curPetVo)
            if (0 == t.arg) var i = e.curPetVo.fightPos > 0;
            else i = t.arg < 100 ? e.curPetVo == e.getEOrCEBestPetVo(t.arg) : e.curPetVo.basecfg.id == t.arg;
        return i
    }, t.prototype.enablePet_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.PETPAGE);
        e.guideEnable()
    }, t.prototype.enablePet_check = function (t) {
        var e = GameGlobal.modelPet.getEOrCEBestPetVo(3);
        return e ? e.isEnable : !1
    }, t.prototype.openPetSZ_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.PETPAGE);
        e.guideOpenSZ()
    }, t.prototype.openPetSZ_check = function (t) {
        var e = GameGlobal.layerMgr.isOpenView(UIConst.PETSHANGZHEN);
        return e
    }, t.prototype.joinPet_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.PETSHANGZHEN);
        e.guideJoin()
    }, t.prototype.joinPet_check = function (t) {
        var e = GameGlobal.modelPet.getEOrCEBestPetVo(3);
        return e ? e.fightPos > 0 : !1
    }, t.prototype.openPetLvUp_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.PETPAGE);
        e && e.guideOpenLV()
    }, t.prototype.openPetLvUp_check = function (t) {
        var e = GameGlobal.layerMgr.isOpenView(UIConst.PETLEVEL);
        return e
    }, t.prototype.petLvUp_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.PETLEVEL);
        e && e.guideLvUp()
    }, t.prototype.petLvUp_check = function (t) {
        t.arg, GameGlobal.modelPet.getEOrCEBestPetVo(3);
        return !1
    }, t.prototype.selectHB_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        e && e.guideSelHB(t.arg)
    }, t.prototype.selectHB_check = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        return e ? e.isSelHB(t.arg) : !1
    }, t.prototype.selectHB_exit = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        e && e.exitGuideselHB()
    }, t.prototype.enableHB_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        e && e.guideEnable(t.arg)
    }, t.prototype.enableHB_check = function (t) {
        var e = VoHuoban.findHB(t.arg);
        return e && e.state > 1
    }, t.prototype.openHBZF_enter = function (t) {
        if (GameGlobal.layerMgr.isOpenView(VHuobanPage.CHILD_HUOBAN)) {
            var e = GameGlobal.layerMgr.getView(VHuobanPage.CHILD_HUOBAN);
            e && e.guideOpenZF()
        }
    }, t.prototype.openHBZF_check = function (t) {
        var e = GameGlobal.layerMgr.isOpenView(VHBOnbattle.UIID_HBONBATTLE);
        return e
    }, t.prototype.joinHB_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(VHBOnbattle.UIID_HBONBATTLE);
        e && e.guideCZ()
    }, t.prototype.joinHB_check = function (t) {
        var e = VoHuoban.findHB(t.arg);
        return e && 2 == e.state
    }, t.prototype.HBZBSJ_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        e && e.guideHBZBSJ()
    }, t.prototype.SELHBEQ_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(VHuobanPage.CHILD_HBEQSJ);
        e && e.guideSelEq(t.arg)
    }, t.prototype.SELHBEQ_check = function (t) {
        if (GuideMgr.getIns().HADSAVEHBATTR[t.arg] >= 1) return !0;
        var e = GameGlobal.layerMgr.getView(VHuobanPage.CHILD_HBEQSJ);
        return e ? e.isSelEq(t.arg) : !1
    }, t.prototype.HBZBXL_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        e && e.guideHBZBXL()
    }, t.prototype.HBZBXL_check = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        if (e && e) {
            var i = e._selHuoban;
            if (i && i.hasXLAtt()) return !0;
            e.guideHBZBXL()
        }
    }, t.prototype.HBZBXLSAVE_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        e && e.guideHBZBXLSAVE()
    }, t.prototype.HBZBXLSAVE_check = function (t) {
        var e = VoHuoban.findHB(t.arg);
        return !e.hasXLAtt()
    }, t.prototype.CURHBZBXL_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        e && e.guideHBZBXL()
    }, t.prototype.CURHBZBXL_check = function (t) {
        if (GuideMgr.getIns().HADSAVEHBATTR[t.arg] >= 1) return !0;
        var e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        if (e && e) {
            var i = e._selHuoban;
            if (i && i.hasXLAtt()) return GuideMgr.getIns().HADSAVEHBATTR[t.arg] = 1, !0;
            e.guideHBZBXL()
        }
    }, t.prototype.CURHBZBXLSAVE_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        e && e.guideHBZBXLSAVE()
    }, t.prototype.CURHBZBXLSAVE_check = function (t) {
        if (GuideMgr.getIns().HADSAVEHBATTR[t.arg] >= 2) return !0;
        var e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        if (e && e) {
            var i = e._selHuoban;
            if (i && !i.hasXLAtt()) return GuideMgr.getIns().HADSAVEHBATTR[t.arg] = 2, !0;
            e.guideHBZBXLSAVE()
        }
    }, t.prototype.openPY_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.ROLEPNLEQUIP);
        e && e.guideOpenPY(t.arg)
    }, t.prototype.openPY_check = function (t) {
        return GameGlobal.layerMgr.isOpenView(UIConst.UIID_PEIYANG)
    }, t.prototype.guidePY_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.UIID_CHILDPEIYANG);
        e && e.guidePY()
    }, t.prototype.guidePY_exit = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.UIID_CHILDPEIYANG);
        e && e.exitGuidePY()
    }, t.prototype.toChatChannel_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.BOTTOM2);
        e && e.guideChannel(t.arg)
    }, t.prototype.toChatChannel_check = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.BOTTOM2);
        if (e) var i = e.curTab == t.arg;
        return i
    }, t.prototype.sendWord_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.BOTTOM2),
            i = [];
        if (e) {
            var o = CFG_gbxs_603.LIB;
            for (var n in o) {
                var a = o[n];
                0 == a.type && i.push(a.content)
            }
            var s = i[Math.random() * i.length >> 0];
            EventCenter.sendMsg(ChatEvent.CHOOSE_WORD, s), e.guideSend()
        }
    }, t.prototype.newHandGoToMap_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.GUANQIASCENE);
        e && e.guideNewMap()
    }, t.prototype.newHandGoToMap_check = function (t) {
        var e = GameGlobal.layerMgr.isOpenView(UIConst.WORLDMAP) || GameGlobal.layerMgr.isOpenView(UIConst.GKCHAPTER);
        return e
    }, t.prototype.guideGetGKAwd_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.GKCHAPTER);
        e && QuestGuideArrow.getIns().guideViewCenter(e.btnOK)
    }, t.prototype.guideToMap_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.WORLDMAP);
        e && e.guideTo(t.arg)
    }, t.prototype.openWorldPrompt_check = function (t) {
        var e = GameGlobal.layerMgr.isOpenView(UIConst.WORLDMAPPROMPT);
        if (e) {
            var i = GameGlobal.layerMgr.getView(UIConst.WORLDMAPPROMPT);
            return i.arg.id == t.arg
        }
        return !1
    }, t.prototype.guideToMapOK_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.WORLDMAPPROMPT);
        e && e.guideOK()
    }, t.prototype.openShiLian_enter = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.QUEST);
        t && t.guide()
    }, t.prototype.openShiLian_check = function () {
        var t = GameGlobal.layerMgr.isOpenView(UIConst.SHILIAN);
        return t
    }, t.prototype.openShiLian_SYT_enter = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.QUEST);
        t && t.guide()
    }, t.prototype.openShiLian_SYT_check = function () {
        var t = GameGlobal.layerMgr.isOpenView(UIConst.VSYT);
        return t || (t = GameGlobal.layerMgr.isOpenView(UIConst.SHILIAN)), t
    }, t.prototype.openSYT_enter = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.SHILIAN);
        t && t.guideOpenType(CFG_COMMOND.SUOYAOTA)
    }, t.prototype.openSYT_check = function () {
        return GameGlobal.layerMgr.isOpenView(UIConst.VSYT)
    }, t.prototype.sytChallenge_enter = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.SYTPAGE);
        t && t.guide()
    }, t.prototype.guideClickSLPage_enter = function (t) {
        var e = t.arg,
            i = GameGlobal.layerMgr.getView(UIConst.SHILIAN);
        i && i.guideOpenType(e)
    }, t.prototype.gkAuto_enter = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.GUANQIASCENE);
        t && (GameGlobal.modelGuanqia.setAutoBoss(!1), t.guideAuto())
    }, t.prototype.gkAuto_check = function () {
        var t = GameGlobal.modelGuanqia.autoboss;
        return t
    }, t.prototype.petXiSui_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.PETGROWUP);
        e && e.guideXiSui()
    }, t.prototype.petXiSui_check = function (t, e) {
        return GameGlobal.modelPet.curPetVo.xilian
    }, t.prototype.savePetXiSui_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.PETGROWUP);
        e && e.guideSave()
    }, t.prototype.savePetXiSui_check = function (t, e) {
        var i = GameGlobal.modelPet.curPetVo;
        return i ? !i.xilian : !1
    }, t.prototype.openPetSkllLearn_enter = function (t, e) {
        var i = GameGlobal.layerMgr.getView(UIConst.PETSKILL);
        i && i.guideOpenLearn()
    }, t.prototype.openPetSkllLearn_check = function (t, e) {
        return GameGlobal.layerMgr.isOpenView(UIConst.PETSKILLLEARN)
    }, t.prototype.selPetSkill_check = function (t, e) {
        return !1
    }, t.prototype.selPetSkillOnUI_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.PETSKILLLEARN);
        e && e.guideSel()
    }, t.prototype.selPetSkillOnUI_check = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.PETSKILLLEARN);
        return e ? e.isSeling() : void 0
    }, t.prototype.selPetSkillOK_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.PETSKILLLEARN);
        e && e.guideSelOK()
    }, t.prototype.learnPetSkill_enter = function (t, e) {
        var i = GameGlobal.layerMgr.getView(UIConst.PETSKILL);
        i && i.guideLearn()
    }, t.prototype.guideChouKa_enter = function (t, e) {
        var i = GameGlobal.layerMgr.getView(UIConst.CHOUKA);
        i && i.guideChouKa()
    }, t.prototype.wait_enter = function (t) {
        var e = t.arg ? t.arg : 1;
        egret.setTimeout(function () {
            t.lock--
        }, this, e), t.lock ? t.lock++ : t.lock = 1
    }, t.prototype.wait_check = function (t) {
        return !t.lock
    }, t.prototype.challengeFWBoss_enter = function (e) {
        var i = GameGlobal.layerMgr.getView(UIConst.BOSSPAGE);
        i && i.guideFW(), GameGlobal.modelBattle.on(ModelBattle.MSG_BATTLE_BEGIN, t.onFWBossBegin, t)
    }, t.prototype.challengeFWBoss_check = function () {
        return GuideMgr.fwBossPass
    }, t.prototype.challengeFWBoss_exit = function (e) {
        GameGlobal.modelBattle.off(ModelBattle.MSG_BATTLE_BEGIN, t.onFWBossBegin)
    }, t.onFWBossBegin = function () {
        var t = GameGlobal.modelBattle.curBattleType;
        t == ModelBattle.BT_FWBOSS && (GuideMgr.fwBossPass = !0)
    }, t.prototype.guideDressFW_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
        e && e.guideDressFW()
    }, t.prototype.guideDressFW_check = function () {
        return GuideMgr.fwBtnClick
    }, t.prototype.guideDressFW_exit = function () {
        QuestGuideArrow.getIns().hide()
    }, t.prototype.guideCLFBTZ_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.VCLFB);
        e && e.guide(t.arg)
    }, t.prototype.guideCLFBTZ_exit = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.VCLFB);
        t && t.exitGuide()
    }, t.prototype.openTitile_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.ROLEPNLEQUIP);
        e.guideOpenTitle()
    }, t.prototype.openTitile_check = function (t) {
        var e = GameGlobal.layerMgr.isOpenView(UIConst.TITLEFASH);
        return e
    }, t.prototype.enableTitle_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.TITLE);
        e && e.guideEnable(t.arg)
    }, t.prototype.joinmp_check = function (t) {
        return !1
    }, t.prototype.guideTZPerBoss_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.BOSSPAGE);
        e && e.guidePerson(t.arg)
    }, t.prototype.guideTZPerBoss_exit = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.BOSSPAGE);
        e && e.exitGuidePersion()
    }, t.prototype.guideShangXiang_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.MPSHANGXIANG);
        e && e.guideSX()
    }, t.prototype.openMenPaiHuoYue_check = function (t) {
        var e = GameGlobal.layerMgr.isOpenView(UIConst.MPHUOYUEPAGE);
        return e
    }, t.prototype.openMenPaiHuoYue_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.MPDATING);
        e && e.guideOpenHuoYue()
    }, t.prototype.guideGetMPHY_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.MPHUOYUEDAY);
        e && e.guideGet()
    }, t.prototype.ztfsToTopLv_check = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.UIID_VIEWZTFS);
        return t ? t.checkCurIsTopLV() : void 0
    }, t.prototype.ztfsToTopLv_enter = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.UIID_VIEWZTFS);
        t && t.guideTopLV()
    }, t.prototype.guideZTFSTZ_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.UIID_VIEWZTFS);
        e && e.guideTZ()
    }, t.prototype.openYSPnl_check = function (t) {
        var e = GameGlobal.layerMgr.isOpenView(UIConst.YAOSHOU);
        return e
    }, t.prototype.openYSPnl_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.YAOSHOULL);
        e && e.guideChallenge()
    }, t.prototype.get100Awd_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.MEIRI100);
        e && e.guideGetAwd()
    }, t.prototype.attackYS_enter = function (e) {
        var i = GameGlobal.layerMgr.getView(UIConst.YAOSHOU);
        i && i.guideChallenge(), GameGlobal.modelBattle.on(ModelBattle.MSG_BATTLE_BEGIN, t.onYSBattleBegin, t)
    }, t.prototype.attackYS_check = function (t) {
        return GuideMgr.dailyMonsterPass
    }, t.prototype.attackYS_exit = function (e) {
        GameGlobal.modelBattle.off(ModelBattle.MSG_BATTLE_BEGIN, t.onYSBattleBegin, t)
    }, t.onYSBattleBegin = function () {
        var t = GameGlobal.modelBattle.curBattleType;
        44 == t && (GuideMgr.dailyMonsterPass = !0)
    }, t.prototype.clickXiuXianItem_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.TXIUXIAN);
        e && e.guideClickItem(t.arg)
    }, t.prototype.clickXiuXianItem_check = function (t) {
        if (1002 == t.arg && GameGlobal.layerMgr.isOpenView(UIConst.DALIY)) return !0;
        var e = GameGlobal.layerMgr.getView(UIConst.TXIUXIAN);
        e && e.guideClickItem(t.arg)
    }, t.prototype.isFinishTarget_check = function (t) {
        if (t.arg2) {
            var e = GameGlobal.modelTarget.achieveQuests[t.arg2];
            return e && e.curFinish
        }
    }, t.prototype.vipEnable1_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.TASTEVIPOVERTIME);
        e && e.guide()
    }, t.prototype.vipEnable1_check = function (t) {
        return !GameGlobal.layerMgr.isOpenView(UIConst.TASTEVIPOVERTIME)
    }, t.prototype.scaward1_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.SHOUCHONG);
        e && e.guide()
    }, t.prototype.scaward1_check = function (t) {
        var e = !1,
            i = VoSCAwards.getById(5);
        return i && 3 == i.state && (e = !0, GameGlobal.layerMgr.close(UIConst.SHOUCHONGPAGE), GameGlobal.layerMgr.open(UIConst.USEV3)), e
    }, t.prototype.scaward2_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.USEV3);
        e && e.guide()
    }, t.prototype.scaward2_check = function (t) {
        var e = GameGlobal.layerMgr.isOpenView(UIConst.USEV3);
        if (e) return !1;
        var i = GameGlobal.modelBag.itemMap[1261];
        return !i && GameGlobal.modelRole.voMine.vip >= 3 && GameGlobal.layerMgr.open(UIConst.VIEWVIP, 3), !0
    }, t.prototype.scaward3_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.VIEWVIP);
        e && e.guide()
    }, t.prototype.scaward3_check = function (t) {
        var e = GameGlobal.modelBag.itemMap[1261];
        if (e || GameGlobal.modelRole.voMine.vip < 3) return !0;
        var i = GameGlobal.layerMgr.isOpenView(UIConst.VIEWVIP);
        if (i) {
            var o = VoVip.inst.infos.getByKey(3);
            if (o && 2 == o.status) return !0
        }
        return !1
    }, t.prototype.waitBattleEnd_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.BATTLEEXIT);
        e && e.guideVip()
    }, t.prototype.waitBattleEnd_check = function (t) {
        return !GameGlobal.modelBattle.isInbattle
    }, t.prototype.clicktastevip_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.TASTEVIP);
        e && e.guideVip()
    }, t.prototype.clicktastevip_check = function (t) {
        return !GameGlobal.layerMgr.isOpenView(UIConst.TASTEVIP)
    }, t.prototype.zmguide1_enter = function (t) {
        GameGlobal.layerMgr.close(UIConst.MAINTOWN);
        var e = GameGlobal.layerMgr.getView(UIConst.LEFTUI);
        e && e.guideZM()
    }, t.prototype.zmguide1_check = function (t) {
        return GameGlobal.layerMgr.isOpenView(UIConst.CHOUKA)
    }, t.prototype.zmguide2_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.CHOUKA);
        e && e.guideZM()
    }, t.prototype.zmguide2_check = function (t) {
        return 2 == Modelchouka.oneTen
    }, t.prototype.getLevelGift_enter = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.LEVELGIFT);
        e && e.guideGetAwd()
    }, t.prototype.getLevelGift_check = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.LEVELGIFT);
        return e && e.guideGetAwd(), !1
    }, t
}();
__reflect(Guide.prototype, "Guide");
var ModelQuest = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.questList = [], e
    }
    return __extends(e, t), e.prototype.getCurVo = function () {
        var t = this.questList[0];
        return t
    }, e.prototype.getQuestState = function (t) {
        var e = this.questList[0];
        return e ? e.state : -1
    }, e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1710, this.GC_QUEST, this), e.regHand(1712, this.GC_QUESTRET, this), e.regHand(3900, this.GC3900, this), e.regHand(3902, this.GC3902, this)
    }, e.prototype.GC_QUEST = function (t, i) {
        var o = i.readInt(),
            n = i.readShort(),
            a = i.readByte(),
            s = t.questList[0],
            r = -1;
        s ? s.id == o && (r = s.state) : s = t.questList[0] = VoQuest.create();
        var l = t.questList[0].id;
        if (s.initLib(o), s.progress = n, s.state = a, GameGlobal.modelRole.voMine.level < s.requirelv ? s.state = 0 : t.checkGuide(), l != s.id || r != s.state) {
            if (t.onQStateChange(), 2 == r) var h = CFG_Quest.getPlotAfterActState(l, 3);
            else if (2 == s.state) var h = CFG_Quest.getPlotAfterActState(s.id, 2);
            else 1 == s.state && (h = CFG_Quest.getPlotAfterActState(s.id, 0));
            h && PScriptExecuter.create().playStr(h)
        }
        t.notify(e.MSG_QUESTCHANGE)
    }, e.prototype.onQStateChange = function () {}, e.prototype.checkGuide = function () {
        var t = this.getCurVo();
        if (t) {
            var e = GuideMgr.getIns(),
                i = e.getQuestGuide(t);
            if (i && 1 == t.state) {
                var o = e.createQueue(i);
                GuideMgr.getIns().setMainGuideQueue(o)
            }
            GuideMgr.getIns().checkGuideTarget()
        }
    }, e.prototype.setCurQuestComplete = function () {
        var t = this.questList[0];
        if (t && 2 != t.state) {
            t.state = 2, this.onQStateChange(), this.notify(e.MSG_QUESTCHANGE);
            var i = CFG_Quest.getPlotAfterActState(t.id, 2);
            i && PScriptExecuter.create().playStr(i)
        }
    }, e.prototype.CG_RECIVEQUEST = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1729, e)
    }, e.prototype.CG_FINISHQUEST = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1731, e)
    }, e.prototype.CG_COMMITQUEST = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1711, e)
    }, e.prototype.commitQuest = function () {}, e.prototype.autoMainQuest = function () {
        var t = this.getCurVo();
        t && this.autoQuest(t)
    }, e.prototype.autoQuest = function (t) {
        var e = t.conditions[2],
            i = t.conditions[0];
        if (GameGlobal.mapScene) {
            var o = (GameGlobal.mapScene._curSceneid, GameGlobal.modelRole.voMine.sceneChars[0]);
            if (0 == t.state && t.cfg.anpc) return void o.nearToNPCID(t.cfg.anpc);
            if (2 == t.state && t.cfg.npc && 103 != t.type) return void o.nearToNPCID(t.cfg.npc);
            if (100 == i) o.nearToNPCID(t.cfg.anpc);
            else if (101 == i) {
                var n = t.conditions[1];
                o.nearToNPCID(n)
            } else if (102 == i) {
                if (t.state < 2) {
                    var a = t.conditions[1];
                    o.nearToNPCID(a)
                }
            } else 103 == i ? GameGlobal.mapScene._curSt == SceneCtrl.T_TOWN ? o.nearToNPCID(t.cfg.npc) : GameGlobal.modelQuest.CG_COMMITQUEST(t.id) : 2 == t.state ? GameGlobal.modelQuest.CG_COMMITQUEST(t.id) : 30 == i ? QuestGuideArrow.getIns().centerToTarget() : GameGlobal.layerMgr.open(e, t.conditions[3])
        }
    }, e.prototype.getProgressTxt = function (t) {
        var e = GameGlobal.modelRole.voMine;
        return e.level < t.requirelv ? HtmlUtil.color(Lang.reTxt("{0}级开启", t.requirelv), Color.UIRED_STR) : 1 == t.state ? HtmlUtil.color("(未完成)", Color.UIRED_STR) : 2 == t.state ? 100 == t.type ? HtmlUtil.color("(立刻前往)", Color.UIORANGE_STR) : HtmlUtil.color("(已完成)", Color.UIGREEN_STR) : HtmlUtil.color("(可接取)", Color.UIRED_STR)
    }, e.prototype.GC_QUESTRET = function (t, i) {
        var o = i.readByte();
        i.readInt();
        4 == o && (t.questList.length = 0, t.notify(e.MSG_QUESTCHANGE), GameGlobal.layerMgr.close(UIConst.QUEST))
    }, e.prototype.CG_ATTACKNPC = function (t) {
        if (!this.isFlag(1733)) {
            this.addDelayFlag(1733, 2e3);
            var e = this.getBytes();
            e.writeInt(t), this.sendSocket(1733, e)
        }
    }, e.prototype.checkQuestSt = function (t) {
        var i = this.getCurVo();
        i && 0 == i.state && t >= i.requirelv && (i.state = 1, this.checkGuide(), this.notify(e.MSG_QUESTCHANGE))
    }, e.prototype.getCurQuestSceneID = function () {
        var t = 0;
        return this.questList[0] && (t = this.questList[0].cfg.tm), t
    }, e.prototype.checkShowPreFunc = function (t) {
        var e = CFG_COMMOND.LIB,
            i = this._curPreFuncID,
            o = !1;
        for (var n in e) {
            var a = e[n];
            if (a.ygLv && a.ygLv <= t && a.openlv > t && (o = !0, a.ID != this._curPreFuncID)) {
                this._curPreFuncID = a.ID, GameGlobal.layerMgr.open(UIConst.FUNCPRESCENEUI, a);
                break
            }
        }
        o || this._curPreFuncID && (GameGlobal.layerMgr.close(UIConst.FUNCPRESCENEUI), this._curPreFuncID = null), i != this._curPreFuncID && i && GameGlobal.layerMgr.open(UIConst.FUNCOPEN, i)
    }, e.prototype.finishQuest = function () {
        this.CG_FINISHQUEST(this.getCurVo().id)
    }, e.prototype.GC3900 = function (t, e) {
        for (var i = e.readShort(), o = 0; i > o; o++) {
            var n = e.readByte(),
                a = e.readByte(),
                s = e.readByte();
            console.log(n, a, s);
            var r = Vo_smdl.Map[n];
            r || (r = new Vo_smdl, Vo_smdl.Map[n] = r, r.cfg = CFG_SMDL.LIB[n]), r.id = n, r.dif = !1, r.pro ? r.pro != a && (r.dif = !0) : r.dif = !0, r.pro = a, r.isget = 1 == s
        }
        for (var l in Vo_smdl.Map)
            if (r = Vo_smdl.Map[l], !r.isget) {
                if (GameGlobal.modelRole.voMine.vip >= r.cfg.vip) return r.isvip = !0, void GameGlobal.layerMgr.open(UIConst.SMDL, r.id);
                if (r.pro >= r.cfg.sz) GameGlobal.layerMgr.close(UIConst.HIDEMISSION), GameGlobal.layerMgr.open(UIConst.SMDL, r.id);
                else if (0 == r.pro) {
                    if (r.triggerOpen) {
                        r.triggerOpen = !1, GameGlobal.layerMgr.open(UIConst.SMDL, r.id);
                        var h = 1;
                        GameGlobal.layerMgr.open(UIConst.HIDEMISSION, {
                            id: r.id,
                            ope: h
                        })
                    }
                } else {
                    if (2 == r.cfg.type && !r.dif) return;
                    h = 2, GameGlobal.layerMgr.open(UIConst.HIDEMISSION, {
                        id: r.id,
                        ope: h
                    })
                }
                break
            }
    }, e.prototype.CG3901 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3901, e)
    }, e.prototype.GC3902 = function (t, e) {
        var i = e.readByte();
        1 == i ? GameGlobal.layerMgr.close(UIConst.SMDL) : 2 == i && ViewAlert.show("背包格子已满，是否熔炼装备，腾出背包空间?", function () {
            GameGlobal.layerMgr.open(UIConst.EQUIPRL)
        })
    }, e.MSG_QUESTCHANGE = "change", e.MSG_DLGCOMP = "dlgComp", e.MSG_VIEWCLICK = "MSG_VIEWCLICK", e
}(BaseModel);
__reflect(ModelQuest.prototype, "ModelQuest");
var QuestGuideArrow = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.tweenPro = {}, e.touchChildren = e.touchEnabled = !1, e
    }
    return __extends(e, t), e.getIns = function () {
        return this._ins || (this._ins = new e), this._ins
    }, e.hide = function (t, e) {
        void 0 === e && (e = !1), this.visRestMap[t] || (this.visRestMap[t] = !0, this.visRestLen++, 1 == this.visRestLen && this._ins && (this._ins.visible = !1), e && this.pauseLen++)
    }, e.show = function (t, e) {
        void 0 === e && (e = !1), this.visRestMap[t] && (delete this.visRestMap[t], this.visRestLen--, 0 == this.visRestLen && this._ins && (this._ins.visible = !0), e && this.pauseLen--)
    }, e.prototype.createTextSp = function () {
        this.textSprite || (this.textSprite = new egret.Sprite, this.textBG = new eui.Image, this.textLB = new egret.TextField, this.textLB.$setTextColor(14540083), this.textSprite.addChild(this.textBG), this.textBG.source = "MainScreen_json.guideBG", this.textBG.scale9Grid = new egret.Rectangle(14, 14, 14, 14), this.textSprite.addChild(this.textLB))
    }, e.prototype.guideTo = function (t, i, o, n, a) {
        if (void 0 === n && (n = null), void 0 === a && (a = 0), "" == n ? e.lastGuideText = null : n && (e.lastGuideText = n, e.lastGuideTextPos = a), t) {
            this.effect || (this.effect = EffectMgr.addEff("uieff/guideArrow", this, 0, 0, 800, -1, !0));
            var s = this.localToGlobal(0, 0, MoveUtil.p00);
            s.x && s.y ? (this.x = s.x, this.y = s.y) : (this.x = GameGlobal.stage.stageWidth / 2, this.y = GameGlobal.stage.stageHeight / 2), GameGlobal.gameMain.addChild(this);
            var r = t.localToGlobal(i, o, MoveUtil.p00);
            this.tarx = i, this.tary = o, this.tar = t;
            var l = MoveUtil.distSqrt(r.x, r.y, this.x, this.y);
            this.tweenPro.x = r.x, this.tweenPro.y = r.y, egret.Tween.removeTweens(this), l >= 50 ? egret.Tween.get(this).to(this.tweenPro, .8 * l).call(this.moveComp, this) : egret.Tween.get(this).to(this.tweenPro, .8 * l).call(this.moveComp, this), this.textSprite && this.textSprite.$parent && DisplayUtil.remove(this.textSprite)
        }
    }, e.prototype.guideViewCenter = function (t, i, o) {
        void 0 === i && (i = null), void 0 === o && (o = 1), t && e.getIns().guideTo(t, t.width >> 1, t.height >> 1, i, o)
    }, e.prototype.moveComp = function () {
        if (this.tar && (this.x = this.tarx, this.y = this.tary, DisplayUtil.addBy(this, this.tar), e.lastGuideText)) {
            this.createTextSp(), this.textSprite.$parent || this.addChild(this.textSprite);
            var t = e.lastGuideTextPos;
            this.textLB.$setText(e.lastGuideText);
            var i = this.textLB.textWidth,
                o = this.textLB.textHeight,
                n = i + 40,
                a = o + 30;
            this.textLB.$setX(20), this.textLB.$setY(15), this.textBG.$setWidth(n), this.textBG.$setHeight(a);
            var s, r;
            1 == t ? (s = -n - 10, r = a / 2) : 2 == t ? (s = 50, r = a / 2) : 3 == t ? (s = -n >> 1, r = 1.5 * -a) : (s = -n >> 1, r = .5 * a + 75), this.textSprite.$setX(s), this.textSprite.$setY(r), this.textSprite.$setVisible(!0)
        }
    }, e.prototype.hide = function () {
        this.tar = null, this.$parent && this.$parent.removeChild(this), this.effect && (EffectMgr.getIns().removeEff(this.effect), this.effect = null)
    }, e.prototype.centerToTarget = function (t, e) {
        void 0 === t && (t = null), void 0 === e && (e = null), t && (this.tar = t), this.tar && (this.x = GameGlobal.stage.stageWidth >> 1, this.y = GameGlobal.stage.stageHeight >> 1, GameGlobal.stage.addChild(this), this.guideTo(this.tar, this.tarx, this.tary, e))
    }, e.visRestLen = 0, e.pauseLen = 0, e.visRestMap = {}, e
}(egret.Sprite);
__reflect(QuestGuideArrow.prototype, "QuestGuideArrow");
var VCollectBar = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "CollectBar", e
    }
    return __extends(e, t), e.prototype.initView = function () {}, e.begin = function (t, i, o, n) {
        void 0 === o && (o = null), void 0 === n && (n = null);
        var a = GameGlobal.layerMgr;
        a.dynamicReg(UIConst.COLLECT, e, GameGlobal.layerMgr.UI_Main), a.isOpenView(UIConst.COLLECT) || a.open(UIConst.COLLECT);
        var s = a.getView(UIConst.COLLECT);
        s.begin(t, i, o, n)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.tick.addInterv(this.onTick, 1, this), QuestGuideArrow.hide("collect")
    }, e.prototype.onClose = function () {
        this._complete = this._interrupt = null, GameGlobal.tick.removeInterv(this.onTick, this), egret.Tween.removeTweens(this.imgProg), QuestGuideArrow.show("collect")
    }, e.prototype.onSize = function () {
        var t = GameGlobal.stage;
        this.x = t.stageWidth - this.skin.width >> 1, this.y = t.stageHeight - 460
    }, e.prototype.begin = function (t, e, i, o) {
        this._time = t, this._complete = e, this._interrupt = o, this._keep = i, egret.Tween.removeTweens(this.imgProg), this.imgProg.width = 0, egret.Tween.get(this.imgProg).to({
            width: 346
        }, t).call(this.onComp, this)
    }, e.prototype.onComp = function () {
        this._complete && (this._complete.run(), this._complete.recover(), this._complete = null), this.closeHandler()
    }, e.prototype.onTick = function (t) {
        var e = !1;
        e = t._keep ? t._keep.run() : 0 == GameGlobal.modelRole.voMine.sceneChars[0].move_st, e || (t._interrupt && (t._interrupt.run(), t._interrupt.recover(), t._interrupt = null), t.closeHandler())
    }, e
}(BaseEUIView);
__reflect(VCollectBar.prototype, "VCollectBar");
var VFuncOpenPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.perc = 0, e._remainSec = 5, e.skinName = "resource/eui_skins/game/quest/FuncOpenPnlSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCloseT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        this.sysId = e;
        var o = CFG_COMMOND.LIB[e];
        i._remainSec = 5, i.updateTime(), GameGlobal.tick.addInterv(i.frame, 1, i), GameGlobal.tick.addInterv(i.onTick, 1e3, i), i.lb.text = "开启" + o.name, i.view || (i.view = Part.create(), i.view.scaleX = i.view.scaleY = 1.5, i.contaienr.addChild(i.view)), i.updateViewCFG(o), QuestGuideArrow.hide("openfunc", !0)
    }, e.prototype.onClose = function () {
        this.sysId == CFG_COMMOND.HORSE && QuestGuideArrow.getIns().centerToTarget(), GameGlobal.tick.removeInterv(this.frame), GameGlobal.tick.removeInterv(this.onTick), this.view.dispose(), this.view = null, QuestGuideArrow.show("openfunc", !0)
    }, e.prototype.frame = function (t) {
        t.imgHightLine.rotation += 2, t.perc += .03;
        var e = 3 * Math.sin(t.perc * Math.PI) + 13;
        t.view.y = e
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onTick = function (t) {
        t._remainSec -= 1, t._remainSec > 0 ? t.updateTime() : (t.flyToTar(t.view.val, t.sysId), t.closeHandler())
    }, e.prototype.onCloseT = function () {
        this.flyToTar(this.view.val, this.sysId), this.closeHandler()
    }, e.prototype.updateTime = function () {
        this.btnOK.label = Lang.reTxt("{0}秒后关闭", this._remainSec)
    }, e.prototype.updateViewCFG = function (t) {
        this.view.setVal("xitongkaiqi/open" + t.ID), this.view.setAct("bIcon")
    }, e.prototype.flyToTar = function (t, e) {}, e.prototype.afterToIco = function (t) {
        DisplayUtil.remove(t), t.dispose(), QuestGuideArrow.show("openfunc", !0), QuestGuideArrow.getIns().centerToTarget()
    }, e
}(BaseEUIView);
__reflect(VFuncOpenPnl.prototype, "VFuncOpenPnl");
var VFuncPrePnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.perc = 0, e.skinName = "resource/eui_skins/game/quest/FuncPrePnlSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btn).addCloseListen(this.bg)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        if (i.lbOpen.textFlow = HtmlUtil.parse(Lang.reTxt("开启等级:<font color='0xee3333'>{0}</font>", e.openlv)), i.lbStr.textFlow = HtmlUtil.parse(Lang.reTxt("战力提升:<font color='0x33ee33'>{0}</font>", e.str)), e.award && "0" != e.award) {
            var o = e.award.split(";"),
                n = 600,
                a = 20,
                s = (n - (90 * o.length + a * (o.length - 1))) / 2;
            ConfigHelp.makeStrGrids(e.award, i.gridArr, s, 405, i.cont, !0, a)
        }
        i.view || (i.view = Part.create(), i.view.x = i.cont.width >> 1, i.view.y = 215, i.view.scaleX = i.view.scaleY = 1.5, i.cont.addChild(i.view)), VFuncPreSceneUI.updatePart(i.view, e.ID), GameGlobal.tick.addInterv(i.tick, 1, i)
    }, e.prototype.onClose = function () {
        var t = this;
        t.view.dispose(), t.view = null, GameGlobal.tick.removeInterv(t.tick, t), ConfigHelp.clearGrids(t.gridArr)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.tick = function (t) {
        t.perc += .03;
        var e = 3 * Math.sin(t.perc * Math.PI) + 215;
        t.view.y = e
    }, e
}(BaseEUIView);
__reflect(VFuncPrePnl.prototype, "VFuncPrePnl");
var VFuncPreSceneUI = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.perc = 0, e.skinName = "resource/eui_skins/game/quest/FuncPreSceneSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i);
        var o = this;
        o.arg = i, o.lbLevel.textFlow = HtmlUtil.parse(Lang.reTxt("<font color='#a7fe36'>{0}级</font>开启", i.openlv)), o.view || (o.view = Part.create(), o.view.x = o.skin.width >> 1, o.addChild(o.view), o.view.y = 25), GameGlobal.tick.addInterv(o.interv, 1, o), e.updatePart(o.view, i.ID), e.showHei = o.skin.height, GameGlobal.msgCenter.notify(GameGlobal.MSG_RIGHTLAYOUT)
    }, e.prototype.onClose = function () {
        var t = this;
        egret.Tween.removeTweens(t.view), t.removeChild(t.view), t.view.dispose(), t.view = null, GameGlobal.tick.removeInterv(t.interv, t), e.showHei = 0, GameGlobal.msgCenter.notify(GameGlobal.MSG_RIGHTLAYOUT)
    }, e.prototype.onSize = function () {
        this.x = GameGlobal.stage.stage.stageWidth - this.skin.width, this.y = 280 + platform.deviceTopPX
    }, e.prototype.onT = function () {
        GameGlobal.layerMgr.open(UIConst.FUNCPREPNL, this.arg)
    }, e.updatePart = function (t, e) {
        CFG_COMMOND.LIB[e];
        t.setVal("xitongkaiqi/open" + e), t.setAct(1)
    }, e.prototype.interv = function (t) {
        t.perc += .03;
        var e = 3 * Math.sin(t.perc * Math.PI) + 25;
        t.view.y = e
    }, e.showHei = 0, e
}(BaseEUIView);
__reflect(VFuncPreSceneUI.prototype, "VFuncPreSceneUI");
var ViewQuest = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.tweenArg = {}, e._progPerc = 1, e.skinName = "resource/eui_skins/game/QuestWin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onTouchB, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = GameGlobal.modelQuest,
            o = i.getCurVo();
        return o ? (this.update(), GameGlobal.modelQuest.on(ModelQuest.MSG_QUESTCHANGE, this.update, this), GameGlobal.modelSetting.on(ModelSetting.MSG_GMV, this.update, this), GameGlobal.msgCenter.on(GameGlobal.MSG_CHANGEMAP, this.checkQustSt, this), GameGlobal.modelGuanqia.on(ModelGuanQia.MSG_AUTOBOSS, this.checkQustSt, this), GameGlobal.modelChat.on(Model_Chat.MSG_SENDCHAT, this.onChat, this), this.checkGuide(), void this.checkQustSt()) : void this.closeHandler()
    }, e.prototype.onClose = function () {
        GameGlobal.modelQuest.off(ModelQuest.MSG_QUESTCHANGE, this.update), GameGlobal.modelSetting.off(ModelSetting.MSG_GMV, this.update), GameGlobal.msgCenter.off(GameGlobal.MSG_CHANGEMAP, this.checkQustSt), GameGlobal.modelGuanqia.off(ModelGuanQia.MSG_AUTOBOSS, this.checkQustSt), GameGlobal.modelChat.off(Model_Chat.MSG_SENDCHAT, this.onChat)
    }, e.prototype.onChat = function () {
        var t = GameGlobal.modelQuest,
            e = t.getCurVo();
        e && 24 == e.type && t.setCurQuestComplete()
    }, e.prototype.checkQustSt = function () {
        var t = GameGlobal.modelQuest,
            e = t.getCurVo();
        if (e)
            if (12 == e.type) {
                var i = e.conditions[1],
                    o = GameGlobal.mapScene;
                o._curSceneid >= i && t.setCurQuestComplete()
            } else 28 == e.type && GameGlobal.modelGuanqia.autoboss && t.setCurQuestComplete()
    }, e.prototype.update = function () {
        var t = GameGlobal.modelQuest,
            e = t.getCurVo();
        if (e) {
            this.lb.$setText(e.getChapterText()), this.lbQuestName.$setText(e.getText()), this.lbState.textFlow = HtmlUtil.parse(t.getProgressTxt(e)), this.checkQustSt();
            var i = e.cfg.p - 1;
            this.ico.source = IconUtil.getIconUrl(e.cfg.ico), this.tweenTo(i / e.cfg.tp);
            var o = CFG_Quest.LIBICOPROG[e.id];
            if (o) {
                DisplayUtil.addBy(this.darkMask, this);
                var n = 2 == e.state ? o.p : o.p - 1;
                this.darkMask.height = 64 * (1 - n / o.tp)
            } else DisplayUtil.remove(this.darkMask);
            912 == e.id && 2 == e.state || 1001 == e.id ? this.showBlendEff() : this.hideBlendEff()
        }
    }, e.prototype.tweenTo = function (t) {
        this._progPerc = this._progPerc % 1, t != this._progPerc && (t <= this._progPerc && (t += 1), egret.Tween.removeTweens(this), this.tweenArg.progPerc = t, egret.Tween.get(this).to(this.tweenArg, 600).call(this.tweenComp, this))
    }, Object.defineProperty(e.prototype, "progPerc", {
        get: function () {
            return this._progPerc
        },
        set: function (t) {
            var e = GameGlobal.modelQuest,
                i = (e.getCurVo(), t % 1);
            this.lbProg.$setText((100 * i).toFixed(0) + "%"), this.imgProg.$setWidth(150 * i), this._progPerc = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.tweenComp = function () {
        this._progPerc = this._progPerc % 1
    }, e.prototype.onSize = function () {
        this.y = GameGlobal.stage.stageHeight - 460
    }, e.prototype.onTouchB = function (t) {
        var e = GameGlobal.modelQuest.getCurVo();
        GameGlobal.modelQuest.autoQuest(e), GameGlobal.modelQuest.notify(ModelQuest.MSG_VIEWCLICK)
    }, e.prototype.checkGuide = function () {
        var t = GameGlobal.modelQuest.getCurVo();
        t && t.cfg.g && "0" != t.cfg.g && "null" != t.cfg.g ? this.guide() : t && t.id < 1e3 ? this.guide() : QuestGuideArrow.getIns().tar == this && (QuestGuideArrow.getIns().tar = null)
    }, e.prototype.guide = function () {
        QuestGuideArrow.getIns().guideTo(this, 135, 45, "", 0)
    }, e.prototype.showBlendEff = function () {
        if (!this._blendEff) {
            var t = this._blendEff = EffectMgr.addEff("uieff/btnEff", this, 129, 44, 1e3);
            t.scaleX = 2.2, t.scaleY = 1.8, t.alpha = .5
        }
    }, e.prototype.hideBlendEff = function () {
        this._blendEff && (EffectMgr.getIns().removeEff(this._blendEff), this._blendEff = null)
    }, e
}(BaseEUIView);
__reflect(ViewQuest.prototype, "ViewQuest");
var ViewScreenMask = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isInit = !0, e
    }
    return __extends(e, t), e.prototype.onOpen = function (t) {
        this.tar = t, this._onSize(this)
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        GameGlobal.tick.addInterv(this._onSize, 1, this, !0, null, !0)
    }, e.prototype._onSize = function (t) {
        if (t.tar) {
            var e = t.tar.localToGlobal(0, 0, MoveUtil.getTempPoint(0, 0)),
                i = t.bgSprite;
            null == i && (i = t.bgSprite = new egret.Sprite, t.addChildAt(i, 0));
            var o = GameGlobal.stage;
            i.graphics.clear(), i.graphics.beginFill(0, 1);
            var n = e.y,
                a = e.x;
            n > 0 && i.graphics.drawRect(0, 0, o.$stageWidth, n), a > 0 && i.graphics.drawRect(0, e.y, a, t.tar.$getHeight()), e.x + t.tar.$getWidth() <= o.$stageWidth && i.graphics.drawRect(e.x + t.tar.$getWidth(), e.y, o.$stageWidth - (e.x + t.tar.$getWidth()), t.tar.$getHeight()), e.y + t.tar.$getHeight() <= o.$stageHeight && i.graphics.drawRect(0, e.y + t.tar.$getHeight(), o.$stageWidth, o.$stageHeight - (e.y + t.tar.$getHeight())), i.graphics.endFill(), i.alpha = .7
        }
    }, e.show = function (t) {
        GameGlobal.layerMgr.dynamicReg(UIConst.SCREENMASK, e, GameGlobal.layerMgr.UI_Tips), GameGlobal.layerMgr.open(UIConst.SCREENMASK, t)
    }, e.hide = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.SCREENMASK);
        t && egret.Tween.get(t).to({
            alpha: .1
        }, 600).call(this.onHided, this)
    }, e.onHided = function () {
        GameGlobal.layerMgr.close(UIConst.SCREENMASK)
    }, e
}(BaseEUIView);
__reflect(ViewScreenMask.prototype, "ViewScreenMask");
var VoQuest = function () {
    function t() {}
    return t.create = function () {
        var e = new t;
        return e
    }, t.prototype.initLib = function (t) {
        var e = this.cfg = CFG_Quest.LIB[t];
        this.id != t && (this.id = t, this.conditions = Util.parseIntStr(e.tj)), this.name = e.na, this.requirelv = e.li, this.type = e.lx, this.chapterText = e.tpn
    }, t.prototype.getText = function () {
        return this.name
    }, t.prototype.getChapterText = function () {
        return GameGlobal.modelSetting.isGMOpen ? this.chapterText + "(id=" + this.id + ")" : this.chapterText
    }, t.prototype.isFinish = function () {
        return !1
    }, t
}();
__reflect(VoQuest.prototype, "VoQuest");
var VQuestDLG = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.awardGrid = [], e.skinName = "QuestDLG", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.onBtnClick = function () {}, e.openByNPC = function () {}, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.npcID = e, this.btn.showEff(1.6, 1.45), QuestGuideArrow.hide("qDLG"), this._eff = Part.create(), this._eff.y = 235, this._eff.x = 100, this._eff.scaleX = 1.5, this._eff.scaleY = 1.5, this.grp.addChildAt(this._eff, 2)
    }, e.prototype.onClose = function () {
        GameGlobal.modelQuest.notify(ModelQuest.MSG_DLGCOMP), this.btn.hideEff(), QuestGuideArrow.show("qDLG"), this._eff.setVal(null)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.showInfo = function (t, e, i, o, n) {
        if (1 == n) {
            var a = GameGlobal.modelQuest.getCurVo();
            ConfigHelp.makeStrGrids(a.cfg.dj, this.awardGrid, 260, 130, this.grp, !0, 10, .7)
        } else ConfigHelp.clearGrids(this.awardGrid);
        "0" == i && (i = GameGlobal.modelRole.voMine.name), this.lbName.text = i, t.indexOf("</font>") >= 0 ? this.lbContent.textFlow = HtmlUtil.parse(t) : this.lbContent.text = t, this.btn.visible = !0, this.btn.label = o, 0 == e ? this._eff.setVal("roleHead/" + GameGlobal.modelRole.voMine.job) : this._eff.setVal("roleHead/" + e), this._eff.setAct(1)
    }, e.prototype.onBtnT = function () {
        GameGlobal.modelQuest.getCurVo();
        1 == this.btn.va || 2 == this.btn.va || GameGlobal.modelQuest.notify(ModelQuest.MSG_DLGCOMP)
    }, e
}(BaseEUIView);
__reflect(VQuestDLG.prototype, "VQuestDLG");
var VIosRechargeSys = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "IosRechargeSys", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.base.title = "客服", this.imgCode.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onImgT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.resUrl = e, this.imgCode.source = RES.getRes(e)
    }, e.prototype.onClose = function () {
        RES.destroyRes(this.resUrl), this.resUrl = null
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onImgT = function () {
        window.wx.previewImage({
            urls: [this.resUrl],
            complete: function () {
                this.rechargeing = !1
            }
        })
    }, e
}(BaseEUIView);
__reflect(VIosRechargeSys.prototype, "VIosRechargeSys");
var VRecharge = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.itemData = new eui.ArrayCollection, e.skinName = "RechargeSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.base.title = "充值", this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.itemList.itemRenderer = VRechargeItem, this.itemList.dataProvider = this.itemData, DisplayUtil.popBtnStyle(this.imgVip), this.imgVip.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onVipT, this), GameGlobal.modelPlayer.CG_RECHARGEDOUBLE();
        var t = this.vipText = new ImageText;
        t.makeContainer(), t.container.y = 107, t.setCharFunc(ImageText.CZUIVIP), this.addChild(t.container)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.checkisSC5bei(), GameGlobal.modelVip.on(ModelVIP.msg_data, this.onVip, this), GameGlobal.modelPlayer.on(ModelPlayer.MSG_RECHAREDBL, this.onDbl, this), this.update(), this.updateVip(), QuestGuideArrow.hide("rechargePnl")
    }, e.prototype.update = function () {
        var t = Config.getConfig(recharge_200);
        this.itemData.removeAll();
        for (var e = [], i = platform.isIOS ? 2 : 1, o = t.values, n = o.length; n--;) {
            var a = o[n];
            1 != a.ui && 0 != a.ui || a.sysId != i || e.push(a)
        }
        e.sort(function (t, e) {
            return t.px - e.px
        }), this.itemData.replaceAll(e)
    }, e.prototype.onClose = function () {
        GameGlobal.modelVip.off(ModelVIP.msg_data, this.onVip), GameGlobal.modelPlayer.off(ModelPlayer.MSG_RECHAREDBL, this.onDbl), QuestGuideArrow.show("rechargePnl")
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.onVip = function () {
        this.updateVip()
    }, e.prototype.updateVip = function () {
        var t = VoVip.inst,
            e = VoVip.LIB[t.level],
            i = VoVip.LIB[t.level + 1],
            o = t.exp;
        i ? (this.lbVipExp.text = o + "/" + i.topup, this.pbVip.width = 426 * o / i.topup, this.lbVip.textFlow = HtmlUtil.parse(Lang.reTxt("再充值<font color='#e55711'>{0}</font>元宝可成为<font color='#e55711'>VIP{1}</font>", i.topup - o, t.level + 1))) : (this.lbVipExp.text = o + "/" + e.topup, this.pbVip.width = 426, this.lbVip.textFlow = HtmlUtil.parse(Lang.reTxt("恭喜你的VIP等级已满"))), this.vipText.setText("V" + t.level), this.vipText.container.x = 130 - this.vipText.totalWid
    }, e.prototype.onVipT = function () {
        this.closeHandler(), GameGlobal.layerMgr.open(UIConst.VIEWVIP)
    }, e.prototype.onDbl = function () {
        this.itemData.refresh()
    }, e.prototype.checkisSC5bei = function () {
        ModelMRSC.is5bei || (this.closeHandler(), GameGlobal.layerMgr.open(UIConst.SC5BEI))
    }, e
}(BaseEUIView);
__reflect(VRecharge.prototype, "VRecharge");
var VRechargeItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "RechargeItem", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.textMain = new ImageText, this.textMain.makeContainer(), this.textMain.setCharFunc(ImageText.RECHARGEFUN), this.addChild(this.textMain.container), this.textMain.container.y = 10
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.textMain.setText(t.yb + "Y"), this.textMain.container.x = (this.skin.width - this.textMain.totalWid) / 2, this.btn.label = t.money + "元", this.ico.source = "recharge_json." + t.ico, 0 == t.ui ? this.updateC() : this.updateM()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateC = function () {
        this.bgDbl.visible = !0, this.imgSt.visible = !0, this.lbDbl.text = Lang.reTxt(this._data.des), this.imgSt.source = "recharge_json.th"
    }, e.prototype.updateM = function () {
        var t = this._data,
            e = GameGlobal.modelPlayer.recharegDoubles[t.id];
        1 == e ? (this.bgDbl.visible = !0, this.imgSt.visible = !0, this.imgSt.source = "recharge_json.sc", this.lbDbl.text = Lang.reTxt("首冲加送{0}元宝", t.yb)) : (this.bgDbl.visible = !1, this.imgSt.visible = !1, this.lbDbl.text = "")
    }, e.prototype.onBtnT = function () {
        var t = this._data;
        platform.recharge(t.id)
    }, e
}(eui.Component);
__reflect(VRechargeItem.prototype, "VRechargeItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var ModelRole = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.voMine = new VoPlayer, e.rolePnlIndex = 0, e.eqDts = {}, e.oldStr = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(110, i.onPlayerDetail, i), e.regHand(112, i.GC112, i), e.regHand(120, i.GC120, i), e.regHand(350, i.GC350, i), e.regHand(352, i.GC352, i), e.regHand(354, i.GC354, i), e.regHand(364, i.GC364, i), e.regHand(366, i.GC366, i), e.regHand(368, i.GC368, i), e.regHand(144, i.GC_CHANGENAME, i)
    }, e.prototype.GC120 = function (t, i) {
        var o = i.readUTF(),
            n = JSON.parse(o),
            a = GameGlobal.modelRole.voMine;
        for (var s in n) {
            var r = n[s];
            switch (s) {
                case "str":
                    ReportToWan.reportCE(a.str, r), a.str = r, t.checkStrup(a.str);
                    break;
                case "exp":
                    a.exp = r;
                    break;
                case "lv":
                    var l = !1;
                    r != a.level && (GameGlobal.modelcommod.checkLv(r), EffectMgr.addEff("uieff/levelup", GameGlobal.layerMgr.UI_Message, GameGlobal.stage.stageWidth / 2, GameGlobal.stage.stageHeight / 2 - 150, 1e3, 1e3), MyPlatform.getIns().uploadLevelUp(r), GameGlobal.modelQuest.checkQuestSt(r), GameGlobal.modelQuest.checkShowPreFunc(r), l = !0, ReportToWan.reportUpdateLevel());
                    var h = CFG_COMMOND.LIB[1041].openlv;
                    if (r >= h && GameGlobal.modelRole.voMine.level < h) {
                        var c = GuideMgr.getIns().getGuide("ZMGUIDE");
                        if (c) {
                            var p = GuideMgr.getIns().createQueue(c);
                            GuideMgr.getIns().setMainGuideQueue(p)
                        }
                    }
                    if (a.level = r, 65 == r) {
                        var c = GuideMgr.getIns().getGuide("FWGUIDE");
                        if (c) {
                            var p = GuideMgr.getIns().createQueue(c);
                            GuideMgr.getIns().setMainGuideQueue(p)
                        }
                    }
                    l && t.notify(e.MSG_LEVEL);
                    break;
                case "yl":
                    a.yinliang = r;
                    break;
                case "byb":
                    a.bYuanbao = r;
                    break;
                case "yb":
                    a.yuanbao = r;
                    break;
                case "respect":
                    a.prestige = r;
                    break;
                case "vip":
                    a.vip = r, VoVip.inst.level = r;
                    break;
                case "xyz":
                    a.xiayi = r;
                case "hpmax":
                    a.mainRole.hpmax = r;
                    break;
                case "sbId":
                    a.setShenBing(r);
                    break;
                case "rideId":
                    a.setHorse(r);
                    break;
                case "mpgx":
                    VoMember.mineGX = r;
                    break;
                case "wingId":
                    a.setWing(r);
                    break;
                case "guangHuanId":
                    a.setHalo(r);
                    break;
                case "shouLingId":
                    a.setFollowPetSL(r);
                    break;
                case "fabaoId":
                    VoFaBao.upItemHH(r);
                    break;
                default:
                    null != a.mainRole[s] ? a.mainRole[s] = r : console.error("errorAttrUpdate:" + s + "=" + r)
            }
        }
        t.notify(e.MSG_BASEROLEINFO)
    }, e.prototype.GC112 = function (t, e) {
        var i = e.readInt(),
            o = GameGlobal.modelRole.voMine;
        o.menpaiId = i, VoMenPai.getInst().mpId = i
    }, e.prototype.CG353 = function () {
        var t = this.getBytes();
        this.sendSocket(353, t)
    }, e.prototype.CG363 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(363, e)
    }, e.prototype.GC364 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = (e.readLong(), e.readInt());
            ViewText.text("兑换成功"), ViewItemFloatTip.checkShowEquipID(o)
        } else if (9 == i) GameGlobal.modelBag.checkRLTips(0);
        else {
            var n = ["", "", "等级不足", "材料不足", "传入ID异常", "装备表ID不存在", "每日限购已达上限", "总限购已达上限", "通关条件未达标", null, "已兑换在背包, 不能重复兑换", "身上穿着，不能重复兑换"][i];
            ViewText.text(n)
        }
    }, e.prototype.GC368 = function (t, i) {
        for (var o = i.readShort(), n = [], a = 0; o > a; a++) {
            var s = i.readInt(),
                r = i.readByte();
            n.push([s, r])
        }
        for (var l = CFG_CZDH.parseDatas[10], a = 0; a < n.length; a++)
            for (var s = n[a][0], h = n[a][1], c = 0; c < l.length; c++) {
                var p = l[c];
                if (parseInt(p.xuhao) == s) {
                    p.boughtNum = h;
                    break
                }
            }
        t.notify(e.MSG_BOUGHT)
    }, e.prototype.CG365 = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(365, e)
    }, e.czNotice = function () {
        for (var t = GameGlobal.modelBag.equips, e = GameGlobal.modelRole.voMine, i = 0; i < t.length; i++) {
            var o = t[i];
            if (5 == o.quality && e.level >= o.level && null != CFG_CZDH.LIB2[o.id]) return !0
        }
        return !1
    }, e.prototype.GC366 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            for (var o = e.readLong(), n = GameGlobal.modelBag.equips, a = 0; a < n.length; a++)
                if (n[a].lid == o) {
                    n.splice(a, 1);
                    break
                } GameGlobal.modelBag.notify(egret.Event.CHANGE), ViewText.text("分解成功")
        } else ViewText.text("分解失败")
    }, e.prototype.GC350 = function (t, e) {
        t.getEqs(t, e)
    }, e.prototype.GC352 = function (t, e) {
        for (var i = e.readShort(), o = 0; i > o; o++) {
            var n = e.readLong(),
                a = e.readInt(),
                s = VoEquip.create();
            s.init(a), s.lid = n, s.place = 2, GameGlobal.modelBag.equips.push(s)
        }
        i && GameGlobal.modelBag.notifyEquipChange()
    }, e.prototype.CG_CHANGENAME = function (t, e) {
        if (this.isFlag(143)) ViewText.text("操作频繁");
        else {
            var i = this.getBytes();
            i.writeUTF(t), i.writeByte(e), this.sendSocket(143, i), this.addDelayFlag(143, 3e3)
        }
    }, e.prototype.GC_CHANGENAME = function (t, i) {
        var o = i.readByte(),
            n = i.readUTF();
        1 == o ? (t.voMine.name = n, t.notify(e.MSG_BASEROLEINFO), GameGlobal.layerMgr.close(UIConst.CHANGENAME), ViewText.text("改名成功")) : 2 == o ? ViewText.text("该名字含有不能使用的文字") : 4 == o && ViewText.text("该名字已被占用")
    }, e.prototype.getDressEqStr = function (t) {
        var e = ModelEquip.posArr[t],
            i = 0;
        if (e)
            for (var o = 0, n = e.length; n > o; o++) {
                var a = this.eqDts[e[o]];
                a && (a.zhanli < i || !i) && (i = a.zhanli)
            }
        return i
    }, e.prototype.GC354 = function (t, e) {
        var i = e.readByte();
        0 == i ? t.getEqs(t, e) : ViewText.text("换装不成功")
    }, e.prototype.getSuitNum = function (t) {
        var e = 0;
        for (var i in this.eqDts) {
            var o = this.eqDts[i];
            o && o.remakeID == t && e++
        }
        return e
    }, e.prototype.getDressEqCount = function (t) {
        var e = this.eqDts,
            i = 0;
        for (var o in e) {
            var n = e[o];
            n && n.id == t && i++
        }
        return i
    }, e.prototype.CG_LEVELUP = function () {
        var t = this.getBytes();
        this.sendSocket(149, t)
    }, e.prototype.getEqByLid = function (t) {
        for (var e in this.eqDts) {
            var i = this.eqDts[e];
            if (i && i.lid == t) return this.eqDts[e]
        }
    }, e.prototype.getEqs = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readLong(),
                s = i.readInt(),
                r = i.readByte(),
                l = new VoEquip;
            l.init(s), l.lid = a, l.dressingpos = r, l.place = 2, t.eqDts[r] = l;
            for (var h = 0, c = i.readShort(); c > h; h++) l.attrDyn || (l.attrDyn = []), l.attrDyn[h] = [i.readShort(), i.readShort()];
            l.roleName = i.readUTF(), l.remakeID = i.readByte(), l.updateStr()
        }
        t.notify(e.MSG_ROLEEQUIPCHANGE)
    }, e.prototype.unDressEquip = function (t) {
        for (var e in this.eqDts) {
            var i = this.eqDts[e];
            if (i && i.lid == t) {
                i.place = 0, i.dressingpos = -1, delete this.eqDts[e];
                break
            }
        }
    }, e.prototype.onPlayerDetail = function (t, e) {
        GameGlobal.modelRole.voMine;
        t.voMine.parseBytes(e), t.voMine.str = e.readLong(), t.voMine.vip = e.readByte(), t.voMine.synSceneCharAttr(), t.checkStrup(t.voMine.str), CFG_Hero.initSkill(t.voMine.mainRole), GameGlobal.modelLogin.isCreateARole && (GameGlobal.modelLogin.needShowWellcome = !0, GameGlobal.modelLogin.isCreateARole = !1, MyPlatform.getIns().uploadCreateRole(), egret.setTimeout(function () {
            MyPlatform.getIns().uploadOnlineTime()
        }, this, 3e5))
    }, e.prototype.initMineVo = function () {
        this.voMine
    }, e.prototype.initMineRole = function () {
        var t = this,
            e = t.voMine,
            i = new VoRole;
        i.job = e.job, i.sex = e.job, i.level = this.voMine.level, this.voMine.mainRole = i;
        var o = (i.job, Role.create());
        o.saveToPool = !1, o.setHorse(i.horseMod), o.type = Role.PLAYERROLE, this.voMine.sceneChars[0] = o, o.skillList = i.skillList
    }, e.prototype.addMoney = function (t) {
        this.voMine.yuanbao += t, this.notify(egret.Event.CHANGE, this)
    }, e.prototype.checkStrup = function (t) {
        var e = this.voMine;
        if (this.oldStr && e.str > this.oldStr) {
            if (window.BK && window.BK.QQ) try {
                var i = {
                    infoList: [{
                        type: 3,
                        op: 2,
                        num: t,
                        extId: 1
                    }]
                };
                window.BK.QQ.reportGameResult(i, function (t, e, i) {
                    0 !== t ? console.log("uploadStr(QQ.BK):fail") : console.log("uploadStr(QQ.BK):success")
                })
            } catch (o) {}
            GameGlobal.layerMgr.open(UIConst.STRUP, this.oldStr)
        }
        this.oldStr = e.str
    }, e.prototype.updateStr = function () {
        var t = this.voMine;
        t.updateStr(), this.oldStr && t.str > this.oldStr && GameGlobal.layerMgr.open(UIConst.STRUP, this.oldStr), this.oldStr = t.str, this.notify(e.MSG_CHANGE)
    }, e.prototype.setRolePnlIndex = function (t) {
        this.rolePnlIndex = t, this.notify(e.MSG_INDEXCHANGE)
    }, e.prototype.getCurSelRole = function () {
        return null
    }, e.prototype.checkTip = function () {
        var t = GameGlobal.modelSkill.checkAnySkillUD();
        return t
    }, e.MSG_BASEROLEINFO = "MSG_BASEROLEINFO", e.jobs = ["", "巫族", "仙族", "全职业"], e.MSG_CHANGE = "msg_c", e.MSG_INDEXCHANGE = "msg_index", e.MSG_ROLEENABLE = "roleEnable", e.MSG_ROLEEQUIPCHANGE = "roleEquip", e.MSG_DUANZAO = "msg_duanzao", e.MSG_QIANGHUA = "msg_qianghua", e.MSG_JINGLIAN = "msg_jinglian", e.MSG_BAOSHI = "msg_baoshi", e.MSG_LEVEL = "msg_level", e.MSG_BOUGHT = "MSG_BOUGHT", e
}(BaseModel);
__reflect(ModelRole.prototype, "ModelRole");
var ViewCZDH = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.itemListDC = new eui.ArrayCollection, e.nowSelK = 10, e.skinName = "ViewCZDHSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.base.title = "橙装兑换", e.txtGet.textFlow = HtmlUtil.underLine("获取橙装碎片"), e.txtGet.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIConst.GETSUIPIAN)
        }, e), DisplayUtil.popBtnStyle(e.txtGet), e.btnArrs.itemRenderer = VCZDHTabItem, e.btnsProviders = new eui.ArrayCollection, e.btnArrs.dataProvider = e.btnsProviders, e.itemList.itemRenderer = CZItem, e.itemList.dataProvider = e.itemListDC, e.addCloseListen(e.base.btnClose), e.addCloseListen(e.base.btnReturn), e.btnArrs.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onTab, this), this.iconNotice.visible = !1
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onUpdate1(), this.onNumFunc(), this.setCurItemByK(10), this.equipCh(), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onNumFunc, this), GameGlobal.modelBag.on(ModelBag.MSG_EQUIPCHANGE, this.equipCh, this), GameGlobal.modelRole.on(ModelRole.MSG_BOUGHT, this.onUpdate, this)
    }, e.prototype.equipCh = function () {
        this.iconNotice.visible = ModelRole.czNotice()
    }, e.prototype.onNumFunc = function () {
        this.txtNum.text = "" + GameGlobal.modelBag.getItemCount(1007)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onNumFunc, this), GameGlobal.modelRole.off(ModelRole.MSG_BOUGHT, this.onUpdate, this), GameGlobal.modelBag.off(ModelBag.MSG_EQUIPCHANGE, this.equipCh, this)
    }, e.prototype.onTab = function (t) {
        this.setCurItemByK(t.item.k)
    }, e.prototype.setCurItemByK = function (t) {
        this.nowSelK = t, this.onUpdate()
    }, e.prototype.onUpdate = function () {
        var t = this.nowSelK,
            e = CFG_CZDH.parseDatas[t];
        10 == t && e.sort(this.sortFunc), DisplayUtil.fillDataAC(this.itemListDC, e)
    }, e.prototype.sortFunc = function (t, e) {
        var i = t.dayxg + t.fxg,
            o = e.dayxg + e.fxg;
        return (i > 0 && t.boughtNum >= i ? 1 : 0) - (o > 0 && e.boughtNum >= o ? 1 : 0)
    }, e.prototype.onUpdate1 = function () {
        var t = this;
        t.btnsProviders.removeAll();
        for (var e in CFG_CZDH.parseDatas) 10 == parseInt(e) ? t.btnsProviders.addItem({
            label: "商店兑换",
            k: e
        }) : t.btnsProviders.addItem({
            k: e,
            label: e + "级橙装"
        });
        t.btnArrs.selectedIndex = 0, this.scro1.viewport.scrollV = 0
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(ViewCZDH.prototype, "ViewCZDH");
var ViewGetSP = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "resource/eui_skins/game/equip/GetSPSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var e = this;
        t.prototype.initView.call(this);
        var i = this;
        i.base.title = "橙装碎片", i.addCloseListen(i.rect), i.addCloseListen(i.base.btnClose), i.addCloseListen(i.base.btnReturn), DisplayUtil.popBtnStyle(i.groupBtn), i.itemsArr.dataProvider = i.sourceData, i.itemsArr.itemRenderer = GetSPItem, i.groupBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            CFG_COMMOND.isOpen(CFG_COMMOND.BOSS, !0) && (GameGlobal.layerMgr.open(UIConst.BOSSPAGE, 1), GameGlobal.layerMgr.close(e.id), GameGlobal.layerMgr.close(UIConst.CHENGZHUANDH))
        }, i)
    }, e.prototype.onNumFunc = function () {
        this.txtNum.text = "" + GameGlobal.modelBag.getItemCount(1007)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onUpdate, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onNumFunc, this), this.onNumFunc(), this.onUpdate()
    }, e.prototype.onUpdate = function () {
        DisplayUtil.fillDataAC(this.sourceData, GameGlobal.modelBag.getCZEquips())
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onNumFunc, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onUpdate, this), GameGlobal.layerMgr.open(UIConst.CHENGZHUANDH)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(ViewGetSP.prototype, "ViewGetSP");
var ViewRoleEquip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.hasAddXDMsg = !1, e.skinName = "resource/eui_skins/game/RoleEquip.exml", e
    }
    return __extends(e, t), e.prototype.guideDress = function () {
        QuestGuideArrow.getIns().guideTo(this.btnOnDress, this.btnOnDress.width >> 1, this.btnOnDress.height >> 1)
    }, e.prototype.guideOpenPY = function (t) {
        if (1 == t) var e = this.iconHorse;
        e && QuestGuideArrow.getIns().guideTo(e.parent, e.x + 30, e.y + 30)
    }, e.prototype.guideOpenTitle = function () {
        QuestGuideArrow.getIns().guideTo(this.iconTitle.parent, this.iconTitle.x + 40, this.iconTitle.y + 40)
    }, e.prototype.initView = function () {
        var t = egret.TouchEvent.TOUCH_TAP,
            e = this;
        e.btnOnDress.addEventListener(t, GameGlobal.modelRole.CG353, GameGlobal.modelRole), e.btnCZDH.addEventListener(t, function () {
            GameGlobal.layerMgr.open(UIConst.CHENGZHUANDH)
        }, this);
        for (var i = ModelEquip.posSaveArr, o = 0; o < i.length; o++) {
            var n = e["grid" + o];
            n.pos = o + 1, e.grids.push(n), n.locate = Locate.rolepan, n.enableTip()
        }
        e.role = UIRole.create(), e.role.x = 350, e.role.y = 610, e.role.scaleX = e.role.scaleY = 1.4, e.addChildAt(e.role, 6), e.textStr = new ImageText, e.textStr.fx = 245, e.textStr.fy = 175, e.textStr.container = e, e.textStr.charFunc = ImageText.STRFUNC, e.imgPartbg.addEventListener(t, e.onAttT, e), e.btnlv.addEventListener(t, e.onLvT, e), e.lbCheck.textFlow = HtmlUtil.underLine(e.lbCheck.text), e.lbCheck.touchEnabled = !0, e.lbCheck.addEventListener(t, e.onAttT, e), e.btnOnDress.lbText.size = e.btnCZDH.lbText.size = 24, DisplayUtil.popBtnStyle(e.iconHorse), DisplayUtil.popBtnStyle(e.iconWing), DisplayUtil.popBtnStyle(e.iconSB), e.iconHorse.addEventListener(t, e.onHorse, e), e.iconWing.addEventListener(t, e.onWing, e), e.iconSB.addEventListener(t, e.onSB, e), e.iconHalo.addEventListener(t, e.onHalo, e), e.iconTitle.addEventListener(t, e.onTitleT, e), e.iconFashion.addEventListener(t, e.onFashionT, e), e.btnxdComp.addEventListener(t, e.onOpenXDComp, e), e.btnTJ.addEventListener(t, e.ontjT, e), e.iconNotice0.visible = e.iconNotice1.visible = e.iconNotice2.visible = e.iconNotice3.visible = e.iconNotice4.visible = !1
    }, e.prototype.onOpenXDComp = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.XDCOMP, !0) && GameGlobal.layerMgr.open(UIConst.XDCOMPOSITE)
    }, e.prototype.checkXDCompNot = function () {
        this.btnxdComp && this.btnxdComp.setNoticVis(GameGlobal.modelxdComposite.noticeState)
    }, e.prototype.xdLevelShow = function () {
        var t = GameGlobal.modelRole.voMine.level;
        t < CFG_COMMOND.getOpenLevel(CFG_COMMOND.XDCOMP) ? (this.hasAddXDMsg = !0, DisplayUtil.remove(this.btnxdComp), GameGlobal.modelRole.on(ModelRole.MSG_LEVEL, this.realShowXD, this)) : (DisplayUtil.addBy(this.btnxdComp, this), this.hasAddXDMsg && (this.hasAddXDMsg = !1, GameGlobal.modelRole.off(ModelRole.MSG_LEVEL, this.realShowXD, this)))
    }, e.prototype.realShowXD = function () {
        var t = GameGlobal.modelRole.voMine.level;
        t >= CFG_COMMOND.getOpenLevel(CFG_COMMOND.XDCOMP) && (GameGlobal.modelRole.off(ModelRole.MSG_LEVEL, this.realShowXD, this), DisplayUtil.addBy(this.btnxdComp, this), this.hasAddXDMsg = !1)
    }, e.prototype.onHorse = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.HORSE, !0) && GameGlobal.layerMgr.open(UIConst.UIID_PEIYANG, 0)
    }, e.prototype.onWing = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.WING, !0) && GameGlobal.layerMgr.open(UIConst.UIID_PEIYANG, 1)
    }, e.prototype.onSB = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.SHENBING, !0) && GameGlobal.layerMgr.open(UIConst.UIID_PEIYANG, 2)
    }, e.prototype.onHalo = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.HALO, !0) && GameGlobal.layerMgr.open(UIConst.UIID_PEIYANG, 3)
    }, e.prototype.onTitleT = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.TITLE, !0) && GameGlobal.layerMgr.open(UIConst.TITLEFASH, 0)
    }, e.prototype.onFashionT = function () {
        CFG_COMMOND.isOpen(CFG_COMMOND.FASHION, !0) && GameGlobal.layerMgr.open(UIConst.TITLEFASH, 1)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onDress(), this.updateAll(), this.role.play(), this.checkXDCompNot(), this.xdLevelShow(), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.updateAll, this), GameGlobal.modelRole.on(ModelRole.MSG_ROLEEQUIPCHANGE, this.onDress, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onBagC, this), GameGlobal.modelTitle.on(ModelTitle.UPDATE, this.updateAll, this), GameGlobal.modelTitle.on(ModelTitle.HH, this.updateAll, this), GameGlobal.modelFashion.on(ModelFashion.UPDATE, this.updateAll, this), GameGlobal.modelTuJian.on(ModelTuJian.MSG_UPDATE, this.onTJup, this), GameGlobal.modelxdComposite.on(ModelXDComposite.msg_notice, this.checkXDCompNot, this)
    }, e.prototype.onClose = function () {
        this.role.stopAndClear(), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.updateAll), GameGlobal.modelRole.off(ModelRole.MSG_ROLEEQUIPCHANGE, this.onDress), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onBagC), GameGlobal.modelTitle.off(ModelTitle.UPDATE, this.updateAll, this), GameGlobal.modelTitle.off(ModelTitle.HH, this.updateAll, this), GameGlobal.modelFashion.off(ModelFashion.UPDATE, this.updateAll, this), GameGlobal.modelTuJian.off(ModelTuJian.MSG_UPDATE, this.onTJup), GameGlobal.modelxdComposite.off(ModelXDComposite.msg_notice, this.checkXDCompNot, this), this.clear()
    }, e.prototype.onSize = function () {}, e.prototype.onDress = function () {
        var t = this,
            e = GameGlobal.modelRole.eqDts;
        if (e) {
            for (var i = 0, o = t.grids.length; o > i; i++) {
                var n = t.grids[i],
                    a = i,
                    s = e[a];
                s && (s.gridIndex = i, n.data = s)
            }
            this.checkEquipNotic()
        }
    }, e.prototype.clear = function () {
        for (var t = 0, e = this.grids.length; e > t; t++) {
            var i = this.grids[t];
            i.data = null
        }
    }, e.prototype.pyNotice = function () {
        this.iconTJ.visible = GameGlobal.modelTuJian.checkAllNotics(), this.iconNotice0.visible = VoHorse.getInst().getPeiYangNotice() || VoHorse.getInst().getSkinNotice() || GameGlobal.modelpeiyang.getNoticeByType(0), this.iconNotice1.visible = VoWing.getInst().getPeiYangNotice() || VoWing.getInst().getSkinNotice() || GameGlobal.modelpeiyang.getNoticeByType(1), this.iconNotice2.visible = VoWeapon.getInst().getPeiYangNotice() || VoWeapon.getInst().getSkinNotice() || GameGlobal.modelpeiyang.getNoticeByType(2), this.iconNotice5.visible = VoHalo.getInst().getPeiYangNotice() || VoHalo.getInst().getSkinNotice() || GameGlobal.modelpeiyang.getNoticeByType(3), this.iconNotice3.visible = Vo_TitleItem.notice(), this.iconNotice4.visible = Vo_Fashion.notice()
    }, e.prototype.onTJup = function () {
        this.iconTJ.visible = GameGlobal.modelTuJian.checkAllNotics()
    }, e.prototype.onBagC = function () {
        this.checkEquipNotic(), this.pyNotice()
    }, e.prototype.checkEquipNotic = function () {
        for (var t = GameGlobal.modelEquip, e = 0, i = this.grids.length; i > e; e++) this.grids[e].imgArrowUp.visible = t.checkNotickReplace(e);
        this.btnOnDress.setNoticeVis(t.checkNotick())
    }, e.prototype.onAttT = function (t) {
        t.localY >= 500 || GameGlobal.layerMgr.open(UIConst.ROLEATTR)
    }, e.prototype.onLvT = function () {
        var t = GameGlobal.modelRole.voMine,
            e = CFG_Hero.getLevelupExp(t.level);
        e ? t.exp >= e ? GameGlobal.modelRole.CG_LEVELUP() : ViewText.text("经验不足") : ViewText.text("已达最高等级")
    }, e.prototype.ontjT = function () {
        CFG_COMMOND.isOpen(UIConst.TUJIAN, !0) && GameGlobal.layerMgr.open(UIConst.TUJIAN)
    }, e.prototype.updateAll = function () {
        this.updateRoleView(), this.updateAttr(), this.pyNotice()
    }, e.prototype.updateRoleView = function () {
        var t = GameGlobal.modelRole.voMine.sceneChars[0];
        t._body;
        this.lbName.text = GameGlobal.modelRole.voMine.name, this.btnCZDH.setNoticeVis(ModelRole.czNotice()), this.role.setHalo(t._halo), this.role.setBody(t._body), this.role.setHorse(t._horse), this.role.setWeapon(t._weapon), this.role.setWing(t._wing), this.role.setTitle(t._title), this.role.setWay(3), this.role.validParts()
    }, e.prototype.updateAttr = function () {
        var t = GameGlobal.modelRole.voMine;
        this.lblv.text = t.level.toString();
        var e = CFG_Hero.getLevelupExp(t.level);
        this.lbexp.text = ConfigHelp.getNumText(t.exp) + "/" + ConfigHelp.getNumText(e), this.textStr.setText("z" + t.str), this.btnlv.visible = t.level >= 80;
        var i = CFG_Hero.LIB[t.level + 1];
        this.btnlv.setNoticeVis(i && t.exp >= e), this.imgFeiSheng.source = "xiuXian_json.l" + GameGlobal.modelTarget.xj_lv
    }, e
}(BaseEUIView);
__reflect(ViewRoleEquip.prototype, "ViewRoleEquip");
var ViewRolePnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._st = -1, e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.base.btnReturn, 30, 30)
    }, e.prototype.guidePage = function (t) {
        var e = this.base.getTabByIdx(t);
        e && QuestGuideArrow.getIns().guideTo(e, 55, 30)
    }, e.prototype.checkPage = function (t) {
        return this._st == t
    }, e.prototype.initView = function () {
        var t = this;
        t.base.title = "角色", t.base.createPageGrp().createTabGroup(), GameGlobal.layerMgr.reg(UIConst.ROLEPNLEQUIP, ViewRoleEquip, this.base.pageGrp), GameGlobal.layerMgr.reg(UIConst.ROLESKILL, VRoleSkillPage, this.base.pageGrp), GameGlobal.layerMgr.reg(UIConst.XIULIAN, VRoleXLPage, this.base.pageGrp), t.tbtn0 = t.base.addTab("角色", 0), t.tbtn1 = t.base.addTab("技能", 1), t.tbtn2 = t.base.addTab("修炼", 2), t.base.listenTabClick(t.onTbtnT, t), t.addCloseListen(t.base.btnClose), t.addCloseListen(t.base.btnReturn)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e >= 1 && 3 >= e ? this.setCurretSt(e) : this.setCurretSt(0), GameGlobal.modelPlayer.setMainMenuSt(1), this.checkAllTip(), GameGlobal.modelSkill.on(ModelSkill.MSG_SKILLUPGRADE, this.onSkillUp, this), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.onBaseInfo, this), GameGlobal.modelRole.on(ModelRole.MSG_ROLEEQUIPCHANGE, this.onEquipC, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onBagC, this), GameGlobal.modelTuJian.on(ModelTuJian.MSG_UPDATE, this.onTJup, this), GameGlobal.modelXiuLian.on(ModelXiuLian.UPDATE, this.checkXL, this), GameGlobal.modelxdComposite.on(ModelXDComposite.msg_notice, this.checkXDComposite, this), CFG_COMMOND.isOpen(CFG_COMMOND.XIULIAN) && GameGlobal.modelXiuLian.CG1501()
    }, e.prototype.onClose = function () {
        this.setCurretSt(-1), GameGlobal.modelSkill.off(ModelSkill.MSG_SKILLUPGRADE, this.onSkillUp), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.onBaseInfo), GameGlobal.modelRole.off(ModelRole.MSG_ROLEEQUIPCHANGE, this.onEquipC), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onBagC), GameGlobal.modelTuJian.off(ModelTuJian.MSG_UPDATE, this.onTJup), GameGlobal.modelXiuLian.off(ModelXiuLian.UPDATE, this.checkXL, this), GameGlobal.modelxdComposite.off(ModelXDComposite.msg_notice, this.checkXDComposite, this)
    }, e.prototype.onTbtnT = function (t) {
        this.setCurretSt(t.index)
    }, e.prototype.setCurretSt = function (t) {
        if (this._st != t && (2 != t || CFG_COMMOND.isOpen(CFG_COMMOND.XIULIAN, !0))) {
            switch (this.base.setTabSelIdx(t), this._st) {
                case 0:
                    GameGlobal.layerMgr.close(UIConst.ROLEPNLEQUIP);
                    break;
                case 1:
                    GameGlobal.layerMgr.close(UIConst.ROLESKILL);
                    break;
                case 2:
                    GameGlobal.layerMgr.close(UIConst.XIULIAN)
            }
            switch (t) {
                case 0:
                    GameGlobal.layerMgr.open(UIConst.ROLEPNLEQUIP);
                    break;
                case 1:
                    GameGlobal.layerMgr.open(UIConst.ROLESKILL);
                    break;
                case 2:
                    GameGlobal.layerMgr.open(UIConst.XIULIAN)
            }
            this._st = t
        }
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.checkAllTip = function () {
        this.checkEquip(), this.checkSkill(), this.checkPy()
    }, e.prototype.onTJup = function () {
        this.checkEquip()
    }, e.prototype.onSkillUp = function () {
        this.checkSkill()
    }, e.prototype.onBaseInfo = function () {
        this.checkSkill(), this.checkXL()
    }, e.prototype.onEquipC = function () {
        this.checkEquip()
    }, e.prototype.onBagC = function () {
        this.checkEquip(), this.checkXL()
    }, e.prototype.checkEquip = function () {
        this.callLater(this._ce)
    }, e.prototype.checkXDComposite = function () {
        this.callLater(this._ce)
    }, e.prototype._ce = function (t) {
        t.tbtn0.setNoticVis(GameGlobal.modelEquip.checkNotick() || GameGlobal.modelpeiyang.notice() || GameGlobal.modelTuJian.checkAllNotics() || Vo_TitleItem.notice() || Vo_Fashion.notice() || GameGlobal.modelxdComposite.noticeState)
    }, e.prototype.checkSkill = function () {
        this.callLater(this._cs)
    }, e.prototype.checkPy = function () {
        this.callLater(this._py)
    }, e.prototype.checkXL = function () {
        this.callLater(this._cx)
    }, e.prototype._py = function (t) {}, e.prototype._cs = function (t) {
        t.tbtn1.setNoticVis(GameGlobal.modelSkill.checkAnySkillUD())
    }, e.prototype._cx = function (t) {
        t.tbtn2.setNoticVis(Vo_XiuLian.notice())
    }, e
}(BaseEUIView);
__reflect(ViewRolePnl.prototype, "ViewRolePnl");
var VoPlayer = function () {
    function t() {
        this.id = 0, this.level = 1, this.follwPetSLMID = 0, this.sceneChars = [], this.yuanbao = 0, this.bYuanbao = 0, this.yinliang = 0, this.vip = 0, this.xiayi = 0, this.prestige = 0, this.menpaiId = 0, this.str = 0, this.teamStr = 0, this.exp = 0, this.job = 1, this.sex = 1, this.hpmax = 0, this.att = 0, this.phyDef = 0, this.speDef = 0, this.crit = 0, this.resCrit = 0, this.critDmgAdd = 0, this.critDmgRes = 0, this.speCritDmgRed = 0, this.dmgAddPer = 0, this.phyDmgRedPer = 0, this.speDmgRedPer = 0, this.dmgRedPer = 0, this.speed = 0
    }
    return t.prototype.parseBytes = function (t) {
        var e = this,
            i = t.readShort(),
            o = e.mainRole;
        o.job = t.readByte(), o.hpmax = o.hp = t.readInt(), o.att = t.readInt(), o.phyDef = t.readInt(), o.speDef = t.readInt(), o.crit = t.readInt(), o.resCrit = t.readInt(), o.critDmgAdd = t.readInt(), o.critDmgRes = t.readInt(), o.dmgAddPer = t.readInt(), o.dmgRedPer = t.readInt(), o.phyDmgRedPer = t.readInt(), o.speDmgRedPer = t.readInt(), o.speed = t.readInt(), o.str = t.readInt();
        for (var i = t.readShort(), n = 0; i > n; n++) t.readShort(), t.readShort();
        e.setHorse(t.readInt()), e.setWing(t.readInt()), e.setShenBing(t.readInt()), e.setHalo(t.readInt()), e.setFollowPetSL(t.readInt()), CFG_COMMOND.isOpen(CFG_COMMOND.TITLE, !1) && GameGlobal.modelTitle.CG1381(), CFG_COMMOND.isOpen(CFG_COMMOND.FASHION, !1) && GameGlobal.modelFashion.CG1781(), e.updateStr()
    }, t.prototype.updateStr = function () {
        this.str = 0, this.str += this.mainRole.str
    }, t.prototype.synSceneCharAttr = function (t) {
        void 0 === t && (t = !1);
        this.mainRole, this.sceneChars[0]
    }, t.prototype.getVoRoleByJob = function (t) {
        return this.mainRole
    }, t.prototype.setFollowPetVo = function (t) {
        this.followPetVo != t && (this.followPetVo = t, GameGlobal.mapScene && !GameGlobal.mapScene.map.isLoading && this.updatePetFollow())
    }, t.prototype.setFollowPetSL = function (t) {
        CFG_COMMOND.isOpen(CFG_COMMOND.SHOULING, !1) && this.follwPetSLMID != t && (this.follwPetSLMID = t, GameGlobal.mapScene && !GameGlobal.mapScene.map.isLoading && this.updatePetFollowSL())
    }, t.prototype.setShenBing = function (t) {
        var e = this.mainRole;
        if (e.sbModID != t) {
            e.sbModID = t;
            var i = this.sceneChars[0];
            i.setWeapon(e.sbModID)
        }
    }, t.prototype.setWing = function (t) {
        var e = this.mainRole;
        if (e.sbModID != t) {
            e.wingMod = t;
            var i = this.sceneChars[0];
            i.setWing(e.wingMod)
        }
    }, t.prototype.setHalo = function (t) {
        var e = (this.mainRole, this.sceneChars[0]);
        e.setHalo(t)
    }, t.prototype.setHorse = function (t) {
        var e = this.mainRole;
        if (e.horseMod != t) {
            e.horseMod = t;
            var i = this.sceneChars[0];
            i.setHorse(e.horseMod)
        }
    }, t.prototype.updatePetFollow = function () {
        var t = this;
        if (t.followPetVo) {
            t.followPet || (t.followPet = ScenePet.create()), t.followPet.setPetID(t.followPetVo.sysid);
            var e = GameGlobal.modelTuJian.getEffID(t.followPetVo.basecfg.id);
            t.followPet.setTJEff(e);
            var i = t.sceneChars[0];
            t.followPet.mapScene || (t.followPet.fTargetRole = i, GameGlobal.mapScene.addUnit(t.followPet), t.followPet.x = i.x + 50, t.followPet.y = i.y + 50)
        } else t.followPet && t.followPet.mapScene && GameGlobal.mapScene.removeUnit(t.followPet);
        this.updatePetFollowSL()
    }, t.prototype.updatePetFollowSL = function () {
        var t = this;
        CFG_COMMOND.isOpen(CFG_COMMOND.SHOULING, !1) && (t.follwPetSLMID && t.followPet && t.followPet.mapScene ? (t.followPetSL || (t.followPetSL = ScenePetSL.create()), t.followPetSL.setModID(t.follwPetSLMID), t.followPetSL.tar = t.followPet, t.followPetSL.mapScene || (t.followPetSL.x = t.followPet.x + 30, t.followPetSL.y = t.followPet.y + 30, GameGlobal.mapScene.addUnit(t.followPetSL))) : t.followPetSL && t.followPetSL && GameGlobal.mapScene.removeUnit(t.followPetSL))
    }, t
}();
__reflect(VoPlayer.prototype, "VoPlayer");
var VoRole = function () {
    function t() {
        this.zs = 0, this.level = 1, this.pos = 0, this.job = 1, this.sex = 1, this.hp = 0, this.hpmax = 0, this.att = 0, this.phyDef = 0, this.speDef = 0, this.crit = 0, this.resCrit = 0, this.critDmgAdd = 0, this.critDmgRes = 0, this.speCritDmgRed = 0, this.dmgAddPer = 0, this.phyDmgRedPer = 0, this.speDmgRedPer = 0, this.dmgRedPer = 0, this.speed = 0, this.ryz = 0, this.str = 0, this.skillStr = 0, this.equips = {}, this.sbModID = null, this.wingMod = null, this.horseMod = null
    }
    return t.prototype.parseInfo = function (t) {
        this.job = t.job, this.sex = t.sex
    }, t.prototype.getAttrText = function () {
        var t = "生命:" + this.hpmax + "\n攻击:" + this.att + "\n物防:" + this.phyDef + "\n法防:" + this.speDef;
        return t
    }, t
}();
__reflect(VoRole.prototype, "VoRole");
var VRoleAttr = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/role/RoleAttrSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.rect), this.btnWH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onWHT, this)
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), !e) var i = GameGlobal.modelRole.voMine;
        this.update(i)
    }, e.prototype.update = function (t) {
        var e = t.mainRole,
            i = this;
        i.setTerm(i.a102, 101, "" + (e.hpmax + t.hpmax)), i.setTerm(i.a119, 119, "" + (e.speed + t.speed)), i.setTerm(i.a103, 103, "" + (e.att + t.att)), i.setTerm(i.a105, 105, "" + (e.phyDef + t.phyDef)), i.setTerm(i.a106, 106, "" + (e.speDef + t.speDef)), i.setTerm(i.a107, 107, e.crit + t.crit + ""), i.setTerm(i.a109, 109, e.resCrit + t.resCrit + ""), i.setTerm(i.a111, 111, (e.critDmgAdd + t.critDmgAdd) / 100 + "%"), i.setTerm(i.a115, 115, (e.dmgAddPer + t.dmgAddPer) / 100 + "%"), i.setTerm(i.a117, 117, (e.phyDmgRedPer + e.dmgRedPer + t.phyDmgRedPer + t.dmgRedPer) / 100 + "%"), i.setTerm(i.a118, 118, (e.speDmgRedPer + e.dmgRedPer + t.speDmgRedPer + t.dmgRedPer) / 100 + "%"), i.setTerm(i.a113, 113, (e.critDmgRes + t.critDmgRes) / 100 + "%"), i.setTerm(i.b102, 101, "" + t.hpmax), i.setTerm(i.b119, 119, "" + t.speed), i.setTerm(i.b103, 103, "" + t.att), i.setTerm(i.b105, 105, "" + t.phyDef), i.setTerm(i.b106, 106, "" + t.speDef), i.setTerm(i.b107, 107, t.crit + ""), i.setTerm(i.b109, 109, t.resCrit + ""), i.setTerm(i.b111, 111, t.critDmgAdd / 100 + "%"), i.setTerm(i.b115, 115, t.dmgAddPer / 100 + "%"), i.setTerm(i.b117, 117, (t.phyDmgRedPer + t.dmgRedPer) / 100 + "%"), i.setTerm(i.b118, 118, (t.speDmgRedPer + t.dmgRedPer) / 100 + "%"), i.setTerm(i.b113, 113, t.critDmgRes / 100 + "%")
    }, e.prototype.setTerm = function (t, e, i) {
        var o = CFG_ATTR.LIB[e];
        t.lbName.text = o.nn, t.lbValue.text = i
    }, e.prototype.onSize = function () {
        var t = GameGlobal.stage;
        this.width = t.stageWidth, this.height = t.stageHeight
    }, e.prototype.onWHT = function () {
        var t = "1. 队伍属性：对主角、仙神、灵兽都进行属性永久加成\n2. 增加队伍属性的功能有：坐骑皮肤、翅膀皮肤、神兵皮肤，时装、称号，图鉴，门派技能、门派活跃度\n3. 只增加主角属性的功能有：坐骑、神兵、翅膀、光环、装备、锻造(强化、精炼、宝石、升星)\n4. 只增加仙神属性的功能有：仙神装备洗练、仙神符文、仙神升星\n5. 只增加灵兽属性的功能有：灵兽成长、灵兽技能、灵兽升阶、兽灵培养";
        GameGlobal.layerMgr.open(UIConst.UIID_INTRODUCE, t)
    }, e
}(BaseEUIView);
__reflect(VRoleAttr.prototype, "VRoleAttr");
var VRoleAttrTerm = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e
}(eui.Component);
__reflect(VRoleAttrTerm.prototype, "VRoleAttrTerm");
var VRoleEquipGrid = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/gameComp/RoleEquipGrid.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.imgArrowUp.visible = !1, this.grid._isShowEff = !0
    }, e.prototype.setData = function (t) {
        this.data = t
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this.grid.data = t, t ? this.lbExtra.text = "Lv." + t.level : this.lbExtra.text = ""
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "pos", {
        get: function () {
            return this._pos
        },
        set: function (t) {
            this._pos = t, this.grid.pos = t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "locate", {
        set: function (t) {
            this.grid.locate = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.enableTip = function () {
        this.grid.enableTip()
    }, e
}(eui.Component);
__reflect(VRoleEquipGrid.prototype, "VRoleEquipGrid");
var VRoleRidePage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/skill/RoleRide.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {}, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e)
    }, e.prototype.onClose = function () {}, e
}(BaseEUIView);
__reflect(VRoleRidePage.prototype, "VRoleRidePage");
var VRoleSkillPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "resource/eui_skins/game/skill/RoleSkillPage.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this;
        GameGlobal.layerMgr.reg(UIConst.ROLESKILLTIP, VRoleSkillTip, GameGlobal.layerMgr.UI_Message);
        for (var e = 0; 8 > e; e++) {
            var i = t["g" + e];
            t.grids.push(i), i.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onT, t)
        }
        t.btnUp.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onUpGrade, t), t.btnMulUp.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onUpGrade, t), DisplayUtil.popBtnStyle(t.skillSet), DisplayUtil.popBtnStyle(t.btnQuest), t.skillSet.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onSetV, t), t.btnQuest.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            var t = 1 == GameGlobal.modelRole.voMine.job ? 100901 : 100902;
            ViewWenHao.show(CFG_COMMOND.LIBWFSM[t].detail)
        }, t)
    }, e.prototype.onUpGrade = function (t) {
        var e = this,
            i = GameGlobal.modelRole.voMine,
            o = GameGlobal.modelSkill;
        switch (t.currentTarget) {
            case e.btnUp:
                var n, a = i.mainRole.skillList[0].level,
                    s = e._oldSel._data,
                    r = CFG_Skill.LIBUPCOST[s.level];
                if (s.level >= s.cfg.maxlv ? n = o.getWarnTxt(5) : 0 == s.idx ? s.level >= i.level ? n = o.getWarnTxt(3) : i.yinliang < r.xh && (n = o.getWarnTxt(6)) : a < s.requrelv ? n = o.getWarnTxt(3) : s.level >= a ? n = o.getWarnTxt(3) : i.yinliang < r.xh && (n = o.getWarnTxt(6)), n) return void ViewText.text(n);
                o.CG721(e.grids.indexOf(e._oldSel));
                break;
            case e.btnMulUp:
                if (o.isAllSkillMax()) return void ViewText.text(o.getWarnTxt(5));
                o.CG723()
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.updateLv(), i.selBest(), i.onPlayerUD(), GameGlobal.modelSkill.on(ModelSkill.MSG_SKILLUPGRADE, this.onIndexUp, this), GameGlobal.modelSkill.on(ModelSkill.MSG_SKILLDT, this.onSkillAll, this), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.onPlayerUD, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelSkill.off(ModelSkill.MSG_SKILLUPGRADE, this.onIndexUp), GameGlobal.modelSkill.off(ModelSkill.MSG_SKILLDT, this.onSkillAll), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.onPlayerUD)
    }, e.prototype.onIndexUp = function (t) {
        this.grids[t];
        this.updateLv(), this.updateCost(), this.onPlayerUD();
        var e = this.grids.indexOf(this._oldSel);
        this.setSelIndex(e)
    }, e.prototype.onSkillAll = function () {
        this.updateLv(), this.selBest(), this.updateCost()
    }, e.prototype.onPlayerUD = function () {
        this.callLater(this._checkNotic), this.lbExp.text = "可使用银两 " + ConfigHelp.getNumText(GameGlobal.modelRole.voMine.yinliang)
    }, e.prototype._checkNotic = function (t) {
        t.stage && t.btnMulUp.setNoticeVis(GameGlobal.modelSkill.checkAnySkillUD())
    }, e.prototype.updateLv = function (t) {
        void 0 === t && (t = !1);
        for (var e = GameGlobal.modelRole.voMine, i = 0; i < this.grids.length; i++) {
            var o = this.grids[i],
                n = e.mainRole.skillList[i];
            o.oldLv && o.oldLv != n.level && o.showEff(), o.data = n, o.setGrey(o._data.level <= 0)
        }
    }, e.prototype.selBest = function () {
        var t = this;
        t.setSelIndex(t._oldSel ? t.grids.indexOf(t._oldSel) : 0)
    }, e.prototype.setSelVo = function (t) {
        for (var e = 0; e < this.grids.length; e++) this.grids[e]._data == t && this.setSelIndex(e)
    }, e.prototype.setSelIndex = function (t) {
        this._oldSel && (this._oldSel.selected = !1);
        var e = this.grids[t];
        e && (e.selected = !0, this._oldSel = e, this._setCurVo(e._data), GameGlobal.modelSkill.isSkillCanup(t) ? (this.btnUp.visible = this.lbCost.visible = !0, this.lbCondtiion.visible = !1) : (this.btnUp.visible = this.lbCost.visible = !1, this.lbCondtiion.visible = !0))
    }, e.prototype.onT = function (t) {
        this.setSelIndex(this.grids.indexOf(t.currentTarget))
    }, e.prototype.onSetV = function (t) {
        GameGlobal.layerMgr.open(UIConst.SKILLSETTING)
    }, e.prototype._setCurVo = function (t) {
        this.lbName.textFlow = HtmlUtil.parse(t.name + " " + HtmlUtil.color(t.level, "#10a244") + " 级"), this.lbDes.text = t.getDes(), this.updateCost()
    }, e.prototype.updateCost = function () {
        var t = GameGlobal.modelRole.voMine.mainRole,
            e = this._oldSel._data,
            i = t.skillList.indexOf(e);
        this.lbExp.text = "可使用银两 " + ConfigHelp.getNumText(GameGlobal.modelRole.voMine.yinliang);
        var o = CFG_Skill.LIBUPCOST[this._oldSel._data.level];
        if (o) {
            var n = o.xh;
            this.lbCost.text = "消耗:银两" + n, GameGlobal.modelSkill.isSkillCanup(i) ? this.lbCost.textColor = 5308930 : this.lbCost.textColor = Color.UIRED, this.lbCostA.text = "消耗:银两" + ConfigHelp.getNumText(GameGlobal.modelSkill.caculateOneKeyCost());
            var a = "解锁当前技能需要\n";
            if (e.level >= e.cfg.maxlv) {
                a = "";
                var s = "已满级"
            } else if (0 == e.idx) var s = Lang.reTxt("人物 {0}级", e.level + 1);
            else {
                var r = t.skillList[0];
                if (0 == e.level) var s = Lang.reTxt("{0} {1}级", r.name, e.requrelv);
                else if (e.level > 0) var s = Lang.reTxt("{0} {1}级", r.name, e.level + 1)
            }
            e.level <= 0 && GameGlobal.modelTarget.achieveLv < e.rqureAchLv && (s = "成就等级达到" + e.rqureAchLv), this.lbCondtiion.text = a + s
        }
    }, e.prototype.guideUpgrade = function () {
        QuestGuideArrow.getIns().guideTo(this.btnMulUp, 74, 28)
    }, e.prototype.guideOpenSkillQ = function () {
        QuestGuideArrow.getIns().guideTo(this, this.skillSet.x + 40, this.skillSet.y + 40)
    }, e
}(BaseEUIView);
__reflect(VRoleSkillPage.prototype, "VRoleSkillPage");
var VRoleSkillTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "RoleSkillTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.sure), this.skillgrid.visible = !0, this.skillgrid.tipGrp.visible = this.skillgrid.lbLv.visible = this.skillgrid.txtNm.visible = !1, this.skillgrid.imglv.visible = !0
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = e;
        this.skillgrid.data = i, this.lbname.text = i.name, this.lbdes.text = i.getDes(), this.closeSec = 6, this.updateTime(), GameGlobal.tick.addInterv(this.frame, 1, this), GameGlobal.tick.addInterv(this.tick, 1e3, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.frame), GameGlobal.tick.removeInterv(this.tick)
    }, e.prototype.tick = function (t) {
        t.closeSec -= 1, t.updateTime(), t.closeSec <= 0 && t.closeHandler()
    }, e.prototype.updateTime = function () {
        this.sure.label = this.closeSec + "秒后关闭"
    }, e.prototype.frame = function (t) {
        t.imgHightLine.rotation += 2
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VRoleSkillTip.prototype, "VRoleSkillTip");
var VRoleXLPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "RoleXLPageSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        for (var t = this, e = 0; 8 > e; e++) {
            var i = t["g" + e];
            t.grids.push(i), i.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onT, t)
        }
        t.btnXianJie.addEventListener(egret.TouchEvent.TOUCH_TAP, t.btnXJT, t), t.btnOne.addEventListener(egret.TouchEvent.TOUCH_TAP, t.btnOneT, t), t.btnTen.addEventListener(egret.TouchEvent.TOUCH_TAP, t.btnTenT, t), t.btnUse.addEventListener(egret.TouchEvent.TOUCH_TAP, t.btnUseT, t), t.btnWen.addEventListener(egret.TouchEvent.TOUCH_TAP, t.btnWenT, t), this.viewitem.enableTip(), t.btnOne.label = "一键学习", t.btnTen.label = "直升一级", t.btnUse.label = "修炼上限"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        GameGlobal.modelXiuLian.on(ModelXiuLian.UPDATE, i.update, i), GameGlobal.modelXiuLian.on(ModelXiuLian.SETDATA, i.SetData, i), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, i.upGrid, i), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, i.upXh, i), GameGlobal.modelXiuLian.CG1501(), this.upGrid()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this);
        var e = this;
        GameGlobal.modelXiuLian.off(ModelXiuLian.UPDATE, e.update, e), GameGlobal.modelXiuLian.off(ModelXiuLian.SETDATA, e.SetData, e), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, e.upGrid, e), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, e.upXh, e), ModelXiuLian.isOneStudy && this.btnOneT()
    }, e.prototype.SetData = function () {
        this.initdata();
        var t = this._oldSel;
        this.setSelIndex(t.vo.index), t.showEff()
    }, e.prototype.update = function () {
        if (this.initdata(), this.setSelIndex(0), ModelXiuLian.isUseItem) {
            ModelXiuLian.isUseItem = !1;
            for (var t = 1, e = function () {
                    var e = i.grids[o];
                    GameGlobal.tick.addInterv(function () {
                        e.showEff()
                    }, t, i, !0), t += 100
                }, i = this, o = 0; o < this.grids.length; o++) e()
        }
    }, e.prototype.btnXJT = function () {
        GameGlobal.layerMgr.open(UIConst.TARGET, 2)
    }, e.prototype.btnOneT = function () {
        ModelXiuLian.isOneStudy = !ModelXiuLian.isOneStudy, this.btnOne.label = ModelXiuLian.isOneStudy ? "取消" : "一键学习", ModelXiuLian.isOneStudy ? (GameGlobal.modelXiuLian.CG1503(this._oldSel.vo.index, 1), GameGlobal.tick.addInterv(this.tentick, 300, this)) : GameGlobal.tick.removeInterv(this.tentick, this)
    }, e.prototype.btnTenT = function () {
        var t = this,
            e = this._oldSel.data,
            i = e.getXh(),
            o = (e.exp - e.jy) / 10 * i,
            n = "确认消耗" + HtmlUtil.color(o + "银两", "#d83503") + "提升一级？\n（银两不足时，将直接提升到当前最大值）";
        ViewAlert.show(n, function () {
            GameGlobal.modelXiuLian.CG1503(t._oldSel.vo.index, 2)
        })
    }, e.prototype.tentick = function (t) {
        ModelXiuLian.isOneStudy && GameGlobal.modelXiuLian.CG1503(t._oldSel.vo.index, 1)
    }, e.prototype.btnUseT = function () {
        var t = "是否使用突境丹提升1级修炼上限\n突境丹剩余使用次数：" + HtmlUtil.color(Vo_XiuLian.syItemNum, "#d83503");
        ViewAlert.show(t, function () {
            ModelXiuLian.isUseItem = !0, GameGlobal.modelXiuLian.CG1503(0, 3)
        })
    }, e.prototype.btnWenT = function () {
        var t = "1. 修炼等级上限受到人物等级限制；人物等级越高，则修炼等级上限越高；\n2.	修炼等级越高，则加成的属性越多，实力越强大；\n";
        ViewWenHao.show(t, 30)
    }, e.prototype.onT = function (t) {
        ModelXiuLian.isOneStudy && this.btnOneT(), this.setSelIndex(this.grids.indexOf(t.currentTarget))
    }, e.prototype.setSelIndex = function (t) {
        this._oldSel && (this._oldSel.selected = !1);
        var e = this.grids[t];
        e && (e.selected = !0, this._oldSel = e, this._setCurVo(e.data))
    }, e.prototype._setCurVo = function (t) {
        this.lbName.textFlow = HtmlUtil.parse(t.name + HtmlUtil.color(t.level, "#10a244") + "级"), this.lbDes1.text = t.des1, this.lbDes2.text = t.des2 + ":";
        var e = t.setJc();
        0 == e.length ? this.addGroup.visible = !1 : (this.addGroup.visible = !0, this.txtadd1.text = e[0], this.txtadd2.text = e[1]), this.xlname.text = t.name, this.xldes.text = t.des3, this.limit.text = Vo_XiuLian.xlLimit + "级", this.upProgress(t.level, t.jy, t.exp), this.upXh()
    }, e.prototype.upProgress = function (t, e, i) {
        egret.Tween.removeTweens(this.progress);
        var o = !0;
        if (Vo_XiuLian.getMaxLev() <= t) {
            var n = this.g_progress.width;
            this.txtProgress.text = "max"
        } else {
            var a = e / i;
            n = this.g_progress.width * a, Vo_XiuLian.isUp && (egret.Tween.get(this.progress).to({
                width: this.g_progress.width
            }, 300, egret.Ease.circOut).to({
                width: 0
            }).to({
                width: n
            }, 200, egret.Ease.circOut), Vo_XiuLian.isUp = !1, o = !1), this.txtProgress.text = e.toString() + "/" + i.toString()
        }
        o && egret.Tween.get(this.progress).to({
            width: n
        }, 500, egret.Ease.circOut)
    }, e.prototype.upXh = function () {
        var t = this._oldSel.data,
            e = t.getXh();
        this.ylOne.text = e.toString();
        var i = (t.exp - t.jy) / 10 * e;
        return this.ylTen.text = ConfigHelp.getNumText(i), this._oldSel.data.level == Vo_XiuLian.xlLimit ? void this.btnTen.setNoticeVis(!1) : void this.btnTen.setNoticeVis(GameGlobal.modelRole.voMine.yinliang >= i)
    }, e.prototype.upGrid = function () {
        var t = 1721,
            i = GameGlobal.modelBag.getItemCount(t),
            o = VoItem.create();
        return o.init(t), o.count = i, e.curritem = o, this.viewitem.data = o, Vo_XiuLian.xlLimit >= Vo_XiuLian.getMaxLev() || Vo_XiuLian.syItemNum <= 0 ? void this.btnUse.setNoticeVis(!1) : void this.btnUse.setNoticeVis(i >= 1)
    }, e.prototype.initdata = function () {
        var t = 0;
        for (var e in Vo_XiuLian.Map) {
            var i = Vo_XiuLian.Map[e],
                o = this.grids[t];
            o.data = i, t++
        }
    }, e
}(BaseEUIView);
__reflect(VRoleXLPage.prototype, "VRoleXLPage");
var CZItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "CZItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnDH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onDH, this), this.grid.enableTip(), this.grid.showOne = !0
    }, e.prototype.onDH = function () {
        var t = this.data.xuhao,
            e = this.data.number,
            i = 1007,
            o = GameGlobal.modelBag.getItemCount(i);
        return e > o ? void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, i) : void GameGlobal.modelRole.CG363(t)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.grid.data = t.vo, this.txtName.text = t.vo.name, this.txtNum.text = "X" + t.number;
            var e = t.dayxg,
                i = t.fxg,
                o = Math.max(e, i);
            t.xuhao < 2e3 && o > 0 ? (t.boughtNum >= o ? (this.txtXG.textColor = 16646144, this.btnDH.enabled = !1) : (this.txtXG.textColor = 2995506, this.btnDH.enabled = !0), this.gpCont.contains(this.txtXG) || this.gpCont.addChild(this.txtXG), this.txtXG.text = "限购(" + t.boughtNum + "/" + o + ")") : (this.btnDH.enabled = !0, this.gpCont.contains(this.txtXG) && this.gpCont.removeChild(this.txtXG))
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "boughtNum", {
        set: function (t) {
            this.data.boughtNum = t;
            var e = this.data.dayxg,
                i = this.data.fxg,
                o = Math.max(e, i);
            t >= o ? this.txtXG.textColor = 16646144 : this.txtXG.textColor = 2995506, this.txtXG.text = "限购(" + t + "/" + o + ")"
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(CZItem.prototype, "CZItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var GetSPItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/equip/GetSPItemSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.btnDH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onDH, this)
    }, e.prototype.onDH = function () {
        GameGlobal.modelRole.CG365(this.data.lid)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.grid.data = t, this.txtLv.text = "Lv." + t.level + " " + t.name, this.txtNum.text = "分解获得：橙装碎片X" + CFG_CZDH.LIB2[t.id].number
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(BaseEUIView);
__reflect(GetSPItem.prototype, "GetSPItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VCZDHTabItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.itemIndex = -1, e.skinName = "resource/eui_skins/game/role/czdh/CZDHTabItem.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.imgNotice.visible = !1, this.width = 180
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, t && (this.lb.text = t.label)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this.currentState = t ? "sel" : "def"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VCZDHTabItem.prototype, "VCZDHTabItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var ModelSevenLogin = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.loginDayed = [], e.loginDay = -1, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1902, this.GC1902, this), e.regHand(1904, this.GC1904, this)
    }, e.prototype.CG1901 = function () {
        var t = this.getBytes();
        this.sendSocket(1901, t)
    }, e.prototype.CG1903 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(1903, e)
    }, e.prototype.GC1902 = function (t, i) {
        t.loginDay = i.readShort();
        var o = i.readShort();
        t.loginDayed = [];
        for (var n = 0; o > n; n++) {
            var a = i.readShort();
            t.loginDayed.push(a)
        }
        Vo_SevenItem.Sort(), t.notify(e.SORTDATA), 7 == t.loginDayed.length && t.notify(e.GOTOVER)
    }, e.prototype.GC1904 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort(),
                a = Vo_SevenItem.setChangeByDay(n);
            t.notify(e.DANTIAO, a)
        } else 2 == o ? ViewText.text("已领取，不能重复领取") : 3 == o ? ViewText.text("配置表没有该天数") : 4 == o ? GameGlobal.modelBag.checkRLTips(0) : 5 == o && ViewText.text("登陆天数不足")
    }, e.SORTDATA = "SORTDATA", e.DANTIAO = "DANTIAO", e.GOTOVER = "GOTOVER", e
}(BaseModel);
__reflect(ModelSevenLogin.prototype, "ModelSevenLogin");
var Vo_SevenItem = function () {
    function t() {
        this.isSort = !1
    }
    return t.create = function (e, i) {
        var o = new t;
        return o.day = e, o.awards = i, o.txtDay = t.switDay(e), o
    }, t.init = function () {
        for (var e in CFG_SEVENLOGIN.LIB) {
            var i = CFG_SEVENLOGIN.LIB[e],
                o = i.day,
                n = i.reward,
                a = t.create(o, n);
            t.List.push(a)
        }
    }, t.setChangeByDay = function (e) {
        for (var i = t.List, o = 0; o < i.length; o++)
            if (i[o].day == e) return i[o].change = !0, i[o];
        return null
    }, t.isHaveDay = function (t) {
        for (var e = GameGlobal.modelsevenlogin.loginDayed, i = 0; i < e.length; i++)
            if (e[i] == t) return !0;
        return !1
    }, t.Sort = function () {
        for (var e = [], i = t.List, o = 0; o < i.length; o++) {
            var n = i[o];
            if (t.isHaveDay(n.day) && !n.isSort) {
                n.isSort = !0;
                var a = t.List.splice(o, 1);
                e = e.concat(a), o--
            }
        }
        t.List = t.List.concat(e)
    }, t.switDay = function (t) {
        switch (t) {
            case 1:
                return "第一天";
            case 2:
                return "第二天";
            case 3:
                return "第三天";
            case 4:
                return "第四天";
            case 5:
                return "第五天";
            case 6:
                return "第六天";
            case 7:
                return "第七天"
        }
    }, t.List = [], t
}();
__reflect(Vo_SevenItem.prototype, "Vo_SevenItem");
var VSevenItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "resource/eui_skins/game/fuLiDaTing/SevenLogin/SevenItem.exml", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), DisplayUtil.popBtnStyle(this.btnGet), this.btnGet.label = "领取", this.btnGet.setNoticeVis(!0)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t;
            var e = t.day;
            this.day.text = t.txtDay;
            var i = GameGlobal.modelsevenlogin.loginDay;
            if (i >= e) Vo_SevenItem.isHaveDay(e) ? this.getedVis() : this.btnGetVis();
            else if (e - i == 1) this.tomoVis();
            else if (e - i > 1) {
                var o = (e - i).toString();
                this.chaNVis(o)
            }
            ConfigHelp.makeStrGrids(t.awards, this.grids, 0, 0, this.container, !0, 15), t.change && (egret.Tween.removeTweens(this.Group), t.change = !1, egret.Tween.get(this.Group).to({
                x: 500,
                alpha: 0
            }, 300).set({
                x: -500
            }, this.Group).to({
                x: 0,
                alpha: 1
            }, 300).call(this.onTweened))
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onTweened = function () {
        GameGlobal.modelsevenlogin.CG1901()
    }, e.prototype.btnT = function (t) {
        GameGlobal.modelsevenlogin.CG1903(this.vo.day)
    }, e.prototype.btnGetVis = function () {
        this.btnGet.visible = !0, this.geted.visible = !1, this.tomorrow.visible = !1, this.chaday.visible = !1, this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnT, this)
    }, e.prototype.getedVis = function () {
        this.btnGet.visible = !1, this.geted.visible = !0, this.tomorrow.visible = !1, this.chaday.visible = !1
    }, e.prototype.tomoVis = function () {
        this.btnGet.visible = !1, this.geted.visible = !1, this.tomorrow.visible = !0, this.chaday.visible = !1
    }, e.prototype.chaNVis = function (t) {
        this.chaday.text = "还差" + t + "天", this.btnGet.visible = !1, this.geted.visible = !1, this.tomorrow.visible = !1, this.chaday.visible = !0
    }, e
}(eui.ItemRenderer);
__reflect(VSevenItem.prototype, "VSevenItem");
var VSevenLoginPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.ll = new eui.ArrayCollection, e.skinName = "resource/eui_skins/game/fuLiDaTing/SevenLogin/SevenLoginPnl.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.base.title = "登录送SR仙神", this.list.dataProvider = this.ll, this.list.itemRenderer = VSevenItem, Vo_SevenItem.init()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelsevenlogin.on(ModelSevenLogin.DANTIAO, this.updateDAN, this), GameGlobal.modelsevenlogin.on(ModelSevenLogin.SORTDATA, this.update, this), GameGlobal.modelsevenlogin.CG1901(), IconUtil.setIconSrc(this.bgg, "FL_dengluBg_png")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelsevenlogin.off(ModelSevenLogin.DANTIAO, this.updateDAN, this), GameGlobal.modelsevenlogin.off(ModelSevenLogin.SORTDATA, this.update, this), IconUtil.setIconSrc(this.bgg)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.update = function () {
        DisplayUtil.fillDataAC(this.ll, Vo_SevenItem.List)
    }, e.prototype.updateDAN = function (t) {
        this.ll.itemUpdated(t)
    }, e
}(BaseEUIView);
__reflect(VSevenLoginPnl.prototype, "VSevenLoginPnl");
var NoticeSCJJTZ = function () {
    function t() {}
    return t.noticeSC = function () {
        for (var t = VoSCAwards.map.getLength(), e = 0; t > e; e++) {
            var i = VoSCAwards.map.getByIndex(e);
            if (2 == i.state) return !0
        }
        return !1
    }, t.noticeJiJin = function () {
        for (var t = VoCZJiJin.map.getList(), e = t.length, i = 0; e > i; i++) {
            var o = t[i];
            if (2 == o.state) return !0
        }
        return !1
    }, t.noticeTZPlan = function () {
        return VoTouZiPlan.isTouZi && 0 == VoTouZiPlan.dayGet
    }, t.hideShouChong = function () {
        for (var t = VoSCAwards.map.getLength(), e = 0; t > e; e++) {
            var i = VoSCAwards.map.getByIndex(e);
            if (3 != i.state) return !1
        }
        return t > 0
    }, t.hideJiJin = function () {
        for (var t = VoCZJiJin.map.getLength(), e = 0; t > e; e++) {
            var i = VoCZJiJin.map.getByIndex(e);
            if (3 != i.state) return !1
        }
        return !0
    }, t.hideTZPlan = function () {
        for (var t = VoTouZiPlan.map.getLength(), e = 0; t > e; e++) {
            var i = VoTouZiPlan.map.getByIndex(e);
            if (1 != i.state) return !1
        }
        return 0 == t
    }, t.has50RMBFinished = function () {
        return VoSCAwards.czValue >= 50
    }, t.notice = function () {
        var e = t.noticeSC(),
            i = t.noticeJiJin(),
            o = t.noticeTZPlan();
        return e || i || o
    }, t.hide = function () {
        var e = t.hideShouChong();
        return e
    }, t
}();
__reflect(NoticeSCJJTZ.prototype, "NoticeSCJJTZ");
var VShouChongPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.uiid_to_indexs = [1062, 1068, 1065], e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this.base;
        e.createTabGroup().createPageGrp(), this.addCloseListen(e.btnClose), this.addCloseListen(e.btnReturn), e.addTab("成长基金", 1, 2), e.addTab("投资计划", 2, 3), e.listenTabClick(this.onSel, this);
        var i = GameGlobal.layerMgr;
        i.reg(UIConst.SHOUCHONG, VShouChong, e.pageGrp), i.reg(UIConst.CZJIJIN, VCZJiJin, e.pageGrp), i.reg(UIConst.TOUZIPLAN, VTouziPlan, e.pageGrp)
    }, e.prototype.onSel = function (t) {
        this.setSel(t.sort)
    }, e.prototype.setSel = function (t) {
        if (this._tabIndex != t) {
            switch (this._tabIndex) {
                case 0:
                    GameGlobal.layerMgr.close(UIConst.SHOUCHONG);
                    break;
                case 1:
                    GameGlobal.layerMgr.close(UIConst.CZJIJIN);
                    break;
                case 2:
                    GameGlobal.layerMgr.close(UIConst.TOUZIPLAN)
            }
            switch (t) {
                case 0:
                    this.base.title = "首充", GameGlobal.layerMgr.open(UIConst.SHOUCHONG);
                    break;
                case 1:
                    this.base.title = "成长基金", GameGlobal.layerMgr.open(UIConst.CZJIJIN);
                    break;
                case 2:
                    this.base.title = "投资计划", GameGlobal.layerMgr.open(UIConst.TOUZIPLAN)
            }
            this.base.setTabSelBySort(t), this._tabIndex = t
        }
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), e) {
            var i = this.uiid_to_indexs.indexOf(e);
            i = Math.max(0, i)
        } else i = 0;
        this.setSel(i), this.onUpdate()
    }, e.prototype.onUpdate = function () {
        this.noticeSc(), this.hideShouChong(), this.noticeJiJin(), this.hideCZJiJin(), this.noticeTZPlan(), this.hideTZPlan()
    }, e.prototype.noticeSc = function () {
        this.base.setNoticBySysID(1, NoticeSCJJTZ.noticeSC())
    }, e.prototype.hideShouChong = function () {
        var t = NoticeSCJJTZ.hideShouChong(),
            e = this.base;
        t ? e.removeTabByID(1) : e.addTab("首充", 0, 1)
    }, e.prototype.noticeJiJin = function () {
        this.base.setNoticBySysID(2, NoticeSCJJTZ.noticeJiJin())
    }, e.prototype.hideCZJiJin = function () {
        var t = NoticeSCJJTZ.hideJiJin(),
            e = this.base;
        t ? e.removeTabByID(2) : e.addTab("成长基金", 1, 2)
    }, e.prototype.noticeTZPlan = function () {
        this.base.setNoticBySysID(3, NoticeSCJJTZ.noticeTZPlan())
    }, e.prototype.hideTZPlan = function () {
        var t = NoticeSCJJTZ.hideTZPlan(),
            e = this.base;
        t ? e.removeTabByID(3) : e.addTab("投资计划", 2, 3)
    }, e.prototype.updateSel = function () {
        this.base.tabGrp.numChildren ? this.base.setTabSelIdx(0) : this.closeHandler()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.setSel(-1)
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(VShouChongPage.prototype, "VShouChongPage");
var ItemCZJiJin = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemCZJiJinSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnHand.label = "领取", DisplayUtil.popBtnStyle(this.btnHand), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        1 == this.data.state ? ViewText.text("条件不足，不可领取") : 3 == this.data.state ? ViewText.text("您已领取了该奖励") : GameGlobal.modelczjj.CG2623(this.data.cfg.id)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.cfg.level;
            this.txtDes.textFlow = HtmlUtil.parse("达到" + HtmlUtil.color(e, "#b85e0e") + "级, 返还");
            var i = ConfigHelp.makeVoList(t.cfg.jl),
                o = i[0];
            switch (this.txtAward1.text = o.count + "", this.setIcon(this.iconCurrency1, o), o = i[1], this.txtAward2.text = o.count + "", this.setIcon(this.iconCurrency2, o), t.state) {
                case 1:
                    this.btnHand.label = "不可领取", this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1);
                    break;
                case 2:
                    this.btnHand.label = "领取", this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!0);
                    break;
                case 3:
                    this.btnHand.label = "已领取", this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1)
            }
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.bg.source = "CM2_json.bg1" : this.bg.source = "CM2_json.bg2"
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setIcon = function (t, e) {
        switch (e.type) {
            case 33:
                t.source = "MainScreen_json.bm_yb";
                break;
            case 32:
                t.source = "MainScreen_json.byl"
        }
    }, e
}(ItemBase);
__reflect(ItemCZJiJin.prototype, "ItemCZJiJin");
var ModelCZJiJin = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(2622, this.GC2622, this), e.regHand(2624, this.GC2624, this), e.regHand(2626, this.GC2626, this)
    }, e.prototype.CG2621 = function () {
        this.sendSocket(2621, this.getBytes())
    }, e.prototype.GC2622 = function (t, i) {
        0 == VoCZJiJin.map.getLength() && VoCZJiJin.init();
        for (var o = i.readByte(), n = i.readShort(), a = 0; n > a; a++) {
            var s = i.readByte(),
                r = i.readByte();
            VoCZJiJin.updateState(s, r)
        }
        VoCZJiJin.isTouZi = o, t.notify(e.msg_data), t.notice(), t.checkShowIcon()
    }, e.prototype.CG2623 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(2623, e)
    }, e.prototype.GC2624 = function (t, i) {
        var o = i.readByte(),
            n = i.readByte();
        if (1 == o) {
            VoCZJiJin.updateState(n, 3);
            t.checkShowIcon(), t.notify(e.msg_data), t.notice()
        } else ViewText.text("领取失败")
    }, e.prototype.CG2625 = function () {
        this.sendSocket(2625, this.getBytes())
    }, e.prototype.GC2626 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            VoCZJiJin.isTouZi = 1;
            var n = GameGlobal.layerMgr.getView(UIConst.CZJIJIN);
            n && n.updateState(), t.notify(e.msg_data)
        } else ViewText.text(["", "成功", "不能重复购买", "元宝不足"][o])
    }, e.prototype.notice = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.LEFTUI),
            e = GameGlobal.layerMgr.getView(UIConst.SHOUCHONGPAGE);
        t && (t.updateSCJJTZNot(), t.hideSCJJTZ()), e && (e.noticeJiJin(), e.hideCZJiJin())
    }, e.prototype.checkShowIcon = function () {
        var t = !NoticeSCJJTZ.hideJiJin();
        if (t) GameGlobal.modelAct.showGroupAct(4);
        else {
            var e = GameGlobal.modelAct.actData.getChildByID(4);
            e && e.getRemainSec() <= 0 && (GameGlobal.modelAct.actData.removeChild(e), e.dispose())
        }
    }, e.msg_data = "msg_data", e
}(BaseModel);
__reflect(ModelCZJiJin.prototype, "ModelCZJiJin");
var VoCZJiJin = function () {
    function t() {
        this.state = 1
    }
    return t.init = function () {
        if (!(t.map.getLength() > 0)) {
            var e = CFG_SHOUCHONG.LIB3;
            for (var i in e) {
                var o = e[i],
                    n = new t;
                n.cfg = o, n.state = 0, t.map.add(n, i)
            }
        }
    }, t.updateState = function (e, i) {
        var o = t.map.getByKey(e);
        return o && (o.state = i), o
    }, t.map = new CommondMap, t.isTouZi = 0, t.time = 0, t
}();
__reflect(VoCZJiJin.prototype, "VoCZJiJin");
var ItemSCSels = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemSCSelsSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.cfg.money,
                i = t.cfg.key;
            this.txtDes.text = "充值" + e + "元\n" + i, 1 == e ? this.txtDes.text = "任意充值\n" + i : this.txtDes.text = "充值" + e + "元\n" + i
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._selected
        },
        set: function (t) {
            this._selected = t, t ? (this.txtDes.textColor = 13385474, this.txtDes.size = 18, this.bg.source = "SCAtlas_json.chosen") : (this.txtDes.textColor = 11023619, this.txtDes.size = 16, this.bg.source = "SCAtlas_json.nChosen")
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemSCSels.prototype, "ItemSCSels");
var ModelShouChong = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.showLoginSCTip = !1, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1872, this.GC1872, this), e.regHand(1874, this.GC1874, this)
    }, e.prototype.CG1871 = function () {
        this.sendSocket(1871, this.getBytes())
    }, e.prototype.GC1872 = function (t, i) {
        0 == VoSCAwards.map.getLength() && VoSCAwards.init();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte(),
                s = i.readByte(),
                r = VoSCAwards.getById(a);
            r.state = s
        }
        VoSCAwards.czValue = i.readInt(), t.notice(), t.notify(e.msg_data)
    }, e.prototype.CG1873 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1873, e)
    }, e.prototype.GC1874 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            var o = e.readByte(),
                n = VoSCAwards.getById(o);
            n.state = 3;
            var a = GameGlobal.layerMgr.getView(UIConst.SHOUCHONG);
            a && a.updateState(n), t.notice()
        } else 5 == i ? GameGlobal.modelBag.checkRLTips(0) : (ViewText.text(["", "成功", "id不存在", "该奖励已领取", "充值额度未达标", null][i]), 5 == i && GameGlobal.layerMgr.open(UIConst.EQUIPRL))
    }, e.prototype.notice = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.LEFTUI),
            e = GameGlobal.layerMgr.getView(UIConst.SHOUCHONGPAGE);
        t && (t.updateSCJJTZNot(), t.hideSCJJTZ()), e && (e.noticeSc(), e.hideShouChong())
    }, e.msg_data = "msg_data", e
}(BaseModel);
__reflect(ModelShouChong.prototype, "ModelShouChong");
var VoSCAwards = function () {
    function t() {
        this.state = 0
    }
    return t.init = function () {
        if (!(t.map.getLength() > 0)) {
            var e = CFG_SHOUCHONG.LIB2;
            for (var i in e) {
                var o = e[i],
                    n = new t;
                n.cfg = o, n.state = 1, t.map.add(n, i)
            }
        }
    }, t.getByIndex = function (t) {
        return this.map.getByIndex(t)
    }, t.getById = function (t) {
        return this.map.getByKey(t)
    }, t.get1stCanGetJL = function () {
        for (var e = t.map.getLength(), i = -1, o = 0; e > o; o++) {
            var n = t.map.getByIndex(o);
            2 == n.state && (i = o)
        }
        if (-1 == i)
            for (var o = 0; e > o; o++)
                if (n = t.map.getByIndex(o), 1 == n.state) {
                    i = o;
                    break
                } return i = Math.max(i, 0)
    }, t.getIndexById = function (e) {
        var i = t.map.getList(),
            o = i.indexOf(t.getById(e));
        return o
    }, t.czValue = 0, t.map = new CommondMap, t
}();
__reflect(VoSCAwards.prototype, "VoSCAwards");
var VSC5beiTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.remainSec = 10, e.skinName = "ShouChongTip", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "scenetip2_png");
        var i = this;
        i.cont.scaleX = i.cont.scaleY = 0, egret.Tween.get(i.cont).to({
            scaleX: 1,
            scaleY: 1
        }, 500, egret.Ease.cubicInOut), this.remainSec = 30, GameGlobal.tick.addInterv(this.onTick, 1e3, this), GameGlobal.modelsevenlogin.on(ModelSevenLogin.GOTOVER, this.onSize, this)
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.bg), egret.Tween.removeTweens(this.cont), GameGlobal.modelsevenlogin.off(ModelSevenLogin.GOTOVER, this.onSize, this), GameGlobal.tick.removeInterv(this.onTick, this), this.playEff()
    }, e.prototype.playEff = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.LEFTUI);
        t && (egret.Tween.get(t.btnSC5bei).to({
            alpha: .5,
            scaleX: .97,
            scaleY: .97
        }, 200, egret.Ease.backOut).to({
            alpha: .95,
            scaleX: 1,
            scaleY: 1
        }, 200, egret.Ease.backOut).to({
            alpha: .7,
            scaleX: .98,
            scaleY: .98
        }, 150, egret.Ease.backOut).to({
            alpha: 1,
            scaleX: .99,
            scaleY: .99
        }, 150, egret.Ease.backOut).to({
            alpha: .8,
            scaleX: .99,
            scaleY: .99
        }, 100, egret.Ease.backOut).to({
            alpha: 1,
            scaleX: 1,
            scaleY: 1
        }, 100, egret.Ease.backOut).to({
            alpha: .8,
            scaleX: .995,
            scaleY: .995
        }, 50, egret.Ease.backOut).to({
            alpha: 1,
            scaleX: 1,
            scaleY: 1
        }, 50, egret.Ease.backOut), t.checkShowXSZMTip())
    }, e.prototype.closeHand = function () {
        var t = this;
        egret.Tween.get(t.cont).to({
            scaleX: 0,
            scaleY: 0
        }, 500, egret.Ease.cubicInOut).call(t.closeHandler, t)
    }, e.prototype.onSize = function () {
        this.cont.anchorOffsetY = this.skin.height / 2;
        var t = GameGlobal.layerMgr.getView(UIConst.LEFTUI);
        if (this.x = 160, t) {
            var e = t.btnSC5bei;
            if (e.parent) return this.y = GameGlobal.stage.stageHeight - 560 - (425 - e.y), void(this.x = e.x < 10 ? 80 : 160)
        }
        this.y = GameGlobal.stage.stageHeight - 480 - 340 - this.cont.anchorOffsetY
    }, e.prototype.onBtnT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btn:
                ModelMRSC.is5bei ? GameGlobal.layerMgr.open(UIConst.SHOUCHONGPAGE) : GameGlobal.layerMgr.open(UIConst.SC5BEI)
        }
        this.closeHand()
    }, e.prototype.onTick = function (t) {
        t.remainSec -= 1, t.remainSec <= 0 && t.closeHand()
    }, e.showLoginSC5bei = !0, e
}(BaseEUIView);
__reflect(VSC5beiTip.prototype, "VSC5beiTip");
var VShouChong = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData1 = new eui.ArrayCollection, e.grids = [], e.bgUrls = [
            ["bg1_png", "bgscskill_1_png", "bg2_2_png", "bg3_png", "bg4_png", "bg5_png"],
            ["bg1_png", "bgscskill_1_png", "bg2_1_png", "bg3_png", "bg4_png", "bg5_png"]
        ], e.skinName = "VShouChongSkin", e
    }
    return __extends(e, t), e.prototype.guide = function () {
        QuestGuideArrow.getIns().guideViewCenter(this.btnHand)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnHand), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.imgText = new ImageText, this.imgText.container = this.zhanliCont, this.imgText.charFunc = ImageText.STRFUNC, this.imgTextYB = new ImageText, this.imgTextYB.container = this.containerYB, this.imgTextYB.charFunc = ImageText.SCYUANBAO, this.containerSels.itemRenderer = ItemSCSels, this.containerSels.dataProvider = this.sourceData1, this.containerSels.useVirtualLayout = !1, this.containerAwards.useVirtualLayout = !1, this.containerSels.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onSel, this), 0 == VoSCAwards.map.getLength() && VoSCAwards.init();
        var e = VoSCAwards.map.getList();
        e.sort(function (t, e) {
            return t.cfg.money - e.cfg.money
        }), this.sourceData1.source = e
    }, e.prototype.onHand = function () {
        var t = VoSCAwards.getByIndex(this._index);
        switch (t.state) {
            case 1:
                GameGlobal.layerMgr.open(UIConst.RECHARGE);
                break;
            case 2:
                GameGlobal.modelshouchong.CG1873(t.cfg.id), this.txtLabel.text = "可领取";
                break;
            case 3:
                this.txtLabel.text = "已领取", this.btnBg.source = "CM1_json.disabled"
        }
    }, e.prototype.onSel = function (t) {
        var e = t.itemIndex;
        this.setSel(e)
    }, e.prototype.setSel = function (t) {
        if (this._index = t, this.containerSels.selectedIndex = t, -1 != t) {
            var e = GameGlobal.modelRole.voMine.job;
            if (1 == e) var i = this.bgUrls[0];
            else i = this.bgUrls[1];
            3 == t ? (this.imgdes.source = "SCAtlas_json.MX", DisplayUtil.addBy(this.imgdes, this.desGrp, 0)) : 4 == t ? (this.imgdes.source = "SCAtlas_json.MJ", DisplayUtil.addBy(this.imgdes, this.desGrp, 0)) : DisplayUtil.remove(this.imgdes), IconUtil.setIconSrc(this.bg, i[t]), this.onUpdate()
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e ? this.setSel(VoSCAwards.getIndexById(e)) : this.setSel(VoSCAwards.get1stCanGetJL()), GameGlobal.modelshouchong.on(ModelShouChong.msg_data, this.onUpdate, this), GameGlobal.modelshouchong.CG1871(), GameGlobal.layerMgr.close(UIConst.SHOUCHONGTIP)
    }, e.prototype.onUpdate = function () {
        var t = VoSCAwards.getByIndex(this._index),
            e = t.cfg.zl;
        this.imgText.setText("" + e);
        var i = t.cfg.jzyb;
        this.imgTextYB.setText("" + i);
        var o, n = GameGlobal.modelRole.voMine.job;
        o = 1 == n ? t.cfg.mjl : t.cfg.wjl, ConfigHelp.makeStrGrids(o, this.grids, 0, 0, this.containerAwards, !0), this.txtChongZhi.text = "已充值: " + VoSCAwards.czValue + "元", this.updateState(t)
    }, e.prototype.updateState = function (t) {
        switch (this.btnBg.source = "SCAtlas_json.btn", this.txtLabel.textColor = 11023619, this.imgNotice.visible = !1, t.state) {
            case 1:
                this.txtLabel.text = "立即充值";
                break;
            case 2:
                this.txtLabel.text = "可领取", this.imgNotice.visible = !0;
                break;
            case 3:
                this.txtLabel.text = "已领取", this.txtLabel.textColor = 16777215, this.btnBg.source = "CM1_json.disabled"
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bg, null), GameGlobal.modelshouchong.off(ModelShouChong.msg_data, this.onUpdate, this)
    }, e
}(BaseEUIView);
__reflect(VShouChong.prototype, "VShouChong");
var VShouChongTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.remainSec = 10, e.skinName = "ShouChongTip", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), ModelMRSC.is5bei) return void this.closeHandler();
        IconUtil.setIconSrc(this.bg, "scenetip2_png");
        var i = this;
        i.cont.scaleX = i.cont.scaleY = 0, egret.Tween.get(i.cont).to({
            scaleX: 1,
            scaleY: 1
        }, 500, egret.Ease.cubicInOut), this.remainSec = 30, GameGlobal.tick.addInterv(this.onTick, 1e3, this), GameGlobal.modelsevenlogin.on(ModelSevenLogin.GOTOVER, this.onSize, this)
    }, e.prototype.onClose = function () {
        egret.Tween.removeTweens(this.cont), GameGlobal.modelsevenlogin.off(ModelSevenLogin.GOTOVER, this.onSize, this), GameGlobal.tick.removeInterv(this.onTick, this), this.playEff()
    }, e.prototype.playEff = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.LEFTUI);
        t && (egret.Tween.get(t.btnSC).to({
            alpha: .5,
            scaleX: .97,
            scaleY: .97
        }, 200, egret.Ease.backOut).to({
            alpha: .95,
            scaleX: 1,
            scaleY: 1
        }, 200, egret.Ease.backOut).to({
            alpha: .7,
            scaleX: .98,
            scaleY: .98
        }, 150, egret.Ease.backOut).to({
            alpha: 1,
            scaleX: .99,
            scaleY: .99
        }, 150, egret.Ease.backOut).to({
            alpha: .8,
            scaleX: .99,
            scaleY: .99
        }, 100, egret.Ease.backOut).to({
            alpha: 1,
            scaleX: 1,
            scaleY: 1
        }, 100, egret.Ease.backOut).to({
            alpha: .8,
            scaleX: .995,
            scaleY: .995
        }, 50, egret.Ease.backOut).to({
            alpha: 1,
            scaleX: 1,
            scaleY: 1
        }, 50, egret.Ease.backOut), t.checkShowXSZMTip())
    }, e.prototype.closeHand = function () {
        var t = this;
        egret.Tween.get(t.cont).to({
            scaleX: 0,
            scaleY: 0
        }, 500, egret.Ease.cubicInOut).call(t.closeHandler, t)
    }, e.prototype.onSize = function () {
        this.cont.anchorOffsetY = this.skin.height / 2;
        var t = GameGlobal.layerMgr.getView(UIConst.LEFTUI);
        if (this.x = 75, t) {
            var e = t.btnDailyQuest;
            if (e.$stage) return void(this.y = GameGlobal.stage.stageHeight - 480 - 170 - this.cont.anchorOffsetY)
        }
        this.y = GameGlobal.stage.stageHeight - 480 - 85 - this.cont.anchorOffsetY
    }, e.prototype.onBtnT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btn:
                ModelMRSC.is5bei ? GameGlobal.layerMgr.open(UIConst.SHOUCHONGPAGE) : GameGlobal.layerMgr.open(UIConst.SC5BEI)
        }
        this.closeHand()
    }, e.prototype.onTick = function (t) {
        t.remainSec -= 1, t.remainSec <= 0 && t.closeHand()
    }, e
}(BaseEUIView);
__reflect(VShouChongTip.prototype, "VShouChongTip");
var ItemTouZiPlan = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.grids = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemTouZiPlanSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.container.useVirtualLayout = !1
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.cfg.day.toString(),
                i = e.length,
                o = parseInt(e.charAt(0));
            if (this.bm1.source = "SCAtlas_json." + o, i > 1) {
                var n = parseInt(e.charAt(1));
                DisplayUtil.addBy(this.bm2, this.wordContainer, 2), this.bm2.source = "SCAtlas_json." + n
            } else DisplayUtil.remove(this.bm2);
            switch (t.state) {
                case 0:
                    this.iconGot.source = null;
                    break;
                case 1:
                    this.iconGot.source = "SCAtlas_json.iconGot"
            }
            ConfigHelp.makeStrGrids(t.cfg.jl, this.grids, 0, 0, this.container, !0, 10, .9)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, t % 3 == 0 ? this.bg.source = "CM2_json.bg1" : this.bg.source = "CM2_json.bg2"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemTouZiPlan.prototype, "ItemTouZiPlan");
var ModelTZTZPlan = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(2632, this.GC2632, this), e.regHand(2634, this.GC2634, this), e.regHand(2636, this.GC2636, this)
    }, e.prototype.CG2631 = function () {
        this.sendSocket(2631, this.getBytes())
    }, e.prototype.GC2632 = function (t, i) {
        0 == VoTouZiPlan.map.getLength() && VoTouZiPlan.init();
        for (var o = i.readByte(), n = i.readShort(), a = 0; n > a; a++) {
            var s = i.readByte(),
                r = a + 1;
            VoTouZiPlan.updateState(r, s)
        }
        VoTouZiPlan.isTouZi = o;
        var l = i.readByte();
        VoTouZiPlan.dayGet = l, t.notify(e.msg_data), t.notice(), t.checkShowIcon()
    }, e.prototype.CG2633 = function () {
        this.sendSocket(2633, this.getBytes())
    }, e.prototype.GC2634 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = GameGlobal.layerMgr.getView(UIConst.TOUZIPLAN);
            VoTouZiPlan.isTouZi = 1, n && n.updateState(), t.notify(e.msg_data), t.notice(), t.checkShowIcon()
        } else ViewText.text("失败")
    }, e.prototype.CG2635 = function () {
        this.sendSocket(2635, this.getBytes())
    }, e.prototype.GC2636 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = GameGlobal.layerMgr.getView(UIConst.TOUZIPLAN);
            if (VoTouZiPlan.dayGet = 1, n) {
                var a = VoTouZiPlan.getLastUnGotVo();
                a.state = 1, n.updateState(), n.updateItem(a)
            }
            t.notify(e.msg_data), t.notice()
        } else ViewText.text("失败")
    }, e.prototype.notice = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.LEFTUI),
            e = GameGlobal.layerMgr.getView(UIConst.SHOUCHONGPAGE);
        t && (t.updateSCJJTZNot(), t.hideSCJJTZ()), e && (e.noticeTZPlan(), e.hideTZPlan())
    }, e.prototype.checkShowIcon = function () {
        var t = !NoticeSCJJTZ.hideTZPlan();
        if (t) GameGlobal.modelAct.showGroupAct(3);
        else {
            var e = GameGlobal.modelAct.actData.getChildByID(3);
            e && e.getRemainSec() <= 0 && (GameGlobal.modelAct.actData.removeChild(e), e.dispose())
        }
    }, e.msg_data = "msg_data", e
}(BaseModel);
__reflect(ModelTZTZPlan.prototype, "ModelTZTZPlan");
var VoTouZiPlan = function () {
    function t() {
        this.state = 0
    }
    return t.init = function () {
        if (!(t.map.getLength() > 0)) {
            var e = CFG_SHOUCHONG.LIB4;
            for (var i in e) {
                var o = e[i],
                    n = new t;
                n.cfg = o, n.state = 0, t.map.add(n, i)
            }
        }
    }, t.updateState = function (e, i) {
        var o = t.map.getByKey(e);
        o && (o.state = i)
    }, t.getLastUnGotVo = function () {
        for (var e = t.map.getList(), i = e.length, o = 0; i > o; o++) {
            var n = e[o];
            if (1 != n.state) return n
        }
        return null
    }, t.map = new CommondMap, t.isTouZi = 0, t.dayGet = 0, t.time = 0, t
}();
__reflect(VoTouZiPlan.prototype, "VoTouZiPlan");
var VTouziPlan = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.bg.source = "SCAtlas_json.bg2"
    }, e.prototype.initListData = function () {
        var t = new eui.TileLayout;
        t.horizontalGap = 10, t.verticalGap = 10, t.requestedColumnCount = 2, this.container.layout = t, this.container.itemRenderer = ItemTouZiPlan, this.container.dataProvider = this.sourceData, 0 == VoTouZiPlan.map.getLength() && VoTouZiPlan.init(), this.sourceData.source = VoTouZiPlan.map.getList()
    }, e.prototype.onHand = function () {
        switch (VoTouZiPlan.isTouZi) {
            case 0:
                if (GameGlobal.modelRole.voMine.yuanbao < 888) return void platform.askOpenRecharge();
                GameGlobal.modeltzPlan.CG2633();
                break;
            case 1:
                if (1 == VoTouZiPlan.dayGet) return;
                GameGlobal.modeltzPlan.CG2635()
        }
    }, e.prototype.addTick = function () {
        this.timeLabel.text = "倒计时: ";
        var t = GameGlobal.modelAct.actData.getChildByID(3);
        if (t) {
            var e = t.getRemainSec();
            this.txtTime.text = DateUtil.getHMSBySecond2(e), GameGlobal.tick.addInterv(this.onTick, 1e3, this)
        } else this.removeTick()
    }, e.prototype.removeTick = function () {
        this.timeLabel.text = "", this.txtTime.text = "", GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onTick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(3);
        if (e) {
            var i = e.getRemainSec();
            this.txtTime.text = DateUtil.getHMSBySecond2(i)
        } else t.removeTick()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e)
    }, e.prototype.onServ = function () {
        GameGlobal.modeltzPlan.on(ModelTZTZPlan.msg_data, this.onUpdate, this), GameGlobal.modeltzPlan.CG2631()
    }, e.prototype.offServ = function () {
        GameGlobal.modeltzPlan.on(ModelTZTZPlan.msg_data, this.onUpdate, this)
    }, e.prototype.onUpdate = function () {
        this.updateState(), VoTouZiPlan.time > 0 ? this.addTick() : this.removeTick(), this.sourceData.refresh()
    }, e.prototype.updateState = function () {
        switch (VoTouZiPlan.isTouZi) {
            case 0:
                this.btnLabel.text = "投资888元宝", this.setBtnEnable(!0);
                break;
            case 1:
                var t = VoTouZiPlan.dayGet;
                1 == t ? (this.btnLabel.text = "已领取", this.setBtnEnable(!1)) : (this.btnLabel.text = "领取", this.setBtnEnable(!0))
        }
    }, e.prototype.updateItem = function (t) {
        this.sourceData.itemUpdated(t)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e
}(VCZJiJin);
__reflect(VTouziPlan.prototype, "VTouziPlan");
var ModelShuang11 = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(4452, this.GC4452, this), e.regHand(4454, this.GC4454, this), e.regHand(4456, this.GC4456, this), e.regHand(4458, this.GC4458, this), e.regHand(4460, this.GC4460, this), e.regHand(4492, this.GC4492, this), e.regHand(4494, this.GC4494, this)
    }, e.prototype.CG4451 = function () {
        var t = this.getBytes();
        this.sendSocket(4451, t)
    }, e.prototype.GC4452 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte(),
                s = Vo_shuang11sign.Map[a];
            s && (s.issign = !0)
        }
        Vo_shuang11sign.nowDay = i.readByte(), Vo_shuang11sign.synum = i.readByte(), Vo_shuang11sign.syBuyNum = i.readByte(), t.notify(e.MSG_UPDATE)
    }, e.prototype.CG4453 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(4453, e)
    }, e.prototype.GC4454 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte(),
                a = Vo_shuang11sign.Map[n];
            a && (a.issign = !0), t.notify(e.MSG_UPDATE)
        } else {
            var s = ["", "", "签到失败！", "需完成前几天签到", "背包已满", "已签到"];
            ViewText.text(s[o])
        }
    }, e.prototype.CG4455 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(4455, e)
    }, e.prototype.GC4456 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte(),
                a = Vo_shuang11sign.Map[n];
            a && (a.issign = !0), t.notify(e.MSG_UPDATE)
        } else 2 == o ? ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        }) : GameGlobal.layerMgr.open(UIConst.EQUIPRL)
    }, e.prototype.CG4457 = function () {
        var t = this.getBytes();
        this.sendSocket(4457, t)
    }, e.prototype.GC4458 = function (t, e) {
        var i = e.readByte();
        t.CG4451(), 1 == i || ViewText.text("今日已无挑战次数")
    }, e.prototype.CG4459 = function () {
        var t = this.getBytes();
        this.sendSocket(4459, t)
    }, e.prototype.GC4460 = function (t, i) {
        var o = i.readByte();
        1 == o ? (Vo_shuang11sign.synum++, Vo_shuang11sign.syBuyNum--, t.notify(e.MSG_UPDATE)) : 2 == o ? ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        }) : 3 == o && ViewText.text("没有购买次数")
    }, e.prototype.CG4491 = function () {
        var t = this.getBytes();
        this.sendSocket(4491, t)
    }, e.prototype.GC4492 = function (t, i) {
        for (var o = i.readShort(), n = [], a = 0; o > a; a++) {
            var s = i.readByte(),
                r = i.readUTF(),
                l = i.readInt(),
                h = {
                    sort: s,
                    playerName: r,
                    cost: l
                };
            n.push(h)
        }
        t.notify(e.MSG_PHBUPDATE, n)
    }, e.prototype.CG4493 = function () {
        var t = this.getBytes();
        this.sendSocket(4493, t)
    }, e.prototype.GC4494 = function (t, i) {
        var o = i.readByte(),
            n = i.readInt(),
            a = {
                sort: o,
                cost: n
            };
        t.notify(e.MSG_PMUPDATE, a)
    }, e.MSG_UPDATE = "MSG_UPDATE", e.MSG_PHBUPDATE = "MSG_PHBUPDATE", e.MSG_PMUPDATE = "MSG_PMUPDATE", e
}(BaseModel);
__reflect(ModelShuang11.prototype, "ModelShuang11");
var Shuang11Event = function () {
    function t() {}
    return t.pre = "SHUANG_11_EVNET_", t.UPDATE_FEST_EMISSARY_INFO = t.pre + "UPDATE_FEST_EMISSARY_INFO", t.UPDATE_RANK_HURT_BOSS = t.pre + "UPDATE_RANK_HURT_BOSS", t.UPDATE_BUY_TIMES = t.pre + "UPDATE_BUY_TIMES", t.CHANLLENGE_TIPS = t.pre + "CHANLLENGE_TIPS", t.CHANLLENGE_BOSS_RESULT = t.pre + "CHANLLENGE_BOSS_RESULT", t.UPDATE_EXTRA_AWARD_STATE = t.pre + "UPDATE_EXTRA_AWARD_STATE", t
}();
__reflect(Shuang11Event.prototype, "Shuang11Event");
var VShuang11 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curst = -1, e.skinName = "Shuang11Skin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this,
            e = this.base;
        e.btnReturn.visible = !1;
        var i = GameGlobal.layerMgr;
        this.addCloseListen(e.btnClose).addCloseListen(e.btnReturn), this.btnWenhao.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onWenHao, this), e.createTabGroup().createPageGrp(), i.reg(UIConst.SHUANG11SIGN, VShuang11_sign, e.pageGrp), i.reg(UIConst.FESTIVALEMISSARY, FestivalEmissaryView, e.pageGrp), i.reg(UIConst.NATIONALDAY_XL, VNationalDay_xl, e.pageGrp), i.reg(UIConst.SHUANG11STORE, ViewShuang11ShangCheng, e.pageGrp), i.reg(UIConst.SHUANG11XFPH, VShuang11XFPH, e.pageGrp), e.addTab("每日签到", 0, UIConst.SHUANG11SIGN), e.addTab("节日使者", 1, UIConst.FESTIVALEMISSARY), e.addTab("双11商城", 2, UIConst.SHUANG11STORE), e.addTab("充值献礼", 3, UIConst.NATIONALDAY_XL), e.addTab("消费排行", 4, UIConst.SHUANG11XFPH), e.listenTabClick(t.onTbtn, t)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e ? this.base.setTabSelIdx(e, !0) : this.base.setTabSelIdx(0, !0), GameGlobal.tick.addInterv(this.tick, 1e3, this)
    }, e.prototype.onClose = function () {
        this.setCurSt(-1), GameGlobal.tick.removeInterv(this.tick, this)
    }, e.prototype.updateWenHao = function () {
        0 == this._curst ? this.btnWenhao.visible = !0 : this.btnWenhao.visible = !1
    }, e.prototype.onWenHao = function () {
        0 == this._curst && ViewWenHao.show(CFG_COMMOND.LIBWFSM[1122].detail, 24)
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(28);
        if (e) {
            var i = e.getChildByID(65);
            if (!i) return void t.closeHandler();
            var o = i.getRemainSec();
            0 > o && (ViewText.text("活动已结束"), t.closeHandler())
        } else t.closeHandler()
    }, e.prototype.onTbtn = function (t) {
        var e = t.sort;
        CFG_COMMOND.canDo(t.bindSysID) && (this.base.title = t.text, this.setCurSt(e), this.updateWenHao())
    }, e.prototype.setCurSt = function (t) {
        if (this._curst != t) {
            var e = GameGlobal.layerMgr;
            switch (this._curst) {
                case 0:
                    e.close(UIConst.SHUANG11SIGN);
                    break;
                case 1:
                    e.close(UIConst.FESTIVALEMISSARY);
                    break;
                case 2:
                    e.close(UIConst.SHUANG11STORE);
                    break;
                case 3:
                    e.close(UIConst.NATIONALDAY_XL);
                    break;
                case 4:
                    e.close(UIConst.SHUANG11XFPH)
            }
            switch (t) {
                case 0:
                    e.open(UIConst.SHUANG11SIGN);
                    break;
                case 1:
                    e.open(UIConst.FESTIVALEMISSARY);
                    break;
                case 2:
                    e.open(UIConst.SHUANG11STORE, 1);
                    break;
                case 3:
                    e.open(UIConst.NATIONALDAY_XL);
                    break;
                case 4:
                    e.open(UIConst.SHUANG11XFPH)
            }
            this.base.setTabSelIdx(t), this._curst = t
        }
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VShuang11.prototype, "VShuang11");
var CFG_CLFB = function () {
    function t() {}
    return t
}();
__reflect(CFG_CLFB.prototype, "CFG_CLFB");
var CFG_COMMOND = function () {
    function t() {}
    return t.init = function () {
        VHBOnbattle.levels = this.LIB[1011].arg.gridOpenLv
    }, t.getName = function (e) {
        return t.LIB[e] ? t.LIB[e].name : e + ""
    }, t.getOpenLevel = function (e) {
        var i = t.LIB[e];
        return i ? i.openlv : 0
    }, t.isOpen = function (e, i, o) {
        void 0 === i && (i = !1);
        var n = !0;
        return n = t.isOpenByCFG(e, i)
    }, t.isOpenByCFG = function (t, e) {
        void 0 === e && (e = !1);
        var i = !0,
            o = this.LIB[t];
        if (o) {
            var n = GameGlobal.modelRole.voMine.level;
            i = n >= o.openlv, !i && e && ViewText.text("[" + o.name + "]" + o.openlv + " 级开启")
        }
        return i
    }, t.addXianZhi = function (t) {
        this.xianZhi[t] = !0
    }, t.delXianZhi = function (t) {
        delete this.xianZhi[t]
    }, t.canDo = function (t, e) {
        void 0 === e && (e = !0);
        var i = this.LIB[t];
        if (i) {
            var o = GameGlobal.modelRole.voMine.level,
                n = o >= i.openlv;
            if (!n) return e && ViewText.text("[" + i.name + "]" + i.openlv + " 级开启"), !1
        }
        var a = this.LIBXTXZ[t];
        if (i && a)
            for (var s = 0, r = a.xz.length; r > s; s++) {
                var l = a.xz[s];
                if (this.xianZhi[l]) {
                    var h = !1;
                    if (!h) {
                        if (e) {
                            var c = this.LIB[l],
                                p = c ? c.name : "sysID:" + l;
                            ViewText.text(Lang.reTxt("{0}中不能参与{1}", p, i.name))
                        }
                        return !1
                    }
                }
            }
        return !0
    }, t.ROLE = 1001, t.BAG = 1002, t.ITEM = 1003, t.EQUIP = 1004, t.RONGLIAN = 1005, t.CHENGZHUANG = 1006, t.EMAIL = 1007, t.CHAT = 1008, t.SKILL = 1009, t.GONGAO = 1010, t.HUOBAN = 1011, t.HUOBANZF = 1012, t.PET = 1013, t.SHILIAN = 1014, t.JJC = 1015, t.SUOYAOTA = 1016, t.CAILIAOFB = 1017, t.ZDFB = 1018, t.XIULIAN = 1019, t.PANGHANGBANG = 1020, t.NEWERQUEST = 1021, t.CAST = 1022, t.GUANQIA = 1030, t.BOSS = 1031, t.QMBOSS = 1035, t.STORE = 1032, t.CTG = 1033, t.HORSE = 1037, t.WING = 1038, t.SHENBING = 1039, t.CHOUKA = 1041, t.YAOQIANSHU = 1043, t.EVERYDATSIGN = 1044, t.TITLE = 1045, t.MENPAI = 1046, t.DALIY = 1049, t.YUEZHOUKA = 1050, t.WDTD = 1051, t.EQUIPSX = 1053, t.DAIRYANSWER = 1054, t.FASHION = 1058, t.EXPBACK = 1059, t.SEVENLOGIN = 1061, t.SHOUCHONGPAGE = 1062, t.EXPGIFT = 1064, t.FUWEN = 1071, t.FWBOSS = 1073, t.CZWAR = 1074, t.CAMP_WAR = 1130, t.HALO = 1075, t.FUWENROLL = 1076, t.ZTFS = 1077, t.SHOULING = 1078, t.ZHISHENGYIJIE = 1079, t.FABAO = 1081, t.FENGMOLU = 1082, t.PETGIFT = 1084, t.LEVELGIFT = 1086, t.XDDZ = 1089, t.XSFBZSXT = 1092, t.XSJX = 1094, t.MRHL = 1095, t.SDBZ = 1097, t.SDCZ = 1098, t.XSFBND = 1099, t.XSFBSH = 1100, t.XDCOMP = 1104, t.TEACHERSDAY = 1105, t.XKSD = 1120, t.YYFD = 1121, t.FBJL = 1129, t.LUCKYROLL = 1070, t.CROSS_SERVICE_lADDER = 1133, t.EIGHT_YUAN_GIFT = 1134, t.HUOBAN_SKIN = 1135, t.SPRING_EMISSARY = 1136, t.SPRING_SIGH = 1137, t.F_WORLD = 1139, t.FRIEND_BACK = 1140, t.FRIEND_CALL = 1141, t.xianZhi = {}, t
}();
__reflect(CFG_COMMOND.prototype, "CFG_COMMOND");
var CFG_CTG = function () {
    function t() {}
    return t
}();
__reflect(CFG_CTG.prototype, "CFG_CTG");
var ViewShuang11ShangCheng = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new ArrayCollection, e.sourceCostLabs = new ArrayCollection, e.typeInfo = new shuang11ShangChengTypeInfo, e.skinName = "ViewShuang11ShangChengSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.scroller.scrollPolicyH = eui.ScrollPolicy.OFF, this.scroller.verticalScrollBar.autoVisibility = !1, this.scroller.verticalScrollBar.visible = !1, this.costLabels.itemRenderer = ItemHuoBiStore, this.costLabels.dataProvider = this.sourceCostLabs, this.costLabels.useVirtualLayout = !1, this.btnZglb.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onZGLB, this), this.setProductSource()
    }, e.prototype.setProductSource = function () {
        this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemShangCheng, this.btnRefresh.label = "刷新", this.btnRefresh.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onRefresh, this)
    }, e.prototype.onZGLB = function () {
        GameGlobal.layerMgr.close(UIConst.SHUANG11), GameGlobal.layerMgr.open(UIConst.MIDFESTLB)
    }, e.prototype.onRefresh = function () {
        GameGlobal.modelShangCheng.CG4503()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelShangCheng.on(ModelShangCheng.msg_shuang11, this.updateDatas, this), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_shuang11_buy, this.itemUpdate, this), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_refrashTimeShuang11, this.updateRefTime, this), GameGlobal.modelShangCheng.CG4501()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelShangCheng.off(ModelShangCheng.msg_shuang11, this.updateDatas, this), GameGlobal.modelShangCheng.off(ModelShangCheng.msg_shuang11_buy, this.itemUpdate, this), GameGlobal.modelShangCheng.off(ModelShangCheng.msg_refrashTimeShuang11, this.updateRefTime, this)
    }, e.prototype.updateDatas = function () {
        this.sourceCostLabs.source = this.typeInfo.getCostLabels();
        var t = this.typeInfo.getDatas();
        t.sort(this.onSort), this.sourceData.source = t, this.updateSSYTabVis(), this.setState("st2"), this.updateRefTime()
    }, e.prototype.onSort = function (t, e) {
        var i = t.cfg.px,
            o = e.cfg.px;
        return i - o
    }, e.prototype.updateSSYTabVis = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.SHUANG11);
        1 == this._curID && (VoShangCheng.isEnterShuang11 = !0), 0 == VoShangCheng.mapShuang11.getLength() ? (ViewText.text("商城物品已售完！"), t.base.removeTabByID(UIConst.SHUANG11STORE)) : t.base.addTab("双11商城", 2, UIConst.SHUANG11STORE)
    }, e.prototype.setState = function (t) {
        switch (t) {
            case "st1":
                this.scroller.height = 659, this.iconCostLB.visible = !1, this.txtRefreshTime.visible = !1, this.btnRefresh.visible = !1, this.txtCostYB.visible = !1;
                break;
            case "st2":
                this.scroller.height = 550, this.iconCostLB.visible = !0, this.txtRefreshTime.visible = !0, this.btnRefresh.visible = !0, this.txtCostYB.visible = !0
        }
    }, e.prototype.itemUpdate = function (t) {
        this.sourceData.itemUpdated(t)
    }, e.prototype.updateRefTime = function () {
        var t = GameGlobal.modelShangCheng.refreshCount,
            e = t + 1,
            i = CFG_zlgexiaohao_168.LIB[e];
        if (i || (i = CFG_zlgexiaohao_168.LIB[t]), "0" == i.xh) this.txtCostYB.text = "x0";
        else {
            var o = ConfigHelp.makeVoList(i.xh)[0];
            GameGlobal.modelRole.voMine.yuanbao < o.count ? this.txtCostYB.textColor = 16646144 : this.txtCostYB.textColor = 1090116, this.txtCostYB.text = "x" + o.count
        }
        var n = GameGlobal.modelShangCheng.remainTime;
        n > 0 ? this.addTick() : this.removeTick()
    }, e.prototype.addTick = function () {
        this.txtRefreshTime.text = "商城刷新时间: " + DateUtil.getHMSBySecond2(GameGlobal.modelShangCheng.remainTime--), GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.removeTick = function () {
        this.txtRefreshTime.text = "商城刷新时间: 00:00:00", GameGlobal.tick.removeInterv(this.onTick, this)
    }, e.prototype.onTick = function (t) {
        t.txtRefreshTime.text = "商城刷新时间: " + DateUtil.getHMSBySecond2(GameGlobal.modelShangCheng.remainTime--)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "doubleEleven_json.11_bg_shop"), this._curID = e, this.addMsg(), this.addZGLBEff()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bg), this.removeMsg(), VoShangCheng.isEnterShuang11 = !1, this.removeZGLBEff()
    }, e.prototype.addZGLBEff = function () {
        this.zglbEff || (this.zglbEff = EffectMgr.addEff("uieff/Click", this.effGrp, 0, 0, 1e3, -1, !0), this.zglbEff.touchEnabled = !0, this.zglbEff.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onZGLB, this))
    }, e.prototype.removeZGLBEff = function () {
        EffectMgr.getIns().removeEff(this.zglbEff), this.zglbEff.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onZGLB, this), this.zglbEff.touchEnabled = !1, this.zglbEff = null
    }, e
}(BaseEUIView);
__reflect(ViewShuang11ShangCheng.prototype, "ViewShuang11ShangCheng");
var shuang11ShangChengTypeInfo = function () {
    function t() {}
    return t.prototype.getDatas = function () {
        var t;
        return t = VoShangCheng.mapShuang11.getList()
    }, t.prototype.getCostLabels = function () {
        var t = "";
        return t = "33,0,0", ConfigHelp.makeVoList(t)
    }, t
}();
__reflect(shuang11ShangChengTypeInfo.prototype, "shuang11ShangChengTypeInfo");
var ItemShuang11HJJL = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemShuang11HJJLSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.lbSort.text = t.sort, this.hjjl.textFlow = HtmlUtil.parse(t.playerName.toString()), this.lbCost.textFlow = HtmlUtil.parse(HtmlUtil.color(t.cost, "#10a244"))
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemShuang11HJJL.prototype, "ItemShuang11HJJL");
var ItemShuang11XFPH = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "ItemShuang11XFPHSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, e.prototype.dataChanged = function () {
        var t = this.data,
            e = t.jl;
        ConfigHelp.makeStrGrids(e, this.grids, 0, 0, this.Container, !0, 10, .9);
        var i = t.qj.split(",");
        1 == i.length ? this.lb_sort.textFlow = HtmlUtil.parse("消费榜" + HtmlUtil.color("第" + i[0] + "名", "#e13f24")) : this.lb_sort.textFlow = HtmlUtil.parse("消费榜" + HtmlUtil.color("第" + i[0] + "-" + i[1] + "名", "#e13f24"))
    }, e
}(eui.ItemRenderer);
__reflect(ItemShuang11XFPH.prototype, "ItemShuang11XFPH");
var View_shuang11shangQiJiangLi = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "shuang11shangQiJiangLiSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.Scroller.scrollPolicyH = eui.ScrollPolicy.OFF, this.Scroller.verticalScrollBar.autoVisibility = !1, this.Scroller.verticalScrollBar.visible = !1, this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemShuang11HJJL, this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnTisheng), this.btnTisheng.touchEnabled = !0, this.btnTisheng.textFlow = HtmlUtil.underLine("前往消费"), this.btnTisheng.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTiSheng, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "CM2_json.comBg"), GameGlobal.modelShuang11.CG4491(), this.curId = e, this.addMsg(), this.update()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bg), this.removeMsg()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onTiSheng = function () {
        GameGlobal.layerMgr.close(UIConst.SHUANG11XFPHBANG), GameGlobal.layerMgr.open(UIConst.SHUANG11, 2)
    }, e.prototype.update = function () {
        this.notice.text = "暂无记录！"
    }, e.prototype.addMsg = function () {
        GameGlobal.modelShuang11.on(ModelShuang11.MSG_PHBUPDATE, this.onUpdate, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelShuang11.off(ModelShuang11.MSG_PHBUPDATE, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        if (0 != t.length) {
            this.notice.text = "";
            for (var e = [], i = 0; i < t.length; i++) e.push(t[i]);
            this.sourceData.source = e
        }
    }, e
}(BaseEUIView);
__reflect(View_shuang11shangQiJiangLi.prototype, "View_shuang11shangQiJiangLi");
var VShuang11XFPH = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.grids = [], e.skinName = "ViewShuang11XFPH", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.scroller.scrollPolicyH = eui.ScrollPolicy.OFF, this.scroller.verticalScrollBar.autoVisibility = !1, this.scroller.verticalScrollBar.visible = !1, this.uirole = UIRole.create(), this.roleGrp.addChild(this.uirole), this.uirole.x = 100, this.uirole.y = 150, this.uirole.scaleX = this.uirole.scaleY = .75, this.uiroleGH = UIRole.create(), this.guangHuanGrp.addChild(this.uiroleGH), this.uiroleGH.scaleX = this.uiroleGH.scaleY = 1, this.jlList.itemRenderer = ItemShuang11XFPH, this.jlList.dataProvider = this.sourceData, this.btnPHB.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPHB, this), this.btnSeePHB.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPHB, this), DisplayUtil.popBtnStyle(this.btnSeePHB), this.btnSeePHB.touchEnabled = !0, this.btnSeePHB.textFlow = HtmlUtil.underLine("查看"), DisplayUtil.popBtnStyle(this.btnTisheng), this.btnTisheng.touchEnabled = !0, this.btnTisheng.textFlow = HtmlUtil.underLine("前往消费"), this.btnTisheng.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTiSheng, this), this.lb_costYB.text = CFG_Param.LIB[35].key.split(",")[2]
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "doubleEleven_json.11_bg_consume"), this.addMsg(), this.update(), GameGlobal.modelShuang11.CG4493()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bg), this.removeMsg(), this.uirole.stopAndClear(), this.uiroleGH.stopAndClear()
    }, e.prototype.onTiSheng = function () {
        GameGlobal.layerMgr.open(UIConst.SHUANG11, 2)
    }, e.prototype.onPHB = function () {
        GameGlobal.layerMgr.open(UIConst.SHUANG11XFPHBANG)
    }, e.prototype.update = function () {
        var t = CFG_Shuang11XFPH.LIB[1].zs;
        this.uirole.setHorse(t), this.uirole.setWay(3), this.uirole.validParts(), this.uirole.play(), this.txtHorseName.text = CFG_PeiYang.LIB_HORSESKIN[t].n;
        var e = CFG_Param.LIB[36].key.split(",")[1];
        for (var i in CFG_PeiYang.LIB_HALOSKIN) {
            var o = CFG_PeiYang.LIB_HALOSKIN[i];
            if (o.dj == e) var n = o.id
        }
        this.uiroleGH.setHalo(n), this.uiroleGH.setWay(3), this.uiroleGH.validParts(), this.uiroleGH.play(), this.lbFirst.textFlow = HtmlUtil.parse("消费榜" + HtmlUtil.color("第1名", "#ff0000"));
        var a = CFG_Shuang11XFPH.LIB[1].jl;
        ConfigHelp.makeStrGrids(a, this.grids, 0, 0, this.Container, !0, 10, .9);
        var s = [];
        for (var i in CFG_Shuang11XFPH.LIB) {
            var r = CFG_Shuang11XFPH.LIB[i];
            1 != r.id && s.push(r)
        }
        DisplayUtil.fillDataAC(this.sourceData, s)
    }, e.prototype.onUpdate = function (t) {
        0 == t.sort ? this.lbSort.text = "未上榜" : this.lbSort.text = "" + t.sort, this.lbCost.text = "" + t.cost
    }, e.prototype.addMsg = function () {
        GameGlobal.modelShuang11.on(ModelShuang11.MSG_PMUPDATE, this.onUpdate, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelShuang11.off(ModelShuang11.MSG_PMUPDATE, this.onUpdate, this)
    }, e
}(BaseEUIView);
__reflect(VShuang11XFPH.prototype, "VShuang11XFPH");
var ModelS11kh = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.lastRollType = 2, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(4482, this.GC4482, this), e.regHand(4484, this.GC4484, this), e.regHand(4486, this.GC4486, this), e.regHand(4488, this.GC4488, this)
    }, e.prototype.CG4481 = function () {
        var t = this.getBytes();
        this.sendSocket(4481, t)
    }, e.prototype.GC4482 = function (t, i) {
        t.records = [];
        for (var o = 0, n = i.readShort(); n > o; o++) t.records[o] = [i.readUTF(), i.readInt(), i.readShort()];
        t.notify(e.MSG_RollData)
    }, e.prototype.CG4483 = function (t, e) {
        if (!this.isFlag(4483)) {
            this.addDelayFlag(4483, 2e3);
            var i = this.getBytes();
            i.writeByte(t), i.writeByte(e), this.sendSocket(4483, i)
        }
    }, e.prototype.GC4484 = function (t, i) {
        for (var o = [], n = 0, a = i.readShort(); a > n; n++) o[n] = i.readShort();
        t.notify(e.MSG_ZPRET, o), t.lastRollType = i.readByte()
    }, e.prototype.CG4485 = function () {
        var t = this.getBytes();
        this.sendSocket(4485, t)
    }, e.prototype.GC4486 = function (t, i) {
        t.ljxf = i.readInt();
        var o = i.readShort();
        t.notice = !1;
        for (var n = 0; o > n; n++) {
            var a = i.readByte(),
                s = i.readByte();
            VoS11kh_LJXFItem.update(a, s), 1 == s && (t.notice = !0)
        }
        t.notify(e.UPDATE)
    }, e.prototype.CG4487 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(4487, e)
    }, e.prototype.GC4488 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte();
            VoS11kh_LJXFItem.update(n, 2), t.notice = VoS11kh_LJXFItem.Notice(), t.notify(e.UPDATE)
        } else 2 == o ? ViewText.text("条件未达") : 3 == o && GameGlobal.modelBag.checkRLTips(0)
    }, e.MSG_RollData = "ModelS11kh_rollData", e.MSG_ZPRET = "ModelS11kh_MSG_ZPRET", e.UPDATE = "ModelS11kh_UPDATE", e
}(BaseModel);
__reflect(ModelS11kh.prototype, "ModelS11kh");
var VS11khPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.tabUIArr = [], e._oldSysID = -1, e.skinName = "S11khSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this.base;
        this.base.createPageGrp().createTabGroup(), DisplayUtil.popBtnStyle(this.btnClose), this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn).addCloseListen(this.btnClose), this.base.listenTabClick(this.onSel, this);
        var i = GameGlobal.layerMgr;
        i.reg(UIConst.S11KHROLL, VS11kh_LuckyRoll, this.base.pageGrp), i.reg(UIConst.S11KHLJXF, VS11kh_LJXF, this.base.pageGrp), i.reg(UIConst.SPRING_CONSUME, SpringConsumeView, this.base.pageGrp);
        var o = GameGlobal.modelAct.actData.getChildByID(ActivityType.CONSUME_ACT);
        if (o) {
            var n = -1,
                a = o.getChildByID(70);
            a && (n++, e.addTab("招财进宝", n, UIConst.S11KHROLL), this.tabUIArr.push(UIConst.S11KHROLL));
            var s = o.getChildByID(69);
            s && (n++, e.addTab("累计充值", n, UIConst.S11KHLJXF), this.tabUIArr.push(UIConst.S11KHLJXF));
            var r = o.getChildByID(73);
            r && (n++, e.addTab("累计消费", n, UIConst.SPRING_CONSUME), this.tabUIArr.push(UIConst.SPRING_CONSUME))
        }
        e.btnClose.visible = !1, e.title = ""
    }, e.prototype.onSel = function (t) {
        this.setSelSysID(t.sort)
    }, e.prototype.setSelSysID = function (t) {
        if (this._oldSysID != t) {
            var e = GameGlobal.layerMgr; - 1 != this._oldSysID && e.close(this.tabUIArr[this._oldSysID]), -1 != t && e.open(this.tabUIArr[t]), this._oldSysID = t, this.base.setTabSelIdx(t)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e ? this.base.setTabSelIdx(e, !0) : this.base.setTabSelIdx(0, !0);
        var i = GameGlobal.modelAct.actData.getChildByID(29);
        if (i) {
            var o = i.getChildByID(69);
            o ? (this.base.addTab("累计充值", 1, UIConst.S11KHLJXF), GameGlobal.modelS11kh.on(ModelS11kh.UPDATE, this.upNotice, this), GameGlobal.modelS11kh.CG4485()) : this.base.removeTabBySort(1);
            var n = i.getChildByID(70);
            n ? this.base.addTab("招财进宝", 0, UIConst.S11KHROLL) : this.base.removeTabBySort(0)
        }
        this.getProxy(SpringConsumeProxy).openSpringConsumeView(), EventCenter.addMsg(SpringConsumeEvent.MSG_CONSUME_UPDATE, this.upNotice, this)
    }, e.prototype.onClose = function () {
        this.setSelSysID(-1), GameGlobal.modelS11kh.off(ModelS11kh.UPDATE, this.upNotice, this), EventCenter.removeMsg(SpringConsumeEvent.MSG_CONSUME_UPDATE, this.upNotice, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.upNotice = function () {
        this.base.setNoticBySort(1, GameGlobal.modelS11kh.notice), this.base.setNoticBySort(2, this.getModel(SpringConsumeModel).notice)
    }, e.prototype.onQuestT = function () {
        this._oldSysID == UIConst.VLUCKROLL ? GameGlobal.layerMgr.open(UIConst.UIID_INTRODUCE, "1.元宝转盘每达10次必定获得神兽朱雀、熊猫大师神识;\n2.神兽朱雀只在幸运转盘唯一获得;\n3.神兽熊猫大师在开服累计充值活动、以及幸运转盘可获得;\n4.若您已经激活了朱雀或熊猫大师，则自动将神识转化为神兽石;\n5.幸运转盘有概率获得如：终极兽诀宝箱、红色玄铁、珍兽石、神兽石等珍稀道具。") : this._oldSysID == UIConst.FUWENROLL && GameGlobal.layerMgr.open(UIConst.UIID_INTRODUCE, "1.符文转盘产出伙伴符文、符文经验丹；\n2.元宝转盘符文时，最低可获得3星符文；\n3.元宝转盘相对于绑元转盘，可大概率获得4星、5星珍惜符文\n")
    }, e
}(BaseEUIView);
__reflect(VS11khPnl.prototype, "VS11khPnl");
var VoS11kh_LJXFItem = function () {
    function t() {}
    return t.init = function () {
        t.List = [];
        var e = CFG_XiaoFeiAct.LIB_LJCZ;
        for (var i in e) {
            var o = new t;
            o.id = e[i].id, o.yb = e[i].czed, o.jl = e[i].jl, o.sort = e[i].id, t.List.push(o)
        }
    }, t.update = function (e, i) {
        for (var o = [], n = t.List, a = 0; a < n.length; a++) {
            var s = n[a];
            if (s.id == e) {
                s.getState = i, 2 == i && (o.push(s), t.List.splice(a, 1), t.List = t.List.concat(o));
                break
            }
        }
        t.List.length;
        t.List.sort(function (t, e) {
            var i = [2, 3, 1],
                o = i[t.getState],
                n = i[e.getState];
            return o == n ? t.sort - e.sort : n - o
        })
    }, t.Notice = function () {
        for (var e = t.List, i = 0; i < e.length; i++)
            if (1 == e[i].getState) return !0;
        return !1
    }, t.List = [], t
}();
__reflect(VoS11kh_LJXFItem.prototype, "VoS11kh_LJXFItem");
var VS11kh_LJXF = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._isShowEff = !1, e.skinName = "S11kh_LJXFSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        DisplayUtil.popBtnStyle(this.btn), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnlink.textFlow = HtmlUtil.underLine("前往充值"), this.btnlink.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        }, this), this.data = new eui.ArrayCollection, this.list.itemRenderer = VS11kh_LJXFItem, this.list.dataProvider = this.data, VoS11kh_LJXFItem.init(), AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_BA ? this.btn.visible = !1 : this.btn.visible = !1
    }, e.prototype.onT = function () {
        try {
            AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_BA && (window.location.href = "https://mobile.qzone.qq.com/l?g=5207")
        } catch (t) {}
    }, e.prototype.update = function () {
        var t = this;
        t.lbxfnum.text = GameGlobal.modelS11kh.ljxf.toString() + "元宝", DisplayUtil.fillDataAC(this.data, VoS11kh_LJXFItem.List)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.isShowEff(!0), GameGlobal.tick.addInterv(this.onTimeTick, 1e3, this), GameGlobal.modelS11kh.on(ModelS11kh.UPDATE, this.update, this), GameGlobal.modelS11kh.CG4485()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.isShowEff(!1), GameGlobal.tick.removeInterv(this.onTimeTick), GameGlobal.modelS11kh.off(ModelS11kh.UPDATE, this.update, this)
    }, e.prototype.onTimeTick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(ActivityType.CONSUME_ACT);
        if (e) {
            var i = e.getChildByID(69);
            if (i) {
                var o = i.getRemainSec();
                if (o >= 0) return void(t.lbTime.text = DateUtil.getHMSBySecond2(o))
            }
        }
        GameGlobal.layerMgr.close(UIConst.S11KH)
    }, e.prototype.isShowEff = function (t) {
        this._isShowEff != t && (this._isShowEff = t, this.updateEff())
    }, e.prototype.updateEff = function () {
        var t = this;
        t._isShowEff ? t.$stage && !t._eff && (t._eff = EffectMgr.addEff("uieff/1002", t.btn, 70, 45, 600)) : t._eff && (EffectMgr.getIns().removeEff(t._eff), t._eff = null)
    }, e
}(BaseEUIView);
__reflect(VS11kh_LJXF.prototype, "VS11kh_LJXF");
var VS11kh_LJXFItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "S11kh_LJXFItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btn.label = "领取", this.btn.labelColor = 14363651
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.txt.textFlow = [{
                text: "今日累计充值",
                style: {
                    textColor: 16777215,
                    stroke: 1,
                    strokeColor: 9856068
                }
            }, {
                text: t.yb,
                style: {
                    textColor: 172090,
                    stroke: 0
                }
            }, {
                text: "元宝",
                style: {
                    textColor: 16777215,
                    stroke: 1,
                    strokeColor: 9856068
                }
            }], ConfigHelp.makeStrGrids(t.jl, this.grids, 0, 0, this.container, !0), this.setState(t.getState)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setState = function (t) {
        switch (t) {
            case 0:
                this.btn.enabled = !1, this.btn.setNoticeVis(!1), this.btn.visible = !0, this.imgGet.visible = !1;
                break;
            case 1:
                this.btn.enabled = !0, this.btn.setNoticeVis(!0), this.btn.visible = !0, this.imgGet.visible = !1;
                break;
            case 2:
                this.btn.visible = !1, this.imgGet.visible = !0
        }
    }, e.prototype.onT = function (t) {
        GameGlobal.modelS11kh.CG4487(this.vo.id)
    }, e
}(eui.Component);
__reflect(VS11kh_LJXFItem.prototype, "VS11kh_LJXFItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VS11kh_LuckyRoll = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.index = 0, e.isTwn = !1, e.itemArr = [], e.times = 0, e._selIndex = 0, e._isShowEff = !1, e.skinName = "S11kh_LuckyRollSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btn), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.createGrids(), this.updateCost(), this.recordAC = new eui.ArrayCollection, this.rList.itemRenderer = VS11kh_RollRecordItem, this.rList.dataProvider = this.recordAC, AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_BA ? this.btn.visible = !1 : this.btn.visible = !1
    }, e.prototype.onT = function () {
        try {
            AppConfig.pftype == E_PF_CONFIG_TYPE.WAN_BA && (window.location.href = "https://mobile.qzone.qq.com/l?g=5207")
        } catch (t) {}
    }, e.prototype.createGrids = function () {
        var t = CFG_XiaoFeiAct.LIB_ZCZPJLXS,
            e = 0;
        for (var i in t) {
            var o = t[i],
                n = this.gridArr[e];
            if (n || (n = ViewGrid.create(), n.width = n.height = 90, n.anchorOffsetX = n.anchorOffsetY = 45, n.enableTip()), 1 == o.wzbq) {
                var a = new eui.Image;
                a.source = "xiaoFeiAct_json.jp", n.addChild(a)
            } else if (2 == o.wzbq) {
                var a = new eui.Image;
                a.source = "xiaoFeiAct_json.zp", n.addChild(a)
            }
            var s = 2 * Math.PI * ((e - .5) / 12),
                r = 260 * Math.cos(s) + 350 >> 0,
                l = 225 * Math.sin(s) + 455 >> 0;
            n.x = r, n.y = l;
            var h = ConfigHelp.makeVoByArr(Util.parseIntStr(o.jl));
            n.setData(h), n.isShowEff(!0), this.addChild(n), this.gridArr[e] = n, e++
        }
        var c = CFG_XiaoFeiAct.LIB_ZCZPCOST,
            p = Util.parseIntStr(c[1].s),
            u = Util.parseIntStr(c[2].s),
            d = Util.parseIntStr(c[3].s),
            f = "购买{0}银两";
        this.lbYL0.text = Lang.reTxt(f, p[2]), this.lbYL1.text = Lang.reTxt(f, u[2]), this.lbYL2.text = Lang.reTxt(f, d[2])
    }, e.prototype.updateCost = function () {
        CFG_XiaoFeiAct.LIB_ZCZPCOST, GameGlobal.modelRole.voMine;
        this.updateTerm(this.iconCost0, this.txtCost0, 0, CFG_XiaoFeiAct.getZPCostArrS11KH(1)), this.updateTerm(this.iconCost1, this.txtCost1, 1589, CFG_XiaoFeiAct.getZPCostArrS11KH(2)), this.updateTerm(this.iconCost2, this.txtCost2, 1590, CFG_XiaoFeiAct.getZPCostArrS11KH(3)), this.btn0.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.updateTerm = function (t, e, i, o) {
        t.source = IconUtil.getIconUrl(CFG_Item.LIB[o[0]].icon), e.text = "" + o[2], ConfigHelp.checkEnough1(o) ? e.textColor = Color.UIGREEN2 : e.textColor = Color.UIRED
    }, e.prototype.addMsg = function () {
        GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.modelS11kh.on(ModelS11kh.MSG_RollData, this.onUpdate, this), GameGlobal.modelS11kh.on(ModelS11kh.MSG_ZPRET, this.onZPAward, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateCost, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.tick.removeInterv(this.tick, this), GameGlobal.modelS11kh.off(ModelS11kh.MSG_RollData, this.onUpdate, this), GameGlobal.modelS11kh.off(ModelS11kh.MSG_ZPRET, this.onZPAward), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateCost)
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(ActivityType.CONSUME_ACT);
        if (e) {
            var i = e.getChildByID(70);
            if (i) {
                var o = i.getRemainSec();
                if (o >= 0) return void(t.lbTime.text = DateUtil.getHMSBySecond2(o))
            }
        }
        GameGlobal.layerMgr.close(UIConst.S11KH)
    }, e.prototype.onUpdate = function () {
        this.updateRecord()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.isShowEff(!0), this.addMsg(), this.updateCost(), this.updateRecord(), GameGlobal.modelS11kh.CG4481(), GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.isShowEff(!1), this.removeMsg(), this.recordAC.removeAll(), GameGlobal.tick.removeInterv(this.onTick, 1e3)
    }, e.prototype.onBtnT = function (t) {
        switch (t.currentTarget) {
            case this.btn0:
                this.buyy(1);
                break;
            case this.btn1:
                this.buyy(2);
                break;
            case this.btn2:
                this.buyy(3)
        }
    }, e.prototype.buyy = function (t) {
        var e = (CFG_XiaoFeiAct.LIB_ZCZPCOST[t], CFG_XiaoFeiAct.getZPCostArrS11KH(t));
        ConfigHelp.checkEnough1(e, !0) && GameGlobal.modelS11kh.CG4483(2, t)
    }, e.prototype.updateRecord = function () {
        var t = GameGlobal.modelS11kh.records;
        t && DisplayUtil.fillDataAC(this.recordAC, t)
    }, e.prototype.onZPAward = function (t) {
        this.queue ? this.queue = this.queue.concat(t) : this.queue = t, this.isTwn || this.tweenAward()
    }, e.prototype.tweenAward = function () {
        for (this.isTwn = !1; this.queue.length;) {
            var t = this.queue.shift(),
                e = CFG_XiaoFeiAct.LIB_ZCZPJL[t];
            if (e) {
                this.itemArr.length < 20 && this.itemArr.push(ConfigHelp.makeVoByArr(Util.parseIntStr(e.dj)));
                var i = 200,
                    o = CFG_XiaoFeiAct.LIB_ZCZPJLXS[e.sid];
                if (o && this.times < 1) {
                    this.times++;
                    var n = o.id - 1 + 24,
                        a = 1e3 / (1 + Math.pow(this.queue.length, .3));
                    egret.Tween.get(this).to({
                        showIdx: n
                    }, a, this.ease1).wait(i).call(this.onTwnComp1, this, [o.id]).wait(300).call(this.onTwnComp2, this), this.isTwn = !0;
                    break
                }
                if (0 == this.queue.length) {
                    var s = 4;
                    n = 24 + s;
                    var a = 1e3 / (1 + Math.pow(this.queue.length, .3));
                    egret.Tween.get(this).to({
                        showIdx: n
                    }, a, this.ease1).wait(i).call(this.onTwnComp1, this, null).wait(300).call(this.onTwnComp2, this), this.isTwn = !0;
                    break
                }
            }
            if (0 == this.queue.length) {
                var r = this,
                    l = CFG_XiaoFeiAct.LIB_ZCZPCOST[GameGlobal.modelS11kh.lastRollType];
                if ("0" != l.xh && ConfigHelp.checkEnough1(Util.parseIntStr(l.xh))) var h = l.xh;
                else h = l.xh2;
                VAwardPnl.show(this.itemArr, l.n, "关闭", function () {
                    r.buyy(l.id), GameGlobal.layerMgr.close(UIConst.AWARD)
                }, null, 1e4, h), r.itemArr.length = 0, r.times = 0, GameGlobal.modelS11kh.CG4481()
            }
        }
    }, e.prototype.onTwnComp1 = function (t) {
        if (t) {
            var e = t - 1,
                i = this.gridArr[e];
            EffectMgr.getIns().addEff1("uieff/dzsuccess", this, i.x, i.y, 400, 400, !1, 1)
        }
    }, e.prototype.onTwnComp2 = function () {
        this.isTwn = !1;
        var t = this;
        if (0 == this.queue.length) {
            var e = CFG_XiaoFeiAct.LIB_ZCZPCOST[GameGlobal.modelS11kh.lastRollType];
            if ("0" != e.xh && ConfigHelp.checkEnough1(Util.parseIntStr(e.xh))) var i = e.xh;
            else i = e.xh2;
            VAwardPnl.show(this.itemArr, e.n, "关闭", function () {
                t.buyy(e.id), GameGlobal.layerMgr.close(UIConst.AWARD)
            }, null, 1e4, i), t.itemArr.length = 0, GameGlobal.modelS11kh.CG4481(), t.times = 0
        } else this.tweenAward()
    }, e.prototype.ease1 = function (t) {
        return 1 != t && (t = Math.sin(Math.PI * t * .5)), t
    }, e.prototype.onTick = function (t) {
        t.isTwn || (t.showIdx += 1)
    }, e.prototype.awdTick = function (t, e, i) {
        t.showIdx++
    }, Object.defineProperty(e.prototype, "showIdx", {
        get: function () {
            return this._selIndex
        },
        set: function (t) {
            var e = t % 12 >> 0;
            this.setSelIdx(e)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setSelIdx = function (t) {
        var e = this.gridArr[this._selIndex],
            i = this.gridArr[t];
        e != i && (i && (i.$setScaleX(1.4), i.$setScaleY(1.4)), e && (e.$setScaleX(1), e.$setScaleY(1))), this._selIndex = t
    }, e.prototype.isShowEff = function (t) {
        this._isShowEff != t && (this._isShowEff = t, this.updateEff())
    }, e.prototype.updateEff = function () {
        var t = this;
        t._isShowEff ? t.$stage && !t._eff && (t._eff = EffectMgr.addEff("uieff/1002", t.btn, 70, 45, 600)) : t._eff && (EffectMgr.getIns().removeEff(t._eff), t._eff = null)
    }, e
}(BaseEUIView);
__reflect(VS11kh_LuckyRoll.prototype, "VS11kh_LuckyRoll");
var VS11kh_RollRecordItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "TextItemRender", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.lb.textColor = 11023619, this.lb.size = 24
    }, Object.defineProperty(e.prototype, "data", {
        set: function (t) {
            var e = ConfigHelp.getToolTextByInt(1, t[1], t[2], !0, "{0}*{1}");
            this.lb.textFlow = HtmlUtil.parse(Lang.reTxt("{0}获得{1}", HtmlUtil.fontNoSize(t[0], "#10a244"), e))
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VS11kh_RollRecordItem.prototype, "VS11kh_RollRecordItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var ModelSkill = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.curSelIndex = 0, e.isupdate = !1, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(720, i.GC720, i), e.regHand(722, i.GC722, i), e.regHand(724, i.GC724, i), e.regHand(726, i.GC726, i)
    }, e.prototype.GC720 = function (t, i) {
        for (var o = GameGlobal.modelRole.voMine.mainRole, n = i.readShort(), a = o.skillList, s = -1, r = !1, l = 0; n > l; l++) {
            var h = a[l];
            r = 0 == h.level, h.idx = i.readByte(), h.level = i.readShort(), 0 != h.level && r && (s = l);
            var c = i.readByte();
            h.order = -1 == c ? l : c, h.updatePower()
        }
        t.notify(e.MSG_SKILLDT), t.isupdate && -1 != s && (t.isupdate = !1, GameGlobal.layerMgr.open(UIConst.ROLESKILLTIP, a[s]))
    }, e.prototype.CG721 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(721, e)
    }, e.prototype.GC722 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte(),
                a = GameGlobal.modelRole.voMine.mainRole.skillList;
            a[n].level++, a[n].updatePower(), t.notify(e.MSG_SKILLUPGRADE, n), 1 == a[n].level && GameGlobal.layerMgr.open(UIConst.ROLESKILLTIP, a[n])
        }
        var s = t.getWarnTxt(o);
        s && ViewText.text(s)
    }, e.prototype.CG723 = function () {
        this.sendSocket(723, this.getBytes())
    }, e.prototype.GC724 = function (t, i) {
        var o = i.readByte();
        1 == o ? (t.isupdate = !0, ViewText.text(t.getWarnTxt(1)), t.notify(e.MSG_SKILLUPGRADE)) : 3 == o ? ViewText.text(t.getWarnTxt(5)) : ViewText.text(t.getWarnTxt(6))
    }, e.prototype.CG725 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(725, e)
    }, e.prototype.GC726 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            for (var n = i.readShort(), a = GameGlobal.modelRole.voMine.mainRole.skillList, s = 0; n > s; s++) {
                var r = i.readByte();
                a[r].order = s
            }
            t.notify(e.MSG_SKILLQUEUE)
        } else console.log("queueFault,ret=" + o)
    }, e.prototype.isSkillCanup = function (t) {
        var e = !1,
            i = GameGlobal.modelRole.voMine,
            o = i.mainRole.skillList[t];
        if (0 == t) e = i.level > o.level;
        else {
            var n = i.mainRole.skillList[0];
            e = o.level < o.cfg.maxlv && o.level < n.level && n.level >= o.requrelv
        }
        return e = e && this.matchAchQuestCond(o)
    }, e.prototype.matchAchQuestCond = function (t) {
        return 0 != t.rqureAchLv ? GameGlobal.modelTarget.achieveLv >= t.rqureAchLv : !0
    }, e.prototype.getWarnTxt = function (t, e) {
        if (void 0 === e && (e = null), 1 == t) var i = "成功升级技能";
        else 2 == t ? i = "技能顺序所悟" : 3 == t ? i = "未达开启条件" : 4 == t ? i = "第一个技能等级不能大于玩家等级" : 5 == t ? i = "已经是最高级" : 6 == t ? i = "银两不足" : 8 == t && (i = "未达到成就等级");
        return i
    }, e.prototype.checkAnySkillUD = function () {
        for (var t = GameGlobal.modelRole.voMine, e = t.mainRole, i = e.skillList[0].level, o = 0, n = 5; n > o; o++) {
            var a = e.skillList[o],
                s = CFG_Skill.LIBUPCOST[a.level];
            if (!(GameGlobal.modelTarget.achieveLv < a.rqureAchLv)) {
                if (0 == o) {
                    if (a.level >= t.level) continue
                } else if (i < a.requrelv || a.level >= i) continue;
                if (s && s.xh && t.yinliang >= s.xh) return !0
            }
        }
        return !1
    }, e.prototype.isAllSkillMax = function () {
        var t = GameGlobal.modelRole.voMine,
            e = t.mainRole,
            i = e.skillList[0];
        if (i.level < i.cfg.maxlv && i.level < t.level) return !1;
        for (var o = 1, n = e.skillList.length; n > o; o++) {
            var a = e.skillList[o];
            if (i.level >= a.requrelv && a.level < i.level && a.level < a.cfg.maxlv) return !1
        }
        return !0
    }, e.prototype.caculateOneKeyCost = function () {
        for (var t = GameGlobal.modelRole.voMine, e = t.mainRole, i = 0, o = (CFG_Skill.LIB, t.yinliang), n = t.level, a = e.skillList[0].level, s = CFG_Skill.LIBUPCOST, r = (e.skillList[0].cfg, GameGlobal.modelTarget, 0); 5 > r; r++) {
            var l = e.skillList[r];
            l.openByAch = GameGlobal.modelTarget.achieveLv >= l.rqureAchLv
        }
        for (var h = 1;; h++) {
            for (var c = 0, r = 0; 5 > r; r++) {
                var l = e.skillList[r],
                    p = l.level + h;
                if (!s[p - 1]) break;
                if (!l.openByAch) break;
                var u = s[p - 1].xh;
                if (0 > u && (u = 0), !(n <= l.requrelv)) {
                    if (0 == r) {
                        if (p > n) continue;
                        a = p
                    } else {
                        if (0 == l.level && a < l.requrelv) continue;
                        if (a < l.requrelv || p > a) continue
                    }
                    o >= u && (o -= u, i += u, c++)
                }
            }
            if (0 == c) break
        }
        return i
    }, e.MSG_SKILLDT = 0, e.MSG_INDEXCHANGE = 1, e.MSG_SKILLUPGRADE = 2, e.MSG_SKILLQUEUE = 3, e
}(BaseModel);
__reflect(ModelSkill.prototype, "ModelSkill");
var SkillGrid = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.itemIndex = -1, e.touchChildren = !1, e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.imgGrey.visible = !1
    }, e.prototype.enableTip = function () {
        this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            var e = this;
            if (e._data = t, t) {
                if (e.txtNm.text = t.name, e.imgIcon.source = IconUtil.getIconUrl(t.icon), e.lbLv.text = t.level.toString(), e.oldLv = t.level, this.isInList(t.id)) {
                    this.imglv.visible = !0;
                    var i = t.id % 10 + 1;
                    e.imglv.source = 1 == i ? "" : "skillPage_json." + i
                }
            } else e.imgIcon.source = null
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.isInList = function (t) {
        for (var e = GameGlobal.modelRole.voMine.mainRole.skillList, i = 1; 5 > i; i++)
            if (e[i].id == t) return !0;
        return !1
    }, e.prototype.onT = function (t) {
        this._data && GameGlobal.layerMgr.open(UIConst.EQUIPTIP, this._data)
    }, Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel != t && (this._sel = t, t ? this.imgSel.visible = !0 : this.imgSel.visible = !1)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setGrey = function (t) {
        t ? this.imgGrey.visible = !0 : this.imgGrey.visible = !1
    }, e.prototype.showEff = function () {
        this.eff || (this.eff = EffectMgr.addEff("uieff/dzsuccess", this, 45, 45, 500, 500).completeHand(Handler.create(this, this.onEffected)))
    }, e.prototype.onEffected = function () {
        this.eff = null
    }, e
}(eui.Component);
__reflect(SkillGrid.prototype, "SkillGrid", ["eui.UIComponent", "egret.DisplayObject"]);
var Vo_Skill = function () {
    function t() {
        this.type = 4, this.requrelv = 0, this.rqureAchLv = 0, this.level = 1, this.coolDown = 0, this.coolDownCfg = 1e4, this.proprity = 1, this.style = 1, this.enable = !1, this.icon = 4165, this.p = 0, this.pp = 0, this.order = 9999, this.quality = 0, this.petSkillGroupIndex = -1
    }
    return t.prototype.dispose = function () {}, t.prototype.initLib = function () {
        this.updatePower()
    }, t.prototype.initPetData = function () {
        var t = CFG_Skill.LIBRELATE[this.cfg.g];
        this.petSkillGroupCFG = t, t && (this.petSkillGroupID = t.id, this.petSkillGroupIndex = t.ids.indexOf(t.id))
    }, t.prototype.updatePower = function () {
        var t = this.cfg;
        this.pp = t.attp + (this.level - 1) * t.attpg, this.p = t.bp + (this.level - 1) * t.pg
    }, t.prototype.getDes = function () {
        var e = this.cfg,
            i = e.des;
        if (i.indexOf("#") >= 0) {
            var o = i.replace(t.REGPP, (this.pp / 100).toString() + "%");
            return o = o.replace(t.REGP, this.p.toString())
        }
        return i
    }, t.prototype.initDescripte = function () {
        var t = this,
            e = t.cfg;
        t.id;
        this.p = e.attp + this.level * e.attpg
    }, t.prototype.enterCool = function () {
        this.coolDown = this.coolDownCfg
    }, t.prototype.advanceTime = function (t) {
        var e = this.coolDown;
        e -= t, 0 > e && (e = 0), this.coolDown = e
    }, t.create = function (e, i) {
        if (0 != e) {
            var o = new t;
            return o.setTo(e, i), o
        }
    }, t.prototype.getOwned = function () {
        return 0
    }, t.prototype.setTo = function (t, e) {
        var i = this;
        i.id = t;
        var o = CFG_Skill.LIB[t];
        if (!o) return void console.error("skill error:id=" + t);
        if (i.cfg = o, i.level = e, i.name = o.n, i.style = o.style, "0" != o.rlv) {
            var n = Util.parseIntStr(o.rlv);
            i.requrelv = n[0], i.rqureAchLv = n[1]
        } else i.requrelv = 0, i.rqureAchLv = 0;
        return i.des = o.des, i.icon = o.ico, i.quality = o.q, i.initLib(), i
    }, t.FORMATREG = new RegExp("{.*}"), t.REGPP = new RegExp("#pp#"), t.REGP = new RegExp("#p#"), t
}();
__reflect(Vo_Skill.prototype, "Vo_Skill", ["GridImplement"]);
var VSkillSetting = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/skill/SkillSetting.exml", e
    }
    return __extends(e, t), e.prototype.guide = function (t) {
        for (var e = this.group.$children, i = 0, o = e.length; o > i; i++) {
            var n = e[i];
            if (2 == n._data.cfg.pos) {
                n.guide();
                break
            }
        }
    }, e.prototype.guideClose = function () {
        var t = this.base.btnReturn;
        QuestGuideArrow.getIns().guideTo(t, t.width / 2, t.height / 2)
    }, e.prototype.initView = function () {
        this.base.title = "技能设置", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.updateQue(), GameGlobal.modelSkill.on(ModelSkill.MSG_SKILLQUEUE, this.updateQue, i)
    }, e.prototype.onClose = function () {
        GameGlobal.modelSkill.off(ModelSkill.MSG_SKILLQUEUE, this.updateQue, this)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.updateQue = function () {
        ViewText.text("修改成功");
        var t = GameGlobal.modelRole.voMine.mainRole.skillList,
            e = t.filter(function (t, e) {
                return 5 > e && t.level > 0 && GameGlobal.modelRole.voMine.level >= t.requrelv ? t : void 0
            });
        e.sort(this.sc);
        for (var i = 0; i < e.length; i++) {
            var o = this.group.$children[i];
            o || (o = new VSkillSettingItem, this.group.addChild(o)), o.data = e[i], o.index = i
        }
    }, e.prototype.sc = function (t, e) {
        return t.order - e.order
    }, e
}(BaseEUIView);
__reflect(VSkillSetting.prototype, "VSkillSetting");
var VSkillSettingItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.skinName = "resource/eui_skins/game/skill/SkillSettingItem.exml", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        this.btnUp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.ont, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return null
        },
        set: function (t) {
            this._data = t, this.lbName.text = t.name, this.lbDes.text = t.getDes();
            var e = IconUtil.getIconUrl(t.icon);
            this.imgicon.source = e
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.ont = function () {
        this._data.order > 0 && GameGlobal.modelSkill.CG725(this._data.order)
    }, e.prototype.guide = function () {
        var t = this.btnUp;
        QuestGuideArrow.getIns().guideTo(t, t.width / 2, t.height / 2)
    }, e
}(eui.Component);
__reflect(VSkillSettingItem.prototype, "VSkillSettingItem");
var VHideMission = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "HideMissionSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        DisplayUtil.popBtnStyle(this.btn), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onT = function () {
        this.desGrp.visible ? this.close() : this.open()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = e.id,
            o = Vo_smdl.Map[i];
        o || this.closeHandler();
        var n = e.ope,
            a = o.cfg,
            s = "";
        2 == o.cfg.type && 1 == n && (o.pro = GameGlobal.modelRole.voMine.level), s = Lang.reTxt(a.mz, HtmlUtil.color(o.pro + "/" + a.sz, "#fe4801")), this.lbdes.textFlow = HtmlUtil.parse(s), this.lbvip.textFlow = HtmlUtil.parse("(" + HtmlUtil.color("VIP" + a.vip, "#FF004E") + "可立刻领取)"), this.btn.scaleX = -1, this.bg.visible = !0, this.desGrp.visible = !1, 1 == n ? this.close() : this.openclose()
    }, e.prototype.onClose = function () {}, e.prototype.open = function () {
        var t = this;
        egret.Tween.removeTweens(this.desGrp), this.desGrp.width = 24, this.btn.touchEnabled = !1, this.bg.visible = !1, this.desGrp.visible = !0, this.btn.scaleX = -1, egret.Tween.get(this.desGrp).to({
            width: 259
        }, 500).call(function () {
            t.btn.scaleX = 1, t.btn.touchEnabled = !0
        }, this)
    }, e.prototype.close = function () {
        var t = this;
        egret.Tween.removeTweens(this.desGrp), this.btn.touchEnabled = !1, egret.Tween.get(this.desGrp).to({
            width: 24
        }, 500).call(function () {
            t.btn.scaleX = -1, t.btn.touchEnabled = !0, t.bg.visible = !0, t.desGrp.visible = !1
        }, this)
    }, e.prototype.openclose = function () {
        var t = this;
        egret.Tween.removeTweens(this.desGrp), this.desGrp.width = 24, this.btn.touchEnabled = !1, this.bg.visible = !1, this.desGrp.visible = !0, this.btn.scaleX = 1, egret.Tween.get(this.desGrp).to({
            width: 259
        }, 500).wait(2e3).to({
            width: 24
        }, 500).call(function () {
            t.bg.visible = !0, t.desGrp.visible = !1, t.btn.scaleX = -1, t.btn.touchEnabled = !0
        }, this)
    }, e.prototype.onSize = function () {
        this.x = GameGlobal.stage.stageWidth - this.skin.width, this.y = GameGlobal.stage.stageHeight - 750
    }, e
}(BaseEUIView);
__reflect(VHideMission.prototype, "VHideMission");
var Vo_smdl = function () {
    function t() {
        this.isvip = !1, this.triggerOpen = !0
    }
    return t.isTriVip = function (t) {
        var e = this.Map;
        for (var i in e) {
            var o = e[i];
            if (!o.isget && o.cfg.vip <= t) {
                o.isvip = !0, GameGlobal.layerMgr.open(UIConst.SMDL, o.id);
                break
            }
        }
    }, t.Map = {}, t
}();
__reflect(Vo_smdl.prototype, "Vo_smdl");
var VSMDL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "SMDLSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        DisplayUtil.popBtnStyle(this.btn), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onT = function () {
        "领取大礼" == this.btn.label ? GameGlobal.modelQuest.CG3901(this.bid) : this.closeHandler()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.bid = e, this.update()
    }, e.prototype.update = function () {
        var t = this.bid,
            e = Vo_smdl.Map[t];
        if (e) {
            var i = e.cfg;
            if (this.upGrids(i), this.btn.label = "领取大礼", e.isvip) return e.isvip = !1, this.imgcom.visible = !1, this.lbcom.lineSpacing = 10, void(this.lbcom.textFlow = HtmlUtil.parse("恭喜成为" + HtmlUtil.color("VIP" + i.vip, "#d83503") + "\n领取" + HtmlUtil.color("神秘大礼", "#d83503") + ",快人一步"));
            if (e.pro >= e.cfg.sz) this.imgcom.visible = !0, this.lbcom.text = " ";
            else if (0 == e.pro) {
                if (this.btn.label = "继续任务", this.imgcom.visible = !1, this.lbcom.lineSpacing = 10, 2 == e.cfg.type) var o = HtmlUtil.parse("升到" + HtmlUtil.color(i.sz, "#10a244") + "级或" + HtmlUtil.color("VIP" + i.vip, "#d83503") + "可领取\n" + HtmlUtil.fontSize("(还需提升", 22) + HtmlUtil.colorSize(i.sz - GameGlobal.modelRole.voMine.level, "#d83503", 22) + HtmlUtil.fontSize("级)", 22));
                else o = HtmlUtil.parse("完成" + HtmlUtil.color(i.sz, "#10a244") + "个任务或" + HtmlUtil.color("VIP" + i.vip, "#d83503") + "可领取\n" + HtmlUtil.fontSize("(还需完成", 22) + HtmlUtil.colorSize(i.sz - e.pro, "#d83503", 22) + HtmlUtil.fontSize("个任务)", 22));
                this.lbcom.textFlow = o
            }
        }
    }, e.prototype.upGrids = function (t) {
        var e = t.nanjl.split(";"),
            i = e.shift(),
            o = e.join(";"),
            n = ConfigHelp.makeVoList(i)[0];
        this.grid.data = n, this.grid.enableTip(), ConfigHelp.makeStrGrids(o, this.grids, 0, 0, this.gridGrp, !0)
    }, e.prototype.onClose = function () {
        if ("领取大礼" == this.btn.label) {
            var t = Vo_smdl.Map[this.bid + 1];
            if (t && !t.isget)
                if (GameGlobal.modelRole.voMine.vip >= t.cfg.vip) t.isvip = !0, GameGlobal.layerMgr.open(UIConst.SMDL, t.id);
                else if (t.pro == t.cfg.sz) GameGlobal.layerMgr.open(UIConst.SMDL, t.id);
            else if (0 == t.pro) {
                GameGlobal.layerMgr.open(UIConst.SMDL, t.id);
                var e = 1;
                GameGlobal.layerMgr.open(UIConst.HIDEMISSION, {
                    id: t.id,
                    ope: e
                })
            } else t.pro < t.cfg.sz && (e = 2, GameGlobal.layerMgr.open(UIConst.HIDEMISSION, {
                id: t.id,
                ope: e
            }))
        } else if (GameGlobal.layerMgr.isOpenView(UIConst.HIDEMISSION)) {
            var i = GameGlobal.layerMgr.getView(UIConst.HIDEMISSION);
            i.openclose()
        }
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VSMDL.prototype, "VSMDL");
var ModelShangCheng = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.remainTime = 0, e.refreshCount = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(902, this.GC902, this), e.regHand(904, this.GC904, this), e.regHand(906, this.GC906, this), e.regHand(908, this.GC908, this), e.regHand(910, this.GC910, this), e.regHand(912, this.GC912, this), e.regHand(4502, this.GC4502, this), e.regHand(4504, this.GC4504, this), e.regHand(4506, this.GC4506, this)
    }, e.prototype.CG901 = function () {
        this.sendSocket(901, this.getBytes())
    }, e.prototype.GC902 = function (t, i) {
        VoShangCheng.mapZLG.clear();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readInt(),
                s = i.readByte(),
                r = i.readByte();
            VoShangCheng.updateZLG(a, s, r)
        }
        t.remainTime = i.readInt(), t.refreshCount = i.readShort(), t.notify(e.msg_zhenlongge)
    }, e.prototype.CG903 = function () {
        this.sendSocket(903, this.getBytes())
    }, e.prototype.GC904 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            for (var n = i.readShort(), a = 0; n > a; a++) {
                var s = i.readShort(),
                    r = i.readShort();
                VoShangCheng.updateCommond(s, r)
            }
            t.notify(e.msg_commond)
        } else ViewText.text("获取失败")
    }, e.prototype.CG905 = function (t, e, i) {
        var o = this.getBytes();
        o.writeByte(t), o.writeShort(e), o.writeShort(i), this.sendSocket(905, o)
    }, e.prototype.GC906 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = i.readShort(),
                s = VoShangCheng.updateCommond(n, a);
            t.notify(e.msg_commond_buy, s), GameGlobal.layerMgr.close(UIConst.JJCSTORETIPS)
        } else 8 == o ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["", "", "不存在该物品", "已达每日购买上限", "已达永久购买上限", "购买数量超出每日购买上限", "购买数量超出永久购买上限", "货币不足", null][o])
    }, e.prototype.CG907 = function () {
        this.sendSocket(907, this.getBytes())
    }, e.prototype.GC908 = function (t, i) {
        var o = i.readByte();
        1 == o ? (t.refreshCount = i.readShort(), t.notify(e.msg_refrashTime)) : ViewText.text([null, null, "元宝不足", "刷新次数已满"][o])
    }, e.prototype.CG909 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(909, e)
    }, e.prototype.GC910 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = VoShangCheng.mapZLG.getByKey(n);
            a && (a.hasBought = 1, a.boughtNum = 1, t.notify(e.msg_zhenlongge_buy, a), GameGlobal.layerMgr.close(UIConst.JJCSTORETIPS))
        } else 6 == o ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["", "成功", "该物品不存在", "该物品不在本期清单中", "该物品不能重复购买", "货币不足", null][o])
    }, e.prototype.CG911 = function (t, e, i) {
        var o = this.getBytes();
        o.writeLong(t), o.writeShort(e), o.writeInt(i), this.sendSocket(911, o)
    }, e.prototype.GC912 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = i.readShort(),
                s = VoShangCheng.updateCommond(n, a);
            t.notify(e.msg_commond_buy, s), GameGlobal.layerMgr.close(UIConst.JJCSTORETIPS), t.notify(e.msg_give)
        } else if (2 == o) return void ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        });
        var r = ["", "好感度增加", "", "好友未互相关注", "已达每日购买上限", "购买数量超出每日上限", "背包已满", "", "", "", "玩家不在线"];
        ViewText.text(r[o])
    }, e.prototype.CG4501 = function () {
        this.sendSocket(4501, this.getBytes())
    }, e.prototype.GC4502 = function (t, i) {
        VoShangCheng.mapShuang11.clear();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readInt(),
                s = i.readByte(),
                r = i.readByte();
            VoShangCheng.updateShuang11(a, s, r)
        }
        t.remainTime = i.readInt(), t.refreshCount = i.readShort(), t.notify(e.msg_shuang11)
    }, e.prototype.CG4503 = function () {
        this.sendSocket(4503, this.getBytes())
    }, e.prototype.GC4504 = function (t, i) {
        var o = i.readByte();
        1 == o ? (t.refreshCount = i.readShort(), t.notify(e.msg_refrashTimeShuang11)) : ViewText.text([null, null, "元宝不足", "刷新次数已满"][o])
    }, e.prototype.CG4505 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(4505, e)
    }, e.prototype.GC4506 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = VoShangCheng.mapShuang11.getByKey(n);
            a && (a.hasBought = 1, a.boughtNum = 1, t.notify(e.msg_shuang11_buy, a), GameGlobal.layerMgr.close(UIConst.JJCSTORETIPS))
        } else 6 == o ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["", "成功", "该物品不存在", "该物品不在本期清单中", "该物品不能重复购买", "货币不足", null][o])
    }, e.msg_zhenlongge = "msg_zhenlongge", e.msg_commond = "msg_commond", e.msg_commond_buy = "msg_commond_buy", e.msg_refrashTime = "msg_refrashTime", e.msg_zhenlongge_buy = "msg_zhenlongge_buy", e.msg_give = "msg_give", e.msg_shuang11 = "msg_shuang11", e.msg_refrashTimeShuang11 = "msg_refrashTimeShuang11", e.msg_shuang11_buy = "msg_shuang11_buy", e.isShuang11 = !1, e.isZhengLonge = !1, e
}(BaseModel);
__reflect(ModelShangCheng.prototype, "ModelShangCheng");
var ViewMsgTips = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.lifeTime = 2500, e.skinName = "ViewMsgTipsSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.touchEnabled = !1, this.touchChildren = !1, this.renderers = []
    }, e.prototype.addConent = function (t) {
        var e = ItemMsgTips.create();
        e.setData(t), e.bornTime = egret.getTimer(), this.renderers.push(e), this.container.addChild(e)
    }, e.prototype.addTick = function () {
        GameGlobal.tick.addInterv(this.onTick, 1, this)
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onTick = function (t) {
        var i = egret.getTimer(),
            o = t.renderers[0];
        i >= o.bornTime + t.lifeTime && (o.onRemove(), t.renderers.shift()), 0 == t.renderers.length && 0 == e.buffArea.length && t.closeHandler()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addTick()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeTick()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.add = function (t, e, i, o) {
        if (void 0 === o && (o = -1), GameGlobal.layerMgr.isOpenView(UIConst.MSGTIPS)) n = GameGlobal.layerMgr.getView(UIConst.MSGTIPS);
        else {
            GameGlobal.layerMgr.open(UIConst.MSGTIPS);
            var n = GameGlobal.layerMgr.getView(UIConst.MSGTIPS)
        }
        var a = {
                content: t,
                source: e,
                contentAsHtml: i,
                textColor: o
            },
            s = egret.getTimer();
        s - this.last_time >= this.interval ? (this.last_time = s, n.addConent(a)) : (this.buffArea.push(a), GameGlobal.tick.addInterv(this.onDelayAdd, this.interval, n))
    }, e.onDelayAdd = function (t) {
        var i = e.buffArea.shift();
        e.last_time = egret.getTimer(), t.addConent(i), 0 == e.buffArea.length && GameGlobal.tick.removeInterv(e.onDelayAdd)
    }, e.buffArea = [], e.last_time = 0, e.interval = 200, e
}(BaseEUIView);
__reflect(ViewMsgTips.prototype, "ViewMsgTips");
var CFG_CYDH = function () {
    function t() {}
    return t
}();
__reflect(CFG_CYDH.prototype, "CFG_CYDH");
var ItemHuoBiStore = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/store/ItemHuoBi1.exml", e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.type,
                i = GameGlobal.modelRole.voMine,
                o = 0;
            switch (e) {
                case 31:
                    this.imgHuoBi.source = "MainScreen_json.yl", o = i.yinliang;
                    break;
                case 32:
                    this.imgHuoBi.source = "MainScreen_json.byl", o = i.bYuanbao;
                    break;
                case 33:
                    this.imgHuoBi.source = "MainScreen_json.bm_yb", o = i.yuanbao;
                    break;
                case 36:
                    this.imgHuoBi.source = IconUtil.getIconUrl(t.icon), o = i.xiayi;
                    break;
                case 38:
                    this.imgHuoBi.source = IconUtil.getIconUrl(t.icon), o = VoMember.mineGX;
                    break;
                default:
                    this.imgHuoBi.source = IconUtil.getIconUrl(t.icon), o = GameGlobal.modelBag.getItemCount(t.id)
            }
            this.setNum(o), this.addMsgChange(), this.once(eui.CollectionEventKind.REMOVE, this.offMsgChange, this)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setNum = function (t) {
        this.lbNum.text = ConfigHelp.getNumText(t)
    }, e.prototype.addMsgChange = function () {
        var t = this.data.type;
        switch (t) {
            case 1:
                GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onChange, this);
                break;
            case 2:
                GameGlobal.modelBag.on(ModelBag.MSG_EQUIPCHANGE, this.onChange, this);
                break;
            default:
                GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.onChange, this)
        }
    }, e.prototype.onChange = function () {
        var t = this.data.type,
            e = GameGlobal.modelRole.voMine,
            i = 0;
        switch (t) {
            case 1:
                i = GameGlobal.modelBag.getItemCount(this.data.id);
                break;
            case 2:
                i = GameGlobal.modelBag.getEquipCount(this.data.id);
                break;
            case 31:
                i = e.yinliang;
                break;
            case 32:
                i = e.bYuanbao;
                break;
            case 33:
                i = e.yuanbao;
                break;
            case 36:
                i = e.xiayi;
                break;
            case 38:
                i = VoMember.mineGX
        }
        this.setNum(i)
    }, e.prototype.offMsgChange = function () {
        var t = this.data.type;
        switch (t) {
            case 1:
                GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onChange, this);
                break;
            case 2:
                GameGlobal.modelBag.off(ModelBag.MSG_EQUIPCHANGE, this.onChange, this);
                break;
            default:
                GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.onChange, this)
        }
    }, e
}(eui.Component);
__reflect(ItemHuoBiStore.prototype, "ItemHuoBiStore", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var ItemMsgTips = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.bornTime = 0, e.skinName = "ItemMsgTipsSkin", e
    }
    return __extends(e, t), e.prototype.setData = function (t) {
        t.textColor > 0 && (this.txt.textColor = t.textColor), t.contentAsHtml === !0 ? this.txt.textFlow = HtmlUtil.parse(t.content) : this.txt.text = t.content, t.source ? DisplayUtil.addBy(this.icon, this.interContainer, 0) : DisplayUtil.remove(this.icon), this.icon.source = t.source, this.onAdd()
    }, e.prototype.onAdd = function () {
        this.container.alpha = .5, this.container.scaleX = .2, this.container.scaleY = .2, egret.Tween.get(this.container).to({
            alpha: 1,
            scaleX: 1,
            scaleY: 1
        }, 300, egret.Ease.backOut)
    }, e.prototype.onRemove = function () {
        this.container.alpha = 1, egret.Tween.get(this.container).to({
            alpha: 0
        }, 500, egret.Ease.backOut).call(this.dispose, this)
    }, e.prototype.dispose = function () {
        this.container.y = -4, this.container.alpha = 1, this.bornTime = 0, this.parent && this.parent.removeChild(this), e.pool.push(this)
    }, e.create = function () {
        return this.pool.pop() || new e
    }, e.pool = [], e
}(eui.Component);
__reflect(ItemMsgTips.prototype, "ItemMsgTips");
var CFG_CZDH = function () {
    function t() {}
    return t.parse = function () {
        var e = t.LIB;
        for (var i in e) {
            var o = t.getbyId(parseInt(i)),
                n = parseInt(i) / 100 >> 0;
            t.parseDatas[n] || (t.parseDatas[n] = []), t.parseDatas[n].push(o)
        }
    }, t.getbyId = function (e) {
        var i = {},
            o = t.LIB,
            n = o[e].toolData.split(","),
            a = null,
            s = n[0];
        1 == s ? (a = new VoItem, a.init(n[1]), a.count = n[2]) : 2 == s ? (a = new VoEquip, a.init(n[1]), a.count = n[2]) : (a = new VoCurrency, a.init(s), a.count = n[2], a.quality = 1), i.vo = a, i.boughtNum = 0;
        for (var r in o[e]) i[r] = o[e][r];
        return i
    }, t.parseDatas = {}, t
}();
__reflect(CFG_CZDH.prototype, "CFG_CZDH");
var VoShangCheng = function () {
    function t() {
        this.zhekou = -1, this.hasBought = -1, this.boughtNum = 0
    }
    return Object.defineProperty(t.prototype, "cfg", {
        get: function () {
            return this._cfg
        },
        set: function (t) {
            this._cfg = t, this.itemID = t.wpid[1]
        },
        enumerable: !0,
        configurable: !0
    }), t.initSeparateMap = function () {
        var t = CFG_STORE.LIB;
        for (var e in t) {
            var i = this.mapCommond.getByKey(e);
            i || (i = this.createVo(), i.cfg = t[e], this.mapCommond.add(i, e));
            var o = e.charAt(0),
                n = this.mapSeparate.getByKey(o);
            n || (n = [], this.mapSeparate.add(n, o)), n.push(i)
        }
    }, t.updateZLG = function (t, e, i) {
        var o = this.mapZLG.getByKey(t);
        return o || (o = this.createVo(), o.cfg = CFG_STORE.LIB2[t], this.mapZLG.add(o, t)), o.zhekou = e, o.hasBought = i, 1 == o.hasBought && (o.boughtNum = 1), o
    }, t.updateShuang11 = function (t, e, i) {
        var o = this.mapShuang11.getByKey(t);
        return o || (o = this.createVo(), o.cfg = CFG_STORE_shuang11.LIB[t], this.mapShuang11.add(o, t)), o.zhekou = e, o.hasBought = i, 1 == o.hasBought && (o.boughtNum = 1), o
    }, t.updateCommond = function (t, e) {
        var i = this.mapCommond.getByKey(t);
        return i || (i = this.createVo(), i.cfg = CFG_STORE.LIB[t], this.mapCommond.add(i, t)), i.boughtNum = e, i
    }, t.createVo = function () {
        var e = new t;
        return e
    }, t.getDatasByType = function (t) {
        var e = this.mapSeparate.getByKey(t);
        return e || this.initSeparateMap(), e = this.mapSeparate.getByKey(t)
    }, t.prototype.getLimit = function () {
        if (this.isZhengLongGe() || this.isShuang11()) return 1;
        var t = this.cfg.dayxg,
            e = this.cfg.fxg;
        return t + e
    }, t.prototype.isZhengLongGe = function () {
        return this.isShuang11() ? !1 : this.hasBought >= 0
    }, t.prototype.isShuang11 = function () {
        return t.isEnterShuang11
    }, t.prototype.getPrice = function () {
        var t = this.cfg.xh[2],
            e = this.zhekou;
        return e > 0 ? t * e / 10 >> 0 : t
    }, t.prototype.conditionNotFit = function () {
        var t = this.cfg.level,
            e = GameGlobal.modelRole.voMine.level;
        return t > 0 && t > e ? (ViewText.htmlText("主角等级达到" + HtmlUtil.color("" + t + "级", "#58FF21") + "解锁该物品的购买权限"), !0) : !1
    }, t.prototype.priceNotEnough = function () {
        var t = this.cfg.xh.concat();
        t[2] = this.getPrice();
        var e;
        switch (t[0]) {
            case 36:
                e = VoAttribute.checkEnough(t.join(",")) || !0;
                break;
            case 1:
                1033 == t[1] ? e = VoAttribute.checkEnough(t.join(",")) || !0 : (1101 == t[1], e = VoAttribute.checkEnough(t.join(",")) || !0);
                break;
            default:
                e = VoAttribute.checkEnough(t.join(","), !0, !0)
        }
        return !e
    }, t.prototype.getOnSellData = function () {
        return this.cfg.wpid.join(",")
    }, t.prototype.conditionDisplay = function (t) {
        var e = this.cfg.level;
        if (e > 0) {
            var i = GameGlobal.modelRole.voMine.level;
            i >= e ? (t.textColor = 27922, t.text = "") : (t.textColor = 15532032, t.text = "主角达到" + e + "级可购买")
        } else t.text = ""
    }, t.prototype.getCost = function () {
        return this.cfg.xh.join(",")
    }, t.prototype.onBuy = function (t) {
        if (38 == this.cfg.xh[0]) GameGlobal.modelmenpai.CG845(this.cfg.id, t);
        else if (this.isZhengLongGe()) GameGlobal.modelShangCheng.CG909(this.cfg.id);
        else if (this.isShuang11()) GameGlobal.modelShangCheng.CG4505(this.cfg.id);
        else {
            var e = this.cfg.id.toString().charAt(0);
            GameGlobal.modelShangCheng.CG905(parseInt(e), this.cfg.id, t)
        }
    }, t.isOverXgById = function (t) {
        var e = this.mapCommond.getByKey(t);
        if (e) {
            if (0 != e.cfg.fxg) var i = e.cfg.fxg;
            else i = e.cfg.dayxg;
            return 0 != i ? e.boughtNum < i ? !1 : !0 : !1
        }
        return !1
    }, t.getRemainBuyTimes = function (t) {
        var e = ArrayUtil.getItem(this.mapCommond.getList(), "itemID", t),
            i = -1;
        if (e) 0 != e.cfg.fxg ? i = Math.max(0, e.cfg.fxg - e.boughtNum) : e.cfg.dayxg && (i = Math.max(0, e.cfg.dayxg - e.boughtNum));
        else {
            var o = CFG_STORE.getStoreItemCFG(t);
            if (!o) return 0;
            0 != o.fxg ? i = o.fxg : o.dayxg && (i = o.dayxg)
        }
        return i
    }, t.getBoughtNumById = function (t) {
        var e = this.mapCommond.getByKey(t);
        return e ? e.boughtNum : 0
    }, t.mapZLG = new CommondMap, t.mapCommond = new CommondMap, t.mapSeparate = new CommondMap, t.mapShuang11 = new CommondMap, t.isEnterShuang11 = !1, t
}();
__reflect(VoShangCheng.prototype, "VoShangCheng", ["IVoStore"]);
var ModelSYTAndCTG = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.sytAuto = !0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1052, this.GC1052, this), e.regHand(1054, this.GC1054, this), e.regHand(1056, this.GC1056, this), e.regHand(1058, this.GC1058, this), e.regHand(1060, this.GC1060, this), e.regHand(1062, this.GC1062, this), e.regHand(1152, this.GC1152, this), e.regHand(1154, this.GC1154, this), e.regHand(1156, this.GC1156, this), e.regHand(1158, this.GC1158, this), e.regHand(3202, this.GC3202, this), e.regHand(3204, this.GC3204, this), e.regHand(3206, this.GC3206, this), e.regHand(3208, this.GC3208, this), e.regHand(3210, this.GC3210, this), e.regHand(3212, this.GC3212, this)
    }, e.prototype.GC1052 = function (t, i) {
        var o = VoSYTMonster;
        o.highestLayer = i.readShort(), o.tongGuanLayer = i.readShort(), o.remainResetTime = i.readByte(), o.gotAwardLayer = i.readShort(), o.remainResetTime <= 0 ? o.resetCount = 1 - o.remainResetTime : o.resetCount = 0, o.updateDatas(), t.notify(e.msg_data_suoyaota)
    }, e.prototype.CG1053 = function () {
        this.sendSocket(1053, this.getBytes())
    }, e.prototype.GC1054 = function (t, e) {
        var i = e.readByte();
        1 != i && (3 == i ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["", "", "已经是最高级,不能扫荡", null][i]))
    }, e.prototype.CG1055 = function () {
        this.sendSocket(1055, this.getBytes())
    }, e.prototype.GC1056 = function (t, i) {
        var o = i.readByte();
        if (1 != o) {
            if (4 == o) return void platform.askOpenRecharge(function () {
                GameGlobal.layerMgr.close(UIConst.UIID_SYTRESETVIEW)
            });
            ViewText.text(["", "", "没有重置次数了", "超出重置次数", "元宝不足"][o]), t.notify(e.msg_data_reset_syt)
        }
    }, e.prototype.CG1057 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(1057, e)
    }, e.prototype.GC1058 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = VoSYTMonster;
            n.tongGuanLayer = i.readShort(), n.updateDatas(), t.notify(e.msg_data_suoyaota)
        } else ViewText.text(["", "", "已经是最高层", "要打完上一层才能打本层", "该层已打过"][o])
    }, e.prototype.CG1059 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1059, e)
    }, e.prototype.GC1060 = function (t, i) {
        for (var o = Util.getTempArr(), n = 0, a = i.readShort(); a > n; n++) {
            var s = i.readUTF(),
                r = i.readLong(),
                l = i.readInt();
            o.push([s, r, l])
        }
        VoSYTMonster.minePaiMing = i.readShort(), t.notify(e.msg_paihang_suoyaota, o.concat())
    }, e.prototype.CG1061 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(1061, e)
    }, e.prototype.GC1062 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = VoSYTMonster;
            n.gotAwardLayer = i.readShort(), n.updateDatas(), t.notify(e.msg_data_suoyaota)
        } else 4 == o ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["", "", "该奖励已领过", "该层没有奖励", null, "未通关,不能领取奖励"][o])
    }, e.prototype.GC1152 = function (t, i) {
        var o = i.readShort();
        VoCTGMonster.update(o), t.notify(e.msg_data_ctg)
    }, e.prototype.CG1153 = function () {
        this.sendSocket(1153, this.getBytes())
    }, e.prototype.GC1154 = function (t, e) {
        var i = e.readByte();
        1 != i && ViewText.text(["", "开打", "已经是最高层"][i])
    }, e.prototype.CG1155 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1155, e)
    }, e.prototype.GC1156 = function (t, i) {
        for (var o = i.readShort(), n = Util.getTempArr(), a = 0; o > a; a++) {
            var s = i.readUTF(),
                r = i.readLong(),
                l = i.readInt();
            n.push([s, r, l])
        }
        VoCTGMonster.minePaiMing = i.readShort(), t.notify(e.msg_paihang_ctg, n.concat())
    }, e.prototype.GC1158 = function (t, i) {
        var o = i.readShort();
        VoCTGMonster.highestLayer = o, t.notify(e.msg_data_ctg)
    }, e.prototype.setAuto = function (t) {
        this.sytAuto != t && (this.sytAuto = t, this.notify(e.MSG_AUTO))
    }, e.prototype.GC3202 = function (t, i) {
        var o = VoFMLMonster;
        o.highestLayer = i.readShort(), o.tongGuanLayer = i.readShort(), o.remainResetTime = i.readByte(), o.gotAwardLayer = i.readShort(), o.updateDatas(), t.notify(e.msg_data_fengmolv)
    }, e.prototype.CG3203 = function () {
        this.sendSocket(3203, this.getBytes())
    }, e.prototype.GC3204 = function (t, e) {
        var i = e.readByte();
        3 == i ? GameGlobal.modelBag.checkRLTips(0) : 1 != i && ViewText.text([null, null, "已经是最高级,不能扫荡", null][i])
    }, e.prototype.CG3205 = function () {
        this.sendSocket(3205, this.getBytes())
    }, e.prototype.GC3206 = function (t, i) {
        var o = i.readByte();
        1 == o ? VoFMLMonster.remainResetTime++ : 2 == o ? (ViewText.text("没有重置次数了"), t.notify(e.msg_data_reset_fml)) : 3 == o ? (platform.askOpenRecharge(function () {
            GameGlobal.layerMgr.close(UIConst.UIID_SYTRESETVIEW)
        }), t.notify(e.msg_data_reset_fml)) : 4 == o && (ViewText.text("已购买了重置次数，请先扫荡"), t.notify(e.msg_data_reset_fml))
    }, e.prototype.CG3207 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(3207, e)
    }, e.prototype.GC3208 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = VoFMLMonster;
            n.tongGuanLayer = i.readShort(), n.updateDatas(), t.notify(e.msg_data_fengmolv)
        } else ViewText.text(["", "", "已经是最高层", "要打完上一层才能打本层", "该层已打过"][o])
    }, e.prototype.CG3209 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3209, e)
    }, e.prototype.GC3210 = function (t, i) {
        for (var o = [], n = 0, a = i.readShort(); a > n; n++) {
            var s = i.readUTF(),
                r = i.readLong(),
                l = i.readInt();
            o.push([s, r, l])
        }
        VoFMLMonster.minePaiMing = i.readShort(), t.notify(e.msg_paihang_fengmolv, o)
    }, e.prototype.CG3211 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(3211, e)
    }, e.prototype.GC3212 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = VoFMLMonster;
            n.gotAwardLayer = i.readShort(), n.updateDatas(), t.notify(e.msg_data_fengmolv)
        } else 4 == o ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["", "", "该奖励已领过", "该层没有奖励", null, "未通关,不能领取奖励"][o])
    }, e.msg_data_suoyaota = "msg_data_suoyaota", e.msg_paihang_suoyaota = "msg_paihang_suoyaota", e.msg_data_reset_syt = "msg_data_reset_syt", e.msg_data_ctg = "msg_data_ctg", e.msg_paihang_ctg = "msg_paihang_ctg", e.MSG_AUTO = "msg_auto", e.msg_data_fengmolv = "msg_data_fengmolv", e.msg_paihang_fengmolv = "msg_paihang_fengmolv", e.msg_data_reset_fml = "msg_data_reset_fml", e
}(BaseModel);
__reflect(ModelSYTAndCTG.prototype, "ModelSYTAndCTG");
var SourceData = function () {
    function t() {
        this.renderers = []
    }
    return t.prototype.addRenderer = function (t) {
        this.renderers.push(t)
    }, t.prototype.getRenderers = function () {
        return this.renderers
    }, Object.defineProperty(t.prototype, "source", {
        get: function () {
            return this.datas
        },
        set: function (t) {
            this.datas = t, this.$validateRenderers()
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t.prototype, "length", {
        get: function () {
            return this.datas.length
        },
        enumerable: !0,
        configurable: !0
    }), t.prototype.getRenderer = function (t) {
        return this.renderers[t]
    }, t.prototype.$validateRenderers = function () {
        for (var t = 0, e = this.renderers.length; e > t; t++) {
            var i = this.renderers[t],
                o = this.datas[t];
            i.data = o
        }
    }, t.prototype.stop = function () {
        for (var t = 0; t < this.renderers.length; t++) {
            var e = this.renderers[t];
            e.stop()
        }
    }, t.prototype.setChosen = function (t) {
        this.nowChosenRender && this.nowChosenRender.setChosen(!1);
        for (var e = 0; e < this.renderers.length; e++) {
            var i = this.renderers[e],
                o = i.data;
            if (o.cfg.bianhao == t) {
                i.setChosen(!0), this.nowChosenRender = i;
                break
            }
        }
    }, t
}();
__reflect(SourceData.prototype, "SourceData");
var VChuangTianGuang = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.positions = [{
            x: 65,
            y: 512
        }, {
            x: 405,
            y: 360
        }, {
            x: 35,
            y: 180
        }], e.sourceData = new SourceData, e.skinName = "VChuangTianGuangSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        for (var e = 0; 3 > e; e++) {
            var i = new ItemCTGMonster,
                o = this.positions[e];
            i.$setX(o.x), i.$setY(o.y), this.addChild(i), this.sourceData.addRenderer(i), i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBattle, this)
        }
        this.txtCheck.textFlow = HtmlUtil.underLine("查看排行"), DisplayUtil.popBtnStyle(this.txtCheck), this.txtCheck.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onBattle = function (t) {
        var e = t.currentTarget,
            i = e.data.cfg.bianhao,
            o = VoCTGMonster.tongGuanLayer >= i,
            n = i > VoCTGMonster.tongGuanLayer + 1;
        o ? ViewText.text("已通关") : n ? ViewText.text("只有通" + (i - 1) + "关才能挑战" + i + "关") : ModelBattle.canEnterBtl() && GameGlobal.modelSytAndCTG.CG1153()
    }, e.prototype.onHand = function () {
        GameGlobal.layerMgr.open(UIConst.UIID_SYTPAIHANG, 2)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelSytAndCTG.on(ModelSYTAndCTG.msg_data_ctg, this.onUpdate, this), GameGlobal.modelSytAndCTG.on(ModelSYTAndCTG.msg_paihang_ctg, this.updatePaiHang, this), GameGlobal.modelSytAndCTG.CG1155(1)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelSytAndCTG.off(ModelSYTAndCTG.msg_data_ctg, this.onUpdate, this), GameGlobal.modelSytAndCTG.off(ModelSYTAndCTG.msg_paihang_ctg, this.updatePaiHang, this)
    }, e.prototype.onUpdate = function () {
        this.sourceData.source = VoCTGMonster.map.getList()
    }, e.prototype.updatePaiHang = function (t) {
        for (var e = t ? Math.min(t.length, 3) : 0, i = "", o = "", n = 0; e > n; n++) {
            var a = t[n],
                s = a[0],
                r = (a[1], a[2]);
            i += s + "\n", o += r + "\n"
        }
        this.txtName.text = i, this.txtLayer.text = o
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onUpdate(), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.sourceData.stop(), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(VChuangTianGuang.prototype, "VChuangTianGuang");
var ViewFengMoLu = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new SourceData, e.gridArr = [], e.curChapter = 0, e.skinName = "ViewFengMoLuSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        for (var e = 0; 5 > e; e++) {
            var i = this["item" + e];
            this.addChild(i), this.sourceData.addRenderer(i), i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSel, this)
        }
        this.txtLink.textFlow = HtmlUtil.underLine("查看排行"), this.btnSaoDang.label = "扫荡", this.btnReset.label = "重置", this.btnTiaoZhan.label = "挑战", DisplayUtil.popBtnStyle(this.btnLeft), DisplayUtil.popBtnStyle(this.btnRight), this.txtLink.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnSaoDang.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnReset.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnTiaoZhan.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.ewaiGpClicker.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), DisplayUtil.popBtnStyle(this.txtLink)
    }, e.prototype.onChange = function (t) {
        var e = t.currentTarget,
            i = this.curChapter;
        switch (e) {
            case this.btnLeft:
                i--;
                break;
            case this.btnRight:
                if (this.isMaxTongGuanChapter(i)) return void ViewText.text("通关这一章后可以查看下一章");
                i++
        }
        this.updateChapter(i), this.setSel(this.getLowestLayer())
    }, e.prototype.getLowestLayer = function () {
        return 5 * (this.curChapter - 1) + 1
    }, e.prototype.isMaxTongGuanChapter = function (t) {
        return t == VoFMLMonster.getChapter()
    }, e.prototype.onSel = function (t) {
        var e = t.currentTarget;
        this.setSel(e.data.cfg.bianhao)
    }, e.prototype.setSel = function (t) {
        this.showAwards(t)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.txtLink:
                GameGlobal.layerMgr.open(UIConst.UIID_SYTPAIHANG, 3);
                break;
            case this.btnSaoDang:
                GameGlobal.modelSytAndCTG.CG3203();
                break;
            case this.btnReset:
                if (!this.btnReset.enabled) return;
                var i = VoVip.LIB[GameGlobal.modelRole.voMine.vip].fml;
                VoFMLMonster.remainResetTime < i ? GameGlobal.layerMgr.open(UIConst.UIID_SYTRESETVIEW, 1) : ViewText.text("今日重置次数已用完");
                break;
            case this.btnTiaoZhan:
                var o = VoFMLMonster.tongGuanLayer + 1;
                this.selLayer == o ? GameGlobal.modelSytAndCTG.CG3207(VoFMLMonster.tongGuanLayer + 1) : this.selLayer < o ? ViewText.text("已挑战!") : ViewText.text("上一关未挑战!");
                break;
            case this.ewaiGpClicker:
                VSYTAwardTip.setMonsterVO(VoFMLMonster), GameGlobal.layerMgr.open(UIConst.UIID_SYTAWARDSTIP, this.getSelItem().data)
        }
    }, e.prototype.addMsg = function () {
        GameGlobal.modelSytAndCTG.on(ModelSYTAndCTG.msg_data_fengmolv, this.onUpdate, this), GameGlobal.modelSytAndCTG.on(ModelSYTAndCTG.msg_paihang_fengmolv, this.showPaiHang, this), GameGlobal.modelSytAndCTG.CG3209(1)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelSytAndCTG.off(ModelSYTAndCTG.msg_data_fengmolv, this.onUpdate, this), GameGlobal.modelSytAndCTG.off(ModelSYTAndCTG.msg_paihang_fengmolv, this.showPaiHang, this)
    }, e.prototype.updateChapter = function (t) {
        this.curChapter = t, this.watchLeft(), this.watchRight(), this.txtChapter.text = "第" + this.curChapter + "章", VoFMLMonster.updateTongGuanList(this.getLowestLayer()), this.updateMonsters()
    }, e.prototype.watchLeft = function () {
        1 == this.curChapter ? this.btnLeft.visible = !1 : this.btnLeft.visible = !0
    }, e.prototype.watchRight = function () {
        this.curChapter == VoFMLMonster.maxChapter() ? this.btnRight.visible = !1 : this.btnRight.visible = !0
    }, e.prototype.onUpdate = function () {
        var t = VoFMLMonster;
        this.txtHighestLayer.text = t.highestLayer + "";
        var e = VoVip.LIB[GameGlobal.modelRole.voMine.vip].fml;
        this.btnReset.setNoticeVis(0 == VoFMLMonster.remainResetTime), 0 == VoFMLMonster.tongGuanLayer || VoFMLMonster.remainResetTime >= e ? (this.btnReset.enabled = !1, this.btnReset.setNoticeVis(!1)) : this.btnReset.enabled = !0;
        var i = 0;
        i = t.tongGuanLayer < t.getMaxLayer() ? t.tongGuanLayer + 1 : t.getMaxLayer(), this.updateChapter(VoFMLMonster.getChapter()), VoFMLMonster.isBossLayer(VoFMLMonster.tongGuanLayer) && !VoFMLMonster.awardHasGot() ? this.showAwards(i - 1) : this.showAwards(i)
    }, e.prototype.showAwards = function (t) {
        this.selLayer = t, this.sourceData.setChosen(t), VoFMLMonster.isBossLayer(t) ? (this.ewaiGroup.visible = !0, 0 == VoFMLMonster.awardHasGot() && VoFMLMonster.tongGuanLayer >= t ? (this.staticBaoXiang.visible = !1, this.dynamicBaoXiang.visible = !0, this.addBaoXiangEff()) : (this.staticBaoXiang.visible = !0, this.dynamicBaoXiang.visible = !1, this.removeBaoXiangEff())) : (this.ewaiGroup.visible = !1, this.removeBaoXiangEff()), this.updateTZbtnState(), this.updateTongGuanLabel(t)
    }, e.prototype.updateTongGuanLabel = function (t) {
        if (t > VoFMLMonster.highestLayer) {
            this.txtTGAward.text = "首 通\n奖 励";
            var e = CFG_SYT.LIB_FENGMOLU[t].stjl;
            ConfigHelp.makeStrGrids(e, this.gridArr, 0, 0, this.gridGroup, !0)
        } else this.txtTGAward.text = "挑 战\n奖 励", e = CFG_SYT.LIB_FENGMOLU[t].sdjl, ConfigHelp.makeStrGrids(e, this.gridArr, 0, 0, this.gridGroup, !0)
    }, e.prototype.addBaoXiangEff = function () {
        this.baoXiangEff || (this.baoXiangEff = EffectMgr.addEff("uieff/baoxiang", this.dynamicBaoXiang, 0, 0, 1e3, -1, !0, 1)), this.iconNotice.visible = !0
    }, e.prototype.removeBaoXiangEff = function () {
        this.baoXiangEff && (EffectMgr.getIns().removeEff(this.baoXiangEff), this.baoXiangEff = null), this.iconNotice.visible = !1
    }, e.prototype.getSelItem = function () {
        return this.sourceData.nowChosenRender
    }, e.prototype.updateTZbtnState = function () {
        this.selLayer == VoFMLMonster.tongGuanLayer + 1 ? this.btnTiaoZhan.enabled = !0 : this.btnTiaoZhan.enabled = !1
    }, e.prototype.updateMonsters = function () {
        this.sourceData.source = VoFMLMonster.map.getList()
    }, e.prototype.showPaiHang = function (t) {
        for (var e = t ? Math.min(t.length, 3) : 0, i = "", o = "", n = 0; e > n; n++) {
            var a = t[n],
                s = a[0],
                r = (a[1], a[2]);
            i += s + "\n", o += r + "\n"
        }
        this.txtName.text = i, this.txtLayer.text = o
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onUpdate(), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.sourceData.stop(), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(ViewFengMoLu.prototype, "ViewFengMoLu");
var ViewSuoYaoTa = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.positions = [{
            x: 35,
            y: 485
        }, {
            x: 335,
            y: 440
        }, {
            x: 90,
            y: 300
        }, {
            x: 405,
            y: 250
        }, {
            x: 205,
            y: 130
        }], e.sourceData = new SourceData, e.gridArr = [], e.skinName = "ViewSuoYaoTaSkin", e
    }
    return __extends(e, t), e.prototype.guide = function () {
        for (var t = 0, e = this.sourceData.length; e > t; t++) {
            var i = this.sourceData.getRenderer(t);
            if (!i.data.hasTongGuan()) {
                QuestGuideArrow.getIns().guideTo(i, 115, 70);
                break
            }
        }
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this);
        for (var e = 0, i = this.positions.length; i > e; e++) {
            var o = this.positions[e],
                n = new ItemSuoYaoTa;
            n.$setX(o.x), n.$setY(o.y), this.addChild(n), this.sourceData.addRenderer(n)
        }
        this.txtLink.textFlow = HtmlUtil.underLine("查看排行"), this.btnSuoDang.label = "扫荡", this.btnReset.label = "重置", this.txtLink.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnSuoDang.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnReset.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnRule.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), DisplayUtil.popBtnStyle(this.txtLink), DisplayUtil.popBtnStyle(this.btnRule)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.txtLink:
                GameGlobal.layerMgr.open(UIConst.UIID_SYTPAIHANG, 1);
                break;
            case this.btnSuoDang:
                GameGlobal.modelSytAndCTG.CG1053();
                break;
            case this.btnReset:
                if (0 == this.btnReset.enabled) return;
                var i = VoVip.LIB[GameGlobal.modelRole.voMine.vip].syt;
                VoSYTMonster.remainResetTime + i > 0 ? GameGlobal.layerMgr.open(UIConst.UIID_SYTRESETVIEW, 0) : ViewText.text("重置次数已用完");
                break;
            case this.btnRule:
                GameGlobal.layerMgr.open(UIConst.STRINGTIP, VSYTAndCTGPage.introduceSYT)
        }
    }, e.prototype.addMsg = function () {
        GameGlobal.modelSytAndCTG.on(ModelSYTAndCTG.msg_data_suoyaota, this.onUpdate, this), GameGlobal.modelSytAndCTG.on(ModelSYTAndCTG.msg_paihang_suoyaota, this.showPaiHang, this), GameGlobal.modelSytAndCTG.CG1059(1)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelSytAndCTG.off(ModelSYTAndCTG.msg_data_suoyaota, this.onUpdate, this), GameGlobal.modelSytAndCTG.off(ModelSYTAndCTG.msg_paihang_suoyaota, this.showPaiHang, this)
    }, e.prototype.onUpdate = function () {
        var t = VoSYTMonster;
        this.txtHighestLayer.text = t.highestLayer + "";
        VoVip.LIB[GameGlobal.modelRole.voMine.vip].syt;
        this.btnReset.setNoticeVis(0 == VoSYTMonster.resetCount), VoSYTMonster.tongGuanLayer >= 1 ? this.btnReset.enabled = !0 : (this.btnReset.enabled = !1, this.btnReset.setNoticeVis(!1));
        var e = t.tongGuanLayer,
            i = 0;
        i = e < t.getMaxLayer() ? e + 1 : t.getMaxLayer();
        var o;
        i > t.highestLayer ? (this.txtAwards.source = "SYTAltas_json.stjl", o = CFG_SYT.LIB[i].stjl) : (this.txtAwards.source = "SYTAltas_json.tzjl", o = CFG_SYT.LIB[i].sdjl), ConfigHelp.makeStrGrids(o, this.gridArr, 0, 0, this.gridGroup, !0), this.updateMonsters()
    }, e.prototype.updateMonsters = function () {
        this.sourceData.source = VoSYTMonster.map.getList()
    }, e.prototype.showPaiHang = function (t) {
        for (var e = t ? Math.min(t.length, 3) : 0, i = "", o = "", n = 0; e > n; n++) {
            var a = t[n],
                s = a[0],
                r = (a[1], a[2]);
            i += n + 1 + "." + s + "\n", o += "<font color='#ff9f2d'>" + r + "</font>关\n"
        }
        this.txtName.text = i, this.txtLayer.textFlow = HtmlUtil.parse(o)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onUpdate(), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.sourceData.stop(), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(ViewSuoYaoTa.prototype, "ViewSuoYaoTa");
var VSYTAndCTGPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.base.btnReturn, 30, 30)
    }, e.prototype.guidePage = function (t) {
        var e = this.base;
        e && QuestGuideArrow.getIns().guideTo(e, 55, 30)
    }, e.prototype.checkPage = function (t) {
        switch (t) {
            case 0:
                return this._uiid == UIConst.SYTPAGE;
            case 1:
                return this._uiid == UIConst.CTGPAGE;
            case 2:
                return this._uiid == UIConst.FENGMOLU
        }
        return !1
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.base.createTabGroup().createPageGrp().createQuestBtn(), this.base.btnQuest.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHelp, this), this.base.listenTabClick(this.onSel, this), GameGlobal.layerMgr.reg(UIConst.SYTPAGE, ViewSuoYaoTa, this.base.pageGrp), GameGlobal.layerMgr.reg(UIConst.CTGPAGE, VChuangTianGuang, this.base.pageGrp), GameGlobal.layerMgr.reg(UIConst.FENGMOLU, ViewFengMoLu, this.base.pageGrp)
    }, e.prototype.onHelp = function () {
        switch (this._uiid) {
            case UIConst.SYTPAGE:
                GameGlobal.layerMgr.open(UIConst.STRINGTIP, e.introduceSYT);
                break;
            case UIConst.CTGPAGE:
                GameGlobal.layerMgr.open(UIConst.STRINGTIP, e.introduceCTG);
                break;
            case UIConst.FENGMOLU:
                GameGlobal.layerMgr.open(UIConst.STRINGTIP, e.introduceFML)
        }
    }, e.prototype.onSel = function (t) {
        var e = t.sort;
        switch (e) {
            case 0:
                this.setSel(UIConst.SYTPAGE);
                break;
            case 1:
                this.setSel(UIConst.CTGPAGE);
                break;
            case 2:
                this.setSel(UIConst.FENGMOLU)
        }
    }, e.prototype.addMsg = function () {
        GameGlobal.modelSytAndCTG.on(ModelSYTAndCTG.msg_data_suoyaota, this.setNotice, this), GameGlobal.modelSytAndCTG.on(ModelSYTAndCTG.msg_data_fengmolv, this.setNotice, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelSytAndCTG.off(ModelSYTAndCTG.msg_data_suoyaota, this.setNotice, this), GameGlobal.modelSytAndCTG.off(ModelSYTAndCTG.msg_data_fengmolv, this.setNotice, this)
    }, e.prototype.setSel = function (t) {
        if (-1 == t || this.canOpen(t)) {
            var e = -1;
            switch (this._uiid) {
                case UIConst.SYTPAGE:
                    e = 0, GameGlobal.layerMgr.close(UIConst.SYTPAGE);
                    break;
                case UIConst.CTGPAGE:
                    e = 1, GameGlobal.layerMgr.close(UIConst.CTGPAGE);
                    break;
                case UIConst.FENGMOLU:
                    e = 2, GameGlobal.layerMgr.close(UIConst.FENGMOLU)
            }
            switch (t) {
                case UIConst.SYTPAGE:
                    e = 0, GameGlobal.layerMgr.open(UIConst.SYTPAGE);
                    break;
                case UIConst.CTGPAGE:
                    e = 1, GameGlobal.layerMgr.open(UIConst.CTGPAGE);
                    break;
                case UIConst.FENGMOLU:
                    e = 2, GameGlobal.layerMgr.open(UIConst.FENGMOLU)
            }
            this._uiid = t, this.base.title = this.base.getTbtnTextBySort(e), this.base.setTabSelBySort(e)
        }
    }, e.prototype.canOpen = function (t) {
        if (t != UIConst.FENGMOLU) return CFG_COMMOND.isOpen(t, !0);
        var e = CFG_COMMOND.LIB[CFG_COMMOND.FENGMOLU].arg.openLv,
            i = VoSYTMonster.highestLayer;
        return i >= e ? !0 : void ViewText.text("锁妖塔达到" + e + "层开启")
    }, e.prototype.onOpen = function (e) {
        switch (t.prototype.onOpen.call(this, e), this.dealWithArg(e), this.setNotice(), this.addMsg(), e) {
            case 0:
                this.setSel(UIConst.SYTPAGE);
                break;
            case 1:
                this.setSel(UIConst.CTGPAGE);
                break;
            case 2:
                this.setSel(UIConst.FENGMOLU);
                break;
            default:
                e == UIConst.SYTPAGE || e == UIConst.CTGPAGE || e == UIConst.FENGMOLU ? this.setSel(e) : -1 == this._uiid ? this.setSel(UIConst.SYTPAGE) : this.setSel(e || this._uiid || UIConst.SYTPAGE)
        }
    }, e.prototype.dealWithArg = function (t) {
        t == UIConst.CTGPAGE || 1 == t ? (this.base.addTab("闯天关", 1, 2), this.base.removeTabByID(1), this.base.removeTabByID(3)) : (this.base.addTab("锁妖塔", 0, 1), this.base.addTab("封魔录", 2, 3), this.base.removeTabByID(2))
    }, e.prototype.setNotice = function () {
        this.base.setNoticBySort(0, VoSYTMonster.notice()), this.base.setNoticBySort(2, VoFMLMonster.notice())
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.setSel(-1), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.introduceSYT = "1.锁妖塔每天拥有1次免费重置次数，重置后可进行扫荡关卡，获取从第1层到历史挑战最高层的累计扫荡奖励。\n2.玩家也可消耗元宝额外购买重置次数，以获得更多的奖励。\n3.锁妖塔首次击杀每逢5关的头目，可获得在兑换珍兽的珍兽石，免费获得珍兽不再是奢望哦!", e.introduceCTG = "1. 恭喜上仙，闯天关者皆以炼自身意志，锻自身体魄为己任。\n2. 修我战剑，杀上青天！我命，不由天！\n3．每诛杀一名守关者，可获得极为珍贵的奖励。\n4. 位列闯天路前3名者，在页面上显示出他们的威名，供万仙敬仰！", e.introduceFML = "1. 恭喜上仙，封魔录者皆以炼自身意志，锻自身体魄为己任。\n2. 修我战剑，杀上青天！我命，不由天！\n3．每诛杀一名守关者，可获得极为珍贵的奖励。\n4. 位列封魔录前3名者，在页面上显示出他们的威名，供万仙敬仰！", e
}(BaseEUIView);
__reflect(VSYTAndCTGPage.prototype, "VSYTAndCTGPage");
var VSYTPaiHang = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.type = 1, e.skinName = "VSYTPaiHangSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemSYTPaiHang, this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn)
    }, e.prototype.addMsg = function () {
        switch (this.type) {
            case 1:
            default:
                GameGlobal.modelSytAndCTG.on(ModelSYTAndCTG.msg_paihang_suoyaota, this.onUpdate, this), GameGlobal.modelSytAndCTG.CG1059(2);
                break;
            case 2:
                GameGlobal.modelSytAndCTG.on(ModelSYTAndCTG.msg_paihang_ctg, this.onUpdate, this), GameGlobal.modelSytAndCTG.CG1155(2);
                break;
            case 3:
                GameGlobal.modelSytAndCTG.on(ModelSYTAndCTG.msg_paihang_fengmolv, this.onUpdate, this), GameGlobal.modelSytAndCTG.CG3209(2)
        }
    }, e.prototype.removeMsg = function () {
        switch (this.type) {
            case 1:
            default:
                GameGlobal.modelSytAndCTG.off(ModelSYTAndCTG.msg_paihang_suoyaota, this.onUpdate, this);
                break;
            case 2:
                GameGlobal.modelSytAndCTG.off(ModelSYTAndCTG.msg_paihang_ctg, this.onUpdate, this);
                break;
            case 3:
                GameGlobal.modelSytAndCTG.off(ModelSYTAndCTG.msg_paihang_fengmolv, this.onUpdate, this)
        }
    }, e.prototype.onUpdate = function (t) {
        switch (this.sourceData.source = t, this.type) {
            case 1:
            default:
                this.base.title = "锁妖塔排行", VoSYTMonster.minePaiMing > 0 ? this.txtMinePaiMing.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color(VoSYTMonster.minePaiMing, "#10a244")) : this.txtMinePaiMing.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color("未上榜", "#10a244")), VoSYTMonster.tongGuanLayer > 0 ? this.txtMineTongGuan.textFlow = HtmlUtil.parse("我的通关数: " + HtmlUtil.color(VoSYTMonster.tongGuanLayer, "#10a244")) : this.txtMineTongGuan.text = "我的通关数: 0";
                break;
            case 2:
                this.base.title = "闯天关排行", VoCTGMonster.minePaiMing > 0 ? this.txtMinePaiMing.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color(VoCTGMonster.minePaiMing, "#10a244")) : this.txtMinePaiMing.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color("未上榜", "#10a244")), this.txtMineTongGuan.text = "";
                break;
            case 3:
                this.base.title = "封魔录排行", VoFMLMonster.minePaiMing > 0 ? this.txtMinePaiMing.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color(VoFMLMonster.minePaiMing, "#10a244")) : this.txtMinePaiMing.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color("未上榜", "#10a244")), VoFMLMonster.tongGuanLayer > 0 ? this.txtMineTongGuan.textFlow = HtmlUtil.parse("我的通关数: " + HtmlUtil.color(VoFMLMonster.tongGuanLayer, "#10a244")) : this.txtMineTongGuan.text = "我的通关数: 0"
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.type = e, this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(VSYTPaiHang.prototype, "VSYTPaiHang");
var ItemCTGMonster = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "ItemCTGMonsterSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.touchChildren = !1, this.uirole = UIRole.create(), this.roleContainer.addChild(this.uirole)
    }, e.prototype.setState = function (t) {
        this.currentState = t
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtName.text = t.getName(), this.txtLayer.text = "第\n" + t.cfg.bianhao + "\n关";
            var e = t.cfg.mx;
            this.uirole.setMonsterID(e, !0), this.uirole.setWay(3), this.uirole.validParts(), this.uirole.play(), t.hasBeenKilled() ? this.setState("st2") : (this.setState("st1"), ConfigHelp.makeStrGrids(this.data.getAwards(), this.gridArr, 0, 0, this.gridContainer, !0)), this.gridArr.length > 2 ? this.setScale(.8) : this.setScale(1), "0" != t.cfg.words ? (this.txtBubble.text = t.cfg.words, this.bubbleBg.visible = !0) : (this.bubbleBg.visible = !1, this.txtBubble.text = "")
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setScale = function (t) {
        for (var e = 0; e < this.gridArr.length; e++) {
            var i = this.gridArr[e];
            i.$setScaleX(t), i.$setScaleY(t)
        }
    }, e.prototype.stop = function () {
        this.uirole.stop()
    }, e
}(eui.Component);
__reflect(ItemCTGMonster.prototype, "ItemCTGMonster");
var ItemFMLMonster = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ItemFMLMonsterSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.uirole = UIRole.create(), this.aniContainer.addChild(this.uirole)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.cfg.mx,
                i = CFG_MONSTER.LIB[e].n;
            this.txtName.text = i, this.uirole.setMonsterID(e, !0), this.uirole.setWay(3), this.uirole.validParts(), this.uirole.play(), this.iconBoss.visible = VoFMLMonster.isBossLayer(t.cfg.bianhao), this.showCanBattleEff(VoFMLMonster.tongGuanLayer + 1 == t.cfg.bianhao), this.iconTongGuan.visible = t.cfg.bianhao <= VoFMLMonster.tongGuanLayer
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setChosen = function (t) {
        var e = this.data.cfg.mx,
            i = CFG_MONSTER.LIB[e].n;
        t ? this.txtName.textFlow = HtmlUtil.parse(HtmlUtil.color("<b>" + i + "</b>", "#a83503")) : this.txtName.textFlow = HtmlUtil.parse(HtmlUtil.color(i, "#684c43")), this.iconSel.visible = t
    }, e.prototype.setState = function (t) {
        this.currentState = t
    }, e.prototype.showCanBattleEff = function (t) {
        t ? this.battleEffect || (this.battleEffect = EffectMgr.addEff("uieff/fighting", this, 80, 70, 1e3, -1, !0)) : this.battleEffect && (EffectMgr.getIns().removeEff(this.battleEffect), this.battleEffect = null)
    }, e.prototype.stop = function () {
        this.uirole.stop()
    }, e
}(eui.Component);
__reflect(ItemFMLMonster.prototype, "ItemFMLMonster");
var ItemSuoYaoTa = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ItemSuoYaoTaSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.uirole = UIRole.create(), this.partContainer.addChild(this.uirole), this.iconBaoXiang.addEventListener(egret.TouchEvent.TOUCH_TAP, this.openAwards, this), this.iconGot.addEventListener(egret.TouchEvent.TOUCH_TAP, this.openAwards, this), this.baoxiangContainer.addEventListener(egret.TouchEvent.TOUCH_TAP, this.openAwards, this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        var t = VoSYTMonster.tongGuanLayer + 1,
            e = this.data.cfg.bianhao;
        t == e && ModelBattle.canEnterBtl() && GameGlobal.modelSytAndCTG.CG1057(e)
    }, e.prototype.openAwards = function (t) {
        VSYTAwardTip.setMonsterVO(VoSYTMonster), GameGlobal.layerMgr.open(UIConst.UIID_SYTAWARDSTIP, this.data), t.stopImmediatePropagation()
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.cfg.bianhao;
            this.txtLayer.text = e + "", this.imgNotice.visible = !1, this.txtName.text = t.getName(), this.iconBoss.visible = VoSYTMonster.isBossLayer(this.data.cfg.bianhao);
            var i = VoSYTMonster.tongGuanLayer + 1;
            this.showCanBattleEff(i == e);
            var o = t.hasTongGuan();
            if (o)
                if (this.setState("st2"), VoSYTMonster.isBossLayer(this.data.cfg.bianhao)) {
                    this.iconTongGuan.source = null;
                    var n = VoSYTMonster.gotAwardLayer < e;
                    this.txtDescription.visible = n, this.iconGot.visible = !n, this.imgNotice.visible = n, this.showBaoXiangEff(n), this.uirole.setBody(null)
                } else this.iconTongGuan.source = "SYTAltas_json.tgEd", this.txtDescription.visible = !1, this.showBaoXiangEff(!1), this.iconGot.visible = !1, this.uirole.setMonsterID(t.cfg.mx, !0);
            else this.setState("st1"), this.showBaoXiangEff(!1), this.iconBaoXiang.visible = VoSYTMonster.isBossLayer(this.data.cfg.bianhao), this.uirole.setMonsterID(t.cfg.mx, !0);
            this.uirole.setWay(3), this.uirole.validParts(), this.uirole.play()
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setState = function (t) {
        this.currentState = t
    }, e.prototype.showCanBattleEff = function (t) {
        t ? this.battleEffect || (this.battleEffect = EffectMgr.addEff("uieff/fighting", this, 138, 80, 1e3, -1, !0)) : this.battleEffect && (EffectMgr.getIns().removeEff(this.battleEffect), this.battleEffect = null)
    }, e.prototype.showBaoXiangEff = function (t) {
        t ? (this.baoxiangContainer.visible = !0, this.baoXiangEff || (this.baoXiangEff = EffectMgr.addEff("uieff/baoxiang", this.baoxiangContainer, 0, 0, 1e3, -1, !0, 1))) : (this.baoxiangContainer.visible = !1, this.baoXiangEff && (EffectMgr.getIns().removeEff(this.baoXiangEff), this.baoXiangEff = null))
    }, e.prototype.stop = function () {
        this.uirole && this.uirole.stop(), this.showCanBattleEff(!1), this.showBaoXiangEff(!1)
    }, e
}(eui.Component);
__reflect(ItemSuoYaoTa.prototype, "ItemSuoYaoTa");
var ItemSYTPaiHang = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemSYTPaiHangSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t[0],
                i = t[1],
                o = t[2];
            this.txtPaiMing.text = this.itemIndex + 1 + "", this.txtName.text = e, this.txtZhanli.text = i + "", this.txtLayer.text = o + ""
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.background.source = "JJCAtlas_json.bg9" : this.background.source = "JJCAtlas_json.bg10"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemSYTPaiHang.prototype, "ItemSYTPaiHang");
var VSYTAwardTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "VSYTAwardTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.background), DisplayUtil.popBtnStyle(this.btnClose), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHand.label = "确定"
    }, e.prototype.onHand = function () {
        var t = 1 == this.getAwardState();
        t && (this.data instanceof VoSYTMonster ? GameGlobal.modelSytAndCTG.CG1061(this.data.cfg.bianhao) : GameGlobal.modelSytAndCTG.CG3211(this.data.cfg.bianhao)), this.closeHandler()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.data = e, this.onUpdate()
    }, e.prototype.onUpdate = function () {
        var t = this.data.hasTongGuan();
        t ? this.txtTitle.text = "领取奖励" : this.txtTitle.text = "通关奖励";
        var e = this.data.cfg.ewjl;
        "0" != e && ConfigHelp.makeStrGrids(e, this.gridArr, 0, 0, this.gridContainer, !0);
        var i = this.getAwardState();
        switch (i) {
            case 0:
                this.btnHand.label = "不可领取", this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1);
                break;
            case 1:
                this.btnHand.label = "领取", this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!0);
                break;
            case 2:
                this.btnHand.label = "已领取", this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1)
        }
    }, e.setMonsterVO = function (t) {
        this.monsterVO = t
    }, e.prototype.getAwardState = function () {
        var t = this.data.cfg.bianhao,
            i = e.monsterVO.tongGuanLayer,
            o = e.monsterVO.gotAwardLayer;
        return o >= t ? 2 : t > i ? 0 : 1
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VSYTAwardTip.prototype, "VSYTAwardTip");
var CFG_CZWAR = function () {
    function t() {}
    return t
}();
__reflect(CFG_CZWAR.prototype, "CFG_CZWAR");
var VoCTGMonster = function () {
    function t() {}
    return t.update = function (e) {
        if (this.tongGuanLayer = e, e < this.getMaxLayer()) var i = this.getLayers(e);
        else {
            var o = this.getMaxLayer();
            i = [o, o - 1, o - 2]
        }
        for (var n = 0, a = 0; 3 > n; n++, a++) {
            var s = i[n],
                r = this.map.getByKey(a);
            r || (r = new t, this.map.add(r, a)), r.cfg = CFG_CTG.LIB[s]
        }
    }, t.getLayers = function (t) {
        for (var e = [], i = t, o = i % this._3MONSTERS >> 0, n = i - o + 1, a = n; a < n + this._3MONSTERS; a++) e.push(a);
        return e
    }, t.getMaxLayer = function () {
        if (this._maxLayer > 0) return this._maxLayer;
        var t = 0;
        for (var e in CFG_CTG.LIB) t++;
        return this._maxLayer = t
    }, t.prototype.getName = function () {
        var t = this.cfg.mx;
        return CFG_MONSTER.LIB[t].n
    }, t.prototype.getAwards = function () {
        return this.cfg.jl
    }, t.prototype.hasBeenKilled = function () {
        return this.cfg.bianhao <= t.tongGuanLayer
    }, t.map = new CommondMap, t._3MONSTERS = 3, t
}();
__reflect(VoCTGMonster.prototype, "VoCTGMonster");
var VoFMLMonster = function () {
    function t() {}
    return t.updateDatas = function () {
        this.highestLayer = Math.max(this.tongGuanLayer, this.highestLayer), this.updateTongGuanList(this.tongGuanLayer)
    }, t.updateTongGuanList = function (e) {
        for (var i = t.map, o = this.getLayerIds(e), n = 0, a = 0; n < o.length; n++, a++) {
            var s = o[n],
                r = i.getByKey(a);
            r || (r = new t, i.add(r, a)), r.position = a, r.cfg = CFG_SYT.LIB_FENGMOLU[s]
        }
    }, t.getLayerIds = function (t) {
        return this.isBossLayer(t) && this.awardHasGot() ? this.getLayersByLayer(t) : this.getLayersByLayer(t - 1)
    }, t.getLayersByLayer = function (t) {
        var e = [],
            i = t % this._5MONSTERS >> 0,
            o = t - i + 1;
        t == this.getMaxLayer() && (o = t - this._5MONSTERS + 1);
        for (var n = o; n < o + this._5MONSTERS; n++) e.push(n);
        return e
    }, t.getMaxLayer = function () {
        if (this._maxLayer > 0) return this._maxLayer;
        var t = 0;
        for (var e in CFG_SYT.LIB_FENGMOLU) t++;
        return this._maxLayer = t
    }, t.awardHasGot = function () {
        return this.gotAwardLayer >= this.tongGuanLayer
    }, t.isBossLayer = function (t) {
        return t % this._5MONSTERS == 0
    }, t.prototype.hasTongGuan = function () {
        return null == this.cfg ? !0 : this.cfg.bianhao <= t.tongGuanLayer
    }, t.prototype.getName = function () {
        var t = this.cfg.mx;
        return CFG_MONSTER.LIB[t].n
    }, t.getChapter = function () {
        return this.isBossLayer(this.tongGuanLayer) ? this.tongGuanLayer != this.getMaxLayer() && this.awardHasGot() ? ((this.tongGuanLayer + 1) / 5 >> 0) + 1 : this.tongGuanLayer / 5 >> 0 : (this.tongGuanLayer / 5 >> 0) + 1
    }, t.maxChapter = function () {
        return this.getMaxLayer() / this._5MONSTERS >> 0
    }, t.notice = function () {
        var e = CFG_COMMOND.getOpenLevel(CFG_COMMOND.FENGMOLU),
            i = CFG_COMMOND.LIB[CFG_COMMOND.FENGMOLU].arg.openLv,
            o = GameGlobal.modelRole.voMine.level,
            n = VoSYTMonster.tongGuanLayer;
        if (o >= e && n >= i) {
            var a = (VoVip.LIB[GameGlobal.modelRole.voMine.vip].fml, 0 == t.remainResetTime),
                s = !1;
            return this.isBossLayer(this.tongGuanLayer) && 0 == this.awardHasGot() && (s = !0), a || s
        }
        return !1
    }, t.highestLayer = 0, t.map = new CommondMap, t._5MONSTERS = 5, t._maxLayer = 0, t
}();
__reflect(VoFMLMonster.prototype, "VoFMLMonster");
var VoSYTMonster = function () {
    function t() {}
    return t.updateDatas = function () {
        this.highestLayer = Math.max(this.tongGuanLayer, this.highestLayer);
        for (var e = t.map, i = this.getLayerIds(), o = 0, n = 0; o < i.length; o++, n++) {
            var a = i[o],
                s = e.getByKey(n);
            s || (s = new t, e.add(s, n)), s.position = n, s.cfg = CFG_SYT.LIB[a]
        }
    }, t.getLayerIds = function () {
        return this.isBossLayer(this.tongGuanLayer) && this.awardHasGot() ? this.getLayersByLayer(this.tongGuanLayer) : this.getLayersByLayer(this.tongGuanLayer - 1)
    }, t.getLayersByLayer = function (t) {
        var e = [],
            i = t % this._5MONSTERS >> 0,
            o = t - i + 1;
        t == this.getMaxLayer() && (o = t - this._5MONSTERS + 1);
        for (var n = o; n < o + this._5MONSTERS; n++) e.push(n);
        return e
    }, t.getMaxLayer = function () {
        if (this._maxLayer > 0) return this._maxLayer;
        var t = 0;
        for (var e in CFG_SYT.LIB) t++;
        return this._maxLayer = t
    }, t.awardHasGot = function () {
        return this.gotAwardLayer >= this.tongGuanLayer
    }, t.isBossLayer = function (t) {
        return t % this._5MONSTERS == 0
    }, t.prototype.hasTongGuan = function () {
        return null == this.cfg ? !0 : this.cfg.bianhao <= t.tongGuanLayer
    }, t.prototype.getName = function () {
        var t = this.cfg.mx;
        return CFG_MONSTER.LIB[t].n
    }, t.notice = function () {
        var t = 0 == this.resetCount,
            e = !1;
        return this.isBossLayer(this.tongGuanLayer) && 0 == this.awardHasGot() && (e = !0), t || e
    }, t.highestLayer = 0, t.map = new CommondMap, t._5MONSTERS = 5, t._maxLayer = 0, t
}();
__reflect(VoSYTMonster.prototype, "VoSYTMonster");
var ModelTarget = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.achieveQuests = [], e.achieveLv = 5, e.curAchieve = 0, e.achieveAwdID = 0, e.actDegree = 0, e.dailyQuests = [], e.boxStates = [], e.xj_lv = 1, e.xj_awdSt = 1, e.xj_remainDay = 10, e.xj_value = 0, e.testResult = !0, e
    }
    return __extends(e, t), e.prototype.getCurAchieve = function () {
        return this.curAchieve
    }, e.prototype.getDailyBoxState = function (t) {
        return this.boxStates[t]
    }, e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1750, this.GC_TARGETINIT, this), e.regHand(1752, this.GC_TAR_PROG, this), e.regHand(1754, this.GC_DAILY_AWD, this), e.regHand(1756, this.GC_ACHIEVE_AWD, this), e.regHand(1758, this.GC_ACH_LVAWD, this), e.regHand(1760, this.GC_DAILYFLY_AWD, this), e.regHand(1762, this.GC_FLY, this), e.regHand(1764, this.GC_DAILY_AWDST, this), e.regHand(1766, this.GC_UPDATETARLIST, this)
    }, e.prototype.GC_TARGETINIT = function (t, i) {
        t.dailyQuests.length = 0;
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = VoDailyQuest.create();
            a.id = i.readShort(), a.progress = i.readByte(), a.initLIB(), a.checkFinish(), t.dailyQuests[o] = a
        }
        t.actDegree = i.readShort();
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var s = i.readByte();
            t.boxStates[o + 1] = s
        }
        t.achieveLv = i.readByte(), t.curAchieve = i.readInt(), t.achieveQuests.length = 0;
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var r = VoAchieveQuest.create();
            r.id = i.readInt(), r.progress = i.readInt(), r.index = i.readByte(), r.initLIB(), r.cfg && (r.checkFinish(), t.achieveQuests.push(r))
        }
        t.achieveAwdID = i.readByte(), t.xj_lv = i.readByte(), t.xj_awdSt = i.readByte(), t.xj_value = i.readInt(), GameGlobal.modelRole.voMine.sceneChars[0].setXianJie(t.xj_lv), t.notify(e.MSG_ALLCHANGE), t.notify(e.MSG_NOTIC)
    }, e.prototype.GC_TAR_PROG = function (t, i) {
        var o = i.readInt(),
            n = i.readInt(),
            a = i.readByte();
        if (CFG_Target.LIBACHIEQ[o]) {
            var s = t.findAchieveQuest(o);
            s && (s.progress = n, s.index = a, s.initLIB(), s.checkFinish())
        } else if (CFG_Target.LIBDAILYQ[o]) {
            var r = t.findDailyQuest(o);
            r && (r.progress = n, r.checkFinish())
        }
        t.notify(e.MSG_ALLCHANGE), t.notify(e.MSG_NOTIC)
    }, e.prototype.CG_DAILY_AWD = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1753, e)
    }, e.prototype.GC_DAILY_AWD = function (t, i) {
        var o = i.readByte(),
            n = i.readByte();
        1 == o && (t.boxStates[n] = 2, t.notify(e.MSG_DAILYAWD), t.notify(e.MSG_NOTIC))
    }, e.prototype.CG_ACHIEVE_AWD = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1755, e)
    }, e.prototype.GC_ACHIEVE_AWD = function (t, i) {
        var o = i.readByte(),
            n = i.readInt(),
            a = i.readByte(),
            s = i.readInt(),
            r = i.readByte(),
            l = t.findAchieveQuest(s);
        t.curAchieve = n;
        var h = t.achieveLv;
        t.achieveLv = a, a != h && GameGlobal.layerMgr.open(UIConst.TAWARD), 1 == o && l && (l.index = r, l.change = !0, l.initLIB(), l.checkFinish(), t.notify(e.MSG_ACHVALUPDATE), t.notify(e.MSG_TACHSCHANGE, l), t.notify(e.MSG_NOTIC))
    }, e.prototype.CG_ACH_LVAWD = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1757, e)
    }, e.prototype.GC_ACH_LVAWD = function (t, i) {
        var o = i.readByte(),
            n = i.readByte();
        t.achieveAwdID = n, o && (t.notify(e.MSG_TAWARDSUC), t.notify(e.MSG_NOTIC))
    }, e.prototype.CG_DAILYFLY_AWD = function () {
        var t = this.getBytes();
        this.sendSocket(1759, t)
    }, e.prototype.GC_DAILYFLY_AWD = function (t, i) {
        var o = i.readByte();
        o && (t.xj_awdSt = 2, t.notify(e.MSG_XIANJIEAWD), t.notify(e.MSG_NOTIC))
    }, e.prototype.CG_FLY = function () {
        var t = this.getBytes();
        this.sendSocket(1761, t)
    }, e.prototype.GC_FLY = function (t, i) {
        var o = i.readByte(),
            n = i.readByte(),
            a = i.readInt(),
            s = i.readByte();
        1 == o && (t.xj_lv = n, t.xj_value = a, t.xj_remainDay = s, t.notify(e.MSG_FEISHENG), t.notify(e.MSG_NOTIC), GameGlobal.layerMgr.open(UIConst.FEISHENGTIP), GameGlobal.modelRole.voMine.sceneChars[0].setXianJie(t.xj_lv))
    }, e.prototype.GC_DAILY_AWDST = function (t, i) {
        t.actDegree = i.readShort();
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = o + 1,
                s = i.readByte();
            t.boxStates[a] = s
        }
        t.xj_value = i.readInt(), t.notify(e.MSG_DAILYAWDINFO), t.notify(e.MSG_NOTIC)
    }, e.prototype.GC_UPDATETARLIST = function (t, i) {
        var o = i.readByte(),
            n = t.achieveLv;
        t.achieveLv = o, t.curAchieve = i.readInt(), o != n && GameGlobal.layerMgr.open(UIConst.TAWARD), t.achieveQuests.length = 0;
        for (var a = 0, s = i.readShort(); s > a; a++) {
            var r = VoAchieveQuest.create();
            r.id = i.readInt(), r.progress = i.readInt(), r.index = i.readByte(), r.initLIB(), r.cfg && (r.checkFinish(), t.achieveQuests.push(r))
        }
        t.notify(e.MSG_ACHLVUP)
    }, e.prototype.findDailyQuest = function (t) {
        for (var e = 0, i = this.dailyQuests.length; i > e; e++)
            if (this.dailyQuests[e].id == t) return this.dailyQuests[e];
        return null
    }, e.prototype.findAchieveQuest = function (t) {
        for (var e = 0, i = this.achieveQuests.length; i > e; e++)
            if (this.achieveQuests[e].id == t) return this.achieveQuests[e];
        return null
    }, e.prototype.clearChangeAchItem = function () {
        for (var t = this.achieveQuests.length - 1; t >= 0; t--) this.achieveQuests[t].change && this.achieveQuests.splice(t, 1)
    }, e.prototype.isTargetNotic = function () {
        var t = this.achieveLv > this.achieveAwdID || this.isAnyTargetNotic();
        return t
    }, e.prototype.isAnyTargetNotic = function () {
        for (var t = this.achieveQuests, e = (this.achieveLv + 1, 0), i = t.length; i > e; e++) {
            var o = t[e];
            if (!o.allFinish && o.curFinish) return !0
        }
        return !1
    }, e.prototype.isDailyNotic = function () {
        for (var t = 1; 3 >= t; t++)
            if (1 == this.boxStates[t]) return !0;
        return !1
    }, e.prototype.isXianJieNotic = function () {
        var t = 1 == this.xj_awdSt || this.isXianJieCanUp();
        return t
    }, e.prototype.isXianJieCanUp = function () {
        var t = CFG_Target.LIBXIANJIE[this.xj_lv + 1];
        return t && this.achieveLv >= t.cj && this.xj_value >= t.xj ? !0 : !1
    }, e.defUserOp = function (t) {
        var e = t.split(",");
        if ("1" == e[0] && CFG_COMMOND.isOpenByCFG(e[1], !0)) {
            var i;
            i = isNaN(e[2]) ? e[2] : parseInt(e[2]);
            var o = parseInt(e[1]);
            if (o == UIConst.MENPAI || o == UIConst.MPHUOYUEPAGE || o == UIConst.VIEWMPBATTLEPAGE) {
                var n = GameGlobal.modelRole.voMine.menpaiId;
                if (!n) return void ModelMenPai.openMenPai()
            }(1e3 > i || CFG_COMMOND.isOpenByCFG(e[2], !0)) && (i >= 0 ? GameGlobal.layerMgr.open(e[1], i) : GameGlobal.layerMgr.open(e[1], e[2]))
        }
    }, e.MSG_ALLCHANGE = 0, e.MSG_ACHVALUPDATE = "MSG_ACHUPDATE", e.MSG_TAWARDSUC = 1, e.MSG_DAILYAWD = "MSG_DAILYAWD", e.MSG_DAILYAWDINFO = "MSG_DAILYAWDINFO", e.MSG_LISTSORT = -1, e.MSG_TACHSCHANGE = 11, e.MSG_DAILYQC = 12, e.MSG_FEISHENG = "fs", e.MSG_XIANJIEAWD = "xjawd", e.MSG_ACHLVUP = "xjawd", e.MSG_NOTIC = 111, e
}(BaseModel);
__reflect(ModelTarget.prototype, "ModelTarget");
var ViewTarget = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curSt = -1, e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = GameGlobal.layerMgr;
        t.reg(UIConst.TXIUXIAN, VTargetXiuXian, this), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e = 0, e > 0 ? this.setCurSt(e) : this.setCurSt(0), e && this.setCurSt(e)
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.onTbtnT = function (t) {}, e.prototype.setCurSt = function (t) {
        var e = GameGlobal.layerMgr,
            i = this;
        switch (this._curSt) {
            case 0:
                e.close(UIConst.TXIUXIAN)
        }
        var o = this["tbtn" + this._curSt];
        switch (o && (o.selected = !1), this._curSt = t, t) {
            case 0:
                e.open(UIConst.TXIUXIAN), i.base.title = "修仙之路"
        }
        var n = this["tbtn" + t];
        n && (n.selected = !0)
    }, e
}(BaseEUIView);
__reflect(ViewTarget.prototype, "ViewTarget");
var VTargetDailyQuestPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.st = -1, e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.base.createTabGroup(), this.base.title = "每日必做", this.base.addTab("每日必做", 0, UIConst.TDAILY), this.base.addTab("仙阶", 0, UIConst.TXIANJIE), GameGlobal.layerMgr.reg(UIConst.TDAILY, VTargetDaily, this), GameGlobal.layerMgr.reg(UIConst.TXIANJIE, VTXianJie, this), this.base.listenTabClick(this.onTabT, this), this.addCloseListen(this.base.btnReturn).addCloseListen(this.base.btnClose)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e ? this.setCurSt(e) : this.setCurSt(0), this.checkNotic(), GameGlobal.modelTarget.on(ModelTarget.MSG_NOTIC, this.checkNotic, this)
    }, e.prototype.onClose = function () {
        this.setCurSt(-1), GameGlobal.modelTarget.on(ModelTarget.MSG_NOTIC, this.checkNotic, this)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.onTabT = function (t) {
        this.setCurSt(t.index)
    }, e.prototype.setCurSt = function (t) {
        if (t != this.st) {
            switch (this.st) {
                case 0:
                    GameGlobal.layerMgr.close(UIConst.TDAILY);
                    break;
                case 1:
                    GameGlobal.layerMgr.close(UIConst.TXIANJIE)
            }
            switch (t) {
                case 0:
                    GameGlobal.layerMgr.open(UIConst.TDAILY);
                    break;
                case 1:
                    GameGlobal.layerMgr.open(UIConst.TXIANJIE)
            }
            this.base.setTabSelIdx(t), this.st = t
        }
    }, e.prototype.checkNotic = function () {
        var t = GameGlobal.modelTarget;
        this.base.setNoticByIndex(0, t.isDailyNotic()), this.base.setNoticByIndex(1, t.isXianJieNotic())
    }, e
}(BaseEUIView);
__reflect(VTargetDailyQuestPnl.prototype, "VTargetDailyQuestPnl");
var ViewTDailyAward = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridVec = [], e.skinName = "resource/eui_skins/game/target/TDailyAwardSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.curID = e, this.update(), GameGlobal.modelTarget.on(ModelTarget.MSG_DAILYAWD, this.onGetAwd, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelTarget.off(ModelTarget.MSG_DAILYAWD, this.onGetAwd, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function () {
        var t = GameGlobal.modelTarget,
            e = CFG_Target.LIBdAILYAWD[this.curID];
        t.actDegree;
        this.lb.textFlow = HtmlUtil.parse(Lang.reTxt("活跃达到<font color='#ddaa33'>{0}</font>,可以获得如下奖励:", e.exp));
        var e = CFG_Target.LIBdAILYAWD[this.id],
            i = CFG_Target.LIBdAILYAWD[this.curID].jl,
            o = ConfigHelp.makeVoList(i),
            n = 20,
            a = this.cont.width - (90 * o.length + (o.length - 1) * n) >> 1,
            s = 180;
        ConfigHelp.makeVoGrids(o, this.gridVec, a, s, this.cont, !0, n);
        var r = t.boxStates[this.curID];
        if (2 == r) this.btn.visible = r, this.btn.label = "明天再来";
        else {
            this.btn.visible = !0;
            var l = 1 == r;
            l ? this.btn.label = "领取" : this.btn.label = "确定"
        }
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelTarget.boxStates[this.curID];
        1 == t ? GameGlobal.modelTarget.CG_DAILY_AWD(this.curID) : this.closeHandler()
    }, e.prototype.onGetAwd = function () {
        DisplayUtil.toBag(this.gridVec), this.update()
    }, e
}(BaseEUIView);
__reflect(ViewTDailyAward.prototype, "ViewTDailyAward");
var VoDailyQuest = function () {
    function t() {
        this.index = 0, this.isGet = !1
    }
    return t.prototype.initLIB = function () {
        var t = this.cfg = CFG_Target.LIBDAILYQ[this.id];
        this.name = t.rw
    }, t.create = function () {
        var e = new t;
        return e
    }, t.prototype.checkFinish = function () {
        this.isFinish = this.progress >= this.cfg.par
    }, t
}();
__reflect(VoDailyQuest.prototype, "VoDailyQuest");
var VTargetDaily = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/target/TargetDailySkin.exml", e
    }
    return __extends(e, t), e.prototype.guideClickItem = function (t) {
        for (var e = 0, i = this.itemList.$children.length; i > e; e++) {
            var o = this.itemList.$children[e];
            o.data.id == t && QuestGuideArrow.getIns().guideViewCenter(o.btnGo)
        }
    }, e.prototype.initView = function () {
        this.itemList.itemRenderer = VTDailyItem, this.itemListAC = new eui.ArrayCollection, this.itemList.dataProvider = this.itemListAC;
        var t = egret.TouchEvent.TOUCH_TAP;
        this.b1.addEventListener(t, this.onBoxT, this), this.b2.addEventListener(t, this.onBoxT, this), this.b3.addEventListener(t, this.onBoxT, this);
        for (var e = 1; 3 >= e; e++) {
            var i = this["b" + e];
            i.addEventListener(t, this.onBoxT, this);
            var o = this["lbV" + e];
            o.text = CFG_Target.LIBdAILYAWD[e].exp + "活跃"
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), GameGlobal.modelTarget.on(ModelTarget.MSG_DAILYAWDINFO, this.onInfo, this), GameGlobal.modelTarget.on(ModelTarget.MSG_DAILYAWD, this.onInfo, this), this.checkNotic(), GameGlobal.modelTarget.on(ModelTarget.MSG_NOTIC, this.checkNotic, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelTarget.off(ModelTarget.MSG_DAILYAWDINFO, this.onInfo), GameGlobal.modelTarget.off(ModelTarget.MSG_DAILYAWD, this.onInfo), GameGlobal.modelTarget.off(ModelTarget.MSG_NOTIC, this.checkNotic)
    }, e.prototype.update = function () {
        var t = GameGlobal.modelTarget,
            e = Math.min(1, t.actDegree / CFG_Target.LIBdAILYAWD[3].exp);
        this.pb.scaleX = e, this.lbCur.text = Lang.reTxt("今日活跃值:{0}点", t.actDegree);
        for (var i = t.dailyQuests, o = [], n = GameGlobal.modelRole.voMine.level, a = 0, s = i.length; s > a; a++) n >= i[a].cfg.olv && o.push(i[a]);
        o.sort(this.sort), DisplayUtil.fillDataAC(this.itemListAC, o);
        for (var a = 0; 3 > a; a++) {
            var r = a + 1,
                l = t.boxStates[r],
                h = this["imgG" + r],
                c = this["imgN" + r];
            c.visible = 1 == l, h.visible = 2 == l, c.touchEnabled = h.touchEnabled = !1
        }
    }, e.prototype.sort = function (t, e) {
        var i = t.id + (t.isFinish ? 1e4 : 0),
            o = e.id + (e.isFinish ? 1e4 : 0);
        return i - o
    }, e.prototype.onBoxT = function (t) {
        var e = t.currentTarget,
            i = 1;
        e == this.b2 ? i = 2 : e == this.b3 && (i = 3), GameGlobal.layerMgr.open(UIConst.TDAILYAWARD, i)
    }, e.prototype.onInfo = function () {
        this.update()
    }, e.prototype.checkNotic = function () {}, e
}(BaseEUIView);
__reflect(VTargetDaily.prototype, "VTargetDaily");
var VTDailyItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/target/TDailyItemSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btnGo.label = "前往"
    }, Object.defineProperty(e.prototype, "data", {
        set: function (t) {
            var e = this;
            e._data = t;
            t.isFinish;
            e.lbName.text = t.name, e.lbTimes.text = t.progress + "/" + t.cfg.par, e.lbGain.text = t.cfg.xj + "点", t.isFinish ? (this.btnGo.visible = !1, this.imgFinish.visible = !0) : (this.btnGo.visible = "0" != t.cfg.oper, this.imgFinish.visible = !1)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onBtnT = function (t) {
        if (this._data.isFinish);
        else {
            var e = Util.parseIntStr(this._data.cfg.oper);
            1 == e[0] && CFG_COMMOND.isOpenByCFG(e[1], !0) && (e[2] < 1e3 || CFG_COMMOND.isOpenByCFG(e[2], !0)) && GameGlobal.layerMgr.open(e[1], e[2])
        }
    }, e
}(eui.Component);
__reflect(VTDailyItem.prototype, "VTDailyItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VCommonAttrTerm = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/target/TCommonAttrTerm.exml", e
    }
    return __extends(e, t), e.create = function () {
        var t = this;
        return t.P || (t.P = []), t.P.length ? t.P.pop() : new e
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.setData(t[0], t[1])
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setData = function (t, e) {
        var i = CFG_ATTR.LIB[t];
        this.lbName.text = i ? i.nn + ":" : "attr" + t, this.lbValue.text = "" + e
    }, e.prototype.dispose = function () {
        e.P.push(this)
    }, e
}(eui.Component);
__reflect(VCommonAttrTerm.prototype, "VCommonAttrTerm", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VTXianJie = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.bar_wid = 420, e.showingImglv = -1, e.skinName = "resource/eui_skins/game/target/TXianJieSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        GameGlobal.layerMgr.reg(UIConst.FEISHENGTIP, VXianJieUpTip, GameGlobal.layerMgr.UI_Message), this.lbStc1.text = "仙阶提升的属性对所有角色加成", this.btnGot.label = "领取", this.lbDAwdprev.touchEnabled = !0, DisplayUtil.popBtnStyle(this.lbDAwdprev), this.lbDAwdprev.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPreT, this), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnT, this), this.btnGot.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGotAd, this), this.lbDAwdprev.textFlow = HtmlUtil.underLine(this.lbDAwdprev.text), DisplayUtil.popBtnStyle(this.imgNxt), DisplayUtil.popBtnStyle(this.imgPre), this.imgPre.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLvBtnT, this), this.imgNxt.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onLvBtnT, this), this.imgEff = Part.create(), this.imgEff.setAct(1), this.effGrp.addChild(this.imgEff)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.updateCur(), GameGlobal.modelTarget.on(ModelTarget.MSG_FEISHENG, this.onFeiSheng, this), GameGlobal.modelTarget.on(ModelTarget.MSG_XIANJIEAWD, this.updateCur, this), this.checkNotic(), GameGlobal.modelTarget.on(ModelTarget.MSG_NOTIC, this.checkNotic, this)
    }, e.prototype.onClose = function () {
        this.showingImglv = -1, GameGlobal.modelTarget.off(ModelTarget.MSG_FEISHENG, this.onFeiSheng), GameGlobal.modelTarget.off(ModelTarget.MSG_XIANJIEAWD, this.updateCur), GameGlobal.modelTarget.off(ModelTarget.MSG_NOTIC, this.checkNotic), this.imgEff.setVal(null)
    }, e.prototype.updateCur = function () {
        var t = GameGlobal.modelTarget;
        this.showingImglv >= 1 ? (this.imgCur.source = "xiuXian_json.l" + this.showingImglv, this.imgEff.setVal("uieff/xianjie0")) : (this.imgCur.source = "xiuXian_json.l" + t.xj_lv, this.imgEff.setVal("uieff/xianjie0")), -1 == this.showingImglv && (this.showingImglv = t.xj_lv), 1 == t.xj_awdSt ? this.lbAwardSt.textFlow = HtmlUtil.underLine("(可领取)") : this.lbAwardSt.textFlow = HtmlUtil.underLine("(已领取)");
        var e = CFG_Target.LIBXIANJIE[t.xj_lv],
            i = CFG_Target.LIBXIANJIE[t.xj_lv + 1];
        if (e) {
            var o = ConfigHelp.getAttrText(Util.strToIntArr(e.sx));
            this.lbCurAttr.text = o;
            var n = Util.strToIntArr(e.jl);
            n[0] && (this.lbAward0.text = ConfigHelp.getNumText(n[0][2])), n[1] && (this.lbAward1.text = ConfigHelp.getNumText(n[1][2]))
        }
        if (i) {
            var a = ConfigHelp.getAttrText(Util.strToIntArr(i.sx));
            this.lbNxtAttr.text = a, this.lbRequireLv.text = i.cj + "", this.btn.label = "提升仙阶";
            var s = Math.min(1, t.xj_value / i.xj);
            if (this.proBar.width = this.bar_wid * s, this.lbBar.text = t.xj_value + "/" + i.xj, t.achieveLv >= i.cj)
                if (t.xj_value >= i.xj) this.lbNextCond.textFlow = HtmlUtil.parse(Lang.reTxt("当前可激活下一仙阶", r));
                else {
                    var r = Math.max(1, Math.ceil((t.xj_value - i.cj) / i.dt));
                    this.lbNextCond.textFlow = HtmlUtil.parse(Lang.reTxt("约<font color='#10A244'>{0}</font>天可激活下一阶仙阶", r))
                }
            else if (t.xj_value >= i.xj) this.lbNextCond.textFlow = HtmlUtil.parse(Lang.reTxt("成就达到<font color='#10A244'>{0}</font>级后可直接晋升至下一阶", i.cj));
            else {
                var r = Math.ceil((t.xj_value - i.cj) / i.dt);
                this.lbNextCond.textFlow = HtmlUtil.parse(Lang.reTxt("成就达到<font color='#10A244'>{0}</font>级后，约<font color='#10A244'>{1}</font>天可激活下一阶仙阶", i.cj, r))
            }
        } else this.lbNxtAttr.text = "仙阶已满", this.lbRequireLv.text = "--", this.btn.label = "仙阶已满", this.lbCost.text = "--", this.lbNextCond.text = "仙阶已满", this.proBar.width = this.bar_wid, this.lbBar.text = "已满";
        1 == t.xj_awdSt ? (this.btnGot.enabled = !0, this.btnGot.label = "领取", this.btnGot.setNoticeVis(!0)) : (this.btnGot.enabled = !1, this.btnGot.label = "(已领取)", this.btnGot.setNoticeVis(!1));
        var r = (t.achieveLv, t.xj_remainDay)
    }, e.prototype.onPreT = function (t) {
        switch (t.target) {
            case this.lbDAwdprev:
                GameGlobal.layerMgr.open(UIConst.TXIANJIEAPRE)
        }
    }, e.prototype.onGotAd = function () {
        var t = GameGlobal.modelTarget;
        return 1 == t.xj_awdSt ? void GameGlobal.modelTarget.CG_DAILYFLY_AWD() : void 0
    }, e.prototype.btnT = function (t) {
        var e = GameGlobal.modelTarget,
            i = CFG_Target.LIBXIANJIE[e.xj_lv + 1];
        if (i) {
            if (e.achieveLv < i.cj) return void ViewText.text(Lang.reTxt("成就等级未达{0}级", i.cj));
            if (e.xj_value < i.xj) {
                ViewText.text("仙阶点不足");
                var o = VoCurrency.create();
                return o.init(42), void GameGlobal.layerMgr.open(UIConst.CAILIAOGET, o)
            }
            GameGlobal.modelTarget.CG_FLY()
        } else ViewText.text("等阶已满")
    }, e.prototype.onLvBtnT = function (t) {
        switch (t.currentTarget) {
            case this.imgPre:
                if (this.imgPre.filters) return;
                this.showLVEff(this.showingImglv - 1);
                break;
            case this.imgNxt:
                if (this.imgNxt.filters) return;
                this.showLVEff(this.showingImglv + 1)
        }
    }, e.prototype.showLVEff = function (t) {
        var e = CFG_Target.LIBXIANJIE[t],
            i = GameGlobal.modelTarget;
        e && (this.imgEff.alpha = .3, this.imgCur.source = "xiuXian_json.l" + t, egret.Tween.get(this.imgEff).to({
            alpha: 1
        }, 400), this.showingImglv = t, t > 1 ? this.imgPre.filters = null : this.imgPre.filters = Color.getDisabled(), t > 0 && (e.id < i.xj_lv + 1 ? this.imgNxt.filters = null : this.imgNxt.filters = Color.getDisabled()))
    }, e.prototype.onFeiSheng = function () {
        this.updateCur()
    }, e.prototype.checkNotic = function () {
        var t = GameGlobal.modelTarget;
        this.btn.setNoticeVis(t.isXianJieCanUp())
    }, e
}(BaseEUIView);
__reflect(VTXianJie.prototype, "VTXianJie");
var VTXianJieAttrAdd = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/target/TXianJieAttrAdd.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function () {
        var t = CFG_Target.LIBXIANJIE[GameGlobal.modelTarget.xj_lv];
        if (t) {
            for (var e = Util.strToArr(t.sx), i = 0; i < e.length; i++) {
                var o = this.termGroup.getChildAt[i];
                o || (o = VCommonAttrTerm.create(), this.termGroup.addChild(o)), o.setData(e[i][0], e[i][1])
            }
            for (; this.termGroup.numChildren > e.length;) o = this.termGroup.removeChildAt(this.termGroup.numChildren - 1), o.dispose()
        }
    }, e
}(BaseEUIView);
__reflect(VTXianJieAttrAdd.prototype, "VTXianJieAttrAdd");
var VTXianJieAwadPreItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "resource/eui_skins/game/target/TXianJieAwadPreItem.exml", e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            var e = GameGlobal.modelTarget;
            t && ConfigHelp.makeStrGrids(t.jl, this.gridArr, 150, 24, this, !0, 10, .9), e.xj_lv > t.id ? (this.lbSt.text = "成功飞升", this.lbSt.textColor = 4473924) : e.xj_lv == t.id ? (this.lbSt.text = "当前仙阶", this.lbSt.textColor = 1090116) : (this.lbSt.text = "未飞升", this.lbSt.textColor = 15610675), this.imgLV.source = "xiuXian_json.l" + t.id
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.bg.source = "CM2_json.bg1" : this.bg.source = "CM2_json.bg2"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VTXianJieAwadPreItem.prototype, "VTXianJieAwadPreItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VTXianJieAwdPreview = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/target/TXianJieAwdPreview.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.itemList.itemRenderer = VTXianJieAwadPreItem, this.dataAC = new eui.ArrayCollection, this.itemList.dataProvider = this.dataAC
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function () {
        var t = CFG_Target.LIBXIANJIE,
            e = [],
            i = 0;
        for (var o in t) e[i] = t[o], i++;
        this.dataAC.source = e
    }, e
}(BaseEUIView);
__reflect(VTXianJieAwdPreview.prototype, "VTXianJieAwdPreview");
var VXianJieUpTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/target/TXianJieUpTip.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.sure), this.role = UIRole.create(), this.role.scaleX = this.role.scaleY = 1.2, this.contaienr.addChild(this.role)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(e), this.resetTime(), this.role.play(), GameGlobal.tick.addInterv(this.frame, 1, this), GameGlobal.tick.addInterv(this.tick, 1e3, this)
    }, e.prototype.onClose = function () {
        this.role.stopAndClear(), GameGlobal.tick.removeInterv(this.frame), GameGlobal.tick.removeInterv(this.tick)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function (t) {
        var e = GameGlobal.modelTarget,
            i = GameGlobal.modelRole.voMine.sceneChars[0],
            o = i._body,
            n = i._weapon,
            a = i._horse,
            s = i._way;
        this.imgLv.source = "xiuXian_json.l" + e.xj_lv, this.role.setBody(o), this.role.setWeapon(n), this.role.setHorse(a), this.role.setWing(s), this.role.setWay(3), this.role.validParts()
    }, e.prototype.resetTime = function () {
        this.closeSec = 8, this.updateTime()
    }, e.prototype.frame = function (t) {
        t.imgHightLine.rotation += 2
    }, e.prototype.tick = function (t) {
        t.closeSec -= 1, t.updateTime(), t.closeSec <= 0 && t.closeHandler()
    }, e.prototype.updateTime = function () {
        this.sure.label = this.closeSec + "秒后关闭"
    }, e
}(BaseEUIView);
__reflect(VXianJieUpTip.prototype, "VXianJieUpTip");
var VoAchieveQuest = function () {
    function t() {
        this.index = 0, this.curFinish = !1, this.allFinish = !1
    }
    return t.prototype.initLIB = function () {
        var t = this,
            e = t.cfg = CFG_Target.LIBACHIEQ[t.id];
        if (!e) return void console.error("error targetQuestID" + t.id);
        if (t.index >= e.par.length) {
            var i = e.par.length - 1;
            t._allFinish = !0
        } else i = t.index, t._allFinish = !1;
        if (t.par = e.par[i], t.cjjl = e.cjjl, 46 == e.type) {
            var o = e.par[i].concat(),
                n = CFG_Target.LIBXIANJIE[o[0]];
            o[0] = o[0] + "阶" + n.n, t.name = Lang.reTxt(e.rw, o)
        } else o = e.par[i], t.name = Lang.reTxt2(e.rw, o)
    }, t.create = function () {
        var e = new t;
        return e
    }, t.prototype.checkFinish = function () {
        var t = this.cfg = CFG_Target.LIBACHIEQ[this.id];
        1 == t.pa ? this.curFinish = this.progress >= this.par[0] : this.progress ? this.curFinish = this.progress <= this.par[0] : this.curFinish = !1, this.allFinish = this.index >= t.par.length
    }, t
}();
__reflect(VoAchieveQuest.prototype, "VoAchieveQuest");
var VTargetAward = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridVec = [], e.skinName = "resource/eui_skins/game/target/TDailyAwardSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.lbTitle.text = "修仙奖励", this.addCloseListen(this.btnClose), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), GameGlobal.modelTarget.on(ModelTarget.MSG_TAWARDSUC, this.onGetAwd, this), GameGlobal.modelTarget.on(ModelTarget.MSG_ALLCHANGE, this.update, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelTarget.off(ModelTarget.MSG_TAWARDSUC, this.onGetAwd), GameGlobal.modelTarget.off(ModelTarget.MSG_ALLCHANGE, this.update)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.getCurShowID = function () {
        for (var t = GameGlobal.modelTarget, e = t.achieveAwdID + 1, i = CFG_Target.LIBACHIEVE[e]; !i;) e--, i = CFG_Target.LIBACHIEVE[e];
        return e
    }, e.prototype.onGetAwd = function () {
        DisplayUtil.toBag(this.gridVec), this.update()
    }, e.prototype.update = function () {
        var t = GameGlobal.modelTarget,
            e = CFG_Target.LIBACHIEVE[t.achieveAwdID + 1],
            i = this.getCurShowID(),
            t = GameGlobal.modelTarget,
            o = CFG_Target.LIBACHIEVE[i];
        t.curAchieve;
        if (e ? this.lb.textFlow = HtmlUtil.parse(Lang.reTxt("修仙等级达到<font color='#ddaa33'>{0}</font>,可以获得如下奖励:", i)) : this.lb.textFlow = HtmlUtil.parse(Lang.reTxt("修仙已满级", o.cj)), !o) return void this.closeHandler();
        var n = o.jl,
            a = Util.strToIntArr(n),
            s = 1 == GameGlobal.modelRole.voMine.job ? o.ico1 : o.ico2;
        s && a.unshift([4, s, 1]);
        var r = ConfigHelp.makeVoListByArr(a),
            l = 20,
            h = this.cont.width - (90 * r.length + (r.length - 1) * l) >> 1,
            c = 180;
        ConfigHelp.makeVoGrids(r, this.gridVec, h, c, this.cont, !0, l);
        var p = t.achieveLv > t.achieveAwdID;
        p && e ? (this.btn.visible = !0, this.btn.label = "领取") : this.btn.label = "确定"
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelTarget,
            e = CFG_Target.LIBACHIEVE[t.achieveAwdID + 1],
            i = t.achieveLv > t.achieveAwdID;
        i && e ? t.CG_ACH_LVAWD(t.achieveAwdID + 1) : this.closeHandler()
    }, e
}(BaseEUIView);
__reflect(VTargetAward.prototype, "VTargetAward");
var VTargetXiuXian = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/target/TargetXiuXianSkin.exml", e
    }
    return __extends(e, t), e.prototype.guideClickItem = function (t) {
        for (var e = 0, i = this.itemList.$children.length; i > e; e++) {
            var o = this.itemList.$children[e];
            o && o.data.id == t && QuestGuideArrow.getIns().guideViewCenter(o.btnGo)
        }
    }, e.prototype.initView = function () {
        this.itemList.itemRenderer = VTXiuXianItem, this.itemListAC = new eui.ArrayCollection, this.itemList.dataProvider = this.itemListAC, this.imgAward.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAwdT, this), this.txtLv = new ImageText, this.txtLv.container = this, this.txtLv.fx = 395, this.txtLv.fy = 152, this.txtLv.setCharFunc(ImageText.STRFUNC)
    }, e.prototype.IMGTEXTFUNC = function (t, e) {
        t.bw = 18, t.by = 0, t.bs = "target_json.f" + e
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), GameGlobal.modelTarget.on(ModelTarget.MSG_ALLCHANGE, this.onAllChange, this), GameGlobal.modelTarget.on(ModelTarget.MSG_TACHSCHANGE, this.onAchChange, this), GameGlobal.modelTarget.on(ModelTarget.MSG_ACHVALUPDATE, this.onAchValueC, this), GameGlobal.modelTarget.on(ModelTarget.MSG_LISTSORT, this.updateList, this), GameGlobal.modelTarget.on(ModelTarget.MSG_TAWARDSUC, this.updatelv, this), GameGlobal.modelTarget.on(ModelTarget.MSG_NOTIC, this.checkNotic, this), GameGlobal.modelTarget.on(ModelTarget.MSG_ACHLVUP, this.onAchLvUp, this), this.checkNotic()
    }, e.prototype.onClose = function () {
        GameGlobal.modelTarget.off(ModelTarget.MSG_ALLCHANGE, this.onAllChange, this), GameGlobal.modelTarget.off(ModelTarget.MSG_TACHSCHANGE, this.onAchChange), GameGlobal.modelTarget.off(ModelTarget.MSG_ACHVALUPDATE, this.onAchValueC), GameGlobal.modelTarget.off(ModelTarget.MSG_LISTSORT, this.updateList), GameGlobal.modelTarget.off(ModelTarget.MSG_TAWARDSUC, this.updatelv), GameGlobal.modelTarget.off(ModelTarget.MSG_NOTIC, this.checkNotic), GameGlobal.modelTarget.off(ModelTarget.MSG_ACHLVUP, this.onAchLvUp)
    }, e.prototype.onAchLvUp = function () {
        GameGlobal.modelTarget;
        this.updateList(), this.updatelv()
    }, e.prototype.onAchChange = function (t) {
        var e = this.itemListAC.getItemIndex(t);
        if (e >= 0) {
            this.itemListAC.replaceItemAt(t, e);
            var i = GameGlobal.stage,
                o = EffectMgr.addEff("uieff/dzsuccess", GameGlobal.layerMgr.UI_Tips, i.stageWidth >> 1, i.stageHeight >> 1, 1e3, -1, !0);
            egret.Tween.get(o).wait(200).to({
                x: 450,
                y: 230
            }, 200, egret.Ease.sineIn).wait(600).call(this.onEffend, this, [o])
        }
    }, e.prototype.onEffend = function (t) {
        EffectMgr.getIns().removeEff(t)
    }, e.prototype.onAchValueC = function () {
        this.updatelv()
    }, e.prototype.update = function () {
        this.updateList(), this.updatelv()
    }, e.prototype.updatelv = function () {
        var t = GameGlobal.modelTarget;
        this.txtLv.setText("" + t.achieveLv);
        var e = CFG_Target.LIBACHIEVE[t.achieveLv],
            i = CFG_Target.LIBACHIEVE[t.achieveLv + 1];
        if (i) {
            var o = i.cj,
                n = Math.min(1, t.getCurAchieve() / o);
            this.pb.scaleX = n, this.lbAwdName.text = i.wb;
            var a = 1 == GameGlobal.modelRole.voMine.job ? i.ico1 : i.ico2;
            a ? this.imgAward.source = IconUtil.getIconUrl(CFG_Skill.LIB[a].ico) : this.imgAward.source = "target_json.bm_boxx", this.lbCur.text = t.curAchieve + "/" + o
        } else this.pb.scaleX = 1, this.lbAwdName.text = "", this.imgAward.source = "target_json.bm_boxx", this.lbCur.text = "" + t.curAchieve;
        this.lbPre.text = "" + (e ? e.cj : 0), this.lbNxt.text = "" + (i ? i.cj : "已满级")
    }, e.prototype.checkNotic = function () {
        var t = GameGlobal.modelTarget;
        this.imgBoxRed.visible = t.achieveLv > t.achieveAwdID
    }, e.prototype.updateList = function () {
        var t = GameGlobal.modelTarget;
        t.clearChangeAchItem();
        var e = t.achieveQuests;
        e.sort(this.itemSort), this.itemListAC.source = e
    }, e.prototype.onAllChange = function () {
        this.itemListAC.refresh()
    }, e.prototype.itemSort = function (t, e) {
        var i = t.cfg.px + (t.curFinish ? -1e4 : 0) + (t.allFinish ? 1e5 : 0),
            o = e.cfg.px + (e.curFinish ? -1e4 : 0) + (e.allFinish ? 1e5 : 0);
        return i - o
    }, e.prototype.onAwdT = function () {
        GameGlobal.layerMgr.open(UIConst.TAWARD)
    }, e
}(BaseEUIView);
__reflect(VTargetXiuXian.prototype, "VTargetXiuXian");
var VTXiuXianItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "resource/eui_skins/game/target/TXiuXianItemSkin.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btnGo.label = "前往"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.progress / t.par[0];
            e = Math.min(1, e), this.pb.scaleX = e, this.lbPerc.text = t.progress + "/" + t.par[0], this.bmQI.source = "target_json." + t.cfg.t, t.curFinish, 1 == t.cfg.pa ? this.pgbg.visible = this.pb.visible = !0 : this.pgbg.visible = this.pb.visible = !1, this.lb.text = t.name, t.curFinish ? (this.btnGet.visible = !0, this.btnGo.visible = !1) : (this.btnGet.visible = !1, this.btnGo.visible = "0" != t.cfg.oper), t.allFinish ? (this.btnGet.label = "已全部领取", this.btnGet.setNoticeVis(!1)) : (this.btnGet.label = "领取奖励", this.btnGet.setNoticeVis(!0)), t.change && (egret.Tween.removeTweens(this.cont), egret.Tween.get(this.cont).to({
                x: 500,
                alpha: 0
            }, 300).set({
                x: -500
            }, this.cont).to({
                x: 0,
                alpha: 1
            }, 300).call(this.onTweened)), ConfigHelp.makeStrGrids(t.cjjl, this.gridArr, 310, 24, this.cont, !0, 8, .8)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onTweened = function () {
        GameGlobal.modelTarget.notify(ModelTarget.MSG_LISTSORT)
    }, e.prototype.onBtnT = function () {
        var t = this._data;
        t.allFinish ? ViewText.text("任务已全部达成") : t.curFinish ? GameGlobal.modelTarget.CG_ACHIEVE_AWD(t.id) : "0" != t.cfg.oper && ModelTarget.defUserOp(t.cfg.oper)
    }, e
}(eui.Component);
__reflect(VTXiuXianItem.prototype, "VTXiuXianItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var ModelTeachersDay = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(3912, i.GC3912, i), e.regHand(3914, i.GC3914, i), e.regHand(3916, i.GC3916, i), e.regHand(3918, i.GC3918, i), e.regHand(3920, i.GC3920, i), e.regHand(3922, i.GC3922, i), e.regHand(3924, i.GC3924, i), e.regHand(3926, i.GC3926, i), e.regHand(3928, i.GC3928, i), e.regHand(3930, i.GC3930, i), e.regHand(3932, i.GC3932, i), e.regHand(3934, i.GC3934, i), e.regHand(3936, i.GC3936, i), e.regHand(3938, i.GC3938, i), e.regHand(3940, i.GC3940, i), e.regHand(3942, i.GC3942, i), e.regHand(3944, i.GC3944, i)
    }, e.prototype.CG3911 = function () {
        var t = this.getBytes();
        this.sendSocket(3911, t)
    }, e.prototype.GC3912 = function (t, e) {
        var i = e.readByte();
        Vo_TeachersDay.isOpensmx = 1 == i
    }, e.prototype.CG3913 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3913, e)
    }, e.prototype.GC3914 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte(),
                a = Vo_TeachersDay.Map[n];
            a && (a.issign = !0), t.notify(e.MSG_UPDATE)
        } else {
            var s = ["", "", "签到失败！", "需完成前几天签到", "背包已满", "已签到"];
            ViewText.text(s[o])
        }
    }, e.prototype.CG3915 = function () {
        var t = this.getBytes();
        this.sendSocket(3915, t)
    }, e.prototype.GC3916 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte(),
                s = Vo_TeachersDay.Map[a];
            s && (s.issign = !0)
        }
        Vo_TeachersDay.nowDay = i.readByte(), Vo_TeachersDay.xlnum = i.readShort(), t.notify(e.MSG_UPDATE)
    }, e.prototype.CG3917 = function () {
        var t = this.getBytes();
        this.sendSocket(3917, t)
    }, e.prototype.GC3918 = function (t, e) {
        var i = e.readByte();
        if (1 == i) Vo_TeachersDay.xlnum++, GameGlobal.layerMgr.open(UIConst.TEASIGNZLTIP);
        else {
            var o = Config.getConfig(commonactivities_150).get(5).describe,
                n = Config.getConfig(commonactivities_150).get(6).describe,
                a = ["", "", o, n, "背包已满"];
            ViewText.text(a[i])
        }
    }, e.prototype.CG3919 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3919, e)
    }, e.prototype.GC3920 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte(),
                a = Vo_TeachersDay.Map[n];
            a && (a.issign = !0), t.notify(e.MSG_UPDATE)
        } else ViewText.text("元宝不足!"), GameGlobal.layerMgr.open(UIConst.RECHARGE)
    }, e.prototype.CG3921 = function () {
        var t = this.getBytes();
        this.sendSocket(3921, t)
    }, e.prototype.GC3922 = function (t, i) {
        Vo_TeachersDay.qdnum = i.readByte(), Vo_TeachersDay.buynum = i.readByte(), Vo_TeachersDay.timel || (Vo_TeachersDay.timel = []);
        var o = i.readShort();
        Vo_TeachersDay.retime = egret.getTimer();
        for (var n = 0; o > n; n++) {
            var a = i.readInt();
            Vo_TeachersDay.timel[n] = a
        }
        t.notify(e.MSG_UPDATE)
    }, e.prototype.CG3923 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3923, e)
    }, e.prototype.GC3924 = function (t, e) {
        var i = e.readByte();
        if (1 == i);
        else if (4 == i) {
            if (VTea_jykx.clickItem) {
                var o = Config.getConfig(canshu_143).get(62).key,
                    n = o.split(",");
                ViewAlert.show("是否花费" + HtmlUtil.color(n[VTea_jykx.clickItem - 1] + "元宝", "#a83503") + "刷新副本", function () {
                    t.CG3927(VTea_jykx.clickItem)
                })
            }
        } else {
            var n = ["", "", "", "挑战次数不足", "副本正在刷新", "背包已满"];
            ViewText.text(n[i])
        }
    }, e.prototype.CG3925 = function () {
        var t = this.getBytes();
        this.sendSocket(3925, t)
    }, e.prototype.GC3926 = function (t, i) {
        var o = i.readByte();
        1 == o ? (Vo_TeachersDay.qdnum++, Vo_TeachersDay.buynum--, t.notify(e.MSG_UPDATE)) : 2 == o ? (ViewText.text("元宝不足!"), GameGlobal.layerMgr.open(UIConst.RECHARGE)) : ViewText.text("没有购买次数")
    }, e.prototype.CG3927 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3927, e)
    }, e.prototype.GC3928 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte();
            Vo_TeachersDay.timel[n - 1] = 0, t.notify(e.MSG_UPDATE)
        } else setTimeout(function () {
            ViewAlert.show("元宝不足，是否前往充值？", function () {
                GameGlobal.layerMgr.open(UIConst.RECHARGE)
            })
        }, 500)
    }, e.prototype.CG3929 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(3929, e)
    }, e.prototype.GC3930 = function (t, e) {
        var i = e.readByte();
        1 == i || ViewText.text("材料不足")
    }, e.prototype.CG3931 = function () {
        var t = this.getBytes();
        this.sendSocket(3931, t)
    }, e.prototype.GC3932 = function (t, i) {
        Vo_TeachersDay.pro = i.readInt(), Vo_TeachersDay.qfnum = 10 - i.readByte(), Vo_TeachersDay.jlstate || (Vo_TeachersDay.jlstate = []);
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte();
            Vo_TeachersDay.jlstate[n] = a
        }
        t.notify(e.MSG_UPDATE)
    }, e.prototype.CG3933 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3933, e)
    }, e.prototype.GC3934 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte();
            t.notify(e.MSG_QFSUCCESS, n);
            var a = (i.readInt(), i.readByte());
            1 == a && GameGlobal.layerMgr.open(UIConst.TEAGSQFTIP), GameGlobal.modelTeachersDay.CG3931()
        } else if (2 == o) ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        });
        else {
            var s = ["", "", "材料不足", "没有祈愿次数", "背包已满"];
            ViewText.text(s[o])
        }
    }, e.prototype.CG3935 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3935, e)
    }, e.prototype.GC3936 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte();
            Vo_TeachersDay.jlstate[n - 1] = 2, t.notify(e.MSG_UPDATE)
        } else {
            var a = ["", "", "祈愿值未达到", "背包已满", "已领取"];
            ViewText.text(a[o])
        }
    }, e.prototype.CG3937 = function () {
        var t = this.getBytes();
        this.sendSocket(3937, t)
    }, e.prototype.GC3938 = function (t, i) {
        Vo_TeachersRecord.List || (Vo_TeachersRecord.List = []);
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = Vo_TeachersRecord.List[n];
            a || (a = new Vo_TeachersRecord, Vo_TeachersRecord.List.push(a)), a.time = i.readInt(), a.name = i.readUTF(), a.type = i.readByte(), a.trigger = i.readByte(), a.index = n
        }
        t.notify(e.MSG_RECORD)
    }, e.prototype.CG3939 = function () {
        var t = this.getBytes();
        this.sendSocket(3939, t)
    }, e.prototype.GC3940 = function (t, e) {
        var i = e.readByte();
        3 == i && ViewAlert.show("背包已满，是否前往熔炼?", function () {
            GameGlobal.layerMgr.open(UIConst.EQUIPRL)
        })
    }, e.prototype.CG3941 = function () {
        var t = this.getBytes();
        this.sendSocket(3941, t)
    }, e.prototype.GC3942 = function (t, i) {
        var o = i.readShort();
        if (Vo_TeachersShop.create(), t.smzlNotice = !0, 0 == o)
            for (var n = 0; n < Vo_TeachersShop.List.length; n++) {
                var a = Vo_TeachersShop.List[n];
                a.cs = 0
            }
        for (var s = 0; o > s; s++) {
            var r = i.readInt(),
                l = i.readShort(),
                h = Vo_TeachersShop.Map[r];
            if (h) {
                h.cs = l;
                var c = Util.parseIntStr(h.cfg.xj);
                0 == c[2] && h.cs >= h.cfg.cs && (t.smzlNotice = !1)
            }
        }
        t.notify(e.MSG_UPDATE)
    }, e.prototype.CG3943 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(3943, e)
    }, e.prototype.GC3944 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = Vo_TeachersShop.Map[n];
            a && a.cs++, t.CG3941(), t.notify(e.MSG_UPDATE)
        } else if (5 == o) ViewAlert.show("元宝不足，是否前往充值？", function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE)
        });
        else {
            var s = ["", "", "活动未开启", "物品不存在", "已达购买上限", "货币不足", "背包已满"];
            ViewText.text(s[o])
        }
    }, e.MSG_UPDATE = "MSG_UPDATE", e.MSG_RECORD = "MSG_RECORD", e.MSG_QFSUCCESS = "MSG_QFSUCCESS", e
}(BaseModel);
__reflect(ModelTeachersDay.prototype, "ModelTeachersDay");
var Vo_TeachersDay = function () {
    function t() {
        this.issign = !1
    }
    return t.create = function () {
        if (!this.List) {
            this.List = [], this.Map = {};
            var e = CFG_TeachersDay.LIB1;
            for (var i in e) {
                var o = e[i],
                    n = new t;
                n.id = o.id, n.cfg = o, this.List.push(n), this.Map[n.id] = n
            }
        }
    }, t.jlstate = [], t.isOpensmx = !0, t
}();
__reflect(Vo_TeachersDay.prototype, "Vo_TeachersDay");
var Vo_TeachersRecord = function () {
    function t() {}
    return t
}();
__reflect(Vo_TeachersRecord.prototype, "Vo_TeachersRecord");
var Vo_TeachersShop = function () {
    function t() {
        this.cs = 0
    }
    return t.create = function () {
        if (!this.List) {
            this.List = [], this.Map = {};
            var e = CFG_TeachersDay.LIB4,
                i = 0;
            for (var o in e) {
                var n = e[o],
                    a = new t;
                a.id = n.id, a.cfg = n, a.index = i, this.List.push(a), this.Map[a.id] = a, i++
            }
        }
    }, t
}();
__reflect(Vo_TeachersShop.prototype, "Vo_TeachersShop");
var VTea_Letter = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Tea_LetterSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this)
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), this.lbname.text = GameGlobal.modelRole.voMine.name, !Vo_TeachersDay.isOpensmx) {
            Vo_TeachersDay.isOpensmx = !0, GameGlobal.modelTeachersDay.CG3911();
            GameGlobal.layerMgr.getView(UIConst.TEACHERSDAY)
        }
        IconUtil.setIconSrc(this.bgg, "teachMainBG1_png")
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.bgg)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VTea_Letter.prototype, "VTea_Letter");
var VTeachersDay = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "TeachersDaySkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = GameGlobal.layerMgr;
        t.reg(UIConst.TEASIGN, VTea_Sign, t.UI_MainMiddle, 1), t.reg(UIConst.TEAJYKX, VTea_jykx, t.UI_MainMiddle, 1), t.reg(UIConst.TEAGSQF, VTea_gsqf, t.UI_MainMiddle, 1), t.reg(UIConst.TEASMZL, VTea_smzl, t.UI_MainMiddle, 1), t.reg(UIConst.TEALETTER, VTea_Letter, t.UI_MainMiddle, 1), t.reg(UIConst.TEAGSQFRECORD, VTea_gsqfRecord, t.UI_Message), t.reg(UIConst.TEASIGNXLTIP, VTea_SignxlTip, t.UI_Message), t.reg(UIConst.TEASIGNZLTIP, VTea_SignzlTip, t.UI_Message), t.reg(UIConst.TEAGSQFTIP, VTea_gsqfTip, t.UI_Message), t.reg(UIConst.TEASSCFTIP, VTea_sscfTip, t.UI_Message), t.reg(UIConst.TEAGSQFBOXTIP, VTea_gsqfBoxTip, t.UI_Message), this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnSign), DisplayUtil.popBtnStyle(this.btnjykx), DisplayUtil.popBtnStyle(this.btngsqf), DisplayUtil.popBtnStyle(this.btnsmzl), this.btnSign.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnjykx.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btngsqf.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnsmzl.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this);
        var e = Config.getConfig(commonactivities_150).get(1).describe;
        this.lbActivityTime.text = "活动时间：" + e
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnSign:
                GameGlobal.layerMgr.open(UIConst.TEASIGN);
                break;
            case this.btnjykx:
                GameGlobal.layerMgr.open(UIConst.TEAJYKX);
                break;
            case this.btngsqf:
                GameGlobal.layerMgr.open(UIConst.TEAGSQF);
                break;
            case this.btnsmzl:
                GameGlobal.layerMgr.open(UIConst.TEASMZL)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setjyRed(), GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.modelTeachersDay.CG3941(), GameGlobal.modelTeachersDay.CG3931(), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.setjyRed, this), GameGlobal.modelTeachersDay.on(ModelTeachersDay.MSG_UPDATE, this.checkeSmzlRed, this), GameGlobal.modelTeachersDay.on(ModelTeachersDay.MSG_UPDATE, this.checkgsRed, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.tick, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.setjyRed, this), GameGlobal.modelTeachersDay.off(ModelTeachersDay.MSG_UPDATE, this.checkeSmzlRed, this), GameGlobal.modelTeachersDay.off(ModelTeachersDay.MSG_UPDATE, this.checkgsRed, this)
    }, e.prototype.setjyRed = function () {
        this.red1.visible = VTea_jykx.fristRed || this.checkjyRed()
    }, e.prototype.checkgsRed = function () {
        for (var t = this.red2, e = Vo_TeachersDay.jlstate, i = 0; i < e.length; i++) {
            var o = e[i];
            if (1 == o) return void(t.visible = !0)
        }
        t.visible = !1
    }, e.prototype.checkeSmzlRed = function () {
        this.red3.visible = GameGlobal.modelTeachersDay.smzlNotice
    }, e.prototype.checkjyRed = function () {
        var t = CFG_TeachersDay.LIB2;
        for (var e in t) {
            for (var i = t[e], o = ConfigHelp.makeVoList(i.xh), n = 0, a = 0; a < o.length; a++) {
                var s = o[a],
                    r = GameGlobal.modelBag.getItemCount(s.id);
                r >= s.count && n++
            }
            if (n == o.length) return !0
        }
        return !1
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(23);
        if (e) {
            var i = e.getRemainSec();
            if (i >= 0) return
        }
        ViewText.text("活动已结束"), t.closeHandler()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VTeachersDay.prototype, "VTeachersDay");
var VTea_gsqf = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.Maxqf = 0, e.skinName = "Tea_gsqfSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        for (var t = 0; 3 > t; t++) {
            var e = this["btn" + t];
            e.setTextVis(!1), e.setType(t + 1), e.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this);
            var i = this["btnqf" + t];
            i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onqfT, this)
        }
        DisplayUtil.popBtnStyle(this.btnClose), this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnRecord), this.btnRecord.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIConst.TEAGSQFRECORD)
        }, this), DisplayUtil.popBtnStyle(this.btnRule), this.btnRule.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            ViewWenHao.show(CFG_COMMOND.LIBWFSM[110502].detail)
        }, this), this.btnsscf.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIConst.TEASSCFTIP)
        }, this), this.upbtnqf(), this.upjl(), this.upBtnqfPosX()
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btn0:
                var i = 1;
                break;
            case this.btn1:
                i = 2;
                break;
            case this.btn2:
                i = 3
        }
        GameGlobal.layerMgr.open(UIConst.TEAGSQFBOXTIP, i)
    }, e.prototype.onqfT = function (t) {
        if (ModelBattle.canEnterBtl()) {
            var e = t.currentTarget;
            switch (e) {
                case this.btnqf0:
                    var i = 1;
                    break;
                case this.btnqf1:
                    i = 2;
                    break;
                case this.btnqf2:
                    i = 3
            }
            GameGlobal.modelTeachersDay.CG3933(i)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.modelTeachersDay.on(ModelTeachersDay.MSG_QFSUCCESS, this.playAni, this), GameGlobal.modelTeachersDay.on(ModelTeachersDay.MSG_UPDATE, this.update, this), GameGlobal.modelTeachersDay.CG3931(), IconUtil.setIconSrc(this.bgg, "teachMainBG3_png")
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.tick, this), GameGlobal.modelTeachersDay.off(ModelTeachersDay.MSG_QFSUCCESS, this.playAni, this), GameGlobal.modelTeachersDay.off(ModelTeachersDay.MSG_UPDATE, this.update, this), IconUtil.setIconSrc(this.bgg)
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(23);
        if (e) {
            var i = e.getRemainSec();
            if (i >= 0) return
        }
        ViewText.text("活动已结束"), t.closeHandler()
    }, e.prototype.update = function () {
        this.lbnum.textFlow = HtmlUtil.parse("剩余祈愿次数:" + HtmlUtil.color(Vo_TeachersDay.qfnum, "#a83503")), this.lbpro.textFlow = HtmlUtil.parse("今日祈愿进度:" + HtmlUtil.color(Vo_TeachersDay.pro + "/" + this.Maxqf, "#a83503"));
        var t = Vo_TeachersDay.pro > this.Maxqf ? 1 : Vo_TeachersDay.pro / this.Maxqf;
        this.pro.width = this.proGrp.width * t;
        for (var e = Vo_TeachersDay.jlstate, i = 0; i < e.length; i++) {
            var o = e[i],
                n = this["btn" + i];
            n.setState(o)
        }
    }, e.prototype.upBtnqfPosX = function () {
        var t = this.proGrp,
            e = 0,
            i = this.Maxqf = CFG_TeachersDay.LIB3[3].qfz,
            o = CFG_TeachersDay.LIB3;
        for (var n in o) {
            var a = o[n].qfz,
                s = this["btn" + e];
            a != i ? s.x = t.x + t.width * (a / i) - s.width / 2 : s.x = t.x + t.width * (a / i) - 10, e++
        }
    }, e.prototype.upbtnqf = function () {
        for (var t = CFG_Param.LIB[11].key, e = t.split(","), i = 0; i < e.length; i++) {
            var o = e[i],
                n = this["btnqf" + i],
                a = this["lbqfxh" + i];
            if (0 == i) var s = "普通祈愿";
            else s = 1 == i ? "高级祈愿" : "至尊祈愿";
            n.label = s, a.text = o
        }
    }, e.prototype.upjl = function () {
        var t = CFG_Param.LIB[21].key;
        this.grids = [], ConfigHelp.makeStrGrids(t, this.grids, 0, 0, this.jlGrp, !0)
    }, e.prototype.playAni = function (t) {
        this.imgs || (this.imgs = []);
        var e = new eui.Image("teachersDay4_json.pic" + t);
        this.imgs.push(e);
        var i = 1;
        1 == t ? i = .6 : 2 == t && (i = .8), e.scaleX = e.scaleY = i, e.x = Math.random() * this.qfGrp.width, e.y = Math.random() * this.qfGrp.height, DisplayUtil.addBy(e, this.qfGrp), e.alpha = 0, e.height = 10, egret.Tween.get(e).to({
            alpha: 1
        }, 300).to({
            height: 250
        }, 400)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VTea_gsqf.prototype, "VTea_gsqf");
var VTea_gsqfBoxTip = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.grids = [], this.lb.text = "祈愿奖励", DisplayUtil.popBtnStyle(this.btn), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btn.visible = !0
    }, e.prototype.onT = function () {
        GameGlobal.modelTeachersDay.CG3935(this.bid)
    }, e.prototype.update = function () {
        this.lb2.text = "";
        var t = this.bid,
            e = CFG_TeachersDay.LIB3[t];
        e && (this.lb1.text = e.qfz + "祈愿值时可领取", ConfigHelp.makeStrGrids(e.jl, this.grids, 0, 0, this.Grp, !0)), this.btn.setNoticeVis(!1);
        var i = Vo_TeachersDay.jlstate[t - 1];
        switch (i) {
            case 0:
                this.btn.enabled = !1, this.btn.label = "不可领取";
                break;
            case 1:
                this.btn.enabled = !0, this.btn.label = "领取", this.btn.setNoticeVis(!0);
                break;
            case 2:
                this.btn.enabled = !1, this.btn.label = "已领取"
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.bid = e, this.update(), GameGlobal.modelTeachersDay.on(ModelTeachersDay.MSG_UPDATE, this.update, this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelTeachersDay.off(ModelTeachersDay.MSG_UPDATE, this.update, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(VTea_SignxlTip);
__reflect(VTea_gsqfBoxTip.prototype, "VTea_gsqfBoxTip");
var VTea_gsqfRecord = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Tea_gsqfRecordSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnClose), this.data = new eui.ArrayCollection, this.list.itemRenderer = VTea_gsqfRecordItem, this.list.dataProvider = this.data
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelTeachersDay.on(ModelTeachersDay.MSG_RECORD, this.update, this), GameGlobal.modelTeachersDay.CG3937(), IconUtil.setIconSrc(this.bgg, "teachMainBG3_png")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelTeachersDay.off(ModelTeachersDay.MSG_RECORD, this.update, this), IconUtil.setIconSrc(this.bgg)
    }, e.prototype.update = function () {
        Vo_TeachersRecord.List.sort(this.sortFun), DisplayUtil.fillDataAC(this.data, Vo_TeachersRecord.List)
    }, e.prototype.sortFun = function (t, e) {
        var i = t.time,
            o = e.time;
        return o - i
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VTea_gsqfRecord.prototype, "VTea_gsqfRecord");
var VTea_gsqfRecordItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Tea_gsqfRecordItemSkin", e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            switch (this.vo = t, this.lbtime.text = DateUtil.getYMDHM(t.time), t.type) {
                case 1:
                    var e = "#cc6cd7",
                        i = "普通";
                    break;
                case 2:
                    var e = "#a83503";
                    i = "高级";
                    break;
                case 3:
                    var e = "#ff0000";
                    i = "至尊"
            }
            if (1 == t.trigger) var o = ",\n触发了树神副本";
            else o = "";
            this.lb.textFlow = HtmlUtil.parse(t.name + HtmlUtil.color(i + "祈愿1次" + o, e)), this.line.source = "CM1_json.bm_line" + (t.index % 2 == 0 ? 1 : 2)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VTea_gsqfRecordItem.prototype, "VTea_gsqfRecordItem");
var VTea_gsqfTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Tea_gsqfTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btn), DisplayUtil.popBtnStyle(this.btn), this.btn.label = "进入"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this._close = 9, this.lbtime.text = "10s后自动进入", GameGlobal.tick.addInterv(this.tick, 1e3, this), IconUtil.setIconSrc(this.bgg, "teachMainBG3_png")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.tick.removeInterv(this.tick, this), GameGlobal.modelTeachersDay.CG3939(), IconUtil.setIconSrc(this.bgg)
    }, e.prototype.tick = function (t) {
        t.lbtime.text = t._close + "s后自动进入", t._close--, t._close <= 0 && t.closeHandler()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VTea_gsqfTip.prototype, "VTea_gsqfTip");
var VTea_sscfTip = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.grids = [], this.lb.text = "树神赐福", this.lb1.text = "树神副本有几率掉落："
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.lb2.text = "";
        var i = CFG_Param.LIB[15].key;
        ConfigHelp.makeStrGrids(i, this.grids, 0, 0, this.Grp, !0)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(VTea_SignxlTip);
__reflect(VTea_sscfTip.prototype, "VTea_sscfTip");
var VTea_jykx = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "Tea_jykxSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnClose);
        for (var t = 0; 3 > t; t++) {
            var e = this["item" + t];
            DisplayUtil.popBtnStyle(e), e.touchChildren = !1, e.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
        }
        DisplayUtil.popBtnStyle(this.btnRefresh1), DisplayUtil.popBtnStyle(this.btnRefresh2), DisplayUtil.popBtnStyle(this.btnRefresh3), this.btnRefresh1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnRefresh2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnRefresh3.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnRefresh1.label = this.btnRefresh2.label = this.btnRefresh3.label = "刷新", this.data = new eui.ArrayCollection, this.list.dataProvider = this.data, this.list.itemRenderer = VTea_jykxItem, DisplayUtil.popBtnStyle(this.btnadd), this.btnadd.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            var t = Config.getConfig(canshu_143).get(63).key + "元宝",
                e = "是否花费" + HtmlUtil.color(t, "#d83503") + "购买一次挑战次数？\n剩余可购买次数：" + HtmlUtil.color(Vo_TeachersDay.buynum, "#d83503");
            ViewAlert.show(e, function () {
                GameGlobal.modelTeachersDay.CG3925()
            })
        }, this), this.scroller.scrollPolicyV = eui.ScrollPolicy.OFF, this.scroller.verticalScrollBar.autoVisibility = !1, this.scroller.verticalScrollBar.visible = !1;
        var i = Config.getConfig(commonactivities_150).get(3).describe;
        this.lb_CaiLiaodes.text = i
    }, e.prototype.onT = function (t) {
        if (ModelBattle.canEnterBtl()) {
            var i = 0,
                o = t.target;
            if (!(egret.getTimer() - this.time < 1e3)) {
                switch (this.time = egret.getTimer(), o) {
                    case this.item0:
                        i = 1;
                        break;
                    case this.item1:
                        i = 2;
                        break;
                    case this.item2:
                        i = 3;
                        break;
                    case this.btnRefresh1:
                        i = 1;
                        break;
                    case this.btnRefresh2:
                        i = 2;
                        break;
                    case this.btnRefresh3:
                        i = 3
                }
                e.clickItem = i, GameGlobal.modelTeachersDay.CG3923(i)
            }
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.checkRed(), this.hideTime(), this.bagChange(), GameGlobal.tick.addInterv(this.tickItem, 100, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.bagChange, this), GameGlobal.modelTeachersDay.on(ModelTeachersDay.MSG_UPDATE, this.update, this), GameGlobal.modelTeachersDay.CG3921(), this.time = 0, IconUtil.setIconSrc(this.bgg, "teachMainBG3_png")
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.tickItem, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.bagChange, this), GameGlobal.modelTeachersDay.off(ModelTeachersDay.MSG_UPDATE, this.update, this), IconUtil.setIconSrc(this.bgg)
    }, e.prototype.checkRed = function () {
        e.fristRed = !1;
        var t = GameGlobal.layerMgr.getView(UIConst.TEACHERSDAY);
        t && t.setjyRed()
    }, e.prototype.bagChange = function () {
        var t = CFG_Param.LIB[13].key;
        ConfigHelp.makeVoList(t);
        ConfigHelp.makeStrGrids(t, this.grids, 0, 0, this.clGrp, !0);
        for (var e = 0; e < this.grids.length; e++) {
            var i = this.grids[e];
            i.bg.source = "", i.isShowEff(!1), i.lbCount.visible = !0;
            var o = i.data,
                n = GameGlobal.modelBag.getItemCount(o.id);
            i.lbCount.text = n.toString(), i.lbCount.size = 26
        }
        this.upList()
    }, e.prototype.update = function () {
        this.lbsytz.textFlow = HtmlUtil.parse("剩余挑战次数:" + HtmlUtil.color(Vo_TeachersDay.qdnum, "#08762f"))
    }, e.prototype.upList = function () {
        if (!this.vol) {
            this.vol = [];
            var t = CFG_TeachersDay.LIB2;
            for (var e in t) {
                var i = t[e];
                this.vol.push(i)
            }
        }
        DisplayUtil.fillDataAC(this.data, this.vol)
    }, e.prototype.hideTime = function () {
        for (var t = 0; 3 > t; t++) {
            var e = this["time" + t];
            e.visible = !1
        }
    }, e.prototype.tickItem = function (t) {
        t.tick();
        var e = Vo_TeachersDay.timel;
        if (e)
            for (var i = egret.getTimer(), o = 0; o < e.length; o++) {
                var n = e[o],
                    a = t["time" + o],
                    s = t["lbtime" + o],
                    r = t["itemimg" + o],
                    l = t["btnRefresh" + (o + 1)],
                    h = n - (i - Vo_TeachersDay.retime) / 1e3 >> 0;
                s.text = DateUtil.getHMSBySecond2(h) + "刷新", a.visible = h > 0, l.visible = h > 0, r.filters = h > 0 ? [t.sethui()] : null
            }
    }, e.prototype.sethui = function () {
        if (this.colorFlilter) return this.colorFlilter;
        var t = [.3, .6, 0, 0, 0, .3, .6, 0, 0, 0, .3, .6, 0, 0, 0, 0, 0, 0, 1, 0];
        return this.colorFlilter = new egret.ColorMatrixFilter(t), this.colorFlilter
    }, e.prototype.tick = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(23);
        if (t) {
            var e = t.getRemainSec();
            if (e >= 0) return
        }
        ViewText.text("活动已结束"), this.closeHandler()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.fristRed = !0, e
}(BaseEUIView);
__reflect(VTea_jykx.prototype, "VTea_jykx");
var VTea_jykxItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Tea_jykxItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.grids = [], this.grid.enableTip(), DisplayUtil.popBtnStyle(this.btn), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this);
        var e = Config.getConfig(commonactivities_150).get(2).describe;
        this.btn.label = e
    }, e.prototype.onT = function () {
        GameGlobal.modelTeachersDay.CG3929(this.vo.bh)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t;
            var e = ConfigHelp.makeVoList(t.dd)[0];
            this.grid.data = e, this.grid.bg.source = "", this.lbname.text = e.name;
            var i = 0;
            ConfigHelp.makeStrGrids(t.xh, this.grids, 0, 0, this.grp, !0, 10, .9);
            for (var o = 0; o < this.grids.length; o++) {
                var n = this.grids[o];
                n.bg.source = "", n.lbCount.size = 28, n.isShowEff(!1), n.lbCount.visible = !0;
                var a = n.data,
                    s = GameGlobal.modelBag.getItemCount(a.id);
                n.lbCount.text = s + "/" + a.count, n.lbCount.textColor = s >= a.count ? 16777215 : 14169347, n.lbCount.stroke = 0, s >= a.count && i++
            }
            this.btn.setNoticeVis(i == this.grids.length)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VTea_jykxItem.prototype, "VTea_jykxItem");
var VTea_Sign = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Tea_SignSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnxl), DisplayUtil.popBtnStyle(this.btn), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btnxl.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIConst.TEASIGNXLTIP)
        }, this), this.btnxl.textFlow = HtmlUtil.underLine("神秘礼物"), DisplayUtil.popBtnStyle(this.btnRule), this.btnRule.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            ViewWenHao.show(CFG_COMMOND.LIBWFSM[110501].detail)
        }, this), Vo_TeachersDay.create();
        var t = Config.getConfig(commonactivities_150).get(4).describe;
        this.btn.label = t
    }, e.prototype.onT = function () {
        GameGlobal.modelTeachersDay.CG3917()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.checkRed(), this.checkbtnRed(), GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.checkbtnRed, this), GameGlobal.modelTeachersDay.on(ModelTeachersDay.MSG_UPDATE, this.upSignItems, this), GameGlobal.modelTeachersDay.CG3915(), IconUtil.setIconSrc(this.bgg, "teachMainBG3_png")
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.tick, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.checkbtnRed, this), GameGlobal.modelTeachersDay.off(ModelTeachersDay.MSG_UPDATE, this.upSignItems, this), IconUtil.setIconSrc(this.bgg)
    }, e.prototype.checkRed = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.TEACHERSDAY);
        t && (t.red0.visible = !1)
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(23);
        if (e) {
            var i = e.getRemainSec();
            if (i >= 0) return
        }
        ViewText.text("活动已结束"), t.closeHandler()
    }, e.prototype.upCollItems = function () {
        for (var t = CFG_Param.LIB[13].key, e = ConfigHelp.makeVoList(t), i = 0; i < e.length; i++) {
            var o = e[i],
                n = this["coll" + i];
            n.data = o, n.bg.source = "", n.lbCount.visible = !0, n.lbCount.horizontalCenter = 0, n.lbCount.bottom = -15;
            var a = GameGlobal.modelBag.getItemCount(o.id);
            n.lbCount.text = a + "/" + o.count, n.lbCount.textColor = a >= o.count ? 1090116 : 14169347, n.lbCount.stroke = 0, n.enableTip()
        }
    }, e.prototype.upSignItems = function () {
        this.signItems || (this.signItems = []);
        var t = Vo_TeachersDay.List;
        if (3 == t.length)
            for (var e = 0; e < t.length; e++) {
                var i = t[e],
                    o = this.signItems[e];
                o || (o = new VTea_SignItem, o.scaleX = o.scaleY = 1.5, o.x = 1.6 * o.width * e, o.y = 30, this.signItems.push(o), DisplayUtil.addBy(o, this.signGrp)), o.data = i
            } else
                for (var e = 0; e < t.length; e++) {
                    var i = t[e],
                        o = this.signItems[e];
                    o || (o = new VTea_SignItem, 4 > e ? o.x = (o.width + 10) * e : (o.x = (4 * o.width + 30 - (3 * o.width + 20)) / 2 + (o.width + 10) * (e - 4), o.y = o.height + 10), this.signItems.push(o), DisplayUtil.addBy(o, this.signGrp)), o.data = i
                }
    }, e.prototype.checkbtnRed = function () {
        this.upCollItems();
        for (var t = CFG_Param.LIB[13].key, e = ConfigHelp.makeVoList(t), i = 0; i < e.length; i++) {
            var o = e[i],
                n = GameGlobal.modelBag.getItemCount(o.id);
            if (n < o.count) return void this.btn.setNoticeVis(!1)
        }
        this.btn.setNoticeVis(!0)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VTea_Sign.prototype, "VTea_Sign");
var VTea_SignItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Tea_SItemGreenSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), DisplayUtil.popBtnStyle(this.btn), this.btn.label = "签到", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.imgsign.addEventListener(egret.TouchEvent.TOUCH_TAP, this.bqT, this), this.grid.enableTip()
    }, e.prototype.onT = function () {
        var t = this.vo,
            e = Vo_TeachersDay.nowDay;
        return t.id > e ? void ViewText.text("请在活动第" + t.id + "天再来签到！") : void GameGlobal.modelTeachersDay.CG3913(t.id)
    }, e.prototype.bqT = function () {
        var t = this.vo,
            e = Vo_TeachersDay.nowDay;
        if (!t.issign && t.id < e) {
            var i = CFG_Param.LIB[16].key;
            ViewAlert.show("是否花费" + HtmlUtil.color(i + "元宝", "#d83503") + "进行补签？", function () {
                GameGlobal.modelTeachersDay.CG3919(t.id)
            })
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t;
            var e = ConfigHelp.makeVoList(t.cfg.jl)[0];
            7 == t.id ? (e.quality < 5 && (e.quality = 5), this.grid.isShowEff(!0)) : this.grid.isShowEff(!1), this.grid.data = e, this.grid.bg.source = "";
            var i = Vo_TeachersDay.nowDay;
            if (t.issign) {
                var o = "teachersDay2_json.sign";
                this.btn.visible = !1, this.imgsign.visible = !0
            } else t.id < i ? (this.btn.visible = !1, this.imgsign.visible = !0, o = "teachersDay2_json.btnbq") : (this.btn.visible = !0, this.imgsign.visible = !1);
            this.imgsign.source = o, this.lbday.text = "第" + t.id + "天"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VTea_SignItem.prototype, "VTea_SignItem");
var CFG_DALIY = function () {
    function t() {}
    return t
}();
__reflect(CFG_DALIY.prototype, "CFG_DALIY");
var VTea_SignzlTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Tea_SignxlTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnClose.visible = !1, this.btn.visible = !0, DisplayUtil.popBtnStyle(this.btn), this.btn.label = "确认", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.grids = [];
        var t = Config.getConfig(commonactivities_150);
        this.lb.text = t.get(15).describe, this.lb1.text = t.get(16).describe
    }, e.prototype.onT = function () {
        this.closeHandler()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = CFG_Param.LIB[14].key;
        ConfigHelp.makeStrGrids(i, this.grids, 0, 0, this.Grp, !0), this._close = 4, this.lb2.text = "5s后自动确认", GameGlobal.tick.addInterv(this.tick, 1e3, this), IconUtil.setIconSrc(this.bgg, "teachMainBG3_png")
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.tick.removeInterv(this.tick, this), IconUtil.setIconSrc(this.bgg)
    }, e.prototype.tick = function (t) {
        t.lb2.text = t._close + "s后自动确认", t._close--, t._close <= 0 && t.closeHandler()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VTea_SignzlTip.prototype, "VTea_SignzlTip");
var VTea_smzl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "Tea_smzlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnClose), this.data = new eui.ArrayCollection, this.list.dataProvider = this.data, this.list.itemRenderer = VTea_smzlItem
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.modelTeachersDay.on(ModelTeachersDay.MSG_UPDATE, this.update, this), GameGlobal.modelTeachersDay.CG3941(), IconUtil.setIconSrc(this.bgg, "teachMainBG3_png")
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.tick, this), GameGlobal.modelTeachersDay.off(ModelTeachersDay.MSG_UPDATE, this.update, this), IconUtil.setIconSrc(this.bgg)
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(23);
        if (e) {
            var i = e.getRemainSec();
            if (i >= 0) return
        }
        ViewText.text("活动已结束"), t.closeHandler()
    }, e.prototype.update = function () {
        DisplayUtil.fillDataAC(this.data, Vo_TeachersShop.List)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VTea_smzl.prototype, "VTea_smzl");
var VTea_smzlItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "Tea_smzlItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, e.prototype.onT = function () {
        GameGlobal.modelTeachersDay.CG3943(this.vo.id)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.lbname.text = t.cfg.mc, this.lbdes.text = t.cfg.ms2;
            var e = !1,
                i = !1;
            if (t.cs >= t.cfg.cs) {
                var o = "已购买";
                e = !1, i = !1, this.btn.setNoticeVis(!1)
            } else {
                var n = Util.parseIntStr(t.cfg.xj);
                0 == n[2] ? (o = "免费", i = !1, this.btn.setNoticeVis(!0)) : (o = " ", i = !0, this.btn.setNoticeVis(!1));
                var a = 32 == n[0] ? "MainScreen_json.byl" : "MainScreen_json.bm_yb";
                this.imgxh.source = a, this.lbxh.text = n[2], e = !0
            }
            this.btn.label = o, this.btn.enabled = e, this.imgxh.visible = this.lbxh.visible = i, ConfigHelp.makeStrGrids(t.cfg.lbnr2, this.grids, 0, 0, this.gridGrp, !0);
            for (var s = 0; s < this.grids.length; s++) {
                var r = this.grids[s];
                0 == s ? (r.x = (this.gridGrp.width - r.width) / 2, r.y = 0) : (r.x = 96 * (s - 1), r.y = 96)
            }
            this.imgline.visible = !(1 == t.index || 0 == t.index)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VTea_smzlItem.prototype, "VTea_smzlItem");
var VFestivalXFPH = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewShuang11XFPH", e
    }
    return __extends(e, t), e.prototype.init = function () {
        this.grids = [], this.sourceData = new eui.ArrayCollection, this.uirole = UIRole.create(), this.roleGroup.addChild(this.uirole), this.uirole.scaleX = this.uirole.scaleY = 1, this.roleShowData = new RoleShowData, this.uiroleDown = UIRole.create(), this.roleGrpDown.addChild(this.uiroleDown), this.uiroleDown.scaleX = this.uiroleDown.scaleY = 1, this.roleShowDataDown = new RoleShowData
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.init(), this.scroller.scrollPolicyH = eui.ScrollPolicy.OFF, this.scroller.verticalScrollBar.autoVisibility = !1, this.scroller.verticalScrollBar.visible = !1, this.jlList.itemRenderer = ItemShuang11XFPH, this.jlList.dataProvider = this.sourceData, this.btnPHB.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPHB, this), this.btnSeePHB.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPHB, this), DisplayUtil.popBtnStyle(this.btnSeePHB), this.btnSeePHB.touchEnabled = !0, this.btnSeePHB.textFlow = HtmlUtil.underLine("查看"), DisplayUtil.popBtnStyle(this.btnTisheng), this.btnTisheng.touchEnabled = !0, this.btnTisheng.textFlow = HtmlUtil.underLine("前往消费"), this.btnTisheng.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTiSheng, this), this.lb_costYB.text = Config.getConfig(canshu_143).get(35).key.split(",")[2], this.txtShowName.text = Config.getConfig(commonactivities_150).get(14).describe
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "commonAct_json.15_xfphBg"), this.addMsg(), this.update(), GameGlobal.modelShuang11.CG4493()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bg), this.removeMsg(), this.uirole.stopAndClear(), this.uiroleDown.stopAndClear()
    }, e.prototype.onTiSheng = function () {
        GameGlobal.layerMgr.open(UIConst.THANKSGIVINGDAY, UIConst.FESTIVALSTORE)
    }, e.prototype.onPHB = function () {
        GameGlobal.layerMgr.open(UIConst.FESTIVALXFPHBANG)
    }, e.prototype.update = function () {
        this.updateTopShow(), this.updateDownShow(), this.lbFirst.textFlow = HtmlUtil.parse("消费榜" + HtmlUtil.color("第1名", "#ff0000"));
        var t = Config.getConfig(ssyphjl_126).get(1).jl;
        ConfigHelp.makeStrGrids(t, this.grids, 0, 0, this.Container, !0, 10, .9);
        for (var e = Config.getConfig(ssyphjl_126).values, i = [], o = 0; o < e.length; o++) {
            var n = e[o];
            1 != n.id && i.push(n)
        }
        this.sourceData.source = i
    }, e.prototype.updateTopShow = function () {
        var t = Config.getConfig(commonactivities_150).get(12).describe;
        if (t) this.imgShow.visible = !0, this.imgShow.source = IconUtil.getIconUrl(t);
        else {
            this.imgShow.visible = !1;
            var e = GameGlobal.modelRole.voMine.job,
                i = Config.getConfig(commonactivities_150).get(12),
                o = e == Sex.MAN ? i.modMale : i.modFemale,
                n = parseInt(o.split(",")[0]),
                a = parseInt(o.split(",")[1]);
            this.roleShowData.setSingleShowByType(n, a), n == E_RoleShowType.BODY ? this.roleGroup.y = 224 : this.roleGroup.y = 161, this.uirole.setData(this.roleShowData), this.uirole.setWay(3), this.uirole.play()
        }
    }, e.prototype.updateDownShow = function () {
        var t = Config.getConfig(commonactivities_150).get(13).describe;
        if (t) {
            this.grid.visible = !0;
            var e = t.split(",")[1];
            if (e) {
                var i = Config.getConfig(item_106).get(parseInt(e));
                i ? this.txtHorseName.text = i.name : console.error("！！！！！！道具id填错了！");
                var o = ConfigHelp.makeVoList(t)[0];
                this.grid.data = o, this.grid.enableTip(), this.grid.isShowEff(!0)
            } else console.error("！！！！！！道具格式填错了！")
        } else {
            var n = Config.getConfig(ssyphjl_126).get(1).jl,
                a = n.split(";")[0],
                e = a.split(",")[1],
                i = Config.getConfig(item_106).get(parseInt(e));
            this.txtHorseName.text = i.name, this.grid.visible = !1;
            var s = GameGlobal.modelRole.voMine.job,
                r = Config.getConfig(commonactivities_150).get(13),
                l = s == Sex.MAN ? r.modMale : r.modFemale,
                h = parseInt(l.split(",")[0]),
                c = parseInt(l.split(",")[1]);
            this.roleShowDataDown.setSingleShowByType(h, c), this.uiroleDown.setData(this.roleShowDataDown), this.uiroleDown.setWay(3), this.uiroleDown.play()
        }
    }, e.prototype.onUpdate = function (t) {
        0 == t.sort ? this.lbSort.text = "未上榜" : this.lbSort.text = "" + t.sort, this.lbCost.text = "" + t.cost
    }, e.prototype.addMsg = function () {
        GameGlobal.modelShuang11.on(ModelShuang11.MSG_PMUPDATE, this.onUpdate, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelShuang11.off(ModelShuang11.MSG_PMUPDATE, this.onUpdate, this)
    }, e
}(BaseEUIView);
__reflect(VFestivalXFPH.prototype, "VFestivalXFPH");
var View_FestivalShangQiJiangLi = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "shuang11shangQiJiangLiSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.Scroller.scrollPolicyH = eui.ScrollPolicy.OFF, this.Scroller.verticalScrollBar.autoVisibility = !1, this.Scroller.verticalScrollBar.visible = !1, this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemShuang11HJJL, this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnTisheng), this.btnTisheng.touchEnabled = !0, this.btnTisheng.textFlow = HtmlUtil.underLine("前往消费"), this.btnTisheng.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTiSheng, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "CM2_json.comBg"), GameGlobal.modelShuang11.CG4491(), this.curId = e, this.addMsg(), this.update()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bg), this.removeMsg()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onTiSheng = function () {
        GameGlobal.layerMgr.close(UIConst.FESTIVALXFPHBANG), GameGlobal.layerMgr.open(UIConst.THANKSGIVINGDAY, UIConst.FESTIVALSTORE)
    }, e.prototype.update = function () {
        this.notice.text = "暂无记录！"
    }, e.prototype.addMsg = function () {
        GameGlobal.modelShuang11.on(ModelShuang11.MSG_PHBUPDATE, this.onUpdate, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelShuang11.off(ModelShuang11.MSG_PHBUPDATE, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        if (0 != t.length) {
            this.notice.text = "";
            for (var e = [], i = 0; i < t.length; i++) e.push(t[i]);
            this.sourceData.source = e
        }
    }, e
}(BaseEUIView);
__reflect(View_FestivalShangQiJiangLi.prototype, "View_FestivalShangQiJiangLi");
var ViewFestivalShangCheng = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new ArrayCollection, e.sourceCostLabs = new ArrayCollection, e.typeInfo = new festivalShangChengTypeInfo, e.skinName = "ViewShuang11ShangChengSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.scroller.scrollPolicyH = eui.ScrollPolicy.OFF, this.scroller.verticalScrollBar.autoVisibility = !1, this.scroller.verticalScrollBar.visible = !1, this.costLabels.itemRenderer = ItemHuoBiStore, this.costLabels.dataProvider = this.sourceCostLabs, this.costLabels.useVirtualLayout = !1, this.btnZglb.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onZGLB, this), this.setProductSource()
    }, e.prototype.setProductSource = function () {
        this.container.dataProvider = this.sourceData, this.container.itemRenderer = ItemShangCheng, this.btnRefresh.label = "刷新", this.btnRefresh.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onRefresh, this)
    }, e.prototype.onZGLB = function () {
        GameGlobal.layerMgr.close(UIConst.THANKSGIVINGDAY), GameGlobal.layerMgr.open(UIConst.MIDFESTLB)
    }, e.prototype.onRefresh = function () {
        GameGlobal.modelShangCheng.CG4503()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelShangCheng.on(ModelShangCheng.msg_shuang11, this.updateDatas, this), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_shuang11_buy, this.itemUpdate, this), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_refrashTimeShuang11, this.updateRefTime, this), GameGlobal.modelShangCheng.CG4501()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelShangCheng.off(ModelShangCheng.msg_shuang11, this.updateDatas, this), GameGlobal.modelShangCheng.off(ModelShangCheng.msg_shuang11_buy, this.itemUpdate, this), GameGlobal.modelShangCheng.off(ModelShangCheng.msg_refrashTimeShuang11, this.updateRefTime, this)
    }, e.prototype.updateDatas = function () {
        this.sourceCostLabs.source = this.typeInfo.getCostLabels();
        var t = this.typeInfo.getDatas();
        t.sort(this.onSort), this.sourceData.source = t, this.updateSSYTabVis(), this.setState("st2"), this.updateRefTime()
    }, e.prototype.onSort = function (t, e) {
        var i = t.cfg.px,
            o = e.cfg.px;
        return i - o
    }, e.prototype.updateSSYTabVis = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.THANKSGIVINGDAY);
        1 == this._curID && (VoShangCheng.isEnterShuang11 = !0), 0 == VoShangCheng.mapShuang11.getLength() ? (ViewText.text("商城物品已售完！"), t.base.removeTabByID(UIConst.FESTIVALSTORE)) : t.base.addTab("节日商城", 2, UIConst.FESTIVALSTORE)
    }, e.prototype.setState = function (t) {
        switch (t) {
            case "st1":
                this.scroller.height = 659, this.iconCostLB.visible = !1, this.txtRefreshTime.visible = !1, this.btnRefresh.visible = !1, this.txtCostYB.visible = !1;
                break;
            case "st2":
                this.iconCostLB.visible = !0, this.txtRefreshTime.visible = !0, this.btnRefresh.visible = !0, this.txtCostYB.visible = !0
        }
    }, e.prototype.itemUpdate = function (t) {
        this.sourceData.itemUpdated(t)
    }, e.prototype.updateRefTime = function () {
        var t = GameGlobal.modelShangCheng.refreshCount,
            e = t + 1,
            i = CFG_zlgexiaohao_168.LIB[e];
        if (i || (i = CFG_zlgexiaohao_168.LIB[t]), "0" == i.xh) this.txtCostYB.text = "x0";
        else {
            var o = ConfigHelp.makeVoList(i.xh)[0];
            GameGlobal.modelRole.voMine.yuanbao < o.count ? this.txtCostYB.textColor = 16646144 : this.txtCostYB.textColor = 1090116, this.txtCostYB.text = "x" + o.count
        }
        var n = GameGlobal.modelShangCheng.remainTime;
        n > 0 ? this.addTick() : this.removeTick()
    }, e.prototype.addTick = function () {
        this.txtRefreshTime.text = "商城刷新时间: " + DateUtil.getHMSBySecond2(GameGlobal.modelShangCheng.remainTime--), GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.removeTick = function () {
        this.txtRefreshTime.text = "商城刷新时间: 00:00:00", GameGlobal.tick.removeInterv(this.onTick, this)
    }, e.prototype.onTick = function (t) {
        t.txtRefreshTime.text = "商城刷新时间: " + DateUtil.getHMSBySecond2(GameGlobal.modelShangCheng.remainTime--)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "commonAct_json.15_jrstoreBg"), IconUtil.setIconSrc(this.bg2, "CM2_json.bm_greyBG3"), this._curID = e, this.addMsg(), this.addZGLBEff(), this.btnZglb.visible = !1, this.zglbEff.visible = !1, this.iconNotice.visible = !1
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bg), IconUtil.setIconSrc(this.bg2), this.removeMsg(), VoShangCheng.isEnterShuang11 = !1, this.removeZGLBEff()
    }, e.prototype.addZGLBEff = function () {
        this.zglbEff || (this.zglbEff = EffectMgr.addEff("uieff/Click", this.effGrp, 0, 0, 1e3, -1, !0), this.zglbEff.touchEnabled = !0, this.zglbEff.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onZGLB, this))
    }, e.prototype.removeZGLBEff = function () {
        EffectMgr.getIns().removeEff(this.zglbEff), this.zglbEff.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onZGLB, this), this.zglbEff.touchEnabled = !1, this.zglbEff = null
    }, e
}(BaseEUIView);
__reflect(ViewFestivalShangCheng.prototype, "ViewFestivalShangCheng");
var festivalShangChengTypeInfo = function () {
    function t() {}
    return t.prototype.getDatas = function () {
        var t;
        return t = VoShangCheng.mapShuang11.getList()
    }, t.prototype.getCostLabels = function () {
        var t = "";
        return t = "33,0,0", ConfigHelp.makeVoList(t)
    }, t
}();
__reflect(festivalShangChengTypeInfo.prototype, "festivalShangChengTypeInfo");
var VThanksGivingDay = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curst = -1, e.tabUIArr = [], e.skinName = "Shuang11Skin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this,
            e = this.base;
        e.btnReturn.visible = !1;
        var i = GameGlobal.layerMgr;
        this.addCloseListen(e.btnClose).addCloseListen(e.btnReturn), this.btnWenhao.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onWenHao, this), e.createTabGroup().createPageGrp(), i.reg(UIConst.SHUANG11SIGN, VShuang11_sign, e.pageGrp), i.reg(UIConst.CYDH, ViewCYJ_jieRiDuiHuan, e.pageGrp), i.reg(UIConst.FESTIVALSTORE, ViewFestivalShangCheng, e.pageGrp), i.reg(UIConst.FESTIVALXFPH, VFestivalXFPH, e.pageGrp), i.reg(UIConst.MIDFESTLB, ViewMidFestLB, e.pageGrp);
        var o = GameGlobal.modelAct.actData.getChildByID(35);
        if (o) {
            var n = -1,
                a = o.getChildByID(65);
            a && (n++, e.addTab("节日签到", n, UIConst.SHUANG11SIGN), this.tabUIArr.push(UIConst.SHUANG11SIGN));
            var s = o.getChildByID(64);
            s && (n++, e.addTab("节日兑换", n, UIConst.CYDH), this.tabUIArr.push(UIConst.CYDH));
            var r = o.getChildByID(67);
            r && (n++, e.addTab("节日商城", n, UIConst.FESTIVALSTORE), this.tabUIArr.push(UIConst.FESTIVALSTORE));
            var l = o.getChildByID(68);
            l && (n++, e.addTab("消费排行", n, UIConst.FESTIVALXFPH), this.tabUIArr.push(UIConst.FESTIVALXFPH));
            var h = o.getChildByID(59);
            h && (n++, e.addTab("直购礼包", n, UIConst.MIDFESTLB), this.tabUIArr.push(UIConst.MIDFESTLB))
        }
        e.listenTabClick(t.onTbtn, t)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e && this.base.getTabBySysID(e) ? this.base.setTabSelSys(e, !0) : this.base.setTabSelIdx(0, !0), GameGlobal.tick.addInterv(this.tick, 1e3, this)
    }, e.prototype.onClose = function () {
        this.setCurSt(-1), GameGlobal.tick.removeInterv(this.tick, this)
    }, e.prototype.updateWenHao = function () {
        0 == this._curst ? this.btnWenhao.visible = !0 : this.btnWenhao.visible = !1
    }, e.prototype.onWenHao = function () {
        0 == this._curst && ViewWenHao.show(CFG_COMMOND.LIBWFSM[1122].detail, 24)
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(35);
        if (e) {
            var i = e.getChildByID(65);
            if (!i) return void t.closeHandler();
            var o = i.getRemainSec();
            0 > o && (ViewText.text("活动已结束"), t.closeHandler())
        } else t.closeHandler()
    }, e.prototype.onTbtn = function (t) {
        var e = t.sort;
        CFG_COMMOND.canDo(t.bindSysID) && (this.base.title = t.text, this.setCurSt(e), this.updateWenHao())
    }, e.prototype.setCurSt = function (t) {
        if (this._curst != t) {
            var e = GameGlobal.layerMgr; - 1 != this._curst && e.close(this.tabUIArr[this._curst]), -1 != t && (this.tabUIArr[t] == UIConst.FESTIVALSTORE ? e.open(this.tabUIArr[t], 1) : e.open(this.tabUIArr[t])), this.base.setTabSelIdx(t), this._curst = t
        }
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VThanksGivingDay.prototype, "VThanksGivingDay");
var ModelTitle = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.IDMap = {}, e.timeMap = {}, e.zhZhanLi = -1, e.curHHId = -1, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1382, this.GC1382, this), e.regHand(1384, this.GC1384, this), e.regHand(1386, this.GC1386, this)
    }, e.prototype.CG1381 = function () {
        var t = this.getBytes();
        this.sendSocket(1381, t)
    }, e.prototype.CG1383 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1383, e)
    }, e.prototype.CG1385 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1385, e)
    }, e.prototype.GC1382 = function (t, i) {
        GameGlobal.modelTitle.curHHId = i.readInt();
        var o = GameGlobal.modelRole.voMine.sceneChars[0],
            n = e.getIcon(GameGlobal.modelTitle.curHHId);
        o.setTitle(n);
        var a = i.readShort();
        Util.clearKeys(t.IDMap), Util.clearKeys(t.timeMap), Vo_TitleItem.dirtyFlag = !0;
        for (var s = 0; a > s; s++) {
            var r = i.readInt(),
                l = i.readInt();
            GameGlobal.modelTitle.IDMap[r] = r, GameGlobal.modelTitle.timeMap[r] = l
        }
        t.timeUDT = egret.getTimer(), GameGlobal.modelTitle.zhZhanLi = i.readInt(), Vo_TitleItem.setJH(), GameGlobal.modelTitle.notify(e.UPDATE)
    }, e.prototype.GC1384 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            GameGlobal.modelTitle.curHHId = i.readInt();
            var n = GameGlobal.modelRole.voMine.sceneChars[0],
                a = e.getIcon(GameGlobal.modelTitle.curHHId);
            n.setTitle(a), GameGlobal.modelTitle.notify(e.HH)
        } else 2 == o && ViewText.text("没有该称号")
    }, e.prototype.GC1386 = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            e.readInt();
            GameGlobal.modelTitle.zhZhanLi = e.readInt()
        } else 2 == i && ViewText.text("道具不足")
    }, e.getIcon = function (t) {
        var e = CFG_Title.LIB,
            i = 0;
        for (var o in e) {
            if (t.toString() == o) return e[o].icon;
            i++
        }
        return null
    }, e.UPDATE = "UPDATE", e.HH = "HH", e
}(BaseModel);
__reflect(ModelTitle.prototype, "ModelTitle");
var VFashionItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.skinName = "FashionItemSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {}, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.v
        },
        set: function (t) {
            this.v = t, this.TextName.text = this.v.name, this.notice.visible = VTitleItem.Noitce(t), this.v.jh ? (this.jh.visible = !1, this.TextName.textColor = 16769367) : (this.jh.visible = !0, this.TextName.textColor = 15441445), this.icon.source = this.v.icon + "_png"
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel != t && (this._sel = t, t ? this.select.visible = !0 : this.select.visible = !1)
        },
        enumerable: !0,
        configurable: !0
    }), e.Noitce = function (t) {
        if (t.jh || 0 == t.item) return !1;
        var e = t.item[1],
            i = GameGlobal.modelBag.getItemCount(e);
        return i > 0 ? !0 : !1
    }, e
}(BaseEUIView);
__reflect(VFashionItem.prototype, "VFashionItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var Vo_TitleItem = function () {
    function t() {}
    return t.create = function (e, i, o, n, a, s, r, l, h, c) {
        var p = new t;
        return p.id = e, p.icon = i, p.name = o, p.time = n, p.attr = a, p.des = s, p.item = r, p.eff = l, p.zhanli = h, p.src = c, p
    }, t.init = function () {
        t.List = [];
        for (var e in CFG_Title.LIB) {
            var i = CFG_Title.LIB[e];
            if (i.qd == E_PF_CONFIG_TYPE.LOCAL || i.qd == AppConfig.pftype) {
                var o = i.id,
                    n = i.icon,
                    a = i.name,
                    s = i.t,
                    r = i.attr,
                    l = t.ZhanLi(r),
                    h = i.des,
                    c = CFG_Title.getTItem(e),
                    p = i.eff,
                    u = i.src,
                    d = t.create(o, n, a, s, r, h, c, p, l, u);
                t.List.push(d)
            }
        }
    }, t.setJH = function () {
        for (var e = t.List, i = 0; i < e.length; i++) e[i].jh = t.isJH(e[i].id), e[i].notice = e[i].Noitce();
        t.Sort()
    }, t.prototype.Noitce = function () {
        if (0 == this.item || this.jh) return !1;
        var t = this.item[1],
            e = GameGlobal.modelBag.getItemCount(t);
        return e > 0 ? !0 : !1
    }, t.getVIndexById = function (e) {
        for (var i = t.List, o = 0; o < i.length; o++)
            if (e == i[o].id) return o;
        return 0
    }, t.getVo = function (e) {
        for (var i = t.List, o = 0; o < i.length; o++)
            if (e == i[o].id) return i[o];
        return null
    }, t.isJH = function (t) {
        var e = GameGlobal.modelTitle.IDMap;
        return e[t] ? !0 : !1
    }, t.getTimeById = function (t) {
        var e = GameGlobal.modelTitle.timeMap;
        return e[t] ? e[t] : 0
    }, t.ZhanLi = function (t) {
        if ("0" == t) return 0;
        for (var e = [], i = t.split(";"), o = 0; o < i.length; o++)
            for (var n = i[o].split(","), a = 0; a < n.length; a++) e.push(parseInt(n[a]));
        var s = CFG_ATTR.cuculateArrScore(e);
        return s
    }, t.notice = function () {
        if (!CFG_COMMOND.isOpen(CFG_COMMOND.TITLE, !1)) return !1;
        var t = CFG_Title.LIB,
            e = GameGlobal.modelBag;
        if (this.dirtyFlag || e.udArg[VoItem.T_CHPFK]) {
            this.enableRed = !1, this.dirtyFlag = !1;
            for (var i in t) {
                var o = GameGlobal.modelTitle.IDMap[i];
                if (!o) {
                    var n = CFG_Title.getTItem(i);
                    if (0 != n) {
                        var a = n[1],
                            s = GameGlobal.modelBag.getItemCount(a);
                        s > 0 && (this.enableRed = !0)
                    }
                }
            }
            delete e.udArg[VoItem.T_CHPFK]
        }
        return this.enableRed
    }, t.Sort = function () {
        t.List.sort(this.sortFunc)
    }, t.sortFunc = function (t, e) {
        var i = (t.id == GameGlobal.modelTitle.curHHId ? 0 : 1e8) + (t.jh ? 0 : 1e7) + (t.notice ? 0 : 1e6) + t.id,
            o = (e.id == GameGlobal.modelTitle.curHHId ? 0 : 1e8) + (e.jh ? 0 : 1e7) + (e.notice ? 0 : 1e6) + e.id;
        return i - o
    }, t.List = [], t.enableRed = !1, t
}();
__reflect(Vo_TitleItem.prototype, "Vo_TitleItem");
var VTBTL = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/title/TBTLSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this;
        this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), t.role = UIRole.create(), t.partCont.addChildAt(t.role, 0), t.partCont.scaleX = t.partCont.scaleY = 1, t.textStr = new ImageText, t.textStr.container = t.container2, t.textStr.charFunc = ImageText.STRFUNC
    }, e.prototype.setAttr = function (t) {
        var e, i, o = [0, 0, 0, 0];
        if (1 == t) {
            e = GameGlobal.modelTitle.IDMap;
            for (var n in e) {
                i = Vo_TitleItem.getVo(e[n]);
                for (var a = i.attr.split(";"), t = 0; t < a.length; t++) {
                    var s = a[t].split(","),
                        r = parseInt(s[1]);
                    o[t] += r
                }
            }
        } else if (2 == t) {
            e = GameGlobal.modelFashion.IDMap;
            for (var l in e) {
                i = Vo_Fashion.getVo(e[l]);
                for (var a = i.attr.split(";"), t = 0; t < a.length; t++) {
                    var s = a[t].split(","),
                        r = parseInt(s[1]);
                    o[t] += r
                }
            }
        }
        return o
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        if (1 == e) {
            this.txtTitle.text = "称号属性", i.textStr.setText("z" + GameGlobal.modelTitle.zhZhanLi);
            var o = Vo_TitleItem.List[0].attr.split(";")
        } else 2 == e && (this.txtTitle.text = "时装属性", i.textStr.setText("z" + GameGlobal.modelFashion.zhZhanLi), o = Vo_Fashion.List[0].attr.split(";"));
        GameGlobal.tick.addInterv(i.onTick, 50, i);
        for (var n = [], a = this.setAttr(e), s = 0; s < o.length; s++) {
            var r = o[s].split(",");
            for (var l in CFG_ATTR.LIB) r[0] == l && n.push(CFG_ATTR.LIB[l].n)
        }
        this.txta1.text = n[0], this.txta2.text = n[1], this.txta3.text = n[2], this.txta4.text = n[3], this.txta1_v.text = "+" + a[0], this.txta2_v.text = "+" + a[1], this.txta3_v.text = "+" + a[2], this.txta4_v.text = "+" + a[3];
        var h = GameGlobal.modelRole.voMine.sceneChars[0],
            c = h._body,
            p = h._horse,
            u = h._wing,
            d = h._weapon,
            f = h._title;
        i.role.setBody(c), i.role.setWeapon(d), i.role.setHorse(p), i.role.setWing(u), i.role.setTitle(f), i.role.setWay(3), i.role.validParts()
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.onTick, this)
    }, e.prototype.onTick = function (t) {
        var e = t.role._perc + .1;
        e >= 1 && (e = 0), t.role.perc = e
    }, e
}(BaseEUIView);
__reflect(VTBTL.prototype, "VTBTL");
var VTitleFashPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sel = -1, e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideTo(this.base.btnReturn, 30, 30)
    }, e.prototype.initView = function () {
        var t = this;
        t.addCloseListen(t.base.btnClose), t.addCloseListen(t.base.btnReturn), t.base.createTabGroup().createPageGrp(), t.base.addTab("称号", 0, 1), t.base.addTab("时装", 1, 2), t.base.listenTabClick(t.onT, t), GameGlobal.layerMgr.reg(UIConst.TITLE, VTitlePnl, t.base.pageGrp), GameGlobal.layerMgr.reg(UIConst.FASHION, VFashionPnl, t.base.pageGrp)
    }, e.prototype.onT = function (t) {
        var e = t.sort;
        this.setSel(e)
    }, e.prototype.setSel = function (t) {
        if ((0 != t || CFG_COMMOND.isOpen(CFG_COMMOND.TITLE, !0)) && (1 != t || CFG_COMMOND.isOpen(CFG_COMMOND.FASHION, !0))) {
            switch (this.sel) {
                case 0:
                    GameGlobal.layerMgr.close(UIConst.TITLE);
                    break;
                case 1:
                    GameGlobal.layerMgr.close(UIConst.FASHION)
            }
            switch (t) {
                case 0:
                    this.base.title = "称号", GameGlobal.layerMgr.open(UIConst.TITLE);
                    break;
                case 1:
                    this.base.title = "", GameGlobal.layerMgr.open(UIConst.FASHION)
            }
            this.sel = t, this.base.setTabSelBySort(t)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setSel(e)
    }, e.prototype.onClose = function () {
        this.setSel(-1)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VTitleFashPnl.prototype, "VTitleFashPnl");
var VTitleItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.skinName = "resource/eui_skins/game/title/TitleItemSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {}, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.v
        },
        set: function (t) {
            this.v = t, this.TextName.text = this.v.name, this.notice.visible = e.Noitce(t), this.v.jh ? (this.jh.source = "PYAtlas_json.jhBtn", this.TextName.textColor = 16769367) : (this.jh.source = "PYAtlas_json.jhPoint", this.TextName.textColor = 15441445)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel != t && (this._sel = t, t ? this.select.visible = !0 : this.select.visible = !1)
        },
        enumerable: !0,
        configurable: !0
    }), e.Noitce = function (t) {
        if (t.jh || 0 == t.item) return !1;
        var e = t.item[1],
            i = GameGlobal.modelBag.getItemCount(e);
        return i > 0 ? !0 : !1
    }, e
}(BaseEUIView);
__reflect(VTitleItem.prototype, "VTitleItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VTitlePnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.listAC = new eui.ArrayCollection, e.skinName = "TitleFashSkin", e
    }
    return __extends(e, t), e.prototype.guideEnable = function (t) {
        var e = this.btnJH;
        QuestGuideArrow.getIns().guideViewCenter(e)
    }, e.prototype.initView = function () {
        var t = this;
        t.des.text = "(称号提升的属性对所有角色加成)", t.role = UIRole.create(), t.partCont.addChildAt(t.role, 0), t.partCont.scaleX = t.partCont.scaleY = 1.5, DisplayUtil.popBtnStyle(t.btnSearch), t.textStr = new ImageText, t.textStr.container = t.strCont, t.textStr.charFunc = ImageText.STRFUNC, t.btnSearch.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIConst.TITLETB, 1)
        }, this), this.btnHH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnHHT, this), this.btnJH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnJHT, this), this.txtSource.addEventListener(egret.TouchEvent.TOUCH_TAP, this.srcT, this), new ScrollMove(this.btnR, this.btnL, this.list, "width"), this.list.itemRenderer = VTitleItem, this.list.dataProvider = this.listAC, this.list.addEventListener(egret.Event.CHANGE, this.onT, this), this.txtTime.visible = !1, Vo_TitleItem.init(), this.createVItem()
    }, e.prototype.srcT = function () {
        if (this.vo.src) {
            var t = CFG_ATTR.LIB_CLHQ[this.vo.src];
            CFG_ATTR.openBySrc(t)
        }
    }, e.prototype.btnHHT = function (t) {
        var e = this.list.selectedItem;
        GameGlobal.modelTitle.CG1383(e.id)
    }, e.prototype.btnJHT = function (t) {
        var e = this.list.selectedItem;
        GameGlobal.modelTitle.CG1385(e.id)
    }, e.prototype.createVItem = function () {
        Vo_TitleItem.List;
        DisplayUtil.fillDataAC(this.listAC, Vo_TitleItem.List)
    }, e.prototype.updateHhV = function () {
        this.setHhVis()
    }, e.prototype.onT = function (t) {
        var e = t.target;
        this.setSel(e.selectedIndex)
    }, e.prototype.setSel = function (t) {
        var e = this.listAC.getItemAt(t);
        e && this.onUpdate(e)
    }, e.prototype.isHH = function (t) {
        return t == GameGlobal.modelTitle.curHHId ? !0 : !1
    }, e.prototype.setAttrText = function (t) {
        if ("0" == t.attr) return void(this.lbAttr.text = "0");
        for (var e = [], i = [], o = t.attr.split(";"), n = 0; n < o.length; n++) {
            var a = o[n].split(",");
            for (var s in CFG_ATTR.LIB) a[0] == s && e.push(CFG_ATTR.LIB[s].n);
            i.push(a[1])
        }
        this.lbAttr.lineSpacing = 10, this.lbAttr.textFlow = [{
            text: e[0] + " ",
            style: {
                textColor: 5782836
            }
        }, {
            text: "+" + i[0] + "\n",
            style: {
                textColor: 1090116
            }
        }, {
            text: e[1] + " ",
            style: {
                textColor: 5782836
            }
        }, {
            text: "+" + i[1] + "\n",
            style: {
                textColor: 1090116
            }
        }, {
            text: e[2] + " ",
            style: {
                textColor: 5782836
            }
        }, {
            text: "+" + i[2] + "\n",
            style: {
                textColor: 1090116
            }
        }, {
            text: e[3] + " ",
            style: {
                textColor: 5782836
            }
        }, {
            text: "+" + i[3] + "\n",
            style: {
                textColor: 1090116
            }
        }]
    }, e.prototype.onUpdate = function (t) {
        var e = this;
        if (this.vo = t, this.setAttrText(t), e.textStr.setText("z" + t.zhanli), t.jh) this.txtwjh.visible = !1, this.isHH(t.id) ? this.setHhVis() : this.setNoHhVis();
        else {
            this.txtwjh.visible = !0, this.setNoJhVis(), this.grid.enableTip();
            var i = ConfigHelp.makeVoByArr(t.item);
            this.grid.setData(i), this.txtName.text = t.name, 0 == t.src ? this.txtSource.text = t.des : this.txtSource.textFlow = HtmlUtil.underLine(t.des), VTitleItem.Noitce(t) ? (this.jh_bg.source = "CM1_json.BT_y1_up", this.jh_red.visible = !0) : (this.jh_bg.source = "CM1_json.disabled2", this.jh_red.visible = !1)
        }
        e.role.play(700);
        var o = GameGlobal.modelRole.voMine.sceneChars[0],
            n = o._body,
            a = o._horse,
            s = o._wing,
            r = o._weapon;
        o._title;
        e.role.setWeapon(r), e.role.setHorse(a), e.role.setWing(s), e.role.setTitle(t.icon), e.role.setBody(n), e.role.setWay(3), e.role.validParts(), e.strCont.addChild(e.btnSearch)
    }, e.prototype.modelInit = function () {
        var t = this;
        if (this.createVItem(), this.indexID) {
            var e = Vo_TitleItem.getVIndexById(this.indexID);
            this.list.selectedIndex = e, this.setSel(e), setTimeout(function () {
                var i = t.list.numElements,
                    o = t.list.contentWidth / i,
                    n = o * (e + 1) - t.list.width;
                n > 0 && egret.Tween.get(t.list).to({
                    scrollH: n
                }, 500, egret.Ease.circInOut)
            }, 300)
        } else {
            var e = Vo_TitleItem.getVIndexById(GameGlobal.modelTitle.curHHId);
            e >= 0 && (this.list.selectedIndex = e, this.setSel(e))
        }
        this.showZhZhanLi(), this.CHnotice()
    }, e.prototype.showZhZhanLi = function () {
        var t = GameGlobal.modelTitle.zhZhanLi.toString(),
            e = 0;
        for (var i in GameGlobal.modelTitle.IDMap) e++;
        this.txtZhanli.textFlow = [{
            text: "称号总战力:",
            style: {
                textColor: 5782836
            }
        }, {
            text: t,
            style: {
                textColor: 1090116
            }
        }], this.txtSkin.textFlow = [{
            text: "已激活称号数:",
            style: {
                textColor: 5782836
            }
        }, {
            text: e.toString(),
            style: {
                textColor: 1090116
            }
        }]
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.indexID = void 0, e && ("number" == typeof e ? this.indexID = e : this.indexID = e.id), GameGlobal.tick.addInterv(this.onTick, 1e3, this), GameGlobal.modelTitle.on(ModelTitle.UPDATE, this.modelInit, this), GameGlobal.modelTitle.on(ModelTitle.HH, this.updateHhV, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.CHnotice, this), GameGlobal.modelTitle.CG1381()
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.onTick, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.CHnotice, this), GameGlobal.modelTitle.off(ModelTitle.UPDATE, this.modelInit, this), GameGlobal.modelTitle.off(ModelTitle.HH, this.updateHhV, this)
    }, e.prototype.CHnotice = function () {
        for (var t = Vo_TitleItem.List, e = t.length, i = !1, o = 0; e > o; o++) {
            var n = t[o];
            if (VTitleItem.Noitce(n)) {
                i = !0;
                break
            }
        }
        var a = this.list.selectedIndex;
        this.listAC.refresh(), this.list.selectedIndex = a;
        var s = GameGlobal.layerMgr.getView(UIConst.TITLEFASH);
        s && (i ? s.base.setNoticBySort(0, !0) : s.base.setNoticBySort(0, !1))
    }, e.prototype.setNoJhVis = function () {
        this.p1.visible = !1, this.p2.visible = !0, this.btnHH.visible = !1
    }, e.prototype.setNoHhVis = function () {
        this.p1.visible = !1, this.p2.visible = !1, this.btnHH.visible = !0
    }, e.prototype.setHhVis = function () {
        this.p1img.visible = !0, this.p1btn.visible = !1, this.p1.visible = !0, this.p2.visible = !1, this.btnHH.visible = !1
    }, e.prototype.onTick = function (t) {
        var e = egret.getTimer();
        if (t.vo)
            if (t.vo.jh && 0 != t.vo.time) {
                var i = Vo_TitleItem.getTimeById(t.vo.id),
                    o = i - (e - GameGlobal.modelTitle.timeUDT) / 1e3 >> 0;
                t.txtTime.visible = 0 >= o ? !1 : !0, t.txtTime.text = "倒计时:" + DateUtil.getHMSBySecond2(o)
            } else t.txtTime.visible = !1;
        else t.txtTime.visible = !1
    }, e
}(BaseEUIView);
__reflect(VTitlePnl.prototype, "VTitlePnl");
var ModelTuJian = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.enableMap = {}, e.noticDirty = 1, e.allNoticCache = !1, e
    }
    return __extends(e, t), e.prototype.getEffID = function (t) {
        var e = this.getVo(t),
            i = 0;
        return e && (i = e.curBuffID), i
    }, e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1480, this.GC_LBINIT, this), e.regHand(1482, this.GC_LIBENABLE, this), e.regHand(1484, this.GC_PYRET, this), e.regHand(1486, this.GC_UPRET, this)
    }, e.prototype.GC_LBINIT = function (t, e) {
        for (var i = 0, o = e.readShort(); o > i; i++) {
            var n = new VoTuJian;
            n.id = e.readInt(), n.lv = e.readByte(), n.pyExp = e.readShort(), n.str = e.readInt(), n.initLib(), t.enableMap[n.id] = n
        }
    }, e.prototype.enableTJ = function (t) {
        var e = CFG_TuJian.LIB_TJ[t];
        if (2 == e.t) {
            if (!GameGlobal.modelPet.getPetVoByPetID(t).isEnable) {
                var i = CFG_Pet.PETLIB[t];
                return void ViewAlert.show(Lang.reTxt("灵兽{0}尚未激活,是否前往灵兽面板激活?", i.n), function () {
                    GameGlobal.layerMgr.open(UIConst.PET)
                })
            }
        } else if (!VoHuoban.isEnable(t)) {
            var o = CFG_HUOBAN1.LIB[t];
            return void ViewAlert.show(Lang.reTxt("仙神{0}尚未激活,是否前往伙伴面板激活?", o.n), function () {
                GameGlobal.layerMgr.open(UIConst.HUOBANPAGE);
                var t = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE);
                if (t) {
                    var e = VoHuoban.findHB(o.id);
                    e && t.setSelHuoban(e)
                }
            })
        }
        this.CG_ENABLE(t)
    }, e.prototype.CG_ENABLE = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1481, e)
    }, e.prototype.GC_LIBENABLE = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = new VoTuJian;
            n.id = i.readInt(), n.str = i.readInt(), t.enableMap[n.id] = n, n.initLib(), t.invalidNotic(), t.notify(e.MSG_UPDATE, 1)
        }
    }, e.prototype.CG_PY = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1483, e)
    }, e.prototype.GC_PYRET = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = t.getVo(n);
            a && (a.pyExp = i.readShort(), a.str = i.readInt(), t.invalidNotic(), t.notify(e.MSG_UPDATE, 2))
        }
    }, e.prototype.CG_UP = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1485, e)
    }, e.prototype.GC_UPRET = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = t.getVo(n);
            a && (a.pyExp = 0, a.lv = i.readByte(), a.str = i.readInt(), a.initLib(), t.invalidNotic(), t.notify(e.MSG_UPDATE, 4))
        }
    }, e.prototype.getVo = function (t) {
        var e = this.enableMap[t];
        return e
    }, e.prototype.getTJList = function (t) {
        var e = [],
            i = CFG_TuJian.LIB_TJ;
        for (var o in i) i[o].t == t && e.push(i[o]);
        return e
    }, e.prototype.isEnable = function (t) {
        var e = this.enableMap[t];
        return null != e
    }, e.prototype.getStar = function (t) {
        var e = this.enableMap[t];
        return e ? e.lv : 0
    }, e.caculatePYAttr = function (t, e, i, o) {
        void 0 === o && (o = null);
        var n = 100 * t + e,
            a = CFG_TuJian.LIB_SX[n];
        o || (o = {});
        for (var s = 0; e > s; s++)
            for (var r = 100 * t + s, l = CFG_TuJian.getTJPYAttrArr(r), a = CFG_TuJian.LIB_SX[r], h = 0, c = l.length; c > h; h++) {
                var p = l[h][0],
                    u = l[h][1];
                o[p] || (o[p] = 0), o[p] += u / 100 * a.jy >> 0
            }
        for (var d = CFG_TuJian.getTJPYAttrArr(n), h = 0, c = d.length; c > h; h++) {
            var p = d[h][0],
                f = d[h][1] * i;
            o[p] || (o[p] = 0), o[p] += f / 100 >> 0
        }
        return o
    }, e.caculateSXAttr = function (t, e, i) {
        void 0 === i && (i = null), i || (i = Util.getTempObj());
        for (var o = CFG_TuJian.getEnableAttrArr(t), n = 0, a = o.length; a > n; n++) {
            var s = o[n][0],
                r = o[n][1];
            i[s] || (i[s] = 0), i[s] += r
        }
        var l = 100 * t + e;
        if (CFG_TuJian.LIB_SX[l])
            for (var h = 1; e >= h; h++) {
                var c = 100 * t + h,
                    p = CFG_TuJian.getTJSXAttrArr(c);
                if (0 != p)
                    for (var u = 0, d = p.length; d > u; u++) {
                        var s = p[u][0],
                            r = p[u][1];
                        i[s] || (i[s] = 0), i[s] += r
                    }
            }
        return i
    }, e.getStarText = function (t, e) {
        for (var i = CFG_TuJian.LIB_TJ[e].xjsx, o = "", n = 1; i >= n; n++) o += t >= n ? "3" : "0";
        return o
    }, e.setNameLB = function (t, e) {
        var i = CFG_TuJian.LIB_TJ[t];
        e.text = i.n, e.textColor = Color.getColorInt(i.q)
    }, e.prototype.canEnable = function (t) {
        var e, i = CFG_TuJian.LIB_TJ[t],
            o = this.enableMap[t];
        return e = o ? !1 : 2 == i.t ? GameGlobal.modelPet.getPetVoByPetID(t).isEnable : VoHuoban.isEnable(t)
    }, e.prototype.invalidNotic = function () {
        this.noticDirty |= 1
    }, e.prototype.noticNow = function () {
        this.allNoticCache = !0, this.noticDirty = 0, this.notify(e.MSG_UPDATE)
    }, e.prototype.checkAllNotics = function () {
        if (GameGlobal.modelRole.voMine.level < 60) return !1;
        if (this.noticDirty) {
            var t = CFG_TuJian.LIB_TJ,
                e = !1;
            for (var i in t) {
                var o = t[i],
                    n = this.enableMap[o.id];
                if (n) {
                    if (n.checkPY()) {
                        e = !0;
                        break
                    }
                    if (n.checkSX()) {
                        e = !0;
                        break
                    }
                } else if (this.canEnable(o.id)) {
                    e = !0;
                    break
                }
            }
            this.allNoticCache = e, this.noticDirty = 0
        } else e = this.allNoticCache;
        return e
    }, e.prototype.checkTypeNotic = function (t) {
        var e = CFG_TuJian.LIB_TJ,
            i = !1;
        for (var o in e) {
            var n = e[o];
            if (this.checkIDNotic(n) && n.t == t) {
                i = !0;
                break
            }
        }
        return i
    }, e.prototype.checkIDNotic = function (t) {
        var e = !1,
            i = this.enableMap[t.id];
        return i ? (i.checkPY() && (e = !0), i.checkSX() && (e = !0)) : this.canEnable(t.id) && (e = !0), e
    }, e.MSG_UPDATE = "up", e
}(BaseModel);
__reflect(ModelTuJian.prototype, "ModelTuJian");
var VHBTuJianPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.libType = 3, e
    }
    return __extends(e, t), e
}(VTuJianPage);
__reflect(VHBTuJianPage.prototype, "VHBTuJianPage");
var VoTuJian = function () {
    function t() {
        this.sxStar = 0, this.lv = 0, this.pyExp = 0, this.str = 0, this.curBuffID = 0
    }
    return t.prototype.initLib = function () {
        var t = 100 * this.id + this.lv;
        this.cfg = CFG_TuJian.LIB_TJ[this.id];
        var e = this.xjCFG = CFG_TuJian.LIB_SX[t];
        this.curBuffID = this.xjCFG.sjbuff;
        this.nxtXJCFG = CFG_TuJian.LIB_SX[t + 1];
        e && "0" != e.parm ? this.sxCost = Util.strToIntArr(e.parm) : this.sxCost = null, "0" != this.xjCFG.num ? this.pyCost = Util.strToIntArr(this.xjCFG.num) : this.pyCost = null
    }, t.prototype.getPYAttr = function (t) {
        void 0 === t && (t = null);
        var e = ModelTuJian.caculatePYAttr(this.id, this.lv, this.pyExp, t);
        return e
    }, t.prototype.checkPY = function () {
        if (this.pyCost) var t = this.pyExp < this.xjCFG.jy && GameGlobal.modelBag.getItemCount(this.pyCost[0][1]) >= this.pyCost[0][2];
        else t = !1;
        return t
    }, t.prototype.checkSX = function () {
        return this.checkSXProg() && this.checkSXCond2()
    }, t.prototype.checkSXProg = function () {
        if (this.nxtXJCFG) {
            return 2 == this.cfg.t && this.pyExp < this.xjCFG.jy ? !1 : !0
        }
        return !1
    }, t.prototype.checkSXCond2 = function () {
        if (this.nxtXJCFG) {
            var t = this.sxCost;
            if (!t) return !0;
            var e = GameGlobal;
            switch (t[0][0]) {
                case 1:
                    return 2 == e.modelPet.getPetVoByPetID(this.id).petcfg.q;
                case 2:
                    return e.modelPet.getPetVoByPetID(this.id).level >= t[0][1];
                case 3:
                    return e.modelPet.getPetVoByPetID(this.id).petcfg.d >= t[0][1];
                case 4:
                    var i = VoHuoban.findHB(this.id);
                    if (!i) return !1;
                    var o;
                    return i.voStar && i.voStar.cfg.hblevel > 0 && (o = i.voStar.cfg), o && o.hblevel >= t[0][1]
            }
        }
        return !1
    }, t.prototype.getSXCondPYHtml = function () {
        if (2 == this.cfg.t) var t = (this.sxCost, "(" + this.pyExp + "/" + this.xjCFG.jy + ")"),
            e = CFG_TuJian.getTJName(this.id),
            i = Lang.reTxt("{0}当前培养进度满{1}", e, t);
        return i
    }, t.prototype.getSXCond2Html = function () {
        var t, e = this.sxCost,
            i = CFG_TuJian.getTJName(this.id);
        if (e)
            for (var o = 0; o < e.length; o++) {
                var n = e[o][0];
                switch (n) {
                    case 1:
                        t = Lang.reTxt("拥有宠物变异{0}", i);
                        break;
                    case 2:
                        break;
                    case 3:
                        t = 2 == this.cfg.t ? Lang.reTxt("{0}进阶到{1}阶", i, e[o][1]) : Lang.reTxt("errorCFG:{0}", i);
                        break;
                    case 4:
                        t = Lang.reTxt("{0}达到{1}星", i, e[o][1])
                }
            }
        return t
    }, t.prototype.getSXCondStr = function () {
        if (!this.nxtXJCFG) return "星级已满";
        var t = this.getSXCondPYHtml(),
            e = this.getSXCond2Html();
        return t && e ? this.fillFinHtml(0, "1:" + t) + "\n" + this.fillFinHtml(1, "2:" + e) : t ? this.fillFinHtml(0, "1:" + t) : this.fillFinHtml(1, "1:" + e)
    }, t.prototype.fillFinHtml = function (t, e) {
        return 0 == t ? this.checkSXProg() ? HtmlUtil.fontNoSize(e, Color.UIGREEN2_STR) : HtmlUtil.fontNoSize(e, Color.UIRED_STR) : this.checkSXCond2() ? HtmlUtil.fontNoSize(e + "(已达成)", Color.UIGREEN2_STR) : HtmlUtil.fontNoSize(e + "(未达成)", Color.UIRED_STR)
    }, t
}();
__reflect(VoTuJian.prototype, "VoTuJian");
var VTuJianAttrTerm = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "LTTextItemRender", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.lb.size = 22, this.lb.textColor = 6835267
    }, Object.defineProperty(e.prototype, "data", {
        set: function (t) {
            this.lb.text = t
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VTuJianAttrTerm.prototype, "VTuJianAttrTerm", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VTuJianDetail = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.openTJID = 10001, e.skinName = "TuJianDetail", e
    }
    return __extends(e, t), e.createImgTxt = function (t) {
        var e = t.imgStars = new ImageText;
        e.makeContainer(), e.container.y = 300, e.setCharFunc(ImageText.STARFUNC), e.container.scaleX = e.container.scaleY = .6, t.addChild(e.container);
        var i = t.imgStr = new ImageText;
        i.makeContainer(), i.container.y = 140, i.setCharFunc(ImageText.STRFUNC), t.addChild(i.container)
    }, e.prototype.initView = function () {
        var t = this;
        t.imgStars = new ImageText;
        e.createImgTxt(this), t.base.title = "图鉴详情", t.addCloseListen(t.base.btnReturn), t.addCloseListen(t.base.btnClose), t.btnPY.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onPYT, t), t.btnUp.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onUpT, t), this.curAttrListAc = new eui.ArrayCollection, this.curAttrList.dataProvider = this.curAttrListAc, this.curAttrList.itemRenderer = VTuJianAttrTerm
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.openTJID = e, this.update(), GameGlobal.modelTuJian.on(ModelTuJian.MSG_UPDATE, this.update, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelTuJian.on(ModelTuJian.MSG_UPDATE, this.update, this)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.update = function () {
        var t = this,
            e = t.openTJID,
            i = GameGlobal.modelTuJian,
            o = i.getVo(e),
            n = CFG_TuJian.LIB_TJ[e];
        ModelTuJian.setNameLB(e, t.lbName), 2 == n.t ? DisplayUtil.addBy(t.btnPY, t.btnGrp) : DisplayUtil.remove(t.btnPY), t.imgHead.source = CFG_TuJian.getIcoUrl(e), t.imgStars.setText(ModelTuJian.getStarText(o.lv, e)), t.imgStars.container.x = 350 - .6 * t.imgStars.totalWid / 2, t.imgStr.setText("z" + o.str), t.imgStr.container.x = 350 - t.imgStr.totalWid / 2;
        var a = ModelTuJian.caculateSXAttr(e, o.lv);
        t.curAttrListAc.removeAll();
        for (var s in a) {
            var r = CFG_ATTR.LIB[s];
            if (r.sb > 1) var l = r.n + "+" + a[s] / 100 + "%";
            else l = r.n + "+" + a[s];
            t.curAttrListAc.addItem(l)
        }
        if (o.xjCFG.sjbuff) {
            var h = CFG_Buff.LIB[o.xjCFG.sjbuff];
            t.buf.text = h.miaoshu
        } else t.buf.text = "";
        var c = ModelTuJian.caculatePYAttr(e, o.lv, o.pyExp);
        t.updateTerm(c, 102, t.p102), t.updateTerm(c, 103, t.p103), t.updateTerm(c, 105, t.p105), t.updateTerm(c, 106, t.p106), t.btnPY.setNoticeVis(o.checkPY()), t.btnUp.setNoticeVis(o.checkSX())
    }, e.prototype.updateTerm = function (t, e, i) {
        var o = CFG_ATTR.LIB[e],
            n = t[e];
        n ? o.sb > 1 ? i.text = o.n + "+" + t[e] / 100 + "%" : i.text = o.n + "+" + t[e] : i.text = ""
    }, e.prototype.onPYT = function () {
        GameGlobal.layerMgr.open(UIConst.TUJIANPY, this.openTJID)
    }, e.prototype.onUpT = function () {
        GameGlobal.layerMgr.open(UIConst.TUJIANUP, this.openTJID)
    }, e
}(BaseEUIView);
__reflect(VTuJianDetail.prototype, "VTuJianDetail");
var VTuJianItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "TuJianItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        var t = this.imgStars = new ImageText;
        t.container = this, t.gap = 5, t.makeContainer(), this.addChild(t.container), t.container.x = 10, t.container.y = 120, t.container.scaleX = t.container.scaleY = .6, t.setCharFunc(ImageText.STARFUNC);
        var e = egret.TouchEvent.TOUCH_TAP;
        this.btn0.addEventListener(e, this.onBtnT, this), this.btn1.addEventListener(e, this.onBtnT, this), this.btn2.addEventListener(e, this.onBtnT, this), this.btnEnable.addEventListener(e, this.onEnableT, this), this.btn0.va = "info", this.btn1.va = "star", this.btn2.va = "py"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            var e = this,
                i = GameGlobal.modelTuJian,
                o = i.getVo(t.id);
            e._data = t, i.isEnable(t.id) ? e.currentState = "nor" : e.currentState = "disable", 2 == t.t ? DisplayUtil.addBy(e.btn2, e.btnGrp) : DisplayUtil.remove(e.btn2), ModelTuJian.setNameLB(t.id, e.lbName);
            var n = ModelTuJian.getStarText(i.getStar(t.id), t.id);
            e.imgStars.setText(n), e.imgStars.container.x = 77 - .6 * e.imgStars.totalWid / 2, e.imgHead.source = CFG_TuJian.getIcoUrl(t.id), o ? (e.lbStr.text = "" + o.str, 2 == t.t ? (e.btn1.setNoticeVis(o.checkSX()), e.btn2.setNoticeVis(o.checkPY())) : e.btn1.setNoticeVis(o.checkSX())) : (e.btnEnable.setNoticeVis(i.canEnable(t.id)), e.lbStr.text = Lang.reTxt("激活提升{0}战力", ConfigHelp.caculateStrByIntArr(CFG_TuJian.getEnableAttrArr(t.id))))
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onBtnT = function (t) {
        var e = t.currentTarget,
            i = this._data.id;
        switch (e.va) {
            case "info":
                GameGlobal.layerMgr.open(UIConst.TUJIANDETAIL, i);
                break;
            case "star":
                GameGlobal.layerMgr.open(UIConst.TUJIANUP, i);
                break;
            case "py":
                GameGlobal.layerMgr.open(UIConst.TUJIANPY, i)
        }
    }, e.prototype.onEnableT = function () {
        GameGlobal.modelTuJian.enableTJ(this._data.id)
    }, e
}(BaseEUIView);
__reflect(VTuJianItem.prototype, "VTuJianItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var CFG_DAYDAYFL = function () {
    function t() {}
    return t
}();
__reflect(CFG_DAYDAYFL.prototype, "CFG_DAYDAYFL");
var VTuJianPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curSt = -1, e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this,
            e = t.base;
        e.createTabGroup(), GameGlobal.layerMgr.reg(UIConst.TUJIANP1, VTuJianPage, e), GameGlobal.layerMgr.reg(UIConst.TUJIANP2, VHBTuJianPage, e), e.addTab("灵兽", 0, 1), e.addTab("仙神", 1, 2), e.title = "图鉴", t.addCloseListen(e.btnClose), t.addCloseListen(e.btnReturn), t.base.listenTabClick(t.onTbtnT, t)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setCurSt(0), this.updateNotic(), GameGlobal.modelTuJian.on(ModelBag.MSG_CHANGE, this.onTJC, this), GameGlobal.modelTuJian.on(ModelTuJian.MSG_UPDATE, this.onTJC, this)
    }, e.prototype.onClose = function () {
        this.setCurSt(-1), GameGlobal.modelTuJian.off(ModelBag.MSG_CHANGE, this.onTJC), GameGlobal.modelTuJian.off(ModelTuJian.MSG_UPDATE, this.onTJC, this)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.setCurSt = function (t) {
        var e = this,
            i = GameGlobal;
        switch (e._curSt) {
            case 0:
                i.layerMgr.close(UIConst.TUJIANP1);
                break;
            case 1:
                i.layerMgr.close(UIConst.TUJIANP2)
        }
        switch (t) {
            case 0:
                i.layerMgr.open(UIConst.TUJIANP1);
                break;
            case 1:
                i.layerMgr.open(UIConst.TUJIANP2)
        }
        e._curSt = t, e.base.setTabSelIdx(t)
    }, e.prototype.onTbtnT = function (t) {
        this.setCurSt(t.sort)
    }, e.prototype.onTJC = function () {
        this.updateNotic()
    }, e.prototype.updateNotic = function () {
        GameGlobal.tick.addInterv(this._un, 30, this, !0)
    }, e.prototype._un = function (t) {
        var e = GameGlobal.modelTuJian;
        t.base.setNoticByIndex(0, e.checkTypeNotic(2)), t.base.setNoticByIndex(1, e.checkTypeNotic(3))
    }, e
}(BaseEUIView);
__reflect(VTuJianPnl.prototype, "VTuJianPnl");
var VTuJianPY = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.openTJID = 10001, e.skinName = "TuJianPY", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this;
        VTuJianDetail.createImgTxt(this), t.base.title = "图鉴培养", t.addCloseListen(t.base.btnClose), t.addCloseListen(t.base.btnReturn), t.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onBtnT, t)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.openTJID = e, this.update(), GameGlobal.modelTuJian.on(ModelTuJian.MSG_UPDATE, this.update, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelTuJian.off(ModelTuJian.MSG_UPDATE, this.update)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.update = function () {
        var t = this,
            e = t.openTJID,
            i = GameGlobal.modelTuJian,
            o = i.getVo(e),
            n = 100 * e + o.lv,
            a = CFG_TuJian.LIB_SX[n];
        ModelTuJian.setNameLB(e, t.lbName);
        var s = ModelTuJian.caculatePYAttr(e, o.lv, o.pyExp);
        if (t.imgHead.source = CFG_TuJian.getIcoUrl(e), t.imgStars.setText(ModelTuJian.getStarText(o.lv, e)), t.imgStars.container.x = 350 - .6 * t.imgStars.totalWid / 2, t.imgStr.setText("z" + o.str), t.imgStr.container.x = 350 - t.imgStr.totalWid / 2, t.updateTerm(s, 102, t.a102), t.updateTerm(s, 103, t.a103), t.updateTerm(s, 105, t.a105), t.updateTerm(s, 106, t.a106), o.pyCost && o.pyExp < a.jy) {
            ConfigHelp.makeStrGrids(a.num, t.gridArr, 332, 676, t, !0, 0, .5), t.lbpb.text = o.pyExp + "/" + a.jy;
            var r = Math.max(0, Math.min(1, o.pyExp / a.jy));
            t.imgpb.width = 536 * r;
            var l = GameGlobal.modelBag.getItemCount(o.pyCost[0][1]);
            t.lbNum.text = l + "/" + o.pyCost[0][2]
        } else t.imgpb.width = 536, t.lbpb.text = "进度已满", t.lbNum.text = "", ConfigHelp.makeStrGrids("", t.gridArr, 346, 676, t, !0, 0, .5);
        t.btn.setNoticeVis(o.checkPY())
    }, e.prototype.updateTerm = function (t, e, i) {
        var o = CFG_ATTR.LIB[e];
        o.sb > 1 ? i.text = o.n + "+" + t[e] / 100 + "%" : i.text = o.n + "+" + t[e]
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelTuJian,
            e = t.getVo(this.openTJID);
        if (!e.nxtXJCFG) return void ViewText.text("星级已满，不能提升");
        var i = 100 * this.openTJID + e.lv,
            o = CFG_TuJian.LIB_SX[i];
        return o && e.pyExp >= o.jy ? void ViewText.text("升星后可继续培养") : void(ConfigHelp.checkEnough1(e.pyCost[0]) ? t.CG_PY(this.openTJID) : ViewText.text("物品不足"))
    }, e
}(BaseEUIView);
__reflect(VTuJianPY.prototype, "VTuJianPY");
var VTuJianUpgrade = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.openTJID = 10001, e.skinName = "TuJianUpgrade", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this;
        t.base.title = "图鉴升星", t.addCloseListen(t.base.btnReturn), t.addCloseListen(t.base.btnClose), t.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, t.onBtnT, t), VTuJianDetail.createImgTxt(this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.openTJID = e, this.update(), GameGlobal.modelTuJian.on(ModelTuJian.MSG_UPDATE, this.update, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelTuJian.off(ModelTuJian.MSG_UPDATE, this.update)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.update = function () {
        var t = this,
            e = t.openTJID,
            i = GameGlobal.modelTuJian,
            o = i.getVo(e);
        CFG_TuJian.LIB_TJ[e];
        ModelTuJian.setNameLB(e, this.lbName);
        var n = ModelTuJian.caculateSXAttr(e, o.lv),
            a = t.getAttrText(n);
        if (o.xjCFG.sjbuff) {
            var s = CFG_Buff.LIB[o.xjCFG.sjbuff];
            a = a + "\n" + s.miaoshu
        }
        if (t.cAttr.text = a, o.nxtXJCFG) {
            var r = ModelTuJian.caculateSXAttr(e, o.lv + 1),
                l = t.getAttrText(r);
            if (o.nxtXJCFG.sjbuff) {
                var h = CFG_Buff.LIB[o.nxtXJCFG.sjbuff];
                l = l + "\n" + h.miaoshu
            }
            t.nAttr.text = l
        } else t.lbCond.text = "星级已满", t.nAttr.text = "星级已满";
        t.imgHead.source = CFG_TuJian.getIcoUrl(e), t.imgStars.setText(ModelTuJian.getStarText(o.lv, e)), t.imgStars.container.x = 350 - .6 * t.imgStars.totalWid / 2, t.imgStr.setText("z" + o.str), t.imgStr.container.x = 350 - t.imgStr.totalWid / 2;
        var c = o.getSXCondStr();
        c.indexOf("<font>") ? t.lbCond.textFlow = HtmlUtil.parse(c) : t.lbCond.text = c, t.btn.setNoticeVis(o.checkSX())
    }, e.prototype.getAttrText = function (t) {
        var e = CFG_ATTR.LIB,
            i = 0,
            o = Util.getTempArr();
        for (var n in t) {
            var a = e[n];
            a.sb > 1 ? o[i] = a.n + "+" + t[n] / 100 + "%" : o[i] = a.n + "+" + t[n], i++
        }
        var s = o.join("\n");
        return s
    }, e.prototype.onBtnT = function () {
        var t = GameGlobal.modelTuJian,
            e = t.getVo(this.openTJID);
        return e.nxtXJCFG ? e.checkSX() ? void GameGlobal.modelTuJian.CG_UP(this.openTJID) : void ViewText.text("条件未达成,无法提升") : void ViewText.text("星级已满，不能提升")
    }, e
}(BaseEUIView);
__reflect(VTuJianUpgrade.prototype, "VTuJianUpgrade");
var ModelVIP = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1452, this.GC1452, this), e.regHand(1454, this.GC1454, this), e.regHand(1456, this.GC1456, this), e.regHand(3890, this.GC_TASTEVIP, this)
    }, e.prototype.CG1451 = function () {
        this.sendSocket(1451, this.getBytes())
    }, e.prototype.CG1453 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(1453, e)
    }, e.prototype.GC1452 = function (t, i) {
        var o = VoVip.inst;
        o.level = i.readInt(), o.exp = i.readInt();
        for (var n = i.readShort(), a = 0; n > a; a++) {
            var s = i.readByte(),
                r = i.readByte();
            o.update(s, r)
        }
        t.notify(e.msg_data)
    }, e.prototype.GC1454 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte(),
                a = i.readByte();
            VoVip.inst.update(n, a), t.notify(e.msg_got);
            var s = GameGlobal.layerMgr.getView(UIConst.HEADUI);
            s && s.vipInfo()
        }
    }, e.prototype.GC1456 = function (t, i) {
        var o = GameGlobal.modelRole.voMine,
            n = VoVip.inst;
        n.level = i.readByte(), n.exp = i.readInt(), o.vip = n.level, t.notify(e.msg_data);
        var a = GameGlobal.layerMgr.getView(UIConst.HEADUI);
        a && a.vipInfo()
    }, e.prototype.GC_TASTEVIP = function (t, e) {
        var i = (e.readByte(), e.readInt()),
            o = VoVip._tasteVipServRemain;
        if (VoVip._tasteVipServRemain = i, VoVip._tasteVipServDt = egret.getTimer(), i) {
            if (!GameGlobal.modelBuff.getBuff(1)) {
                var n = new VoBuff;
                n.id = 1, n.icon = "vip3Buff_png", GameGlobal.modelBuff.addBuff(n)
            }
        } else {
            var n = GameGlobal.modelBuff.getBuff(1);
            n && GameGlobal.modelBuff.removeBuff(n), o && !i && GameGlobal.layerMgr.open(UIConst.TASTEVIPOVERTIME)
        }
    }, e.prototype.CG_GETTASTEVIP = function () {
        var t = this.getBytes();
        this.sendSocket(3891, t)
    }, e.msg_data = "msg_data", e.msg_got = "msg_got", e
}(BaseModel);
__reflect(ModelVIP.prototype, "ModelVIP");
var ViewVIP = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.curLv = 1, e.gridArr = [], e.skinName = "resource/eui_skins/game/vip/ViewVIPSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "VIP", this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.prob = new ProgressB, this.prob.size = new egret.Point(360, 30), this.prob.offSet = new egret.Point(1, 1), this.prob.setVal(0, 0), this.propGp.addChild(this.prob), this.btnL.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCh, this), this.btnR.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCh, this), this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnRecharge.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onRecharge, this), this.btnGet.label = "领取", this.btnRecharge.label = "立即充值", DisplayUtil.popBtnStyle(this.btnL), DisplayUtil.popBtnStyle(this.btnR), DisplayUtil.popBtnStyle(this.btnGet), DisplayUtil.popBtnStyle(this.btnRecharge), this.scroller.scrollPolicyH = eui.ScrollPolicy.OFF, this.imgTxtLeft = new ImageText, this.imgTxtLeft.charFunc = ImageText.VIEWBIGVIPFUNC, this.imgTxtLeft.container = this.leftVipGp, this.imgTxtRight = new ImageText, this.imgTxtRight.charFunc = ImageText.VIEWBIGVIPFUNC, this.imgTxtRight.container = this.rightVipGp, this.imgTeQuan = new ImageText, this.imgTeQuan.charFunc = ImageText.VIEWBIGVIPFUNC, this.imgTeQuan.container = this.vipTQCont, this.imgTeQuanLit = new ImageText, this.imgTeQuanLit.charFunc = ImageText.VIEWLITVIPFUNC, this.imgTeQuanLit.container = this.VIPTQContLit, platform.canRechage || DisplayUtil.remove(this.btnRecharge)
    }, e.prototype.onRecharge = function () {
        platform.openRecharge()
    }, e.prototype.onHand = function (t) {
        return VoVip.isTasteVip() ? void ViewText.text("成为充值VIP后可领取该奖励") : 0 == this.btnGet.enabled ? void ViewText.text("vip等级还不够") : void GameGlobal.modelVip.CG1453(this.curLv)
    }, e.prototype.onCh = function (t) {
        var e = this,
            i = t.currentTarget,
            o = e.curLv;
        switch (i) {
            case e.btnL:
                o--;
                break;
            case e.btnR:
                o++
        }
        e.curLv = Math.min(Math.max(o, 1), VoVip.getFullVip()), e.updateVIPInfo()
    }, e.prototype.onCZ = function (t) {}, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e && (this.curLv = e), GameGlobal.modelVip.on(ModelVIP.msg_data, this.onUpdate, this), GameGlobal.modelVip.on(ModelVIP.msg_got, this.updateVIPInfo, this), GameGlobal.modelVip.CG1451()
    }, e.prototype.onUpdate = function () {
        var t = VoVip.inst;
        this.imgTxtLeft.setText("V" + t.level);
        var e = VoVip.LIB[t.level + 1];
        if (e) {
            var i = e.topup;
            this.prob.setVal(i, t.exp), this.imgTxtRight.setText("V" + (t.level + 1));
            var o = t.level + 1;
            if (VoVip.isTasteVip() && (o = GameGlobal.modelRole.voMine.vip, this.updateVIPInfo()), platform.canRechage) var n = "再充值<font color='#fe0000'>{0}</font>元宝即可成为{1}";
            else var n = "再使用<font color='#fe0000'>{0}</font>尊贵元宝即可成为{1}";
            this.txtDes.textFlow = HtmlUtil.parse(Lang.reTxt(n, i - t.exp, HtmlUtil.color("VIP" + (t.level + 1), "#fe0000")))
        } else {
            var a = VoVip.LIB[VoVip.getFullVip()];
            this.prob.setVal(t.exp, a.topup), this.imgTxtRight.setText("M"), this.txtDes.textColor = 16646144, this.txtDes.text = "当前VIP已满级", o = t.level
        }
        this.curLv <= 1 && (this.curLv = Math.max(o, 1)), this.updateVIPInfo()
    }, e.prototype.updateVIPInfo = function () {
        var t = this.curLv;
        1 == t ? (this.btnL.visible = !1, this.btnR.visible = !0) : t == VoVip.getFullVip() ? (this.btnR.visible = !1, this.btnL.visible = !0) : this.btnL.visible = this.btnR.visible = !0, this.imgTeQuanLit.setText("V" + t + "T"), this.imgTeQuan.setText("V" + t);
        var e = VoVip.LIB[t].bewrite;
        this.txtVipDes.textFlow = HtmlUtil.parse(e), ConfigHelp.makeStrGrids(VoVip.LIB[t].jl, this.gridArr, 0, 0, this.cont2);
        var i = VoVip.inst.getInfo(t);
        if (i) switch (i.status) {
            case 0:
                this.btnGet.enabled = !1, this.iconGot.visible = !1, this.btnGet.setNoticeVis(!1);
                break;
            case 1:
                this.btnGet.enabled = !0, this.btnGet.visible = !0, this.iconGot.visible = !1, VoVip.isTasteVip() || this.btnGet.setNoticeVis(!0);
                break;
            case 2:
                this.btnGet.visible = !1, this.iconGot.visible = !0, this.btnGet.setNoticeVis(!1)
        } else this.iconGot.visible = !1, this.btnGet.enabled = !1, this.btnGet.visible = !0, this.btnGet.setNoticeVis(!1);
        this.LNotice.visible = this.RNotice.visible = !1;
        for (var o = VoVip.inst.infos.getList(), n = 0; t > n && o.length > 0; n++)
            if (1 == o[n].status && !VoVip.isTasteVip()) {
                this.LNotice.visible = !0;
                break
            } for (n = t; n < o.length; n++)
            if (1 == o[n].status && !VoVip.isTasteVip()) {
                this.RNotice.visible = !0;
                break
            }
    }, e.prototype.onClose = function () {
        GameGlobal.modelVip.off(ModelVIP.msg_data, this.onUpdate, this), GameGlobal.modelVip.off(ModelVIP.msg_got, this.updateVIPInfo, this)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.guide = function () {
        QuestGuideArrow.getIns().guideViewCenter(this.btnGet)
    }, e
}(BaseEUIView);
__reflect(ViewVIP.prototype, "ViewVIP");
var VTasteVip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "TasteVip", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose).addCloseListen(this.rect), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btn.label = "开启体验之旅"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.tick.addInterv(this.onTick, 1e3, this), this.updateTime(), this.btn.showEff(1.6, 1.4), GuideMgr.getIns().setZhiXianQueueByName("TASTEVIP"), IconUtil.setIconSrc(this.imgT1, "tastevip3con_png"), IconUtil.setIconSrc(this.imgT2, "shouldbeVip3_png")
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.onTick, this), GameGlobal.modelVip.CG_GETTASTEVIP(), this.btn.hideEff(), IconUtil.setIconSrc(this.imgT1, null), IconUtil.setIconSrc(this.imgT2, null)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onBtnT = function () {
        this.closeHandler()
    }, e.prototype.onTick = function (t) {
        t.updateTime()
    }, e.prototype.updateTime = function () {
        this.lbRemain.$setText("")
    }, e.prototype.guideVip = function () {
        QuestGuideArrow.getIns().guideViewCenter(this.btn)
    }, e
}(BaseEUIView);
__reflect(VTasteVip.prototype, "VTasteVip");
var VTasteViping = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "TasteViping", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.rect).addCloseListen(this.btnClose)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.lbAttr.text = "生命+4700，攻击+520，防御+210", this.lbJump.text = "主线关卡、诸天封神、锁妖塔、封魔录", GameGlobal.tick.addInterv(this.onTick, 1e3, this), this.updateTime()
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.onTick, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onTick = function (t) {
        t.updateTime()
    }, e.prototype.updateTime = function () {
        var t = VoVip.getTasteVipRemainSec();
        this.lbRemain.$setText("剩余时间:" + DateUtil.getMSBySec3(t))
    }, e
}(BaseEUIView);
__reflect(VTasteViping.prototype, "VTasteViping");
var VTasteVipOvertime = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "TasteVipOvertime", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.lb.text = "属性永久加成,关卡一键跳过,招募半价,应有尽有", this.lb1.textFlow = HtmlUtil.parse("花小钱大享受！" + HtmlUtil.colorSize("永久拥有", "#e0072b", 26) + "\nvip直达v3，享" + HtmlUtil.colorSize("有钱人", "#e0072b", 26) + "特权"), this.lb1.lineSpacing = 15, this.btn.label = "前往充值"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.img1, "vip3Cost_png"), this.btn.showEff(1.6, 1.4)
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.img1, null), this.btn.hideEff()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onBtnT = function () {
        this.closeHandler(), VoVip.isTasteVipOutTime = !1, GameGlobal.layerMgr.open(UIConst.SC5BEI)
    }, e.prototype.guide = function () {
        QuestGuideArrow.getIns().guideViewCenter(this.btn)
    }, e
}(BaseEUIView);
__reflect(VTasteVipOvertime.prototype, "VTasteVipOvertime");
var VUseV3 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "UseV3Skin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.btn.label = "立即使用"
    }, e.prototype.onT = function () {
        var t = this.vo;
        GameGlobal.modelBag.CG_USEITEM_207(t.id, 1, 0)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this.vo = VoItem.create();
        i.init(1261), this.grid.data = i, this.grid.enableTip(), this.grid.isShowEff(!0), IconUtil.setIconSrc(this.imgT1, "lbv3_png"), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateItem, this)
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.imgT1, null), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateItem, this)
    }, e.prototype.updateItem = function () {
        var t = GameGlobal.modelBag.getItemCount(this.vo.id);
        t || this.closeHandler()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.guide = function () {
        QuestGuideArrow.getIns().guideViewCenter(this.btn)
    }, e
}(BaseEUIView);
__reflect(VUseV3.prototype, "VUseV3");
var VoVip = function () {
    function t() {
        this.level = 0, this.exp = 0, this.infos = new CommondMap, this.initLib()
    }
    return Object.defineProperty(t, "inst", {
        get: function () {
            return this._inst || (this._inst = new t)
        },
        enumerable: !0,
        configurable: !0
    }), t.prototype.initLib = function () {
        var e = t.LIB;
        for (var i in e) {
            var o = new Vipinfo;
            o.level = parseInt(i), o.status = 0, this.infos.add(o, i)
        }
    }, t.prototype.getInfo = function (t) {
        return this.infos.getByKey(t)
    }, t.prototype.update = function (t, e) {
        var i = this.infos.getByKey(t);
        i && (i.status = e)
    }, t.getFullVip = function () {
        if (this._maxVipLevel > 0) return this._maxVipLevel;
        var t = 0;
        for (var e in this.LIB) t = this.LIB[e].vip;
        return this._maxVipLevel = t
    }, t.isTasteVip = function () {
        return this._tasteVipServRemain > 0
    }, t.getTasteVipRemainSec = function () {
        var t = 0;
        return this._tasteVipServRemain > 0 && (t = this._tasteVipServRemain - (App.serverTimestamp - this._tasteVipServDt) / 1e3 >> 0), 0 > t ? 0 : t
    }, t.isTasteVipOutTime = !1, t._tasteVipServRemain = 0, t
}();
__reflect(VoVip.prototype, "VoVip");
var Vipinfo = function () {
    function t() {}
    return t
}();
__reflect(Vipinfo.prototype, "Vipinfo");
var ModelVipGifts = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(3402, this.GC3402, this), e.regHand(3404, this.GC3404, this)
    }, e.prototype.CG3401 = function () {
        var t = this.getBytes();
        this.sendSocket(3401, t)
    }, e.prototype.GC3402 = function (t, i) {
        Vo_VipGiftsItem.create();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte(),
                s = i.readByte(),
                r = Vo_VipGiftsItem.Map[a];
            r && (r.hasBuy = s)
        }
        t.notify(e.UPDATE)
    }, e.prototype.CG3403 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3403, e)
    }, e.prototype.GC3404 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                var n = i.readByte(),
                    a = Vo_VipGiftsItem.Map[n];
                a.hasBuy++, t.notify(e.UPDATE);
                break;
            case 2:
                ViewText.text("购买达到上限");
                break;
            case 3:
                platform.askOpenRecharge(function () {
                    GameGlobal.layerMgr.close(UIConst.VIPGIFTS)
                });
                break;
            case 4:
                ViewText.text("背包已满")
        }
    }, e.UPDATE = "UPDATE", e
}(BaseModel);
__reflect(ModelVipGifts.prototype, "ModelVipGifts");
var Vo_VipGiftsItem = function () {
    function t() {
        this.hasBuy = 0
    }
    return t.create = function () {
        if (0 == t.List.length) {
            t.List = [];
            var e = CFG_VipRiChangLiBao.LIB,
                i = 0;
            for (var o in e) {
                var n = e[o],
                    a = new t;
                a.index = i, a.cfg = n, t.List.push(a), t.Map[o] = a, i++
            }
        }
    }, t.List = [], t.Map = {}, t
}();
__reflect(Vo_VipGiftsItem.prototype, "Vo_VipGiftsItem");
var VVipGifts = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VipGiftsSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.list.itemRenderer = VVipGiftsItem, this.data = new eui.ArrayCollection, this.list.dataProvider = this.data, Vo_VipGiftsItem.create()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), this.lbvip.text = "vip" + GameGlobal.modelRole.voMine.vip, GameGlobal.tick.addInterv(this.onTimeTick, 1e3, this), GameGlobal.modelVipGifts.on(ModelVipGifts.UPDATE, this.update, this), GameGlobal.modelVipGifts.CG3401()
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.onTimeTick), GameGlobal.modelVipGifts.off(ModelVipGifts.UPDATE, this.update, this)
    }, e.prototype.update = function () {
        Vo_VipGiftsItem.List.sort(this.sortFun), DisplayUtil.fillDataAC(this.data, Vo_VipGiftsItem.List)
    }, e.prototype.sortFun = function (t, e) {
        var i = (t.hasBuy < t.cfg.cs ? 0 : 100) + t.cfg.id,
            o = (e.hasBuy < e.cfg.cs ? 0 : 100) + e.cfg.id;
        return i - o
    }, e.prototype.onTimeTick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(12);
        if (e) {
            var i = e.getChildByID(42);
            if (i) {
                var o = i.getRemainSec();
                if (o >= 0) return void(t.lbTime.text = DateUtil.getHMSBySecond2(o))
            }
        }
        t.closeHandler()
    }, e
}(BaseEUIView);
__reflect(VVipGifts.prototype, "VVipGifts");
var VVipGiftsItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "VipGiftsItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t;
            var e = t.cfg;
            this.bg.source = t.index % 2 == 0 ? "CM2_json.bg2" : "CM2_json.bg3", this.lbtxt.text = e.mc, ConfigHelp.makeStrGrids(e.jl, this.grids, 0, 0, this.container, !0), this.lbzk.text = e.bq + "折";
            var i = Util.parseIntStr(e.xj),
                o = Util.parseIntStr(e.yj),
                n = 32 == i[0] ? "MainScreen_json.byl" : "MainScreen_json.bm_yb";
            this.imgyj.source = n, this.imgyj.source = n, this.lbyj.text = "原价:" + o[2], this.lbxj.text = "现价:" + i[2];
            var a = 32 == i[0] ? GameGlobal.modelRole.voMine.bYuanbao : GameGlobal.modelRole.voMine.yuanbao;
            a >= i[2] ? this.btn.setNoticeVis(!0) : this.btn.setNoticeVis(!1);
            var s = GameGlobal.modelRole.voMine.vip;
            s >= e.viplv ? (this.btn.enabled = !0, t.hasBuy >= e.cs ? (this.imgGet.visible = !0, this.btn.visible = !1, this.lbcanbuy.textFlow = HtmlUtil.parse(HtmlUtil.color("限购(" + t.hasBuy + "/" + e.cs + ")", "#dd3e1e"))) : (this.imgGet.visible = !1, this.btn.visible = !0, this.lbcanbuy.textFlow = HtmlUtil.parse("限购(" + t.hasBuy + "/" + e.cs + ")"))) : (this.btn.setNoticeVis(!1), this.btn.enabled = !1, this.imgGet.visible = !1, this.btn.visible = !0, this.lbcanbuy.textFlow = HtmlUtil.parse(HtmlUtil.color("vip" + e.viplv + "可购买", "#dd3e1e")))
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onT = function () {
        this.btn.enabled && GameGlobal.modelVipGifts.CG3403(this.vo.cfg.id)
    }, e
}(eui.ItemRenderer);
__reflect(VVipGiftsItem.prototype, "VVipGiftsItem");
var ViewAlert = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/AlertSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOKT, this), this.btnCancel.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCancelT, this), this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCancelT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.arg = e, this.onOK = e.onOK, this.onCancel = e.onCancel, this.onCloseFun = e.onClose, this.btnOk.label = e.oktext, this.btnCancel.label = e.canceltext, this.lbTitle.text = e.title, this.caller = e.caller, e.text && (e.text.indexOf("<font") >= 0 ? this.lb.textFlow = HtmlUtil.HTMLPARSER.parser(e.text) : this.lb.text = e.text), 1 & e.option ? this.btnOk.parent || this.btnGroup.addChild(this.btnOk) : this.btnOk.parent && this.btnOk.parent.removeChild(this.btnOk), 2 & e.option ? this.btnCancel.parent || this.btnGroup.addChildAt(this.btnCancel, 0) : this.btnCancel.parent && this.btnCancel.parent.removeChild(this.btnCancel)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.onCloseFun && this.onCloseFun()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onOKT = function (t) {
        var e;
        this.onOK && (e = this.onOK.apply(this.caller, t)), e || this.closeHandler()
    }, e.prototype.onCancelT = function (t) {
        var e;
        this.onCancel && (e = this.onCancel.apply(this.caller, t)), e || this.closeHandler()
    }, e.show = function (t, e, i, o, n, a, s, r, l) {
        void 0 === e && (e = null), void 0 === i && (i = 3), void 0 === o && (o = null), void 0 === n && (n = null), void 0 === a && (a = null), void 0 === s && (s = null), void 0 === r && (r = null), void 0 === l && (l = null), n || (n = "提    示"), a || (a = "确定"), s || (s = "取消");
        var h = {
            text: t,
            title: n,
            onOK: e,
            option: i,
            caller: o,
            onCancel: r,
            oktext: a,
            canceltext: s,
            onClose: l
        };
        GameGlobal.layerMgr.open(UIConst.ALERT, h)
    }, e.OK = 1, e.CANCEL = 2, e.OKANDCANCEL = 3, e
}(PopUpUI);
__reflect(ViewAlert.prototype, "ViewAlert");
var ViewItemFloatTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.idelIndices = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], e.items = [], e.touchChildren = e.touchEnabled = !1, e.isInit = !0, e
    }
    return __extends(e, t), e.checkShowEquipID = function (t) {
        var e = CFG_Equip.LIB[t];
        if (!e || e.q < 5) return !1;
        var i = GameGlobal.layerMgr.getView(UIConst.FLOATITEMTIP),
            o = e.n;
        return i && i.parent || (GameGlobal.layerMgr.open(UIConst.FLOATITEMTIP, o), i = GameGlobal.layerMgr.getView(UIConst.FLOATITEMTIP)), i.showEquip(e), !0
    }, e.prototype.onframe = function (t, e) {
        for (var i = t.items, o = (egret.getTimer(), e / 33 * 5), n = i.length - 1; n >= 0; n--) {
            var a = i[n],
                s = -30 - 80 * n,
                r = 2 + .001 * (2e3 - a.lifeTime) * o;
            a.$getY() - r > s ? a.$setY(a.$getY() - r) : a.$setY(s), a.lifeTime += e, 0 == a.state ? a.lifeTime >= 1e3 && (a.state = 1) : 1 == a.state ? a.lifeTime >= 3e3 && (a.state = 2) : 2 == a.state && (a.alpha -= .05, a.lifeTime >= 4e3 && (i.pop(), t.removeChild(a), a.dispose(), 0 == t.items.length && GameGlobal.layerMgr.close(UIConst.VIEWTEXT)))
        }
    }, e.prototype.onItemComplete = function (t) {
        this.items.splice(this.items.indexOf(t), 1), 0 == this.items.length && GameGlobal.layerMgr.close(UIConst.VIEWTEXT), this.removeChild(t), t.dispose(), this.idelIndices.unshift(t.tarindex), this.needSort = !0
    }, e.prototype.sortFunc = function (t, e) {
        return t - e
    }, e.prototype.getIdleIndex = function () {
        return this.idelIndices.length ? (this.needSort && (this.idelIndices.sort(this.sortFunc), this.needSort = !1), this.idelIndices.shift()) : -1
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.tick.addInterv(this.onframe, 1, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.onframe)
    }, e.prototype.onSize = function () {
        this.y = .8 * GameGlobal.stage.stageHeight >> 0, this.x = GameGlobal.stage.stageWidth - 450 >> 1
    }, e.prototype.showEquip = function (t) {
        if (t.q) var e = Color.OR_STR;
        else e = Color.UIRED_STR;
        var i = ModelEquip.qualityName[t.q],
            o = HtmlUtil.parse(Lang.reTxt("恭喜获得<font color='{0}'>{1}{2}</font>", e, i, t.n)),
            n = VoEquip.create();
        n.init(t.id);
        var a = FloatItem.create();
        a.showFlow(o, n), a.y = 0, this.items.unshift(a), this.$doAddChild(a, 0, !1)
    }, e
}(BaseEUIView);
__reflect(ViewItemFloatTip.prototype, "ViewItemFloatTip");
var FloatItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.tarindex = 0, e.cChild(), e
    }
    return __extends(e, t), e.create = function () {
        var t = this.POOL;
        return t.length ? t.pop() : new e
    }, e.prototype.cChild = function () {
        this.bg = new eui.Image("CM2_json.nChosen"), this.bg.scale9Grid = new egret.Rectangle(68, 39, 128, 31);
        var t = this.tf = new egret.TextField;
        this.tf.size = 22, this.tf.x = 130, this.addChild(this.bg), this.addChild(t), this.tf.textColor = Color.UIBLACKTEXT, this.bg.height = 110, this.bg.width = 450, this.tf.height = 110, this.tf.verticalAlign = "middle", this.grid = new ViewGrid, this.grid.x = 20, this.grid.y = 10, this.addChild(this.grid)
    }, e.prototype.showFlow = function (t, e) {
        this.lifeTime = this.state = 0, this.alpha = 1, this.tf.textFlow = t, this.grid.setData(e)
    }, e.prototype.dispose = function () {
        e.POOL.push(this)
    }, e.POOL = [], e
}(egret.DisplayObjectContainer);
__reflect(FloatItem.prototype, "FloatItem");
var ViewPrompt = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/Prompt.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOKT, this), this.btnCancel.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCancelT, this), this.cb.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onCBT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.arg = e, this.onOK = e.onOK, this.onCancel = e.onCancel, this.onCloseFun = e.onClose, this.btnOk.label = e.oktext, this.btnCancel.label = e.canceltext, this.lbTitle.text = e.title, this.caller = e.caller, this.cb.selected = e.cbDefaultSel, this.cb.text = e.cbText, e.text && (e.text.indexOf("<font") >= 0 ? this.lb.textFlow = HtmlUtil.HTMLPARSER.parser(e.text) : this.lb.text = e.text), 1 & e.option ? this.btnOk.parent || this.btnGroup.addChild(this.btnOk) : this.btnOk.parent && this.btnOk.parent.removeChild(this.btnOk), 2 & e.option ? this.btnCancel.parent || this.btnGroup.addChildAt(this.btnCancel, 0) : this.btnCancel.parent && this.btnCancel.parent.removeChild(this.btnCancel)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.onCloseFun && this.onCloseFun()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onOKT = function (t) {
        var e;
        this.onOK && (e = this.onOK.call(this.caller, t, this.cb.selected)), e || this.closeHandler()
    }, e.prototype.onCancelT = function (t) {
        var e;
        this.onCancel && (e = this.onCancel.apply(this.caller, t)), e || this.closeHandler()
    }, e.prototype.onCBT = function (t) {
        this.cb.selected = !this.cb.selected
    }, e.show = function (t, e, i, o, n, a, s, r, l, h, c) {
        void 0 === e && (e = null), void 0 === i && (i = 3), void 0 === o && (o = null), void 0 === n && (n = null), void 0 === a && (a = !1), void 0 === s && (s = null), void 0 === r && (r = null), void 0 === l && (l = null), void 0 === h && (h = null), void 0 === c && (c = null), s || (s = "提    示"), r || (r = "确定"), n || (n = "不再提示"), l || (l = "取消");
        var p = {
            text: t,
            title: s,
            cbText: n,
            cbDefaultSel: a,
            onOK: e,
            option: i,
            caller: o,
            onCancel: h,
            oktext: r,
            canceltext: l,
            onClose: c
        };
        GameGlobal.layerMgr.open(UIConst.PROMPT, p)
    }, e.OK = 1, e.CANCEL = 2, e.OKANDCANCEL = 3, e
}(BaseEUIView);
__reflect(ViewPrompt.prototype, "ViewPrompt");
var ViewStrUp = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.curst = 0, e.percArg = {}, e.yArg = {}, e.alphaArg = {
            alpha: .2
        }, e.veryOldValue = 0, e.oldValue = 1e3, e.isInit = !0, e.setTouched(!1), e.init11(), e
    }
    return __extends(e, t), e.prototype.init11 = function () {
        var t = this;
        t.bmbg = new eui.Image, t.bmbg.source = "num_json.zl", t.addChild(t.bmbg), t.text = new Bitmaptext, t.text.container = t, t.text.fx = 83, t.text.fy = 0, t.text.charFunc = Bitmaptext.STRFUNC, t.gt = new Bitmaptext, t.gt.container = t, t.gt.charFunc = Bitmaptext.STRFUNC, t.gt.makeContainer(), t.addChild(t.gt.container)
    }, e.prototype.onOpen = function (t) {
        1 == this.curst ? egret.Tween.removeTweens(this) : 2 == this.curst ? (this.gt.container.visible = !1, egret.Tween.removeTweens(this.gt.container)) : 3 == this.curst && egret.Tween.removeTweens(this), this.curst = 0, this.oldValue = t, this.veryOldValue || (this.veryOldValue = t), this.vo = GameGlobal.modelRole.voMine, this.numperc = 0, this.alpha = 1, this.y = .5 * GameGlobal.stage.stageHeight, this.x = 180, this.gt.container.visible = !1;
        var e = this.percArg;
        e.numperc = 1, egret.Tween.get(this).to(e, 600).call(this.onComp1, this), this.curst++
    }, e.prototype.onClose = function () {
        this.curst = 0, this.veryOldValue = 0
    }, e.prototype.onComp1 = function () {
        var t = this.vo.str - this.veryOldValue;
        this.gt.container.visible = !0, this.gt.setText("+" + t), this.gt.container.x = 140, this.gt.container.y = -20;
        var e = this.yArg;
        e.y = this.gt.container.y - 20, egret.Tween.get(this.gt.container).to(e, 200, egret.Ease.circOut).wait(200).call(this.onComp2, this), this.curst++
    }, e.prototype.onComp2 = function () {
        egret.Tween.get(this).to(this.alphaArg, 200).call(this.onComp, this), this.curst++
    }, e.prototype.onComp = function () {
        this.closeHandler()
    }, Object.defineProperty(e.prototype, "numperc", {
        get: function () {
            return this._numperc
        },
        set: function (t) {
            this._numperc = t;
            var e = (this.vo.str - this.oldValue) * t + this.oldValue >> 0;
            e > this.vo.str && (e = this.vo.str), this.text.setText(String(e))
        },
        enumerable: !0,
        configurable: !0
    }), e
}(BaseEUIView);
__reflect(ViewStrUp.prototype, "ViewStrUp");
var ViewText = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.idelIndices = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], e.items = [], e.touchChildren = e.touchEnabled = !1, e.isInit = !0, e
    }
    return __extends(e, t), e.text = function (t, e) {
        if (void 0 === e && (e = 13421772), t) {
            var i = GameGlobal.layerMgr.getView(UIConst.VIEWTEXT);
            i && i.parent || (GameGlobal.layerMgr.open(UIConst.VIEWTEXT, t), i = GameGlobal.layerMgr.getView(UIConst.VIEWTEXT)), i.showText(t, e)
        }
    }, e.iconText = function (t, e, i) {
        if (void 0 === i && (i = 13421772), e) {
            var o = GameGlobal.layerMgr.getView(UIConst.VIEWTEXT);
            o && o.parent || (GameGlobal.layerMgr.open(UIConst.VIEWTEXT, e), o = GameGlobal.layerMgr.getView(UIConst.VIEWTEXT)), o.showIconText(t, e, i)
        }
    }, e.htmlText = function (t, e) {
        void 0 === e && (e = 13421772);
        var i = GameGlobal.layerMgr.getView(UIConst.VIEWTEXT);
        i && i.parent || (GameGlobal.layerMgr.open(UIConst.VIEWTEXT, t), i = GameGlobal.layerMgr.getView(UIConst.VIEWTEXT)), i.showHtmlText(t)
    }, e.prototype.showText = function (t, e) {
        if (!(this.items.length >= 15)) {
            var i = WarnItem.create();
            i.showText(t, e);
            var o = GameGlobal.stage;
            i.y = 0, i.x = .5 * (o.stageWidth - i.bg.width), this.addChild(i), this.items.unshift(i)
        }
    }, e.prototype.showIconText = function (t, e, i) {
        if (!(this.items.length >= 15)) {
            var o = WarnItem.create();
            o.showIconText(t, e, i);
            var n = GameGlobal.stage;
            o.y = 0, o.x = .5 * (n.stageWidth - o.bg.width), this.addChild(o), this.items.unshift(o)
        }
    }, e.prototype.showHtmlText = function (t) {
        if (!(this.items.length >= 15)) {
            var e = WarnItem.create();
            e.showHtmlText(t);
            var i = GameGlobal.stage;
            e.y = 0, e.x = .5 * (i.stageWidth - e.bg.width), this.$doAddChild(e, 0, !1), this.items.unshift(e)
        }
    }, e.prototype.onframe = function (t) {
        var e = this.items,
            i = egret.getTimer(),
            o = i - this._last;
        this._last = i;
        for (var n = o / 33 * 5, a = e.length - 1; a >= 0; a--) {
            var s = e[a],
                r = -30 - 45 * a,
                l = 2 + .001 * (2e3 - s.lifeTime) * n;
            s.y - l > r ? s.y -= l : s.y = r, s.lifeTime += o, 0 == s.state ? s.lifeTime >= 1e3 && (s.state = 1) : 1 == s.state ? s.lifeTime >= 1500 && (s.state = 2) : 2 == s.state && (s.alpha -= .05, s.lifeTime >= 2e3 && (e.pop(), this.removeChild(s), s.dispose(), 0 == this.items.length && GameGlobal.layerMgr.close(UIConst.VIEWTEXT)))
        }
    }, e.prototype.onItemComplete = function (t) {
        this.items.splice(this.items.indexOf(t), 1), 0 == this.items.length && GameGlobal.layerMgr.close(UIConst.VIEWTEXT), this.removeChild(t), t.dispose(), this.idelIndices.unshift(t.tarindex), this.needSort = !0
    }, e.prototype.sortFunc = function (t, e) {
        return t - e
    }, e.prototype.getIdleIndex = function () {
        return this.idelIndices.length ? (this.needSort && (this.idelIndices.sort(this.sortFunc), this.needSort = !1), this.idelIndices.shift()) : -1
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this._last = egret.getTimer(), this.addEventListener(egret.Event.ENTER_FRAME, this.onframe, this)
    }, e.prototype.onClose = function () {
        this.removeEventListener(egret.Event.ENTER_FRAME, this.onframe, this)
    }, e.prototype.onSize = function () {
        this.y = .55 * GameGlobal.stage.stageHeight >> 0
    }, e
}(BaseEUIView);
__reflect(ViewText.prototype, "ViewText");
var WarnItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.tarindex = 0, e.cChild(), e
    }
    return __extends(e, t), e.create = function () {
        var t = e.POOL;
        return t.length ? t.pop() : new e
    }, e.prototype.cChild = function () {
        this.ico = new eui.Image, this.ico.width = 35, this.ico.height = 35, this.ico.y = 6, this.ico.x = 10, this.bg = new eui.Image("CM1_json.bm_textTipBG"), this.bg.scale9Grid = new egret.Rectangle(63, 8, 138, 22);
        var t = this.tf = new egret.TextField;
        this.tf.size = 24, this.addChild(this.bg), this.addChild(t)
    }, e.prototype.showText = function (t, e) {
        DisplayUtil.remove(this.ico), this.lifeTime = this.state = 0, this.alpha = 1, this.tf.textColor = e, this.tf.text = t, this.bg.width = Math.max(150, this.tf.textWidth + 60), this.bg.height = 42, this.tf.x = (this.bg.width - this.tf.textWidth) / 2, this.tf.y = 8
    }, e.prototype.showHtmlText = function (t) {
        DisplayUtil.remove(this.ico), this.lifeTime = this.state = 0, this.alpha = 1, this.tf.textFlow = HtmlUtil.HTMLPARSER.parser(t), this.bg.width = Math.max(150, this.tf.textWidth + 60), this.bg.height = 42, this.tf.x = (this.bg.width - this.tf.textWidth) / 2, this.tf.y = 8
    }, e.prototype.showIconText = function (t, e, i) {
        this.ico.$parent || DisplayUtil.addBy(this.ico, this, 1), this.ico.source = t, this.lifeTime = this.state = 0, this.alpha = 1, this.tf.textColor = i, this.tf.text = e, this.bg.width = Math.max(150, this.tf.textWidth + 80), this.bg.height = 42, this.tf.x = (this.bg.width - this.tf.textWidth) / 2 + 10, this.tf.y = 8
    }, e.prototype.dispose = function () {
        e.POOL.push(this)
    }, e.POOL = [], e
}(egret.DisplayObjectContainer);
__reflect(WarnItem.prototype, "WarnItem");
var ViewWenHao = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewWenHaoSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.txt.lineSpacing = 10, this.addCloseListen(this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.txt.size = e.size, this.txt.textColor = e.color, e.text && (e.text.indexOf("<font") >= 0 ? this.txt.textFlow = HtmlUtil.parse(e.text) : this.txt.text = e.text)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.show = function (t, e, i) {
        void 0 === e && (e = 22), void 0 === i && (i = 13023146);
        var o = {
            text: t,
            color: i,
            size: e
        };
        GameGlobal.layerMgr.open(UIConst.VIEWWENHAO, o)
    }, e
}(BaseEUIView);
__reflect(ViewWenHao.prototype, "ViewWenHao");
var ModelWeekender = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(3440, i.GC3440, i), e.regHand(3442, i.GC3442, i), e.regHand(3444, i.GC3444, i), e.regHand(3446, i.GC3446, i), e.regHand(3448, i.GC3448, i)
    }, e.prototype.GC3440 = function (t, i) {
        e.time = i.readInt(), e.retime = egret.getTimer(), t.notify(e.MSG_OPEN)
    }, e.prototype.CG3441 = function () {
        var t = this.getBytes();
        this.sendSocket(3441, t)
    }, e.prototype.GC3442 = function (t, i) {
        var o = Vo_WeekLB.List[e.weekNum];
        if (o)
            for (var n = o.length, a = 0; n > a; a++) {
                var s = o[a];
                s.cs = 0
            }
        var r = i.readShort();
        console.log("!!!!!!!!!!!!!周末狂欢买过的礼包长度", r);
        for (var a = 0; r > a; a++) {
            var l = i.readInt(),
                h = i.readByte(),
                s = Vo_WeekLB.Map[l];
            s && (s.cs = h), console.log("!!!!!!!!!!!!!周末狂欢买过的礼包id", l)
        }
        e.weekNum = i.readByte(), console.log("!!!!!!!!!!!!!周末狂欢买过的礼包期数", e.weekNum), t.notify(e.MSG_UPDATE)
    }, e.prototype.GC3444 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readInt(),
                a = Vo_WeekLB.Map[n];
            a && a.cs++, t.notify(e.MSG_UPDATE)
        }
    }, e.prototype.CG3445 = function () {
        var t = this.getBytes();
        this.sendSocket(3445, t)
    }, e.prototype.GC3446 = function (t, i) {
        Vo_WeekLC.create(), Vo_WeekLC.yb = i.readInt();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte(),
                s = Vo_WeekLC.Map[a];
            s.isget = !0
        }
        t.notify(e.MSG_UPDATE)
    }, e.prototype.CG3447 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3447, e)
    }, e.prototype.GC3448 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte(),
                a = Vo_WeekLC.Map[n];
            return a.isget = !0, void t.notify(e.MSG_UPDATE)
        }
        var s = ["", "", "充值额度不足", "已领取", "背包已满"][o];
        ViewText.text(s)
    }, e.MSG_OPEN = "MSG_OPEN", e.MSG_UPDATE = "MSG_UPDATE", e.time = 0, e.retime = 0, e.weekTip = !0, e.weekfristTip = !0, e.weekNum = 0, e
}(BaseModel);
__reflect(ModelWeekender.prototype, "ModelWeekender");
var Vo_WeekLB = function () {
    function t() {
        this.cs = 0
    }
    return t.create = function () {
        if (!this.List) {
            this.List = {};
            var e = CFG_WEEKENDER.LIB1;
            for (var i in e) {
                var o = new t;
                o.id = parseInt(i), o.cfg = e[i];
                var n = o.cfg.sysId,
                    a = o.cfg.qishu;
                if (GameGlobal.loginArg.platform == n) {
                    var s = this.List[a];
                    s || (s = [], this.List[a] = s), s.push(o), this.Map[o.cfg.spid] = o
                }
            }
            console.log("!!!!!!!!!!周末礼包", t.List)
        }
    }, t.Map = {}, t.fristTip = !0, t
}();
__reflect(Vo_WeekLB.prototype, "Vo_WeekLB");
var Vo_WeekLC = function () {
    function t() {
        this.isget = !1
    }
    return t.create = function () {
        if (!(this.List.length > 0)) {
            var e = 0,
                i = CFG_WEEKENDER.LIB2;
            for (var o in i) {
                var n = new t;
                n.cfg = i[o], this.List.push(n), this.Map[n.cfg.id] = n, n.index = e, e++
            }
        }
    }, t.Sort = function () {
        t.List.sort(this.sortFun)
    }, t.sortFun = function (t, e) {
        var i = (t.isget ? 1e3 : 0) + t.cfg.id,
            o = (e.isget ? 1e3 : 0) + e.cfg.id;
        return i - o
    }, t.Notice = function () {
        for (var t = this.yb, e = this.List, i = 0; i < e.length; i++) {
            var o = e[i];
            if (t >= o.cfg.czed && !o.isget) return !0
        }
        return !1
    }, t.List = [], t.Map = {}, t.yb = 0, t
}();
__reflect(Vo_WeekLC.prototype, "Vo_WeekLC");
var VWeekender = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.uil = [UIConst.WEEKLB, UIConst.DAIRYANSWER, UIConst.VCLFB, UIConst.ZDFBPAGE, UIConst.EXPGIFT, UIConst.WEEKLC], e.cfgl = [0, CFG_COMMOND.DAIRYANSWER, CFG_COMMOND.CAILIAOFB, CFG_COMMOND.ZDFB, CFG_COMMOND.EXPGIFT, 0], e.btns = [], e.ranl = [], e.rol = [], e.skinName = "WeekenderSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), GameGlobal.layerMgr.reg(UIConst.WEEKLB, VWeekLB, GameGlobal.layerMgr.UI_MainMiddle, 1), GameGlobal.layerMgr.reg(UIConst.WEEKLC, VWeekLC, GameGlobal.layerMgr.UI_MainMiddle, 1), this.btn0.label = this.btn5.label = "点击查看", this.lbdes.textFlow = HtmlUtil.parse("每个礼包限购" + HtmlUtil.color("1", "#10a244") + "次");
        for (var t = 0; 6 > t; t++) {
            var e = this["btn" + t];
            DisplayUtil.popBtnStyle(e), this.btns.push(e), e.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
        }
    }, e.prototype.onT = function (t) {
        var e = t.currentTarget,
            i = this.btns.indexOf(e);
        if (-1 != i && CFG_COMMOND.isOpen(this.cfgl[i], !0)) {
            if (1 == i) {
                var o = GameGlobal.layerMgr,
                    n = VoAnswer.actLeftime,
                    a = VoAnswer.progressNum;
                return void(n > 0 ? ViewText.text("活动尚未开启,请准时参加") : VoAnswer.refTitleTime >= 0 ? (o.open(UIConst.DAIRYANSWER, "st2"), this.closeHandler()) : a >= 0 ? (o.open(UIConst.DAIRYANSWER, "st1"), this.closeHandler()) : ViewText.text("活动尚未开启,请准时参加"))
            }
            GameGlobal.layerMgr.open(this.uil[i]), i > 0 && 5 > i && this.closeHandler()
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), ModelWeekender.weekfristTip = !1;
        var i = GameGlobal.layerMgr.getView(UIConst.LEFTUI);
        i && i.weekRedT(), this.btn0.setNoticeVis(Vo_WeekLB.fristTip), this.setEff(), this.tick(this), GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.tick.addInterv(this.playEff, 1, this), this.upNotice(), GameGlobal.modelWeekender.on(ModelWeekender.MSG_UPDATE, this.upNotice, this), GameGlobal.modelWeekender.CG3445()
    }, e.prototype.upNotice = function () {
        var t = Vo_WeekLC.Notice();
        this.btn5.setNoticeVis(t)
    }, e.prototype.setEff = function () {
        this.ranl = [];
        for (var t = 0; 4 > t; t++) {
            var e = Math.random() > .5 ? 1 : -1;
            this.ranl.push(e);
            var i = .1 * Math.random() + .1;
            this.rol.push(i);
            var o = this.btns[t + 1];
            o.rotation = 0
        }
    }, e.prototype.playEff = function (t) {
        for (var e = 1; 5 > e; e++) {
            var i = t.btns[e],
                o = t.ranl[e - 1],
                n = t.rol[e - 1];
            i.rotation += o * n, Math.abs(i.rotation) >= 5 && (t.ranl[e - 1] = -o)
        }
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.tick, this), GameGlobal.tick.removeInterv(this.playEff, this), GameGlobal.modelWeekender.off(ModelWeekender.MSG_UPDATE, this.upNotice, this)
    }, e.prototype.tick = function (t) {
        var e = egret.getTimer(),
            i = ModelWeekender.time - (e - ModelWeekender.retime) / 1e3 >> 0;
        i > 0 ? t.lbtime.textFlow = HtmlUtil.parse("剩余时间:" + HtmlUtil.color(DateUtil.getHMSBySecond2(i), "#10a244")) : (ViewText.text("活动已结束"), t.closeHandler())
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VWeekender.prototype, "VWeekender");
var VWeekenderTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ShouChongTip", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.bg.source = "weekender_json.bg3", this.btn.label = "前往活动", this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this;
        i.cont.scaleX = i.cont.scaleY = 0, egret.Tween.get(i.cont).to({
            scaleX: 1,
            scaleY: 1
        }, 500, egret.Ease.cubicInOut), this.remainSec = 15, GameGlobal.tick.addInterv(this.onTick, 1e3, this), GameGlobal.modelsevenlogin.on(ModelSevenLogin.GOTOVER, this.onSize, this), GameGlobal.modelBattle.on(ModelBattle.MSG_BATTLE_BEGIN, this.onBtlBegin, this)
    }, e.prototype.onClose = function () {
        egret.Tween.removeTweens(this.cont), GameGlobal.modelsevenlogin.off(ModelSevenLogin.GOTOVER, this.onSize, this), GameGlobal.modelBattle.off(ModelBattle.MSG_BATTLE_BEGIN, this.onBtlBegin, this), GameGlobal.tick.removeInterv(this.onTick, this), this.closeTip()
    }, e.prototype.closeHand = function () {
        var t = this;
        egret.Tween.get(t.cont).to({
            scaleX: 0,
            scaleY: 0
        }, 500, egret.Ease.cubicInOut).call(t.closeHandler, t)
    }, e.prototype.closeTip = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.LEFTUI);
        t && egret.Tween.get(t.btnWeek).to({
            alpha: .5,
            scaleX: .97,
            scaleY: .97
        }, 200, egret.Ease.backOut).to({
            alpha: .95,
            scaleX: 1,
            scaleY: 1
        }, 200, egret.Ease.backOut).to({
            alpha: .7,
            scaleX: .98,
            scaleY: .98
        }, 150, egret.Ease.backOut).to({
            alpha: 1,
            scaleX: .99,
            scaleY: .99
        }, 150, egret.Ease.backOut).to({
            alpha: .8,
            scaleX: .99,
            scaleY: .99
        }, 100, egret.Ease.backOut).to({
            alpha: 1,
            scaleX: 1,
            scaleY: 1
        }, 100, egret.Ease.backOut).to({
            alpha: .8,
            scaleX: .995,
            scaleY: .995
        }, 50, egret.Ease.backOut).to({
            alpha: 1,
            scaleX: 1,
            scaleY: 1
        }, 50, egret.Ease.backOut)
    }, e.prototype.onSize = function () {
        this.cont.anchorOffsetY = this.skin.height / 2;
        var t = GameGlobal.layerMgr.getView(UIConst.LEFTUI);
        if (this.x = 160, t) {
            var e = t.btnWeek;
            if (e.parent) return this.y = GameGlobal.stage.stageHeight - 560 - (425 - e.y), void(this.x = e.x < 10 ? 80 : 160)
        }
        this.y = GameGlobal.stage.stageHeight - 480 - 340 - this.cont.anchorOffsetY
    }, e.prototype.onBtlBegin = function () {
        GameGlobal.modelBattle.curBattleType != ModelBattle.BT_GUANQIAMONSTER && this.closeHand()
    }, e.prototype.onBtnT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btn:
                GameGlobal.layerMgr.open(UIConst.WEEKENDER)
        }
        this.closeHand()
    }, e.prototype.onTick = function (t) {
        t.remainSec--, t.remainSec <= 0 && t.closeHandler()
    }, e
}(BaseEUIView);
__reflect(VWeekenderTip.prototype, "VWeekenderTip");
var VWeekLB = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WeekLBSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.data = new eui.ArrayCollection, this.list.itemRenderer = VWeekLBItem, this.list.dataProvider = this.data
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), Vo_WeekLB.fristTip = !1;
        var i = GameGlobal.layerMgr.getView(UIConst.WEEKENDER);
        i && i.btn0.setNoticeVis(Vo_WeekLB.fristTip), Vo_WeekLB.create(), this.tick(this), GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.modelWeekender.on(ModelWeekender.MSG_UPDATE, this.update, this), GameGlobal.modelWeekender.CG3441()
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.tick, this), GameGlobal.modelWeekender.off(ModelWeekender.MSG_UPDATE, this.update, this)
    }, e.prototype.update = function () {
        var t = Vo_WeekLB.List[ModelWeekender.weekNum];
        t && DisplayUtil.fillDataAC(this.data, t)
    }, e.prototype.tick = function (t) {
        var e = egret.getTimer(),
            i = ModelWeekender.time - (e - ModelWeekender.retime) / 1e3 >> 0;
        i > 0 ? t.lbtime.text = DateUtil.getHMSBySecond2(i) : (ViewText.text("活动已结束"), t.closeHandler())
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VWeekLB.prototype, "VWeekLB");
var VWeekLBItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "WeekLBItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            if (this.vo = t, this.lbname.text = t.cfg.mc, this.lbdes.text = t.cfg.ms2, t.cs >= t.cfg.cs) var e = "已购买",
                i = !1;
            else e = t.cfg.xj + "元", i = !0;
            this.btn.label = e, this.btn.enabled = i, ConfigHelp.makeStrGrids(t.cfg.lbnr2, this.grids, 0, 0, this.gridGrp, !0);
            for (var o = 0; o < this.grids.length; o++) {
                var n = this.grids[o];
                0 == o ? (n.x = (this.gridGrp.width - n.width) / 2, n.y = 0) : (n.x = 96 * (o - 1), n.y = 96)
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onT = function () {
        if (!this.btn.enabled) return void ViewText.text("超过每日限购次数！");
        var t = CFG_Recharge.LIB[this.vo.cfg.spid];
        platform.recharge(t.id)
    }, e
}(eui.ItemRenderer);
__reflect(VWeekLBItem.prototype, "VWeekLBItem");
var VWeekLC = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WeekLCSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this;
        this.base.title = "累计充值", this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), DisplayUtil.popBtnStyle(this.btnRec), this.btnRec.textFlow = HtmlUtil.underLine("前往充值"), this.btnRec.addEventListener(egret.TouchEvent.TOUCH_TAP, function () {
            GameGlobal.layerMgr.open(UIConst.RECHARGE), t.closeHandler()
        }, this), this.data = new eui.ArrayCollection, this.list.itemRenderer = VWeekLCItem, this.list.dataProvider = this.data
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), Vo_WeekLC.create(), this.update(), this.tick(this), GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.modelWeekender.on(ModelWeekender.MSG_UPDATE, this.update, this), GameGlobal.modelWeekender.CG3445()
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.tick, this), GameGlobal.modelWeekender.off(ModelWeekender.MSG_UPDATE, this.update, this)
    }, e.prototype.update = function () {
        Vo_WeekLC.Sort(), DisplayUtil.fillDataAC(this.data, Vo_WeekLC.List), this.lbdes.textFlow = HtmlUtil.parse("周末已充值" + HtmlUtil.color(Vo_WeekLC.yb + "元宝", "#B2FE3A"))
    }, e.prototype.tick = function (t) {
        var e = egret.getTimer(),
            i = ModelWeekender.time - (e - ModelWeekender.retime) / 1e3 >> 0;
        i > 0 ? t.lbtime.text = DateUtil.getHMSBySecond2(i) : (ViewText.text("活动已结束"), t.closeHandler())
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VWeekLC.prototype, "VWeekLC");
var VWeekLCItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.skinName = "WeekLCItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.bg.source = t.index % 2 == 0 ? "CM2_json.bg2" : "CM2_json.bg3", this.lbdes.text = "周末累计充值" + t.cfg.czed + "元宝";
            var e = Vo_WeekLC.yb;
            if (this.imgGet.visible = !1, this.btn.visible = !0, this.btn.setNoticeVis(!1), e < t.cfg.czed) var i = "前往";
            else i = "领取", t.isget ? (this.imgGet.visible = !0, this.btn.visible = !1) : this.btn.setNoticeVis(!0);
            this.btn.label = i, ConfigHelp.makeStrGrids(t.cfg.jl, this.grids, 0, 0, this.gridGrp, !0)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onT = function () {
        var t = this.vo,
            e = Vo_WeekLC.yb;
        e < t.cfg.czed ? GameGlobal.layerMgr.open(UIConst.RECHARGE) : t.isget ? ViewText.text("已领取") : GameGlobal.modelWeekender.CG3447(t.cfg.id)
    }, e
}(eui.ItemRenderer);
__reflect(VWeekLCItem.prototype, "VWeekLCItem");
var VWXFavoritePnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "WXFavoriteSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose).addCloseListen(this.btnReturn), this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btnGet.label = "领取奖励"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.imgBG, "favoritePmBG_png"), this.update(), GameGlobal.modelcommod.on(ModelCommond.MSG_COMMONARG, this.update, this), ConfigHelp.makeStrGrids(CFG_COMMOND.LIB_WXSCJL[1].jl, this.gridArr, 160, 170, this.grp, !0, 10, .75)
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.imgBG, null), GameGlobal.modelcommod.off(ModelCommond.MSG_COMMONARG, this.update, this), ConfigHelp.clearGrids(this.gridArr)
    }, e.prototype.onSize = function () {
        this.customPageResize()
    }, e.prototype.update = function () {
        var t = platform.isScene(1104);
        !GameGlobal.modelcommod.commonArg.fav && t ? this.btnGet.visible = !0 : this.btnGet.visible = !1
    }, e.prototype.onBtnT = function () {
        GameGlobal.modelcommod.commonArg.fav ? ViewText.text("奖励已领取") : GameGlobal.modelcommod.CG_COMMONGETAWD("fav")
    }, e
}(BaseEUIView);
__reflect(VWXFavoritePnl.prototype, "VWXFavoritePnl");
var VWXShare1Pnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.shared = !1, e.skinName = "WXShare1", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGet, this), this.addCloseListen(this.btnClose)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.imgBG, "wxShareBG_png"), ConfigHelp.makeStrGrids(CFG_COMMOND.LIB_WXFXJL[1].jl, this.gridArr, 156, 355, this.grp, !0, 10, 1, 0), this.update(), GameGlobal.modelcommod.on(ModelCommond.MSG_COMMONARG, this.update, this)
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.imgBG, null), ConfigHelp.clearGrids(this.gridArr), GameGlobal.modelcommod.off(ModelCommond.MSG_COMMONARG, this.update)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.update = function () {
        GameGlobal.modelcommod.commonArg && GameGlobal.modelcommod.commonArg.fShare ? (this.btnGet.label = "已领取", this.btnGet.enabled = !1, this.btnGet.setNoticeVis(!1), ViewRightUI.removeBtn("fShare")) : this.shared ? (this.btnGet.setNoticeVis(!0), this.btnGet.label = "领取奖励") : (this.btnGet.setNoticeVis(!1), this.btnGet.label = "分享领奖")
    }, e.prototype.onGet = function () {
        var t = this;
        if (!GameGlobal.modelcommod.commonArg.fShare) return t.shared ? void GameGlobal.modelcommod.CG_COMMONGETAWD("fShare") : (platform.share(null, function () {
            t.shared = !0, t.update(), TimerManager.remove(t.onShareGet, t)
        }), TimerManager.doTimer(3e3, 1, t.onShareGet, t), window.OPEN_DATA && window.OPEN_DATA.qua && "WX" == window.OPEN_DATA.qua.app && (this.openView(WXGuideShareView), GameGlobal.layerMgr.close(UIConst.WXSHARE1)), void 0)
    }, e.prototype.onShareGet = function () {
        this.shared = !0, this.update()
    }, e
}(BaseEUIView);
__reflect(VWXShare1Pnl.prototype, "VWXShare1Pnl");
var VWXUserFuliPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WXUserFuliSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.rect).addChild(this.btnClose), this.btnWatchAd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAdT, this), this.btnShare.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onShareT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update()
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.customPageResize()
    }, e.prototype.update = function () {
        var t = 1,
            e = 5;
        this.lbWatchAd.text = Lang.reTxt("已观看{0}/{1}", t, e);
        var i = 1,
            o = 5;
        this.lbInvite.text = Lang.reTxt("已邀请{0}/{1}", i, o)
    }, e.prototype.onAdT = function () {
        platform.createRewardedVideoAd(function (t) {
            console.log(JSON.stringify(t))
        })
    }, e.prototype.onShareT = function () {
        platform.share(null, function () {
            console.log("share success")
        }, function () {
            console.log("share fail")
        })
    }, e
}(BaseEUIView);
__reflect(VWXUserFuliPnl.prototype, "VWXUserFuliPnl");
var WXCtrl = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.registUI = function () {
        var t = GameGlobal.layerMgr;
        t.regView(WXGuideShareView, t.UI_Message, 1, 1)
    }, e.prototype.registProxys = function () {
        GameGlobal.socketMgr
    }, e
}(UIAndProxyBaseCtr);
__reflect(WXCtrl.prototype, "WXCtrl");
var WXGuideShareView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WXShareTipsSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addEvent()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeEvent()
    }, e.prototype.onSize = function () {
        this.fullStage(), this.drawBG(-1, -1, 0, 0, 0)
    }, e.prototype.addEvent = function () {}, e.prototype.removeEvent = function () {}, e
}(BaseEUIView);
__reflect(WXGuideShareView.prototype, "WXGuideShareView");
var ItemVipGiftGet = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.gridArr = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemVipGiftGetSkin"
    }, Object.defineProperty(e.prototype, "data", {
        set: function (t) {
            var e = t.viplv;
            this.txtVIP.text = "VIP" + e, ConfigHelp.makeStrGrids(t.jl, this.gridArr, 0, 0, this.gridContainer, !0)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        set: function (t) {
            0 == (1 & t) ? this.background.source = "CM2_json.bg3" : this.background.source = "CM2_json.bg4"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemVipGiftGet.prototype, "ItemVipGiftGet");
var ModelExternal = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.state = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(4302, this.GC4302, this), e.regHand(4304, this.GC4304, this), e.regHand(4306, this.GC4306, this), e.regHand(4308, this.GC4308, this), e.regHand(4310, this.GC4310, this), e.regHand(4312, this.GC4312, this), e.regHand(274, this.GC274, this), e.regHand(4314, this.GC4314, this)
    }, e.prototype.CG4301 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(4301, e)
    }, e.prototype.GC4302 = function (t, e) {
        var i = e.readByte();
        i >= 1 && 2 >= i || 4 == i ? GameGlobal.layerMgr.open(UIConst.VGIFTGET, i) : 3 == i && ViewText.text("礼包不存在!")
    }, e.prototype.CG4313 = function (t) {
        VJFLBGet.giftId = t;
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(4313, e)
    }, e.prototype.GC4314 = function (t, e) {
        var i = e.readByte();
        i >= 1 && 2 >= i || 4 == i ? GameGlobal.layerMgr.open(UIConst.JFLB, i) : 3 == i && ViewText.text("礼包不存在!")
    }, e.prototype.CG4303 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(4303, e)
    }, e.prototype.GC4304 = function (t, i) {
        var o = i.readByte();
        1 == o ? (t.state = 1, t.notify(e.msg_datas)) : (ViewText.text([null, null, "您已经领取了礼包，明天记得来领取哦!", "礼包不存在", "背包不足"][o]), 4 == o && ViewAlert.show("背包已满，是否前往熔炼?", function () {
            GameGlobal.layerMgr.open(UIConst.EQUIPRL)
        }))
    }, e.prototype.CG4305 = function (t, e, i) {
        var o = this.getBytes();
        o.writeUTF(t), o.writeUTF(e), o.writeUTF(i), this.sendSocket(4305, o);
        try {} catch (n) {
            console.log("error")
        }
    }, e.prototype.GC4306 = function (t, i) {
        t.state = i.readByte(), t.linAdress = i.readUTF(), t.notify(e.msg_datas)
    }, e.prototype.showVIPBtn = function () {
        CanIShow.isCanShow(ECanIShowPlatformType.MINI_GAME_VIP) && window.OPEN_DATA && "xinYueClub" != window.OPEN_DATA.channel && ViewRightUI.addBtn(ERightButton.VIP, "vipTeQuan_png", this.onShowTQVip, this)
    }, e.prototype.showZYZLBtn = function () {
        if (CFG_COMMOND.isOpen(UIConst.ZYZL, !1) && GameGlobal.modelZYZL.CG_4421(), GameGlobal.modelZYZL.isShowIcon()) {
            var t = ViewRightUI.btns[ERightButton.FRIEND_GIFT];
            !t && platform.isCanShare && ViewRightUI.addBtn(ERightButton.FRIEND_GIFT, "zyzl_png", this.onShowZYZL, this, !0)
        }
    }, e.prototype.onShowTQVip = function () {
        GameGlobal.layerMgr.open(UIConst.VIPGIFTGET)
    }, e.prototype.onShowZYZL = function () {
        if (platform.isCanShare && CFG_COMMOND.isOpen(UIConst.ZYZL, !0)) {
            egret.error("Open ZYZL"), GameGlobal.layerMgr.open(UIConst.ZYZL);
            var t = GameGlobal.layerMgr.getView(UIConst.ZYZL);
            "已领取" == t.btnGet.label && (GameGlobal.layerMgr.close(UIConst.ZYZL), GameGlobal.layerMgr.open(UIConst.ZYZL7DAY))
        }
    }, e.prototype.onShowToDeskUI = function () {
        var t = CanIShow.isCanShow(ECanIShowPlatformType.FAVORITES_TO_DESKTOP);
        t && platform.isCanAddShortcut && GameGlobal.layerMgr.open(UIConst.VIEWTODESK)
    }, e.prototype.CG4307 = function () {
        this.sendSocket(4307, this.getBytes())
    }, e.prototype.GC4308 = function (t, e) {
        var i = e.readByte();
        1 == i ? t.showToDeskBtn() : t.hideToDeskBtn()
    }, e.prototype.showToDeskBtn = function () {
        CanIShow.isCanShow(ECanIShowPlatformType.FAVORITES_TO_DESKTOP) && platform.isCanAddShortcut && ViewRightUI.addBtn(ERightButton.ADD_SHORTCUT, "toDeskIcon_png", this.onShowToDeskUI, this)
    }, e.prototype.hideToDeskBtn = function () {
        ViewRightUI.removeBtn("toDeskIcon")
    }, e.prototype.hideZYZLBtn = function () {
        ViewRightUI.removeBtn("zyzl")
    }, e.prototype.CG4309 = function () {
        this.sendSocket(4309, this.getBytes())
    }, e.prototype.GC4310 = function (t, i) {
        var o = i.readByte();
        t.notify(e.msg_datas_desk, o)
    }, e.prototype.CG4311 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(4311, e)
    }, e.prototype.GC4312 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                t.notify(e.msg_datas_desk, 1);
                break;
            case 2:
                t.notify(e.msg_datas_desk, 2);
                break;
            default:
                ViewText.text("收藏或者领取奖励失败")
        }
    }, e.prototype.CG273 = function () {
        var t = this.getBytes();
        this.sendSocket(273, t)
    }, e.prototype.GC274 = function (t, e) {
        e.readByte()
    }, e.msg_datas = "msg_datas", e.msg_datas_desk = "msg_datas_desk", e
}(BaseModel);
__reflect(ModelExternal.prototype, "ModelExternal");
var VGiftGet = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "VGiftGetSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose).addCloseListen(this.background), DisplayUtil.popBtnStyle(this.btnClose)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        try {
            var i = window.urlDic.LIB_BASIC
        } catch (o) {}
        i || (i = 1);
        var n = CFG_External.LIB_BASIC[i];
        switch (ConfigHelp.makeStrGrids(n.jl, this.gridArr, 0, 0, this.gridContainer, !0), e) {
            case 1:
                this.txtDes1.text = "领取成功", this.txtDes2.text = "恭喜你获得:";
                break;
            case 2:
                this.txtDes1.text = "每天只能领取一次哦", this.txtDes2.text = "你已经领取过:";
                break;
            case 4:
                this.txtDes1.text = "领取成功", this.txtDes2.text = "恭喜你获得(已通过邮件发送给您):"
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(VGiftGet.prototype, "VGiftGet");
var ViewToDesk = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "ViewToDeskSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.background).addCloseListen(this.btnClose).addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose).popBtnStyle(this.btnReturn), this.btnHand.label = "收藏", this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.initAwards()
    }, e.prototype.initAwards = function () {
        var t = CFG_External.LIB_TODESK,
            e = t[1];
        ConfigHelp.makeStrGrids(e.jl, this.gridArr, 0, 0, this.gridContainer, !0, 0, .9)
    }, e.prototype.onHand = function () {
        switch (this.state) {
            case 0:
                platform.addShortcut(), GameGlobal.modelExternal.CG4311(1);
                break;
            case 1:
                GameGlobal.modelExternal.CG4311(2)
        }
    }, e.prototype.onUpdate = function (t) {
        switch (this.state = t, t) {
            case 0:
                this.btnHand.label = "收藏", this.btnHand.enabled = !0;
                break;
            case 1:
                this.btnHand.label = "领取", this.btnHand.enabled = !0;
                break;
            case 2:
                this.btnHand.label = "已领取", this.btnHand.enabled = !1, GameGlobal.modelExternal.hideToDeskBtn()
        }
    }, e.prototype.onOpen = function (e) {
        return platform.isCanAddShortcut ? (t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.imgBg, "shoucangBg_png"), GameGlobal.modelExternal.on(ModelExternal.msg_datas_desk, this.onUpdate, this), void GameGlobal.modelExternal.CG4309()) : void GameGlobal.layerMgr.close(UIConst.VIEWTODESK)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.imgBg, null), GameGlobal.modelExternal.off(ModelExternal.msg_datas_desk, this.onUpdate, this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewToDesk.prototype, "ViewToDesk");
var VJFLBGet = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e.gridArr = [], e.skinName = "JFLBbuyAlertSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnSure), this.btnSure.label = "确认", DisplayUtil.popBtnStyle(this.btnSure)
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i);
        var o = e.giftId;
        console.log("积分礼包" + o);
        var n = CFG_External.LIB_BASIC[o];
        switch (i) {
            case 1:
                this.lbTitle.text = "积分礼包", this.lb_value.textFlow = HtmlUtil.parse("恭喜您获得价值" + HtmlUtil.color(n.xq + "积分", "#ff4800") + "的游戏礼包"), ConfigHelp.makeStrGrids(n.jl, this.grids, 0, 0, this.container, !0, 10, .8), this.container.x = .5 * (this.container.parent.width - this.container.width);
                break;
            case 2:
                this.lbTitle.text = "礼包兑换达到上限", ConfigHelp.clearGrids(this.grids), this.lb_value.textFlow = HtmlUtil.parse("积分礼包" + HtmlUtil.color("每天仅可兑换一次", "#ff4800") + "\n请明天再来喔"), this.lb_value.y = 120.5;
                break;
            case 4:
                this.lbTitle.text = "积分礼包", ConfigHelp.makeStrGrids(n.jl, this.grids, 0, 0, this.container, !0, 10, .8), this.container.x = .5 * (this.container.parent.width - this.container.width), this.lb_value.textFlow = HtmlUtil.parse("恭喜您获得价值" + HtmlUtil.color(n.xq + "积分", "#ff4800") + "的游戏礼包\n(已通过邮件发送给您)")
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), ConfigHelp.clearGrids(this.grids)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(VJFLBGet.prototype, "VJFLBGet");
var VVIPGiftGet = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.vipLevel = 0, e.hasReady = !1, e.skinName = "VVIPGiftGetSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.background).addCloseListen(this.btnClose).addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.btnHand.label = "领取", this.list.dataProvider = this.sourceData = new eui.ArrayCollection, this.list.itemRenderer = ItemVipGiftGet, this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), DisplayUtil.fillDataAC(this.sourceData, this.getCfgDatas())
    }, e.prototype.getCfgDatas = function () {
        var t = CFG_External.LIB_VIP,
            e = [];
        for (var i in t) {
            var o = t[i];
            e.push(o)
        }
        return e
    }, e.prototype.onHand = function () {
        return this.hasReady ? -1 == this.btnHand.va ? void ViewText.text("VIP等级不匹配，无法领取!") : void GameGlobal.modelExternal.CG4303(this.vipLevel) : void 0
    }, e.prototype.getSha1 = function () {
        var t = buildString(),
            e = "E9E8D54F0E666FEB4C352BEDF2001037",
            i = "BA0C66A3890448BA8B9742B79DA06408",
            o = "wanba_ts.9",
            n = "https://api.urlshare.cn/v3/user/get_vip_level?sig=" + t + "&openid=" + e + "&openkey=" + i + "&pf=" + o + "&appid=1107422619&format=json&userip=";
        console.log(n)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelExternal.on(ModelExternal.msg_datas, this.onUpdate, this);
        ({
            openid: GameGlobal.loginArg.account,
            openkey: GameGlobal.loginArg.openkey,
            pf: GameGlobal.loginArg.pf
        });
        GameGlobal.modelExternal.CG4305(GameGlobal.loginArg.account, GameGlobal.loginArg.openkey, GameGlobal.loginArg.pf)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelExternal.off(ModelExternal.msg_datas, this.onUpdate, this)
    }, e.prototype.onUpdate = function () {
        return __awaiter(this, void 0, void 0, function () {
            var t, e, i, o;
            return __generator(this, function (n) {
                switch (n.label) {
                    case 0:
                        switch (t = GameGlobal.modelExternal.state) {
                            case 0:
                                this.btnHand.label = "领取", this.btnHand.enabled = !0, this.btnHand.va = 0;
                                break;
                            case 1:
                                this.btnHand.label = "已领取", this.btnHand.enabled = !1, this.btnHand.va = 1
                        }
                        n.label = 1;
                    case 1:
                        return n.trys.push([1, 3, , 4]), [4, Util.getInstance().httpRequestAsync(GameGlobal.modelExternal.linAdress, egret.HttpResponseType.TEXT, egret.HttpMethod.GET)];
                    case 2:
                        return e = n.sent(), i = JSON.parse(e), this.vipLevel = i.level, this.hasReady = !0, this.vipLevel >= 1 ? this.txtVIP.text = "当前VIP等级: " + this.vipLevel : (this.txtVIP.text = "当前VIP等级: 0", this.btnHand.va = -1, this.btnHand.label = "不可领取", this.btnHand.enabled = !1), [3, 4];
                    case 3:
                        return o = n.sent(), [3, 4];
                    case 4:
                        return [2]
                }
            })
        })
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(VVIPGiftGet.prototype, "VVIPGiftGet");
var VWXGetSFCZHongBao = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.remainSec = 0, e.skinName = "WXGetSFCZHongBao", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose).addCloseListen(this.btnReturn), this.btnGetAwd.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.onOpen = function (t) {
        this.data = t, GameGlobal.modelcommod.on(ModelCommond.MSG_SHARE, this.onUpdate, this), this.onUpdate(), this.lbName.text = t.name, this.imgHead.source = IconUtil.getRoleHead(t.job), this.lb.textFlow = HtmlUtil.parse(Lang.reTxt("您的好友充值的<font color='#f66809'>{0}元宝</font>\n您可获得返利<font color='#f66809'>{1}元宝</font>", 10 * t.money, t.money)), GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.onClose = function () {
        this.data = null, GameGlobal.modelcommod.off(ModelCommond.MSG_SHARE, this.onUpdate, this), GameGlobal.tick.removeInterv(this.onTick, this)
    }, e.prototype.onBtnT = function () {
        this.btnGetAwd.enabled ? GameGlobal.modelcommod.CG_GETCZHONGBAO(this.data.id) : ViewText.text("已领取")
    }, e.prototype.onUpdate = function () {
        var t = GameGlobal.modelcommod.hongbaoList[this.data.id];
        t && !t.hadGet ? (this.btnGetAwd.enabled = !0, this.btnGetAwd.label = "领取", this.remainSec = 5) : (this.btnGetAwd.enabled = !1, this.btnGetAwd.label = "已领取")
    }, e.prototype.onTick = function (t) {
        var e = GameGlobal.modelcommod.hongbaoList[t.data.id];
        !e || e.hadGet ? t.remainSec > 0 && (t.remainSec -= 1, t.btnGetAwd.label = Lang.reTxt("已领取({0})", t.remainSec), t.remainSec <= 0 && t.closeHandler()) : t.btnGetAwd.label = "领取"
    }, e
}(BaseEUIView);
__reflect(VWXGetSFCZHongBao.prototype, "VWXGetSFCZHongBao");
var VWXRechargeHongBao = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WXRechargeHongBao", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.list.itemRenderer = VWXRechargeHongBaoItem, this.list.dataProvider = this.listDataAC = new eui.ArrayCollection, this.lbTitle.text = "返利\n红包"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelcommod.on(ModelCommond.MSG_SHARE, this.onUpdate, this), this.lbLv.text = "通过邀请进来的好友充值时", this.lbDes.textFlow = HtmlUtil.parse("(您可获得订单<font color='#f6380d'>10%元宝</font>返利)"), this.update()
    }, e.prototype.onClose = function () {
        GameGlobal.modelcommod.off(ModelCommond.MSG_SHARE, this.onUpdate)
    }, e.prototype.update = function () {
        var t = GameGlobal.modelcommod.hongbaoList.concat();
        t.sort(e.sort);
        for (var i = t.length; 4 > i; i++) t.push(null);
        DisplayUtil.fillDataAC(this.listDataAC, t)
    }, e.prototype.onUpdate = function () {
        this.update()
    }, e.sort = function (t, e) {
        if (!t && !e) return -1;
        if (!t) return 1;
        if (!e) return -1;
        var i = t.hadGet ? 1e5 : 0 + t.index,
            o = e.hadGet ? 1e5 : 0 + e.index;
        return i - o
    }, e
}(BaseEUIView);
__reflect(VWXRechargeHongBao.prototype, "VWXRechargeHongBao");
var VWXRechargeHongBaoItem = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            return this._data = t, t ? (this.lbNum.text = "" + t.money, void(t.hadGet ? (this.btn.label = "已领取", this.btn.enabled = !1) : (this.btn.label = "领取", this.btn.enabled = !0))) : (this.lbNum.text = "0", this.btn.label = "未达成", void(this.btn.enabled = !1))
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onBtnT = function () {
        this._data ? this._data.hadGet ? ViewText.text("该红包已领取") : GameGlobal.layerMgr.open(UIConst.GETCZHONGBAO, this.data) : ViewText.text("暂未有好友充值,未获得奖励")
    }, e
}(eui.Component);
__reflect(VWXRechargeHongBaoItem.prototype, "VWXRechargeHongBaoItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VWXShareLvPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WxShareFriendLv", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.list.itemRenderer = VWXShareLvPageItem, this.list.dataProvider = this.listDataAC = new eui.ArrayCollection, DisplayUtil.popBtnStyle(this.btnStore), this.btnStore.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onStoreT, this)
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i), e.showinglv = i, 45 == i ? (this.lbTitle.text = "诚邀\n好友", e.showingjlCount = Util.parseIntStr(CFG_Param.LIB[31].key)[2], this.lbLv.text = Lang.reTxt("新用户达到45级可获得奖励"), this.lbDes.textFlow = HtmlUtil.parse("(新用户是指<font color='#f6380d'>未玩过</font>本游戏的玩家)")) : 100 == i && (this.lbTitle.text = "好友\n升级", e.showingjlCount = Util.parseIntStr(CFG_Param.LIB[32].key)[2], this.lbLv.text = Lang.reTxt("被邀请的好友升级到100级"), this.lbDes.textFlow = HtmlUtil.parse("(您可获得好友<font color='#f6380d'>升级奖励)</font>")), this.update(), this.updateCurrency(), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateCurrency, this), GameGlobal.modelcommod.on(ModelCommond.MSG_SHARE, this.update, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateCurrency, this), GameGlobal.modelcommod.off(ModelCommond.MSG_SHARE, this.update, this)
    }, e.prototype.update = function () {
        for (var t = GameGlobal.modelcommod.invitePlayers.concat(), i = t.length; 8 > i; i++) t.push(null);
        t.sort(e.sort), DisplayUtil.fillDataAC(this.listDataAC, t)
    }, e.prototype.onStoreT = function () {
        GameGlobal.layerMgr.open(UIConst.STORE, Enum_shangChengType.SHARE)
    }, e.prototype.updateCurrency = function () {
        this.lbNum.text = "" + GameGlobal.modelBag.getItemCount(1262)
    }, e.sort = function (t, i) {
        if (!t && !i) return -1;
        if (!t) return 1;
        if (!i) return -1;
        if (45 == e.showinglv) var o = t.rwlv45 ? 1e5 : 0 + t.lv >= 45 ? -1e4 : 0,
            n = i.rwlv45 ? 1e5 : 0 + i.lv >= 45 ? -1e4 : 0;
        else var o = t.rwlv100 ? 1e5 : 0 + t.lv >= 100 ? -1e4 : 0,
            n = i.rwlv100 ? 1e5 : 0 + i.lv >= 100 ? -1e4 : 0;
        var a = o + t.index,
            s = n + i.index;
        return a - s
    }, e
}(BaseEUIView);
__reflect(VWXShareLvPage.prototype, "VWXShareLvPage");
var VWXShareLvPageItem = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = VWXShareLvPage.showinglv;
            if (this.lbNum.text = "" + VWXShareLvPage.showingjlCount, !t) return this.lbName.text = Lang.reTxt("第{0}位好友", this.itemIndex + 1), this.lbLv.text = "Lv:0/5", this.imgHead.source = null, this.lbClose.visible = !0, this.btn.enabled = !1, this.btn.label = "未达成", void(this.lbLv.text = "0/" + e);
            this.lbLv.text = t.lv + "/" + e, this.lbName.text = Lang.reTxt("{0}.{1}", t.name, t.zoneid);
            var i = t.lv >= e;
            if (45 == e) var o = 1 == t.rwlv45;
            else if (100 == e) var o = 1 == t.rwlv100;
            i && !o ? (this.btn.enabled = !0, this.btn.label = "领取", this.btn.va = 1) : o ? (this.btn.enabled = !1, this.btn.label = "已领取", this.btn.va = -2) : (this.btn.enabled = !1, this.btn.label = "未达成", this.btn.va = -1), this.imgHead.source = IconUtil.getRoleHead(t.job), this.lbClose.visible = !1
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onBtnT = function () {
        if (this.data)
            if (this.btn.enabled) {
                var t = VWXShareLvPage.showinglv;
                if (45 == t) var e = 1;
                else 100 == t && (e = 2);
                GameGlobal.modelcommod.CG_GETSHAREPLAYERAWD(this.data.roleid, e)
            } else -1 == this.btn.va ? ViewText.text("未达条件，无法领取") : -2 == this.btn.va && ViewText.text("奖励已领取")
    }, e
}(eui.Component);
__reflect(VWXShareLvPageItem.prototype, "VWXShareLvPageItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VWXSharePage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WXShareTimesPage", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.list.itemRenderer = VWXSharePageItem, this.list.dataProvider = this.listDataAC = new eui.ArrayCollection, this.lbTitle.text = "分享\n大奖"
    }, e.prototype.onOpen = function (t) {
        this.lbLv.text = "累计分享可获得超值奖励", this.lbDes.textFlow = HtmlUtil.parse("(每天<font color='#f6380d'>前三次</font>分享才计算次数)"), this.onUpdate(), GameGlobal.modelcommod.on(ModelCommond.MSG_SHARE, this.onUpdate, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelcommod.off(ModelCommond.MSG_SHARE, this.onUpdate, this)
    }, e.prototype.updateList = function () {
        var t = [];
        for (var i in CFG_COMMOND.LIBSHARE) t.push(CFG_COMMOND.LIBSHARE[i]);
        t.sort(e.sort), DisplayUtil.fillDataAC(this.listDataAC, t)
    }, e.prototype.onUpdate = function () {
        var t = this.getNextShowMinCount(),
            e = GameGlobal.modelcommod.totalTimes,
            i = e / t;
        i > 1 && (i = 1), this.lbValue.text = e + "/" + t, this.lbPB.$setWidth(280 * i), this.updateList()
    }, e.prototype.getNextShowMinCount = function () {
        for (var t = CFG_COMMOND.LIBSHARE, e = GameGlobal.modelcommod.totalTimes, i = t[1]; e >= i.leijicishu;) {
            var o = t[i.id + 1];
            if (!o) break;
            i = o
        }
        return i.leijicishu
    }, e.sort = function (t, e) {
        var i = GameGlobal.modelcommod,
            o = i.totalTimes,
            n = i.shareAwardStatus[t.id],
            a = i.shareAwardStatus[e.id],
            s = (n ? 1e6 : 0) + (o >= t.leijicishu ? -1e5 : 0),
            r = (a ? 1e6 : 0) + (o >= e.leijicishu ? -1e5 : 0),
            l = t.id + s,
            h = e.id + r;
        return l - h
    }, e
}(BaseEUIView);
__reflect(VWXSharePage.prototype, "VWXSharePage");
var VWXSharePageItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.jl,
                i = GameGlobal.modelcommod,
                o = i.totalTimes,
                n = o >= t.leijicishu;
            if (i) var a = i.shareAwardStatus[t.id];
            else a = 0;
            this.lbName.text = Lang.reTxt("分享{0}次", t.leijicishu), this.lbNum.text = o + "/" + t.leijicishu, n && !a ? (this.btn.label = "领取", this.btn.enabled = !0, this.btn.va = 1) : n ? (this.btn.label = "已领取", this.btn.enabled = !1, this.btn.va = -2) : (this.btn.label = "未达成", this.btn.enabled = !1, this.btn.va = -1), ConfigHelp.makeStrGrids(e, this.grids, 10, 40, this, !0, 5, .7)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.$onAddToStage = function (e, i) {
        t.prototype.$onAddToStage.call(this, e, i)
    }, e.prototype.$onRemoveFromStage = function () {
        t.prototype.$onRemoveFromStage.call(this), ConfigHelp.clearGrids(this.grids)
    }, e.prototype.onBtnT = function () {
        this.btn.enabled ? GameGlobal.modelcommod.CG_GETSHAREAWARD(this._data.id) : -1 == this.btn.va ? ViewText.text("未达条件，无法领取") : -2 == this.btn.va && ViewText.text("奖励已领取")
    }, e
}(eui.Component);
__reflect(VWXSharePageItem.prototype, "VWXSharePageItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VWXSharePnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curIdex = -1, e.skinName = "WXShare", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose).addCloseListen(this.btnReturn).addCloseListen(this.rect), GameGlobal.layerMgr.reg(UIConst.WXSHAREPAGE, VWXSharePage, this.pageGrp), GameGlobal.layerMgr.reg(UIConst.WXSHARELVPAGE, VWXShareLvPage, this.pageGrp), GameGlobal.layerMgr.reg(UIConst.WXHONGBAORTBPAGE, VWXRechargeHongBao, this.pageGrp), this.tbtnGrp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTbtnGrpT, this), this.btnShare.label = "分享好友", this.btnShare.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onShareT, this), this.tb0.label = "分享", this.tb1.label = "邀请", this.tb2.label = "升级", this.tb3.label = "返利"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.updateRm(), GameGlobal.tick.addInterv(this.onTick, 1e3, this), this.setPageIndex(0), this.onShareUpdate(), GameGlobal.modelcommod.on(ModelCommond.MSG_SHARE, this.onShareUpdate, this)
    }, e.prototype.onClose = function () {
        GameGlobal.tick.removeInterv(this.onTick, this), this.setPageIndex(-1), GameGlobal.modelcommod.on(ModelCommond.MSG_SHARE, this.onShareUpdate, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.setPageIndex = function (t) {
        var e = GameGlobal.layerMgr;
        t != this._curIdex && (0 == this._curIdex ? e.close(UIConst.WXSHAREPAGE) : 1 == this._curIdex ? e.close(UIConst.WXSHARELVPAGE) : 2 == this._curIdex ? e.close(UIConst.WXSHARELVPAGE) : 3 == this._curIdex && e.close(UIConst.WXHONGBAORTBPAGE), 0 == t ? e.open(UIConst.WXSHAREPAGE) : 1 == t ? e.open(UIConst.WXSHARELVPAGE, 45) : 2 == t ? e.open(UIConst.WXSHARELVPAGE, 100) : 3 == t && e.open(UIConst.WXHONGBAORTBPAGE), this._curIdex = t);
        for (var i = 0; 4 > i; i++) {
            var o = this.tbtnGrp.$children[i];
            o.selected = i == t
        }
    }, e.prototype.onTbtnGrpT = function (t) {
        var e = t.target;
        if ("TBTN" == e.classT) {
            var i = this.tbtnGrp.getChildIndex(e);
            this.setPageIndex(i)
        }
    }, e.prototype.onShareT = function () {
        platform.share()
    }, e.prototype.onTick = function (t) {
        t.updateRm()
    }, e.prototype.updateRm = function () {
        var t = GameGlobal.modelcommod.getRemainShareSec();
        t > 0 ? this.lbShareRemain.text = DateUtil.getMSBySec3(t) + "秒后可分享" : this.lbShareRemain.text = ""
    }, e.prototype.onShareUpdate = function () {
        var t = GameGlobal.modelcommod;
        this.tb0.setNoticVis(t.isShareNumRed()), this.tb1.setNoticVis(t.isLevelRed(!0, !1)), this.tb2.setNoticVis(t.isLevelRed(!1, !0)), this.tb3.setNoticVis(t.isHongBaoRed())
    }, e
}(BaseEUIView);
__reflect(VWXSharePnl.prototype, "VWXSharePnl");
var ModelWDTD = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(1650, i.GC1650, i), e.regHand(1652, i.GC1652, i), e.regHand(1654, i.GC1654, i), e.regHand(1656, i.GC1656, i), e.regHand(1658, i.GC1658, i), e.regHand(1660, i.GC1660, i), e.regHand(1662, i.GC1662, i), e.regHand(1664, i.GC1664, i), e.regHand(1666, i.GC1666, i), e.regHand(1668, i.GC1668, i), e.regHand(1670, i.GC1670, i), e.regHand(1672, i.GC1672, i), e.regHand(1674, i.GC1674, i)
    }, e.prototype.CG1651 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(1651, e)
    }, e.prototype.CG1653 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeShort(e), this.sendSocket(1653, i)
    }, e.prototype.CG1655 = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(1655, e)
    }, e.prototype.CG1657 = function () {
        if (ModelBattle.canEnterBtl()) {
            var t = this.getBytes();
            this.sendSocket(1657, t)
        }
    }, e.prototype.CG1659 = function () {
        var t = this.getBytes();
        this.sendSocket(1659, t)
    }, e.prototype.CG1661 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(1661, e)
    }, e.prototype.CG1663 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(1663, e)
    }, e.prototype.CG1665 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(1665, e)
    }, e.prototype.CG1669 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeByte(e), this.sendSocket(1669, i)
    }, e.prototype.GC1650 = function (t, i) {
        var o = i.readShort();
        Vo_wdCeng.List = [], Util.clearKeys(Vo_wdCeng.FbPassIds), Util.clearKeys(Vo_wdCeng.FbSdIds);
        for (var n = 0; o > n; n++) {
            var a = i.readShort();
            Vo_wdCeng.FbPassIds[a] || (Vo_wdCeng.FbPassIds[a] = a)
        }
        EventCenter.sendMsg(WDTDinviteEvent.MSG_ASSIT_AWARD_BTN);
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readShort();
            Vo_wdCeng.FbSdIds[a] || (Vo_wdCeng.FbSdIds[a] = a)
        }
        Vo_wdCeng.create(), t.notify(e.UPDATE1)
    }, e.prototype.GC1652 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort();
            Vo_wdTeam.List = [];
            for (var a = 0; n > a; a++) {
                var s = new Vo_wdTeam;
                s.id = i.readInt(), s.leader = i.readUTF(), s.peopleNum = i.readByte(), s.state = i.readByte(), Vo_wdTeam.List.push(s)
            }
        } else 2 == o && ViewText.text("你被踢出队伍");
        t.notify(e.UPDATE)
    }, e.prototype.GC1654 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort();
            Vo_wdPlayer.List = [];
            for (var a = 0; n > a; a++) {
                var s = new Vo_wdPlayer,
                    r = i.readByte();
                1 == r ? s.isLeader = !0 : 2 == r && (s.isLeader = !1), s.id = i.readLong(), s.name = i.readUTF(), s.level = i.readShort(), s.zhanli = i.readInt(), s.zhiye = i.readByte(), Vo_wdPlayer.List.push(s)
            }
            if (Vo_wdPlayer.myselfLeader = Vo_wdPlayer.setLeader(), Vo_wdPlayer.List.length < 3) {
                var l = Vo_wdPlayer.List.length;
                for (a = 0; 3 - l > a; a++) s = new Vo_wdPlayer, Vo_wdPlayer.List.push(s)
            } else 3 == Vo_wdPlayer.List.length && t.notify(e.MANTEAM);
            t.notify(e.GOTEAM)
        } else 2 == o ? ViewText.text("没有该副本") : 3 == o ? ViewText.text("等级不足") : 4 == o ? ViewText.text("你已经有队伍，不能重复加入") : 5 == o && ViewText.text("上一关未通关")
    }, e.prototype.GC1656 = function (t, e) {
        var i = e.readByte();
        switch (i) {
            case 1:
                break;
            case 2:
                ViewText.text("你没在队伍");
                break;
            case 3:
                ViewText.text("队伍缓存异常");
                break;
            case 4:
                ViewText.text("你不是队长，不能踢人")
        }
    }, e.prototype.GC1658 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                e.isfighting = !0;
                break;
            case 2:
                ViewText.text("你没在队伍");
                break;
            case 3:
                ViewText.text("队伍缓存异常");
                break;
            case 4:
                ViewText.text("你不是队长");
                break;
            case 5:
                ViewText.text("等级不足")
        }
        t.notify(e.BAOVER)
    }, e.prototype.GC1660 = function (t, i) {
        var o = i.readByte();
        Vo_wdPlayer.List = [];
        var n = GameGlobal.layerMgr.getView(UIConst.MAINMENU);
        switch (n && (n.teamTip.visible = !1), o) {
            case 1:
                t.notify(e.LEFTTEAM);
                break;
            case 2:
                ViewText.text("被踢出副本"), t.notify(e.LEFTTEAM);
                break;
            case 3:
                ViewText.text("开战后解散队伍"), t.notify(e.LEFTTEAM);
                break;
            case 4:
                break;
            case 5:
                ViewText.text("队伍缓存异常")
        }
    }, e.prototype.GC1662 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                var n = GameGlobal.layerMgr.isShowing(UIConst.WDTDPNL);
                if (!n) {
                    GameGlobal.layerMgr.open(UIConst.WDTDPNL);
                    var a = Vo_wdCeng.createOneById(e.charfbID);
                    GameGlobal.layerMgr.open(UIConst.WDTDPAGEPNL, {
                        p: 2,
                        vo: a
                    })
                }
                t.notify(e.GOTEAM);
                break;
            case 2:
                ViewText.text("你已经有队伍");
                break;
            case 3:
                ViewText.text("队伍已解散");
                break;
            case 4:
                ViewText.text("队伍已满");
                break;
            case 5:
                ViewText.text("等级不足");
                break;
            case 6:
                ViewText.text("上一关未通关")
        }
    }, e.prototype.GC1664 = function (t, i) {
        var o = (i.readShort(), i.readUTF());
        Vo_wdRecord.fristName = "" == o ? "无" : o;
        var n = i.readByte();
        Vo_wdRecord.fristHuiHe = 0 == n ? "无" : n.toString();
        var a = i.readInt();
        Vo_wdRecord.fristTime = 0 == a ? "无" : DateUtil.getYMDHM(a);
        var s = i.readUTF();
        Vo_wdRecord.fastName = "" == o ? "无" : s;
        var r = i.readByte();
        Vo_wdRecord.fastHuiHe = 0 == n ? "无" : r.toString();
        var l = i.readInt();
        Vo_wdRecord.fastTime = 0 == a ? "无" : DateUtil.getYMDHM(l), GameGlobal.modelWDTD.notify(e.RECORD)
    }, e.prototype.GC1666 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                t.notify(e.SHAODAN);
                break;
            case 2:
                ViewText.text("传入参数异常");
                break;
            case 3:
                ViewText.text("等级不足");
                break;
            case 4:
                ViewText.text("该等级的副本全都未挑战通关");
                break;
            case 5:
                ViewText.text("该等级的副本全都扫荡了");
                break;
            case 6:
                GameGlobal.modelBag.checkRLTips(0)
        }
    }, e.prototype.GC1668 = function (t, e) {
        var i = e.readShort();
        Vo_wdShop.idList = [], Vo_wdShop.numList = [];
        for (var o = 0; i > o; o++) {
            var n = e.readInt(),
                a = e.readShort();
            Vo_wdShop.idList.push(n), Vo_wdShop.numList.push(a)
        }
    }, e.prototype.GC1670 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                var n = i.readShort(),
                    a = i.readByte();
                Vo_wdShop.update(n, a), GameGlobal.modelWDTD.notify(e.SHOP), GameGlobal.layerMgr.close(UIConst.WDTDSHOPTB);
                break;
            case 2:
                ViewText.text("传入参数异常");
                break;
            case 3:
                ViewText.text("购买数量超过每日上限");
                break;
            case 4:
                ViewText.text("购买数量超过永久限购");
                break;
            case 5:
                ViewText.text("解锁条件未达");
                break;
            case 6:
                ViewText.text("绑元不足");
                break;
            case 7:
                GameGlobal.modelBag.checkRLTips(0)
        }
    }, e.prototype.CG1671 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(1671, e)
    }, e.prototype.GC1672 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                var n = i.readShort();
                Vo_wdFbData.boxedList[n] = n, t.notify(e.UPDATE1), GameGlobal.layerMgr.close(UIConst.WDTDBX);
                break;
            case 2:
                ViewText.text("副本不存在");
                break;
            case 3:
                ViewText.text("未扫荡不能购买");
                break;
            case 4:
                ViewText.text("已购买");
                break;
            case 5:
                ViewText.text("绑定元宝不足");
                break;
            case 6:
                GameGlobal.modelBag.checkRLTips(0)
        }
    }, e.prototype.GC1674 = function (t, i) {
        Util.clearKeys(Vo_wdFbData.boxedList);
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readShort();
            Vo_wdFbData.boxedList[a] = a
        }
        t.notify(e.UPDATE1)
    }, e.GOTEAM = "GOTEAM", e.MANTEAM = "MANTEAM", e.LEFTTEAM = "LEFTTEAM", e.SHOWDATA = "SHOWDATA", e.UPDATE = "UPDATE", e.UPDATE1 = "UPDATE1", e.RECORD = "RECORD", e.BAOVER = "BAOVER", e.SHOP = "SHOP", e.SHAODAN = "SHAODAN", e.charfbID = -1, e.isfighting = !1, e.isfromchat = !1, e
}(BaseModel);
__reflect(ModelWDTD.prototype, "ModelWDTD");
var VWDTDPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = -1, e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = GameGlobal.layerMgr,
            e = this.base;
        e.createPageGrp().createTabGroup(), e.createQuestBtn(), e.addTab("问鼎天道", 0, UIConst.WDTDSEL), e.addTab("天道商店", 1, UIConst.WDTDSHOP), this.assistAwardBtn = e.addTab("协助奖励", 2, UIWDTDinvite.ASSIST_AWARD), t.reg(UIWDTDinvite.ASSIST_AWARD, WDTDassistAwardView, e.pageGrp), t.reg(UIConst.WDTDPAGEPNL, VWDTDPagePnl, e.pageGrp), t.reg(UIConst.WDTDSHOP, VWDTDShop, e.pageGrp), t.reg(UIConst.WDTDSHOPTB, VWDTDShopTip, t.UI_Main), t.reg(UIConst.WDTDBX, VWDTDBX, t.UI_Message), e.btnQuest.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnWenT, this), e.listenTabClick(this.onTabT, this), this.addCloseListen(e.btnClose), e.btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnReturnT, this)
    }, e.prototype.showAssistAwardBtn = function () {
        var t = this.getModel(WDTDinviteModel);
        Vo_wdCeng.getFbPassIdsLen() >= t.minSt ? this.assistAwardBtn.visible = !0 : this.assistAwardBtn.visible = !1
    }, e.prototype.btnReturnT = function () {
        var t = GameGlobal.layerMgr.isOpenView(UIConst.WDTDPAGE);
        if (t) {
            var e = GameGlobal.layerMgr.getView(UIConst.WDTDPAGEPNL);
            e && e.setSel(1)
        } else this.closeHandler()
    }, e.prototype.btnWenT = function (t) {
        ViewWenHao.show(CFG_COMMOND.LIBWFSM[1051].detail)
    }, e.prototype.onTabT = function (t) {
        this.setSel(t.index)
    }, e.prototype.setSel = function (t) {
        switch (this._sel) {
            case 0:
                GameGlobal.layerMgr.close(UIConst.WDTDPAGEPNL);
                break;
            case 1:
                GameGlobal.layerMgr.close(UIConst.WDTDSHOP);
                break;
            case 2:
                this.closeView(WDTDassistAwardView)
        }
        switch (t) {
            case 0:
                GameGlobal.layerMgr.open(UIConst.WDTDPAGEPNL), this.base.title = "问鼎天道";
                break;
            case 1:
                GameGlobal.layerMgr.open(UIConst.WDTDSHOP), this.base.title = "天道商店";
                break;
            case 2:
                this.openView(WDTDassistAwardView), this.base.title = "协助奖励"
        }
        this.base.setTabSelIdx(t), this._sel = t
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), this.setSel(0), this.base.setNoticByIndex(0, this.Notice()), GameGlobal.tick.removeInterv(this.showTeamTip, this);
        var i = GameGlobal.layerMgr.getView(UIConst.MAINMENU);
        i && (i.teamTip.visible = !1), this.CG_GetNotice(), this.showAssistAwardBtn(), this.setAssistAwardNotice()
    }, e.prototype.CG_GetNotice = function () {
        this.getProxy(WDTDinviteProxy).getAwardStateList(), this.getProxy(WDTDinviteProxy).getAssistCount()
    }, e.prototype.setNotice = function () {
        this.base.setNoticByIndex(0, this.Notice())
    }, e.prototype.setAssistAwardNotice = function () {
        1 == this.assistAwardBtn.visible && this.base.setNoticByIndex(2, this.AssistAwardBtnNotice())
    }, e.prototype.AssistAwardBtnNotice = function () {
        var t = !1,
            e = this.getModel(WDTDinviteModel),
            i = e.map.getList();
        for (var o in i) i[o].awardState == E_WINDOW_AWARD_STATE.CAN_AWARD && (t = !0);
        return t
    }, e.prototype.onClose = function () {
        if (t.prototype.onClose.call(this), this.removeMsg(), this.setSel(-1), Vo_wdPlayer.isInTeam()) {
            var e = GameGlobal.layerMgr.getView(UIConst.MAINMENU);
            e && (e.teamTip.visible = !0), GameGlobal.tick.addInterv(this.showTeamTip, 6e4, this, !0)
        }
    }, e.prototype.showTeamTip = function (t) {
        var e = GameGlobal.layerMgr.isOpenView(UIConst.WDTDPNL);
        e || Vo_wdPlayer.isInTeam() && GameGlobal.modelWDTD.CG1659()
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.Notice = function () {
        var t = Vo_wdCeng.FbPassIds,
            e = Vo_wdCeng.FbSdIds;
        for (var i in t) {
            var o = e[i];
            if (!o) return !0
        }
        return !1
    }, e.prototype.addMsg = function () {
        GameGlobal.modelWDTD.on(ModelWDTD.UPDATE1, this.setNotice, this), EventCenter.addMsg(WDTDinviteEvent.MSG_ASSIT_AWARD_BTN, this.showAssistAwardBtn, this), EventCenter.addMsg(WDTDinviteEvent.MSG_UPDATE_AWARDS, this.setAssistAwardNotice, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelWDTD.off(ModelWDTD.UPDATE1, this.setNotice, this), EventCenter.removeMsg(WDTDinviteEvent.MSG_ASSIT_AWARD_BTN, this.showAssistAwardBtn, this), EventCenter.removeMsg(WDTDinviteEvent.MSG_UPDATE_AWARDS, this.setAssistAwardNotice, this)
    }, e
}(BaseEUIView);
__reflect(VWDTDPnl.prototype, "VWDTDPnl");
var VWDTDBX = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WDTDBXSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnGet.label = "开启宝箱", this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.addCloseListen(this)
    }, e.prototype.onT = function (t) {
        t.stopPropagation(), GameGlobal.modelWDTD.CG1671(this.fbid)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(e), this.fbid = e
    }, e.prototype.update = function (t) {
        var e = GameGlobal.modelRole.voMine.bYuanbao;
        this.txtyb.textColor = 200 > e ? 14165028 : 1090116, this.container.numChildren > 0 && this.container.removeChildren();
        var i = CFG_WDTD.LIB1[t];
        if (i)
            for (var o = i.bxzs, n = ConfigHelp.makeVoList(o), a = 0; a < n.length; a++) {
                var s = new eui.Label;
                s.size = 24;
                var r = n[a];
                s.text = r.name + "x" + r.count, s.textColor = this.getColorByQ(r.quality), this.container.addChild(s), s.y = 34 * a
            }
    }, e.prototype.getColorByQ = function (t) {
        switch (t) {
            case 6:
                return 16711680;
            case 5:
                return 16018945;
            default:
                return 1090116
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VWDTDBX.prototype, "VWDTDBX");
var VWDTDFbItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids = [], e._sel = !1, e.skinName = "WDTDFbItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        var e = this;
        e.boss = UIRole.create(), e.part.addChild(e.boss), e.boss.setWay(3), e.Box.addEventListener(egret.TouchEvent.TOUCH_TAP, e.boxT, e), DisplayUtil.popBtnStyle(e.Box), this.xfb = this.fbNum.x, this.setSel(!1)
    }, e.prototype.boxT = function () {
        Vo_wdFbData.isGet(this.vo.id) || GameGlobal.layerMgr.open(UIConst.WDTDBX, this.vo.id)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            if (this.vo = t, this.boss.play(700), this.boss.setMonsterID(t.mx), this.boss.validParts(), this.fbName.source = t.fbName1, this.fbNum.source = t.fbName2, this.finish.visible = t.isPass, t.isPass && !t.isSd && (this.finish.visible = !1), t.isPass) {
                var e = t.tgjl;
                this.stjl.text = "挑战奖励"
            } else e = t.stjl, this.stjl.text = "首通奖励";
            this.Box.visible = t.isPass, this.stjl.visible = this.container.visible = !t.isPass, t.isPass && !t.isSd && (this.stjl.visible = this.container.visible = !0, this.Box.visible = !1), Vo_wdFbData.isGet(t.id) ? this.imgGet.visible = !0 : this.imgGet.visible = !1, ConfigHelp.makeStrGrids(e, this.grids, 0, 0, this.container, !0, 30), this.lock.visible = t.islock;
            var i = t.fbName.split("（")[0].split("");
            4 == i.length ? this.fbNum.x = this.xfb : this.fbNum.x = this.xfb - 26
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel != t && (this._sel = t, this.setSel(t))
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setSel = function (t) {
        this.sel1.visible = t, this.sel2.visible = t
    }, e
}(eui.ItemRenderer);
__reflect(VWDTDFbItem.prototype, "VWDTDFbItem");
var VWDTDPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.page = 1, e.skinName = "WDTDPageSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnRecord.textFlow = HtmlUtil.underLine("查看记录"), this.btnRecord.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnRT, this), GameGlobal.layerMgr.reg(UIConst.WDTDPAGETEAM, VWDTDPageTeam, this.PageGroup), GameGlobal.layerMgr.reg(UIConst.WDTDPAGERECORD, VWDTDPageRecord, this.PageGroup), this.listFuBenDataExml.itemRenderer = VWDTDFbItem, this.data = new eui.ArrayCollection, this.listFuBenDataExml.dataProvider = this.data, this.listFuBenDataExml.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onT, this), this.xchong = this.chongNum.x
    }, e.prototype.onT = function (t) {
        var e = t.item;
        this.CgData(e)
    }, e.prototype.CgData = function (t) {
        if (2 == this.GoRecord) return Vo_wdFbData.sel = t, void GameGlobal.modelWDTD.notify(ModelWDTD.SHOWDATA);
        if (t.islock) return ViewText.text("请先通关上一关卡"), void(this.listFuBenDataExml.selectedIndex = Vo_wdFbData.sel.index);
        var e = GameGlobal.layerMgr.getView(UIConst.WDTDPAGETEAM),
            i = GameGlobal.layerMgr.getView(UIConst.WDTDPAGE);
        return 1 == i.page && 2 == e.curPage ? (Vo_wdFbData.sel.id != t.id && ViewText.text("请先离开队伍再进行选择"), void(this.listFuBenDataExml.selectedIndex = Vo_wdFbData.sel.index)) : (Vo_wdFbData.sel = t, GameGlobal.modelWDTD.notify(ModelWDTD.SHOWDATA), void GameGlobal.modelWDTD.CG1651(t.id))
    }, e.prototype.btnRT = function (t) {
        2 != this.GoRecord && this.setCurPage(2, 1)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), ModelWDTD.isfromchat = !1;
        var i = e;
        this.vo = i, this.setCurPage(i.GoRecord), this.GoRecord = i.GoRecord, this.update(), 1 == i.way ? (this.listFuBenDataExml.selectedIndex = 0, this.CgData(this.listFuBenDataExml.selectedItem)) : 2 == i.way && (this.listFuBenDataExml.selectedIndex = Vo_wdFbData.getIndex(ModelWDTD.charfbID), Vo_wdFbData.sel = this.listFuBenDataExml.selectedItem, GameGlobal.modelWDTD.CG1651(Vo_wdFbData.sel.id), GameGlobal.modelWDTD.notify(ModelWDTD.SHOWDATA)), this.jie.source = VWDTDSelItem.setJie(i.jie), this.chongNum.source = "num_json.y" + i.ceng, i.jie < 3 ? this.chongNum.x = this.xchong : 3 == i.jie || 4 == i.jie ? this.chongNum.x = this.xchong + 26 : this.chongNum.x = this.xchong + 52, GameGlobal.modelWDTD.on(ModelWDTD.UPDATE1, this.update, this), GameGlobal.modelGuanqia.setAutoBoss(!1), this.setScroll()
    }, e.prototype.setScroll = function () {
        var t = this.listFuBenDataExml;
        t.scrollH = 0;
        var e = t.numElements,
            i = t.contentWidth / e,
            o = i * (t.selectedIndex + 1) - t.width;
        o > 0 && egret.Tween.get(t).to({
            scrollH: o
        }, 500, egret.Ease.circInOut)
    }, e.prototype.update = function () {
        Vo_wdFbData.create(this.vo), DisplayUtil.fillDataAC(this.data, Vo_wdFbData.List), Vo_wdFbData.sel && (Vo_wdFbData.setSel(Vo_wdFbData.sel.id), GameGlobal.modelWDTD.notify(ModelWDTD.SHOWDATA), this.listFuBenDataExml.selectedIndex = Vo_wdFbData.sel.index, ModelWDTD.isfighting && (ModelWDTD.isfighting = !1, this.findNextIsLock() || (this.listFuBenDataExml.selectedIndex = Vo_wdFbData.sel.index + 1, this.CgData(this.listFuBenDataExml.selectedItem))))
    }, e.prototype.findNextIsLock = function () {
        for (var t = Vo_wdFbData.List, e = 0; e < t.length; e++)
            if (Vo_wdFbData.sel.index + 1 == t[e].index) return t[e].islock;
        return !0
    }, e.prototype.setCurPage = function (t, e) {
        if (void 0 === e && (e = 2), -1 != this.page) switch (this.page) {
            case 1:
                GameGlobal.layerMgr.close(UIConst.WDTDPAGETEAM);
                break;
            case 2:
                GameGlobal.layerMgr.close(UIConst.WDTDPAGERECORD)
        }
        switch (t) {
            case 1:
                GameGlobal.layerMgr.open(UIConst.WDTDPAGETEAM, e);
                break;
            case 2:
                GameGlobal.layerMgr.open(UIConst.WDTDPAGERECORD, e)
        }
        this.page = t
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelWDTD.off(ModelWDTD.UPDATE1, this.update, this);
        var e = GameGlobal.layerMgr.getView(UIConst.WDTDPAGETEAM);
        e && GameGlobal.tick.removeInterv(e.reflashTime, e)
    }, e
}(BaseEUIView);
__reflect(VWDTDPage.prototype, "VWDTDPage");
var VWDTDPagePnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = -1, e.skinName = "WDTDPagePnlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        GameGlobal.layerMgr.reg(UIConst.WDTDSEL, VWDTDSel, this.pageGrp), GameGlobal.layerMgr.reg(UIConst.WDTDPAGE, VWDTDPage, this.pageGrp)
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), e) this.setSel(e.p, e.vo);
        else {
            if (Vo_wdFbData.sel && Vo_wdPlayer.isInTeam() && !ModelWDTD.isfromchat) {
                ModelWDTD.charfbID = Vo_wdFbData.sel.id;
                var i = Vo_wdCeng.createOneById(ModelWDTD.charfbID);
                return void this.setSel(2, i)
            }
            this.setSel(1)
        }
    }, e.prototype.setSel = function (t, e) {
        switch (void 0 === e && (e = null), this._sel) {
            case 1:
                GameGlobal.layerMgr.close(UIConst.WDTDSEL);
                break;
            case 2:
                GameGlobal.layerMgr.close(UIConst.WDTDPAGE)
        }
        switch (t) {
            case 1:
                GameGlobal.layerMgr.open(UIConst.WDTDSEL);
                break;
            case 2:
                GameGlobal.layerMgr.open(UIConst.WDTDPAGE, e)
        }
        this._sel = t
    }, e.prototype.onClose = function () {
        this.setSel(-1)
    }, e
}(BaseEUIView);
__reflect(VWDTDPagePnl.prototype, "VWDTDPagePnl");
var VWDTDPageRecord = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WDTDPageRecordSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onT, this), this.xfb = this.fbName2.x
    }, e.prototype.onT = function (t) {
        var e = this.page;
        if (1 == e) {
            var i = GameGlobal.layerMgr.getView(UIConst.WDTDPAGE);
            i.setCurPage(1, 1)
        } else if (2 == e) {
            var o = GameGlobal.layerMgr.getView(UIConst.WDTDPAGEPNL);
            o && o.setSel(1)
        }
    }, e.prototype.showData = function () {
        if (2 == this.page) {
            var t = Vo_wdFbData.sel;
            this.setXfb(t), this.fbName1.source = t.fbName1, this.fbName2.source = t.fbName2, GameGlobal.modelWDTD.CG1663(t.id)
        }
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), GameGlobal.modelWDTD.on(ModelWDTD.SHOWDATA, this.showData, this), GameGlobal.modelWDTD.on(ModelWDTD.RECORD, this.setData, this), this.page = e, 1 == e) {
            var i = Vo_wdFbData.sel;
            this.setXfb(i), this.fbName1.source = i.fbName1, this.fbName2.source = i.fbName2, GameGlobal.modelWDTD.CG1663(Vo_wdFbData.sel.id)
        }
    }, e.prototype.setXfb = function (t) {
        var e = t.fbName.split("（")[0].split("");
        4 == e.length ? this.fbName2.x = this.xfb : this.fbName2.x = this.xfb - 26
    }, e.prototype.setData = function () {
        this.team1.text = Vo_wdRecord.fristName, this.team2.text = Vo_wdRecord.fastName, this.huihe1.text = Vo_wdRecord.fristHuiHe, this.huihe2.text = Vo_wdRecord.fastHuiHe, this.time1.text = Vo_wdRecord.fristTime, this.time2.text = Vo_wdRecord.fastTime
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelWDTD.off(ModelWDTD.SHOWDATA, this.showData, this)
    }, e
}(BaseEUIView);
__reflect(VWDTDPageRecord.prototype, "VWDTDPageRecord");
var VWDTDPageTeam = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.curPage = 1, e.grids = [], e.skinName = "WDTDPageTeamSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnShaodan.label = "扫荡本层", this.btnShaodan.setNoticeVis(!0), this.ListTeamExml.itemRenderer = VWDTDTeamItem, this.dataTeam = new eui.ArrayCollection, this.ListTeamExml.dataProvider = this.dataTeam, this.ListMemberExml.itemRenderer = VWDTDTeamMemberItem, this.dataMember = new eui.ArrayCollection, this.ListMemberExml.dataProvider = this.dataMember, this.btnCreate.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnCT, this), this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnJT, this), this.btnShaodan.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnST, this), this.check1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnC1T, this), this.check2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnC2T, this), this.xfb = this.fbName2.x
    }, e.prototype.btnC1T = function (t) {
        this.isAuto = !this.isAuto, this.imgcheck1.visible = this.isAuto, this.isAuto && (e.Time_60 = 60), this.auto60.text = "60秒自动开始战斗"
    }, e.prototype.btnC2T = function (t) {
        this.isFush ? (this.isFush = !1, GameGlobal.modelWDTD.off(ModelWDTD.MANTEAM, this.fushTeam, this)) : (this.isFush = !0, GameGlobal.modelWDTD.on(ModelWDTD.MANTEAM, this.fushTeam, this)), this.imgcheck2.visible = this.isFush
    }, e.prototype.btnCT = function (t) {
        1 == this.curPage ? GameGlobal.modelWDTD.CG1653(1, Vo_wdFbData.sel.id) : 2 == this.curPage && GameGlobal.modelWDTD.CG1659()
    }, e.prototype.btnJT = function (t) {
        1 == this.curPage ? GameGlobal.modelWDTD.CG1653(2, Vo_wdFbData.sel.id) : 2 == this.curPage && (GameGlobal.modelWDTD.CG1657(), e.ltime = !1)
    }, e.prototype.btnST = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.WDTDPAGE),
            i = e.vo.id;
        GameGlobal.modelWDTD.CG1665(i)
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), this.addMsg(), this.isFirst = !0, this.curPage = 1, 1 == e) {
            var i = Vo_wdFbData.sel;
            this.setXfb(i), this.fbName1.source = i.fbName1, this.fbName2.source = i.fbName2, GameGlobal.modelWDTD.CG1651(i.id)
        }
        this.lbInvited.visible = !1
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.update = function () {
        this.upCurPage(), this.showData()
    }, e.prototype.setXfb = function (t) {
        var e = t.fbName.split("（")[0].split("");
        4 == e.length ? this.fbName2.x = this.xfb : this.fbName2.x = this.xfb - 26
    }, e.prototype.downTime = function () {
        GameGlobal.tick.removeInterv(this.reflashTime, this), GameGlobal.modelWDTD.off(ModelWDTD.MANTEAM, this.fushTeam, this), this.isFirst = !0
    }, e.prototype.reflashTime = function (t) {
        e.ltime && t.isAuto && (0 == e.Time_60 && (GameGlobal.modelWDTD.CG1657(), e.Time_60 = 60, t.auto60.text = "60秒自动开始战斗", e.ltime = !1), e.Time_60--, t.auto60.text = e.Time_60 + "秒自动开始战斗")
    }, e.prototype.fushTeam = function () {
        GameGlobal.modelWDTD.CG1657()
    }, e.prototype.overAuto = function (t) {
        e.ltime = !0, e.Time_60 = 60, this.auto60.text = "60秒自动开始战斗", GameGlobal.modelWDTD.CG1651(Vo_wdFbData.sel.id)
    }, e.prototype.upTeam = function () {
        this.curPage = 1, this.upCurPage(), this.reflashTeam()
    }, e.prototype.upMember = function () {
        this.curPage = 2, this.upCurPage(), this.reflashMember()
    }, e.prototype.showData = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.WDTDPAGE);
        if (1 == t.page) {
            var e = Vo_wdFbData.sel;
            this.setXfb(e), this.fbName1.source = e.fbName1, this.fbName2.source = e.fbName2, ConfigHelp.makeStrGrids(e.jlzs, this.grids, 0, 0, this.container, !0, 40), 1 == this.curPage && (e.isPass && !e.isSd ? (this.btnShaodan.visible = !0, this.btnJoin.visible = !1, this.btnCreate.visible = !1) : (this.btnShaodan.visible = !1, this.btnJoin.visible = !0, this.btnCreate.visible = !0))
        }
    }, e.prototype.upCurPage = function () {
        switch (this.curPage) {
            case 1:
                this.scrTeam.visible = !0, this.scrMember.visible = !1, this.TeamGroup.visible = !1, this.btnCreate.label = "创建队伍", this.btnJoin.label = "快速加入", this.showData();
                break;
            case 2:
                this.btnShaodan.visible = !1, this.scrTeam.visible = !1, this.scrMember.visible = !0, this.TeamGroup.visible = Vo_wdPlayer.myselfLeader, this.btnJoin.visible = Vo_wdPlayer.myselfLeader, this.btnCreate.visible = !0, this.btnCreate.label = "离开队伍", this.btnJoin.label = "进入战斗", this.isFirst && Vo_wdPlayer.myselfLeader && (e.Time_60 = 60, this.auto60.text = "60秒自动开始战斗", e.ltime = !0, this.imgcheck1.visible = this.isAuto = !0, this.imgcheck2.visible = this.isFush = !0, this.isFirst = !1, GameGlobal.modelWDTD.on(ModelWDTD.MANTEAM, this.fushTeam, this)), Vo_wdPlayer.myselfLeader && GameGlobal.tick.addInterv(this.reflashTime, 1e3, this)
        }
    }, e.prototype.reflashTeam = function () {
        DisplayUtil.fillDataAC(this.dataTeam, Vo_wdTeam.List)
    }, e.prototype.reflashMember = function () {
        DisplayUtil.fillDataAC(this.dataMember, Vo_wdPlayer.List)
    }, e.prototype.shaodan = function () {
        this.btnShaodan.visible = !1, this.btnJoin.visible = !0, this.btnCreate.visible = !0
    }, e.prototype.onInvite = function () {
        this.lbInvited.visible = !0, GameGlobal.tick.addInterv(this.removeInvited, 18e3, this, !0, null, !0)
    }, e.prototype.removeInvited = function (t) {
        t.lbInvited.visible = !1
    }, e.prototype.addMsg = function () {
        GameGlobal.modelWDTD.on(ModelWDTD.SHOWDATA, this.update, this), GameGlobal.modelWDTD.on(ModelWDTD.GOTEAM, this.upMember, this), GameGlobal.modelWDTD.on(ModelWDTD.UPDATE, this.upTeam, this), GameGlobal.modelWDTD.on(ModelWDTD.BAOVER, this.overAuto, this), GameGlobal.modelWDTD.on(ModelWDTD.LEFTTEAM, this.downTime, this), GameGlobal.modelWDTD.on(ModelWDTD.SHAODAN, this.shaodan, this), EventCenter.addMsg(WDTDinviteEvent.MSG_INVITE, this.onInvite, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelWDTD.off(ModelWDTD.SHOWDATA, this.update, this), GameGlobal.modelWDTD.off(ModelWDTD.GOTEAM, this.upMember, this), GameGlobal.modelWDTD.off(ModelWDTD.UPDATE, this.upTeam, this), GameGlobal.modelWDTD.off(ModelWDTD.MANTEAM, this.fushTeam, this), GameGlobal.modelWDTD.off(ModelWDTD.LEFTTEAM, this.downTime, this), GameGlobal.modelWDTD.off(ModelWDTD.SHAODAN, this.shaodan, this), EventCenter.removeMsg(WDTDinviteEvent.MSG_INVITE, this.onInvite, this)
    }, e.Time_60 = 60, e
}(BaseEUIView);
__reflect(VWDTDPageTeam.prototype, "VWDTDPageTeam");
var VWDTDSel = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/wendingtiandao/WDTDSel.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.ListChong.itemRenderer = VWDTDSelItem, this.data = new eui.ArrayCollection, this.ListChong.dataProvider = this.data
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), Vo_wdCeng.create(), this.reflashData(), GameGlobal.modelWDTD.on(ModelWDTD.UPDATE1, this.reflashData, this)
    }, e.prototype.reflashData = function () {
        DisplayUtil.fillDataAC(this.data, Vo_wdCeng.List)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelWDTD.off(ModelWDTD.UPDATE1, this.reflashData, this)
    }, e
}(BaseEUIView);
__reflect(VWDTDSel.prototype, "VWDTDSel");
var VWDTDSelItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WDTDSelItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this);
        var e = this;
        e.btnGo.label = "进入", e.btnRecord.addEventListener(egret.TouchEvent.TOUCH_TAP, e.btnRT, e), e.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP, e.btnGoT, e), e.boss = UIRole.create(), e.part.addChild(e.boss), e.boss.setWay(3), this.xchong = this.chongNum.x, this.txtRecord.textFlow = [{
            text: "查看记录",
            style: {
                underline: !0
            }
        }]
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            t && (this.vo = t, this.boss.play(700), this.boss.setMonsterID(t.mx), this.boss.validParts(), this.jie.source = e.setJie(t.jie), this.bg.source = "WDTD_json.yjbg" + t.bg.toString(), this.chongNum.source = "num_json.y" + t.ceng.toString(), this.btnGo.setNoticeVis(t.isRed), t.jie < 3 ? this.chongNum.x = this.xchong : 3 == t.jie || 4 == t.jie ? this.chongNum.x = this.xchong + 26 : this.chongNum.x = this.xchong + 52, this.pass.visible = t.isPass, GameGlobal.modelRole.voMine.level >= t.openLev ? (t.isGo ? (this.nopass.visible = !1, this.txtlev.visible = !1) : (this.nopass.visible = !0, this.txtlev.visible = !1), this.btnGo.visible = t.isGo) : (this.nopass.visible = !1, this.txtlev.visible = !0, this.txtlev.text = t.openLev.toString() + "级可进入", this.btnGo.visible = !1))
        },
        enumerable: !0,
        configurable: !0
    }), e.setJie = function (t) {
        switch (t) {
            case 1:
                return "WDTD_json.yjnum";
            case 2:
                return "WDTD_json.sjnum";
            case 3:
                return "WDTD_json.wsjnum";
            case 4:
                return "WDTD_json.wyjnum";
            case 5:
                return "WDTD_json.wwtjnum"
        }
    }, e.prototype.btnGoT = function (t) {
        if (Vo_wdFbData.sel && Vo_wdPlayer.isInTeam() && !ModelWDTD.isfromchat) {
            ModelWDTD.charfbID = Vo_wdFbData.sel.id;
            var e = Vo_wdCeng.createOneById(ModelWDTD.charfbID);
            return void GameGlobal.layerMgr.open(UIConst.WDTDPAGEPNL, {
                p: 2,
                vo: e
            })
        }
        this.vo.GoRecord = 1, GameGlobal.layerMgr.open(UIConst.WDTDPAGEPNL, {
            p: 2,
            vo: this.vo
        })
    }, e.prototype.$onRemoveFromStage = function () {
        this.boss.stopAndClear()
    }, e.prototype.btnRT = function (t) {
        this.vo.GoRecord = 2, GameGlobal.layerMgr.open(UIConst.WDTDPAGEPNL, {
            p: 2,
            vo: this.vo
        })
    }, e
}(eui.ItemRenderer);
__reflect(VWDTDSelItem.prototype, "VWDTDSelItem");
var VWDTDShop = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/wendingtiandao/WDTDShop.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.container.itemRenderer = VWDTDShopItem, this.data = new eui.ArrayCollection, this.container.dataProvider = this.data, Vo_wdShop.create()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.txtnum.text = Vo_wdCeng.getFbPassIdsLen().toString(), this.updateYb(), this.reflash(), GameGlobal.modelWDTD.on(ModelWDTD.SHOP, this.reflash, this), GameGlobal.modelRole.on(ModelRole.MSG_BASEROLEINFO, this.updateYb, this)
    }, e.prototype.updateYb = function () {
        this.ybNum.text = GameGlobal.modelRole.voMine.bYuanbao.toString()
    }, e.prototype.reflash = function () {
        DisplayUtil.fillDataAC(this.data, Vo_wdShop.List)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelWDTD.off(ModelWDTD.SHOP, this.reflash, this), GameGlobal.modelRole.off(ModelRole.MSG_BASEROLEINFO, this.updateYb, this)
    }, e
}(BaseEUIView);
__reflect(VWDTDShop.prototype, "VWDTDShop");
var VWDTDShopItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/wendingtiandao/WDTDShopItem.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.touchT, this), this.item.enableTip()
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t;
            var i = ConfigHelp.makeVoList(t.item)[0];
            this.item.setData(i), this.lname.text = i.name, this.price.text = t.xh.toString(), this.st.visible = t.st > Vo_wdCeng.getFbPassIdsLen(), this.st.text = "首通" + t.st.toString() + "关", this.xg.visible = 0 == t.xgnum ? !1 : !0, t.xgnum == t.numed ? this.xg.textColor = 14165028 : this.xg.textColor = 1090116, this.xg.text = "限购(" + t.numed.toString() + "/" + t.xgnum.toString() + ")", e._sel && (e._sel.vo.id == e._selid ? e._sel.setSel(!0) : e._sel.setSel(!1))
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setSel = function (t) {
        t ? (this.shoeSel1.source = "CM2_json.chosen", this.shoeSel2.source = "WDTD_json.seldi") : (this.shoeSel1.source = "CM2_json.nChosen", this.shoeSel2.source = "WDTD_json.noseldi")
    }, e.prototype.touchT = function (t) {
        e._sel && e._sel.setSel(!1), this.setSel(!0), e._sel = this, e._selid = this.vo.id, this.vo.xgnum != this.vo.numed && GameGlobal.layerMgr.open(UIConst.WDTDSHOPTB, this.vo)
    }, e
}(eui.ItemRenderer);
__reflect(VWDTDShopItem.prototype, "VWDTDShopItem");
var VWDTDShopTip = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VJJCStoreBuyTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this);
        var e = this;
        e.addCloseListen(e.btnClose), e.addCloseListen(e.btnReturn), e.addCloseListen(e.bg), e.btnSure.label = "购买", e.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onTab, e), e.btnMinus.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onTab, e), e.btnMinus10.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onTab, e), e.btnAd10.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onTab, e), DisplayUtil.popBtnStyle(e.btnClose), DisplayUtil.popBtnStyle(e.btnAdd), DisplayUtil.popBtnStyle(e.btnMinus), e.txtCount.text = "1", e.onSellItem.setTxtVis1(!0), e.onSellItem.showOne = !0, e.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP, e.onHand, e), e.iconCost.source = "MainScreen_json.byl", DisplayUtil.remove(this.btnGive), this.friGrp.visible = this.lbselname.visible = !1
    }, e.prototype.onTab = function (t) {
        var e = this,
            i = t.currentTarget,
            o = parseInt(e.txtCount.text);
        switch (i) {
            case e.btnMinus:
                o--;
                break;
            case e.btnAdd:
                o++;
                break;
            case e.btnMinus10:
                o -= this.vo.xgnum > 0 ? this.vo.xgnum : 10;
                break;
            case e.btnAd10:
                o += this.vo.xgnum > 0 ? this.vo.xgnum : 10
        }
        o = Math.max(o, 0), o = Math.min(o, e.maxNum), e.txtCount.text = o.toString(), this.txtCostPrice.text = "x" + this.vo.xh * o
    }, e.prototype.onHand = function (t) {
        GameGlobal.modelWDTD.CG1669(this.vo.id, parseInt(this.txtCount.text))
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e);
        var i = this.vo = e,
            o = ConfigHelp.makeVoList(i.item)[0];
        this.onSellItem.data = o, this.txtName.text = o.name, this.txtDescription.text = o.des, this.txtCostPrice.text = "x" + i.xh.toString(), i.xgnum > 0 ? (this.btnMinus10.label = "-" + i.xgnum.toString(), this.btnAd10.label = "+" + i.xgnum.toString(), this.maxNum = i.xgnum) : (this.btnMinus10.label = "-10", this.btnAd10.label = "+10", this.maxNum = 10)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(PopUpUI);
__reflect(VWDTDShopTip.prototype, "VWDTDShopTip");
var VWDTDTeamItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/wendingtiandao/WDTDTeamItem.exml", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnJoinT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t, this.lname.text = t.leader, this.num.text = "人数:" + t.peopleNum + "/3", 1 == t.state ? (this.Battling.visible = !0, this.btnJoin.visible = !1) : 2 == t.state && (this.Battling.visible = !1, this.btnJoin.visible = !0)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.btnJoinT = function (t) {
        GameGlobal.modelWDTD.CG1661(this.vo.id)
    }, e
}(eui.ItemRenderer);
__reflect(VWDTDTeamItem.prototype, "VWDTDTeamItem");
var VWDTDTeamMemberItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.imgHead = new eui.Image, e.skinName = "WDTDTeamMemberItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnCloseT, this), this.head.addChild(this.imgHead), this.lbInvite.touchEnabled = !0, this.lbInvite.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onInviteT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            if (!t.id) return this.memberGroup.visible = !1, this.lbInvite.visible = !0, void(this.lbInvite.textFlow = HtmlUtil.underLine("邀请"));
            this.memberGroup.visible = !0, this.lbInvite.visible = !1, this.vo = t, this.Leader.visible = t.isLeader, this.lbName.text = t.name, this.lbLevel.text = "等级:" + t.level.toString(), this.lbStrength.text = "战力:" + t.zhanli.toString();
            var e = IconUtil.getRoleHead(t.zhiye);
            this.imgHead.source = e, this.btnClose.visible = Vo_wdPlayer.myselfLeader
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.btnCloseT = function (t) {
        GameGlobal.modelWDTD.CG1655(this.vo.id)
    }, e.prototype.onInviteT = function () {
        if (Vo_wdPlayer.myselfLeader) {
            var t = GameGlobal.mainEtry.getProxy(WDTDinviteProxy),
                e = Vo_wdFbData.sel.id;
            GameGlobal.layerMgr.open(UIWDTDinvite.COMMON_INVITE, {
                proxy: t,
                id: e
            })
        } else ViewText.text("只有队长才能邀请")
    }, e
}(eui.ItemRenderer);
__reflect(VWDTDTeamMemberItem.prototype, "VWDTDTeamMemberItem");
var CommonInviteView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.lastFriendTime = -1e6, e.lastGangTime = -1e6, e.skinName = "BuZhuoQiuZhu", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.sendToFriend), DisplayUtil.popBtnStyle(this.sendToGang), this.sendToFriend.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onFriendT, this), this.sendToGang.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGangT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e && (this.currentProxy = e.proxy, this.currentId = e.id)
    }, e.prototype.onClose = function () {}, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.onFriendT = function () {
        var t = egret.getTimer();
        return t - this.lastFriendTime <= 2e4 ? void ViewText.text("20秒内只能请求协助一次") : (this.lastFriendTime = t, this.currentProxy && this.currentId && this.currentProxy.sendFriendInvite(this.currentId), void this.closeHandler())
    }, e.prototype.onGangT = function () {
        var t = egret.getTimer();
        return t - this.lastGangTime <= 2e4 ? void ViewText.text("20秒内只能请求协助一次") : (this.lastGangTime = t, this.currentProxy && this.currentId && this.currentProxy.sendGangInvite(this.currentId), void this.closeHandler())
    }, e
}(BaseEUIView);
__reflect(CommonInviteView.prototype, "CommonInviteView");
var UIWDTDinvite = function () {
    function t() {}
    return t.COMMON_INVITE = "COMMON_INVITE", t.ASSIST_AWARD = "ASSIST_AWARD", t.AWARD_GET = "AWARD_GET", t
}();
__reflect(UIWDTDinvite.prototype, "UIWDTDinvite");
var WDTDassistAwardView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WDTDAssistAwardSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.list_award.itemRenderer = WDTDassistItem, this.awardData = new eui.ArrayCollection, this.list_award.dataProvider = this.awardData
    }, e.prototype.updateAward = function () {
        this.lb_assistNum.text = this.getModel(WDTDinviteModel).assistCount + "", this.awardData.replaceAll(this.getModel(WDTDinviteModel).map.getList())
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), this.getProxy(WDTDinviteProxy).getAwardStateList(), this.getProxy(WDTDinviteProxy).getAssistCount(), this.list_award.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onListTap, this), this.updateAward()
    }, e.prototype.onListTap = function (t) {
        var e = this,
            i = t.item;
        if (i.cfg) {
            var o = i.cfg.cgjl,
                n = new AwardWindowData;
            n.title = "协助奖励", n.description = "协助通关" + i.assistCount + "次可领取如下奖励", n.award = o, n.state = i.awardState, n.callback = function () {
                e.getProxy(WDTDinviteProxy).getAward(i.cfg.id)
            }, n.thisObj = this, this.openView(EmissaryGetAwardView, n)
        }
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), this.list_award.removeEventListener(eui.ItemTapEvent.ITEM_TAP, this.onListTap, this)
    }, e.prototype.addMsg = function () {
        EventCenter.addMsg(WDTDinviteEvent.MSG_UPDATE_AWARDS, this.updateAward, this)
    }, e.prototype.removeMsg = function () {
        EventCenter.removeMsg(WDTDinviteEvent.MSG_UPDATE_AWARDS, this.updateAward, this)
    }, e
}(BaseEUIView);
__reflect(WDTDassistAwardView.prototype, "WDTDassistAwardView");
var WDTDassistItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WDTDAssistItemSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, e.prototype.dataChanged = function () {
        var t = this.data;
        this.lb_passNum.text = "首通" + t.passCount + "次", this.lb_assistNum.text = "协助" + t.assistCount + "次可领", this.img_isGet.visible = t.isGet, t.awardState == E_WINDOW_AWARD_STATE.CAN_AWARD ? this.iconNotice.visible = !0 : this.iconNotice.visible = !1
    }, e
}(eui.ItemRenderer);
__reflect(WDTDassistItem.prototype, "WDTDassistItem");
var WDTDinviteCtr = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.registUI = function () {
        var t = GameGlobal.layerMgr;
        t.reg(UIWDTDinvite.COMMON_INVITE, CommonInviteView, t.UI_MainMiddle, 1)
    }, e.prototype.registProxys = function () {
        var t = GameGlobal.socketMgr;
        this.registSingleProxy(WDTDinviteProxy, t)
    }, e
}(UIAndProxyBaseCtr);
__reflect(WDTDinviteCtr.prototype, "WDTDinviteCtr");
var WDTDinviteAwardData = function () {
    function t() {
        this.cfg = null, this.passCount = 0, this.assistCount = 0, this.isGet = !1, this.awardState = 0
    }
    return t
}();
__reflect(WDTDinviteAwardData.prototype, "WDTDinviteAwardData");
var EWDTDinviteProto;
! function (t) {
    t[t.SEND_GANG_INVITE = 1675] = "SEND_GANG_INVITE", t[t.SEND_FRIEND_INVITE = 1677] = "SEND_FRIEND_INVITE", t[t.GET_ASSIST_COUNT = 1679] = "GET_ASSIST_COUNT", t[t.GET_AWARD = 1681] = "GET_AWARD", t[t.GET_AWARD_STATE_LIST = 1683] = "GET_AWARD_STATE_LIST"
}(EWDTDinviteProto || (EWDTDinviteProto = {}));
var EWDTDinviteState;
! function (t) {
    t[t.SUCCESS = 1] = "SUCCESS", t[t.NOT_ATTENTION = 2] = "NOT_ATTENTION", t[t.NO_ASSIT_COUNT = 3] = "NO_ASSIT_COUNT"
}(EWDTDinviteState || (EWDTDinviteState = {}));
var EWDTDAwardState;
! function (t) {
    t[t.SUCCESS = 1] = "SUCCESS", t[t.IS_GET = 2] = "IS_GET", t[t.UN_ABLE = 3] = "UN_ABLE", t[t.BAG_FULL = 4] = "BAG_FULL"
}(EWDTDAwardState || (EWDTDAwardState = {}));
var EWDTDBoxState;
! function (t) {
    t[t.CAN_GET = 1] = "CAN_GET", t[t.CAN_NOT_GET = 2] = "CAN_NOT_GET", t[t.ALREADY_GET = 3] = "ALREADY_GET"
}(EWDTDBoxState || (EWDTDBoxState = {}));
var WDTDinviteEvent = function () {
    function t() {}
    return t.pre = "WDTD_INVITE_Event_", t.MSG_ASSIT_AWARD_BTN = t.pre + "MSG_ASSIT_AWARD_BTN", t.MSG_INVITE = t.pre + "MSG_INVITE", t.MSG_UPDATE_AWARDS = t.pre + "MSG_UPDATE_AWARDS", t
}();
__reflect(WDTDinviteEvent.prototype, "WDTDinviteEvent");
var WDTDinviteModel = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.init(), e
    }
    return __extends(e, t), e.prototype.init = function () {
        this.map = new CommondMap;
        var t = CFG_WDTD.LIB4;
        if (this.minSt = t[1].st, !this.awardList) {
            this.awardList = {};
            for (var e in t) {
                var i = t[e],
                    o = new WDTDinviteAwardData;
                o.cfg = i, o.assistCount = i.xz, o.passCount = i.st, this.map.add(o, e);
                var n = i.st;
                n < this.minSt && (this.minSt = n);
                var a = i.xz,
                    s = n + "_" + a;
                this.awardList[s] = i.id
            }
        }
    }, e.prototype.getAwardId = function (t, e) {
        var i = t + "_" + e;
        return this.awardList[i]
    }, e.prototype.updateInviteState = function (t) {
        t == EWDTDinviteState.SUCCESS ? EventCenter.sendMsg(WDTDinviteEvent.MSG_INVITE) : t == EWDTDinviteState.NOT_ATTENTION ? ViewText.text("邀请失败,对方未关注你！") : t == EWDTDinviteState.NO_ASSIT_COUNT && ViewText.text("邀请失败，对方没有协助次数！")
    }, e.prototype.updateAwardState = function (t, e) {
        var i = this.map.getList();
        for (var o in i) {
            var n = i[o].cfg.id,
                a = i[o].cfg.xz,
                s = i[o].cfg.st;
            i[o].isGet ? this.map.getByKey(n).awardState = E_WINDOW_AWARD_STATE.HAVED_AWARD : t >= s && e >= a ? this.map.getByKey(n).awardState = E_WINDOW_AWARD_STATE.CAN_AWARD : this.map.getByKey(n).awardState = E_WINDOW_AWARD_STATE.NOT_AWARD
        }
        this.assistCount = e, EventCenter.sendMsg(WDTDinviteEvent.MSG_UPDATE_AWARDS)
    }, e.prototype.updateGetAwardResult = function (t, e) {
        t == EWDTDAwardState.SUCCESS ? (this.map.getByKey(e).isGet = !0, this.map.getByKey(e).awardState = E_WINDOW_AWARD_STATE.HAVED_AWARD, EventCenter.sendMsg(WDTDinviteEvent.MSG_UPDATE_AWARDS)) : t == EWDTDAwardState.IS_GET ? ViewText.text("已领取过!") : t == EWDTDAwardState.UN_ABLE ? ViewText.text("不可领取!") : t == EWDTDAwardState.BAG_FULL && (ViewText.text("背包已满!"), GameGlobal.layerMgr.open(UIConst.EQUIPRL))
    }, e
}(GameCtrlBase);
__reflect(WDTDinviteModel.prototype, "WDTDinviteModel");
var WDTDinviteProxy = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(1676, this.GC_1676, this), e.regHand(1678, this.GC_1678, this), e.regHand(1680, this.GC_1680, this), e.regHand(1682, this.GC_1682, this), e.regHand(1684, this.GC_1684, this)
    }, e.prototype.sendGangInvite = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(EWDTDinviteProto.SEND_GANG_INVITE, e), EventCenter.sendMsg(WDTDinviteEvent.MSG_INVITE)
    }, e.prototype.sendFriendInvite = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(EWDTDinviteProto.SEND_FRIEND_INVITE, e), EventCenter.sendMsg(WDTDinviteEvent.MSG_INVITE)
    }, e.prototype.getAssistCount = function () {
        var t = this.getBytes();
        this.sendSocket(EWDTDinviteProto.GET_ASSIST_COUNT, t)
    }, e.prototype.getAward = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(EWDTDinviteProto.GET_AWARD, e)
    }, e.prototype.getAwardStateList = function () {
        var t = this.getBytes();
        this.sendSocket(EWDTDinviteProto.GET_AWARD_STATE_LIST, t)
    }, e.prototype.GC_1676 = function (t, e) {
        var i = t.getModel(WDTDinviteModel),
            o = e.readByte();
        i.updateInviteState(o)
    }, e.prototype.GC_1678 = function (t, e) {
        var i = t.getModel(WDTDinviteModel),
            o = e.readByte();
        i.updateInviteState(o)
    }, e.prototype.GC_1680 = function (t, e) {
        var i = t.getModel(WDTDinviteModel),
            o = e.readInt();
        i.updateAwardState(Vo_wdCeng.getFbPassIdsLen(), o)
    }, e.prototype.GC_1682 = function (t, e) {
        var i = t.getModel(WDTDinviteModel),
            o = e.readByte(),
            n = e.readByte();
        i.updateGetAwardResult(o, n)
    }, e.prototype.GC_1684 = function (t, e) {
        for (var i = t.getModel(WDTDinviteModel), o = e.readShort(), n = 0; o > n; n++) {
            var a = e.readByte();
            i.map.getByKey(a) && (i.map.getByKey(a).isGet = !0, EventCenter.sendMsg(WDTDinviteEvent.MSG_UPDATE_AWARDS))
        }
    }, e
}(BaseModel);
__reflect(WDTDinviteProxy.prototype, "WDTDinviteProxy");
var Vo_wdCeng = function () {
    function t() {
        this.GoRecord = -1
    }
    return t.create = function () {
        t.List = [];
        var e = CFG_WDTD.LIB2,
            i = 1,
            o = 1;
        for (var n in e) {
            var a = new t;
            a.id = e[n].id, a.jc = e[n].n, a.start = parseInt(e[n].fb.split(",")[0]), a.end = parseInt(e[n].fb.split(",")[1]), -1 != e[n].n.indexOf("欲界") && (a.jie = 1), -1 != e[n].n.indexOf("色界") && (a.jie = 2), -1 != e[n].n.indexOf("无色界") && (a.jie = 3), -1 != e[n].n.indexOf("无欲界") && (a.jie = 4), -1 != e[n].n.indexOf("无妄天界") && (a.jie = 5), a.ceng = i, 2 == i && (i = 0), i++, a.bg = o, 3 == o && (o = 0), o++, a.openLev = e[n].l, a.mx = e[n].gwmx, a.way = 1, a.parseIsPass(), a.isRed = a.parseIsRed(), t.List.push(a)
        }
        t.parseIsGo()
    }, t.prototype.parseIsPass = function () {
        var e = t.FbPassIds,
            i = this.start,
            o = this.end;
        this.isPass = !0;
        for (var n = i; o >= n; n++) {
            var a = e[n];
            if (!a) {
                this.isPass = !1;
                break
            }
        }
    }, t.prototype.parseIsRed = function () {
        for (var e = t.FbPassIds, i = t.FbSdIds, o = this.start, n = this.end, a = o; n >= a; a++) {
            var s = e[a],
                r = i[a];
            if (s && !r) return !0
        }
        return !1
    }, t.parseIsGo = function () {
        for (var e = t.List, i = 0; i < e.length; i++) i >= 1 ? e[i - 1].isPass ? e[i].isGo = !0 : e[i].isGo = !1 : e[i].isGo = !0
    }, t.createOneById = function (e) {
        var i = CFG_WDTD.LIB2,
            o = CFG_WDTD.LIB1[e].l,
            n = 1;
        for (var a in i) {
            if (i[a].n == o) {
                var s = new t;
                return s.id = i[a].id, s.start = parseInt(i[a].fb.split(",")[0]), s.end = parseInt(i[a].fb.split(",")[1]), s.jc = i[a].n, -1 != i[a].n.indexOf("欲界") && (s.jie = 1), -1 != i[a].n.indexOf("色界") && (s.jie = 2), -1 != i[a].n.indexOf("无色界") && (s.jie = 3), -1 != i[a].n.indexOf("无欲界") && (s.jie = 4), -1 != i[a].n.indexOf("无妄天界") && (s.jie = 5), s.GoRecord = 1, s.ceng = n, s.openLev = i[a].l, s.way = 2, s
            }
            2 == n && (n = 0), n++
        }
    }, t.getFbPassIdsLen = function () {
        var e = 0;
        for (var i in t.FbPassIds) e++;
        return e
    }, t.List = [], t.FbPassIds = {}, t.FbSdIds = {}, t
}();
__reflect(Vo_wdCeng.prototype, "Vo_wdCeng");
var Vo_wdFbData = function () {
    function t() {}
    return t.create = function (e) {
        t.List = [];
        for (var i = CFG_WDTD.LIB1, o = e.start, n = e.end, a = 0, s = o; n >= s; s++)
            if (i[s]) {
                var r = new t;
                r.id = i[s].id, r.isPass = t.setIsPass(r.id), r.isSd = t.setIsSd(r.id), r.fbName = i[s].n, r.setFbName(), r.mx = i[s].gwmx, r.tgjl = i[s].tzjl, r.stjl = i[s].stjl, r.setJlzs(i[s].jlzs), r.index = a, t.List.push(r), a++
            } t.setIsLock()
    }, t.prototype.setFbName = function () {
        var t = this.fbName.split("（")[0],
            e = this.fbName.split("（")[1];
        switch (this.fbName2 = "num2_json.wd" + e.split("")[0], t) {
            case "四大王天":
                this.fbName1 = "WDTD_json.sdtw";
                break;
            case "夜摩天":
                this.fbName1 = "WDTD_json.ymt";
                break;
            case "化乐天":
                this.fbName1 = "WDTD_json.hlt";
                break;
            case "梵身天":
                this.fbName1 = "WDTD_json.fst";
                break;
            case "霄度天":
                this.fbName1 = "WDTD_json.xdt";
                break;
            case "元洞天":
                this.fbName1 = "WDTD_json.ydt";
                break;
            case "妙成天":
                this.fbName1 = "WDTD_json.mct";
                break;
            case "善见天":
                this.fbName1 = "WDTD_json.sjt";
                break;
            case "少净天":
                this.fbName1 = "WDTD_json.shaojt";
                break;
            case "他化天":
                this.fbName1 = "WDTD_json.tht";
                break;
            case "兜率天":
                this.fbName1 = "WDTD_json.dlt";
                break;
            case "自在天":
                this.fbName1 = "WDTD_json.zzt"
        }
    }, t.setIsPass = function (t) {
        var e = Vo_wdCeng.FbPassIds[t];
        return e ? !0 : !1
    }, t.setIsSd = function (t) {
        var e = Vo_wdCeng.FbSdIds[t];
        return e ? !0 : !1
    }, t.setIsLock = function () {
        for (var e = t.List, i = 0; i < e.length; i++) i >= 1 ? e[i - 1].isPass ? e[i].islock = !1 : e[i].islock = !0 : e[i].islock = !1
    }, t.prototype.setJlzs = function (t) {
        for (var e = t.split(","), i = "", o = 0; o < e.length; o++) {
            var n = ";";
            i += "1," + e[o] + ",1", o != e.length - 1 && (i += n)
        }
        this.jlzs = i
    }, t.getIndex = function (e) {
        for (var i = t.List, o = 0; o < i.length; o++)
            if (i[o].id == e) return o;
        return null
    }, t.isGet = function (e) {
        var i = t.boxedList[e];
        return i ? !0 : !1
    }, t.setSel = function (e) {
        for (var i = t.List, o = 0; o < i.length; o++)
            if (i[o].id == e) {
                t.sel = i[o];
                break
            }
    }, t.List = [], t.boxedList = {}, t
}();
__reflect(Vo_wdFbData.prototype, "Vo_wdFbData");
var Vo_wdPlayer = function () {
    function t() {}
    return t.setLeader = function () {
        for (var e = t.List, i = 0; i < e.length; i++)
            if (e[i].isLeader && GameGlobal.modelRole.voMine.id == e[i].id) return !0;
        return !1
    }, t.isInTeam = function () {
        for (var e = t.List, i = 0; i < e.length; i++)
            if (GameGlobal.modelRole.voMine.id == e[i].id) return !0;
        return !1
    }, t.List = [], t
}();
__reflect(Vo_wdPlayer.prototype, "Vo_wdPlayer");
var Vo_wdRecord = function () {
    function t() {}
    return t
}();
__reflect(Vo_wdRecord.prototype, "Vo_wdRecord");
var Vo_wdShop = function () {
    function t() {
        this.numed = 0
    }
    return t.create = function () {
        t.List = [];
        var e = CFG_WDTD.LIB3;
        for (var i in e) {
            var o = new t,
                n = e[i];
            o.id = n.id, o.px = n.px, o.setXg(n.dayxg, n.fxg), o.item = n.item, o.xh = n.xh, o.st = n.count, t.List.push(o)
        }
        t.parseNumed0()
    }, t.prototype.setXg = function (t, e) {
        0 != e ? this.xgnum = e : this.xgnum = t
    }, t.parseNumed0 = function () {
        for (var e = t.idList, i = t.numList, o = 0; o < e.length; o++) t.parseNumed1(e[o], i[o]);
        t.List.sort(this.SortFun)
    }, t.parseNumed1 = function (e, i) {
        for (var o = t.List, n = 0; n < o.length; n++)
            if (o[n].id == e) {
                t.List[n].numed = i;
                break
            }
    }, t.SortFun = function (t, e) {
        var i = (t.xgnum == t.numed && 0 != t.xgnum ? 1e3 : 0) + t.px,
            o = (e.xgnum == e.numed && 0 != e.xgnum ? 1e3 : 0) + e.px;
        return i - o
    }, t.update = function (e, i) {
        for (var o = t.List, n = 0; n < o.length; n++)
            if (o[n].id == e) {
                t.List[n].numed += i;
                break
            } t.List.sort(this.SortFun)
    }, t.List = [], t.idList = [], t.numList = [], t
}();
__reflect(Vo_wdShop.prototype, "Vo_wdShop");
var Vo_wdTeam = function () {
    function t() {}
    return t.List = [], t
}();
__reflect(Vo_wdTeam.prototype, "Vo_wdTeam");
var VWorldMap = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.items = [], e.skinName = "resource/eui_skins/game/map/WorldMapSkin.exml", e
    }
    return __extends(e, t), e.prototype.guideTo = function (t) {
        for (var e = 0; e < this.items.length; e++) {
            var i = this.items[e];
            if (i.cfg.id == t) break
        }
        i && (QuestGuideArrow.getIns().guideTo(i.parent, i.x + 40, i.y + 50), this.scroller.viewport.scrollV = 0)
    }, e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.addCloseListen(this.rect);
        for (var t, e = 1001; 1032 >= e; e++) {
            var t = this["i" + e];
            this.items.push(t);
            var i = CFG_MAP.LIB[e];
            i ? (t.label = i.name, t.setData(i)) : t.visible = !1
        }
        this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchT, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update()
    }, e.prototype.onClose = function () {}, e.prototype.update = function () {
        for (var t = 0, e = this.items.length; e > t; t++) {
            var i = this.items[t];
            i.update()
        }
    }, e.prototype.onTouchT = function (t) {
        if (t.target.isItem) {
            var e = t.target,
                i = GameGlobal.mapScene._curSceneid;
            GameGlobal.modelGuanqia.getBestSceneID();
            i != e.cfg.id && GameGlobal.layerMgr.open(UIConst.WORLDMAPPROMPT, e.cfg)
        }
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VWorldMap.prototype, "VWorldMap");
var VWorldMapItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isItem = !0, e.mapid = 0, e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this._text && (this.lb.text = this._text), this.touchChildren = !1
    }, e.prototype.setData = function (t) {
        this.cfg = t, this.mapid = t.id
    }, Object.defineProperty(e.prototype, "label", {
        get: function () {
            return this._text
        },
        set: function (t) {
            this._text = t, this.lb && (this.lb.text = t)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.update = function () {
        var t = GameGlobal.modelGuanqia.getBestSceneID();
        this.cfg && (t > this.mapid ? (this.label = this.cfg.name, this.currentState = "def") : t == this.mapid ? (this.label = this.cfg.name, this.currentState = "sel") : (this.label = this.cfg.name, this.currentState = "disabled"))
    }, e
}(eui.Component);
__reflect(VWorldMapItem.prototype, "VWorldMapItem");
var VWorldMapPrompt = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/map/WorldMapPromp.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.rect), this.btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onOnT, this)
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), e) {
            this.arg = e, this.lbName.text = e.name;
            var i = GameGlobal.modelGuanqia.getBestSceneID(),
                o = GameGlobal.mapScene._curSceneid;
            if (i > e.id) this.lbMain.text = "已通关", this.lbCond.visible = !1, this.btnOk.label = "确定";
            else if (o == e.id) this.btnOk.label = "确定";
            else {
                this.lbCond.visible = !0;
                var n = CFG_MAP.LIB[e.id],
                    a = n.olv,
                    s = e.id - 1,
                    r = CFG_MAP.LIB[s];
                if (r) var l = r.name;
                GameGlobal.modelRole.voMine.level >= a && i == e.id ? (this.lbMain.text = Lang.reTxt("已达进入条件", a, l), this.btnOk.label = "立即进入") : (this.lbMain.text = Lang.reTxt("人物等级：{0}\n击败{1}所有头目", a, l), this.btnOk.label = "确定")
            }
        }
    }, e.prototype.onOnT = function () {
        var t = GameGlobal.modelGuanqia.getBestSceneID();
        GameGlobal.mapScene._curSceneid;
        t == this.arg.id ? (GameGlobal.mapScene.changeMap(t), this.closeHandler()) : this.closeHandler()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.guideOK = function () {
        QuestGuideArrow.getIns().guideTo(this.btnOk, this.btnOk.width >> 1, 25)
    }, e
}(BaseEUIView);
__reflect(VWorldMapPrompt.prototype, "VWorldMapPrompt");
var Model_WorldNet = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.count = 0, e
    }
    return __extends(e, t), e.sendCmd = function (t, e) {
        return 2303 == t || 2305 == t || t >= 2800 && 2850 >= t ? (WorldSocketMgr.instance.sendCMDBytes(t, e), !0) : !1
    }, e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(2302, this.GC_Cross_askCross_2302, this), e.regHand(2304, this.GC_Cross_loginCross_2304, this)
    }, e.prototype.CG_Cross_askCross_2301 = function (t, e) {
        if (this.count = 0, this.isFlag(2302)) return void ViewText.text("操作频繁，请稍等片刻");
        this.addDelayFlag(2301, 4e3);
        var i = this.getBytes();
        this.type = t, i.writeByte(t), i.writeUTF(e), this.sendSocket(2301, i)
    }, e.prototype.GC_Cross_askCross_2302 = function (t, e) {
        var i = e.readByte(),
            o = e.readUTF();
        switch (console.log("GC2302 arg1=" + i + ",arg2=" + o), i) {
            case 1:
                GameGlobal.layerMgr.open(UIConst.CONNECT_WORLD, "钓鱼(" + t.count++ + "):arg1=" + i + ",arg2=" + o);
                break;
            case 2:
                break;
            case 3:
                var n = o.split("_"),
                    a = n[0],
                    s = n[1];
                WorldSocketMgr.instance.connect("wss://" + a + ":" + parseInt(s), 0);
                break;
            case 4:
                GameGlobal.layerMgr.close(UIConst.CONNECT_WORLD);
                break;
            default:
                GameGlobal.layerMgr.close(UIConst.CONNECT_WORLD)
        }
    }, e.prototype.CG_Cross_loginCross_2303 = function (t, e) {
        var i = this.getBytes();
        i.writeUTF(t), i.writeLong(e), this.sendSocket(2303, i)
    }, e.prototype.GC_Cross_loginCross_2304 = function (t, e) {
        var i = e.readByte();
        console.log("GC2304 arg1=" + i), 4 == i ? GameGlobal.modelFish.CG_JOINFISHIG() : GameGlobal.modelMPBattle.joinMpBattle()
    }, e.prototype.CG_Cross_inScene_2305 = function (t) {
        var e = this.getBytes();
        e.writeInt(t), this.sendSocket(2305, e)
    }, e
}(BaseModel);
__reflect(Model_WorldNet.prototype, "Model_WorldNet");
var View_ConnectWorld = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.oldTime = 0, e.skinName = "SkinConnectWorld", e
    }
    return __extends(e, t), e.prototype.initView = function () {}, e.prototype.timeRun = function (t) {
        t.index > 3 && (t.index = 0);
        for (var e = "", i = 0; i < t.index; i++) e += "。";
        e = "正在链接中央服" + e, t.lbDes.text = e, t.index += 1;
        var o = egret.getTimer();
        o - t.oldTime >= 3e4 && (t.closeHandler(), WorldSocketMgr.instance.close(!0))
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.oldTime <= 0 && (this.oldTime = egret.getTimer(), this.index = 0, GameGlobal.tick.addInterv(this.timeRun, 500, this))
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.oldTime = 0, GameGlobal.tick.removeInterv(this.timeRun, this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(View_ConnectWorld.prototype, "View_ConnectWorld");
var VWoYaoBianQiang = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curPageID = null, e.skinName = "WoYaoBianQiang", e
    }
    return __extends(e, t), e.getTJStr = function () {
        var t = CFG_WYBQ.LIB_WYQB[GameGlobal.modelRole.voMine.level];
        if (t) var e = t.tjzzl;
        else e = 9999;
        return e
    }, e.getETxt = function (t, e) {
        var i, o = t / e;
        return i = o >= .9 ? "SSS" : o >= .7 ? "SS" : o >= .5 ? "S" : o >= .3 ? "A" : "B"
    }, e.getTEIndex = function (t, e) {
        var i, o = t / e;
        return i = o >= .98 ? 5 : o >= .8 ? 4 : o >= .5 ? 3 : o >= .2 ? 2 : 1
    }, e.prototype.initView = function () {
        this.base.title = "我要变强", this.tabList.itemRenderer = VWoYaoBianQiangTab, this.tabList.dataProvider = this.listDataAC = new eui.ArrayCollection, GameGlobal.layerMgr.reg(UIConst.WYBQPAGE, VWoYaoBianQiangPage, this.pageGrp), GameGlobal.layerMgr.reg(UIConst.WYZYPAGE, VWoYaoZiYuanPage, this.pageGrp), this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.tabList.addEventListener(egret.Event.CHANGE, this.onListC, this), this.strTxt = new ImageText, this.strTxt.fy = 130, this.strTxt.charFunc = ImageText.STRFUNC, this.strTxt.container = this, this.lvTxt = new ImageText, this.lvTxt.fy = 125, this.lvTxt.container = this, this.lvTxt.charFunc = ImageText.WQYBFUNC, this.lvTxt.gap = 0
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i), IconUtil.setIconSrc(this.imgTitleBG, "wybqBanner_png"), this.updateList();
        var o = e.getTJStr(),
            n = e.getETxt(GameGlobal.modelRole.voMine.str, o);
        this.lbTJStr.$setText("推荐战力:" + o), 1 == n.length ? (this.lvTxt.layoutFunc = ImageText.WYBQEFUNCL1, this.lvTxt.fx = 100) : 2 == n.length ? (this.lvTxt.layoutFunc = ImageText.WYBQEFUNCL2, this.lvTxt.fx = 83) : (this.lvTxt.layoutFunc = ImageText.WYBQEFUNCL3, this.lvTxt.fx = 78), this.lvTxt.setText(n);
        var a = GameGlobal.modelRole.voMine.str + "";
        this.strTxt.fx = 700 - (27 * a.length + a.length - 1 * this.strTxt.gap) >> 1, this.strTxt.setText(a), this.openPage(UIConst.WYBQPAGE), this.tabList.selectedIndex = 0
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.imgTitleBG), this.openPage(null)
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e.prototype.openPage = function (t, e) {
        void 0 === e && (e = null), this._curPageID && GameGlobal.layerMgr.close(this._curPageID), t && GameGlobal.layerMgr.open(t, e), this._curPageID = t
    }, e.prototype.updateList = function () {
        var t = [{
                name: "我要变强",
                id: UIConst.WYBQPAGE,
                sort: 0
            }],
            e = Util.getTempObj(),
            i = CFG_WYBQ.LIB_WYZY;
        for (var o in i) {
            var n = i[o];
            if (GameGlobal.modelRole.voMine.level >= n.lv && !e[n.t]) {
                var a = {
                    name: n.xq,
                    wyzyid: n.t,
                    uiid: UIConst.WYZYPAGE
                };
                e[n.t] = !0, t.push(a)
            }
        }
        this.listDataAC.source = t
    }, e.prototype.onListC = function (t) {
        var e = t.target,
            i = e.selectedItem;
        i && (i.wyzyid ? this.openPage(UIConst.WYZYPAGE, i.wyzyid) : this.openPage(UIConst.WYBQPAGE))
    }, e
}(BaseEUIView);
__reflect(VWoYaoBianQiang.prototype, "VWoYaoBianQiang");
var VWoYaoBianQiangItem = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnTouch, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            var i = e.getOpenLV(t.type);
            GameGlobal.modelRole.voMine.level < i ? (this.lb.text = t.name, this.lbCondition.text = Lang.reTxt("等级达到{0}开启", i), this.btn.visible = !1) : (this.lb.text = t.name, this.lbCondition.text = "", this.btn.visible = !0), this._data = t;
            var o = this.getCurVal(t.type),
                n = Math.min(1, o / t.zl);
            this.lbPB.$setWidth(280 * n), this.lbValue.$setText(o + "/" + t.zl);
            var a = VWoYaoBianQiang.getTEIndex(o, t.zl);
            this.lbPJ.source = "wybqAltas_json.wqbql" + a
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onBtnTouch = function () {
        var t = this._data.type,
            e = GameGlobal.layerMgr,
            i = UIConst;
        1 == t ? e.open(i.CAST) : 2 == t ? e.open(i.PET) : 3 == t ? e.open(i.HUOBANPAGE) : 4 == t ? e.open(i.HUOBANPAGE, 3) : 5 == t ? e.open(UIConst.HUOBANPAGE, 1) : 6 == t ? e.open(i.FABAO) : 7 == t ? e.open(i.UIID_PEIYANG, 0) : 8 == t ? e.open(i.UIID_PEIYANG, 1) : 9 == t ? e.open(i.UIID_PEIYANG, 2) : 10 == t && e.open(i.UIID_PEIYANG, 3), GameGlobal.layerMgr.close(UIConst.WYBQ)
    }, e.getOpenLV = function (t) {
        var e = 0;
        return 1 == t ? e = CFG_COMMOND.LIB[1022].openlv : 2 == t ? e = CFG_COMMOND.LIB[1013].openlv : 3 == t ? e = CFG_COMMOND.LIB[1011].openlv : 4 == t ? e = CFG_COMMOND.LIB[1071].openlv : 5 == t ? e = CFG_COMMOND.LIB[1011].openlv : 6 == t ? e = CFG_COMMOND.LIB[1081].openlv : 7 == t ? e = CFG_COMMOND.LIB[1037].openlv : 8 == t ? e = CFG_COMMOND.LIB[1038].openlv : 9 == t ? e = CFG_COMMOND.LIB[1039].openlv : 10 == t && (e = CFG_COMMOND.LIB[1075].openlv), e
    }, e.prototype.getCurVal = function (t) {
        var e = 0;
        if (1 == t) e = GameGlobal.modelDuanZao.calculateTotalStr();
        else if (2 == t) e = GameGlobal.modelPet.calculateSZPetStr();
        else if (3 == t) e = VoHuoban.caculateSZZL();
        else if (4 == t) e = GameGlobal.modelhb.szHBFUStr;
        else if (5 == t) e = VoHuoban.calculateSZXLZL();
        else if (6 == t) {
            VoFaBao.List;
            e = VoFaBao.getTotalStr()
        } else 7 == t ? e = VoHorse.getInst().zhanli : 8 == t ? e = VoWing.getInst().zhanli : 9 == t ? e = VoWeapon.getInst().zhanli : 10 == t && (e = VoHalo.getInst().zhanli);
        return e
    }, e
}(eui.Component);
__reflect(VWoYaoBianQiangItem.prototype, "VWoYaoBianQiangItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VWoYaoBianQiangPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WoYaoBianQiangPage", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.list.itemRenderer = VWoYaoBianQiangItem, this.list.dataProvider = this.listDataAC = new eui.ArrayCollection
    }, e.prototype.onOpen = function (t) {
        this.updateList(), GameGlobal.modelhb.CG_HBFWSTR(), GameGlobal.modelhb.on(ModelHB.MSG_CHECKALLFWSTR, this.onCheckHBFWStr, this)
    }, e.prototype.onClose = function () {
        GameGlobal.modelhb.off(ModelHB.MSG_CHECKALLFWSTR, this.onCheckHBFWStr)
    }, e.prototype.updateList = function () {
        var t = CFG_WYBQ.LIB_WYQB[GameGlobal.modelRole.voMine.level],
            e = [];
        if (t)
            for (var i = 1; 10 >= i; i++) e.push({
                type: i,
                name: t["ms" + i],
                zl: t["zl" + i],
                tj: t["tj" + i]
            });
        this.listDataAC.source = e
    }, e.prototype.onCheckHBFWStr = function () {
        this.updateItemByT(4)
    }, e.prototype.updateItemByT = function (t) {
        for (var e = 0, i = this.listDataAC.length; i > e; e++) {
            var o = this.listDataAC.getItemAt(e);
            if (o.type == t) {
                this.listDataAC.itemUpdated(o);
                break
            }
        }
    }, e
}(BaseEUIView);
__reflect(VWoYaoBianQiangPage.prototype, "VWoYaoBianQiangPage");
var VWoYaoBianQiangTab = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel = t, t ? this.currentState = "sel" : this.currentState = "nor"
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.lbName.text = t.name, this.imgRed.visible = !1
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VWoYaoBianQiangTab.prototype, "VWoYaoBianQiangTab", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VWoyaoZiYuanItem = function (t) {
    function e() {
        var e = t.call(this) || this,
            i = e.starTxt = new ImageText;
        return i.container = e, i.fx = 121, i.fy = 80, i.charFunc = ImageText.STARFUNC, e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this.lb.text = t.rk, this._data = t;
            for (var e = t.tjzs, i = "", o = 0; e > o; o++) i += "3";
            this.starTxt.setText(i);
            var n = this.getUnopenTxt();
            n ? (this.lbCondition.text = n, this.btn.visible = !1) : (this.lbCondition.text = "", this.btn.visible = !0)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onBtnT = function () {
        this.data.ope && (14 == this.data.id ? GameGlobal.modelAct.haveAct(1, 19) ? GameGlobal.layerMgr.open(UIConst.ACT, 19) : GameGlobal.modelAct.haveAct(7, 19) && GameGlobal.layerMgr.open(UIConst.JCHD, 7) : ModelTarget.defUserOp(this._data.ope), GameGlobal.layerMgr.close(UIConst.WYBQ))
    }, e.prototype.getUnopenTxt = function () {
        var t = null,
            e = this._data.id,
            i = GameGlobal.modelAct;
        return 7 == e || 15 == e || 42 == e || 48 == e || 55 == e ? t = i.haveActGroup(17) ? null : "每日豪礼在开服7天后开启" : 16 == e || 19 == e ? t = i.haveActGroup(16) ? null : "活动未开启" : 4 == e || 32 == e || 33 == e || 36 == e || 45 == e || 46 == e ? t = GameGlobal.modelRole.voMine.menpaiId ? null : "加入门派后可以参与" : 21 == e ? t = i.haveActGroup(21) ? null : "最近没有合服" : 47 == e ? t = i.haveActGroup(12) ? null : "活动未开启" : 20 == e ? t = i.haveActGroup(18) ? null : "活动未开启" : 13 == e ? t = ModelWeekender.time > 0 ? null : "活动周六周日开启" : 14 == e && (t = GameGlobal.modelAct.haveAct(1, 19) || GameGlobal.modelAct.haveAct(7, 19) ? null : "活动未开启"), t
    }, e
}(eui.Component);
__reflect(VWoyaoZiYuanItem.prototype, "VWoyaoZiYuanItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var VWoYaoZiYuanPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "WoYaoZiYuanPage", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.list.itemRenderer = VWoyaoZiYuanItem, this.list.dataProvider = this.listDataAC = new eui.ArrayCollection
    }, e.prototype.onOpen = function (t) {
        this.updateList(t)
    }, e.prototype.updateList = function (t) {
        var e = CFG_WYBQ.LIB_WYZY,
            i = [];
        for (var o in e) e[o].t == t && i.push(e[o]);
        this.listDataAC.source = i
    }, e
}(BaseEUIView);
__reflect(VWoYaoZiYuanPage.prototype, "VWoYaoZiYuanPage");
var VWsjPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curst = -1, e.skinName = "WsjPnlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this,
            e = this.base,
            i = GameGlobal.layerMgr;
        this.addCloseListen(e.btnClose).addCloseListen(e.btnReturn), e.createTabGroup().createPageGrp(), i.reg(UIConst.CYDH, ViewCYJ_jieRiDuiHuan, e.pageGrp), i.reg(UIConst.MIDFESTRABBIT, ViewFestRabbit, e.pageGrp), i.reg(UIConst.MIDFESTLB, ViewMidFestLB, e.pageGrp), e.addTab("节日兑换", 0, UIConst.CYDH), e.addTab("捉捣蛋鬼", 1, UIConst.MIDFESTRABBIT), e.addTab("直购礼包", 2, UIConst.MIDFESTLB), e.listenTabClick(t.onTbtn, t)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e ? this.base.setTabSelIdx(e, !0) : this.base.setTabSelIdx(0, !0), GameGlobal.tick.addInterv(this.tick, 1e3, this), GameGlobal.modelMidFestival.on(ModelMidFestival.MSG_RABBIT, this.guiRedT, this), GameGlobal.modelMidFestival.CG4013()
    }, e.prototype.onClose = function () {
        this.setCurSt(-1), GameGlobal.tick.removeInterv(this.tick, this), GameGlobal.modelMidFestival.off(ModelMidFestival.MSG_RABBIT, this.guiRedT, this)
    }, e.prototype.guiRedT = function () {
        this.base.setNoticByIndex(1, !1);
        var t = Vo_RabbitItemjl.Map;
        for (var e in t) {
            var i = t[e];
            if (1 == i.state) {
                this.base.setNoticByIndex(1, !0);
                break
            }
        }
    }, e.prototype.tick = function (t) {
        var e = GameGlobal.modelAct.actData.getChildByID(27);
        if (e) {
            var i = e.getChildByID(57);
            if (!i) return void t.closeHandler();
            var o = i.getRemainSec();
            0 > o && (ViewText.text("活动已结束"), t.closeHandler())
        } else t.closeHandler()
    }, e.prototype.onTbtn = function (t) {
        var e = t.sort;
        CFG_COMMOND.canDo(t.bindSysID) && (this.base.title = t.text, this.setCurSt(e))
    }, e.prototype.setCurSt = function (t) {
        if (this._curst != t) {
            var e = GameGlobal.layerMgr;
            switch (this._curst) {
                case 0:
                    e.close(UIConst.CYDH);
                    break;
                case 1:
                    e.close(UIConst.MIDFESTRABBIT);
                    break;
                case 2:
                    e.close(UIConst.MIDFESTLB)
            }
            switch (t) {
                case 0:
                    e.open(UIConst.CYDH);
                    break;
                case 1:
                    e.open(UIConst.MIDFESTRABBIT);
                    break;
                case 2:
                    e.open(UIConst.MIDFESTLB)
            }
            this.base.setTabSelIdx(t), this._curst = t
        }
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VWsjPnl.prototype, "VWsjPnl");
var ModelXDComposite = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.datasByType = {}, e.finishedMap = {}, e.regMap = {}, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(3480, this.GC3480, this), e.regHand(3482, this.GC3482, this), e.regHand(3484, this.GC3484, this)
    }, e.prototype.GC3480 = function (t, i) {
        t.noticeState = 1 == i.readByte(), t.notify(e.msg_notice)
    }, e.prototype.CG3481 = function () {
        this.sendSocket(3481, this.getBytes())
    }, e.prototype.GC3482 = function (t, i) {
        for (var o = 0, n = i.readShort(); n > o; o++) {
            var a = i.readShort();
            t.update(a)
        }
        t.notify(e.msg_datas)
    }, e.prototype.CG3483 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(3483, e)
    }, e.prototype.GC3484 = function (t, e) {
        var i = e.readByte();
        1 == i ? t.CG3481() : ViewText.text([null, null, "条件不足", "已激活"][i])
    }, e.prototype.update = function (t) {
        this.finishedMap[t] = !0
    }, e.prototype.initLib = function () {
        var t = CFG_XDComposite.LIB;
        for (var e in t) {
            var i = t[e],
                o = i.pos;
            if (!this.datasByType[o]) {
                var n = {};
                n.cfg = CFG_XDComposite.LIB[i.id], n.finishId = 0, this.datasByType[o] = n
            }
        }
    }, e.prototype.getInialDatas = function () {
        var t = [];
        for (var e in this.datasByType) {
            var i = this.datasByType[e];
            t.push(i)
        }
        return t
    }, e.prototype.getDatasByType = function (t) {
        if (this.regMap[t]) return this.regMap[t];
        var e = CFG_XDComposite.LIB,
            i = [];
        for (var o in e) {
            var n = e[o],
                a = parseInt(n.pos);
            a == t && i.push(e[o])
        }
        return this.regMap[t] = i, i
    }, e.msg_datas = "msg_datas", e.msg_notice = "msg_notice", e
}(BaseModel);
__reflect(ModelXDComposite.prototype, "ModelXDComposite");
var VXDComposite = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.attDatas = [], e.skinName = "VXDCompositeSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.list.dataProvider = this.sourceData = new eui.ArrayCollection, this.list.itemRenderer = ItemXDCompType, this.list.useVirtualLayout = !1;
        for (var e = 1; 3 >= e; e++) this["btnHand_1_" + e].label = "激活", this["iconGot_1_" + e].visible = !1, this["btnHand_1_" + e].addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this);
        for (var e = 1; 4 >= e; e++) this["btnHand_2_" + e].label = "激活", this["iconGot_2_" + e].visible = !1, this["btnHand_2_" + e].addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this);
        this.container1.dataProvider = this.sourceData2 = new eui.ArrayCollection, this.container1.itemRenderer = ItemXDCompDetail, this.container1.useVirtualLayout = !1, this.container2.dataProvider = this.sourceData3 = new eui.ArrayCollection, this.container2.itemRenderer = ItemXDCompDetail, this.container2.useVirtualLayout = !1, this.uirole = UIRole.create(), this.mxContainer.addChild(this.uirole), this.mxContainer.scaleX = this.mxContainer.scaleY = 1.5, this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP, this.onSel, this), this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.imgtext = new ImageText, this.imgtext.charFunc = ImageText.STRFUNC, this.imgtext.container = this.strContainer, GameGlobal.modelxdComposite.initLib(), this.sourceData.source = GameGlobal.modelxdComposite.getInialDatas(), DisplayUtil.popBtnStyle(this.leftBtn), DisplayUtil.popBtnStyle(this.rightBtn), this.base.title = "羁绊", new ScrollMove(this.rightBtn, this.leftBtn, this.list, "width"), this.setSel(this.sourceData.getItemAt(0)), this.base.createQuestBtn(), this.base.createQuestTxt(CFG_COMMOND.LIBWFSM[CFG_COMMOND.XDCOMP].detail)
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget.va;
        GameGlobal.modelxdComposite.CG3483(e.id)
    }, e.prototype.onSel = function (t) {
        var e = t.item;
        this.isActive(e.cfg) ? this.setSel(e) : ViewText.text("未满足开启条件!")
    }, e.prototype.isActive = function (t) {
        return 3 != t.type || CFG_COMMOND.isOpen(CFG_COMMOND.FABAO, !1) ? !0 : !1
    }, e.prototype.setSel = function (t) {
        this.list.selectedItem = t, this.selVo = t, this.display()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelxdComposite.on(ModelXDComposite.msg_datas, this.onUpdate, this), GameGlobal.modelxdComposite.CG3481()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelxdComposite.off(ModelXDComposite.msg_datas, this.onUpdate, this)
    }, e.prototype.onUpdate = function () {
        DisplayUtil.fillDataAC(this.sourceData, this.sourceData.source), this.list.validateNow(), this.setSel(this.selVo ? this.selVo : this.sourceData.getItemAt(0)), this.display()
    }, e.prototype.display = function () {
        this.displayMiddle(), this.displayBottom1(), this.displayBottom2();
        for (var t = this.list.selectedItem, e = GameGlobal.modelxdComposite, i = (t.cfg, 0), o = this.attDatas.length, n = 0; o > n; n++) {
            var a = this.attDatas[n];
            a && e.finishedMap[a.id] && (i += ConfigHelp.caculateStrByIntArr(Util.strToIntArr(a.sx)))
        }
        this.imgtext.setText("z" + i)
    }, e.prototype.displayMiddle = function () {
        var t = this.list.selectedItem,
            e = t.cfg;
        switch (IconUtil.setIconSrc(this.iconShow, e.source + "_png"), e.type) {
            case 1:
                this.mxContainer.visible = !0, this.iconShow.visible = !1;
                for (var i = e.xdzh.split(","), o = e.lx.split(","), n = 0; n < o.length; n++) {
                    var a = parseInt(o[n]),
                        s = parseInt(i[n]);
                    this.skinHand(a, s)
                }
                break;
            case 2:
                this.mxContainer.visible = !1, this.uirole.stopAndClear(), this.iconShow.visible = !0;
                break;
            case 3:
                this.mxContainer.visible = !1, this.uirole.stopAndClear(), this.iconShow.visible = !0;
                break;
            case 4:
                this.mxContainer.visible = !1, this.uirole.stopAndClear(), this.iconShow.visible = !0;
                break;
            case 5:
                this.mxContainer.visible = !1, this.uirole.stopAndClear(), this.iconShow.visible = !0
        }
    }, e.prototype.skinHand = function (t, e) {
        var i = this.uirole,
            o = GameGlobal.modelRole.voMine.job,
            n = GameGlobal.modelRole.voMine.sceneChars[0],
            a = i._body || n._body,
            s = i._halo || n._halo,
            r = i._horse || n._horse,
            l = i._wing || n._wing,
            h = i._weapon || n._weapon;
        switch (t) {
            case 1:
                h = 1 == o ? CFG_PeiYang.LIB_WEAPONSKIN[e].mx : CFG_PeiYang.LIB_WEAPONSKIN[e].mxv;
                break;
            case 2:
                s = e;
                break;
            case 3:
                l = e;
                break;
            case 4:
                r = e
        }
        i.setBody(a), i.setHorse(r), i.setWing(l), i.setWeapon(h), i.setHalo(s), i.setVal(3), i.validParts(), i.play()
    }, e.prototype.displayBottom1 = function () {
        var t = this.list.selectedItem,
            e = GameGlobal.modelxdComposite,
            i = e.getDatasByType(t.cfg.pos);
        if (this.attDatas.length = 0, 3 == i.length) {
            this.group1.visible = !0, this.group2.visible = !1;
            for (var o = 1; 3 >= o; o++) {
                var n = o - 1,
                    a = i[n];
                this["txtInfo_1_" + o].text = a.mc, this["txtAtt_1_" + o].text = this.parseAtt(a), 1 == e.finishedMap[a.id] ? (this["btnHand_1_" + o].visible = !1, this["iconGot_1_" + o].visible = !0, this.attDatas.push(a)) : (this["btnHand_1_" + o].visible = !0, this["btnHand_1_" + o].setNoticeVis(this.canBeEnable(a)), this["iconGot_1_" + o].visible = !1, this["btnHand_1_" + o].va = a, this.attDatas.push(a))
            }
        } else if (4 == i.length) {
            this.group1.visible = !1, this.group2.visible = !0;
            for (var o = 1; 4 >= o; o++) {
                var n = o - 1;
                a = i[n], this["txtInfo_2_" + o].text = a.mc, this["txtAtt_2_" + o].text = this.parseAtt(a), 1 == e.finishedMap[a.id] ? (this["btnHand_2_" + o].visible = !1, this["iconGot_2_" + o].visible = !0, this.attDatas.push(a)) : (this["btnHand_2_" + o].visible = !0, this["btnHand_2_" + o].setNoticeVis(this.canBeEnable(a)), this["iconGot_2_" + o].visible = !1, this["btnHand_2_" + o].va = a, this.attDatas.push(a))
            }
        }
    }, e.prototype.canBeEnable = function (t) {
        var e = t.tj,
            i = t.xdzh.split(","),
            o = t.lx.split(",");
        switch (t.type) {
            case 1:
                for (var n = 0, a = 0; a < i.length; a++) {
                    var s, r = i[a],
                        l = o[a];
                    1 == l ? s = VoWeapon.getInst().skinMap.getByKey(r) : 2 == l ? s = VoHalo.getInst().skinMap.getByKey(r) : 3 == l ? s = VoWing.getInst().skinMap.getByKey(r) : 4 == l && (s = VoHorse.getInst().skinMap.getByKey(r)), s.isJH && n++
                }
                return n >= e ? !0 : !1;
            case 2:
                if (n = 0, 0 == e) {
                    for (var a = 0; a < i.length; a++) {
                        var r = i[a],
                            l = o[a],
                            h = VoHuoban.map.getByKey(r);
                        h.state > 1 && n++
                    }
                    return n >= i.length ? !0 : !1
                }
                for (var a = 0; a < i.length; a++) {
                    var r = i[a],
                        l = o[a];
                    h = VoHuoban.map.getByKey(r), h.voStar.level >= e && n++
                }
                return n >= i.length ? !0 : !1;
            case 3:
                if (!CFG_COMMOND.isOpen(CFG_COMMOND.FABAO, !1)) return !1;
                if (n = 0, 0 == e) {
                    for (var a = 0; a < i.length; a++) {
                        var r = i[a],
                            l = o[a],
                            c = VoFaBao.getDataByCfgId(r);
                        c.jh && n++
                    }
                    return n >= i.length ? !0 : !1
                }
                for (var a = 0; a < i.length; a++) {
                    var r = i[a],
                        l = o[a];
                    c = VoFaBao.getDataByCfgId(r), c.jh && c.QHlev >= e && n++
                }
                return n >= i.length ? !0 : !1;
            case 4:
                if (n = 0, 0 == e) {
                    for (var a = 0; a < i.length; a++) {
                        var r = i[a],
                            l = o[a],
                            p = GameGlobal.modelPet.getPetVoByPetID(r);
                        p.isEnable && n++
                    }
                    return n >= i.length ? !0 : !1
                }
                for (var a = 0; a < i.length; a++) {
                    var r = i[a],
                        l = o[a];
                    p = GameGlobal.modelPet.getPetVoByPetID(r), p.isEnable && p.petcfg.d >= e && n++
                }
                return n >= i.length ? !0 : !1;
            case 5:
                if (n = 0, 0 == e) {
                    for (var a = 0; a < i.length; a++) {
                        var r = i[a],
                            l = o[a];
                        this.getOwnFuWenInfo(r) && n++
                    }
                    return n >= i.length ? !0 : !1
                }
                for (var a = 0; a < i.length; a++) {
                    var r = i[a],
                        l = o[a],
                        u = this.getOwnFuWenInfo(r);
                    u && u.level >= e && n++
                }
                return n >= i.length ? !0 : !1
        }
    }, e.noticeHead = function (t) {
        for (var e = GameGlobal.layerMgr.getView(UIConst.XDCOMPOSITE), i = GameGlobal.modelxdComposite.getDatasByType(t.pos), o = 0; o < i.length; o++) {
            var n = i[o];
            if (!GameGlobal.modelxdComposite.finishedMap[n.id] && e && e.canBeEnable(n)) return !0
        }
        return !1
    }, e.prototype.getOwnFuWenInfo = function (t) {
        var e;
        for (var i in VoHBFuWen.map.getMap()) {
            var o = VoHBFuWen.map.getByKey(i);
            o.cfg.id == t && (e ? e.level < o.level && (e = o) : e = o)
        }
        for (var i in VoHuoban.map.getMap())
            for (var n = VoHuoban.map.getByKey(i), a = n.voFuWens, s = 0; s < a.length; s++) {
                var o = a[s];
                o.cfg.id == t && (!e || e.level < o.level) && (e = o)
            }
        return e
    }, e.prototype.parseAtt = function (t) {
        for (var e = VoAttribute.parse(t.sx), i = "", o = 0; o < e.length; o++) {
            var n = e[o];
            i += 1e4 == CFG_ATTR.LIB[n.id].sb ? n.name + ": " + MathUtil.floor2Fix(100 * n.val / 1e4) + "%\n" : n.name + ": " + n.val + "\n"
        }
        return i
    }, e.prototype.displayBottom2 = function () {
        for (var t = this.list.selectedItem, e = t.cfg, i = e.xdzh.split(","), o = e.lx.split(","), n = [], a = [], s = 0; s < o.length; s++) {
            var r = {};
            if (r.id = parseInt(i[s]), r.type = parseInt(o[s]), !r.id || !r.type) break;
            n.length < 2 ? n.push(r) : a.push(r)
        }
        DisplayUtil.fillDataAC(this.sourceData2, n), DisplayUtil.fillDataAC(this.sourceData3, a)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.iconShow, null), this.uirole && this.uirole.stopAndClear(), this.selVo = null, this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(VXDComposite.prototype, "VXDComposite");
var ItemXDCompDetail = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.linkType = -1, e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemXDCompDetailSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.txtName.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.icon.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onFuWenTip, this)
    }, e.prototype.onFuWenTip = function () {
        8 == this.linkType && (this.linkInfo ? GameGlobal.layerMgr.open(UIConst.HBFUWENTIPS, this.linkInfo) : GameGlobal.layerMgr.open(UIConst.FUWENTIP, this.backInfo))
    }, e.prototype.onHand = function () {
        var t = this.linkInfo,
            e = null;
        switch (this.linkType) {
            case 1:
                GameGlobal.layerMgr.open(UIConst.UIID_PEIYANGSKIN, VoWeapon.getInst()), e = GameGlobal.layerMgr.getView(UIConst.UIID_PEIYANGSKIN), e.setSel(t), GameGlobal.layerMgr.close(UIConst.XDCOMPOSITE);
                break;
            case 2:
                GameGlobal.layerMgr.open(UIConst.UIID_PEIYANGSKIN, VoHalo.getInst()), e = GameGlobal.layerMgr.getView(UIConst.UIID_PEIYANGSKIN), e.setSel(t), GameGlobal.layerMgr.close(UIConst.XDCOMPOSITE);
                break;
            case 3:
                GameGlobal.layerMgr.open(UIConst.UIID_PEIYANGSKIN, VoWing.getInst()), e = GameGlobal.layerMgr.getView(UIConst.UIID_PEIYANGSKIN), e.setSel(t), GameGlobal.layerMgr.close(UIConst.XDCOMPOSITE);
                break;
            case 4:
                GameGlobal.layerMgr.open(UIConst.UIID_PEIYANGSKIN, VoHorse.getInst()), e = GameGlobal.layerMgr.getView(UIConst.UIID_PEIYANGSKIN), e.setSel(t), GameGlobal.layerMgr.close(UIConst.XDCOMPOSITE);
                break;
            case 5:
                GameGlobal.layerMgr.open(UIConst.HUOBANPAGE), e = GameGlobal.layerMgr.getView(UIConst.HUOBANPAGE), e.setSelHuoban(t), GameGlobal.layerMgr.close(UIConst.XDCOMPOSITE);
                break;
            case 6:
                GameGlobal.layerMgr.open(UIConst.FABAO), e = GameGlobal.layerMgr.getView(UIConst.FABAO), e.setSel(t), GameGlobal.layerMgr.close(UIConst.XDCOMPOSITE);
                break;
            case 7:
                GameGlobal.layerMgr.open(UIConst.PET), GameGlobal.modelPet.selSelPos(t.pos), GameGlobal.layerMgr.close(UIConst.XDCOMPOSITE);
                break;
            case 8:
                t ? (GameGlobal.layerMgr.open(UIConst.HBFUWENQH, t), GameGlobal.layerMgr.close(UIConst.XDCOMPOSITE)) : ViewText.text("您还没拥有该符文!")
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            switch (this._data = t, this.txtName.size = 20, this.linkType = t.type, this.updateEff(!1), t.type) {
                case 1:
                    var e = VoWeapon.getInst().skinMap.getByKey(t.id);
                    this.txtName.textFlow = HtmlUtil.underLine(e.cfg.n), e.isJH ? this.txtState.text = "已激活" : this.txtState.text = "未激活", this.icon.source = IconUtil.getIconUrl(CFG_Item.LIB[e.cfg.dj].icon), this.startGroup.visible = !1, 1 == e.cfg.quality ? this.bg.source = "CM1_json.grid1" : this.bg.source = "CM1_json.bm_gridbg" + e.cfg.quality, this.updateEff(CFG_Item.LIB[e.cfg.dj].quality >= 5), this.linkInfo = e;
                    break;
                case 2:
                    var e = VoHalo.getInst().skinMap.getByKey(t.id);
                    this.txtName.textFlow = HtmlUtil.underLine(e.cfg.n), e.isJH ? this.txtState.text = "已激活" : this.txtState.text = "未激活", this.icon.source = IconUtil.getIconUrl(CFG_Item.LIB[e.cfg.dj].icon), this.startGroup.visible = !1, 1 == e.cfg.quality ? this.bg.source = "CM1_json.grid1" : this.bg.source = "CM1_json.bm_gridbg" + e.cfg.quality, this.updateEff(CFG_Item.LIB[e.cfg.dj].quality >= 5), this.linkInfo = e;
                    break;
                case 3:
                    var e = VoWing.getInst().skinMap.getByKey(t.id);
                    this.txtName.textFlow = HtmlUtil.underLine(e.cfg.n), e.isJH ? this.txtState.text = "已激活" : this.txtState.text = "未激活", this.icon.source = IconUtil.getIconUrl(CFG_Item.LIB[e.cfg.dj].icon), this.startGroup.visible = !1, 1 == e.cfg.quality ? this.bg.source = "CM1_json.grid1" : this.bg.source = "CM1_json.bm_gridbg" + e.cfg.quality, this.updateEff(CFG_Item.LIB[e.cfg.dj].quality >= 5), this.linkInfo = e;
                    break;
                case 4:
                    var e = VoHorse.getInst().skinMap.getByKey(t.id);
                    this.txtName.textFlow = HtmlUtil.underLine(e.cfg.n), e.isJH ? this.txtState.text = "已激活" : this.txtState.text = "未激活", this.icon.source = IconUtil.getIconUrl(CFG_Item.LIB[e.cfg.dj].icon), this.startGroup.visible = !1, 1 == e.cfg.quality ? this.bg.source = "CM1_json.grid1" : this.bg.source = "CM1_json.bm_gridbg" + e.cfg.quality, this.updateEff(CFG_Item.LIB[e.cfg.dj].quality >= 5), this.linkInfo = e;
                    break;
                case 5:
                    var i = VoHuoban.map.getByKey(t.id);
                    this.txtName.textFlow = HtmlUtil.underLine(i.cfg.n), this.icon.source = IconUtil.getIconUrl(i.cfg.icon), this.startGroup.removeChildren(), this.startGroup.visible = !0, this.startGroup.y = 100;
                    for (var o = i.voStar, n = 0; o && n < parseInt(o.cfg.hblevel); n++) {
                        var a = new eui.Image("CMS1_json.bm_star1");
                        a.width = a.height = 20, this.startGroup.addChild(a)
                    }
                    i.state > 1 ? this.txtState.text = "已激活" : this.txtState.text = "未激活", this.bg.source = "CM1_json.bm_gridbg" + i.cfg.pz, this.updateEff(i.cfg.pz >= 6), this.linkInfo = i;
                    break;
                case 6:
                    var s = VoFaBao.getDataByCfgId(t.id);
                    this.txtName.textFlow = HtmlUtil.underLine(s.name), this.icon.source = IconUtil.getIconUrl(s.icon), this.startGroup.removeChildren(), this.startGroup.visible = !0, this.startGroup.y = 100;
                    for (var r = s.QHlev, n = 0; r > n; n++) {
                        var a = new eui.Image("CMS1_json.bm_star1");
                        a.width = a.height = 20, this.startGroup.addChild(a)
                    }
                    s.jh ? this.txtState.text = "已激活" : this.txtState.text = "未激活", this.bg.source = "CM1_json.bm_gridbg" + (s.level + 2), this.linkInfo = s;
                    break;
                case 7:
                    var l = GameGlobal.modelPet.getPetVoByPetID(t.id);
                    this.txtName.textFlow = HtmlUtil.underLine(l.getName()), this.bg.source = "CM1_json.bm_gridbg" + l.basecfg.ys, this.icon.source = IconUtil.getIconUrl(l.basecfg.icon), this.startGroup.visible = !1, l.isEnable ? (this.txtState.text = l.petcfg.d + "阶", this.bg.source = "CM1_json.bm_gridbg" + l.petcfg.ys, this.updateEff(l.petcfg.ys >= 6)) : (this.txtState.text = "0阶", this.bg.source = "CM1_json.bm_gridbg" + l.basecfg.ys, this.updateEff(!1)), this.linkInfo = l;
                    break;
                case 8:
                    var h = VoFuWen.create();
                    h.init(t.id), this.txtName.textFlow = HtmlUtil.underLine(h.name), this.txtName.size = 16, this.icon.source = IconUtil.getIconUrl(h.icon), this.startGroup.visible = !0, this.startGroup.removeChildren(), this.startGroup.y = 20, r = h.xj;
                    for (var n = 0; r > n; n++) {
                        var a = new eui.Image("CMS1_json.bm_star1");
                        a.width = a.height = 20, this.startGroup.addChild(a)
                    }
                    var c;
                    for (var p in VoHBFuWen.map.getMap()) {
                        var u = VoHBFuWen.map.getByKey(p);
                        u.cfg.id == h.id && (c ? c.level < u.level && (c = u) : c = u)
                    }
                    for (var p in VoHuoban.map.getMap())
                        for (var d = VoHuoban.map.getByKey(p), f = d.voFuWens, n = 0; n < f.length; n++) u = f[n], u.cfg.id == h.id && (c ? c.level < u.level && (c = u) : c = u);
                    c ? (this.txtState.text = c.level + "级", this.linkInfo = c) : (this.txtState.text = "未拥有", this.backInfo = h), this.updateEff(!0)
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.updateEff = function (t) {
        t ? this._eff ? this._eff.setVal("uieff/grid6") : this._eff = EffectMgr.addEff("uieff/grid6", this.effCont, 0, 0, 1e3, -1, !0) : this._eff && (EffectMgr.getIns().removeEff(this._eff), this._eff = null)
    }, e
}(ItemBase);
__reflect(ItemXDCompDetail.prototype, "ItemXDCompDetail");
var ItemXDCompType = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemXDCompTypeSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.cfg;
            this.iconType.source = "xdComposite_json." + e.source + "_xdComp", this.txtName.text = e.type_name, this.imgNotice.visible = VXDComposite.noticeHead(t.cfg)
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        set: function (t) {
            t ? (this.iconLbBg.visible = !0, this.iconLbBg1.visible = !1, this.iconChosen.visible = !0) : (this.iconLbBg.visible = !1, this.iconLbBg1.visible = !0, this.iconChosen.visible = !1)
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemXDCompType.prototype, "ItemXDCompType");
var HallOfFameModel = function () {
    function t() {}
    return t.update = function () {
        this.arr ? this.arr.length = 0 : this.arr = [];
        for (var t = 0; 11 > t; t++) {
            var e = new Vo_CZWARItem;
            e.id = t, e.playerId = t + 1, e.Occupyer = "无", e.zhanli = 999999999, e.horse = 1001, e.wing = 1001, e.weapon = 30201, e.body = 1, e.infoCount = 3, this.arr.push(e)
        }
    }, t
}();
__reflect(HallOfFameModel.prototype, "HallOfFameModel");
var HallOfFameView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "HallOfFameSkin", e._itemArr = [e._item1, e._item2, e._item3, e._item4], e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.base.title = "名人堂", HallOfFameModel.update(), this.onData()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e)
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onData = function () {
        for (var t = 0; 4 > t; t++) {
            var e = this._itemArr[t];
            e.btnTz.visible = !1, e.data = HallOfFameModel.arr[t]
        }
    }, e
}(BaseEUIView);
__reflect(HallOfFameView.prototype, "HallOfFameView");
var ModelXDDZ = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.isWatchBattle = !1, e.state = 1, e.firstGetTime = 0, e.receiveTime = 0, e.notice = !1, e
    }
    return __extends(e, t), e.getStageAward = function (t) {
        var i = e.bettingList[t];
        return i
    }, e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(3500, this.GC3500, this), e.regHand(3502, this.GC3502, this), e.regHand(3504, this.GC3504, this), e.regHand(3506, this.GC3506, this), e.regHand(3508, this.GC3508, this), e.regHand(3510, this.GC3510, this), e.regHand(3512, this.GC3512, this), e.regHand(3516, this.GC3516, this), e.regHand(3518, this.GC3518, this), e.regHand(3520, this.GC3520, this), e.regHand(3522, this.GC3522, this), e.regHand(3524, this.GC3524, this), e.regHand(3526, this.GC3526, this), e.regHand(3528, this.GC3528, this), e.regHand(3530, this.GC3530, this), e.regHand(3532, this.GC3532, this), e.regHand(3534, this.GC3534, this), e.regHand(3536, this.GC3536, this), e.regHand(3538, this.GC3538, this)
    }, e.prototype.GC3500 = function (t, e) {
        VHuoDongEntry.addHD(1089), t.state = e.readByte()
    }, e.prototype.CG3501 = function () {
        this.sendSocket(3501, this.getBytes())
    }, e.prototype.GC3502 = function (t, i) {
        var o = i.readInt();
        t.notify(e.msg_challengeBook, o)
    }, e.prototype.CG3503 = function () {
        this.sendSocket(3503, this.getBytes())
    }, e.prototype.GC3504 = function (t, i) {
        var o = VoXDDZ.getInst();
        o.hasBaoMing = i.readByte();
        var n = i.readByte(),
            a = 0 == i.readByte();
        a && (GameGlobal.layerMgr.close(UIConst.VIEWXDDZMAIN), GameGlobal.layerMgr.open(UIConst.VIEWCHALLENGEBOOK)), t.notify(e.msg_xianDaoDuZun, n)
    }, e.prototype.CG3505 = function () {
        this.sendSocket(3505, this.getBytes())
    }, e.prototype.GC3506 = function (t, e) {
        var i = e.readByte();
        1 == i ? (ViewText.text("报名成功!"), t.CG3503()) : ViewText.text([null, null, "不能重复报名", "非报名时间"][i])
    }, e.prototype.CG3507 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3507, e)
    }, e.prototype.GC3508 = function (t, i) {
        var o = i.readByte();
        if (o >= 4) return ViewText.text([null, null, null, null, "异常情况", "海选赛中未能匹配到对手", "恭喜您，本场比赛直接晋级", "服务器正在维护", "您无参赛资格", "本局比赛已经结束!"][o]), void GameGlobal.layerMgr.close(UIConst.VIEWCHALLENGE);
        var n = VoXDDZ.getInst();
        n.mineJiFen = i.readShort(), t.mineInformation || (t.mineInformation = new RInfo);
        var a = i.readUTF();
        t.mineInformation.update(a ? JSON.parse(a) : a), t.otherInformation || (t.otherInformation = new RInfo), a = i.readUTF(), t.otherInformation.update(a ? JSON.parse(a) : a), n.remainChallengeCnt = i.readByte(), n.remainRefCnt = i.readByte();
        var s = i.bytesAvailable ? i.readByte() : 0,
            r = i.bytesAvailable ? i.readByte() : 0;
        t.notify(e.msg_challenge, {
            state: o,
            score: s + ":" + r
        })
    }, e.prototype.CG3509 = function () {
        var t = this.getBytes();
        this.sendSocket(3509, t)
    }, e.prototype.GC3510 = function (t, i) {
        var o = i.readByte();
        1 != o && ViewText.text([null, null, "服务器维护中", "正在刷新数据", "该榜数据加载中"][o]);
        for (var n = i.readByte(), a = i.readShort(), s = [], r = 0; a > r; r++) {
            var l = {};
            l.paiming = i.readShort(), l.name = i.readUTF(), l.jifen = i.readShort(), s.push(l)
        }
        var h = VoXDDZ.getInst();
        h.mineJiFenPaiMing = i.readShort(), h.mineJiFen = i.readShort(), t.notify(e.msg_paihang, {
            datas: s,
            type: n
        })
    }, e.prototype.CG3511 = function () {
        this.sendSocket(3511, this.getBytes())
    }, e.prototype.GC3512 = function (t, i) {
        for (var o = i.readShort(), n = [], a = 0; o > a; a++) {
            var s = {};
            s.index = i.readByte(), s.name1 = i.readUTF(), s.name2 = i.readUTF(), s.winState = i.readByte(), n.push(s)
        }
        t.notify(e.msg_paihangRecords, n)
    }, e.prototype.CG3515 = function () {
        this.sendSocket(3515, this.getBytes())
    }, e.prototype.GC3516 = function (t, i) {
        var o = e.bettingList;
        if (!o) {
            o = {}, e.bettingList = o;
            for (var n in CFG_XDDZ.LIB3) {
                var a = CFG_XDDZ.LIB3[n],
                    s = a.jd,
                    r = o[s];
                r || (r = {}, o[s] = r);
                var l = a.lx;
                r[l] = a
            }
        }
        var h = i.readByte();
        if (1 != h) return void ViewText.text([null, null, "服务器维护中", "该等级未开启", "数据更新中, 请稍候"][h]);
        var c = i.readByte();
        e.curStage = c, e.curStageAward = e.getStageAward(e.curStage);
        for (var p = i.readShort(), u = [], d = 0; p > d; d++) {
            var r = {};
            r.teamId = i.readByte(), r.name1 = i.readUTF(), r.job1 = i.readByte(), r.quHao1 = i.readShort(), r.name2 = i.readUTF(), r.job2 = i.readByte(), r.quHao2 = i.readShort(), r.yaZhuIndex = i.readByte(), u.push(r)
        }
        t.notify(e.msg_yaZhuDatas, {
            challengeT: c,
            datas: u
        })
    }, e.prototype.CG3517 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3517, e)
    }, e.prototype.GC3518 = function (t, i) {
        var o = i.readByte();
        if (o > 3) return ViewText.text([null, null, null, null, "服务器维护中", "该等级未开启", "数据更新中", "队伍不存在", "非支持时间"][o]), void GameGlobal.layerMgr.close(UIConst.VIEWYAZHUDETAIL);
        var n = i.readByte();
        t.detail1 || (t.detail1 = new RInfo);
        var a = i.readUTF();
        t.detail1.update(JSON.parse(a)), t.detail2 || (t.detail2 = new RInfo), t.detail2.update(JSON.parse(i.readUTF())), t.notify(e.msg_yaZhuDatasDetail, {
            data1: t.detail1,
            data2: t.detail2,
            yzZhuType: n
        })
    }, e.prototype.CG3519 = function () {
        this.sendSocket(3519, this.getBytes())
    }, e.prototype.GC3520 = function (t, i) {
        for (var o = i.readShort(), n = [], a = 0; o > a; a++) {
            var s = {};
            s.qiShu = i.readInt(), s.colId = i.readUTF(), s.time = i.readInt(), s.name1 = i.readUTF(), s.name2 = i.readUTF(), s.score = i.readUTF(), s.sucState = i.readByte(), s.gotState = i.readByte(), n.push(s)
        }
        t.notify(e.msg_yaZhuRecords, n)
    }, e.prototype.GC3522 = function (t, i) {
        var o = i.readByte();
        1 == o && (t.firster || (t.firster = new RInfo), t.firster.update(JSON.parse(i.readUTF())), t.seconder || (t.seconder = new RInfo), t.seconder.update(JSON.parse(i.readUTF())), t.thirder || (t.thirder = new RInfo), t.thirder.update(JSON.parse(i.readUTF())), t.notify(e.msg_championInfo))
    }, e.prototype.CG3523 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(3523, e)
    }, e.prototype.GC3524 = function (t, e) {
        var i = e.readByte();
        switch (i) {
            case 1:
                ViewText.text("您还剩余" + (VoXDDZ.getInst().remainRefCnt - 1) + "次刷新次数!");
            case 2:
                t.CG3507(ViewChallenge.state);
                break;
            default:
                ViewText.text([null, null, null, "服务器维护中", "未报名", "没有对手了", "没有刷新次数", "没有挑战次数", "非海选赛时间"][i])
        }
    }, e.prototype.CG3525 = function () {
        this.sendSocket(3525, this.getBytes())
    }, e.prototype.GC3526 = function (t, e) {
        var i = e.readByte();
        1 == i ? (ViewText.text("您还剩余" + (VoXDDZ.getInst().remainRefCnt - 1) + "次刷新次数!"), t.CG3507(ViewChallenge.state)) : ViewText.text([null, null, "服务器维护中", "未报名", "没有对手了", "没有刷新次数", "非晋级赛时间", "准备开打，不能刷新"][i])
    }, e.prototype.CG3527 = function (t, e, i) {
        var o = this.getBytes();
        o.writeByte(t), o.writeByte(e), o.writeByte(i), this.sendSocket(3527, o)
    }, e.prototype.GC3528 = function (t, e) {
        var i = e.readByte();
        1 == i ? (GameGlobal.layerMgr.close(UIConst.VIEWYAZHUDETAIL), t.CG3515()) : ViewText.text([null, null, "不能重复支持", "支持类型不存在", "队伍不存在", "货币不足", "非支持时间"][i])
    }, e.prototype.CG3529 = function (t, e) {
        var i = this.getBytes();
        i.writeInt(t), i.writeUTF(e), this.sendSocket(3529, i)
    }, e.prototype.GC3530 = function (t, e) {
        var i = e.readByte();
        1 == i ? t.CG3519() : (ViewText.text([null, null, "没有该期数", "没有该队伍数据", "未打完", "已领取", "背包已满"][i]), 6 == i && ViewAlert.show("背包已满，是否前往熔炼?", function () {
            GameGlobal.layerMgr.open(UIConst.EQUIPRL)
        }))
    }, e.prototype.GC3532 = function (t, i) {
        t.receiveTime = i.readInt(), t.firstGetTime = egret.getTimer(), GameGlobal.layerMgr.isOpenView(UIConst.VIEWXDDZMAIN) || GameGlobal.layerMgr.open(UIConst.VIEWXDDZMAIN, UIConst.VIEWXDDZ), GameGlobal.layerMgr.isOpenView(UIConst.VIEWCHALLENGE) || GameGlobal.layerMgr.open(UIConst.VIEWCHALLENGE, 2), t.notify(e.msg_chall10SecNot)
    }, e.prototype.getLeftTime = function () {
        return this.receiveTime - (egret.getTimer() - this.firstGetTime) / 1e3 >> 0
    }, e.prototype.GC3534 = function (t, i) {
        t.notice = 1 == i.readByte(), t.notify(e.msg_notice)
    }, e.prototype.CG3535 = function () {
        this.sendSocket(3535, this.getBytes())
    }, e.prototype.GC3536 = function (t, i) {
        for (var o = [], n = 0, a = i.readShort(); a > n; n++) {
            var s = {};
            s.sysId = i.readLong(), s.time = i.readInt(), s.name1 = i.readUTF(), s.name2 = i.readUTF();
            var r = i.bytesAvailable ? i.readByte() : 1,
                l = i.bytesAvailable ? i.readByte() : 1;
            s.job1 = i.readByte(), s.job2 = i.readByte(), s.quHao1 = i.readInt(), s.quHao2 = i.readInt(), s.type = r, s.challName = t.getNamByType(r, l), o.push(s)
        }
        t.notify(e.msg_backlook, o)
    }, e.prototype.CG3537 = function (t) {
        var e = this.getBytes();
        e.writeLong(t), this.sendSocket(3537, e), this.isWatchBattle = !0, GameGlobal.modelBattle.once(ModelBattle.MSG_BATTLEENDED, this.onBattleEnd, this)
    }, e.prototype.onBattleEnd = function () {
        this.isWatchBattle = !1
    }, e.prototype.GC3538 = function (t, e) {
        var i = e.readByte();
        1 == i || ViewText.text([null, null, "查看失败"][i])
    }, e.prototype.getNamByType = function (t, e) {
        switch (t) {
            case 1:
                return "总决赛冠军组第" + e + "局";
            case 2:
                return "总决赛季军组第" + e + "局";
            case 3:
                return "四强组第" + e + "局";
            case 4:
                return "八强组第" + e + "局"
        }
    }, e.msg_challengeBook = "msg_challengeBook", e.msg_xianDaoDuZun = "msg_xianDaoDuZun", e.msg_challenge = "msg_challenge", e.msg_chall10SecNot = "msg_chall10SecNot", e.msg_paihang = "msg_paihang", e.msg_paihangRecords = "msg_paihangRecords", e.msg_yaZhuDatas = "msg_yaZhuDatas", e.msg_yaZhuDatasDetail = "msg_yaZhuDatasDetail", e.msg_yaZhuRecords = "msg_yaZhuRecords", e.msg_championInfo = "msg_championInfo", e.msg_backlook = "msg_backlook", e.msg_notice = "msg_notice", e.curStage = 0, e
}(BaseModel);
__reflect(ModelXDDZ.prototype, "ModelXDDZ");
var ViewBackLook = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.sourceData1 = new eui.ArrayCollection, e.sourceData2 = new eui.ArrayCollection, e.datasByCompname = {}, e.skinName = "ViewBackLookSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "精彩回放", this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.list.dataProvider = this.sourceData, this.list.itemRenderer = ItemBackLook, this.list1.dataProvider = this.sourceData1, this.list1.itemRenderer = ItemBackLook, this.list2.dataProvider = this.sourceData2, this.list2.itemRenderer = ItemBackLook
    }, e.prototype.onUpdate = function (t) {
        var e = 0,
            i = 0;
        for (var o in this.datasByCompname) delete this.datasByCompname[o];
        for (var n = [], a = 0; a < t.length; a++) {
            var s = t[a];
            4 == s.type && (n[e++] = s, i = s.time)
        }
        this.txtTime1.textFlow = HtmlUtil.parse("8进4\n" + HtmlUtil.fontSize(ColorSet("(" + (i > 0 ? DateUtil.getYearMonthDay(i) : 0) + ")", "#10a244"), 20)), t.length > 0 ? DisplayUtil.fillDataAC(this.sourceData, this.filterDatas(n)) : this.sourceData.source = null, e = 0, n.length = 0;
        for (var a = 0; a < t.length; a++) s = t[a], 3 == s.type && (n[e++] = s, i = s.time);
        this.txtTime2.textFlow = HtmlUtil.parse("半决赛\n" + HtmlUtil.fontSize(ColorSet("(" + (i > 0 ? DateUtil.getYearMonthDay(i) : 0) + ")", "#10a244"), 20)), t.length > 0 ? DisplayUtil.fillDataAC(this.sourceData1, this.filterDatas(n)) : this.sourceData1.source = null, e = 0, n.length = 0;
        for (var a = 0; a < t.length; a++) s = t[a], (1 == s.type || 2 == s.type) && (n[e++] = s, i = s.time);
        this.txtTime3.textFlow = HtmlUtil.parse("总决赛\n" + HtmlUtil.fontSize(ColorSet("(" + (i > 0 ? DateUtil.getYearMonthDay(i) : 0) + ")", "#10a244"), 20)), t.length > 0 ? DisplayUtil.fillDataAC(this.sourceData2, this.filterDatas(n)) : this.sourceData2.source = null, t.length > 0 ? (this.groupNone.visible = !1, this.labelGrp1.visible = !0, this.labelGrp2.visible = !0, this.labelGrp3.visible = !0) : (this.groupNone.visible = !0, this.labelGrp1.visible = !1, this.labelGrp2.visible = !1, this.labelGrp3.visible = !1)
    }, e.prototype.filterDatas = function (t) {
        for (var e = {}, i = [], o = 0; o < t.length; o++) {
            var n = t[o];
            if (n) {
                var a = n.type,
                    s = n.name1 + "_" + n.name2 + "_" + a;
                e[s] || (i.push(n), e[s] = !0), this.datasByCompname[s] || (this.datasByCompname[s] = []), this.datasByCompname[s].push(n)
            }
        }
        return i
    }, e.getDatasByNames = function (t) {
        var e = GameGlobal.layerMgr.getView(UIConst.VBACKLOOK);
        return e.datasByCompname[t]
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelxddz.on(ModelXDDZ.msg_backlook, this.onUpdate, this), GameGlobal.modelxddz.CG3535()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelxddz.off(ModelXDDZ.msg_backlook, this.onUpdate, this)
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewBackLook.prototype, "ViewBackLook");
var ViewXDDZMain = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.createTabGroup(), this.base.addTab("仙道独尊", 0, UIConst.VIEWXDDZ), this.base.addTab("仙道排行", 1, UIConst.VIEWXDDZPH), this.base.addTab("至尊商店", 2, UIConst.VIEWXDDZSTORE), this.base.addTab("慧眼识人", 3, UIConst.VIEWXDDZYZHU), this.base.listenTabClick(this.onSel, this), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn);
        var e = GameGlobal.layerMgr;
        e.reg(UIConst.VIEWXDDZ, ViewXDDZ, this), e.reg(UIConst.VIEWXDDZPH, ViewXDDZPaihang, this), e.reg(UIConst.VIEWXDDZSTORE, ViewXDDZStore, this), e.reg(UIConst.VIEWXDDZYZHU, ViewXDDZYaZhu, this), this.base.createQuestTxt(CFG_COMMOND.LIBWFSM[UIConst.VIEWXDDZMAIN].detail)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelxddz.on(ModelXDDZ.msg_yaZhuRecords, this.awardGetNot, this), GameGlobal.modelxddz.CG3519()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelxddz.off(ModelXDDZ.msg_yaZhuRecords, this.awardGetNot, this)
    }, e.prototype.awardGetNot = function (t) {
        if (t && t.length > 0) {
            for (var e = !1, i = 0; i < t.length; i++) {
                var o = t[i];
                if (1 == o.gotState) {
                    e = !0;
                    break
                }
            }
            this.base.setNoticBySysID(UIConst.VIEWXDDZYZHU, e)
        } else this.base.setNoticBySysID(UIConst.VIEWXDDZYZHU, !1)
    }, e.prototype.onSel = function (t) {
        this.setSel(t.bindSysID)
    }, e.prototype.setSel = function (t) {
        switch (this._curSysId) {
            case UIConst.VIEWXDDZ:
                GameGlobal.layerMgr.close(UIConst.VIEWXDDZ);
                break;
            case UIConst.VIEWXDDZPH:
                GameGlobal.layerMgr.close(UIConst.VIEWXDDZPH);
                break;
            case UIConst.VIEWXDDZSTORE:
                GameGlobal.layerMgr.close(UIConst.VIEWXDDZSTORE);
                break;
            case UIConst.VIEWXDDZYZHU:
                GameGlobal.layerMgr.close(UIConst.VIEWXDDZYZHU)
        }
        switch (this.base.hideQuestBtn(), t) {
            case UIConst.VIEWXDDZ:
                GameGlobal.layerMgr.open(UIConst.VIEWXDDZ), this.base.showQuestBtn();
                break;
            case UIConst.VIEWXDDZPH:
                GameGlobal.layerMgr.open(UIConst.VIEWXDDZPH);
                break;
            case UIConst.VIEWXDDZSTORE:
                GameGlobal.layerMgr.open(UIConst.VIEWXDDZSTORE);
                break;
            case UIConst.VIEWXDDZYZHU:
                GameGlobal.layerMgr.open(UIConst.VIEWXDDZYZHU)
        }
        this.base.setTabSelSys(t), this.base.title = this.base.getTbtnTextBySysID(t), this._curSysId = t
    }, e.prototype.removeTab = function (t) {
        this.base.removeTabByID(t)
    }, e.prototype.addTab = function (t) {
        var e = this.getTabInfo(t);
        this.base.addTab(e.label, e.index, e.uiconst)
    }, e.prototype.getTabInfo = function (t) {
        var e = {};
        switch (t) {
            case 0:
            case UIConst.VIEWXDDZ:
                e.label = "仙道独尊", e.index = 0, e.uiconst = UIConst.VIEWXDDZ;
                break;
            case 1:
            case UIConst.VIEWXDDZPH:
                e.label = "仙道排行", e.index = 1, e.uiconst = UIConst.VIEWXDDZPH;
                break;
            case 2:
            case UIConst.VIEWXDDZSTORE:
                e.label = "至尊商店", e.index = 2, e.uiconst = UIConst.VIEWXDDZSTORE;
                break;
            case 3:
            case UIConst.VIEWXDDZYZHU:
                e.label = "慧眼识人", e.index = 3, e.uiconst = UIConst.VIEWXDDZYZHU
        }
        return e
    }, e.prototype.onOpen = function (e) {
        if (t.prototype.onOpen.call(this, e), void 0 == e) {
            var i = this.getTabInfo(0);
            this.setSel(i.uiconst)
        } else 10 > e ? (i = this.getTabInfo(e), this.setSel(i.uiconst)) : this.setSel(e);
        this.addMsg()
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewXDDZMain.prototype, "ViewXDDZMain");
var VXDDZAwards = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.description = "1.仙道奖励在每场比赛结束后，通过邮件发送\n2.周日零点将为玩家自动激活使用限时称号，称号限时1周（称号奖励不通过邮件发放）", e.datas = [], e.skinName = "VXDDZAwardsSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.txtDescription.text = this.description, this.container.dataProvider = this.sourceData = new eui.ArrayCollection, this.container.itemRenderer = ItemXDDZAward;
        var e = [2, 3, 4, 7, 9, 11, 13, 1];
        this.datas = [];
        for (var i = 0; i < e.length; i++) {
            var o = e[i],
                n = CFG_XDDZ.LIB2[o];
            this.datas.push(n)
        }
        this.base.title = "仙道奖励", DisplayUtil.fillDataAC(this.sourceData, this.datas)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelxddz.on(ModelXDDZ.msg_paihang, this.onUpdate, this), GameGlobal.modelxddz.CG3509()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelxddz.off(ModelXDDZ.msg_paihang, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        e.type = t.type, DisplayUtil.fillDataAC(this.sourceData, this.datas)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.type = 0, e
}(BaseEUIView);
__reflect(VXDDZAwards.prototype, "VXDDZAwards");
var ItemBackLook = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e._1ManNotFit = !1, e._noManNotFit = !1, e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemBackLookSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), DisplayUtil.popBtnStyle(this.btnCheck), this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        if (!this.iconMsk.visible && this.data) {
            var t = this.data.name1 + "_" + this.data.name2 + "_" + this.data.type,
                e = ViewBackLook.getDatasByNames(t);
            GameGlobal.layerMgr.open(UIConst.VBACKLOOKDETAIL, e)
        }
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            if (this._data = t, t) {
                if (this._noManNotFit = !1, !t) return this.iconMask1.visible = !0, this.iconMask2.visible = !0, this.iconMsk.visible = !0, this.txtName1.text = "无", this.txtName2.text = "无", this.txtQuHao1.text = "区号: 无", this.txtQuHao2.text = "区号: 无", void(this._noManNotFit = !0);
                var e = t.name1;
                this._1ManNotFit = !1, e ? (this.txtName1.text = t.name1, this.txtQuHao1.text = "区号: " + t.quHao1, this.iconHead1.source = 1 == t.job1 ? "mail_png" : "femail_png", this.iconMask1.visible = !1) : (this.iconMask1.visible = !0, this.txtName1.text = "无", this.txtQuHao1.text = "区号: 无", this._1ManNotFit = !0);
                var i = t.name2;
                i ? (this.txtName2.text = t.name2, this.txtQuHao2.text = "区号: " + t.quHao2, this.iconHead2.source = 1 == t.job1 ? "mail_png" : "femail_png", this.iconMask2.visible = !1) : (this.iconMask2.visible = !0, this.txtName2.text = "无", this.txtQuHao2.text = "区号: 无", this._1ManNotFit = !0), this.iconMsk.visible = this._1ManNotFit
            }
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemBackLook.prototype, "ItemBackLook");
var ItemBackLookDetail = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemBackLookDetailSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnHand.label = "查看", this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        GameGlobal.modelxddz.CG3537(this.data.sysId)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t, this.txtTime.text = DateUtil.getYearMonthDay(t.time), this.txtInfo.textFlow = HtmlUtil.parse(t.name1 + ColorSet(" vs ", "#839202") + t.name2), this.txtType.text = t.challName
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemBackLookDetail.prototype, "ItemBackLookDetail");
var CFG_dengjilibao_158 = function () {
    function t() {}
    return t
}();
__reflect(CFG_dengjilibao_158.prototype, "CFG_dengjilibao_158");
var ItemChallenger2 = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemChallenger2Skin"
    }, e
}(ItemChallenger);
__reflect(ItemChallenger2.prototype, "ItemChallenger2");
var ItemChallengeRecs = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemChallengeRecsSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            t && (this._data = t, this.txtIndex.text = "第" + t.index + "局", this.txtName1.text = t.name1, this.txtName2.text = t.name2, 1 == t.winState ? (this.iconWinState1.source = "comSuc_png", this.iconWinState2.source = "comFail_png") : 2 == t.winState && (this.iconWinState1.source = "comFail_png", this.iconWinState2.source = "comSuc_png"))
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemChallengeRecs.prototype, "ItemChallengeRecs");
var ItemXDDZAward = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.urls = ["xddzAtlas_json._1Sign", "xddzAtlas_json._2Sign", "xddzAtlas_json._3Sign", "xddzAtlas_json._HXSign", "xddzAtlas_json._4Sign", "xddzAtlas_json._8Sign", "xddzAtlas_json._16Sign", "xddzAtlas_json._BaoMingSign"], e.awardKeys = ["jl90", "jl100", "jl110", "jl120", "jl130", "jl140", "jl150", "jl160", "jl170", "jl180", "jl190"], e.gridArr = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemXDDZAwardSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = VXDDZAwards.type;
            if (this.iconType.source = this.urls[this.itemIndex], e > 0) ConfigHelp.makeStrGrids(t[this.awardKeys[e - 1]], this.gridArr, 0, 0, this.gridContainer, !0);
            else {
                var i = this.getAwardKey();
                ConfigHelp.makeStrGrids(t[i], this.gridArr, 0, 0, this.gridContainer, !0)
            }
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.getAwardKey = function () {
        var t = GameGlobal.modelRole.voMine.level;
        return t >= 190 ? this.awardKeys[10] : t >= 180 ? this.awardKeys[9] : t >= 170 ? this.awardKeys[8] : t >= 160 ? this.awardKeys[7] : t >= 150 ? this.awardKeys[6] : t >= 140 ? this.awardKeys[5] : t >= 130 ? this.awardKeys[4] : t >= 120 ? this.awardKeys[3] : t >= 110 ? this.awardKeys[2] : t >= 100 ? this.awardKeys[1] : this.awardKeys[0]
    }, Object.defineProperty(e.prototype, "itemIndex", {
        get: function () {
            return this._itemIndex
        },
        set: function (t) {
            this._itemIndex = t, 0 == (1 & t) ? this.iconBg.source = "CM2_json.bg1" : this.iconBg.source = "CM2_json.bg2"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemXDDZAward.prototype, "ItemXDDZAward");
var ItemXDDZRander = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemXDDZRanderSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            t && (this._data = t, this.txtPaiMing.text = t.paiming + "", this.txtName.text = t.name, this.txtJiFen.text = t.jifen + "")
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemXDDZRander.prototype, "ItemXDDZRander");
var ItemXDDZStore = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e
}(ItemShangCheng);
__reflect(ItemXDDZStore.prototype, "ItemXDDZStore");
var ItemYaZhuMembers = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._1ManFit = !1, e._noManFit = !1, e.hasYaZhued = !1, e.skinName = "ItemYaZhuMembersSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.iconZhiChi.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        this.hasYaZhued || this._1ManFit || this._noManFit || !ModelXDDZ.curStageAward || GameGlobal.layerMgr.open(UIConst.VIEWYAZHUDETAIL, this.data)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            if (this._data = t, this._noManFit = !1, !t) return this.iconMask1.visible = !0, this.iconMask2.visible = !0, this.iconMask0.visible = !0, this.txtName1.text = "无", this.txtName2.text = "无", this.txtQuHao1.text = "区号: 无", this.txtQuHao2.text = "区号: 无", void(this._noManFit = !0);
            var e = t.name1;
            this._1ManFit = !1, e ? (this.txtName1.text = t.name1, this.txtQuHao1.text = "区号: " + t.quHao1, this.iconHead1.source = 1 == t.job1 ? "mail_png" : "femail_png", this.iconMask1.visible = !1) : (this.iconMask1.visible = !0, this.txtName1.text = "无", this.txtQuHao1.text = "区号: 无", this._1ManFit = !0);
            var i = t.name2;
            switch (i ? (this.txtName2.text = t.name2, this.txtQuHao2.text = "区号: " + t.quHao2, this.iconHead2.source = 1 == t.job1 ? "mail_png" : "femail_png", this.iconMask2.visible = !1) : (this.iconMask2.visible = !0, this.txtName2.text = "无", this.txtQuHao2.text = "区号: 无", this._1ManFit = !0), this.iconMask0.visible = this._1ManFit, t.yaZhuIndex) {
                case 0:
                    this.iconYaed1.visible = !1, this.iconYaed2.visible = !1;
                    break;
                case 1:
                    this.iconYaed1.visible = !0, this.iconYaed2.visible = !1;
                    break;
                case 2:
                    this.iconYaed1.visible = !1, this.iconYaed2.visible = !0
            }
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(ItemYaZhuMembers.prototype, "ItemYaZhuMembers");
var ItemYaZhuRecord = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemYaZhuRecordSkin"
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnHand.label = "领取奖励", this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        GameGlobal.modelxddz.CG3529(this.data.qiShu, this.data.colId)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            if (t) {
                switch (this._data = t, this.txtTime.text = DateUtil.getYearMonthDay(t.time, "年月日"), this.txtName1.text = t.name1, this.txtName2.text = t.name2, this.txtScore.text = t.score, this.btnHand.va = t.gotState, t.gotState) {
                    case 1:
                        this.btnHand.label = "领取奖励", this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!0);
                        break;
                    case 2:
                        this.btnHand.label = "已领取", this.btnHand.enabled = !1, this.btnHand.setNoticeVis(!1);
                        break;
                    case 0:
                        this.btnHand.label = "领取奖励", this.btnHand.enabled = !0, this.btnHand.setNoticeVis(!1)
                }
                switch (t.sucState) {
                    case 0:
                        this.iconSucFail.source = null;
                        break;
                    case 1:
                        this.iconSucFail.source = "xddzAtlas_json.yaZhuSuc";
                        break;
                    case 2:
                        this.iconSucFail.source = "xddzAtlas_json.yaZhuFail"
                }
            }
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemYaZhuRecord.prototype, "ItemYaZhuRecord");
var ViewXDDZ = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewXDDZSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.btnHand.label = "前往报名", DisplayUtil.popBtnStyle(this.iconTYAward), DisplayUtil.popBtnStyle(this.iconBackLook), this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.iconBackLook.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBackLook, this), this.iconTYAward.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onAward, this), this.hallOfFameBtn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHallOfFame, this)
    }, e.prototype.onBackLook = function () {
        GameGlobal.layerMgr.open(UIConst.VBACKLOOK)
    }, e.prototype.onAward = function () {
        GameGlobal.layerMgr.open(UIConst.VXDDZAWARDS)
    }, e.prototype.onHallOfFame = function () {
        GameGlobal.layerMgr.open(UIConst.HALLOFFAMEVIEW)
    }, e.prototype.onHand = function () {
        switch (this.btnHand.va) {
            case 1:
                GameGlobal.modelxddz.CG3505();
                break;
            case 2:
                ViewText.text("您已报名!");
                break;
            case 3:
                ViewText.text("报名已截止!");
                break;
            case 4:
                GameGlobal.layerMgr.open(UIConst.VIEWCHALLENGE, 1);
                break;
            case 5:
                GameGlobal.layerMgr.open(UIConst.VIEWCHALLENGE, 2)
        }
    }, e.prototype.setState = function (t) {
        this.currentState = t, this.validateNow()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelxddz.on(ModelXDDZ.msg_xianDaoDuZun, this.onRulesView, this), GameGlobal.modelxddz.on(ModelXDDZ.msg_championInfo, this.updateChampions, this), GameGlobal.modelxddz.CG3503()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelxddz.off(ModelXDDZ.msg_xianDaoDuZun, this.onRulesView, this), GameGlobal.modelxddz.off(ModelXDDZ.msg_championInfo, this.updateChampions, this)
    }, e.prototype.onRulesView = function (t) {
        this.setState("st1");
        var e = VoXDDZ.getInst();
        switch (t) {
            case 1:
                0 == e.hasBaoMing ? (this.btnHand.label = "报名", this.btnHand.va = 1, this.btnHand.enabled = !0) : (this.btnHand.label = "已报名", this.btnHand.va = 2, this.btnHand.enabled = !1);
                var i = GameGlobal.layerMgr.getView(UIConst.VIEWXDDZMAIN);
                i.removeTab(UIConst.VIEWXDDZPH);
                break;
            case 2:
                0 == e.hasBaoMing ? (this.btnHand.label = "已截止", this.btnHand.va = 3, this.btnHand.enabled = !1) : (this.btnHand.label = "进入比赛", this.btnHand.va = 4, this.btnHand.enabled = !0), i = GameGlobal.layerMgr.getView(UIConst.VIEWXDDZMAIN), i.addTab(UIConst.VIEWXDDZPH);
                break;
            case 3:
                0 == e.hasBaoMing ? (this.btnHand.label = "已截止", this.btnHand.va = 3, this.btnHand.enabled = !1) : (this.btnHand.label = "进入比赛", this.btnHand.va = 5, this.btnHand.enabled = !0), i = GameGlobal.layerMgr.getView(UIConst.VIEWXDDZMAIN), i.removeTab(UIConst.VIEWXDDZPH)
        }
    }, e.prototype.updateChampions = function () {
        this.setState("st2");
        var t = GameGlobal.modelxddz;
        this.itemChampion.setData(t.firster), this.itemSecond.setData(t.seconder), this.itemThird.setData(t.thirder)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setState("st1"), IconUtil.setIconSrc(this.iconDes, "xddGZBg_png"), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.itemChampion.setData(null), this.itemSecond.setData(null), this.itemThird.setData(null), IconUtil.setIconSrc(this.iconDes, null), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(ViewXDDZ.prototype, "ViewXDDZ");
var ViewXDDZPaihang = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData1 = new eui.ArrayCollection, e.sourceData2 = new eui.ArrayCollection, e.skinName = "ViewXDDZPaihangSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.listRankers.dataProvider = this.sourceData1, this.listRankers.itemRenderer = ItemXDDZRander, this.listRecords.dataProvider = this.sourceData2, this.listRecords.itemRenderer = ItemChallengeRecs, DisplayUtil.popBtnStyle(this.btnLeft), DisplayUtil.popBtnStyle(this.btnRight)
    }, e.prototype.askForPHDatas = function () {
        GameGlobal.modelxddz.CG3509()
    }, e.prototype.askForRecords = function () {
        GameGlobal.modelxddz.CG3511()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelxddz.on(ModelXDDZ.msg_paihang, this.updatePH, this), GameGlobal.modelxddz.on(ModelXDDZ.msg_paihangRecords, this.updateRecords, this), this.askForPHDatas(), this.askForRecords()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelxddz.off(ModelXDDZ.msg_paihang, this.updatePH, this), GameGlobal.modelxddz.off(ModelXDDZ.msg_paihangRecords, this.updateRecords, this)
    }, e.prototype.updatePH = function (t) {
        var e = t.datas,
            i = VoXDDZ.getInst();
        i.mineJiFenPaiMing > 0 ? this.txtPaiMing.textFlow = HtmlUtil.parse("我的排名: " + ColorSet(i.mineJiFenPaiMing, "#10a244")) : this.txtPaiMing.text = "我的排名: 未上榜", this.txtJiFen.textFlow = HtmlUtil.parse("我的积分: " + ColorSet(i.mineJiFen, "#10a244")), this.txtType.text = VoXDDZ.getBangName(t.type), this.sourceData1.source = e, this.grpPHNone.visible = e.length <= 0
    }, e.prototype.updateRecords = function (t) {
        this.sourceData2.source = t, this.grpRecNone.visible = t.length <= 0
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(ViewXDDZPaihang.prototype, "ViewXDDZPaihang");
var ViewXDDZStore = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "ViewXDDZStoreSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.container.itemRenderer = ItemXDDZStore, this.container.dataProvider = this.sourceData, this.scroller.scrollPolicyH = eui.ScrollPolicy.OFF
    }, e.prototype.addMsg = function () {
        GameGlobal.modelShangCheng.on(ModelShangCheng.msg_commond, this.onUpdate, this), GameGlobal.modelShangCheng.on(ModelShangCheng.msg_commond_buy, this.itemUpdate, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateOwn, this), GameGlobal.modelShangCheng.CG903()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelShangCheng.off(ModelShangCheng.msg_commond, this.onUpdate, this), GameGlobal.modelShangCheng.off(ModelShangCheng.msg_commond_buy, this.itemUpdate, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateOwn, this)
    }, e.prototype.itemUpdate = function (t) {
        this.sourceData.itemUpdated(t)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.updateOwn = function () {
        var t = CFG_STORE.LIB[7001].xh[1];
        this.txtCost.text = GameGlobal.modelBag.getItemCount(t) + "", this.iconCost.source = IconUtil.getIconUrl(CFG_Item.LIB[t].icon)
    }, e.prototype.onUpdate = function () {
        var t = VoShangCheng.getDatasByType(7);
        DisplayUtil.fillDataAC(this.sourceData, t), this.updateOwn()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(ViewXDDZStore.prototype, "ViewXDDZStore");
var ViewXDDZYaZhu = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.renderers16In8 = [], e.renderers8In4 = [], e.renderers4In2 = [], e.skinName = "ViewXDDZYaZhuSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.iconAward), this.iconAward.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this);
        for (var e = 1; 8 >= e; e++) {
            var i = this["mem" + e];
            i.visible = !1, this.renderers16In8.push(i)
        }
        for (var e = 1; 4 >= e; e++) this.renderers8In4.push(this["mem" + e]);
        for (var e = 1; 2 >= e; e++) this.renderers4In2.push(this["mem" + e]);
        this.txtType.text = "", this.txtNoneData.visible = !0
    }, e.prototype.onHand = function () {
        GameGlobal.layerMgr.open(UIConst.VIEWYAZHURECS)
    }, e.prototype.setState = function (t) {
        this.currentState = t, this.validateNow()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelxddz.on(ModelXDDZ.msg_yaZhuDatas, this.onUpdate, this), GameGlobal.modelxddz.on(ModelXDDZ.msg_yaZhuRecords, this.awardGetNot, this), GameGlobal.modelxddz.CG3515(), GameGlobal.modelxddz.CG3519()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelxddz.off(ModelXDDZ.msg_yaZhuDatas, this.onUpdate, this), GameGlobal.modelxddz.off(ModelXDDZ.msg_yaZhuRecords, this.awardGetNot, this)
    }, e.prototype.awardGetNot = function (t) {
        if (t && t.length > 0) {
            for (var e = !1, i = 0; i < t.length; i++) {
                var o = t[i];
                if (1 == o.gotState) {
                    e = !0;
                    break
                }
            }
            this.imgNotice.visible = e
        } else this.imgNotice.visible = !1
    }, e.prototype.updateVisble = function (t) {
        if (t) {
            this.txtNoneData.visible = !1;
            for (var e = 0; 8 > e; e++) {
                var i = this.renderers16In8[e];
                i.visible = !0
            }
        } else {
            this.txtType.text = "", this.txtNoneData.visible = !0;
            for (var e = 0; 8 > e; e++) {
                var i = this.renderers16In8[e];
                i.visible = !1
            }
        }
    }, e.prototype.onUpdate = function (t) {
        var e = t.challengeT;
        switch (this.datas = t.datas, this.updateVisble(this.datas.length > 0), e) {
            case 3:
                this.setState("st1"), this.update16In8(), this.txtType.textFlow = HtmlUtil.parse("16强晋级赛" + HtmlUtil.color("<font size='24'>周三晚上20:00</font>", "#ff8400"));
                break;
            case 4:
                this.setState("st2"), this.update8In4(), this.txtType.textFlow = HtmlUtil.parse("8强晋级赛" + HtmlUtil.color("<font size='24'>周四晚上20:00</font>", "#ff8400"));
                break;
            case 5:
                this.setState("st3"), this.update4In2(), this.txtType.textFlow = HtmlUtil.parse("4强晋级赛" + HtmlUtil.color("<font size='24'>周五晚上20:00</font>", "#ff8400"));
                break;
            case 6:
                this.setState("st3"), this.update4In2(), this.txtType.textFlow = HtmlUtil.parse("总决赛" + HtmlUtil.color("<font size='24'>周六晚上20:00</font>", "#ff8400"))
        }
    }, e.prototype.update16In8 = function () {
        for (var t = this.renderers16In8, e = this.datas.length, i = 0; i < t.length; i++) {
            var o = t[i],
                n = this.datas[i];
            e > i ? o.data = n : o.data = n
        }
    }, e.prototype.update8In4 = function () {
        for (var t = this.renderers8In4, e = this.datas.length, i = 0; i < t.length; i++) {
            var o = t[i],
                n = this.datas[i];
            e > i ? o.data = n : o.data = n
        }
    }, e.prototype.update4In2 = function () {
        for (var t = this.renderers4In2, e = this.datas.length, i = 0; i < t.length; i++) {
            var o = t[i],
                n = this.datas[i];
            e > i ? o.data = n : o.data = n
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.imgNotice.visible = !1, this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), ModelXDDZ.curStageAward = null
    }, e
}(BaseEUIView);
__reflect(ViewXDDZYaZhu.prototype, "ViewXDDZYaZhu");
var ViewAwards = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.skinName = "VSSAwardTipSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose).addCloseListen(this.btnSure), this.btnSure.label = "确定", DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnSure)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), ConfigHelp.makeStrGrids(e.cgjl, this.gridArr, 0, 0, this.container, !0)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(ViewAwards.prototype, "ViewAwards");
var ViewBackLookDetail = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewBackLookDetailSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.list.itemRenderer = ItemBackLookDetail, this.list.dataProvider = this.sourceData = new eui.ArrayCollection
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), DisplayUtil.fillDataAC(this.sourceData, e)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewBackLookDetail.prototype, "ViewBackLookDetail");
var ViewChallenge = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceDatasOfSelf = new eui.ArrayCollection, e.sourceDatasOfOther = new eui.ArrayCollection, e.skinName = "ViewChallengeSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.listSelf.dataProvider = this.sourceDatasOfSelf, this.listSelf.itemRenderer = RoleInfoItm1, this.listOther.dataProvider = this.sourceDatasOfOther, this.listOther.itemRenderer = RoleInfoItm1, this.btnChanllenge.label = "开始挑战", this.btnRefresh.label = "刷新阵容", DisplayUtil.popBtnStyle(this.iconPaiHang), this.iconPaiHang.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnChanllenge.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnRefresh.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), DisplayUtil.popBtnStyle(this.btnClose).popBtnStyle(this.btnReturn), this.addCloseListen(this.btnClose).addCloseListen(this.btnReturn), this.iconPaiHang.visible = !1
    }, e.prototype.onHand = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.iconPaiHang:
                this.closeHandler(), GameGlobal.layerMgr.open(UIConst.VIEWXDDZMAIN, UIConst.VIEWXDDZPH);
                break;
            case this.btnChanllenge:
                ModelBattle.canEnterBtl() && GameGlobal.modelxddz.CG3523(2);
                break;
            case this.btnRefresh:
                ModelBattle.canEnterBtl() && (1 == this.btnRefresh.va ? GameGlobal.modelxddz.CG3523(1) : GameGlobal.modelxddz.CG3525())
        }
    }, e.prototype.addMsg = function () {
        GameGlobal.modelxddz.on(ModelXDDZ.msg_challenge, this.onUpdate, this), GameGlobal.modelxddz.on(ModelXDDZ.msg_chall10SecNot, this.onCountTime, this), GameGlobal.modelxddz.CG3507(e.state)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelxddz.off(ModelXDDZ.msg_challenge, this.onUpdate, this), GameGlobal.modelxddz.off(ModelXDDZ.msg_chall10SecNot, this.onCountTime, this)
    }, e.prototype.showScore = function (t) {
        var e = parseInt(t.split(":")[0]),
            i = parseInt(t.split(":")[1]);
        0 == e && 0 == i ? this.txtScore.text = "" : this.txtScore.text = t
    }, e.prototype.onUpdate = function (t) {
        e.state = t.state, this.showScore(t.score);
        var i = VoXDDZ.getInst();
        this.txtMineJiFen.textFlow = HtmlUtil.parse("我的积分: " + ColorSet(i.mineJiFen, "#10a244")), this.txtMineJiFenPM.textFlow = HtmlUtil.parse("积分排名: " + ColorSet(i.mineJiFenPaiMing, "#10a244")), 1 == e.state ? (this.txtRemainChallenge.textFlow = HtmlUtil.parse("剩余挑战次数: " + ColorSet(i.remainChallengeCnt, "#10a244")), this.iconLeftCntBg.visible = !0) : (this.txtRemainChallenge.textFlow = HtmlUtil.parse("剩余刷新次数: " + ColorSet(i.remainRefCnt, "#10a244")), this.iconLeftCntBg.visible = !0);
        var o = GameGlobal.modelxddz.mineInformation,
            n = GameGlobal.modelxddz.otherInformation;
        switch (DisplayUtil.fillDataAC(this.sourceDatasOfSelf, this.getIconDatas(o)), DisplayUtil.fillDataAC(this.sourceDatasOfOther, this.getIconDatas(n)), this.itemSelf.setData(o), this.itemOther.setData(n), e.state) {
            case 1:
                DisplayUtil.addBy(this.btnChanllenge, this.btnGroup, 0), this.txtTitle.text = "海选赛", this.btnRefresh.label = "刷新对手", this.btnRefresh.va = 1;
                break;
            case 2:
                DisplayUtil.remove(this.btnChanllenge), this.txtTitle.text = "晋级赛", this.btnRefresh.label = "刷新阵容", this.btnRefresh.va = 2
        }
    }, e.prototype.getIconDatas = function (t) {
        var e = [];
        if (t.petID && t.petID.length > 0)
            for (var i = 0; i < t.petID.length; i++) {
                var o = t.petID[i],
                    n = CFG_Pet.PETLIB[o.id].icon;
                e.push({
                    icon: n,
                    cfgId: o.id,
                    type: 2
                })
            }
        if (t.huoBanID && t.huoBanID.length > 0)
            for (var i = 0; i < t.huoBanID.length; i++) {
                var a = t.huoBanID[i];
                n = CFG_HUOBAN1.LIB[a.id].icon, e.push({
                    icon: n,
                    cfgId: a.id,
                    type: 2
                })
            }
        return e
    }, e.prototype.onCountTime = function () {
        var t = GameGlobal.modelxddz.getLeftTime();
        t > 0 ? (this.timeCntGp.visible = !0, GameGlobal.tick.addInterv(this.playCountTime, 1e3, this)) : (this.timeCntGp.visible = !1, GameGlobal.tick.removeInterv(this.playCountTime))
    }, e.prototype.playCountTime = function (t) {
        var e = GameGlobal.modelxddz.getLeftTime();
        t.txtTimeCount.text = "阵型已保存, 距离传送进入比赛: " + e, 0 >= e && (t.txtTimeCount.text = "", t.timeCntGp.visible = !1, GameGlobal.tick.removeInterv(t.playCountTime))
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i), e.state = i, this.onCountTime(), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.itemSelf.setData(null), this.itemOther.setData(null), GameGlobal.tick.removeInterv(this.playCountTime), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.state = 0, e
}(BaseEUIView);
__reflect(ViewChallenge.prototype, "ViewChallenge");
var ViewChallengeBook = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewChallengeBookSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.btnHand.label = "确定", this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        this.closeHandler(), GameGlobal.layerMgr.open(UIConst.VIEWXDDZMAIN, UIConst.VIEWXDDZ)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelxddz.on(ModelXDDZ.msg_challengeBook, this.onUpdate, this), GameGlobal.modelxddz.CG3501()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelxddz.off(ModelXDDZ.msg_challengeBook, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        var e = new Date(1e3 * t),
            i = e.getFullYear().toString().substring(2),
            o = e.getMonth() + 1,
            n = e.getDate();
        this.txtNian.text = i, this.txtYue.text = o + "", this.txtRi.text = n + "", this.txtName.text = GameGlobal.modelRole.voMine.name, this.txtQuFu.text = VoPeiYang.getChiniseNum(parseInt(GameGlobal.loginArg.zoneid)) + "服道友"
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewChallengeBook.prototype, "ViewChallengeBook");
var ViewXDDZYZDetail = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "ViewXDDZYZDetailSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.btnHandLow.label = "普通支持", this.btnHandMid.label = "十分支持", this.btnHandHig.label = "全力支持", this.txtCostLow.text = "X300", this.txtCostMid.text = "X500", this.txtCostHig.text = "X800", this.btnHandLow.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHandMid.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnHandHig.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.yaZhuAwardLow.addEventListener(egret.TouchEvent.TOUCH_TAP, this.showYaZhuJL, this), this.yaZhuAwardMid.addEventListener(egret.TouchEvent.TOUCH_TAP, this.showYaZhuJL, this), this.yaZhuAwardHig.addEventListener(egret.TouchEvent.TOUCH_TAP, this.showYaZhuJL, this), this.itemChallenger1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSel, this), this.itemChallenger2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onSel, this), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.addCloseListen(this.btnClose).addCloseListen(this.btnReturn)
    }, e.prototype.showYaZhuCost = function () {
        var t = ModelXDDZ.curStageAward;
        t && (this.showDetail(t[1], this.txtCostLow, this.iconCostLow), this.showDetail(t[2], this.txtCostMid, this.iconCostMid), this.showDetail(t[3], this.txtCostHig, this.iconCostHig))
    }, e.prototype.showDetail = function (t, e, i) {
        var o = ConfigHelp.makeVoList(t.yzxh)[0];
        e.text = "X" + o.count, i.source = IconUtil.getIconUrl(o.icon)
    }, e.prototype.showYaZhuJL = function (t) {
        var e, i = t.currentTarget;
        switch (i) {
            case this.yaZhuAwardLow:
                e = 1;
                break;
            case this.yaZhuAwardMid:
                e = 2;
                break;
            case this.yaZhuAwardHig:
                e = 3
        }
        var o = ModelXDDZ.curStageAward;
        e && o && GameGlobal.layerMgr.open(UIConst.VYAZHUJIANGLITIP, o[e])
    }, e.prototype.onSel = function (t) {
        var e = t.currentTarget;
        this.regData.yaZhuIndex > 0 || this.setSel(e)
    }, e.prototype.setSel = function (t) {
        this.nowSelItem != t && (this.nowSelItem && this.nowSelItem.setSelected(!1), t.setSelected(!0), this.nowSelItem = t)
    }, e.prototype.onHand = function (t) {
        var e, i = t.currentTarget,
            o = this.nowSelItem == this.itemChallenger1 ? 1 : 2,
            n = ModelXDDZ.curStageAward;
        switch (i) {
            case this.btnHandLow:
                e = 1;
                break;
            case this.btnHandMid:
                e = 2;
                break;
            case this.btnHandHig:
                e = 3
        }
        if (e && n) {
            var a = n[e];
            GameGlobal.modelxddz.CG3527(this.regData.teamId, o, a.id)
        }
    }, e.prototype.addMsg = function () {
        GameGlobal.modelxddz.on(ModelXDDZ.msg_yaZhuDatasDetail, this.onUpdate, this), GameGlobal.modelxddz.CG3517(this.regData.teamId)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelxddz.off(ModelXDDZ.msg_yaZhuDatasDetail, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        var e = t.data1,
            i = t.data2;
        this.itemChallenger1.setData(e), this.itemChallenger2.setData(i)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.regData = e, this.dealWithYaZhu(e), this.addMsg(), this.showYaZhuCost(), IconUtil.setIconSrc(this.bgg, "xdVSBG_jpg")
    }, e.prototype.dealWithYaZhu = function (t) {
        this.iconyaZhued1.visible = !1, this.iconyaZhued2.visible = !1, 0 == t.yaZhuIndex ? this.setSel(this.itemChallenger1) : (this.itemChallenger1.setSelected(!1), this.itemChallenger2.setSelected(!1), this["iconyaZhued" + t.yaZhuIndex].visible = !0)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.itemChallenger1.setData(null), this.itemChallenger2.setData(null), this.removeMsg(), IconUtil.setIconSrc(this.bgg)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewXDDZYZDetail.prototype, "ViewXDDZYZDetail");
var ViewYaZhuRecs = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "ViewYaZhuRecsSkin", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.list.dataProvider = this.sourceData, this.list.itemRenderer = ItemYaZhuRecord, DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.addCloseListen(this.btnClose).addCloseListen(this.btnReturn)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelxddz.on(ModelXDDZ.msg_yaZhuRecords, this.onUpdate, this), GameGlobal.modelxddz.CG3519()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelxddz.off(ModelXDDZ.msg_yaZhuRecords, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        DisplayUtil.fillDataAC(this.sourceData, t.sort(this.onSort))
    }, e.prototype.onSort = function (t, e) {
        if (t.gotState == e.gotState) return t.time - e.time;
        var i = 1 == t.gotState ? 10 : t.gotState,
            o = 1 == e.gotState ? 10 : e.gotState;
        return o - i
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(BaseEUIView);
__reflect(ViewYaZhuRecs.prototype, "ViewYaZhuRecs");
var VoXDDZ = function () {
    function t() {
        this.hasBaoMing = 0, this.mineJiFen = 0, this.mineJiFenPaiMing = 0, this.remainChallengeCnt = 0, this.remainRefCnt = 0
    }
    return t.getInst = function () {
        return this._inst || (this._inst = new t)
    }, t.getBangName = function (t) {
        switch (t) {
            case 1:
                return "人榜(90-99级)";
            case 2:
                return "地榜(100-109级)";
            case 3:
                return "天榜(110-119级)";
            case 4:
                return "黄榜(120-129级)";
            case 5:
                return "帝榜(130-139级)";
            case 6:
                return "圣榜(140-149级)";
            case 7:
                return "仙榜(150-159级)";
            case 8:
                return "神榜(160-169级)";
            case 9:
                return "道榜(170-179级)";
            case 10:
                return "佛榜(180-189级)";
            case 11:
                return "佛榜(190-199级)"
        }
    }, t
}();
__reflect(VoXDDZ.prototype, "VoXDDZ");
var ModelXSBuff = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.buffArr = [], e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(3632, i.GC3632, i), e.regHand(3634, i.GC3634, i), e.regHand(3636, i.GC3636, i)
    }, e.prototype.getBuff = function (t) {
        for (var e = 0, i = this.buffArr.length; i > e; e++) {
            var o = this.buffArr[e];
            if (o.id == t) return o
        }
        return null
    }, e.prototype.addBuff = function (t) {
        this.buffArr.push(t), this.notify(e.MSG_ADDBUFF, t)
    }, e.prototype.removeBuff = function (t) {
        var i = this.buffArr.indexOf(t);
        i >= 0 && (this.buffArr.splice(i, 1), this.notify(e.MSG_DELBUFF, t))
    }, e.prototype.CG3631 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeShort(e), this.sendSocket(3631, i)
    }, e.prototype.GC3632 = function (t, i) {
        var o = i.readShort(),
            n = i.readByte(),
            a = i.readInt(),
            s = i.readByte();
        if (1 == n) {
            var r = t.getBuff(o);
            r ? (r.servTimeRm = a, r.servTimeDt = egret.getTimer()) : (r = new VoXSBuff, r.initXSBuff(o), r.type = s, r.servTimeRm = a, r.servTimeDt = egret.getTimer(), t.buffArr.push(r), t.notify(e.MSG_ADDBUFF, r)), 1 == t.buffArr.length && GameGlobal.tick.addInterv(t.onBuffTimer, 5e3, t);
            for (var l = t.buffArr, h = 0; h < l.length; h++) {
                var c = l[h];
                c.type == r.type && c.level < r.level && (l.splice(h, 1), t.notify(e.MSG_DELBUFF, c))
            }
        }
    }, e.prototype.CG3633 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeShort(e), this.sendSocket(3633, i)
    }, e.prototype.GC3634 = function (t, i) {
        var o = (i.readShort(), i.readByte());
        t.buffArr;
        1 == o || (2 == o ? ViewText.text("高等级丹药正在生效中，无法使用！") : 3 == o ? ViewText.text("不能叠加!") : 4 == o && ViewText.text("道具数量不够!")), t.notify(e.MSG_CANUSEBUFF, o)
    }, e.prototype.GC3636 = function (t, e) {
        var i = e.readShort();
        t.buffArr.length = 0;
        for (var o = 0; i > o; o++) {
            var n = e.readShort(),
                a = e.readInt(),
                s = e.readByte(),
                r = new VoXSBuff;
            t.buffArr.push(r), r.initXSBuff(n), r.type = s, r.servTimeRm = a, r.servTimeDt = egret.getTimer()
        }
        GameGlobal.tick.addInterv(t.onBuffTimer, 5e3, t)
    }, e.prototype.onBuffTimer = function (t) {
        for (var i = 0; i < t.buffArr.length; i++)
            if (t.buffArr[i].getRemainSec() <= 0) {
                var o = t.buffArr[i];
                t.buffArr.splice(i, 1), t.notify(e.MSG_DELBUFF, o)
            } 0 == t.buffArr.length && GameGlobal.tick.removeInterv(t.onBuffTimer, t)
    }, e.MSG_ADDBUFF = "1", e.MSG_DELBUFF = "-1", e.MSG_CANUSEBUFF = "MSG_canUseBuff", e
}(BaseModel);
__reflect(ModelXSBuff.prototype, "ModelXSBuff");
var View_buffInfo = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/main/BuffInfoSkin.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this._curVo = e, this.addMsg(), this.updateInfo()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.addMsg = function () {
        GameGlobal.tick.addInterv(this.onInterv, 1e3, this), GameGlobal.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onStageT, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.tick.removeInterv(this.onInterv, this), GameGlobal.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onStageT, this)
    }, e.prototype.onStageT = function (t) {
        var e = t.target;
        e == this.rect && this.closeHandler()
    }, e.prototype.updateInfo = function () {
        var t = this._curVo,
            e = this._curVo.id;
        this.buffIco.source = t.getIcon();
        var i;
        i = 1 == t.quality ? "CM1_json.grid1" : "CM1_json.bm_gridbg" + t.quality, this.buffIcoBg.source = i, this.buffName.text = CFG_Item.LIB[e].name, this.buffInfo.text = CFG_Item.LIB[e].miaoshu;
        var o = DateUtil.getMSBySec3(t.getRemainSec());
        this.time.$setText(o)
    }, e.prototype.onInterv = function (t) {
        t.updateInfo()
    }, e
}(BaseEUIView);
__reflect(View_buffInfo.prototype, "View_buffInfo");
var ViewBuffContainer = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "BuffContainerSkin", e
    }
    return __extends(e, t), e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.listBuff(), this.Scroller.viewport = this.buffGrp, this.Scroller.addChild(this.buffGrp), GameGlobal.modelXSBuff.on(ModelXSBuff.MSG_ADDBUFF, this.onAddBuff, this), GameGlobal.modelXSBuff.on(ModelXSBuff.MSG_DELBUFF, this.onDelBuff, this), GameGlobal.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onStageT, this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), GameGlobal.modelXSBuff.off(ModelXSBuff.MSG_ADDBUFF, this.onAddBuff, this), GameGlobal.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onStageT, this)
    }, e.prototype.onStageT = function (t) {
        var e = t.target;
        e == this || this.contains(e) || this.buffGrp.contains(e) || GameGlobal.layerMgr.isOpenView(UIConst.BUFFINFO) || this.closeHandler()
    }, e.prototype.listBuff = function () {
        for (var t = GameGlobal.modelXSBuff.buffArr, e = 0, i = t.length; i > e; e++) {
            var o = t[e];
            this.onAddBuff(o)
        }
        this.sizeView()
    }, e.prototype.onSize = function () {
        this.x = 274, this.y = platform.deviceTopPX + 182, 1 == GameGlobal.modelXSBuff.buffArr.length ? (this.currentState = "normal", this.x = 274) : 2 == GameGlobal.modelXSBuff.buffArr.length ? (this.currentState = "long", this.x = 220) : (this.currentState = "long", this.x = 210)
    }, e.prototype.onAddBuff = function (t) {
        if (-1 == this.getBuffIndex(t.id)) {
            var e = new ViewXSBuffIco;
            e.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBuffTouch, this), e.setVo(t), e.updateTime(), this.buffGrp.addChild(e), 1 == this.buffGrp.numChildren && GameGlobal.tick.addInterv(this.onBuffTimeUd, 1e3, this), this.sizeView()
        }
    }, e.prototype.onDelBuff = function (t) {
        var e = this.getBuffIndex(t.id);
        if (-1 != e) {
            var i = this.buffGrp.$doRemoveChild(e, !1);
            i.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onBuffTouch, this)
        }
        this.buffGrp.numChildren || GameGlobal.tick.removeInterv(this.onBuffTimeUd, this)
    }, e.prototype.getBuffIndex = function (t) {
        for (var e = 0, i = this.buffGrp.$children.length; i > e; e++) {
            var o = this.buffGrp.$children[e];
            if (o && o._vo.id == t) return e
        }
        return -1
    }, e.prototype.onBuffTimeUd = function (t) {
        for (var e = 0, i = t.buffGrp.$children.length; i > e; e++) {
            var o = t.buffGrp.$children[e];
            o.updateTime()
        }
    }, e.prototype.onBuffTouch = function (t) {
        var e = t.currentTarget;
        e._vo && GameGlobal.layerMgr.open(UIConst.BUFFINFO, e._vo)
    }, e.prototype.sizeView = function () {
        this.grp.validateNow(), this.buffBgLong.width = Math.max(52, Math.min(this.buffGrp.width, 390))
    }, e
}(BaseEUIView);
__reflect(ViewBuffContainer.prototype, "ViewBuffContainer");
var ViewXSBuffIco = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.qualityImg = new eui.Image, e.addChild(e.qualityImg), e.qualityImg.$setWidth(50), e.qualityImg.$setHeight(50), e.qualityImg.$setX(5), e.qualityImg.$setY(5), e.icon = new eui.Image, e.addChild(e.icon), e.labelBG = new eui.Image, e.addChild(e.labelBG), e.labelBG.source = "MainScreen_json.bm_headRectBG", e.labelBG.$setWidth(70), e.labelBG.$setX(0), e.labelBG.$setY(60), e.labelBG.$setHeight(24), e.labelBG.alpha = .6, e.label = new egret.TextField, e.label.textColor = 3403315, e.label.size = 20, e.addChild(e.label), e.label.$setY(62), e
    }
    return __extends(e, t), e.prototype.$onAddToStage = function (e, i) {
        t.prototype.$onAddToStage.call(this, e, i)
    }, e.prototype.$onRemoveFromStage = function () {
        t.prototype.$onRemoveFromStage.call(this)
    }, e.prototype.setVo = function (t) {
        this._vo = t, this.icon.source = t.getIcon();
        var e;
        e = 1 == t.quality ? "CM1_json.grid1" : "CM1_json.bm_gridbg" + t.quality, this.qualityImg.source = e
    }, e.prototype.updateTime = function () {
        var t = DateUtil.getMSBySec3(this._vo.getRemainSec());
        this.label.$setText(t), this.label.$setX(71 - this.label.textWidth >> 1)
    }, e
}(eui.Component);
__reflect(ViewXSBuffIco.prototype, "ViewXSBuffIco");
var VoXSBuff = function () {
    function t() {
        this.quality = 1, this.useState = 0
    }
    return t.prototype.initXSBuff = function (t) {
        this.id = t;
        var e = CFG_Item.LIB[t];
        this.icon = e.icon.toString() + "_png", this.quality = e.quality, this.level = e.level
    }, t.prototype.getIcon = function () {
        return this.icon ? this.icon : void 0
    }, t.prototype.getRemainSec = function () {
        var t;
        return this.servTimeRm > 0 ? (t = this.servTimeRm - (egret.getTimer() - this.servTimeDt) / 1e3 >> 0, 0 > t && (t = 0)) : t = 0, t
    }, t
}();
__reflect(VoXSBuff.prototype, "VoXSBuff");
var ModelXSFB = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(3420, i.GC3420, i), e.regHand(3422, i.GC3422, i), e.regHand(3424, i.GC3424, i), e.regHand(3426, i.GC3426, i), e.regHand(3760, i.GC3760, i), e.regHand(3762, i.GC3762, i), e.regHand(3764, i.GC3764, i), e.regHand(3766, i.GC3766, i), e.regHand(3770, i.GC3770, i), e.regHand(3772, i.GC3772, i), e.regHand(3774, i.GC3774, i), e.regHand(3776, i.GC3776, i)
    }, e.prototype.GC3420 = function (t, e) {
        t.upPropelling(e, Vo_XSFB_zsxt.getInst())
    }, e.prototype.GC3422 = function (t, e) {
        t.initData(e, Vo_XSFB_zsxt.getInst())
    }, e.prototype.GC3424 = function (t, e) {
        t.upTZ(e, Vo_XSFB_zsxt.getInst())
    }, e.prototype.GC3426 = function (t, e) {
        t.upSD(e, Vo_XSFB_zsxt.getInst())
    }, e.prototype.GC3760 = function (t, e) {
        t.upPropelling(e, Vo_XSFB_nd.getInst())
    }, e.prototype.GC3762 = function (t, e) {
        t.initData(e, Vo_XSFB_nd.getInst())
    }, e.prototype.GC3764 = function (t, e) {
        t.upTZ(e, Vo_XSFB_nd.getInst())
    }, e.prototype.GC3766 = function (t, e) {
        t.upSD(e, Vo_XSFB_nd.getInst())
    }, e.prototype.GC3770 = function (t, e) {
        t.upPropelling(e, Vo_XSFB_sh.getInst())
    }, e.prototype.GC3772 = function (t, e) {
        t.initData(e, Vo_XSFB_sh.getInst())
    }, e.prototype.GC3774 = function (t, e) {
        t.upTZ(e, Vo_XSFB_sh.getInst())
    }, e.prototype.GC3776 = function (t, e) {
        t.upSD(e, Vo_XSFB_sh.getInst())
    }, e.prototype.getData = function (t) {
        var e = this.getBytes();
        switch (t) {
            case 14:
                this.sendSocket(3421, e);
                break;
            case 19:
                this.sendSocket(3761, e);
                break;
            case 20:
                this.sendSocket(3771, e)
        }
    }, e.prototype.requestTZ = function (t, e) {
        var i = this.getBytes();
        switch (i.writeByte(e), t) {
            case 14:
                this.sendSocket(3423, i);
                break;
            case 19:
                this.sendSocket(3763, i);
                break;
            case 20:
                this.sendSocket(3773, i)
        }
    }, e.prototype.requestSD = function (t, e) {
        var i = this.getBytes();
        switch (i.writeByte(e), t) {
            case 14:
                this.sendSocket(3425, i);
                break;
            case 19:
                this.sendSocket(3765, i);
                break;
            case 20:
                this.sendSocket(3775, i)
        }
    }, e.prototype.upPropelling = function (t, e) {
        var i = t.readByte(),
            o = e.type,
            n = 0;
        switch (o) {
            case 14:
                n = CFG_COMMOND.XSFBZSXT;
                break;
            case 19:
                n = CFG_COMMOND.XSFBND;
                break;
            case 20:
                n = CFG_COMMOND.XSFBSH
        }
        1 == i ? CFG_COMMOND.isOpen(n, !1) && (VHuoDongEntry.addHD(n), this.getData(o)) : VHuoDongEntry.removeHD(n)
    }, e.prototype.initData = function (t, i) {
        for (var o = t.readByte(), n = i.List, a = 0; a < n.length && 0 != o; a++) {
            var s = n[a];
            if (s.isPass = !0, s.id == o) break
        }
        i.sdcs = t.readByte(), this.notify(e.MSG_UPDATE)
    }, e.prototype.upTZ = function (t, i) {
        var o = t.readByte();
        if (1 == o) {
            var n = t.readByte(),
                a = i.Map[n];
            a && (a.isPass = !0), e.isFightPass = !0, this.notify(e.MSG_UPDATE)
        } else 3 == o && ViewText.text("当前关卡未解锁")
    }, e.prototype.upSD = function (t, i) {
        var o = t.readByte();
        1 == o ? (i.sdcs--, this.notify(e.MSG_UPDATE)) : 2 == o ? ViewText.text("今日扫荡已用完") : 3 == o ? setTimeout(function () {
            ViewAlert.show("元宝不足，是否前往充值？", function () {
                GameGlobal.layerMgr.open(UIConst.RECHARGE), GameGlobal.layerMgr.close(UIConst.XSFB)
            })
        }, 500) : 4 == o && ViewText.text("背包已满")
    }, e.MSG_UPDATE = "MSG_UPDATE", e.MSG_SCROLLER = "MSG_SCROLLER", e.isFightPass = !1, e.sdTip = !0, e.isMsgScroll = !1, e
}(BaseModel);
__reflect(ModelXSFB.prototype, "ModelXSFB");
var Vo_XSFB_nd = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.type = 19, e.lib1 = CFG_XSFB.NDLIB1, e.lib2 = CFG_XSFB.NDLIB2, e.create(), e
    }
    return __extends(e, t), e.getInst = function () {
        return this._inst || (this._inst = new e)
    }, e
}(Vo_XSFBItem);
__reflect(Vo_XSFB_nd.prototype, "Vo_XSFB_nd");
var Vo_XSFB_sh = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.type = 20, e.lib1 = CFG_XSFB.SHLIB1, e.lib2 = CFG_XSFB.SHLIB2, e.create(), e
    }
    return __extends(e, t), e.getInst = function () {
        return this._inst || (this._inst = new e)
    }, e
}(Vo_XSFBItem);
__reflect(Vo_XSFB_sh.prototype, "Vo_XSFB_sh");
var Vo_XSFB_zsxt = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.type = 14, e.lib1 = CFG_XSFB.ZSXTLIB1, e.lib2 = CFG_XSFB.ZSXTLIB2, e.create(), e
    }
    return __extends(e, t), e.getInst = function () {
        return this._inst || (this._inst = new e)
    }, e
}(Vo_XSFBItem);
__reflect(Vo_XSFB_zsxt.prototype, "Vo_XSFB_zsxt");
var CFG_DUANZAO = function () {
    function t() {}
    return t
}();
__reflect(CFG_DUANZAO.prototype, "CFG_DUANZAO");
var VXSFBItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.skinName = "XSFBItemSkin", e
    }
    return __extends(e, t), e.prototype.createChildren = function () {
        t.prototype.createChildren.call(this), this.iconNotice.visible = !1
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            this.vo = t;
            var e = t.isPass ? t.cfg.yjsd : t.cfg.jlzs,
                i = ConfigHelp.makeVoList(e)[0];
            this.grid.data = i, this.lbna.text = i.name, this.lbna.textColor = Color.getColorInt(i.quality), this.lbName.text = "第" + t.id + "关";
            var o = VXSFBPnl.vo.findMin();
            this.iconNotice.visible = o - 1 == this.vo.index && VXSFBPnl.vo.sdcs > 0 && this.vo.touch, this._sel ? this.imgsel.source = "xsfb_json.now" : t.isPass ? this.imgsel.source = "xsfb_json.pass" : this.imgsel.source = "xsfb_json.nopass"
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            if (this._sel = t, t) {
                if (this.imgsel.source = "xsfb_json.now", this.vo) {
                    if (!this.vo.touch || !this.vo.isPass) return;
                    this.vo.touch = !1;
                    var e = VXSFBPnl.vo.findMin();
                    this.iconNotice.visible = e - 1 == this.vo.index && VXSFBPnl.vo.sdcs > 0 && this.vo.touch
                }
            } else this.vo && (this.vo.isPass ? this.imgsel.source = "xsfb_json.pass" : this.imgsel.source = "xsfb_json.nopass")
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.ItemRenderer);
__reflect(VXSFBItem.prototype, "VXSFBItem");
var VXSFBPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.frist = !0, e.grids = [], e.skinName = "XSFBPnlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.title = "战神刑天", this.lbdes.text = "通关第10关可激活\n              战神刑天", this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.list.itemRenderer = VXSFBItem, this.data = new eui.ArrayCollection, this.list.dataProvider = this.data, DisplayUtil.popBtnStyle(this.btnL), DisplayUtil.popBtnStyle(this.btnR), new ScrollMove(this.btnR, this.btnL, this.list, "width"), this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP, this.btnT, this), this.list.addEventListener(egret.Event.CHANGE, this.onT, this), this.scroll.addEventListener(egret.Event.CHANGE, this.scrollT, this), this.imgtxt = new ImageText, this.imgtxt.charFunc = ImageText.STRFUNC, this.imgtxt.container = this.zlGrp, this.role = new UIRole, this.mcGrp.addChild(this.role), this.role.scaleX = this.role.scaleY = 1.3
    }, e.prototype.scrollT = function () {
        var t = this.list,
            i = this.proGrp.width,
            o = t.numElements,
            n = t.contentWidth / o,
            a = e.vo.findMin();
        a == e.vo.List.length && (a = e.vo.List.length - 1);
        var s = n * (a + 1);
        if (s > i) {
            if (this.pro.width = i, t.scrollH > 0) {
                var r = s - 45 - t.scrollH;
                i >= r && (this.pro.width = r)
            }
        } else if (i >= s && (this.pro.width = s - 45, t.scrollH > 0)) {
            var l = this.pro.width - t.scrollH;
            this.pro.width = l, 0 >= l && (this.pro.width = 0)
        }
    }, e.prototype.btnT = function () {
        var t = this.list.selectedItem;
        if (t.isPass) {
            if (0 == e.vo.sdcs) return void ViewText.text("今日扫荡次数已用完");
            var i = e.vo.lib2[e.vo.getLIB2len() + 1 - e.vo.sdcs];
            if (i) var o = Util.parseIntStr(i.Sdxh)[2],
                n = Util.parseIntStr(i.Sdxh)[0];
            o += 32 == n ? "绑定元宝" : "元宝";
            var a = "是否花费<font color='#10a244'>" + o + "</font>扫荡" + this.base.title + "第<font color='#10a244'>" + t.id + "</font>关?";
            ViewAlert.show(a, function () {
                GameGlobal.modelXSFB.requestSD(e.vo.type, t.id)
            })
        } else GameGlobal.modelXSFB.requestTZ(e.vo.type, t.id)
    }, e.prototype.checkTip = function () {
        ModelXSFB.sdTip = !1
    }, e.prototype.checkCanOpen = function (t) {
        if (14 == t) var e = CFG_COMMOND.XSFBZSXT;
        else 19 == t ? e = CFG_COMMOND.XSFBND : 20 == t && (e = CFG_COMMOND.XSFBSH);
        CFG_COMMOND.isOpen(e, !0) || this.closeHandler()
    }, e.prototype.checkOpenTime = function (t) {
        var i = GameGlobal.modelAct.actData.getChildByID(t.index);
        if (i) {
            var o = i.getRemainSec();
            0 >= o && (t.closeHandler(), e.vo = null)
        } else t.closeHandler(), e.vo = null
    }, e.prototype.createData = function (t) {
        if (14 == t) {
            var i = "战神刑天";
            e.vo = Vo_XSFB_zsxt.getInst()
        } else 19 == t ? (i = "炽天女帝", e.vo = Vo_XSFB_nd.getInst()) : 20 == t && (i = "青阳少昊", e.vo = Vo_XSFB_sh.getInst());
        this.base.title = i, this.lbdes.text = "通关第10关可激活\n              " + i, DisplayUtil.fillDataAC(this.data, e.vo.List)
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i), this.index = i, this.checkCanOpen(i), this.createData(i), ModelXSFB.isMsgScroll = !0, this.checkTip(), this.frist = !0, GameGlobal.modelXSFB.on(ModelXSFB.MSG_UPDATE, this.update, this), GameGlobal.modelXSFB.on(ModelXSFB.MSG_SCROLLER, this.scrollT, this), GameGlobal.modelXSFB.getData(e.vo.type), GameGlobal.tick.addInterv(this.checkOpenTime, 1e3, this)
    }, e.prototype.onClose = function () {
        ModelXSFB.isMsgScroll = !1, GameGlobal.modelXSFB.off(ModelXSFB.MSG_UPDATE, this.update, this), GameGlobal.modelXSFB.off(ModelXSFB.MSG_SCROLLER, this.scrollT, this), GameGlobal.tick.removeInterv(this.checkOpenTime, this), this.role.stopAndClear()
    }, e.prototype.setScroll = function () {
        var t = this.list,
            e = t.numElements,
            i = t.contentWidth / e,
            o = i * (t.selectedIndex + 1) - t.width;
        o > 0 && egret.Tween.get(t).to({
            scrollH: o
        }, 500, egret.Ease.circInOut).call(this.scrollT, this)
    }, e.prototype.update = function () {
        if (this.frist) this.frist = !1, i = e.vo.findMin(), i == e.vo.List.length && (i = e.vo.List.length - 1);
        else if (ModelXSFB.isFightPass) {
            ModelXSFB.isFightPass = !1;
            var t = this.list.selectedItem;
            if (e.vo.Map[t.id + 1]) var i = this.list.selectedIndex + 1;
            else i = this.list.selectedIndex
        } else i = this.list.selectedIndex;
        DisplayUtil.fillDataAC(this.data, e.vo.List), this.setSel(i)
    }, e.prototype.onT = function (t) {
        var e = this.list.selectedItem;
        this.updateView(e)
    }, e.prototype.setSel = function (t) {
        var e = this;
        this.list.selectedIndex = t;
        var i = this.data.getItemAt(t);
        i && this.updateView(i), setTimeout(function () {
            e.scrollT(), e.setScroll()
        }, 300)
    }, e.prototype.updateStates = function (t) {
        this.lbjs.visible = !1;
        var i = !0,
            o = !1,
            n = !0;
        if (t.isPass) {
            var a = "扫荡";
            o = !0, e.vo.sdcs <= 0 && (i = !1, o = !1, n = !1), ConfigHelp.makeStrGrids(t.cfg.yjsd, this.grids, 0, 0, this.gridGrp, !0), this.imgjl.source = "xsfb_json.sdjl"
        } else {
            a = "挑战", i = t.cfg.tjzl <= GameGlobal.modelRole.voMine.str ? !0 : !1;
            var s = e.vo.Map[t.id - 1];
            s && 0 == s.isPass && (i = !1, n = !1, this.lbjs.visible = !0), ConfigHelp.makeStrGrids(t.cfg.gqwin, this.grids, 0, 0, this.gridGrp, !0), this.imgjl.source = "xsfb_json.tgjl"
        }
        this.btn.label = a, this.btn.setNoticeVis(i), this.btn.enabled = n, this.sdGrp.visible = o
    }, e.prototype.updateView = function (t) {
        this.updateStates(t), this.role.stopAndClear(), this.role.setMonsterID(t.cfg.xt), this.role.setVal(3), this.role.validParts(), this.role.play(700), this.lbguan.text = t.id.toString(), this.imgtxt.setText(t.cfg.tjzl.toString()), this.lbsd.visible = t.isPass, this.lbsd.textFlow = HtmlUtil.parse("剩余扫荡次数:" + HtmlUtil.color(e.vo.sdcs, "#10a244"));
        var i = e.vo.lib2[e.vo.getLIB2len() + 1 - e.vo.sdcs];
        if (i) {
            this.imgxh.visible = this.lbxh.visible = !0;
            var o = Util.parseIntStr(i.Sdxh);
            this.imgxh.source = 32 == o[0] ? "MainScreen_json.byl" : "MainScreen_json.bm_yb", this.lbxh.text = "x" + o[2]
        } else this.imgxh.visible = this.lbxh.visible = !1
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VXSFBPnl.prototype, "VXSFBPnl");
var VXiaoFeiActPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._oldSysID = -1, e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.createPageGrp().createTabGroup().createQuestBtn(), this.base.btnQuest.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onQuestT, this), this.addCloseListen(this.base.btnClose).addCloseListen(this.base.btnReturn), this.base.listenTabClick(this.onSel, this);
        var e = GameGlobal.layerMgr;
        e.reg(UIConst.VLUCKROLL, VLuckyRoll, this.base.pageGrp), e.reg(UIConst.LJXF, VLJXF, this.base.pageGrp), e.reg(UIConst.FUWENROLL, VFuWenRoll, this.base.pageGrp)
    }, e.prototype.onSel = function (t) {
        this.setSelSysID(t.bindSysID)
    }, e.prototype.setSelSysID = function (t) {
        switch (this.base.btnQuest.visible = !1, this._oldSysID) {
            case UIConst.VLUCKROLL:
                GameGlobal.layerMgr.close(UIConst.VLUCKROLL);
                break;
            case UIConst.LJXF:
                GameGlobal.layerMgr.close(UIConst.LJXF);
                break;
            case UIConst.FUWENROLL:
                GameGlobal.layerMgr.close(UIConst.FUWENROLL)
        }
        switch (t) {
            case UIConst.VLUCKROLL:
                this.base.title = "幸运大转盘", this.base.btnQuest.visible = !0, GameGlobal.layerMgr.open(UIConst.VLUCKROLL);
                break;
            case UIConst.LJXF:
                this.base.title = "累计消费", GameGlobal.layerMgr.open(UIConst.LJXF);
                break;
            case UIConst.FUWENROLL:
                this.base.title = "符文转盘", GameGlobal.layerMgr.open(UIConst.FUWENROLL)
        }
        this._oldSysID = t, this.base.setTabSelSys(t)
    }, e.prototype.updateTabs = function () {
        GameGlobal.modelAct.actData.getChildByID(5) ? this.base.addTab("幸运转盘", 1, UIConst.VLUCKROLL) : this.base.removeTabByID(UIConst.VLUCKROLL), GameGlobal.modelAct.actData.getChildByID(6) ? this.base.addTab("累计消费", 3, UIConst.LJXF) : this.base.removeTabByID(UIConst.LJXF), GameGlobal.modelAct.actData.getChildByID(8) && CFG_COMMOND.isOpen(CFG_COMMOND.FUWENROLL, !1) ? this.base.addTab("符文转盘", 2, UIConst.FUWENROLL) : this.base.removeTabByID(UIConst.FUWENROLL)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.updateTabs();
        e ? e >= 1e3 && this.base.getTabBySysID(e) && this.base.setTabSelSys(e, !0) : this.base.setTabSelIdx(0, !0);
        var i = GameGlobal.modelAct.actData.getChildByID(6);
        i && (GameGlobal.modelLJXF.on(ModelLJXF.UPDATE, this.upNotice, this), GameGlobal.modelLJXF.CG2641())
    }, e.prototype.onClose = function () {
        this.setSelSysID(-1), GameGlobal.modelLJXF.off(ModelLJXF.UPDATE, this.upNotice, this)
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e.prototype.upNotice = function () {
        this.base.setNoticBySysID(UIConst.LJXF, GameGlobal.modelLJXF.notice)
    }, e.prototype.onQuestT = function () {
        this._oldSysID == UIConst.VLUCKROLL ? GameGlobal.layerMgr.open(UIConst.UIID_INTRODUCE, "1.元宝转盘每达10次必定获得神兽朱雀、熊猫大师神识;\n2.神兽朱雀只在幸运转盘唯一获得;\n3.神兽熊猫大师在开服累计充值活动、以及幸运转盘可获得;\n4.若您已经激活了朱雀或熊猫大师，则自动将神识转化为神兽石;\n5.幸运转盘有概率获得如：终极兽诀宝箱、红色玄铁、珍兽石、神兽石等珍稀道具。") : this._oldSysID == UIConst.FUWENROLL && GameGlobal.layerMgr.open(UIConst.UIID_INTRODUCE, "1.符文转盘产出伙伴符文、符文经验丹；\n2.元宝转盘符文时，最低可获得3星符文；\n3.元宝转盘相对于绑元转盘，可大概率获得4星、5星珍惜符文\n")
    }, e
}(BaseEUIView);
__reflect(VXiaoFeiActPnl.prototype, "VXiaoFeiActPnl");
var ModelFuWenRoll = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.lastRollType = 2, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(3060, this.GC_ROLLDETAIL, this), e.regHand(3064, this.GC_ROLLRET, this)
    }, e.prototype.GC_ROLLDETAIL = function (t, i) {
        t.records = [];
        for (var o = 0, n = i.readShort(); n > o; o++) t.records[o] = [i.readUTF(), i.readInt(), i.readShort()];
        i.readShort();
        voFuWenRoll.init();
        var n = i.readShort();
        for (o = 0; n > o; o++) {
            var a = i.readByte(),
                s = i.readByte();
            voFuWenRoll.Map[a].hcs = s
        }
        t.notify(e.MSG_RollData)
    }, e.prototype.CG_ROLLDETAIL = function () {
        this.sendSocket(3061, this.getBytes())
    }, e.prototype.CG_ROLL = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeByte(e), this.sendSocket(3063, i)
    }, e.prototype.GC_ROLLRET = function (t, i) {
        for (var o = [], n = 0, a = i.readShort(); a > n; n++) o[n] = i.readShort();
        var s = t.lastRollType = i.readByte();
        voFuWenRoll.Map[s].hcs++, t.notify(e.MSG_ZPRET, o)
    }, e.MSG_RollData = "MSG_RollData", e.MSG_ZPRET = "MSG_ZPRET", e
}(BaseModel);
__reflect(ModelFuWenRoll.prototype, "ModelFuWenRoll");
var voFuWenRoll = function () {
    function t() {
        this.hcs = 0
    }
    return t.init = function () {
        if (!t.Map[1]) {
            var e = CFG_FuWenRoll.LIB_ZPCOST;
            for (var i in e) {
                var o = new t;
                o.id = e[i].id, o.dzcs = e[i].dzcs;
                o.zk = e[i].zk;
                t.Map[o.id] = o
            }
        }
    }, t.Map = {}, t
}();
__reflect(voFuWenRoll.prototype, "voFuWenRoll");
var VFuWenRoll = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.index = 0, e.isTwn = !1, e.itemArr = [], e.times = 0, e._selIndex = 0, e.skinName = "VFuWenRollSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.createGrids(), this.recordAC = new eui.ArrayCollection, this.rList.itemRenderer = VRollRecordItem, this.rList.dataProvider = this.recordAC, DisplayUtil.popBtnStyle(this.lbFWQH), this.lbFWQH.textFlow = HtmlUtil.underLine("前往符文强化"), this.lbFWQH.touchEnabled = !0, this.lbFWQH.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onFWQH, this), this.btn0.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.createGrids = function () {
        var t = CFG_FuWenRoll.LIB_ZPJLXS,
            e = 0;
        for (var i in t) {
            var o = t[i],
                n = this.gridArr[e];
            if (n || (n = ViewGrid.create(), n.width = n.height = 90, n.anchorOffsetX = n.anchorOffsetY = 45, n.enableTip()), 1 == o.wzbq) {
                var a = new eui.Image;
                a.source = "xiaoFeiAct_json.jp", n.addChild(a)
            } else if (2 == o.wzbq) {
                var a = new eui.Image;
                a.source = "xiaoFeiAct_json.zp", n.addChild(a)
            }
            var s = 2 * Math.PI * ((e - .5) / 12),
                r = 260 * Math.cos(s) + 350 >> 0,
                l = 225 * Math.sin(s) + 455 >> 0;
            n.x = r, n.y = l;
            var h = ConfigHelp.makeVoByArr(Util.parseIntStr(o.jl));
            n.setData(h), n.isShowEff(!0), this.addChild(n), this.gridArr[e] = n, e++
        }
        var c = CFG_FuWenRoll.LIB_ZPCOST,
            p = Util.parseIntStr(c[1].s),
            u = Util.parseIntStr(c[2].s),
            d = Util.parseIntStr(c[3].s),
            f = "购买{0}银两";
        this.lbYL0.text = Lang.reTxt(f, p[2]), this.lbYL1.text = Lang.reTxt(f, u[2]), this.lbYL2.text = Lang.reTxt(f, d[2])
    }, e.prototype.updateCost = function () {
        CFG_FuWenRoll.LIB_ZPCOST, GameGlobal.modelRole.voMine;
        this.updateTerm(this.iconCost0, this.txtCost0, 0, CFG_FuWenRoll.getZPCostArr(1)), this.updateTerm(this.iconCost1, this.txtCost1, 1109, CFG_FuWenRoll.getZPCostArr(2)), this.updateTerm(this.iconCost2, this.txtCost2, 1110, CFG_FuWenRoll.getZPCostArr(3))
    }, e.prototype.AddZkIconAll = function () {
        var t = voFuWenRoll.Map,
            e = 0;
        for (var i in t) {
            var o = t[i];
            if (0 != o.zk) {
                var n = this["btn" + e];
                o.dzcs <= o.hcs ? n.removeIconZk() : n.addIconZk(o.zk)
            }
            e++
        }
    }, e.prototype.updateZkIcon = function () {
        var t = GameGlobal.modelfuwenRoll.lastRollType,
            e = voFuWenRoll.Map[t];
        if (e.dzcs <= e.hcs) {
            var i = this["btn" + (t - 1)];
            i.removeIconZk()
        }
    }, e.prototype.updateTerm = function (t, e, i, o) {
        var n = GameGlobal.modelBag.getItemCount(i);
        n > 0 ? (t.source = IconUtil.getIconUrl(CFG_Item.LIB[i].icon), e.text = "" + n, e.textColor = Color.UIGREEN2) : (t.source = IconUtil.getIconUrl(CFG_Item.LIB[o[0]].icon), e.text = "" + o[2], ConfigHelp.checkEnough1(o) ? e.textColor = Color.UIGREEN2 : e.textColor = Color.UIRED)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelfuwenRoll.on(ModelFuWenRoll.MSG_RollData, this.onUpdate, this), GameGlobal.modelfuwenRoll.on(ModelFuWenRoll.MSG_ZPRET, this.onZPAward, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.updateCost, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelfuwenRoll.off(ModelFuWenRoll.MSG_RollData, this.onUpdate, this), GameGlobal.modelfuwenRoll.off(ModelFuWenRoll.MSG_ZPRET, this.onZPAward), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.updateCost)
    }, e.prototype.onUpdate = function () {
        this.updateCost(), this.updateRecord(), this.AddZkIconAll()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), this.updateRecord(), GameGlobal.modelfuwenRoll.CG_ROLLDETAIL(), GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), this.recordAC.removeAll(), GameGlobal.tick.removeInterv(this.onTick, 1e3)
    }, e.prototype.onBtnT = function (t) {
        switch (t.currentTarget) {
            case this.btn0:
                this.buyy(1);
                break;
            case this.btn1:
                this.buyy(2);
                break;
            case this.btn2:
                this.buyy(3)
        }
    }, e.prototype.onFWQH = function (t) {
        GameGlobal.layerMgr.open(UIConst.HUOBANPAGE, 3), GameGlobal.layerMgr.close(UIConst.XIAOFEIACT)
    }, e.prototype.buyy = function (t) {
        var e = CFG_FuWenRoll.LIB_ZPCOST[t];
        if ("0" != e.xh && ConfigHelp.checkEnough1(Util.parseIntStr(e.xh))) GameGlobal.modelfuwenRoll.CG_ROLL(1, t);
        else {
            var i = CFG_FuWenRoll.getZPCostArr(t);
            ConfigHelp.checkEnough1(i, !0) && GameGlobal.modelfuwenRoll.CG_ROLL(2, t)
        }
    }, e.prototype.updateRecord = function () {
        var t = GameGlobal.modelfuwenRoll.records;
        t && DisplayUtil.fillDataAC(this.recordAC, t)
    }, e.prototype.onZPAward = function (t) {
        this.queue ? this.queue = this.queue.concat(t) : this.queue = t, this.isTwn || this.tweenAward(), this.updateZkIcon()
    }, e.prototype.tweenAward = function () {
        for (this.isTwn = !1; this.queue.length;) {
            var t = this.queue.shift(),
                e = CFG_FuWenRoll.LIB_ZPJL[t];
            if (e) {
                this.itemArr.length < 20 && this.itemArr.push(ConfigHelp.makeVoByArr(Util.parseIntStr(e.dj)));
                var i = 200,
                    o = CFG_FuWenRoll.LIB_ZPJLXS[e.sid];
                if (o && this.times < 1) {
                    this.times++;
                    var n = o.id - 1 + 24,
                        a = 1e3 / (1 + Math.pow(this.queue.length, .3));
                    egret.Tween.get(this).to({
                        showIdx: n
                    }, a, this.ease1).wait(i).call(this.onTwnComp1, this, [o.id]).wait(300).call(this.onTwnComp2, this), this.isTwn = !0;
                    break
                }
                if (0 == this.queue.length) {
                    var s = 4;
                    n = 24 + s;
                    var a = 1e3 / (1 + Math.pow(this.queue.length, .3));
                    egret.Tween.get(this).to({
                        showIdx: n
                    }, a, this.ease1).wait(i).call(this.onTwnComp1, this, null).wait(300).call(this.onTwnComp2, this), this.isTwn = !0;
                    break
                }
            }
            if (0 == this.queue.length) {
                var r = this,
                    l = GameGlobal.modelfuwenRoll.lastRollType,
                    h = CFG_FuWenRoll.LIB_ZPCOST[GameGlobal.modelfuwenRoll.lastRollType];
                if ("0" != h.xh && ConfigHelp.checkEnough1(Util.parseIntStr(h.xh))) var c = h.xh;
                else c = voFuWenRoll.Map[l].dzcs > voFuWenRoll.Map[l].hcs ? h.xh3 : h.xh2;
                VAwardPnl.show(this.itemArr, h.n, "关闭", function () {
                    r.buyy(h.id), GameGlobal.layerMgr.close(UIConst.AWARD)
                }, null, 1e4, c), r.itemArr.length = 0, r.times = 0, GameGlobal.modelfuwenRoll.CG_ROLLDETAIL()
            }
        }
    }, e.prototype.onTwnComp1 = function (t) {
        if (t) {
            var e = t - 1,
                i = this.gridArr[e];
            EffectMgr.getIns().addEff1("uieff/dzsuccess", this, i.x, i.y, 400, 400, !1, 1)
        }
    }, e.prototype.onTwnComp2 = function () {
        this.isTwn = !1;
        var t = this,
            e = GameGlobal.modelfuwenRoll.lastRollType;
        if (0 == this.queue.length) {
            var i = CFG_FuWenRoll.LIB_ZPCOST[GameGlobal.modelfuwenRoll.lastRollType];
            if ("0" != i.xh && ConfigHelp.checkEnough1(Util.parseIntStr(i.xh))) var o = i.xh;
            else o = voFuWenRoll.Map[e].dzcs > voFuWenRoll.Map[e].hcs ? i.xh3 : i.xh2;
            VAwardPnl.show(this.itemArr, i.n, "关闭", function () {
                t.buyy(i.id), GameGlobal.layerMgr.close(UIConst.AWARD)
            }, null, 1e4, o), t.itemArr.length = 0, GameGlobal.modelfuwenRoll.CG_ROLLDETAIL(), t.times = 0
        } else this.tweenAward()
    }, e.prototype.ease1 = function (t) {
        return 1 != t && (t = Math.sin(Math.PI * t * .5)), t
    }, e.prototype.onTick = function (t) {
        t.isTwn || (t.showIdx += 1)
    }, e.prototype.awdTick = function (t, e, i) {
        t.showIdx++
    }, Object.defineProperty(e.prototype, "showIdx", {
        get: function () {
            return this._selIndex
        },
        set: function (t) {
            var e = t % 12 >> 0;
            this.setSelIdx(e)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setSelIdx = function (t) {
        var e = this.gridArr[this._selIndex],
            i = this.gridArr[t];
        e != i && (i && (i.$setScaleX(1.4), i.$setScaleY(1.4)), e && (e.$setScaleX(1), e.$setScaleY(1))), this._selIndex = t
    }, e
}(BaseEUIView);
__reflect(VFuWenRoll.prototype, "VFuWenRoll");
var ModelLJXF = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(2642, i.GC2642, i), e.regHand(2644, i.GC2644, i)
    }, e.prototype.CG2641 = function () {
        var t = this.getBytes();
        this.sendSocket(2641, t)
    }, e.prototype.GC2642 = function (t, i) {
        t.ljxf = i.readInt();
        var o = i.readShort();
        t.notice = !1;
        for (var n = 0; o > n; n++) {
            var a = i.readByte(),
                s = i.readByte();
            Vo_LJXFItem.update(a, s), 1 == s && (t.notice = !0)
        }
        t.notify(e.UPDATE)
    }, e.prototype.CG2643 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(2643, e)
    }, e.prototype.GC2644 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readByte();
            Vo_LJXFItem.update(n, 2), t.notice = Vo_LJXFItem.Notice(), t.notify(e.UPDATE)
        } else 2 == o ? ViewText.text("条件未达") : 3 == o && GameGlobal.modelBag.checkRLTips(0)
    }, e.UPDATE = "UPDATE", e
}(BaseModel);
__reflect(ModelLJXF.prototype, "ModelLJXF");
var CFG_EMAIL = function () {
    function t() {}
    return t
}();
__reflect(CFG_EMAIL.prototype, "CFG_EMAIL");
var CFG_ENEMY = function () {
    function t() {}
    return t.LIB = {
        1: {
            name: "刺客",
            BA: 10,
            UA: 5,
            BD: 5,
            UD: 5,
            MS: 50,
            skin: 2001,
            SL: [0]
        },
        2: {
            name: "山贼",
            BA: 5,
            UA: 5,
            BD: 10,
            UD: 5,
            MS: 50,
            skin: 2002,
            SL: [0]
        }
    }, t
}();
__reflect(CFG_ENEMY.prototype, "CFG_ENEMY");
var CFG_Equip = function () {
    function t() {}
    return t.getRedEQCLArr = function (t) {
        var e = this.LIBREDEQ[t];
        return e ? (e.$_cl || (e.$_cl = ConfigHelp.makeVoList(e.cl)), e.$_cl) : null
    }, t.getCLEQCLArr = function (t) {
        var e = this.LIB_CLHECHENG[t];
        return e ? (e.$_cl || (e.$_cl = ConfigHelp.makeVoList(e.cl)), e.$_cl) : null
    }, t.getEQExtraAttrStr = function (t) {
        var e = this.LIBREDEQ[t];
        if (e)
            for (var i, o = Util.strToIntArr(e.sx), n = "", a = 0, s = o.length; s > a; a++) {
                var r = CFG_ATTR.LIB[o[a][0]],
                    l = r.n;
                if (r.sb > 1) {
                    var h = r.sb / 100;
                    i = o[a][1] / h + "%~" + o[a][2] / h + "%"
                } else i = o[a][1] + "~" + o[a][2];
                n += 0 == a ? l + ":" + i : "\n" + (l + ":" + i)
            }
        return n
    }, t
}();
__reflect(CFG_Equip.prototype, "CFG_Equip");
var ModelXiaoFeiAct = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.lastRollType = 2, e.freeCs = 0, e.bjcsOne = 0, e.bjcsTen = 0, e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(2720, this.GC_ROLLDETAIL, this), e.regHand(2724, this.GC_ROLLRET, this), e.regHand(2728, this.GC_LUCKYROLL_OPEN_MESSAGE, this), e.regHand(2730, this.GC_HALF_TIMES_INFO, this)
    }, e.prototype.GC_ROLLDETAIL = function (t, i) {
        t.records = [];
        for (var o = 0, n = i.readShort(); n > o; o++) t.records[o] = [i.readUTF(), i.readInt(), i.readShort()];
        i.readShort();
        t.freeCs = i.readShort(), t.notify(e.MSG_RollData)
    }, e.prototype.CG_ROLLDETAIL = function () {
        var t = this.getBytes();
        this.sendSocket(2721, t)
    }, e.prototype.CG_ROLL = function (t, e) {
        if (!this.isFlag(2723)) {
            this.addDelayFlag(2723, 2e3);
            var i = this.getBytes();
            i.writeByte(t), i.writeByte(e), this.sendSocket(2723, i)
        }
    }, e.prototype.GC_ROLLRET = function (t, i) {
        for (var o = [], n = 0, a = i.readShort(); a > n; n++) o[n] = i.readShort();
        t.notify(e.MSG_ZPRET, o), t.lastRollType = i.readByte(), t.CG_ROLLDETAIL(), t.CG_HALF_TIMES()
    }, e.prototype.CG_SEND_LUCKYROLL_IS_OPEN = function () {
        var t = this.getBytes();
        this.sendSocket(2725, t)
    }, e.prototype.CG_LUCKYROLL_OPEN_MESSAGE = function () {
        var t = this.getBytes();
        this.sendSocket(2727, t)
    }, e.prototype.GC_LUCKYROLL_OPEN_MESSAGE = function (t, e) {
        var i = e.readByte();
        0 == i && t.openLuckyRoll()
    }, e.prototype.CG_HALF_TIMES = function () {
        var t = this.getBytes();
        this.sendSocket(2729, t)
    }, e.prototype.GC_HALF_TIMES_INFO = function (t, i) {
        t.bjcsOne = i.readShort(), t.bjcsTen = i.readShort(), t.notify(e.MSG_RollData)
    }, e.prototype.openLuckyRoll = function () {
        var t = GameGlobal.modelAct.actData.getChildByID(5);
        if (t) {
            var e = t.getChildByID(34);
            e && 1 == e.index && CFG_COMMOND.isOpen(CFG_COMMOND.LUCKYROLL, !1) && (GameGlobal.layerMgr.open(UIConst.XIAOFEIACT, UIConst.VLUCKROLL), this.CG_SEND_LUCKYROLL_IS_OPEN())
        }
    }, e.MSG_RollData = "rollData", e.MSG_ZPRET = "MSG_ZPRET", e
}(BaseModel);
__reflect(ModelXiaoFeiAct.prototype, "ModelXiaoFeiAct");
var VLuckyRoll = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.index = 0, e.isTwn = !1, e.itemArr = [], e.times = 0, e._selIndex = 0, e.skinName = "LuckyRollSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.createGrids(), this.updateCost(), this.recordAC = new eui.ArrayCollection, this.rList.itemRenderer = VRollRecordItem, this.rList.dataProvider = this.recordAC, this.btn0.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this)
    }, e.prototype.createGrids = function () {
        var t = CFG_XiaoFeiAct.LIB_ZPJLXS,
            e = 0;
        for (var i in t) {
            var o = t[i],
                n = this.gridArr[e];
            if (n || (n = ViewGrid.create(), n.width = n.height = 90, n.anchorOffsetX = n.anchorOffsetY = 45, n.enableTip()), 1 == o.wzbq) {
                var a = new eui.Image;
                a.source = "xiaoFeiAct_json.jp", n.addChild(a)
            } else if (2 == o.wzbq) {
                var a = new eui.Image;
                a.source = "xiaoFeiAct_json.zp", n.addChild(a)
            }
            var s = 2 * Math.PI * ((e - .5) / 12),
                r = 260 * Math.cos(s) + 350 >> 0,
                l = 225 * Math.sin(s) + 455 >> 0;
            n.x = r, n.y = l;
            var h = ConfigHelp.makeVoByArr(Util.parseIntStr(o.jl));
            n.setData(h), n.isShowEff(!0), this.addChild(n), this.gridArr[e] = n, e++
        }
        var c = CFG_XiaoFeiAct.LIB_ZPCOST,
            p = Util.parseIntStr(c[1].s),
            u = Util.parseIntStr(c[2].s),
            d = Util.parseIntStr(c[3].s),
            f = "购买{0}银两";
        this.lbYL0.text = Lang.reTxt(f, p[2]), this.lbYL1.text = Lang.reTxt(f, u[2]), this.lbYL2.text = Lang.reTxt(f, d[2])
    }, e.prototype.updateCost = function () {
        CFG_XiaoFeiAct.LIB_ZPCOST, GameGlobal.modelRole.voMine;
        this.updateTerm(this.iconCost0, this.txtCost0, 0, CFG_XiaoFeiAct.getZPCostArr(1)), this.updateTerm(this.iconCost1, this.txtCost1, 1102, CFG_XiaoFeiAct.getZPCostArr(2)), this.updateTerm(this.iconCost2, this.txtCost2, 1103, CFG_XiaoFeiAct.getZPCostArr(3))
    }, e.prototype.updateTerm = function (t, e, i, o) {
        var n = GameGlobal.modelBag.getItemCount(i);
        n > 0 ? (t.source = IconUtil.getIconUrl(CFG_Item.LIB[i].icon), e.text = "" + n, e.textColor = Color.UIGREEN2) : (t.source = IconUtil.getIconUrl(CFG_Item.LIB[o[0]].icon), e.text = "" + o[2], ConfigHelp.checkEnough1(o) ? e.textColor = Color.UIGREEN2 : e.textColor = Color.UIRED)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelXiaoFeiAct.on(ModelXiaoFeiAct.MSG_RollData, this.onUpdate, this), GameGlobal.modelXiaoFeiAct.on(ModelXiaoFeiAct.MSG_ZPRET, this.onZPAward, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelXiaoFeiAct.off(ModelXiaoFeiAct.MSG_RollData, this.onUpdate, this), GameGlobal.modelXiaoFeiAct.off(ModelXiaoFeiAct.MSG_ZPRET, this.onZPAward, this)
    }, e.prototype.onUpdate = function () {
        this.updateRecord(), GameGlobal.modelXiaoFeiAct.freeCs > 0 ? (this.iconCost1.visible = !1, this.txtCost1.visible = !1, this.btn1.addIconZk(0), this.btn1.showEff(1.3, 1.3), this.btn1.setNoticeVis(!0)) : (this.iconCost1.visible = !0, this.txtCost1.visible = !0, this.btn1.hideEff(), this.btn1.setNoticeVis(!1), GameGlobal.modelXiaoFeiAct.bjcsOne > 0 ? this.btn1.addIconZk(5) : this.btn1.removeIconZk()), GameGlobal.modelXiaoFeiAct.bjcsTen > 0 ? this.btn2.addIconZk(5) : this.btn2.removeIconZk(), this.updateCost()
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg(), this.updateCost(), this.updateRecord(), GameGlobal.modelXiaoFeiAct.CG_ROLLDETAIL(), GameGlobal.modelXiaoFeiAct.CG_HALF_TIMES(), GameGlobal.tick.addInterv(this.onTick, 1e3, this);
        var i = GameGlobal.modelAct.actData.getChildByID(5);
        i ? i.getChildByID(34) && GameGlobal.modelBag.getItemCount(1102) > 0 && (this.btn1.showEff(1.3, 1.3), this.btn1.setNoticeVis(!0)) : (this.btn1.hideEff(), this.btn1.setNoticeVis(!1)), GameGlobal.modelBag.getItemCount(1103) > 0 ? this.btn2.setNoticeVis(!0) : this.btn2.setNoticeVis(!1)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), this.recordAC.removeAll(), GameGlobal.tick.removeInterv(this.onTick, 1e3), this.btn1.hideEff()
    }, e.prototype.onBtnT = function (t) {
        switch (t.currentTarget) {
            case this.btn0:
                this.buyy(1);
                break;
            case this.btn1:
                this.buyy(2);
                break;
            case this.btn2:
                this.buyy(3)
        }
    }, e.prototype.buyy = function (t) {
        var e = CFG_XiaoFeiAct.LIB_ZPCOST[t];
        if (2 == t)
            if (GameGlobal.modelXiaoFeiAct.freeCs > 0) GameGlobal.modelXiaoFeiAct.CG_ROLL(0, t);
            else if ("0" != e.xh && ConfigHelp.checkEnough1(Util.parseIntStr(e.xh))) GameGlobal.modelXiaoFeiAct.CG_ROLL(1, t);
        else {
            var i = CFG_XiaoFeiAct.getZPCostArr(t);
            ConfigHelp.checkEnough1(i, !0) ? GameGlobal.modelXiaoFeiAct.CG_ROLL(2, t) : GameGlobal.layerMgr.close(UIConst.XIAOFEIACT)
        } else if ("0" != e.xh && ConfigHelp.checkEnough1(Util.parseIntStr(e.xh))) GameGlobal.modelXiaoFeiAct.CG_ROLL(1, t);
        else {
            var i = CFG_XiaoFeiAct.getZPCostArr(t);
            ConfigHelp.checkEnough1(i, !0) ? GameGlobal.modelXiaoFeiAct.CG_ROLL(2, t) : GameGlobal.layerMgr.close(UIConst.XIAOFEIACT)
        }
    }, e.prototype.updateRecord = function () {
        var t = GameGlobal.modelXiaoFeiAct.records;
        t && DisplayUtil.fillDataAC(this.recordAC, t)
    }, e.prototype.onZPAward = function (t) {
        this.queue ? this.queue = this.queue.concat(t) : this.queue = t, this.isTwn || this.tweenAward(), GameGlobal.modelBag.getItemCount(1102) > 0 ? (this.btn1.showEff(1.3, 1.3), this.btn1.setNoticeVis(!0)) : (this.btn1.hideEff(), this.btn1.setNoticeVis(!1)), GameGlobal.modelBag.getItemCount(1103) > 0 ? this.btn2.setNoticeVis(!0) : this.btn2.setNoticeVis(!1)
    }, e.prototype.tweenAward = function () {
        for (this.isTwn = !1; this.queue.length;) {
            var t = this.queue.shift(),
                e = CFG_XiaoFeiAct.LIB_ZPJL[t];
            if (e) {
                this.itemArr.length < 20 && this.itemArr.push(ConfigHelp.makeVoByArr(Util.parseIntStr(e.dj)));
                var i = 200,
                    o = CFG_XiaoFeiAct.LIB_ZPJLXS[e.sid];
                if (o && this.times < 1) {
                    this.times++;
                    var n = o.id - 1 + 24,
                        a = 1e3 / (1 + Math.pow(this.queue.length, .3));
                    egret.Tween.get(this).to({
                        showIdx: n
                    }, a, this.ease1).wait(i).call(this.onTwnComp1, this, [o.id]).wait(300).call(this.onTwnComp2, this), this.isTwn = !0;
                    break
                }
                if (0 == this.queue.length) {
                    var s = 4;
                    n = 24 + s;
                    var a = 1e3 / (1 + Math.pow(this.queue.length, .3));
                    egret.Tween.get(this).to({
                        showIdx: n
                    }, a, this.ease1).wait(i).call(this.onTwnComp1, this, null).wait(300).call(this.onTwnComp2, this), this.isTwn = !0;
                    break
                }
            }
            if (0 == this.queue.length) {
                var r = this,
                    l = CFG_XiaoFeiAct.LIB_ZPCOST[GameGlobal.modelXiaoFeiAct.lastRollType];
                if ("0" != l.xh && ConfigHelp.checkEnough1(Util.parseIntStr(l.xh))) var h = l.xh;
                else h = CFG_XiaoFeiAct.getZPCostArr(l.id).toString();
                VAwardPnl.show(this.itemArr, l.n, "关闭", function () {
                    r.buyy(l.id), GameGlobal.layerMgr.close(UIConst.AWARD)
                }, null, 1e4, h), r.itemArr.length = 0, r.times = 0, GameGlobal.modelXiaoFeiAct.CG_ROLLDETAIL()
            }
        }
    }, e.prototype.onTwnComp1 = function (t) {
        if (t) {
            var e = t - 1,
                i = this.gridArr[e];
            EffectMgr.getIns().addEff1("uieff/dzsuccess", this, i.x, i.y, 400, 400, !1, 1)
        }
    }, e.prototype.onTwnComp2 = function () {
        this.isTwn = !1;
        var t = this;
        if (0 == this.queue.length) {
            var e = CFG_XiaoFeiAct.LIB_ZPCOST[GameGlobal.modelXiaoFeiAct.lastRollType];
            if ("0" != e.xh && ConfigHelp.checkEnough1(Util.parseIntStr(e.xh))) var i = e.xh;
            else i = CFG_XiaoFeiAct.getZPCostArr(e.id).toString();
            VAwardPnl.show(this.itemArr, e.n, "关闭", function () {
                t.buyy(e.id), GameGlobal.layerMgr.close(UIConst.AWARD)
            }, null, 1e4, i), t.itemArr.length = 0, GameGlobal.modelXiaoFeiAct.CG_ROLLDETAIL(), t.times = 0
        } else this.tweenAward()
    }, e.prototype.ease1 = function (t) {
        return 1 != t && (t = Math.sin(Math.PI * t * .5)), t
    }, e.prototype.onTick = function (t) {
        t.isTwn || (t.showIdx += 1)
    }, e.prototype.awdTick = function (t, e, i) {
        t.showIdx++
    }, Object.defineProperty(e.prototype, "showIdx", {
        get: function () {
            return this._selIndex
        },
        set: function (t) {
            var e = t % 12 >> 0;
            this.setSelIdx(e)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.setSelIdx = function (t) {
        var e = this.gridArr[this._selIndex],
            i = this.gridArr[t];
        e != i && (i && (i.$setScaleX(1.4), i.$setScaleY(1.4)), e && (e.$setScaleX(1), e.$setScaleY(1))), this._selIndex = t
    }, e
}(BaseEUIView);
__reflect(VLuckyRoll.prototype, "VLuckyRoll");
var VRollRecordItem = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "TextItemRender", e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.lb.textColor = 11023619, this.lb.size = 24
    }, Object.defineProperty(e.prototype, "data", {
        set: function (t) {
            var e = ConfigHelp.getToolTextByInt(1, t[1], t[2], !0, "{0}*{1}");
            this.lb.textFlow = HtmlUtil.parse(Lang.reTxt("{0}获得{1}", HtmlUtil.fontNoSize(t[0], "#10a244"), e))
        },
        enumerable: !0,
        configurable: !0
    }), e
}(eui.Component);
__reflect(VRollRecordItem.prototype, "VRollRecordItem", ["eui.IItemRenderer", "eui.UIComponent", "egret.DisplayObject"]);
var XinYueGiftView = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "XinYueGift", e
    }
    return __extends(e, t), e.prototype.initView = function () {}, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.getBtn1.visible = !1, this.getBtn1.label = "立即领取", this.getBtn2.label = "立即领取", this.getBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.getBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), GameGlobal.xinYueGiftModel.on(XinYueGiftModel.RESULT, this.onResult, this), GameGlobal.xinYueGiftModel.on(XinYueGiftModel.GET, this.onGet, this), GameGlobal.xinYueGiftModel.CG4601()
    }, e.prototype.onClose = function () {
        GameGlobal.modelcommod.off(XinYueGiftModel.RESULT, this.onResult, this), GameGlobal.modelcommod.off(XinYueGiftModel.GET, this.onGet, this), this.getBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.getBtn2.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this), this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouch, this)
    }, e.prototype.onTouch = function (t) {
        switch (t.currentTarget) {
            case this.getBtn1:
                XinYueGiftModel.isGet || GameGlobal.xinYueGiftModel.CG4603();
                break;
            case this.getBtn2:
                window.location.href = "http://xinyue.qq.com/act/a20181130xyh5game/index.html";
                break;
            case this.btnClose:
                GameGlobal.layerMgr.close(UIConst.XYGIFT)
        }
    }, e.prototype.setBtn1Status = function (t) {
        this.getBtn1.enabled = t, this.getBtn1.label = t ? "立即领取" : "已领取", this.getBtn1.visible = !0
    }, e.prototype.onGet = function (t) {
        this.setBtn1Status(!XinYueGiftModel.isGet)
    }, e.prototype.onResult = function (t) {
        switch (t) {
            case 1:
                this.setBtn1Status(!1);
                var e = CFG_dengjilibao_158.LIB5[1];
                if (e) {
                    var i = e.jl,
                        o = new AwardWindowData;
                    o.title = "获得奖励", o.award = i, o.state = E_WINDOW_AWARD_STATE.CONFIRM, GameGlobal.layerMgr.open(UIConst.EXTRA_AWARD_WINDOW, o)
                }
                break;
            case 2:
                break;
            case 3:
                GameGlobal.layerMgr.open(UIConst.EQUIPRL)
        }
    }, e
}(BaseEUIView);
__reflect(XinYueGiftView.prototype, "XinYueGiftView");
var XinYueGiftModel = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(4602, i.GC4602, i), e.regHand(4604, i.GC4604, i)
    }, e.prototype.CG4601 = function () {
        var t = this.getBytes();
        this.sendSocket(4601, t)
    }, e.prototype.GC4602 = function (t, i) {
        e.isGet = 1 == i.readByte(), t.notify(e.GET)
    }, e.prototype.CG4603 = function () {
        var t = this.getBytes();
        this.sendSocket(4603, t)
    }, e.prototype.GC4604 = function (t, i) {
        var o = i.readByte();
        1 == o && (e.isGet = !0), t.notify(e.RESULT, o)
    }, e.GET = "XinYueGiftModel_GET", e.RESULT = "XinYueGiftModel_RESULT", e
}(BaseModel);
__reflect(XinYueGiftModel.prototype, "XinYueGiftModel");
var ModelXiuLian = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(1502, i.GC1502, i), e.regHand(1504, i.GC1504, i)
    }, e.prototype.CG1501 = function () {
        var t = this.getBytes();
        this.sendSocket(1501, t)
    }, e.prototype.CG1503 = function (t, e) {
        var i = this.getBytes();
        i.writeByte(t), i.writeByte(e), this.sendSocket(1503, i)
    }, e.prototype.GC1502 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readByte(),
                s = i.readShort(),
                r = i.readInt(),
                l = Vo_XiuLian.Map[a];
            l || (l = new Vo_XiuLian, l.index = a, Vo_XiuLian.Map[a] = l, l.level = s, l.jy = r, l.parseData()), l.getXjAddLev()
        }
        Vo_XiuLian.xlLimit = i.readByte(), Vo_XiuLian.syItemNum = i.readByte(), t.notify(e.UPDATE)
    }, e.prototype.GC1504 = function (t, i) {
        var o = i.readByte();
        switch (o) {
            case 1:
                var n = i.readByte(),
                    a = i.readShort(),
                    s = i.readInt();
                if (e.isOneStudy) {
                    var r = Vo_XiuLian.Map[n];
                    if (r && a > r.level) {
                        var l = GameGlobal.layerMgr.getView(UIConst.XIULIAN);
                        l && l.btnOneT()
                    }
                }
                Vo_XiuLian.setData(n, a, s), t.notify(e.SETDATA);
                break;
            case 2:
                ViewText.text("传入参数异常");
                break;
            case 3:
                ViewText.text("已经是最高级");
                break;
            case 4:
                ViewText.text("银两不足");
                var h = VoCurrency.create();
                h.init(31), GameGlobal.layerMgr.open(UIConst.CAILIAOGET, h);
                break;
            case 5:
                ViewText.text("背包没有道具"), GameGlobal.layerMgr.open(UIConst.CAILIAOGET, VRoleXLPage.curritem), e.isUseItem = !1;
                break;
            case 6:
                ViewText.text("主角等级不足");
                break;
            case 7:
                ViewText.text("已达吃丹上限")
        }
        if (1 != o && e.isOneStudy) {
            var l = GameGlobal.layerMgr.getView(UIConst.XIULIAN);
            l && l.btnOneT()
        }
    }, e.setYl = function (t) {
        var e = CFG_XIULIANJY.LIB;
        for (var i in e)
            if (e[i] == t) return ""
    }, e.UPDATE = "UPDATE", e.SETDATA = "SETDATA", e.isOneStudy = !1, e.isUseItem = !1, e
}(BaseModel);
__reflect(ModelXiuLian.prototype, "ModelXiuLian");
var Vo_XiuLian = function () {
    function t() {}
    return t.setData = function (e, i, o) {
        var n = t.Map[e];
        if (n) {
            n.level < i && (this.isUp = !0), n.level = i, n.jy = o;
            var a = CFG_XIULIANJY.LIB[i];
            a && (n.exp = a.exp)
        }
    }, t.prototype.parseData = function () {
        this.name = this.getName(), this.des1 = this.getDes1(), this.des2 = this.getDes2(), this.des3 = this.getDes3(), this.icon = this.setIcon(), this.getExp()
    }, t.prototype.setIcon = function () {
        var t = ["zjgf", "zjwf", "zjff", "lsgf", "lsfy", "hbgf", "hbwf", "hbff"],
            e = this.index;
        return "xiuLian_json." + t[e]
    }, t.prototype.setJc = function () {
        var t = ["zjgf", "zjwf", "zjff", "lsgf", "lsfy", "hbgf", "hbwf", "hbff"],
            e = this.index,
            i = CFG_XIULIANJY.LIB,
            o = [];
        for (var n in i) {
            if (parseInt(n) == this.level) {
                var a = t[e],
                    s = i[n][a];
                if (0 != s)
                    for (var r = s.split(";"), l = 0; l < r.length; l++) {
                        var h = r[l].split(",")[1];
                        o.push((parseInt(h) / 1e4 * 100).toFixed(1).toString() + "%");
                        break
                    } else o.push("0%")
            }
            if (parseInt(n) == this.level + 1)
                for (var a = t[e], s = i[n][a], r = s.split(";"), l = 0; l < r.length; l++) {
                    var h = r[l].split(",")[1];
                    o.push((parseInt(h) / 1e4 * 100).toFixed(1).toString() + "%");
                    break
                }
        }
        return 1 == o.length && o.push("已满级"), o
    }, t.prototype.getXjAddLev = function () {
        var t = CFG_Target.LIBXIANJIE,
            e = GameGlobal.modelTarget.xj_lv;
        for (var i in t)
            if (parseInt(i) == e) {
                this.xjAddLev = t[i].xl;
                break
            } this.xjAddLev = 0
    }, t.prototype.getExp = function () {
        var t = CFG_XIULIANJY.LIB[this.level];
        t && (this.exp = t.exp)
    }, t.prototype.getName = function () {
        var t = ["主角功法", "主角物防", "主角法防", "灵兽功法", "灵兽防御", "仙神功法", "仙神物防", "仙神法防"],
            e = this.index;
        return t[e]
    }, t.prototype.getDes1 = function () {
        var t = ["影响主角", "影响主角", "影响主角", "影响灵兽", "影响灵兽", "影响仙神", "影响仙神", "影响仙神"],
            e = this.index;
        return t[e]
    }, t.prototype.getDes2 = function () {
        var t = ["提升造成的伤害", "降低受到物理伤害", "降低受到法术伤害", "提升造成的伤害", "降低受到的伤害", "提升造成的伤害", "降低受到物理伤害", "降低受到法术伤害"],
            e = this.index;
        return t[e]
    }, t.prototype.getDes3 = function () {
        var t = ["提升主角造成的伤害", "降低主角受到的物理伤害", "降低主角受到的法术伤害", "提升灵兽造成的伤害", "降低灵兽受到的物理、法术伤害", "提升仙神造成的伤害", "降低仙神受到的物理伤害", "降低仙神受到的法术伤害"],
            e = this.index;
        return t[e]
    }, t.getMaxLev = function () {
        var t = CFG_XIULIANJY.LIB,
            e = 0;
        for (var i in t) e = t[i].id;
        return e
    }, t.prototype.getXh = function () {
        var t = CFG_XIULIANJY.LIB[this.level];
        if (t) {
            if (0 != t.xh) var e = t.xh.split(",")[2];
            else e = t.xh;
            return parseInt(e)
        }
    }, t.prototype.getXhNotice = function () {
        var t = this.getXh();
        return GameGlobal.modelRole.voMine.yinliang >= 10 * t ? !0 : !1
    }, t.prototype.getItemNotice = function () {
        var t = this.name.indexOf("灵兽"),
            e = -1 == t ? 1018 : 1017,
            i = GameGlobal.modelBag.getItemCount(e);
        return i >= 1 ? !0 : !1
    }, t.notice = function () {
        var e = t.Map;
        for (var i in e) {
            var o = e[i];
            if (o.level != t.xlLimit && (o.getXhNotice() || o.getItemNotice())) return !0
        }
        return !1
    }, t.Map = {}, t.isUp = !1, t
}();
__reflect(Vo_XiuLian.prototype, "Vo_XiuLian");
var XlGrid = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._sel = !1, e.touchChildren = !1, e
    }
    return __extends(e, t), e.prototype.childrenCreated = function () {
        this.imgGrey.visible = this.iconNotice.visible = !1
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this.vo
        },
        set: function (t) {
            var e = this;
            e.vo = t, t ? (e.txtNm.text = t.name, e.imgIcon.source = t.icon, 0 == t.xjAddLev ? e.lbLv.text = t.level.toString() : e.lbLv.text = t.level.toString() + t.xjAddLev.toString(), t.level == Vo_XiuLian.xlLimit ? this.iconNotice.visible = !1 : this.iconNotice.visible = t.getItemNotice()) : e.imgIcon.source = null
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "selected", {
        get: function () {
            return this._sel
        },
        set: function (t) {
            this._sel != t && (this._sel = t, t ? this.imgSel.visible = !0 : this.imgSel.visible = !1)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.showEff = function () {
        EffectMgr.addEff("uieff/dzsuccess", this, 45, 45, 500, 500)
    }, e
}(eui.Component);
__reflect(XlGrid.prototype, "XlGrid", ["eui.UIComponent", "egret.DisplayObject"]);
var ModelXKSD = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(4402, this.GC4402, this), e.regHand(4404, this.GC4404, this), e.regHand(4406, this.GC4406, this), e.regHand(4408, this.GC4408, this), e.regHand(4410, this.GC4410, this)
    }, e.prototype.CG4401 = function () {
        var t = this.getBytes();
        this.sendSocket(4401, t)
    }, e.prototype.GC4402 = function (t, i) {
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readShort(),
                s = Vo_xksd.Map[a];
            s && (s.star = i.readByte(), s.state3x = 1 == i.readByte(), s.statest = 1 == i.readByte())
        }
        Vo_xksd.sytzcs = i.readByte(), t.notify(e.MSG_UPDATE)
    }, e.prototype.CG4403 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(4403, e)
    }, e.prototype.GC4404 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort(),
                a = Vo_xksd.Map[n];
            a && Vo_xksd.sytzcs--, t.notify(e.MSG_UPDATE)
        } else {
            var s = ["", "", "背包已满", "没有扫荡次数"];
            ViewText.text(s[o])
        }
    }, e.prototype.CG4405 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(4405, e)
    }, e.prototype.GC4406 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort(),
                a = Vo_xksd.Map[n];
            a && (a.star = i.readByte(), a.state3x = 1 == i.readByte(), a.statest = 1 == i.readByte(), a.star >= 3 && 0 == a.state3x && (VXKSD3xjl.tickToClose = !0, GameGlobal.layerMgr.open(UIConst.XKSD3XJL, a.id))), t.notify(e.MSG_UPDATE)
        } else {
            var s = ["", "", "副本不存在", "该关卡未解锁", "没有挑战次数"];
            ViewText.text(s[o])
        }
    }, e.prototype.CG4407 = function () {
        var t = this.getBytes();
        this.sendSocket(4407, t)
    }, e.prototype.GC4408 = function (t, i) {
        for (var o = i.readShort(), n = [], a = 0; o > a; a++) {
            var s = i.readShort(),
                r = i.readUTF(),
                l = i.readLong(),
                h = i.readShort();
            n.push([s, r, l, h])
        }
        Vo_xksd.myrank = i.readShort(), Vo_xksd.mytgs = i.readShort(), t.notify(e.msg_paihang, n)
    }, e.prototype.CG4409 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(4409, e)
    }, e.prototype.GC4410 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort(),
                a = Vo_xksd.Map[n];
            a && (a.state3x = !0), t.notify(e.msg_3StarAward)
        } else;
    }, e.msg_paihang = "msg_paihang", e.msg_3StarAward = "msg_3StarAward", e.MSG_UPDATE = "MSG_UPDATE", e
}(BaseModel);
__reflect(ModelXKSD.prototype, "ModelXKSD");
var Vo_xksd = function () {
    function t() {}
    return t.init = function () {
        if (!this.List) {
            this.List = [], this.Map = {};
            var e = CFG_XKSD.LIB1,
                i = 0;
            for (var o in e) {
                var n = e[o],
                    a = new t;
                a.cfg = n, a.id = n.id, this.Map[n.id] = a, this.List.push(a), 0 == i && (this.sel = n.id), i++
            }
        }
    }, t
}();
__reflect(Vo_xksd.prototype, "Vo_xksd");
var VXKSD = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.grids0 = [], e.grids1 = [], e.skinName = "XKSDSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = GameGlobal.layerMgr;
        t.reg(UIConst.XKSDRANK, VXKSDRank, t.UI_Message), t.reg(UIConst.XKSD3XJL, VXKSD3xjl, t.UI_Message), DisplayUtil.popBtnStyle(this.btnLeft), DisplayUtil.popBtnStyle(this.btnRight), DisplayUtil.popBtnStyle(this.btnRank), DisplayUtil.popBtnStyle(this.btnWen), DisplayUtil.popBtnStyle(this.btnBox);
        var e = egret.TouchEvent.TOUCH_TAP;
        this.btnLeft.addEventListener(e, this.lrT, this), this.btnRight.addEventListener(e, this.lrT, this), this.btnRank.addEventListener(e, function () {
            t.open(UIConst.XKSDRANK)
        }, this), this.btnWen.addEventListener(e, function () {
            var t = "3星通关条件：在3回合内击败关卡所有怪物\n2星通关条件：在4-7回合内击败关卡所有怪物\n1星通关条件：在8-10回合内击败关卡所有怪物";
            ViewWenHao.show(t)
        }, this), this.btnBox.addEventListener(e, this.boxT, this), this.btnsd.addEventListener(e, this.handT, this), this.btntz.addEventListener(e, this.handT, this), this.btnsd.label = "扫荡", this.btntz.label = "挑战", this.role = UIRole.create(), DisplayUtil.addBy(this.role, this.roleGrp), this.role.scaleX = this.role.scaleY = 1.5, Vo_xksd.init()
    }, e.prototype.boxT = function () {
        GameGlobal.layerMgr.open(UIConst.XKSD3XJL, Vo_xksd.sel)
    }, e.prototype.lrT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnLeft:
                var i = Vo_xksd.sel - 1;
                break;
            case this.btnRight:
                i = Vo_xksd.sel + 1
        }
        var o = Vo_xksd.Map[i];
        o && (Vo_xksd.sel = i, this.update())
    }, e.prototype.handT = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.btnsd:
                if (!this.btnsd.enabled) {
                    var i = Vo_xksd.Map[Vo_xksd.sel];
                    return void(i.star <= 0 ? ViewText.text("挑战胜利后可直接扫荡") : Vo_xksd.sytzcs <= 0 && ViewText.text("无剩余次数"))
                }
                GameGlobal.modelXKSD.CG4403(Vo_xksd.sel);
                break;
            case this.btntz:
                if (egret.getTimer() - this.sendProxyTime < 1e3 || !ModelBattle.canEnterBtl()) return;
                if (this.sendProxyTime = egret.getTimer(), Vo_xksd.sytzcs <= 0) return void ViewText.text("无剩余次数");
                GameGlobal.modelXKSD.CG4405(Vo_xksd.sel)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.update(), GameGlobal.modelXKSD.on(ModelXKSD.MSG_UPDATE, this.update, this), GameGlobal.modelXKSD.CG4401(), this.sendProxyTime = 0
    }, e.prototype.onClose = function () {
        GameGlobal.modelXKSD.off(ModelXKSD.MSG_UPDATE, this.update, this), this.role.stopAndClear()
    }, e.prototype.updateBtnrl = function () {
        var t = Vo_xksd.Map[Vo_xksd.sel],
            e = Vo_xksd.Map[Vo_xksd.sel - 1],
            i = Vo_xksd.Map[Vo_xksd.sel + 1];
        this.btnLeft.visible = this.btnRight.visible = !0, e || (this.btnLeft.visible = !1), i ? this.btnRight.visible = t.star > 0 : this.btnRight.visible = !1
    }, e.prototype.update = function () {
        var t = Vo_xksd.Map[Vo_xksd.sel];
        if (t) {
            this.updateBtnrl(), this.lbdes0.textFlow = HtmlUtil.parse(HtmlUtil.color("特点：", "#ffb852") + t.cfg.tdjs + "\n" + HtmlUtil.color("推荐：", "#ffb852") + t.cfg.tj), this.lbdes1.text = t.cfg.cjjs, this.lbdes2.text = t.cfg.n, this.imgjlget.visible = t.statest;
            for (var e = this.starGrp.$children, i = 0; i < e.length; i++) {
                var o = e[i];
                i + 1 <= t.star ? o.source = "CMS1_json.bm_star3" : o.source = "CMS1_json.bm_star0"
            }
            ConfigHelp.makeStrGrids(t.cfg.stjl, this.grids0, 0, 0, this.jlGrp0, !0), ConfigHelp.makeStrGrids(t.cfg.tzjl, this.grids1, 0, 0, this.jlGrp1, !0);
            var n = Vo_xksd.sytzcs <= 0 ? "#d83503" : "#c2ea35";
            this.lbsysd.textFlow = HtmlUtil.parse("今日剩余次数:" + HtmlUtil.color(Vo_xksd.sytzcs, n)), this.btnsd.enabled = t.star > 0 && Vo_xksd.sytzcs > 0, this.role.play(700), this.role.setMonsterID(t.cfg.gwmx), this.role.setWay(3), this.role.validParts()
        }
    }, e
}(BaseEUIView);
__reflect(VXKSD.prototype, "VXKSD");
var VXKSD3xjl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.time_count = 15, e.skinName = "VZTFS3StarAwardSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.addCloseListen(this.background), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.btnHand.label = "确定", this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        this.closeHandler()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelXKSD.on(ModelXKSD.msg_3StarAward, this.onUpdate, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelXKSD.off(ModelXKSD.msg_3StarAward, this.onUpdate, this)
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i), this._cudId = i, this.onUpdate(), this.addMsg(), e.tickToClose && this.addTick()
    }, e.prototype.addTick = function () {
        this.time_count = 15, GameGlobal.modelXKSD.CG4409(this._cudId), GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onTick = function (t) {
        t.btnHand.label = "确定(" + t.time_count-- + ")", t.time_count < 0 && t.closeHandler()
    }, e.prototype.onUpdate = function () {
        var t = Vo_xksd.Map[this._cudId];
        if (t) {
            var e = t.cfg.sxjl;
            ConfigHelp.makeStrGrids(e, this.gridArr, 0, 0, this.gridAwards, !0), this.txtInfos.textFlow = HtmlUtil.parse(HtmlUtil.color("3星", "#b85e0e") + "通关" + HtmlUtil.color("第" + this._cudId + "关", "#10a244") + "可获得"), t.state3x ? this.btnHand.label = "已领取" : 3 == t.star ? this.btnHand.label = "领取" : this.btnHand.label = "不可领取"
        }
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), e.tickToClose = !1, this.removeTick()
    }, e.tickToClose = !1, e
}(PopUpUI);
__reflect(VXKSD3xjl.prototype, "VXKSD3xjl");
var VXKSDPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._curst = -1, e.skinName = "XKSDPnlSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        var t = this,
            e = this.base,
            i = GameGlobal.layerMgr;
        this.addCloseListen(e.btnClose).addCloseListen(e.btnReturn), e.createTabGroup().createPageGrp(), i.reg(UIConst.XKSD, VXKSD, e.pageGrp), e.addTab("虚空神殿", 0, UIConst.CYDH), e.listenTabClick(t.onTbtn, t), this.base.showQuestBtn();
        var o = "1. 虚空神殿中，每一殿的守卫者都是至强者；传闻成功挑战他们，能获得大量宝物，同时也是实力至强者的象征\n2. 每天有3次挑战次数；vip等级越高，则每日可挑战的次数越多\n3. 挑战过的关卡可直接进行扫荡\n4. 每个关卡仙神不同，可通过搭配不同灵兽与仙神进行通关";
        this.base.createQuestTxt(o)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), e ? this.base.setTabSelIdx(e, !0) : this.base.setTabSelIdx(0, !0)
    }, e.prototype.onClose = function () {
        this.setCurSt(-1)
    }, e.prototype.onTbtn = function (t) {
        var e = t.sort;
        CFG_COMMOND.canDo(t.bindSysID) && (this.base.title = t.text, this.setCurSt(e))
    }, e.prototype.setCurSt = function (t) {
        if (this._curst != t) {
            var e = GameGlobal.layerMgr;
            switch (this._curst) {
                case 0:
                    e.close(UIConst.XKSD)
            }
            switch (t) {
                case 0:
                    e.open(UIConst.XKSD)
            }
            this.base.setTabSelIdx(t), this._curst = t
        }
    }, e.prototype.onSize = function () {
        this.customPanelResize()
    }, e
}(BaseEUIView);
__reflect(VXKSDPnl.prototype, "VXKSDPnl");
var VXKSDRank = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "ViewZTFSPaiHangSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.container.itemRenderer = ItemZTFSPaiHang, this.container.dataProvider = this.sourceData
    }, e.prototype.addMsg = function () {
        GameGlobal.modelXKSD.on(ModelXKSD.msg_paihang, this.onUpdate, this), GameGlobal.modelXKSD.CG4407()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelXKSD.off(ModelXKSD.msg_paihang, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        0 == Vo_xksd.myrank ? this.txtMine.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color("未上榜", "#10a244")) : this.txtMine.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color(Vo_xksd.myrank, "#10a244")), this.txtTongGuan.textFlow = HtmlUtil.parse("我的通关数: " + HtmlUtil.color(Vo_xksd.mytgs, "#10a244")), this.sourceData.source = t
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e
}(PopUpUI);
__reflect(VXKSDRank.prototype, "VXKSDRank");
var ModelYYFD = function (t) {
    function e() {
        return t.call(this) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e);
        var i = this;
        e.regHand(4442, i.GC4442, i), e.regHand(4444, i.GC4444, i)
    }, e.prototype.GC4442 = function (t, e) {
        var i = e.readByte();
        1 == i ? GameGlobal.modelYYFD.CG4443(CFG_YYFD.LIB[1].bh) : 2 == i ? ViewText.text("单日已经购买过!") : 3 == i && (ViewText.text("背包已满!"), GameGlobal.layerMgr.open(UIConst.EQUIPRL))
    }, e.prototype.CG4443 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(4443, e)
    }, e.prototype.GC4444 = function (t, i) {
        var o = (i.readByte(), i.readByte());
        t.notify(e.UPDATE, o)
    }, e.UPDATE = "ModelYYFD_UPDATE", e
}(BaseModel);
__reflect(ModelYYFD.prototype, "ModelYYFD");
var VYYFD = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "resource/eui_skins/game/yiYuanFuDai/YYFD.exml", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.addCloseListen(this.btnClose), DisplayUtil.popBtnStyle(this.btnBuyGrp), this.btnBuyGrp.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnT, this), this.btn_help.addEventListener(egret.TouchEvent.TOUCH_TAP, this.OnHelp, this), this.btnBuy.setNoticeVis(!1), this.lbIntro.textFlow = HtmlUtil.parse("仅需一元即可获得福袋，有" + HtmlUtil.color("几率", "#FFF601") + "获得"), this.uirole = UIRole.create(), this.rolePart.addChild(this.uirole), this.uirole.x = 100, this.uirole.y = 150, this.uirole.scaleX = this.uirole.scaleY = .9
    }, e.prototype.onBtnT = function () {
        if (this.btnBuy.enabled) {
            var t = CFG_YYFD.LIB[1].dd,
                e = CFG_YYFD.LIB[2].dd;
            if (MyPlatform.getIns().isIOS()) {
                var i = CFG_Recharge.LIB[e];
                platform.recharge(i.id)
            } else {
                var i = CFG_Recharge.LIB[t];
                platform.recharge(i.id)
            }
        }
    }, e.prototype.OnHelp = function () {
        ViewWenHao.show(CFG_COMMOND.LIBWFSM[1121].detail, 24)
    }, e.prototype.update = function (t) {
        0 == t ? (this.btnBuy.setNoticeVis(!0), this.btnBuy.enabled = !0, this.btnBuy.label = "", this.yygm.visible = !0) : (this.btnBuy.setNoticeVis(!1), this.btnBuy.enabled = !1, this.btnBuy.label = "已购买", this.yygm.visible = !1)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelYYFD.CG4443(CFG_YYFD.LIB[1].bh), GameGlobal.modelYYFD.on(ModelYYFD.UPDATE, this.update, this), IconUtil.setIconSrc(this.bg, "YYFD_json.bg");
        var i = GameGlobal.modelRole.voMine.job;
        if (1 == i) {
            var o = parseInt(CFG_YYFD.LIB[1].mx1.split(",")[0]),
                n = parseInt(CFG_YYFD.LIB[1].mx1.split(",")[1]),
                a = parseInt(CFG_YYFD.LIB[1].mx1.split(",")[2]),
                s = parseInt(CFG_YYFD.LIB[1].mx1.split(",")[3]);
            this.uirole.setBody(s), this.uirole.setHorse(o), this.uirole.setWeapon(a), this.uirole.setWing(n)
        } else {
            var o = parseInt(CFG_YYFD.LIB[1].mx2.split(",")[0]),
                n = parseInt(CFG_YYFD.LIB[1].mx2.split(",")[1]),
                a = parseInt(CFG_YYFD.LIB[1].mx2.split(",")[2]),
                s = parseInt(CFG_YYFD.LIB[1].mx2.split(",")[3]);
            this.uirole.setBody(s), this.uirole.setHorse(o), this.uirole.setWeapon(a), this.uirole.setWing(n)
        }
        this.uirole.setWay(3), this.uirole.validParts(), this.uirole.play()
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), IconUtil.setIconSrc(this.bg), GameGlobal.modelYYFD.off(ModelYYFD.UPDATE, this.update, this), this.uirole.stopAndClear()
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e
}(BaseEUIView);
__reflect(VYYFD.prototype, "VYYFD");
var ModelZhuTianFengShen = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(3072, this.GC3072, this), e.regHand(3074, this.GC3074, this), e.regHand(3076, this.GC3076, this), e.regHand(3078, this.GC3078, this), e.regHand(3080, this.GC3080, this), e.regHand(3082, this.GC3082, this), e.regHand(3084, this.GC3084, this), e.regHand(3086, this.GC3086, this)
    }, e.prototype.CG3071 = function () {
        this.sendSocket(3071, this.getBytes())
    }, e.prototype.GC3072 = function (t, i) {
        for (var o = i.readShort(), n = 0, a = 0; o > a; a++) {
            var s = i.readShort(),
                r = i.readByte(),
                l = i.readByte(),
                h = i.readByte(),
                c = i.readByte();
            r > 0 && (n = Math.max(s, n)), VoZhuTianFengShen.update(s, r, l, h, c)
        }
        var p = VoZhuTianFengShen.getInst();
        p.resetCount = i.readByte(), p.mineTongGuanCount = n;
        var u = GameGlobal.layerMgr.getView(UIConst.UIID_VIEWZTFS);
        u && u.dealWithFirstOpen(), t.notify(e.msg_data), t.notify(e.msg_notice)
    }, e.prototype.CG3073 = function () {
        this.sendSocket(3073, this.getBytes())
    }, e.prototype.GC3074 = function (t, i) {
        var o = i.readByte();
        if (1 != o) {
            if (3 == o) return void ViewAlert.show("元宝不足，是否前往充值？", function () {
                GameGlobal.layerMgr.open(UIConst.RECHARGE), GameGlobal.layerMgr.close(UIConst.UIID_ZTFSRESET)
            });
            ViewText.text(["", "", "今日重置次数已用完", "元宝不足", "超出重置次数"][o])
        } else GameGlobal.layerMgr.close(UIConst.UIID_ZTFSRESET), t.notify(e.msg_chonzhi)
    }, e.prototype.CG3075 = function () {
        this.sendSocket(3075, this.getBytes())
    }, e.prototype.GC3076 = function (t, i) {
        var o = i.readByte();
        1 == o ? (e.isSaoDan = !0, t.CG3071()) : ViewText.text(["", "", "vip等级不足", "当前没有可扫荡的关卡"][o])
    }, e.prototype.CG3077 = function (t) {
        var i = this.getBytes();
        i.writeShort(t), this.sendSocket(3077, i);
        var o = VoZhuTianFengShen.getDataById(t);
        o ? e.isSkips = o.starNum > 0 : e.isSkips = !1
    }, e.prototype.GC3078 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort(),
                a = i.readByte(),
                s = i.readByte(),
                r = i.readByte(),
                l = i.readByte();
            if (VoZhuTianFengShen.update(n, a, s, r, l), a > 0) {
                var h = VoZhuTianFengShen.getInst();
                h.mineTongGuanCount = Math.max(n, h.mineTongGuanCount)
            }
            3 == a && 1 != s && (VZTFS3StarAward.tickToClose = !0, GameGlobal.layerMgr.open(UIConst.UIID_ZTF3STARAWARD, n)), t.notify(e.msg_data), t.notify(e.msg_notice)
        } else ViewText.text(["", "", "副本不存在", "该关卡未解锁"][o])
    }, e.prototype.CG3079 = function () {
        this.sendSocket(3079, this.getBytes())
    }, e.prototype.GC3080 = function (t, i) {
        for (var o = i.readShort(), n = [], a = 0; o > a; a++) {
            var s = i.readShort(),
                r = i.readUTF(),
                l = i.readLong(),
                h = i.readShort();
            n.push([s, r, l, h])
        }
        var c = VoZhuTianFengShen.getInst();
        c.minePaiMing = i.readShort(), c.mineTongGuanCount = i.readShort(), t.notify(e.msg_paihang, n)
    }, e.prototype.CG3081 = function (t) {
        var e = this.getBytes();
        e.writeShort(t), this.sendSocket(3081, e)
    }, e.prototype.GC3082 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort();
            VoZhuTianFengShen.updateStarGot(n, 1), t.notify(e.msg_3StarAward), t.notify(e.msg_data), t.notify(e.msg_notice)
        } else 5 == o ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["", "", "未通关", "还没3星通关", "已领取", null][o])
    }, e.prototype.CG3083 = function () {
        this.sendSocket(3083, this.getBytes())
    }, e.prototype.GC3084 = function (t, i) {
        0 == VoZTFSStore.map.getLength() && VoZTFSStore.init();
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = i.readShort(),
                s = i.readShort();
            VoZTFSStore.update(a, s)
        }
        t.notify(e.msg_store)
    }, e.prototype.CG3085 = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeShort(e), this.sendSocket(3085, i)
    }, e.prototype.GC3086 = function (t, i) {
        var o = i.readByte();
        if (1 == o) {
            var n = i.readShort(),
                a = i.readShort();
            VoZTFSStore.update(n, a), GameGlobal.layerMgr.isOpenView(UIConst.JJCSTORETIPS) && GameGlobal.layerMgr.close(UIConst.JJCSTORETIPS), t.notify(e.msg_store)
        } else 9 == o ? GameGlobal.modelBag.checkRLTips(0) : ViewText.text(["", "成功", "配置表没有该ID", "未通关指定层数", "已达每日购买上限", "已达永久购买上限", "购买数量超出每日购买上限", "购买数量超出永久购买上限", "消耗不足", null][o])
    }, e.prototype.getNotice = function () {
        var t = 0 == VoZhuTianFengShen.getInst().resetCount;
        if (t) return !0;
        var e = VoZhuTianFengShen.getInst(),
            i = GameGlobal.modelRole.voMine.level;
        for (var o in CFG_ZTFS.LIB) {
            var n = VoZhuTianFengShen.getDataById(parseInt(o)),
                a = VoZhuTianFengShen.getLockLevel(n.cfgId),
                s = 1 == n.shouTongGotState,
                r = 1 == n.tongGuanGotState,
                l = 1 == n.starGotState,
                h = e.mineTongGuanCount >= n.cfgId || e.mineTongGuanCount + 1 == n.cfgId && i >= a,
                c = !s || !r || !l;
            if (h && c) return !0;
            if (h && 3 == n.starNum && 0 == l) return !0
        }
        return !1
    }, e.msg_data = "msg_data", e.msg_paihang = "msg_paihang", e.msg_3StarAward = "msg_3StarAward", e.msg_store = "msg_store", e.msg_notice = "msg_notice", e.msg_chonzhi = "msg_chonzhi", e.isSaoDan = !1, e.isSkips = !1, e
}(BaseModel);
__reflect(ModelZhuTianFengShen.prototype, "ModelZhuTianFengShen");
var ViewZTFS = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e._maxId = 0, e.gridArr1 = [], e.gridArr2 = [], e.STAR_DISABLE = "CMS1_json.bm_star0", e.STAR_ENABLE = "CMS1_json.bm_star3", e.description2 = "3星通关条件：在3回合内击败关卡所有怪物\n2星通关条件：在4-7回合内击败关卡所有怪物\n1星通关条件：在8-10回合内击败关卡所有怪物", e.last_click_time = 0, e.middlePostionX = 0, e.aniChildIndex = 0, e.moveOffsetX = 100, e.movingTime = 250, e.isFistOpen = !0, e.skinName = "ViewZTFSSkin", e
    }
    return __extends(e, t), e.prototype.guideTZ = function () {
        var t = this.btnTiaoZhan;
        QuestGuideArrow.getIns().guideViewCenter(t)
    }, e.prototype.checkCurIsTopLV = function () {
        var t = this._curId,
            e = VoZhuTianFengShen.getInst().mineTongGuanCount + 1;
        return t == e
    }, e.prototype.guideTopLV = function () {
        var t, e = this._curId,
            i = VoZhuTianFengShen.getInst().mineTongGuanCount + 1;
        t = e > i ? this.btnLeft : this.btnRight, QuestGuideArrow.getIns().guideTo(this, t.x + t.width / 2, t.y + t.height / 2)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), DisplayUtil.popBtnStyle(this.btnLeft), DisplayUtil.popBtnStyle(this.btnRight), DisplayUtil.popBtnStyle(this.txtCheck), DisplayUtil.popBtnStyle(this.iconStory), this.btnSaoDang.label = "一键扫荡", this.btnTiaoZhan.label = "挑战", this.btnReset.label = "重置", this.txtCheck.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.baoXiangToucher.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnReset.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnSaoDang.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnTiaoZhan.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.iconStory.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onChange, this), this.background.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onStateChange, this), this.iconWenHao.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onStateChange, this), this.txtCheck.textFlow = HtmlUtil.underLine(this.txtCheck.text), this.txtDescription2.text = this.description2;
        var e = this.getChildIndex(this.partContainer);
        this.uirole = UIRole.create(), this.addChildAt(this.uirole, e), this.uirole.$setX(350), this.uirole.$setY(400), this.middlePostionX = 350, this.aniChildIndex = e
    }, e.prototype.onStateChange = function (t) {
        var e = t.currentTarget;
        switch (e) {
            case this.background:
                this.setState("st1");
                break;
            case this.iconWenHao:
                this.setState("st2")
        }
    }, e.prototype.setState = function (t) {
        this.currentState = t
    }, e.prototype.onHand = function (t) {
        var i = t.currentTarget;
        switch (i) {
            case this.txtCheck:
                GameGlobal.layerMgr.open(UIConst.UIID_ZTFSPAIHANG);
                break;
            case this.baoXiangToucher:
                GameGlobal.layerMgr.open(UIConst.UIID_ZTF3STARAWARD, this._curId);
                break;
            case this.btnReset:
                if (0 == this.btnReset.enabled) return void ViewText.text("通关第5关开启");
                if (VoZhuTianFengShen.getResetCount() <= 0) return void ViewText.text("今日重置次数已用完!");
                GameGlobal.layerMgr.open(UIConst.UIID_ZTFSRESET);
                break;
            case this.btnSaoDang:
                if (0 == this.btnSaoDang.enabled) return void ViewText.text("通关第5关开启");
                GameGlobal.modelZTFS.CG3075();
                break;
            case this.btnTiaoZhan:
                if (!ModelBattle.canEnterBtl()) return;
                if (this._curId == VoZhuTianFengShen.getInst().mineTongGuanCount + 1) {
                    var o = VoZhuTianFengShen.getLockLevel(this._curId);
                    GameGlobal.modelRole.voMine.level >= o ? GameGlobal.modelZTFS.CG3077(this._curId) : ViewText.text(o + "级解锁")
                } else e.isTongGuanJump = !0, GameGlobal.modelZTFS.CG3077(this._curId);
                break;
            case this.iconStory:
                var n = CFG_ZTFS.LIB[this._curId].gsbj;
                GameGlobal.layerMgr.open(UIConst.UIID_INTRODUCE, n)
        }
    }, e.prototype.hasPass5Layer = function () {
        return VoZhuTianFengShen.getInst().mineTongGuanCount >= 5
    }, e.prototype.isFullResetCount = function () {
        var t = 0,
            e = VoZhuTianFengShen.getMaxResetCount(),
            i = VoZhuTianFengShen.getInst().resetCount;
        return t = e - i, 0 > t && i > 0 ? !0 : !1
    }, e.prototype.onChange = function (t) {
        var e = egret.getTimer();
        if (!(e - this.last_click_time < 400)) {
            this.last_click_time = e;
            var i = t.currentTarget,
                o = this._curId;
            switch (i) {
                case this.btnLeft:
                    o--, this.moveRight();
                    break;
                case this.btnRight:
                    o == VoZhuTianFengShen.getInst().mineTongGuanCount + 1 ? ViewText.text("通关后可查看更多关卡信息") : (o++, this.moveLeft())
            }
            this.setId(o)
        }
    }, e.prototype.moveRight = function () {
        var t = this.middlePostionX - this.moveOffsetX,
            e = this.uirole;
        e.$setX(t), this.backUpAnimation || (this.backUpAnimation = UIRole.create()), this.copyProperties(e, this.backUpAnimation), this.backUpAnimation.validParts(), this.addChildAt(this.backUpAnimation, this.aniChildIndex), e.alpha = 0, egret.Tween.get(e).wait(130).to({
            x: this.middlePostionX,
            alpha: 1
        }, this.movingTime), egret.Tween.get(this.backUpAnimation).to({
            x: this.middlePostionX + this.moveOffsetX
        }, this.movingTime).call(this.removeBackupAni, this)
    }, e.prototype.moveLeft = function () {
        var t = this.middlePostionX + this.moveOffsetX,
            e = this.uirole;
        e.$setX(t), this.backUpAnimation || (this.backUpAnimation = UIRole.create()), this.copyProperties(this.uirole, this.backUpAnimation), this.backUpAnimation.validParts(), this.addChildAt(this.backUpAnimation, this.aniChildIndex), e.alpha = 0, egret.Tween.get(e).wait(130).to({
            x: this.middlePostionX,
            alpha: 1
        }, this.movingTime), egret.Tween.get(this.backUpAnimation).to({
            x: this.middlePostionX - this.moveOffsetX
        }, this.movingTime).call(this.removeBackupAni, this)
    }, e.prototype.copyProperties = function (t, e) {
        e.setMonsterID(t._monsterId, !0), e.setWay(3), e.x = t.x, e.y = t.y
    }, e.prototype.removeBackupAni = function () {
        this.removeChild(this.backUpAnimation)
    }, e.prototype.setId = function (t) {
        t = Math.max(1, t), this._curId = Math.min(t, this.getMaxId()), this.watchLeft(), this.watchRight(), this.onUpdate()
    }, e.prototype.getMaxId = function () {
        return this._maxId > 0 ? this._maxId : this._maxId = VoZhuTianFengShen.getMaxId()
    }, e.prototype.watchLeft = function () {
        1 == this._curId ? this.btnLeft.visible = !1 : this.btnLeft.visible = !0
    }, e.prototype.watchRight = function () {
        this._curId == this.getMaxId() ? this.btnRight.visible = !1 : this.btnRight.visible = !0
    }, e.prototype.addMsg = function () {
        GameGlobal.modelZTFS.on(ModelZhuTianFengShen.msg_data, this.onUpdate, this), GameGlobal.modelZTFS.on(ModelZhuTianFengShen.msg_chonzhi, this.fristJump, this), GameGlobal.modelZTFS.on(ModelZhuTianFengShen.msg_data, this.saoDanJump, this), GameGlobal.modelZTFS.CG3071()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelZTFS.off(ModelZhuTianFengShen.msg_data, this.onUpdate, this), GameGlobal.modelZTFS.off(ModelZhuTianFengShen.msg_chonzhi, this.fristJump, this), GameGlobal.modelZTFS.off(ModelZhuTianFengShen.msg_data, this.saoDanJump, this)
    }, e.prototype.fristJump = function () {
        this.setId(1)
    }, e.prototype.saoDanJump = function () {
        if (ModelZhuTianFengShen.isSaoDan) {
            ModelZhuTianFengShen.isSaoDan = !1;
            var t = VoZhuTianFengShen.getLowestAwardId();
            this.setId(t)
        }
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setId(e || this.getChosenId()), this.addMsg()
    }, e.prototype.getChosenId = function () {
        var t = 1;
        return e.isTongGuanJump ? (e.isTongGuanJump = !1, this._curId && (t = this._curId >= VoZhuTianFengShen.getMaxId() ? this._curId : Math.min(this._curId + 1, VoZhuTianFengShen.getMaxId()))) : t = VoZhuTianFengShen.getLowestAwardId(), t
    }, e.prototype.dealWithFirstOpen = function () {
        this.isFistOpen && (this.isFistOpen = !1, this.setId(this.getChosenId()))
    }, e.prototype.onUpdate = function () {
        VoZhuTianFengShen.getInst();
        this.txtGuan.text = "第" + this._curId + "关", this.txtName.text = VoZhuTianFengShen.getName(this._curId);
        var t = VoZhuTianFengShen.getLockLevel(this._curId);
        GameGlobal.modelRole.voMine.level < t ? this.txtLockLevel.textFlow = HtmlUtil.parse("解锁等级: " + HtmlUtil.color(t, "#ff0000")) : this.txtLockLevel.textFlow = HtmlUtil.parse("解锁等级: " + HtmlUtil.color(t, "#10a244")), this.txtTeDian.textFlow = HtmlUtil.parse("特点: " + HtmlUtil.color(VoZhuTianFengShen.getTeDian(this._curId), "#10a244")), this.txtTuiJian.textFlow = HtmlUtil.parse("推荐: " + HtmlUtil.color(VoZhuTianFengShen.getTuiJian(this._curId), "#10a244"));
        var e = VoZhuTianFengShen.getLongDes(this._curId);
        "0" == e ? (this.txtDescription.text = "", this.txtNickName.text = "", this.iconStory.visible = !1) : (this.txtDescription.text = VoZhuTianFengShen.getLongDes(this._curId), this.txtNickName.text = VoZhuTianFengShen.getShortDes(this._curId), this.iconStory.visible = !0), ConfigHelp.makeStrGrids(VoZhuTianFengShen.getShouTongAwards(this._curId), this.gridArr1, 0, 0, this.gridAward1, !0, 10, .8), ConfigHelp.makeStrGrids(VoZhuTianFengShen.getTongGuanAwards(this._curId), this.gridArr2, 0, 0, this.gridAward2, !0, 10, .8);
        var i = VoZhuTianFengShen.getMoXing(this._curId);
        this.uirole.setMonsterID(i, !0), this.uirole.setWay(3), this.uirole.validParts(), this.uirole.play();
        for (var o = VoZhuTianFengShen.get3StarCount(this._curId), n = 0; 3 > n; n++) {
            var a = this.starContainer.$children[n];
            o > n ? a.source = this.STAR_ENABLE : a.source = this.STAR_DISABLE
        }
        this.awardGotIconVis(), this.tiaoZhanBtnNotice(), this.update3StarNotice(), this.updateResetNotice(), this.dealWith5LayerCase(this._curId)
    }, e.prototype.dealWith5LayerCase = function (t) {
        var e = VoZhuTianFengShen.getInst().mineTongGuanCount;
        this.hasPass5Layer() ? 5 >= t ? (this.btnReset.enabled = !1, this.btnReset.setNoticeVis(!1)) : (this.btnReset.enabled = !0, this.btnReset.setNoticeVis(this.freeReset())) : (this.btnReset.enabled = !1, this.btnReset.setNoticeVis(!1)), this.btnSaoDang.enabled = e >= 5
    }, e.prototype.freeReset = function () {
        var t = (GameGlobal.modelRole.voMine.vip, VoZhuTianFengShen.getInst()),
            e = t.resetCount,
            i = 0,
            o = CFG_ZTFS.LIB2[e + 1];
        if (o) var i = ConfigHelp.makeVoList(o.xh)[0].count;
        else i = 1;
        return 0 == i
    }, e.prototype.awardGotIconVis = function () {
        var t = VoZhuTianFengShen.getInst(),
            e = !1,
            i = !1,
            o = !1,
            n = !1;
        if (this._curId <= t.mineTongGuanCount) {
            var a = VoZhuTianFengShen.getDataById(this._curId);
            n = t.mineTongGuanCount >= this._curId, a && (e = 1 == a.starGotState, i = 1 == a.shouTongGotState, o = 1 == a.tongGuanGotState)
        }
        this.iconGot0.visible = e, this.iconGot1.visible = i, this.iconGot2.visible = o, this.iconTongGuan.visible = n && 1 == a.tongGuanGotState
    }, e.prototype.update3StarNotice = function () {
        var t = VoZhuTianFengShen.getInst(),
            e = this._curId <= t.mineTongGuanCount,
            i = VoZhuTianFengShen.getDataById(this._curId);
        if (i) {
            var o = 3 == i.starNum,
                n = 0 == i.starGotState;
            this.baoXiangNotice.visible = n && e && o
        } else this.baoXiangNotice.visible = !1
    }, e.prototype.updateResetNotice = function () {
        var t = 0 == VoZhuTianFengShen.getInst().resetCount;
        this.btnReset.setNoticeVis(this.btnReset.enabled && this.freeReset() && t)
    }, e.prototype.tiaoZhanBtnNotice = function () {
        var t = (VoZhuTianFengShen.getInst(), VoZhuTianFengShen.getLockLevel(this._curId)),
            e = GameGlobal.modelRole.voMine.level;
        if (e >= t) {
            var i = VoZhuTianFengShen.getDataById(this._curId),
                o = 1 == i.shouTongGotState,
                n = 1 == i.tongGuanGotState,
                a = 1 == i.starGotState,
                s = !o || !n || !a;
            s ? this.btnTiaoZhan.setNoticeVis(!0) : this.btnTiaoZhan.setNoticeVis(!1), this.btnTiaoZhan.enabled = !0
        } else this.btnTiaoZhan.enabled = !1, this.btnTiaoZhan.setNoticeVis(!1)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.uirole.stop(), this.setState("st1"), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(ViewZTFS.prototype, "ViewZTFS");
var ViewZTFSStore = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "ViewZTFSStoreSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.container.itemRenderer = ItemZTFSStore, this.container.dataProvider = this.sourceData, 0 == VoZTFSStore.map.getLength() && VoZTFSStore.init()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelZTFS.on(ModelZhuTianFengShen.msg_store, this.onUpdate, this), GameGlobal.modelBag.on(ModelBag.MSG_CHANGE, this.onUpdate, this), GameGlobal.modelZTFS.CG3083()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelZTFS.off(ModelZhuTianFengShen.msg_store, this.onUpdate, this), GameGlobal.modelBag.off(ModelBag.MSG_CHANGE, this.onUpdate, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.onUpdate(), this.addMsg()
    }, e.prototype.onUpdate = function () {
        var t = VoZTFSStore.getProducts();
        this.sourceData.source = t.sort(function (t, e) {
            return t.cfg.px - e.cfg.px
        }), this.txtTongGuan.textFlow = HtmlUtil.parse("通关数: " + HtmlUtil.color(VoZhuTianFengShen.getInst().mineTongGuanCount, "#10a244")), this.iconCost1.source = IconUtil.getIconUrl(CFG_Item.LIB[1209].icon), this.txtCost1.text = GameGlobal.modelBag.getItemCount(1209) + "", this.iconCost2.source = IconUtil.getIconUrl(CFG_Item.LIB[1210].icon), this.txtCost2.text = GameGlobal.modelBag.getItemCount(1210) + "", this.iconCost3.source = IconUtil.getIconUrl(CFG_Item.LIB[1211].icon), this.txtCost3.text = GameGlobal.modelBag.getItemCount(1211) + ""
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e
}(BaseEUIView);
__reflect(ViewZTFSStore.prototype, "ViewZTFSStore");
var VZTFSPage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.introduce = "1. 人物等级越高，可解锁更多关卡进行挑战\n2. 每天拥有1次免费重置次数\n3. 可消耗元宝购买额外的重置次数，vip等\n    级越高，可额外购买的重置次数越多\n4. 可对3星通关的关卡进行一键扫荡\n5. 3星通关：3回合内击败所有怪物\n    2星通关：4-7回合内击败所有怪物\n    1星通关：8-10回合内击败所有怪物\n6. 每个关卡难度不一样，可通过搭配不同灵\n    兽与仙神进行通关", e.isFirstIn = !0, e.notitceHasAdded = !1, e.skinName = "CommonPanel", e
    }
    return __extends(e, t), e.prototype.checkPage = function (t) {
        return this._index == t
    }, e.prototype.guidePage = function (t) {
        var e = this.base.getTabByIdx(0);
        QuestGuideArrow.getIns().guideViewCenter(e)
    }, e.prototype.guideClose = function () {
        QuestGuideArrow.getIns().guideViewCenter(this.base.btnReturn)
    }, e.prototype.initView = function () {
        t.prototype.initView.call(this), this.base.createPageGrp().createTabGroup(), this.addCloseListen(this.base.btnClose), this.addCloseListen(this.base.btnReturn), this.base.createQuestTxt(this.introduce), GameGlobal.layerMgr.reg(UIConst.UIID_VIEWZTFS, ViewZTFS, this), GameGlobal.layerMgr.reg(UIConst.UIID_ZTFSSTORE, ViewZTFSStore, this), this.base.addTab("诸天封神", 0, 1), this.base.addTab("封神商店", 1, 2), this.base.listenTabClick(this.onSel, this)
    }, e.prototype.onHelp = function () {
        GameGlobal.layerMgr.open(UIConst.STRINGTIP, this.introduce)
    }, e.prototype.onSel = function (t) {
        this.setSel(t.sort)
    }, e.prototype.setSel = function (t) {
        switch (this._index) {
            case 0:
                GameGlobal.layerMgr.close(UIConst.UIID_VIEWZTFS);
                break;
            case 1:
                GameGlobal.layerMgr.close(UIConst.UIID_ZTFSSTORE)
        }
        switch (t) {
            case 0:
                GameGlobal.layerMgr.open(UIConst.UIID_VIEWZTFS);
                break;
            case 1:
                this.notitceHasAdded && (this.notitceHasAdded = !1, this.base.setNoticByIndex(1, this.notitceHasAdded)), GameGlobal.layerMgr.open(UIConst.UIID_ZTFSSTORE)
        }
        this._index = t, this.base.title = this.base.getTbtnTextByIdx(t), this.base.setTabSelIdx(t)
    }, e.prototype.addMsg = function () {
        GameGlobal.modelZTFS.on(ModelZhuTianFengShen.msg_data, this.setTabNotice, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelZTFS.off(ModelZhuTianFengShen.msg_data, this.setTabNotice, this)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.setSel(e || 0), this.setTabNotice(), this.addMsg()
    }, e.prototype.setTabNotice = function () {
        this.base.setNoticByIndex(0, GameGlobal.modelZTFS.getNotice()), this.isFirstIn && (this.isFirstIn = !1, this.notitceHasAdded = VoZTFSStore.getNotice(), this.base.setNoticByIndex(1, this.notitceHasAdded))
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e.prototype.onSize = function () {
        t.prototype.customPanelResize.call(this)
    }, e
}(BaseEUIView);
__reflect(VZTFSPage.prototype, "VZTFSPage");
var ItemZTFSPaiHang = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.colors = [16711680, 16750848, 16711935, 3656191, 65280], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemZTFSPaiHangSkin"
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data;
            var e = t[0];
            this.txtPaiMing.text = e + "", this.txtName.text = t[1], this.txtZhanLi.text = t[2], this.txtTongGuan.text = t[3], 6 > e ? this.txtPaiMing.textColor = this.colors[e - 1] : this.txtPaiMing.textColor = 6835267
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(e.prototype, "itemIndex", {
        set: function (t) {
            0 == (1 & t) ? this.background.source = "CM2_json.bg1" : this.background.source = "CM2_json.bg2"
        },
        enumerable: !0,
        configurable: !0
    }), e
}(ItemBase);
__reflect(ItemZTFSPaiHang.prototype, "ItemZTFSPaiHang");
var ItemZTFSStore = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.width = 305, e.height = 142, e
    }
    return __extends(e, t), e.prototype.setBGSource = function () {
        this.background.source = "CM2_json.nChosen"
    }, e.prototype.onDown = function () {}, e.prototype.onUp = function () {}, e
}(ItemJJCStore);
__reflect(ItemZTFSStore.prototype, "ItemZTFSStore");
var ViewZTFSPaiHang = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.skinName = "ViewZTFSPaiHangSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.container.itemRenderer = ItemZTFSPaiHang, this.container.dataProvider = this.sourceData
    }, e.prototype.addMsg = function () {
        GameGlobal.modelZTFS.on(ModelZhuTianFengShen.msg_paihang, this.onUpdate, this), GameGlobal.modelZTFS.CG3079()
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelZTFS.off(ModelZhuTianFengShen.msg_paihang, this.onUpdate, this)
    }, e.prototype.onUpdate = function (t) {
        var e = VoZhuTianFengShen.getInst();
        0 == e.minePaiMing ? this.txtMine.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color("未上榜", "#10a244")) : this.txtMine.textFlow = HtmlUtil.parse("我的排名: " + HtmlUtil.color(e.minePaiMing, "#10a244")), this.txtTongGuan.textFlow = HtmlUtil.parse("我的通关数: " + HtmlUtil.color(e.mineTongGuanCount, "#10a244")), this.sourceData.source = t
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.addMsg()
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg()
    }, e
}(PopUpUI);
__reflect(ViewZTFSPaiHang.prototype, "ViewZTFSPaiHang");
var VZTFSReset = function (t) {
    function e() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(e, t), e.prototype.onHand = function () {
        GameGlobal.modelZTFS.CG3073()
    }, e.prototype.onUpdate = function () {
        var t = (GameGlobal.modelRole.voMine.vip, VoZhuTianFengShen.getInst()),
            e = t.resetCount,
            i = 0,
            o = "",
            n = !1,
            a = CFG_ZTFS.LIB2[e + 1];
        if (a) {
            i = ConfigHelp.makeVoList(a.xh)[0].count, o = i > 0 ? i + "元宝" : "免费";
            var s = (Math.max(0, VoZhuTianFengShen.getResetCount()), this.getNextVipAdd("fscs"));
            if (null == s) var r = "重置一次需消耗: " + HtmlUtil.color(o + "\n", "#10a244") + "今日剩余重置次数: " + HtmlUtil.color(VoZhuTianFengShen.getResetCount(), "#10a244");
            else r = "重置一次需消耗: " + HtmlUtil.color(o + "\n", "#10a244") + "今日剩余重置次数: " + HtmlUtil.color(VoZhuTianFengShen.getResetCount() + "\n", "#10a244") + ("达到VIP" + s.vip + "可额外增加" + ColorSet(s.addCnt, "#10a244") + "次");
            this.txtInfo.textFlow = HtmlUtil.parse(r)
        }
        this.btnChongZhi.setNoticeVis(n)
    }, e
}(VSYTReset);
__reflect(VZTFSReset.prototype, "VZTFSReset");
var VIntroduce = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.skinName = "VIntroduceSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.background), this.addCloseListen(this.btnReturn), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), this.contents = e, this.onUpdate()
    }, e.prototype.onUpdate = function () {
        this.txtTitle.text = "介绍", this.txtContent.textFlow = HtmlUtil.parse(this.contents)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this)
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e
}(PopUpUI);
__reflect(VIntroduce.prototype, "VIntroduce");
var VZTFS3StarAward = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.time_count = 15, e.skinName = "VZTFS3StarAwardSkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        t.prototype.initView.call(this), this.addCloseListen(this.btnClose), this.addCloseListen(this.btnReturn), this.addCloseListen(this.background), DisplayUtil.popBtnStyle(this.btnClose), DisplayUtil.popBtnStyle(this.btnReturn), this.btnHand.label = "确定", this.btnHand.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }, e.prototype.onHand = function () {
        this.closeHandler()
    }, e.prototype.addMsg = function () {
        GameGlobal.modelZTFS.on(ModelZhuTianFengShen.msg_3StarAward, this.onUpdate, this)
    }, e.prototype.removeMsg = function () {
        GameGlobal.modelZTFS.off(ModelZhuTianFengShen.msg_3StarAward, this.onUpdate, this)
    }, e.prototype.onOpen = function (i) {
        t.prototype.onOpen.call(this, i), this._cudId = i, this.onUpdate(), this.addMsg(), e.tickToClose && this.addTick()
    }, e.prototype.addTick = function () {
        this.time_count = 15, GameGlobal.modelZTFS.CG3081(this._cudId), GameGlobal.tick.addInterv(this.onTick, 1e3, this)
    }, e.prototype.removeTick = function () {
        GameGlobal.tick.removeInterv(this.onTick)
    }, e.prototype.onTick = function (t) {
        t.btnHand.label = "确定(" + t.time_count-- + ")", t.time_count < 0 && t.closeHandler()
    }, e.prototype.onUpdate = function () {
        var t = VoZhuTianFengShen.get3StarAwards(this._cudId);
        ConfigHelp.makeStrGrids(t, this.gridArr, 0, 0, this.gridAwards, !0);
        VoZhuTianFengShen.get3StarCount(this._cudId);
        this.txtInfos.textFlow = HtmlUtil.parse(HtmlUtil.color("3星", "#b85e0e") + "通关" + HtmlUtil.color("第" + this._cudId + "关", "#10a244") + "可获得");
        var e = VoZhuTianFengShen.getDataById(this._cudId),
            i = -1;
        switch (e && (i = e.starGotState), i) {
            case 0:
                var o = this.get3StarState();
                o ? this.btnHand.label = "领取" : this.btnHand.label = "不可领取";
                break;
            case 1:
                this.btnHand.label = "已领取";
                break;
            default:
                this.btnHand.label = "不可领取"
        }
    }, e.prototype.get3StarState = function () {
        var t = VoZhuTianFengShen.getInst(),
            e = VoZhuTianFengShen.getDataById(this._cudId),
            i = e && 0 == e.starGotState,
            o = this._cudId <= t.mineTongGuanCount,
            e = VoZhuTianFengShen.getDataById(this._cudId),
            n = 3 == e.starNum;
        return i && o && n
    }, e.prototype.onSize = function () {
        t.prototype.fullStage.call(this)
    }, e.prototype.onClose = function () {
        t.prototype.onClose.call(this), this.removeMsg(), e.tickToClose = !1, this.removeTick()
    }, e.tickToClose = !1, e
}(PopUpUI);
__reflect(VZTFS3StarAward.prototype, "VZTFS3StarAward");
var VoZhuTianFengShen = function () {
    function t() {
        this.minePaiMing = 0, this.mineTongGuanCount = 0, this.resetCount = 0
    }
    return t.getInst = function () {
        return this._inst || (this._inst = new t)
    }, t.update = function (t, e, i, o, n) {
        var a = this.getDataById(t);
        a.cfgId = t, a.starNum = e, a.starGotState = i, a.shouTongGotState = o, a.tongGuanGotState = n
    }, t.getDataById = function (t) {
        var e = this.map[t];
        return e || (e = {}, this.map[t] = e), e
    }, t.updateStarGot = function (t, e) {
        var i = this.getDataById(t);
        i.starGotState = e
    }, t.getName = function (t) {
        return CFG_ZTFS.LIB[t].n
    }, t.getLockLevel = function (t) {
        return CFG_ZTFS.LIB[t].level
    }, t.getTeDian = function (t) {
        return CFG_ZTFS.LIB[t].tdjs
    }, t.getTuiJian = function (t) {
        return CFG_ZTFS.LIB[t].tj
    }, t.getLongDes = function (t) {
        return CFG_ZTFS.LIB[t].cjjs
    }, t.getShortDes = function (t) {
        return CFG_ZTFS.LIB[t].djjs
    }, t.getMoXing = function (t) {
        return CFG_ZTFS.LIB[t].gwmx
    }, t.getShouTongAwards = function (t) {
        return CFG_ZTFS.LIB[t].stjl
    }, t.getTongGuanAwards = function (t) {
        return CFG_ZTFS.LIB[t].tzjl
    }, t.get3StarAwards = function (t) {
        return CFG_ZTFS.LIB[t].sxjl
    }, t.get3StarCount = function (t) {
        var e = this.getDataById(t);
        return e ? e.starNum : 0
    }, t.getMaxId = function () {
        if (this._maxId > 0) return this._maxId;
        var t = 0;
        for (var e in CFG_ZTFS.LIB) t++;
        return this._maxId = t
    }, t.getMaxResetCount = function () {
        var t = GameGlobal.modelRole.voMine.vip;
        return t >= 0 ? VoVip.LIB[t].fscs : 0
    }, t.getLowestAwardId = function () {
        var e = t.getInst().mineTongGuanCount;
        for (var i in this.map) {
            var o = this.map[i];
            if (o.cfgId <= e && 0 == o.tongGuanGotState) return o.cfgId
        }
        return e + 1
    }, t.getResetCount = function () {
        var e = t.getInst(),
            i = e.resetCount,
            o = this.getMaxResetCount(),
            n = o - i + 1;
        return n = Math.max(0, n)
    }, t.map = {}, t
}();
__reflect(VoZhuTianFengShen.prototype, "VoZhuTianFengShen");
var VoZTFSStore = function () {
    function t() {}
    return t.prototype.getLimit = function () {
        var t = this.cfg.dayxg,
            e = this.cfg.fxg;
        return t + e
    }, t.prototype.getPrice = function () {
        var t = ConfigHelp.makeVoList(this.cfg.xh)[0];
        return t.count
    }, t.prototype.getCost = function () {
        return this.cfg.xh
    }, t.prototype.conditionNotFit = function (t) {
        void 0 === t && (t = !0);
        var e = this.cfg.tiaojian,
            i = VoZhuTianFengShen.getInst();
        return e > 0 && i.mineTongGuanCount < e ? (t && ViewText.htmlText("封神通关" + HtmlUtil.color("第" + e + "关", "#58FF21") + "解锁该物品的购买权限"), !0) : !1
    }, t.prototype.conditionDisplay = function (t) {
        var e = this.cfg.tiaojian;
        if (e > 0) {
            var i = VoZhuTianFengShen.getInst();
            i.mineTongGuanCount >= e ? (t.textColor = 27922, t.text = "") : (t.textColor = 15532032, t.text = "通关到第" + e + "关解锁")
        } else t.text = ""
    }, t.prototype.priceNotEnough = function (t) {
        void 0 === t && (t = !0);
        var e = Util.parseIntStr(this.cfg.xh),
            i = GameGlobal.modelBag.getItemCount(e[1]);
        CFG_Item.LIB[e[1]].name;
        return i < e[2] ? (t && GameGlobal.layerMgr.open(UIConst.CAILIAOGET, e[1]), !0) : !1
    }, t.prototype.getOnSellData = function () {
        return this.cfg.item
    }, t.prototype.onBuy = function (t) {
        GameGlobal.modelZTFS.CG3085(this.cfg.id, t)
    }, t.init = function () {
        if (!(this.map.getLength() > 0)) {
            var e = CFG_ZTFS.LIB3;
            for (var i in e) {
                var o = e[i],
                    n = new t;
                n.cfg = o, n.boughtNum = 0, this.map.add(n, i)
            }
        }
    }, t.update = function (t, e) {
        var i = this.map.getByKey(t);
        i && (i.boughtNum = e)
    }, t.getProducts = function () {
        return 0 == this.map.getLength() && this.init(), this.map.getList()
    }, t.getNotice = function () {
        0 == this.map.getLength() && this.init();
        for (var t = 0, e = this.map.getLength(); e > t; t++) {
            var i = this.map.getByIndex(t);
            if (!i.conditionNotFit(!1) && !i.priceNotEnough(!1)) return !0
        }
        return !1
    }, t.map = new CommondMap, t
}();
__reflect(VoZTFSStore.prototype, "VoZTFSStore", ["IVoStore"]);
var ItemZYZLAward = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e
    }
    return __extends(e, t), e.prototype.setSkinName = function () {
        this.skinName = "ItemJiangLiSkin"
    }, e.prototype.partAdded = function (e, i) {
        t.prototype.partAdded.call(this, e, i)
    }, e.prototype.childrenCreated = function () {
        t.prototype.childrenCreated.call(this), this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGet, this), this.lb.textFlow = HtmlUtil.parse(""), this.btnGet.setNoticeVis(!0), this.btnGet.label = "召唤挚友", GameGlobal.tick.addInterv(this.onTick, 1e3, this), GameGlobal.modelZYZL.on(ModelZYZL.MSG_ISCANGET, this.updateBtnGet1, this), GameGlobal.modelZYZL.on(ModelZYZL.MSG_RESULT, this.updateBtnGet2, this)
    }, Object.defineProperty(e.prototype, "data", {
        get: function () {
            return this._data
        },
        set: function (t) {
            this._data = t;
            var e = t.struct.id;
            this._curId = e;
            var i = t.struct.jl;
            ConfigHelp.makeStrGrids(i, this.gridArr, 0, 0, this.Container, !0, 10, .8);
            var o = t.Maxid;
            o > e && (o = e), o == e ? this.dengLuNum.textFlow = HtmlUtil.parse(HtmlUtil.color(o, "#9CFF42") + "/" + e) : this.dengLuNum.textFlow = HtmlUtil.parse(HtmlUtil.color(o, "#FF0000") + "/" + e), 1 == e && (this.btnGet.setNoticeVis(!1), this.btnGet.enabled = !1, this.btnGet.label = "已领取"), 0 == t.sortKey ? (this.btnGet.setNoticeVis(!1), this.btnGet.enabled = !1, this.btnGet.label = "已领取") : 2e3 == t.sortKey ? (GameGlobal.tick.removeInterv(this.onTick, this), this.btnGet.label = "领取", this.btnGet.enabled = !0, this.btnGet.setNoticeVis(!0), this.lb.textFlow = HtmlUtil.parse("")) : 1e3 == t.sortKey && (this.btnGet.setNoticeVis(!0), this.btnGet.label = "召唤挚友", this.btnGet.enabled = !0)
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.onGet = function () {
        "召唤挚友" == this.btnGet.label ? (this.lb.textFlow = HtmlUtil.parse("已召唤挚友，等待挚友登录游戏中！"), this.btnGet.setNoticeVis(!1), platform.share()) : "领取" == this.btnGet.label && GameGlobal.modelZYZL.CG_4423(this._curId)
    }, e.prototype.onTick = function (t) {
        t.updateRm()
    }, e.prototype.updateRm = function () {
        var t = GameGlobal.modelZYZL.getRemainShareSec();
        t > 0 || (GameGlobal.modelZYZL.CG_4425(this._curId), "召唤挚友" == this.btnGet.label && (this.lb.textFlow = HtmlUtil.parse("挚友未登录，可重新召唤挚友！")))
    }, e.prototype.updateBtnGet1 = function (t) {
        t == this._curId && (GameGlobal.tick.removeInterv(this.onTick, this), this.btnGet.label = "领取", this.btnGet.enabled = !0, this.btnGet.setNoticeVis(!0), this.lb.textFlow = HtmlUtil.parse(""))
    }, e.prototype.updateBtnGet2 = function (t) {
        t == this._curId && (this.btnGet.setNoticeVis(!1), this.btnGet.enabled = !1, this.btnGet.label = "已领取"), GameGlobal.modelZYZL.CG_4421()
    }, e.prototype.$onRemoveFromStage = function () {
        GameGlobal.modelZYZL.off(ModelZYZL.MSG_ISCANGET, this.updateBtnGet1), GameGlobal.modelZYZL.off(ModelZYZL.MSG_RESULT, this.updateBtnGet2)
    }, e
}(ItemBase);
__reflect(ItemZYZLAward.prototype, "ItemZYZLAward");
var ModelZYZL = function (t) {
    function e() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.isGetAward = !1, e.shareCDSec = 300, e.shareCDSecDt = egret.getTimer(), e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(4422, this.GC_4422, this), e.regHand(4424, this.GC_4424, this), e.regHand(4426, this.GC_4426, this)
    }, e.prototype.getRemainShareSec = function () {
        var t = this.shareCDSec - (egret.getTimer() - this.shareCDSecDt) / 1e3 >> 0;
        return -5 > t && (t = 300), t
    }, e.prototype.CG_SHARESUCCESS = function () {
        var t = this.getBytes();
        this.sendSocket(4051, t)
    }, e.prototype.recordSucces = function () {
        this.CG_SHARESUCCESS()
    }, e.prototype.CG_4421 = function () {
        var t = this.getBytes();
        this.sendSocket(4421, t)
    }, e.prototype.GC_4422 = function (t, i) {
        for (var o = i.readByte(), n = i.readShort(), a = [], s = 0; n > s; s++) {
            var r = i.readByte();
            a.push(r)
        }
        a.length >= 8 && platform.isCanShare && (t.isGetAward = !0, GameGlobal.modelExternal.hideZYZLBtn(), ViewRightUI.addBtn(ERightButton.SHARE_7_DAYS, "fxyx_png", t.onShare, this, !1));
        var l = {
            maxId: o,
            arr: a
        };
        t.notify(e.MSG_AWARD, l)
    }, e.prototype.onShare = function () {
        platform.share()
    }, e.prototype.CG_4423 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(4423, e)
    }, e.prototype.GC_4424 = function (t, i) {
        var o = i.readByte(),
            n = i.readByte();
        1 == n ? (ViewText.text("领取成功！"), t.notify(e.MSG_RESULT, o)) : 2 == n ? ViewText.text("已领取过！") : 3 == n ? ViewText.text("邀请的玩家尚未上线！") : 4 == n && GameGlobal.modelBag.checkRLTips(0)
    }, e.prototype.CG_4425 = function (t) {
        var e = this.getBytes();
        e.writeByte(t), this.sendSocket(4425, e)
    }, e.prototype.GC_4426 = function (t, i) {
        var o = i.readByte(),
            n = i.readByte();
        1 == n && t.notify(e.MSG_ISCANGET, o)
    }, e.prototype.isShowIcon = function () {
        var t = !0;
        return this.isGetAward && (t = !1), t
    }, e.MSG_AWARD = "MSG_AWARD", e.MSG_ISCANGET = "MSG_ISCANGET", e.MSG_RESULT = "MSG_RESULT", e
}(BaseModel);
__reflect(ModelZYZL.prototype, "ModelZYZL");
var VZYZL_otherPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.sourceData = new eui.ArrayCollection, e.shared = !1, e.skinName = "zyzlOtherDaySkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGet, this), this.addCloseListen(this.btnClose), this.btnGet.setNoticeVis(!1), this.btnGet.label = "领取", this.btnGet.enabled = !1, this.Scroller.scrollPolicyH = eui.ScrollPolicy.OFF, this.Scroller.verticalScrollBar.autoVisibility = !1, this.Scroller.verticalScrollBar.visible = !1, this.Container.dataProvider = this.sourceData, this.Container.itemRenderer = ItemZYZLAward, this.imgText = new ImageText, this.imgText.charFunc = ImageText.STRFUNC, this.imgText.container = this.zlGrp, this.cont.addChild(this.imgText.container)
    }, e.prototype.onOpen = function (e) {
        t.prototype.onOpen.call(this, e), GameGlobal.modelZYZL.CG_4421(), IconUtil.setIconSrc(this.bg, "specBG4_png");
        var i = CFG_FABAO.LIB1[1005].zlz;
        this.imgText.setText("" + i), GameGlobal.modelZYZL.on(ModelZYZL.MSG_RESULT, this.updateBtnGet2, this), GameGlobal.modelZYZL.on(ModelZYZL.MSG_AWARD, this.updateAwards, this)
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.bg, null), GameGlobal.modelZYZL.off(ModelZYZL.MSG_RESULT, this.updateBtnGet2), GameGlobal.modelZYZL.off(ModelZYZL.MSG_AWARD, this.updateAwards)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.updateBtnGet2 = function (t) {
        33 == t && (this.btnGet.setNoticeVis(!1), this.btnGet.enabled = !1, this.btnGet.label = "已领取"), GameGlobal.modelZYZL.CG_4421()
    }, e.prototype.updateAwards = function (t) {
        if (t) {
            var e = t.maxId,
                i = [],
                o = t.arr,
                n = e;
            n > 7 && (n = 7), this.pbDays.width = 200 * (n / 7), this.lbDengLuExp.text = n + "/7";
            for (var a = !1, s = 0; s < o.length; s++) 33 == o[s] && (a = !0);
            a ? (this.btnGet.setNoticeVis(!1), this.btnGet.enabled = !1, this.btnGet.label = "已领取") : e >= 7 && (this.btnGet.label = "领取", this.btnGet.enabled = !0, this.btnGet.setNoticeVis(!0));
            for (var r in CFG_ZYSL.LIB) {
                var l = CFG_ZYSL.LIB[r],
                    h = !0,
                    c = 1e3;
                if (l.id <= e) {
                    for (var s = 0; s < o.length; s++) l.id == o[s] && (h = !1);
                    c = h ? 2e3 : 0
                }
                i.push({
                    struct: l,
                    Maxid: e,
                    sortKey: c
                })
            }
            i.sort(this.sortFunc), DisplayUtil.fillDataAC(this.sourceData, i)
        }
    }, e.prototype.onGet = function () {
        1 == this.btnGet.enabled && GameGlobal.modelZYZL.CG_4423(33)
    }, e.prototype.sortFunc = function (t, e) {
        return e.sortKey == t.sortKey ? t.struct.id - e.struct.id : e.sortKey - t.sortKey
    }, e
}(BaseEUIView);
__reflect(VZYZL_otherPnl.prototype, "VZYZL_otherPnl");
var VZYZLPnl = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.gridArr = [], e.shared = !1, e.skinName = "zyzlFisrtDaySkin", e
    }
    return __extends(e, t), e.prototype.initView = function () {
        this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onGet, this), this.addCloseListen(this.btnClose), this.lb.textFlow = HtmlUtil.parse(""), this.btnGet.setNoticeVis(!0), this.btnGet.label = "召唤挚友", this.imgText = new ImageText, this.imgText.charFunc = ImageText.STRFUNC, this.imgText.container = this.zlGrp, this.cont.addChild(this.imgText.container);
        for (var t = CFG_ZYSL.LIB[1].jl.split(";"), e = 0; e < t.length; e++) {
            var i = new eui.Label;
            this.NameGrp.addChild(i), this.gridArr.length > 0 && (i.x = this.gridArr[e].x + this.gridArr[e].width / 2), i.y = 4;
            var o = t[e].split(",")[1];
            0 == parseInt(o) ? i.text = "绑定元宝" : i.text = CFG_Item.LIB[o].name, i.textColor = 16777215, i.size = 16, i.stroke = 1, i.strokeColor = 1254238
        }
    }, e.prototype.onOpen = function (e) {
        if (!platform.isCanShare) return void GameGlobal.layerMgr.close(UIConst.ZYZL);
        t.prototype.onOpen.call(this, e), IconUtil.setIconSrc(this.bg, "ZYZL_json.dbBg"), GameGlobal.modelZYZL.CG_4421(), GameGlobal.modelZYZL.CG_4425(1), ConfigHelp.makeStrGrids(CFG_ZYSL.LIB[1].jl, this.gridArr, 0, 0, this.Container, !0, 10, .8, 0), GameGlobal.tick.addInterv(this.onTick, 1e3, this);
        var i = GameGlobal.modelRole.voMine,
            o = VoAttribute.parse(CFG_HUOBAN1.LIB[1903].battr),
            n = VoAttribute.caculateArrScore(o);
        this.imgText.setText("z" + (n + i.teamStr)), GameGlobal.modelZYZL.on(ModelZYZL.MSG_ISCANGET, this.updateBtnGet1, this), GameGlobal.modelZYZL.on(ModelZYZL.MSG_RESULT, this.updateBtnGet2, this), GameGlobal.modelZYZL.on(ModelZYZL.MSG_AWARD, this.updateAwards, this)
    }, e.prototype.onClose = function () {
        IconUtil.setIconSrc(this.bg, null), ConfigHelp.clearGrids(this.gridArr), GameGlobal.modelZYZL.off(ModelZYZL.MSG_ISCANGET, this.updateBtnGet1), GameGlobal.modelZYZL.off(ModelZYZL.MSG_RESULT, this.updateBtnGet2), GameGlobal.modelZYZL.off(ModelZYZL.MSG_AWARD, this.updateAwards)
    }, e.prototype.onSize = function () {
        this.fullStage()
    }, e.prototype.updateBtnGet1 = function (t) {
        1 == t && (GameGlobal.tick.removeInterv(this.onTick, this), this.btnGet.label = "领取", this.btnGet.setNoticeVis(!0), this.lb.textFlow = HtmlUtil.parse(""))
    }, e.prototype.updateBtnGet2 = function (t) {
        1 == t && (this.btnGet.setNoticeVis(!1), this.btnGet.enabled = !1, this.btnGet.label = "已领取", this.lb.textFlow = HtmlUtil.parse(""))
    }, e.prototype.updateAwards = function (t) {
        if (t) {
            var e = t.arr;
            if (e.length > 0)
                for (var i = 0; i < e.length; i++) 1 == e[i] && (this.btnGet.setNoticeVis(!1), this.btnGet.enabled = !1, this.btnGet.label = "已领取", this.lb.textFlow = HtmlUtil.parse(""), GameGlobal.layerMgr.close(UIConst.ZYZL), GameGlobal.layerMgr.open(UIConst.ZYZL7DAY))
        }
    }, e.prototype.onGet = function () {
        if ("召唤挚友" == this.btnGet.label) {
            this.lb.textFlow = HtmlUtil.parse("已召唤挚友，等待挚友登录游戏中！"), this.btnGet.setNoticeVis(!1);
            var t = this;
            platform.share(null, function () {
                t.shared = !0
            }), window.OPEN_DATA && window.OPEN_DATA.qua && "WX" == window.OPEN_DATA.qua.app && (this.openView(WXGuideShareView), GameGlobal.layerMgr.close(UIConst.ZYZL))
        } else "领取" == this.btnGet.label && GameGlobal.modelZYZL.CG_4423(1)
    }, e.prototype.onShareT = function () {
        platform.share()
    }, e.prototype.onTick = function (t) {
        t.updateRm()
    }, e.prototype.updateRm = function () {
        var t = GameGlobal.modelZYZL.getRemainShareSec();
        t > 0 || (GameGlobal.modelZYZL.CG_4425(1), "召唤挚友" == this.btnGet.label && (this.lb.textFlow = HtmlUtil.parse("挚友未登录，可重新召唤挚友！")))
    }, e
}(BaseEUIView);
if (__reflect(VZYZLPnl.prototype, "VZYZLPnl"), !window.platform)
    if (window.mqq || window.BK) switch (platform = new PlatformQzone, window.OPEN_DATA.channel) {
        case E_SQ_CHANNEL.liMiXiu:
        case E_SQ_CHANNEL.xinYueClub:
            AppConfig.pftype = E_PF_CONFIG_TYPE.WAN_WAN;
            break;
        case E_SQ_CHANNEL.SQ:
        case E_SQ_CHANNEL.QZ:
            AppConfig.pftype = E_PF_CONFIG_TYPE.WAN_BA;
            break;
        default:
            AppConfig.pftype = E_PF_CONFIG_TYPE.WAN_WAN
    } else window.browser && window.browser.x5gameplayer ? (platform = new PlatformQQBrowser, AppConfig.pftype = E_PF_CONFIG_TYPE.QQ_BROWNSER) : hy_wy_sdk ? (platform = new PlatformMi, AppConfig.pftype = E_PF_CONFIG_TYPE.MI) : (platform = new PlatformDebug, AppConfig.pftype = E_PF_CONFIG_TYPE.LOCAL);
var CFG_External = function () {
    function t() {}
    return t
}();
__reflect(CFG_External.prototype, "CFG_External");
var CFG_FABAO = function () {
    function t() {}
    return t
}();
__reflect(CFG_FABAO.prototype, "CFG_FABAO");
var CFG_Fashion = function () {
    function t() {}
    return t.getTItem = function (t) {
        var e = this.LIB[t];
        return void 0 == e.$item && ("0" != e.item ? e.$item = Util.parseIntStr(e.item) : e.$item = 0), e.$item
    }, t
}();
__reflect(CFG_Fashion.prototype, "CFG_Fashion");
var CFG_FuWenBoss = function () {
    function t() {}
    return t
}();
__reflect(CFG_FuWenBoss.prototype, "CFG_FuWenBoss");
var CFG_FuWenRoll = function () {
    function t() {}
    return t.getZPCostArr = function (t) {
        var e = this.LIB_ZPCOST[t];
        return voFuWenRoll.Map[t].dzcs > voFuWenRoll.Map[t].hcs ? (e.$_xh3 || ("0" != e.xh3 ? e.$_xh3 = Util.parseIntStr(e.xh3) : e.$_xh3 = Util.parseIntStr(e.xh2)), e.$_xh3) : (e.$_xh2 || (e.$_xh2 = Util.parseIntStr(e.xh2)), e.$_xh2)
    }, t.getZpZk = function () {
        var t = this.LIB_ZPCOST[2];
        return t ? t.zk : 0
    }, t
}();
__reflect(CFG_FuWenRoll.prototype, "CFG_FuWenRoll");
var ShareData = function () {
    function t() {
        this.init()
    }
    return t.prototype.init = function () {
        this.ext = {}
    }, Object.defineProperty(t.prototype, "query", {
        get: function () {
            return this.ext ? JSON.stringify(this.ext) : null
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t.prototype, "queryLink", {
        get: function () {
            var t = this.ext;
            if (t) {
                var e = [];
                for (var i in t) {
                    var o = i + "=" + t[i];
                    e.push(o)
                }
                var n = e.join("&");
                return "&" + n
            }
            return null
        },
        enumerable: !0,
        configurable: !0
    }), t
}();
__reflect(ShareData.prototype, "ShareData");
var Astar = function () {
    function t() {
        this.openList = [], this.closeList = [], this.path = [], this.state = 1
    }
    return t.prototype.startFind = function (t, e, i, o, n) {
        this.sx = t, this.sy = e, this.ex = i, this.ey = o;
        var a = Math.floor(e / 32),
            s = Math.floor(t / 32),
            r = Math.floor(o / 32),
            l = Math.floor(i / 32);
        this.success = !1, this.cleanup(), this.nodes = n, this.startNode = n[a][s], this.endNode = n[r][l], this.start()
    }, t.prototype.start = function () {
        var t = this.startNode,
            e = this.endNode,
            i = this.openList,
            o = this.nodes;
        (o[t.row] && o[t.row][t.col] || o[e.row] && o[e.row][e.col]) && (this.startNode.space || console.log("spaceLeave"), this.endNode.space && (i.push(t), this.state += 2, this.searchSteps()))
    }, t.prototype.searchSteps = function () {
        for (var t, e, i = (this.nodes, this.openList), o = (this.closeList, this.endNode), n = (this.startNode.row, this.startNode.col, o.row), a = o.col, s = this.state, r = s + 1, l = this.closeList; i.length > 0;) {
            t = null;
            var h = this.curNode = i.shift();
            if (h.state = r, l.push(h), h.row == n && h.col == a) {
                this.buildPath(h);
                break
            }
            var c, p, u = h.nears,
                d = u.length;
            h.g = 0;
            for (var f = 0; d > f; f++) {
                var g = u[f],
                    m = g.en;
                if (m.space && m.state <= s) {
                    e = n - m.row, 0 > e && (e = -e), c = e, e = a - m.col, 0 > e && (e = -e), c += e;
                    var y = h.g + g.g;
                    p = y + c, m.state < s ? (m.aPrev = h, m.aLink = g, m.state = s, m.h = c, m.f = p, m.g = y, this.insertopen(m)) : m.state == s && p < m.f && (m.aPrev = h, m.aLink = g, m.state = s, m.h = c, m.f = p, m.g = y, this.swap(m))
                }
            }
        }
    }, t.prototype.insertopen = function (t) {
        for (var e = this.openList, i = 0, o = e.length - 1; o >= i;) {
            var n = o + i >> 1,
                a = e[n];
            t.f < a.f ? o = n - 1 : i = n + 1
        }
        e.splice(i, 0, t)
    }, t.prototype.swap = function (t) {
        var e = this.openList,
            i = e.indexOf(t); - 1 != i && (e.splice(i, 1), this.insertopen(t))
    }, t.prototype.buildPath = function (t) {
        var e = (this.startNode.row, this.startNode.col, this.path);
        e.length = 0;
        var i = [];
        for (i.push(this.ey, this.ex); t.aPrev && t.aPrev != this.startNode;) i.unshift(t.aPrev.cy, t.aPrev.cx), t = t.aPrev;
        i.unshift(this.startNode.cy, this.startNode.cx);
        for (var o = this.startNode.cy, n = this.startNode.cx, a = i.length - 1, s = 0, r = a; r > s;) {
            var l = i[r],
                h = i[r - 1];
            if (this.pathCheck(n, o, l, h)) {
                if (e.push(h, l), r == a) break;
                n = l, o = h, s = r, r = a + 2
            }
            r -= 2
        }
        e.length || e.push(this.ey, this.ex), this.success = !0
    }, t.prototype.smooth = function (t, e) {
        for (var i = t.length, o = 0, n = this.startNode; i > o;) {
            var a = t[o],
                s = this.pathCheck(n.cx, n.cy, a.cx, a.cy);
            if (0 == s && t[o - 1]) {
                var r = t[o - 1];
                e.push(r), n = r, o++
            } else o++
        }
        return e
    }, t.prototype.pathCheck = function (t, e, i, o) {
        for (var n = i - t, a = o - e, s = Math.sqrt((o - e) * (o - e) + (i - t) * (i - t)), r = 0, l = 32;;) {
            if ((r += l) > s) return !0;
            var h = r / s,
                c = h * a + e,
                p = h * n + t;
            if ((n > 0 && p > i || 0 > n && i > p) && (p = i), (a > 0 && c > o || 0 > a && o > c) && (c = o), !this.nodes[c / l >> 0][p / l >> 0].space) return !1
        }
    }, t.prototype.cleanup = function () {
        this.startNode = this.endNode = null, this.nodes = null, this.insureNull(this.openList), this.insureNull(this.closeList), this.path.length = 0, this.openList.length = 0, this.closeList.length = 0
    }, t.prototype.insureNull = function (t) {
        for (var e = 0, i = t.length; i > e; e++) t[e].aPrev = null
    }, t
}();
__reflect(Astar.prototype, "Astar");
var AstarLink = function () {
    function t() {}
    return t.create = function (e, i) {
        var o = t.pool.length ? t.pool.pop() : new t;
        return o.sn = e, o.en = i, o
    }, t.pool = [], t
}();
__reflect(AstarLink.prototype, "AstarLink");
var AstarNode = function () {
    function t() {
        this.state = 0, this.nears = []
    }
    return t.create = function () {
        var e;
        return e = Astar.length > 0 ? t.pool.pop() : new t
    }, t.prototype.destory = function () {
        0 != this.state && (t.pool.push(this), this.state = 0), this.nears.length = 0
    }, t.pool = new Array, t
}();
__reflect(AstarNode.prototype, "AstarNode");
var FishSceneCtrl = function () {
    function t() {}
    return t.prototype.onEnter = function (t) {
        CFG_COMMOND.addXianZhi(1072);
        var e = this.cfg = CFG_MAP.LIB[this.scene._curSceneid];
        0 == this.scene.map.isLoading && this.scene.map.id == e.res ? this.onMapLoaded() : (this.scene.on(egret.Event.COMPLETE, this.onMapLoaded, this), this.scene.loadMap(e.res))
    }, t.prototype.onMapLoaded = function () {
        var t = this;
        if (t.scene) {
            var e = GameGlobal;
            e.layerMgr.closePnlByType(1);
            var i = t.cfg;
            e.modelMap.setMapTitle(i.name);
            var o = t.mine = e.modelRole.voMine.sceneChars[0],
                n = this.scene.map.spaceNodes[this.scene.map.spaceNodes.length * Math.random() >> 0];
            o.x = n.cx, o.y = n.cy, o.force = 1;
            var a = e.modelRole.voMine.mainRole;
            o.hpmax = o.hp = a.hpmax, o.addMovePlug(), o.setName(o.name), this.scene.addUnit(o), o.stand(), e.modelRole.voMine.updatePetFollow(), VoFaBao.updateFollowFaBao();
            var s = new UserInputPlug;
            s.tar = o, o.sex = o.job = a.sex, o.addPlug(s), this.isReady = !0, SoundManager.getInstance().playBGM("default"), e.layerMgr.dynamicReg(UIConst.FISHSCENE, VFishSceneUI, e.layerMgr.UI_MainBottom), e.layerMgr.dynamicReg(UIConst.FISHROOM, VFishRoom, e.layerMgr.UI_Message), e.layerMgr.dynamicReg(UIConst.FISHBASKET, VFishBasket, e.layerMgr.UI_Message), e.layerMgr.dynamicReg(UIConst.FISHMSG, VFishMsg, e.layerMgr.UI_Message), e.layerMgr.open(UIConst.FISHSCENE), e.layerMgr.addUIHideF(UIConst.QUEST, "scene"), e.layerMgr.addUIHideF(UIConst.LEFTUI, "scene"), e.layerMgr.addUIHideF(UIConst.RIGHTUI, "scene"), e.layerMgr.addUIHideF(UIConst.HUODONGENTRY, "scene"), e.modelFish.CG_ENTERSCENEFIN(), e.layerMgr.closePnlByType(1), EventCenter.sendMsg(MainEvent.OPEN_CHAT, EChatChannel.CROSS)
        }
    }, t.prototype.onExit = function () {
        CFG_COMMOND.delXianZhi(1072);
        var t = GameGlobal,
            e = t.modelRole.voMine.sceneChars[0];
        e.specState = 0, t.layerMgr.delUIHideF(UIConst.QUEST, "scene"), t.layerMgr.delUIHideF(UIConst.LEFTUI, "scene"), t.layerMgr.delUIHideF(UIConst.RIGHTUI, "scene"), t.layerMgr.delUIHideF(UIConst.HUODONGENTRY, "scene"), t.layerMgr.close(UIConst.FISHSCENE), t.layerMgr.close(UIConst.FISHBASKET), t.layerMgr.close(UIConst.FISHROOM), t.layerMgr.delUIHideF(UIConst.QUEST, "fish"), this.scene.off(egret.Event.COMPLETE, this.onMapLoaded, this), this.scene.removeAll(), t.modelFish.clear(), ChatWinCmp.exitCh(EChatChannel.CROSS), EventCenter.sendMsg(MainEvent.OPEN_CHAT, EChatChannel.GENERAL)
    }, t.prototype.update = function (t) {
        if (this.isReady) {
            var e = this.scene;
            e.updateUnits(t.dt);
            var i = e.getLifeMainRole();
            i && e.map.watch(i.x, i.y + 50)
        }
    }, t
}();
__reflect(FishSceneCtrl.prototype, "FishSceneCtrl", ["ISceneCtrl"]);
var GuanQiaSceneCtrl = function () {
    function t() {
        this.isReady = !1, this.loading = !1, this.isFirstMapLoaded = !0
    }
    return t.getIns = function () {
        return this._ins || (this._ins = new t), this._ins
    }, t.prototype.onEnter = function (e) {
        this.interv = 0, this.battleInterv = 4e3, this.isReady = !1;
        var i = this.cfg = CFG_MAP.LIB[this.scene._curSceneid];
        t.lastSceneID = i.id, 0 == this.scene.map.isLoading && this.scene.map.id == i.res ? this.onMapLoaded() : (this.scene.on(egret.Event.COMPLETE, this.onMapLoaded, this), this.scene.loadMap(i.res))
    }, t.prototype.onExit = function () {
        this.autoEff && (EffectMgr.getIns().removeEff(this.autoEff), this.autoEff.$setVisible(!0), this.autoEff = null), this.scene.off(egret.Event.COMPLETE, this.onMapLoaded, this), this.scene.removeAll(), GameGlobal.modelBattle.off(ModelBattle.MSG_BATTLE_BEGIN, this.onBattleBegin), GameGlobal.modelBattle.off(ModelBattle.MSG_BATTLEENDED, this.onBattled), GameGlobal.modelGuanqia.off(ModelGuanQia.MSG_GKCHANGE, this.updateGKView), GameGlobal.modelDaliy.off(ModelDaliy.UPDATE, this.createAllNpcYs, this), GameGlobal.modelDaliy.off(ModelDaliy.YS, this.createOneNpcYs), GameGlobal.modelDaliy.off(ModelDaliy.REMOVEYS, this.removeOneNpcYs), GameGlobal.modelMap.off(ModelMap.MSG_NEARPLAYERS, this.onPlayers);
        var t = GameCtrlBase.instance;
        t.off(ModelRole.MSG_LEVEL, this.checkCoverGift, this);
        var e = GameGlobal.layerMgr;
        e.close(UIConst.GUANQIASCENE), e.close(UIConst.WORLDMAP), e.close(UIConst.WORLDMAPENTRY), e.close(UIConst.LEFTUI), e.close(UIConst.SHOUCHONGTIP)
    }, t.prototype.onGKStar = function () {
        var t = GameGlobal.modelGuanqia,
            e = t.wave,
            i = CFG_GuanQia.LIB[t.guanqia].en;
        e >= i && t.CG_MONSTER(1)
    }, t.prototype.onEnableRole = function () {
        this.createHeros()
    }, t.prototype.createHeros = function () {
        var t = (this.cfg, GameGlobal.modelRole.voMine),
            e = t.sceneChars[0];
        if (!e.mapScene) {
            var i = this.scene.map.spaceNodes[this.scene.map.spaceNodes.length * Math.random() >> 0];
            e.x = i.cx, e.y = i.cy, this.scene.addUnit(e), e.addMovePlug(), e.setWay(5), t.updatePetFollow(), VoFaBao.updateFollowFaBao();
            var o = new UserInputPlug;
            o.tar = e, e.addPlug(o), e.setName(t.name), e.setXianJie(e.xianJieLv)
        }
    }, t.prototype.onMapLoaded = function () {
        if (this.scene) {
            var t = this.cfg;
            this.createHeros();
            var e = GameGlobal;
            e.modelMap.setMapTitle(t.name), this.isReady = !0, this.updateGKView(), this.autoEff || (this.autoEff = EffectMgr.addEff("uieff/autoF", GameGlobal.layerMgr.UI_floorUI, 350, 230 + platform.deviceTopPX), e.modelBattle.isInbattle && (this.autoEff.val = !1)), this.createAllNpcYs(), e.layerMgr.open(UIConst.GUANQIASCENE), e.layerMgr.open(UIConst.WORLDMAPENTRY), e.layerMgr.open(UIConst.LEFTUI), e.layerMgr.open(UIConst.RIGHTUI), e.modelBattle.on(ModelBattle.MSG_BATTLE_BEGIN, this.onBattleBegin, this), e.modelBattle.on(ModelBattle.MSG_BATTLEENDED, this.onBattled, this), e.modelGuanqia.on(ModelGuanQia.MSG_GKCHANGE, this.updateGKView, this), GameGlobal.modelDaliy.on(ModelDaliy.UPDATE, this.createAllNpcYs, this), e.modelDaliy.on(ModelDaliy.YS, this.createOneNpcYs, this), e.modelDaliy.on(ModelDaliy.REMOVEYS, this.removeOneNpcYs, this), e.modelMap.once(ModelMap.MSG_NEARPLAYERS, this.onPlayers, this);
            var i = GameCtrlBase.instance;
            i.on(ModelRole.MSG_LEVEL, this.checkCoverGift, this);
            var o = e.modelQuest.getCurVo();
            o && 103 == o.type && e.modelQuest.finishQuest(), e.modelMap.CG_GUANQIPLAYERS(), this.isFirstMapLoaded && (this.isFirstMapLoaded = !1, console.log("平台信息", window.OPEN_DATA), this.checkShareGift(), this.checkXinYueGift(), this.checkCoverGift(), CFG_COMMOND.isOpen(CFG_COMMOND.LUCKYROLL, !1) && GameGlobal.modelXiaoFeiAct.CG_LUCKYROLL_OPEN_MESSAGE(), QQLive.QQLiveCtr.isAddMoreFunIcon())
        }
    }, t.prototype.checkShareGift = function () {
        if (GameGlobal.modelcommod.commonArg && !GameGlobal.modelcommod.commonArg.fShare && platform.isCanShare) {
            var t = GameGlobal.modelcommod.isShareRed();
            ViewRightUI.addBtn(ERightButton.SHARE, "fenXiangHL_png", this.onShareTouch, this, t)
        }
    }, t.prototype.checkXinYueGift = function () {
        if (window.OPEN_DATA) {
            var t = window.OPEN_DATA,
                e = t.channel;
            ("xinYueClub" == e || "SQ" == e || "QZ" == e) && ViewRightUI.addBtn(ERightButton.XIN_YUE_GIFT, "xin_yue_gift", this.onXinYueGift, this)
        }
    }, t.prototype.checkCoverGift = function () {
        if (window.OPEN_DATA) {
            var t = window.OPEN_DATA,
                e = t.channel;
            if ("SQ" == e || "QZ" == e) {
                var i = Config.getConfig(xitongkaiqi_116).get(1131),
                    o = GameGlobal.modelRole.voMine.level;
                o >= i.openlv && EventCenter.sendMsg(Cover.Event.CHECK)
            }
        }
    }, t.prototype.onXinYueGift = function () {
        GameGlobal.layerMgr.open(UIConst.XYGIFT)
    }, t.prototype.onShareTouch = function () {
        GameGlobal.modelcommod.commonArg && !GameGlobal.modelcommod.commonArg.fShare && GameGlobal.layerMgr.open(UIConst.WXSHARE1)
    }, t.prototype.update = function (t) {
        var e = GameGlobal.modelGuanqia,
            i = GameGlobal.modelBattle,
            o = this.scene;
        if (GameGlobal.socketMgr.webSocket.connected && !GameGlobal.modelBattle.isInBattleIndeed && (this.interv += t.dt, this.isReady)) {
            var n = o.getLifeMainRole();
            if (o.updateUnits(t.dt), n && !o.lockWatch && o.map.watch(n.x, n.y + 50), !i.isInbattle && this.interv >= 1e3 && this.rndMove(), i.isInbattle || e.monsterRequesting || e.bossRequesting || (this.battleInterv -= t.dt), this.battleInterv <= 0) {
                var a = GameGlobal.mapScene._curSceneid,
                    s = e.getBestSceneID(),
                    r = CFG_GuanQia.LIB[GameGlobal.modelGuanqia.guanqia].en;
                e.autoboss && e.wave >= r && a == s ? e.challengeBoss() : e.CG_MONSTER(0), this.battleInterv = 6e3
            }
        }
    }, t.prototype.onBattleBegin = function () {
        this.autoEff && this.autoEff.$setVisible(!1)
    }, t.prototype.onBattled = function () {
        this.battleInterv = 3e3, this.autoEff && this.autoEff.$setVisible(!0)
    }, t.prototype.updateGKView = function () {
        var t = GameGlobal.modelGuanqia,
            e = CFG_GuanQia.LIB[t.guanqia],
            i = GameGlobal.mapScene._curSceneid,
            o = CFG_MAP.LIB[i];
        if (i != e.m) GameGlobal.modelMap.setMapTitle(o.name);
        else {
            var n = e.n;
            GameGlobal.modelMap.setMapTitle(n)
        }
    }, t.prototype.rndMove = function () {
        var t = this.scene.getLifeMainRole();
        if (t && !t.move_st) {
            var e = this.scene.map.spaceNodes[this.scene.map.spaceNodes.length * Math.random() >> 0];
            t.directMoveTo(e.cx, e.cy)
        }
    }, t.prototype.enterBattle = function () {
        GameGlobal.layerMgr.open(UIConst.BATTLESCENE)
    }, t.prototype.addPlayer = function (t, e) {
        var i = GameGlobal.modelRole.voMine.sceneChars[0],
            o = GameGlobal.mapScene._curSceneid,
            n = Role.create();
        if (n.saveToPool = !0, 1001 == o) n.setBody(i._body), n.setWeapon(i._weapon), n.setWing(i._wing), n.setHorse(i._horse);
        else {
            var a = MathUtil.rndInt(1, 2);
            n.setBody(a);
            var s = CFG_PeiYang.getWeaponRndCFG();
            1 == a ? n.setWeapon(s.mx) : n.setWeapon(s.mxv);
            var r = CFG_PeiYang.getWingRndCFG();
            n.setWing(r.mx);
            var l = CFG_PeiYang.getHorseRndCFG();
            n.setHorse(l.mx)
        }
        n.addMovePlug();
        var h = RndMovePlug.create();
        h.role = n, n.addPlug(h);
        var c = CFG_Title.getRndCFG();
        n.setTitle(c.icon), n.x = t, n.y = e, i.mapScene.addUnit(n)
    }, t.prototype.createAllNpcYs = function () {
        for (var t in Vo_YaoShou.Map) {
            var e = Vo_YaoShou.Map[t];
            this.createOneNpcYs(e)
        }
    }, t.prototype.createOneNpcYs = function (t) {
        var e = this,
            i = "ys" + t.id;
        if (!e.scene.getRole(i)) {
            var o = SimpleNpc.create();
            o.initMonster(t.sysid), o.id = i, o.va = t;
            var n = e.scene.map.spaceNodes[Math.random() * e.scene.map.spaceNodes.length >> 1];
            o.x = n.cx, o.y = n.cy, e.scene.addUnit(o)
        }
    }, t.prototype.removeOneNpcYs = function (t) {
        var e = this,
            i = e.scene.getRole("ys" + t);
        i && e.scene.removeUnit(i)
    }, t.prototype.onPlayers = function () {
        for (var t = GameGlobal.modelMap.guanQiaPlayers, e = 0, i = t.length; i > e; e++) {
            var o = t[e],
                n = Role.create();
            if (!GameGlobal.mapScene.getUnitByID(o.id)) {
                n.id = o.id, n.job = o.sex = o.job, n.setBody(o.bodyModID), n.setWeapon(o.weaponModID), n.setHorse(o.horseModID), n.setWing(o.wingModID), n.setTitle(o.title), n.setWay(3), n.setName(o.name);
                var a = RndMovePlug.create();
                a.role = n, n.addPlug(a);
                var s = GameObjectPathAccording.create();
                s.tar = n, n.addPlug(s);
                var r = GameGlobal.mapScene.map.getRndSpaceNode();
                r ? (n.x = r.cx, n.y = r.cy) : (n.x = 1024, n.y = 1024), GameGlobal.mapScene.addUnit(n);
                var l = CFG_Pet.PETLIB[o.followPetID];
                if (l) {
                    var h = ScenePet.create();
                    h.setBody(l.m), h.setName(l.n), h.x = n.x + 50, h.y = n.y + 50, h.fTargetRole = n, GameGlobal.mapScene.addUnit(h)
                }
            }
        }
    }, t.lastSceneID = 0, t
}();
__reflect(GuanQiaSceneCtrl.prototype, "GuanQiaSceneCtrl", ["ISceneCtrl"]);
var NewerSceneCtrl = function () {
    function t() {
        this.isReady = !1
    }
    return t.prototype.onEnter = function (t) {
        var e = this.cfg = CFG_MAP.LIB[this.scene._curSceneid];
        this.scene.on(egret.Event.COMPLETE, this.onMapLoaded, this), this.scene.loadMap(e.res), this.enterArg = t
    }, t.prototype.onExit = function () {
        this.enterArg = null, GameGlobal.modelMap.off(ModelMap.MSG_NEARPLAYERS, this.onPlayers, this), this.scene.off(egret.Event.COMPLETE, this.onMapLoaded, this), this.scene.removeAll(), GameGlobal.tick.removeInterv(this.createOneNpc, this)
    }, t.prototype.onMapLoaded = function () {
        var t = this;
        if (t.scene) {
            var e = t.cfg;
            GameGlobal.layerMgr.closePnlByType(1), GameGlobal.modelMap.setMapTitle(e.name);
            var i, o = t.mine = GameGlobal.modelRole.voMine.sceneChars[0];
            if (this.enterArg) o.x = this.enterArg.enterX, o.y = this.enterArg.enterY, i = !0;
            else {
                var n = GameGlobal.modelQuest.getCurVo();
                if (n && n.id > 900) {
                    var a = this.scene.getUnitByID(n.cfg.anpc);
                    a && (o.x = a.x, o.y = a.y)
                } else o.x = e.initx, o.y = e.inity
            }
            o.x || (o.x = e.initx, o.y = e.inity), o.view.x = o.x, o.view.y = o.y, o.force = 1;
            var s = GameGlobal.modelRole.voMine;
            o.addMovePlug(), o.setName(s.name), this.scene.addUnit(o), o.stand(), GameGlobal.modelRole.voMine.updatePetFollow();
            var r = new UserInputPlug;
            r.tar = o, o.addPlug(r);
            var l = new HeroNewerPlug;
            l.tar = o, o.addPlug(l), this.isReady = !0, SoundManager.getInstance().playBGM("default"), i && GameGlobal.modelQuest.autoMainQuest()
        }
    }, t.prototype.createOneNpc = function (t) {
        var e = SimpleNpc.create();
        e.initMonster(MathUtil.rndInt(50000001, 50000292)), e.id = SceneObject.getUniqueID();
        var i = t.scene.map.spaceNodes[Math.random() * t.scene.map.spaceNodes.length >> 0];
        e.x = i.cx, e.y = i.cy, t.scene.addUnit(e)
    }, t.prototype.update = function (t) {
        if (this.isReady && !this.scene.map.isLoading) {
            var e = this.scene;
            e.updateUnits(t.dt);
            var i = e.getLifeMainRole();
            i && e.map.watch(i.x, i.y + 50)
        }
    }, t.prototype.getRandBornPoint = function () {
        var t = GameGlobal.mapScene.map.getGroupInfo("born");
        if (t) {
            var e = t.items[0];
            if ("rect" == e.type) {
                var i = MoveUtil.nextPointRet;
                return i.x = e.x + Math.random() * e.width >> 0, i.y = e.y + Math.random() * e.height >> 0, i
            }
        }
    }, t.prototype.onPlayers = function (t) {
        if (!t.unshift) return void this.addPlay(t);
        if (!(GameGlobal.mapScene.units.length >= 12))
            for (var e = (CFG_ATTR.LIB, 0); e < t.length; e++) {
                var i = t[e];
                this.addPlay(i)
            }
    }, t.prototype.addPlay = function (t) {
        var e = t[500];
        if (!this.scene.unitMap[e]) {
            var i = Role.create();
            i.saveToPool = !0, i.x = t.x, i.y = t.y, i.id = e;
            var o = t[501],
                n = t[502],
                a = (t[503], n),
                s = t[461] || null,
                r = t[459] || null,
                l = t[460] || null,
                h = t[466] || null;
            i.setName(o), this.scene.addUnit(i), i.setHalo(h), i.setBody(a), i.setWeapon(s), i.setHorse(r), i.setWing(l)
        }
    }, t
}();
__reflect(NewerSceneCtrl.prototype, "NewerSceneCtrl", ["ISceneCtrl"]);
var PetSceneCtrl = function () {
    function t() {
        this.isReady = !1
    }
    return t.prototype.onEnter = function (t) {
        var e = this.cfg = CFG_MAP.LIB[this.scene._curSceneid];
        this.scene.on(egret.Event.COMPLETE, this.onMapLoaded, this), this.scene.loadMap(e.res)
    }, t.prototype.onExit = function () {
        this.isReady;
        var t = GameGlobal;
        this.scene.off(egret.Event.COMPLETE, this.onMapLoaded, this), this.scene.removeAll(), t.layerMgr.delUIHideF(UIConst.QUEST, "scene"), t.layerMgr.delUIHideF(UIConst.LEFTUI, "scene"), t.layerMgr.delUIHideF(UIConst.RIGHTUI, "scene"), t.layerMgr.close(UIConst.SPECSCENEBAR), t.layerMgr.close(UIConst.BUZHUOPETBTL), t.modelPet.off(ModelPet.MSG_ADDCATCHPET, this.onAddPet), t.modelPet.off(ModelPet.MSG_DELCATCHPET, this.onDelPet)
    }, t.prototype.onMapLoaded = function () {
        var t = this;
        if (t.scene) {
            var e = GameGlobal;
            e.layerMgr.closePnlByType(1);
            var i = t.cfg;
            e.modelMap.setMapTitle(i.name);
            var o = t.mine = e.modelRole.voMine.sceneChars[0],
                n = this.scene.map.spaceNodes[this.scene.map.spaceNodes.length * Math.random() >> 0];
            o.x = n.cx, o.y = n.cy, o.force = 1;
            var a = e.modelRole.voMine.mainRole;
            o.hpmax = o.hp = a.hpmax, o.addMovePlug(), o.setName(o.name), this.scene.addUnit(o), o.stand(), e.modelRole.voMine.updatePetFollow(), VoFaBao.updateFollowFaBao();
            var s = new UserInputPlug;
            s.tar = o, o.addPlug(s), this.isReady = !0, SoundManager.getInstance().playBGM("default"), e.layerMgr.closePnlByType(1), e.layerMgr.addUIHideF(UIConst.QUEST, "scene"), e.layerMgr.addUIHideF(UIConst.LEFTUI, "scene"), e.layerMgr.addUIHideF(UIConst.RIGHTUI, "scene"), e.layerMgr.open(UIConst.SPECSCENEBAR);
            for (var r = e.modelPet.catchingPets, l = 0, h = r.length; h > l; l++) this.createOnePet(r[l]);
            e.modelPet.on(ModelPet.MSG_ADDCATCHPET, this.onAddPet, this), e.modelPet.on(ModelPet.MSG_DELCATCHPET, this.onDelPet, this)
        }
    }, t.prototype.update = function (t) {
        if (this.isReady) {
            var e = this.scene;
            e.updateUnits(t.dt);
            var i = e.getLifeMainRole();
            i && e.map.watch(i.x, i.y + 50)
        }
    }, t.prototype.onAddPet = function (t) {
        this.createOnePet(t)
    }, t.prototype.onDelPet = function (t) {
        var e = this.scene.getRole("cPet_" + t);
        e && this.scene.removeUnit(e)
    }, t.prototype.createOnePet = function (t) {
        var e = this,
            i = "cPet_" + t.uid;
        if (!e.scene.getRole(i)) {
            var o = SimpleNpc.create();
            o.initPet(t.sysid), o.id = i, o.va = t;
            var n = e.scene.map.spaceNodes[Math.random() * e.scene.map.spaceNodes.length >> 0];
            o.x = n.cx, o.y = n.cy, e.scene.addUnit(o)
        }
    }, t
}();
__reflect(PetSceneCtrl.prototype, "PetSceneCtrl", ["ISceneCtrl"]);
var SceneCtrl = function () {
    function t() {}
    return t.getCtrl = function (e) {
        var i = t;
        return e == i.T_TOWN ? new NewerSceneCtrl : e == i.T_PET ? new PetSceneCtrl : e == i.T_FISH ? new FishSceneCtrl : GuanQiaSceneCtrl.getIns()
    }, t.TOWNID = 1, t.PETID = 103, t.FISHID1 = 104, t.FISHID2 = 105, t.T_TOWN = 1, t.T_GUANQIA = 2, t.T_PET = 11, t.T_FISH = 12, t
}();
__reflect(SceneCtrl.prototype, "SceneCtrl");
var MapScene = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.units = [], e.unitMap = {}, e.itemInfoRCMap = {}, e.dsortt = 0, e.ctx = {}, e
    }
    return __extends(e, t), e.prototype.checkVisible = function () {
        var t = GameGlobal;
        this.map.fontLayer.$setVisible(!t.modelBattle.isInbattle && !t.modelPet.isCatching && !ViewUIBG.uiRestrit)
    }, e.prototype.getLifeMainRole = function () {
        var t = GameGlobal.modelRole.voMine;
        return t.sceneChars[0]
    }, e.prototype.correctRoleValidPos = function (t) {
        var e = this.map.getNode(t.x, t.y);
        if (!e) {
            var e = GameGlobal.mapScene.map.getRndSpaceNode();
            e ? (t.x = e.cx, t.y = e.cy) : (t.x = 100, t.y = 100)
        }
    }, e.prototype.init = function () {
        var t = this.map = new Mymap;
        t.touchEnabled = !0;
        t.addEventListener(egret.Event.COMPLETE, this.onMapc, this)
    }, e.prototype.changeMap = function (t, e) {
        void 0 === e && (e = null);
        var i = CFG_MAP.LIB[t];
        this._curSceneid = t;
        var o = SceneCtrl.getCtrl(i.t);
        o && (this._curSt = i.t, this.ctrl && (this.ctrl.onExit(), this.ctrl.scene = null), o.scene = this, o.onEnter(e), this.ctrl = o, GameGlobal.msgCenter.notify(GameGlobal.MSG_CHANGEMAP))
    }, e.prototype.loadMap = function (t) {
        ViewLoading.showLoading({
            id: "loadmap",
            label: "地图"
        }), this.map.setIDAA(t)
    }, e.prototype.onMapc = function (t) {
        for (var e in this.itemInfoRCMap) {
            var i = this.itemInfoRCMap[e];
            i.s && (i.s.length = 0)
        }
        var o = CFG_MAP.LIB[this._curSceneid];
        this.map.parseMapItems(this.map.getGroupInfo("default"), this.itemInfoRCMap), this.map.showMinibg(o.res), this.notify(egret.Event.COMPLETE), ViewLoading.hideLoading({
            id: "loadmap",
            label: "地图"
        })
    }, e.prototype.addUnit = function (t) {
        var e = this.units.indexOf(t); - 1 == e && (t.mapScene = this, this.units.push(t), t.onAdd(), this.unitMap[t.id] = t)
    }, e.prototype.removeUnit = function (t) {
        var e = this.units.indexOf(t); - 1 != e ? (t.onRemove(), t.mapScene = null, this.units[e] = null) : console.log("removeerror"), delete this.unitMap[t.id]
    }, e.prototype.removeAll = function () {
        for (var t = 0, e = this.units.length; e > t; t++) {
            var i = this.units[t];
            i && (i.onRemove(), i.mapScene = null)
        }
        this.units.length = 0;
        for (var o in this.unitMap) delete this.unitMap[o]
    }, e.prototype.advanceTime = function (t) {
        var e = this;
        e.ctx.dt = t, e.ctrl && e.ctrl.update(e.ctx)
    }, e.prototype.updateUnits = function (t) {
        for (var e = this, i = e.units, o = i.length, n = !1, a = 0; o > a; a++) {
            var s = i[a];
            if (s) {
                var r = s.advanceTime(t);
                r || this.removeUnit(s)
            } else n = !0
        }
        e.dsortt += t, e.dsortt >= 700 && (e.map.fontLayer.sortChild(), e.dsortt = 0), n && ArrayUtil.cleannull(this.units)
    }, e.prototype.dsort = function () {
        var t = this.units;
        t.sort(this.dsortfunc);
        for (var e = t.length, i = 0, o = this.map.fontLayer, n = 0; e > n; n++) {
            var a = t[n];
            if (a && a.view) {
                var s = o.getChildIndex(a.view);
                s != n && o.setChildIndex(a.view, i), i++
            }
        }
    }, e.prototype.dsortfunc = function (t, e) {
        var i;
        if (null == t) return 1;
        if (null == e) return -1;
        var i = t.y + t.depadd - (e.y + e.depadd);
        return i
    }, e.prototype.getRole = function (t) {
        return this.unitMap[t]
    }, e.prototype.getRoleBySysID = function (t) {
        for (var e = 0, i = this.units.length; i > e; e++) {
            var o = this.units[e];
            if (o && o.sysid && o.sysid == t) return o
        }
        return null
    }, e.prototype.getUnitByID = function (t) {
        for (var e = null, i = this.units, o = i.length, n = 0; o > n; n++) {
            var a = i[n];
            if (a && t == a.id) {
                e = a;
                break
            }
        }
        return e
    }, e.prototype.getTP = function (t) {
        for (var e = null, i = this.units, o = i.length, n = 0; o > n; n++) {
            var a = i[n];
            if (a && a.transMapID) {
                e = a;
                break
            }
        }
        return e
    }, e.prototype.shake = function () {
        if (!this.isShake) {
            this.isShake = !0, egret.Tween.get(this.map).to({
                y: this.map.y - 2
            }, 400, e.SHAKEEASE).call(this.onShaked, this)
        }
    }, e.prototype.onShaked = function () {
        this.isShake = !1, this.map.y = 35
    }, e.SHAKEEASE = function (t) {
        var e, i = 2 * t % 1;
        return e = Math.sin(i * Math.PI * 2)
    }, e.addGlobalObj = function (t, e) {
        var i = this.globalUnits[e];
        t.sceneid = e, i || (i = this.globalUnits[e] = []), i.push(t);
        var o = GameGlobal.mapScene;
        o && !o.map.isLoading && o.map.id == e && o.addUnit(t)
    }, e.getGlobalObj = function (t) {
        for (var e in this.globalUnits)
            for (var i = this.globalUnits[e], o = 0, n = i.length; n > o; o++)
                if (i[o].id == t) return i[o];
        return null
    }, e.delGlobalObjById = function (t) {
        var e = this.getGlobalObj(t);
        e && this.delGlobalObj(e, e.sceneid)
    }, e.delGlobalObj = function (t, e) {
        var i = this.globalUnits[e];
        if (i) {
            var o = i.indexOf(t);
            o >= 0 && i.splice(o, 1), 0 == i.length && delete this.globalUnits[e]
        }
        t.mapScene && (t.sceneid = 0, t.mapScene.removeUnit(t))
    }, e.prototype.onMapLoaded = function () {
        var t = e.globalUnits[this._curSceneid];
        if (t)
            for (var i = 0, o = t.length; o > i; i++) this.addUnit(t[i])
    }, e.globalUnits = {}, e
}(MsgCenter);
__reflect(MapScene.prototype, "MapScene");
var ModelMap = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.mapTitleText = "", e.guanQiaPlayers = [], e
    }
    return __extends(e, t), e.prototype.listenServ = function (e) {
        t.prototype.listenServ.call(this, e), e.regHand(622, this.GC_ENTERTOWN, this), e.regHand(626, this.GC_ENTERTOWNPER, this), e.regHand(628, this.GC_PLAYERLIST, this)
    }, e.prototype.setMapTitle = function (t) {
        this.mapTitleText = t, this.notify(e.MSG_MAPTITLECHANGE)
    }, e.prototype.CG_ENTRYTOWN = function (t, e) {
        var i = this.getBytes();
        i.writeShort(t), i.writeShort(e), this.sendSocket(621, i)
    }, e.prototype.CG_EXITTOWN = function () {
        var t = this.getBytes();
        this.sendSocket(625, t)
    }, e.prototype.CG_GUANQIPLAYERS = function () {
        var t = this.getBytes();
        this.sendSocket(627, t)
    }, e.prototype.GC_ENTERTOWN = function (t, e) {
        var i = e.readByte();
        if (1 == i) {
            for (var o = [], n = e.readShort(), a = 0; n > a; a++) {
                var s = e.readUTF();
                o.push(JSON.parse(s))
            }
            t.onNearPlayers(o)
        }
    }, e.prototype.GC_ENTERTOWNPER = function (t, e) {
        var i = (e.readLong(), e.readUTF()),
            o = JSON.parse(i);
        t.onNearPlayers(o)
    }, e.prototype.GC_PLAYERLIST = function (t, i) {
        t.guanQiaPlayers.length = 0;
        for (var o = i.readShort(), n = 0; o > n; n++) {
            var a = new VoPlayer;
            a.id = i.readLong(), a.job = a.sex = i.readByte(), a.name = i.readUTF(), a.bodyModID = i.readInt(), a.bodyModID || (a.bodyModID = a.sex), a.weaponModID = i.readInt(), a.horseModID = i.readInt(), a.wingModID = i.readInt(), a.followPetID = i.readInt(), a.title = i.readInt(), t.guanQiaPlayers.push(a)
        }
        t.notify(e.MSG_NEARPLAYERS)
    }, e.prototype.onNearPlayers = function (t) {
        this.notify(e.MSG_NEARPLAYERS, t)
    }, e.prototype.onNearPlayer = function (t) {
        this.notify(e.MSG_NEARPLAYERS, t)
    }, e.MSG_NEARPLAYERS = "MSG_NEARPLAYERS", e.MSG_MAPTITLECHANGE = "w", e
}(BaseModel);
__reflect(ModelMap.prototype, "ModelMap");
var GlobalAi = function () {
    function t() {}
    return t.attackLockSysRole = function (e) {
        if (!e.busyFlag && !e.deadFlag) {
            var i = e.mapScene.getRoleBySysID(e.ai_lockSysID);
            if (i) t.isNearRole(e, i, 100) ? (e.move_st && e.stand(), e.busyFlag || t.dispatchBestSkillTar(e, i)) : e.busyFlag || e.move_st || e.moveTo(i.x, i.y);
            else if (e.ai_distx) {
                var o = t.isNearXY(e.x, e.y, e.ai_distx, e.ai_disty, e.ai_attackFar);
                if (o && !e.busyFlag) return !0;
                e.move_st || e.moveTo(e.ai_distx, e.ai_disty)
            }
        }
    }, t.isNearRole = function (t, e, i) {
        var o = MoveUtil.dist(t.x, t.y, e.x, e.y),
            n = i * i >= o;
        return n
    }, t.isNearXY = function (t, e, i, o, n) {
        var a = MoveUtil.dist(t, e, i, o),
            s = n * n >= a;
        return s
    }, t.moveTo = function (t, e, i, o) {
        if (void 0 === o && (o = 50), o > 0) {
            var n = e - o + Math.random() * o * 2 >> 0,
                a = i - o + Math.random() * o * 2 >> 0,
                s = t.mapScene.map.getNode(n, a);
            s && s.space && (e = n, i = a)
        }
        t.mapScene.map.searchPath(t.x, t.y, e, i);
        var r = t.mapScene.map.getLastPath();
        r || (r = [i, e]), t.onEvent(Role.UEVENT_ACCPATH, r)
    }, t.dispatchBestSkillTar = function (t, e) {
        var i = SkillSelecter.getBeskill(t);
        if (i) {
            t.ai_skillTar = e;
            var o = SkillStyle.getStyle(i.style);
            o && (o.vo_skill = i, i.enterCool(), o.role = t, o.target = e, t.addPlug(o))
        }
    }, t.interactRole = function (e, i) {
        return void 0 === i && (i = 100), e.ai_moveTarget ? e.ai_moveTarget && t.isNearRole(e, e.ai_moveTarget, i) ? (e.interaction(e.ai_moveTarget), e.stand(), !0) : void(e.busyFlag || e.move_st || (e.moveTo(e.ai_moveTarget.x, e.ai_moveTarget.y), e.ai_moveTarget = e.ai_moveTarget)) : !0
    }, t.getNearestEmeny = function (t, e) {
        void 0 === e && (e = 1e6);
        for (var i, o = t.force, n = t.mapScene.units, a = n.length, s = 999999999, r = e * e, l = 0; a > l; l++) {
            var h = n[l];
            if (h && h.force && h.force != o && h.hp > 0) {
                var c = MoveUtil.dist(h.x, h.y, t.x, t.y);
                r >= c && s > c && (i = h, s = c)
            }
        }
        return i
    }, t.attackAnyEnemy = function (e, i) {
        if (void 0 === i && (i = 1e6), !(e.busyFlag || e._act > 1)) {
            if (!e.ai_moveTarget || !e.ai_moveTarget.mapScene || e.ai_moveTarget.hp <= 0) {
                var o = t.getNearestEmeny(e, i);
                e.ai_moveTarget = o
            }
            if (!e.ai_moveTarget) return !0;
            var n = t.isNearRole(e, e.ai_moveTarget, e.ai_attackFar);
            if (n)
                if (e.move_st) {
                    var a = e.mapScene.map.getNode(e.x, e.y);
                    a && a.space && (e.stand(), t.dispatchBestSkillTar(e, e.ai_moveTarget))
                } else t.dispatchBestSkillTar(e, e.ai_moveTarget);
            else e.move_st || e.busyFlag || t.moveTo(e, e.ai_moveTarget.x, e.ai_moveTarget.y)
        }
    }, t
}();
__reflect(GlobalAi.prototype, "GlobalAi");
var ArrayUtil = function () {
    function t() {}
    return t.cleannull = function (t) {
        for (var e = t.length, i = 0, o = 0, n = 0; e - i > n; n++) {
            var a = t[n];
            if (!a) {
                (0 == n || n > o + i) && i++, o = n;
                for (var s = n + i; e > s; s++) {
                    if (t[s]) {
                        t[n] = t[s], t[s] = null;
                        break
                    }
                    i++
                }
            }
        }
        t.length = e - i
    }, t.caculateLen = function (t) {
        for (var e = 0, i = t.length - 1; i >= 0; i--) t[i] && e++;
        return e
    }, t.insert = function (t, e, i) {
        for (var o = t.length; o > i; o--) t[o] = t[o - 1];
        t[i] = e
    }, t.insertAtNull = function (t, e) {
        for (var i = 0, o = t.length; o > i; i++)
            if (null == !t[i]) return t[i] = e, o;
        return t.push(e)
    }, t.getItem = function (t, e, i) {
        for (var o = t.length, n = 0; o > n; n++)
            if (t[n][e] == i) return t[n];
        return null
    }, t.getItemMap = function (t, e, i) {
        for (var o in t)
            if (t[o][e] == i) return t[o];
        return null
    }, t.getDefault = function (e) {
        if (null == egret.localStorage.getItem(t.LOGINSEL)) return e;
        var i = egret.localStorage.getItem(t.LOGINSEL);
        return JSON.parse(i)
    }, t.moveItem = function (t, e, i) {
        var o = t.indexOf(e);
        o >= 0 ? this.swapIndex(t, o, i) : t.splice(i, i)
    }, t.swapIndex = function (t, e, i) {
        var o = t[e];
        t[e] = t[i], t[i] = o
    }, t.swapItem = function (t, e, i) {
        var o = t.indexOf(e),
            n = t.indexOf(i);
        o >= 0 && n >= 0 && this.swapIndex(t, o, n)
    }, t.removeItem = function (t, e) {
        var i = t.indexOf(e); - 1 != i && t.splice(i, 1)
    }, t.LOGINSEL = "loginsel", t
}();
__reflect(ArrayUtil.prototype, "ArrayUtil");
var Color = function () {
    function t() {}
    return t.getDisabled = function () {
        return this.DISABLED || (this.DISABLED = [new egret.ColorMatrixFilter([.3086, .6094, .082, 0, 0, .3086, .6094, .082, 0, 0, .3086, .6094, .082, 0, 0, 0, 0, 0, 1, 0])]), this.DISABLED
    }, t.getRedFilters = function () {
        return this.REDCOLOR || (this.REDCOLOR = [new egret.ColorMatrixFilter([1, 0, 0, .04, 0, 0, 1, 0, -.04, 0, 0, 0, 1, -.04, 0, 0, 0, 0, 1, 0])]), this.REDCOLOR
    }, t.getColorShoalFilters = function () {
        return this.SHOLACOLOR || (this.SHOLACOLOR = [new egret.ColorMatrixFilter([1, 0, 0, .3, 0, 0, 1, 0, .3, 0, 0, 0, 1, .3, 0, 0, 0, 0, 1, 0])]), this.SHOLACOLOR
    }, t.getColorHeavyFilters = function () {
        return this.SHOLACOLOR || (this.SHOLACOLOR = [new egret.ColorMatrixFilter([1, 0, 0, -.3, 0, 0, 1, 0, -.3, 0, 0, 0, 1, -.3, 0, 0, 0, 0, 1, 0])]), this.SHOLACOLOR
    }, t.getColorGlodenFilters = function () {
        return this.GLODENCOLOR || (this.GLODENCOLOR = [new egret.ColorMatrixFilter([1, 0, 0, .8, 0, 0, 1, 0, .8, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0])]), this.GLODENCOLOR
    }, t.getColorInt = function (e) {
        var i = 16777215;
        return t.QUALITYCOLOR.length > e && (i = t.QUALITYCOLOR[e]), i
    }, t.getColorStr = function (e) {
        var i = "#FFFFFF";
        return t.QUALITYCOLORH.length > e && (i = t.QUALITYCOLORH[e]), i
    }, t.getColorByJob = function (t) {
        switch (t) {
            case 1:
                return 3656191;
            case 2:
                return 16750848
        }
    }, t.UIBLACKTEXT = 5581328, t.UIBLACKTEXT_STR = "#3E1C01", t.UITEXT = 8144896, t.UITEXT_STR = "#7C4800", t.UIGREEN = 3915088, t.UIGREEN_STR = "#3BBD50", t.UIGREEN2 = 683264, t.UIGREEN2_STR = "#0A6D00", t.UIBLUE = 694015, t.UIBLUE_STR = "#0A96FF", t.UIORANGE = 16412170, t.UIORANGE_STR = "#FA6E0A", t.UIRED = 15610675, t.UIRED_STR = "#DB2C03", t.UIGREY = 6710886, t.UIGREY_STR = "#666666", t.BLACKBORDER = [new egret.GlowFilter(0, 1, 1, 1)], t.WH = 16777215, t.WH_STR = "#FFFFFF", t.GR = 303107, t.GR_STR = "#04A003", t.BL = 144009, t.BL_STR = "#3ea3dd", t.PU = 10966952, t.PU_STR = "#A757A8", t.OR = 15620866, t.OR_STR = "#EE5B02", t.RE = 16515072, t.RE_STR = "#CC0000", t.QUALITYCOLOR = [16777215, 16777215, 65280, 3656191, 16711935, 16750848, 16711680, 16711680, 16711680], t.QUALITYCOLORH = ["#FFFFFF", "#FFFFFF", "#00FF00", "#037c9ff", "#FF00FF", "#FF9900", "#FF0000", "#FF0000", "#FF0000"], t
}();
__reflect(Color.prototype, "Color");
var ConfigHelp = function () {
    function t() {}
    return t.getAttrText = function (t, e, i) {
        void 0 === e && (e = "\n"), void 0 === i && (i = "{0}+ {1}");
        for (var o, n = 0, a = t.length; a > n; n++) {
            var s = this.getPerAttrText(t[n], i);
            0 == n ? o = s : o += e + s
        }
        return o
    }, t.getPerAttrText = function (t, e) {
        void 0 === e && (e = "{0}+ {1}");
        var i = CFG_ATTR.LIB,
            o = i[t[0]],
            n = o.n;
        if (o.sb > 1) var a = t[1] / (o.sb / 100) + "%";
        else a = t[1];
        return Lang.reTxt(e, n, a)
    }, t.addServAwardText = function (t) {
        for (var e = t.readShort(), i = CFG_Item.LIB, o = CFG_Equip.LIB, n = 0; e > n; n++) {
            var a = t.readByte(),
                s = t.readInt(),
                r = t.readInt(),
                l = null;
            if (1 == a) {
                var h = i[s].name;
                l = IconUtil.getIconUrl(i[s].icon)
            } else if (2 == a) {
                if (!o[s]) {
                    ViewText.text("ERROR EQUIP:id=" + s);
                    continue
                }
                l = IconUtil.getIconUrl(o[s].ico);
                var c = ViewItemFloatTip.checkShowEquipID(s);
                if (!c) var h = o[s].n
            } else h = CFG_ATTR.LIB[a].n, l = IconUtil.getIconUrl(CFG_ATTR.LIB[a].ICON);
            var p = Lang.reTxt("获得{0}*{1}", h, r);
            ViewText.iconText(l, p)
        }
    }, t.ITEMSORT = function (t, e) {
        var i = CFG_ATTR.LIB;
        return i[t.type].srt - i[e.type].srt
    }, t.parseServItems = function (t) {
        for (var e = t.readShort(), i = (CFG_Item.LIB, CFG_Equip.LIB, []), o = 0; e > o; o++) {
            var n = t.readByte(),
                a = t.readInt(),
                s = t.readInt();
            if (1 == n) {
                var r = VoItem.create();
                r.count = s, r.init(a), i.push(r)
            } else if (2 == n) {
                var l = VoEquip.create();
                l.init(a), l.updateStr(), i.push(l)
            } else if (3 == n) {
                var h = VoFuWen.create();
                h.init(a), i.push(h)
            } else {
                var c = VoCurrency.create();
                c.count = s, c.init(n), i.push(c)
            }
        }
        return i
    }, t.makeVoList = function (t, e) {
        var i = [];
        if (!t) return i;
        for (var o = t.split(";"), n = 0, a = o.length; a > n; n++) {
            var s = o[n].split(","),
                r = parseInt(s[0]),
                l = parseInt(s[1]),
                h = 0,
                c = null;
            if (e && (c = e[n]), s.length >= 3 && (h = parseInt(s[2])), 1 == r) {
                var p = VoItem.create();
                p.init(l), p.count = h, p.describe = c, i.push(p)
            } else if (2 == r) {
                var u = VoEquip.create();
                u.init(l), u.count = h, u.describe = c, i.push(u)
            } else if (3 == r) {
                var d = VoFuWen.create();
                d.init(l), d.count = h, d.describe = c, i.push(d)
            } else if (0 == r) {
                var f = PicGridVo.create();
                f.describe = c, f.init(l), i.push(f)
            } else if (4 == r) {
                var g = Vo_Skill.create(l, 1);
                g.describe = c, i.push(g)
            } else {
                var m = VoCurrency.create();
                m.describe = c, m.init(r), m.count = h, i.push(m)
            }
        }
        return i
    }, t.makeVoListByArr = function (t) {
        for (var e = [], i = 0, o = t.length; o > i; i++) {
            var n = t[i];
            e.push(this.makeVoByArr(n))
        }
        return e
    }, t.makeVoByArr = function (t) {
        var e, i = t[0],
            o = t[1],
            n = 0;
        if (t.length >= 3 && (n = t[2]), 1 == i) {
            var a = VoItem.create();
            a.init(o), a.count = n, e = a
        } else if (2 == i) {
            var s = VoEquip.create();
            s.init(o), s.count = n, e = s
        } else if (3 == i) {
            var r = VoFuWen.create();
            r.init(o), r.count = n, e = r
        } else if (0 == i) {
            var l = PicGridVo.create();
            l.init(o), e = l
        } else if (4 == i) {
            var h = Vo_Skill.create(o, 1);
            e = h
        } else {
            var c = VoCurrency.create();
            c.init(i), c.count = n, c.quality = 1, e = c
        }
        return e
    }, t.makeTypeVoList = function (t) {
        for (var e = [], i = t.split(","), o = 0, n = i.length; n > o; o++) {
            var a = parseInt(i[o]),
                s = CFG_Item.LIB[a],
                r = CFG_Equip.LIB[a];
            if (s) {
                var l = VoItem.create();
                l.init(a), l.count = 0, e.push(l)
            } else if (r) {
                var h = VoEquip.create();
                h.init(a), h.count = 0, e.push(h)
            } else {
                var c = VoCurrency.create();
                c.init(a), c.count = 0, e.push(c)
            }
        }
        return e
    }, t.getToolTextByInt = function (t, e, i, o, n) {
        void 0 === o && (o = !1), void 0 === n && (n = "{0}");
        var a, s;
        switch (t) {
            case 1:
                var r = CFG_Item.LIB[e];
                r && (a = r.name, s = r.quality);
                break;
            case 2:
                var l = CFG_Equip.LIB[e];
                l && (a = l.n, s = l.q);
                break;
            default:
                var h = CFG_ATTR.LIB[t];
                h && (a = h.n, s = 1)
        }
        if (a) {
            var c = Lang.reTxt(n, a, i);
            return o && (c = HtmlUtil.fontNoSize(c, Color.getColorStr(s))), c
        }
        return "error:" + t + "," + e
    }, t.getToolText = function (t, e) {
        void 0 === e && (e = !1);
        var i = t[0],
            o = t[1],
            n = t[2];
        return this.getToolTextByInt(i, o, n)
    }, t.getNumText = function (t) {
        if (t > 1e8) return (t / 1e8).toFixed(1) + "亿";
        if (t > 1e4) {
            t = t / 1e3 >> 0;
            var e = t % 10;
            return t = t / 10 >> 0, e > 0 ? t + "." + e + "万" : t + "万"
        }
        return t.toString()
    }, t.checkEnough1 = function (t, e) {
        if (void 0 === e && (e = !1), !t) return !1;
        var i, o, n = t[0],
            a = t[1],
            s = t[2];
        if (1 == n) {
            if (i = GameGlobal.modelBag.getItemCount(a) >= s, e) {
                var r = CFG_Item.LIB[a];
                if (r) var o = r.name
            }
        } else if (2 == n) i = !1;
        else {
            var l = GameGlobal.modelRole.voMine;
            31 == n ? i = l.yinliang >= s : 32 == n ? i = l.bYuanbao >= s : 33 == n ? (i = l.yuanbao >= s, e && !i && setTimeout(function () {
                platform.askOpenRecharge()
            }, 500)) : i = !1, o = CFG_ATTR.LIB[n].n
        }
        return !i && e && o && ViewText.text(o + "不足"), i
    }, t.caculateStrByIntArr = function (t) {
        for (var e = 0, i = CFG_ATTR.LIB, o = 0, n = t.length; n > o; o++) {
            var a = t[o][0],
                s = t[o][1],
                r = i[a].xishu;
            r && (e += s * r)
        }
        return e = e / 1e3 >> 0
    }, t.makeStrGrids = function (e, i, o, n, a, s, r, l, h, c) {
        void 0 === s && (s = !0), void 0 === r && (r = 10), void 0 === l && (l = 1), void 0 === h && (h = 0), void 0 === c && (c = null);
        var p;
        p = e ? t.makeVoList(e) : Util.getTempArr(), this.makeVoGrids(p, i, o, n, a, s, r, l, h, c)
    }, t.makeDescribeGrids = function (e, i, o, n, a, s, r, l, h, c, p) {
        void 0 === r && (r = !0), void 0 === l && (l = 10), void 0 === h && (h = 1), void 0 === c && (c = 0), void 0 === p && (p = null);
        var u;
        u = e ? t.makeVoList(e, i) : Util.getTempArr(), this.makeVoGrids(u, o, n, a, s, r, l, h, c, p)
    }, t.makeVoGrids = function (t, e, i, o, n, a, s, r, l, h) {
        void 0 === a && (a = !0), void 0 === s && (s = 10), void 0 === r && (r = 1), void 0 === l && (l = 0), void 0 === h && (h = null), e || (e = []);
        var c = 0 == (1 & l),
            p = 2 & l,
            u = 4 & l;
        u = 4;
        for (var d = t ? t.length : 0, f = 0; d > f; f++) {
            var g = t[f],
                m = e[f];
            if (m) n.$doAddChild(m, n.$children.length, !1), m.setName(null);
            else {
                m = e[f] = ViewGrid.create(), n.$doAddChild(m, n.$children.length, !1), e[f] = m;
                h && null != h.showCount ? h.showCount : !0
            }
            m._isShowEff = c, a && m.enableTip(), u ? m.setShowCount(!0) : m.setShowCount(!1), g.describe && m.setDescribe(g.describe), p ? m.setName(g.name) : m.setName(null), m.$setX(i + 90 * f * r + f * s * r), m.$setY(o), m.data = g, m.$setScaleX(r), m.$setScaleY(r), m.isShowEff(!0)
        }
        for (var y = e.length; y > f; f++) {
            var m = e[f],
                v = m.$parent.$children.indexOf(m);
            m.parent.$doRemoveChild(v, !1), m.$setScaleX(1), m.$setScaleY(1), m.dispose(), m.isShowEff(!1)
        }
        e.length = d
    }, t.getRoleAttrText = function (t, e, i) {
        void 0 === i && (i = null);
        for (var o, n = 0, a = t.length; a > n; n++) {
            var s = this.getRoleAttrTermText(t[n], i);
            0 == n ? o = s : o += e + s
        }
        return o
    }, t.getRoleAttrTermText = function (t, e) {
        e || (e = "{0}{1}");
        var i = CFG_ATTR.LIB[t[0]],
            o = i.n,
            n = t[1];
        if (i.sb > 1 && (n = 100 * n / i.sb), n >= 0) var a = Lang.reTxt(e, o, "+" + n + (i.sb > 1 ? "%" : ""));
        else var a = Lang.reTxt(e, o, "" + n + (i.sb > 1 ? "%" : ""));
        return a
    }, t.clearGrids = function (t) {
        for (var e = t.length - 1; e >= 0; e--) {
            var i = t[e],
                o = i.$parent.$children.indexOf(i);
            i.parent.$doRemoveChild(o, !1), i.$setScaleX(1), i.$setScaleY(1), i.dispose(), i.isShowEff(!1)
        }
        t.length = 0
    }, t.makeToolByIds = function (t, e) {
        for (var i = Util.parseIntStr(e), o = 0, n = i.length; n > o; o++)
            if (1 == t) {
                var a = VoItem.create();
                a.init(i[o]), i[o] = a
            } return i
    }, t.costTxt = function (e, i) {
        void 0 === i && (i = "#3DBC05");
        var o;
        o = "string" == typeof e ? t.makeVoList(e)[0] : e;
        var n, a = GameGlobal.modelRole.voMine,
            s = GameGlobal.modelBag,
            r = 0,
            l = o.count;
        if (1 == o.type || 2 == o.type) r = s.getItemCount(o.id);
        else switch (o.type) {
            case 31:
                r = a.yinliang;
                break;
            case 32:
                r = a.bYuanbao;
                break;
            case 33:
                r = a.yuanbao
        }
        return n = r < o.count ? HtmlUtil.parse(HtmlUtil.color(t.getNumText(r) + "/" + t.getNumText(l), Color.RE_STR)) : HtmlUtil.parse(HtmlUtil.color(t.getNumText(r) + "/" + t.getNumText(l), i))
    }, t.createGridVo = function (t, e) {
        var i;
        switch (t) {
            case 1:
                i = new VoItem;
                break;
            case 2:
                i = new VoEquip;
                break;
            case 31:
            case 32:
            case 33:
            case 36:
                i = new VoCurrency
        }
        return i.init(e), i
    }, t
}();
__reflect(ConfigHelp.prototype, "ConfigHelp");
var DateUtil = function () {
    function t() {}
    return t.getSeverTime = function (t, e) {
        var i = new Date(t);
        i.setHours(i.getHours() + e);
        var o = i.getUTCHours() < 10 ? "0" + i.getUTCHours() : i.getUTCHours().toString(),
            n = i.getUTCMinutes() < 10 ? "0" + i.getUTCMinutes() : i.getUTCMinutes().toString(),
            a = i.getUTCSeconds() < 10 ? "0" + i.getUTCSeconds() : i.getUTCSeconds().toString();
        return o + ":" + n + ":" + a
    }, t.getSeverTime2 = function (t, e) {
        var i = new Date(t),
            o = i.getHours() < 10 ? "0" + i.getHours() : i.getHours().toString(),
            n = i.getMinutes() < 10 ? "0" + i.getMinutes() : i.getMinutes().toString(),
            a = i.getSeconds() < 10 ? "0" + i.getSeconds() : i.getSeconds().toString();
        return o + ":" + n + ":" + a
    }, t.getServerMS = function (t, e) {
        var i = new Date(t);
        i.setHours(i.getHours() + e);
        var o = i.getUTCMinutes() < 10 ? "0" + i.getUTCMinutes() : i.getUTCMinutes().toString(),
            n = i.getUTCSeconds() < 10 ? "0" + i.getUTCSeconds() : i.getUTCSeconds().toString();
        return o + ":" + n
    }, t.getServerHM = function (t, e) {
        var i = new Date(t);
        i.setHours(i.getHours() + e);
        var o = i.getUTCHours() < 10 ? "0" + i.getUTCHours() : i.getUTCHours().toString(),
            n = i.getUTCMinutes() < 10 ? "0" + i.getUTCMinutes() : i.getUTCMinutes().toString();
        return o + ":" + n
    }, t.decodeInt2String = function (t) {
        var e = t + "",
            i = e.slice(0, 4),
            o = e.slice(4, 6),
            n = e.slice(6, 8),
            a = e.slice(8, 10);
        return i + "-" + o + "-" + n + " " + a
    }, t.getUTCDate = function (t) {
        return t.setMinutes(t.getMinutes() - t.getTimezoneOffset()), t
    }, t.addYear = function (t, e) {
        return void 0 === e && (e = 0), t.setMonth(t.getMonth() + 12 * e), t
    }, t.addMonth = function (t, e) {
        return void 0 === e && (e = 0), t.setMonth(t.getMonth() + e), t
    }, t.addDay = function (t, e) {
        return void 0 === e && (e = 0), t.setDate(t.getDate() + e), t
    }, t.addHours = function (t, e) {
        return void 0 === e && (e = 0), t.setHours(t.getHours() + e), t
    }, t.addMinutes = function (t, e) {
        return void 0 === e && (e = 0), t.setMinutes(t.getMinutes() + e), t
    }, t.addSeconds = function (t, e) {
        return void 0 === e && (e = 0), t.setSeconds(t.getSeconds() + e), t
    }, t.format = function (t, e) {
        void 0 === e && (e = "YYYY-MM-DD");
        var i = new DateFormatter;
        return i.formatString = e, i.format(t)
    }, t.dateDiffer = function (t, e) {
        return t.getTime() - e.getTime()
    }, t.getDateBySeconds = function (t) {
        return ""
    }, t.getHMSBySecond = function (t, e) {
        void 0 === e && (e = null), null == e && (e = "时分秒");
        var i = t / 3600 >> 0,
            o = t % 3600 / 60 >> 0,
            n = t % 3600 % 60 >> 0,
            a = "";
        return i > 0 && (a = i + e.charAt(0)), (o > 0 || i > 0) && (a = a + o + e.charAt(1)), a = a + n + e.charAt(2)
    }, t.getHMBySecond1 = function (t, e) {
        void 0 === e && (e = "时分");
        var i = t % 60;
        i > 0 && (t = t - i + 60);
        var o, n = t / 3600,
            a = t % 3600 / 60;
        return o = n >= 10 ? n.toString() + e.charAt(0) : "0" + n.toString() + e.charAt(0), o += a >= 10 ? a.toString() + e.charAt(1) : "0" + a.toString() + e.charAt(1)
    }, t.getHMSBySecond2 = function (t, e) {
        void 0 === e && (e = "::");
        var i, o = Math.floor(t / 3600),
            n = Math.floor(t % 3600 / 60),
            a = t % 3600 % 60;
        return i = o >= 10 ? o + e.charAt(0) : "0" + o + e.charAt(0), i += n >= 10 ? n + e.charAt(0) : "0" + n + e.charAt(0), i += a >= 10 ? a : "0" + a
    }, t.getMSBySec3 = function (e, i) {
        void 0 === i && (i = ":");
        var o = Math.floor(e / 60),
            n = Math.ceil(e % 60);
        return t.addZero(o + "") + i + t.addZero(n + "")
    }, t.getMSBySecond4 = function (t, e) {
        void 0 === e && (e = null);
        var i = "",
            o = Math.floor(t / 86400) + "";
        Number(o) >= 1 && (i = o + "天");
        var n = t % 86400;
        if (0 == n) return i;
        var a = Math.floor(n / 3600);
        i = i + a + "时";
        var s = Math.floor(n % 3600);
        if (0 == s) return i;
        var r = Math.floor(s / 60);
        i = i + r + "分";
        var l = Math.floor(s % 60);
        if (Number(o) > 0) return i;
        var h = l;
        return i = i + h + "秒"
    }, t.getHMBysecond = function (t, e) {
        void 0 === e && (e = ":");
        var i, o = "",
            n = 1e3 * Number(t),
            a = new Date(n);
        return o = this.addZero(String(a.getHours())) + e, i = String(a.getMinutes()), i.length < 2 && (i = "0" + i), o += i
    }, t.clone = function (t) {
        return new Date(t.getFullYear(), t.getMonth(), t.getDate(), t.getHours(), t.getMinutes(), t.getSeconds(), t.getMilliseconds())
    }, t.getDaysByMonth = function (t, e) {
        var i = new Array(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);
        return (t % 4 == 0 && t % 100 != 0 || t % 400 == 0) && (i[1] = 29), e > 11 && (e = 11), 0 > e && (e = 0), i[e]
    }, t.getYearMonthDay = function (t, e) {
        void 0 === e && (e = "--");
        var i, o = new Date(1e3 * t);
        return i = o.getDate() < 10 ? "0" + o.getDate().toString() : o.getDate().toString(), o.getFullYear().toString() + e.charAt(0) + (o.getMonth() + 1).toString() + e.charAt(1) + i + (e.charAt(2) ? e.charAt(2) : "")
    }, t.getYMDHM = function (t, e, i, o, n) {
        void 0 === e && (e = "-"), void 0 === i && (i = "-"), void 0 === o && (o = " "), void 0 === n && (n = ":");
        var a, s = new Date(1e3 * t);
        return a = s.getFullYear().toString(), a += e + (s.getMonth() + 1 < 10 ? "0" + (s.getMonth() + 1).toString() : (s.getMonth() + 1).toString()), a += i + (s.getDate() < 10 ? "0" + s.getDate().toString() : s.getDate().toString()), a += o + (s.getHours() < 10 ? "0" + s.getHours().toString() : s.getHours().toString()), a += n + (s.getMinutes() < 10 ? "0" + s.getMinutes().toString() : s.getMinutes().toString())
    }, t.getMDHM = function (t, e, i, o, n) {
        void 0 === e && (e = "-"), void 0 === i && (i = " "), void 0 === o && (o = ":"), void 0 === n && (n = "");
        var a, s = new Date(1e3 * t);
        return a = s.getMonth() + 1 < 10 ? "0" + (s.getMonth() + 1).toString() : (s.getMonth() + 1).toString(), a += e + (s.getDate() < 10 ? "0" + s.getDate().toString() : s.getDate().toString()), a += i + (s.getHours() < 10 ? "0" + s.getHours().toString() : s.getHours().toString()), a += o + (s.getMinutes() < 10 ? "0" + s.getMinutes().toString() : s.getMinutes().toString()), a += n
    }, t.getMDHM2 = function (t, e, i, o, n) {
        void 0 === e && (e = "-"), void 0 === i && (i = " "), void 0 === o && (o = ":"), void 0 === n && (n = "");
        var a, s = new Date(1e3 * t);
        return a = (s.getMonth() + 1).toString(), a += e + s.getDate().toString(), a += i + s.getHours().toString(), a += o + s.getMinutes().toString(), a += n
    }, t.getYMDHMS = function (t, e, i, o, n) {
        void 0 === e && (e = "-"), void 0 === i && (i = "-"), void 0 === o && (o = " "), void 0 === n && (n = ":");
        var a, s = new Date(1e3 * t);
        return a = s.getFullYear().toString(), a += e + (s.getMonth() + 1 < 10 ? "0" + (s.getMonth() + 1).toString() : (s.getMonth() + 1).toString()), a += i + (s.getDate() < 10 ? "0" + s.getDate().toString() : s.getDate().toString()), a += o + (s.getHours() < 10 ? "0" + s.getHours().toString() : s.getHours().toString()), a += n + (s.getMinutes() < 10 ? "0" + s.getMinutes().toString() : s.getMinutes().toString()), a += n + (s.getSeconds() < 10 ? "0" + s.getSeconds().toString() : s.getSeconds().toString())
    }, t.addZero = function (t) {
        return 1 == t.length && (t = "0" + t), t
    }, t.dateCompareFun = function (t, e) {
        return t.getTime() > e.getTime() ? 1 : t.getTime() < e.getTime() ? -1 : 0
    }, t.dateCompareFunDesc = function (t, e) {
        return t.getTime() > e.getTime() ? -1 : t.getTime() < e.getTime() ? 1 : 0
    }, t.getSubDate = function (t, e) {
        var i = this.clearHourse(t),
            o = this.clearHourse(e);
        return Math.abs(Math.round((i.getTime() - o.getTime()) / 864e5))
    }, t.clearHourse = function (t) {
        var e = new Date(t.getTime());
        return e.setHours(0), e.setMinutes(0), e.setSeconds(0), e
    }, t.getDayHourStr = function (t, e) {
        void 0 === e && (e = null);
        var i;
        0 > t && (t = 0);
        var o = t / 86400 >> 0,
            n = t % 86400 >> 0,
            a = n / 3600 >> 0;
        n = n % 3600 >> 0;
        var s = n / 60 >> 0;
        return 0 >= s && (s = 0), i = s + "分", (a > 0 || o > 0) && (i = a + "时" + i), o > 0 && (i = o + "天" + i), i
    }, t.isLessThan1Day = function (t) {
        var e = t / 86400 >> 0;
        return 1 >= e
    }, t.getHours = function (t) {
        var e = new Date(t);
        return e.getHours()
    }, t.getMin = function (t) {
        var e = new Date(t);
        return e.getMinutes()
    }, t
}();
__reflect(DateUtil.prototype, "DateUtil");
var DateFormatter = function () {
    function t() {}
    return t.prototype.DateFormatter = function () {}, Object.defineProperty(t.prototype, "formatString", {
        get: function () {
            return this._formatString
        },
        set: function (t) {
            t && (this._formatString = t)
        },
        enumerable: !0,
        configurable: !0
    }), t.prototype.format = function (t) {
        var e;
        return e
    }, t
}();
__reflect(DateFormatter.prototype, "DateFormatter");
var DateFormat;
! function (t) {
    t[t.H_M_S = 0] = "H_M_S", t[t.Y_M_D_H_M_S = 1] = "Y_M_D_H_M_S", t[t.M_S = 2] = "M_S", t[t.BD_BH_BM = 3] = "BD_BH_BM", t[t.MAX_UNIT = 4] = "MAX_UNIT"
}(DateFormat || (DateFormat = {}));
var DateUtils = function () {
    function t() {}
    return Object.defineProperty(t, "nowerTimeStamp_MS", {
        get: function () {
            return Date.now()
        },
        enumerable: !0,
        configurable: !0
    }), Object.defineProperty(t, "nowerTimeStamp_S", {
        get: function () {
            return Math.floor(Date.now() / 1e3)
        },
        enumerable: !0,
        configurable: !0
    }), t.getDate = function (t) {
        var e = new Date(t),
            i = e.getFullYear(),
            o = e.getMonth() + 1,
            n = e.getDate(),
            a = e.getHours(),
            s = e.getMinutes(),
            r = e.getSeconds();
        return {
            year: i,
            month: o,
            day: n,
            hours: a,
            minutes: s,
            seconds: r
        }
    }, t.getFormatByTimeStamp = function (t, e) {
        void 0 === e && (e = DateFormat.H_M_S);
        var i = new Date(t),
            o = i.getFullYear(),
            n = i.getMonth() + 1,
            a = i.getDay(),
            s = i.getHours() + "",
            r = i.getMinutes() + "",
            l = i.getSeconds() + "";
        1 == s.length && (s = "0" + s), 1 == r.length && (r = "0" + r), 1 == l.length && (l = "0" + l);
        var h;
        switch (e) {
            case DateFormat.H_M_S:
                h = s + ":" + r + ":" + l;
                break;
            case DateFormat.Y_M_D_H_M_S:
                h = o + "-" + n + "-" + a + " " + s + ":" + r + ":" + l;
                break;
            case DateFormat.M_S:
                h = r + ":" + l
        }
        return h
    }, t.getFormatBySecond = function (t, e) {
        void 0 === e && (e = DateFormat.H_M_S);
        var i = "";
        switch (e) {
            case DateFormat.H_M_S:
                i = this.getFormatBySecond1(t);
                break;
            case DateFormat.Y_M_D_H_M_S:
                i = this.getFormatBySecond2(t);
                break;
            case DateFormat.M_S:
                i = this.getFormatBySecond3(t);
                break;
            case DateFormat.BD_BH_BM:
                i = this.getFormatBySecond4(t);
                break;
            case DateFormat.MAX_UNIT:
                i = this.getFormatBySecond5(t)
        }
        return i
    }, t.getSurplusSecond = function (t, e) {
        var i = t.split(":"),
            o = parseInt(i[0]),
            n = parseInt(i[1]),
            a = parseInt(i[2]),
            s = e.split(":"),
            r = parseInt(s[0]),
            l = parseInt(s[1]),
            h = parseInt(s[2]),
            c = r - o,
            p = l - n,
            u = h - a,
            d = 3600 * c + 60 * p + u;
        return d
    }, t.getFormatBySecond1 = function (t) {
        void 0 === t && (t = 0);
        var e, i = Math.floor(t / 3600);
        e = 0 == i ? "00" : 10 > i ? "0" + i : "" + i;
        var o, n, a = Math.floor((t - 3600 * i) / 60),
            s = Math.floor((t - 3600 * i) % 60);
        return o = 0 == a ? "00" : 10 > a ? "0" + a : "" + a, n = 0 == s ? "00" : 10 > s ? "0" + s : "" + s, e + ":" + o + ":" + n
    }, t.getFormatBySecond2 = function (t) {
        var e = this.getDate(1e3 * t),
            i = e.year + "-" + e.month + "-" + e.day + " " + e.hours + ":" + e.minutes + ":" + e.seconds;
        return i
    }, t.getFormatBySecond3 = function (t) {
        void 0 === t && (t = 0);
        var e, i, o = Math.floor(t / 3600),
            n = Math.floor((t - 3600 * o) / 60),
            a = Math.floor((t - 3600 * o) % 60);
        return e = 0 == n ? "00" : 10 > n ? "0" + n : "" + n, i = 0 == a ? "00" : 10 > a ? "0" + a : "" + a, e + ":" + i
    }, t.getFormatBySecond4 = function (t) {
        var e = Math.floor(t / 3600);
        return e > 0 ? e > 24 ? Math.floor(e / 24) + "天前" : e + "小时前" : Math.floor(t / 60) + "分钟前"
    }, t.getFormatBySecond5 = function (t) {
        if (0 == t) return "0秒";
        var e, i = 86400,
            o = 3600,
            n = 60,
            a = Math.floor(t / i),
            s = Math.floor(t % i / o),
            r = Math.floor(t % o / n),
            l = t % n,
            h = [{
                second: a * i,
                num: a,
                str: "天"
            }, {
                second: s * o,
                num: s,
                str: "小时"
            }, {
                second: r * n,
                num: r,
                str: "分"
            }, {
                second: l,
                num: l,
                str: "秒"
            }],
            c = h.sort(function (t, e) {
                return e.second - t.second
            }),
            p = c[0],
            u = c[1],
            d = p.num,
            f = p.str,
            g = u.num,
            m = u.str;
        return e = 0 == g ? d + f : 10 > g ? d + f + "0" + g + m : d + f + g + m
    }, t
}();
__reflect(DateUtils.prototype, "DateUtils");
var DisplayUtil = function () {
    function t() {}
    return t.popBtnStyle = function (t) {
        try {
            t.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.startBtnPop, this)
        } catch (e) {
            console.log("popBtn = undefined")
        }
        return this
    }, t.removePopBtnStyle = function (t) {
        t && t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN, this.startBtnPop, this)
    }, t.startBtnPop = function (t) {
        SoundManager.getInstance().playLocalEff("click");
        var e = t.currentTarget;
        e.$setAnchorOffsetY(-3), e.$setAnchorOffsetX(-1), e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE, this.onRelese, this), e.addEventListener(egret.TouchEvent.TOUCH_END, this.onRelese, this)
    }, t.onRelese = function (t) {
        var e = t.currentTarget;
        e.$setAnchorOffsetY(0), e.$setAnchorOffsetX(0), e.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE, this.onRelese, this), e.removeEventListener(egret.TouchEvent.TOUCH_END, this.onRelese, this)
    }, t.remove = function (t) {
        if (t && t.$parent) {
            var e = t.$parent.$children.indexOf(t);
            e >= 0 && t.$parent.$doRemoveChild(e, !1)
        }
    }, t.addBy = function (t, e, i) {
        void 0 === i && (i = -1);
        var o = e.numChildren;
        (-1 == i || i > o) && (i = o);
        try {
            t.$parent != e ? e.$doAddChild(t, i, !1) : e.setChildIndex(t, i)
        } catch (n) {
            console.log("addBy error")
        }
    }, t.toBag = function (t) {}, t.imgToBg = function (t) {}, t.fillDataAC = function (t, e, i) {
        void 0 === i && (i = null), t.removeAll(), t.replaceAll(e), i && (i.viewport.scrollH = 0, i.viewport.scrollV = 0)
    }, t.resetScroller = function (t) {
        t.stopAnimation(), t.viewport.scrollH = 0, t.viewport.scrollV = 0
    }, t.getFirstIdx = function (t) {
        if (t.dataProvider) {
            var e = t.getChildAt(0);
            return t.dataProvider.getItemIndex(e.data)
        }
        return -1
    }, t.getLastIdx = function (t) {
        if (t.dataProvider) {
            var e = t.numChildren;
            if (e) {
                var i = t.getChildAt(e - 1);
                return t.dataProvider.getItemIndex(i.data)
            }
        }
        return -1
    }, t.toBottom = function (t) {
        var e = t.viewport.height,
            i = t.viewport.contentHeight;
        e > i ? t.viewport.scrollV = 0 : t.viewport.scrollV = i - e
    }, t.addBySort = function (t, e, i) {
        if (void 0 == t[i]) e.addChild(t);
        else
            for (var o, n = e.$children, a = n.length, s = 0; a > s; s++) {
                var r = n[s];
                if (r[i] > t[i]) {
                    o = s;
                    break
                }
            }
        e.$doAddChild(t, o, !1)
    }, t.watchTileVertIndex = function (t, e, i) {
        var o = t.verticalGap + t.rowHeight * i;
        e.validateNow();
        var n = e.viewport.contentHeight;
        o > n - e.viewport.height && (o = n - e.viewport.height), 0 > o && (o = 0), e.viewport.scrollV = o
    }, t.watchTileHIndex = function (t, e, i) {
        var o = t.verticalGap + t.rowHeight * i;
        e.validateNow();
        var n = e.viewport.contentWidth;
        o > n - e.viewport.width && (o = n - e.viewport.width), 0 > o && (o = 0), e.viewport.scrollH = o
    }, t
}();
__reflect(DisplayUtil.prototype, "DisplayUtil");
var FilterColors = function () {
    function t() {}
    return t.mat = [.3086, .6094, .082, 0, 0, .3086, .6094, .082, 0, 0, .3086, .6094, .082, 0, 0, 0, 0, 0, 1, 0], t.mat2 = [.3, .6, 0, 0, 0, .3, .6, 0, 0, 0, .3, .6, 0, 0, 0, 0, 0, 0, 1, 0], t.FilterGray = new egret.ColorMatrixFilter(t.mat2), t
}();
__reflect(FilterColors.prototype, "FilterColors");
var DropFilter = function () {
    function t() {}
    return t.mFightRoomTypeFilter = new egret.DropShadowFilter(4, 90, 16634002), t
}();
__reflect(DropFilter.prototype, "DropFilter");
var GlowFilterM = function () {
    function t() {}
    return t.mFightRoomTypeFilter = new egret.GlowFilter(16634002), t
}();
__reflect(GlowFilterM.prototype, "GlowFilterM");
var GlowFilterS = function () {
    function t() {}
    return t.mFightRoomTypeFilter = new egret.DropShadowFilter(2, 90, 16634002), t
}();
__reflect(GlowFilterS.prototype, "GlowFilterS");
var Formula = function () {
    function t() {}
    return t.caculateDmg = function (e, i, o) {
        var n = (t.getRestritionNumber(1, 1), .2 * Math.random() + .8, Math.max(1, e.att - i.pdef)),
            a = Math.random() <= .2;
        return a && (n = 2 * n), {
            sourceroleid: e.ci,
            value: n,
            isCrit: a
        }
    }, t.caculateRBattleDmg = function (t, e, i) {
        return null
    }, t.getRestritionNumber = function (t, e) {
        var i = 1;
        return i = 1
    }, t
}();
__reflect(Formula.prototype, "Formula");
var HtmlUtil = function () {
    function t() {}
    return t.underLine = function (e) {
        return t.parse("<u>" + e + "</u>")
    }, t.color = function (t, e) {
        return "<font color='" + e + "'>" + t + "</font>"
    }, t.link = function (t, e) {
        return "<link href='" + e + "'>" + t + "</link>"
    }, t.colorSize = function (t, e, i) {
        return "<font color='" + e + "' size='" + i + "'>" + t + "</font>"
    }, t.parse = function (e) {
        return t.HTMLPARSER.parser(e)
    }, t.createLink = function (t, e, i, o) {
        void 0 === e && (e = !0), void 0 === i && (i = "My"), void 0 === o && (o = "");
        var n = "";
        return e ? (n += "<u>", n += "<a href='event:" + i + "'>" + t + "</a>", n += "</u>") : n += "<a href='event:" + i + "'>" + t + "</a>", o && (n = "<font color='" + o + "'>" + n + "</font>"), n
    }, t.fontColorList = function (e, i) {
        for (var o = "", n = 0; n < e.length; n++) o += t.fontNoSize(e[n], i[n]);
        return t.HTMLPARSER.parser(o)
    }, t.fontNoSize = function (t, e) {
        return "<font color='" + e + "'>" + t + "</font>"
    }, t.fontSize = function (t, e) {
        return "<font size='" + e + "'>" + t + "</font>"
    }, t.HTMLPARSER = new egret.HtmlTextParser, t
}();
__reflect(HtmlUtil.prototype, "HtmlUtil");
var IconUtil = function () {
    function t() {}
    return t.getRoleHead = function (t) {
        var e;
        return e = 1 == t ? "resource/ui/rolepic/head_1_1.png" : "resource/ui/rolepic/head_2_2.png"
    }, t.getIconUrl = function (t) {
        return t + "_png"
    }, t.getIconUrlById = function (t) {
        var e = CFG_Item.LIB[t];
        return e ? e.icon + "_png" : void console.log("errorItemID:" + t)
    }, t.setIconSrc = function (t, e) {
        void 0 === e && (e = null);
        var i = t.source;
        if (i != e || !t.__setIconFlag__) {
            if (i != e && i && "string" == typeof i && -1 == i.indexOf("json.") && (this.imgUrls[i]--, 0 == this.imgUrls[i] && (-1 == this.destroyWaitList.indexOf(i) && this.destroyWaitList.push(i), 1 == this.destroyWaitList.length && GameGlobal.tick.addInterv(this.destoryImgTick, 15e3, this))), e && -1 == e.indexOf("json.")) {
                this.imgUrls[e] || (this.imgUrls[e] = 0), this.imgUrls[e]++;
                var o = this.destroyWaitList.indexOf(e);
                o >= 0 && this.destroyWaitList.splice(o, 1), e == i && (t.__setIconFlag__ || (t.source = null))
            }
            t.__setIconFlag__ = 1, t.source = e
        }
    }, t.destoryImgTick = function (e) {
        var i = t.destroyWaitList,
            o = i.length;
        if (o) {
            var n = i.shift();
            RES.destroyRes(n)
        }
        1 >= o && GameGlobal.tick.removeInterv(e.destoryImgTick, e)
    }, t.imgUrls = {}, t.destroyWaitList = [], t
}();
__reflect(IconUtil.prototype, "IconUtil");
var Lang = function () {
    function t() {}
    return t.getPattern = function (e) {
        var i = t._patternBuffer[e];
        if (null == i) {
            var o = "[{{]" + e.toString() + "[}}]";
            i = t._patternBuffer[e] = new RegExp(o, "g")
        }
        return i
    }, t.prototype.format = function (t) {}, t.reTxt = function (e) {
        for (var i = [], o = 1; o < arguments.length; o++) i[o - 1] = arguments[o];
        var n = i.length;
        if (0 == n) return e;
        for (var a = 0; n > a; a += 1) {
            var s = i[a];
            e = e.replace(t.getPattern(a), s)
        }
        return e
    }, t.reTxt2 = function (e, i) {
        for (var o = i.length, n = 0; o > n; n += 1) {
            var a = i[n];
            e = e.replace(t.getPattern(n), a)
        }
        return e
    }, t.reTxtMail = function (e, i) {
        for (var o = i.length, n = 1; o > n; n += 1) {
            var a = i[n];
            e = e.replace(t.getPattern(n - 1), a)
        }
        return e
    }, t._patternBuffer = [], t
}();
__reflect(Lang.prototype, "Lang");
var LFormat = function () {
    function t() {}
    return t.getInstance = function () {
        var e = this._instance || (this._instance = new t);
        return e
    }, t.prototype.read = function (e) {
        var i, o = e.readByte(),
            n = t;
        switch (o) {
            case n.NULL:
                i = null;
                break;
            case n.INT8:
                i = e.readByte();
                break;
            case n.INT16:
                i = e.readShort();
                break;
            case n.INT32:
                i = e.readInt();
                break;
            case n.INT64:
                i = e.readDouble();
                break;
            case n.BOOLEAN:
                i = e.readByte() ? !0 : !1;
                break;
            case n.UTF8:
                i = e.readUTF();
                break;
            case n.ARRAY:
                i = this.readArray(e);
                break;
            case n.MAP_BYTE_ANY:
                i = this.readByteMap(e);
                break;
            case n.MAP_SHORT_ANY:
                i = this.readShortMap(e);
                break;
            case n.MAP_INT_ANY:
                i = this.readIntMap(e);
                break;
            case n.MAP_LONG_ANY:
                i = this.readLongMap(e);
                break;
            case n.MAP_STR_ANY:
                i = this.readStrMap(e)
        }
        return i
    }, t.prototype.readStrMap = function (t) {
        for (var e = {}, i = t.readShort(), o = 0; i > o; o++) {
            var n = t.readUTF(),
                a = this.read(t);
            e[n] = a
        }
        return e
    }, t.prototype.readShortMap = function (t) {
        for (var e = {}, i = t.readShort(), o = 0; i > o; o++) {
            var n = t.readShort(),
                a = this.read(t);
            e[n] = a
        }
        return e
    }, t.prototype.readByteMap = function (t) {
        for (var e = {}, i = t.readShort(), o = 0; i > o; o++) {
            var n = t.readByte(),
                a = this.read(t);
            e[n] = a
        }
        return e
    }, t.prototype.readIntMap = function (t) {
        for (var e = {}, i = t.readShort(), o = 0; i > o; o++) {
            var n = t.readInt(),
                a = this.read(t);
            e[n] = a
        }
        return e
    }, t.prototype.readLongMap = function (t) {
        for (var e = {}, i = t.readShort(), o = 0; i > o; o++) {
            var n = t.readDouble(),
                a = this.read(t);
            e[n] = a
        }
        return e
    }, t.prototype.readArray = function (t) {
        for (var e = [], i = t.readShort(), o = 0; i > o; o++) {
            var n = this.read(t);
            e[o] = n
        }
        return e
    }, t.NULL = 0, t.INT8 = 1, t.INT16 = 2, t.INT32 = 3, t.INT64 = 4, t.BOOLEAN = 6, t.UTF8 = 20, t.ARRAY = 30, t.MAP_BYTE_ANY = 40, t.MAP_SHORT_ANY = 41, t.MAP_INT_ANY = 42, t.MAP_LONG_ANY = 43, t.MAP_STR_ANY = 44, t
}();
__reflect(LFormat.prototype, "LFormat");
var MathUtil = function () {
    function t() {}
    return t.rndInt = function (t, e) {
        var i = Math.random() * (e - t + 1) >> 0,
            o = t + i;
        return o > e && (o = e), o
    }, t.EASESIN05 = function (t) {
        if (t >= 1) var e = 0;
        else var e = Math.sin(t * Math.PI);
        return e
    }, t.HURTTRAINS = function (t) {
        var e;
        return e = 1 == t ? 0 : .25 >= t ? 4 * t : t >= .75 ? 4 * (1 - t) : 1
    }, t.floor2Fix = function (t) {
        return t = Math.floor(100 * t), t % 100 == 0 ? t / 100 : t % 10 == 0 ? (t / 100).toFixed(1) : (t / 100).toFixed(2)
    }, t
}();
__reflect(MathUtil.prototype, "MathUtil");
var MoveUtil = function () {
    function t() {}
    return t.getTempPoint = function (t, e) {
        var i = this.p00;
        return i.x = t, i.y = e, i
    }, t.getNextPoint = function (e, i, o, n, a, s) {
        void 0 === s && (s = 0);
        var r = o - e,
            l = n - i,
            h = Math.sqrt(r * r + l * l);
        if (s > h) return null;
        var c = Math.atan2(l, r);
        if (s > h - a) var p = o - Math.cos(c) * s,
            u = n - Math.sin(c) * s;
        else var p = e + Math.cos(c) * a,
            u = i + Math.sin(c) * a;
        var d = t.nextPointRet;
        return d.x = p, d.y = u, d
    }, t.dist = function (t, e, i, o) {
        var n = t - i,
            a = e - o,
            s = n * n + a * a;
        return s
    }, t.caculateWay = function (t, e, i, o) {
        var n = i - t,
            a = o - e,
            s = Math.atan2(a, n),
            r = (s + 2.625 * Math.PI) % (2 * Math.PI),
            l = Math.floor(r / (Math.PI / 4));
        return l
    }, t.distSqrt = function (t, e, i, o) {
        var n = t - i,
            a = e - o,
            s = Math.sqrt(n * n + a * a);
        return s
    }, t.nextPointRet = new egret.Point, t.p00 = new egret.Point, t
}();
__reflect(MoveUtil.prototype, "MoveUtil");
var PScriptExecuter = function () {
    function t() {
        this.curLine = 0, this.lines = [], this.asyncFlag = 0
    }
    return t.create = function () {
        var e = new t;
        return e
    }, t.prototype.parse = function (t) {
        t = t.replace(/\r/, "");
        for (var e = t.split(/[\n]/), i = 0, o = e.length; o > i; i++) {
            var n = e[i],
                a = n.split(/\:|_/);
            this.lines[i] = a
        }
        this.lines.length = o
    }, t.prototype.playStr = function (t) {
        this.parse(t), this.curLine = 0, this.asyncFlag = 0, GameGlobal.tick.addInterv(this.onTick, 1, this), this.execute()
    }, t.prototype.execute = function () {
        for (; !this.asyncFlag && GameGlobal.mapScene;) {
            var t = this.lines[this.curLine];
            if (!t) {
                this.exit();
                break
            }
            this.executeTerm(t), this.curLine++
        }
    }, t.prototype.executeTerm = function (t) {
        var e = t[0];
        this[e] && this[e].apply(this, t)
    }, t.prototype.exit = function () {
        GameGlobal.tick.removeInterv(this.onTick, this)
    }, t.prototype.onTick = function (t) {
        t.execute()
    }, t.prototype.onTimeout = function () {
        this.asyncFlag--, this.execute()
    }, t.prototype.jumpMap = function (t, e) {
        var i = parseInt(e);
        GameGlobal.mapScene.changeMap(i)
    }, t.prototype.wait = function (t, e) {
        var i = parseInt(e);
        this.asyncFlag++, egret.setTimeout(this.onTimeout, this, i)
    }, t.prototype.createNPC = function (t, e, i, o, n, a) {
        if (e = parseInt(e), !GameGlobal.mapScene || !GameGlobal.mapScene.getUnitByID(e)) {
            var s = SimpleNpc.create();
            s.x = parseInt(n), s.y = parseInt(a), s.initNpc(parseInt(i)), s.id = e;
            var r = parseInt(o);
            MapScene.addGlobalObj(s, r)
        }
    }, t.prototype.delNPC = function (t, e) {
        var e = e;
        MapScene.delGlobalObjById(e)
    }, t.prototype.waitUIClose = function (t, e) {
        var i = this;
        GameGlobal.layerMgr.isOpenView(e) && (i.asyncFlag++, GameGlobal.tick.addInterv(function o() {
            GameGlobal.layerMgr.isOpenView(e) || (i.asyncFlag--, GameGlobal.tick.removeInterv(o))
        }, 50))
    }, t.prototype.dlg = function (t, e, i, o, n, a) {
        i = parseInt(i), a = parseInt(a), this.asyncFlag++, GameGlobal.modelQuest.on(ModelQuest.MSG_DLGCOMP, this.onDlgComp, this);
        var s = GameGlobal.layerMgr,
            r = s.isOpenView(UIConst.QUESTDLG);
        r || s.open(UIConst.QUESTDLG);
        var l = s.getView(UIConst.QUESTDLG);
        l.showInfo(e, i, o, n, a)
    }, t.prototype.openUI = function (t, e) {
        if ("shouChongTip" == e) {
            var i = VoSCAwards.getById(1);
            if (i && i.state <= 2) {
                GameGlobal.layerMgr.getView(UIConst.LEFTUI)
            }
        } else GameGlobal.layerMgr.openX(e)
    }, t.prototype.onDlgComp = function () {
        this.asyncFlag--, GameGlobal.modelQuest.off(ModelQuest.MSG_DLGCOMP, this.onDlgComp, this), this.execute()
    }, t.prototype.hideDlg = function () {
        GameGlobal.layerMgr.close(UIConst.QUESTDLG)
    }, t.prototype.reciveQuest = function () {
        var t = GameGlobal.modelQuest.getCurVo();
        t && 0 == t.state && (this.asyncFlag++, GameGlobal.modelQuest.CG_RECIVEQUEST(t.id), GameGlobal.modelQuest.on(ModelQuest.MSG_QUESTCHANGE, this.onQuestSt, this))
    }, t.prototype.commitQuest = function () {
        var t = GameGlobal.modelQuest.getCurVo();
        t && 2 == t.state && (this.asyncFlag++, GameGlobal.modelQuest.CG_COMMITQUEST(t.id), GameGlobal.modelQuest.on(ModelQuest.MSG_QUESTCHANGE, this.onQuestSt, this))
    }, t.prototype.maskToQuest = function (t, e) {
        return
    }, t.prototype.closeTypeUI = function () {
        GameGlobal.layerMgr.closePnlByType(1)
    }, t.prototype.guideQuest = function () {
        var t = GameGlobal.layerMgr.getView(UIConst.QUEST);
        if (t) {
            GameGlobal.stage;
            QuestGuideArrow.getIns().centerToTarget(t)
        }
    }, t.prototype.waitQuestOff = function (t, e) {
        var i = parseInt(e),
            o = this;
        GameGlobal.modelQuest.getCurVo().id == i && (o.asyncFlag++, GameGlobal.modelQuest.on(ModelQuest.MSG_QUESTCHANGE, function () {
            GameGlobal.modelQuest.getCurVo().id != i && (o.asyncFlag--, o.execute())
        }))
    }, t.prototype.onQuestSt = function () {
        this.asyncFlag--, GameGlobal.modelQuest.off(ModelQuest.MSG_QUESTCHANGE, this.onQuestSt, this), this.execute()
    }, t.prototype.addQuestHide = function () {
        QuestGuideArrow.hide("pscrit")
    }, t.prototype.delQuestHide = function () {
        QuestGuideArrow.show("pscrit")
    }, t.prototype.waitQuestClick = function () {
        var t = this;
        t.asyncFlag--, GameGlobal.modelQuest.once(ModelQuest.MSG_VIEWCLICK, function () {
            t.asyncFlag++, t.execute()
        }, t)
    }, t.prototype.autoQuest = function () {
        GameGlobal.modelQuest.autoMainQuest()
    }, t.prototype.reGuide = function () {
        QuestGuideArrow.getIns().centerToTarget()
    }, t
}();
__reflect(PScriptExecuter.prototype, "PScriptExecuter");
var ScrollMove = function () {
    function t(t, e, i, o) {
        this.h_v = "width", this.isTween = !1, this.btnL = t, this.btnR = e, this.container = i, o || (o = "width"), this.h_v = o, this.btnL.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this), this.btnR.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHand, this)
    }
    return t.prototype.onHand = function (t) {
        var e = this;
        if (!e.isTween) {
            if ("width" == this.h_v) {
                if (this.container.contentWidth <= this.container.width) return
            } else if (this.container.contentHeight <= this.container.height) return;
            e.isTween = !0;
            var i = this.container.numElements;
            if ("width" == this.h_v) var o = this.container.contentWidth - this.container.width,
                n = this.container.contentWidth / i,
                a = this.container.scrollH;
            else o = this.container.contentHeight - this.container.height, n = this.container.contentHeight / i, a = this.container.scrollV;
            switch (t.currentTarget) {
                case e.btnL:
                    a += n;
                    break;
                case e.btnR:
                    a -= n
            }
            a = Math.min(Math.max(0, a), o), "width" == this.h_v ? egret.Tween.get(this.container).to({
                scrollH: a
            }, 500).call(function () {
                e.isTween = !1, ModelXSFB.isMsgScroll && GameGlobal.modelXSFB.notify(ModelXSFB.MSG_SCROLLER)
            }) : egret.Tween.get(this.container).to({
                scrollV: a
            }, 500).call(function () {
                e.isTween = !1
            })
        }
    }, t
}();
__reflect(ScrollMove.prototype, "ScrollMove");
var SHA1 = function () {
    function t() {
        this.hexcase = 0, this.b64pad = ""
    }
    return t.prototype.hex_sha1 = function (t) {
        return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(t)))
    }, t.prototype.b64_sha1 = function (t) {
        return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(t)))
    }, t.prototype.any_sha1 = function (t, e) {
        return this.rstr2any(this.rstr_sha1(this.str2rstr_utf8(t)), e)
    }, t.prototype.hex_hmac_sha1 = function (t, e) {
        return this.rstr2hex(this.rstr_hmac_sha1(this.str2rstr_utf8(t), this.str2rstr_utf8(e)))
    }, t.prototype.b64_hmac_sha1 = function (t, e) {
        return this.rstr2b64(this.rstr_hmac_sha1(this.str2rstr_utf8(t), this.str2rstr_utf8(e)))
    }, t.prototype.any_hmac_sha1 = function (t, e, i) {
        return this.rstr2any(this.rstr_hmac_sha1(this.str2rstr_utf8(t), this.str2rstr_utf8(e)), i)
    }, t.prototype.sha1_vm_test = function () {
        return "a9993e364706816aba3e25717850c26c9cd0d89d" == this.hex_sha1("abc").toLowerCase()
    }, t.prototype.rstr_sha1 = function (t) {
        return this.binb2rstr(this.binb_sha1(this.rstr2binb(t), 8 * t.length))
    }, t.prototype.rstr_hmac_sha1 = function (t, e) {
        var i = this.rstr2binb(t);
        i.length > 16 && (i = this.binb_sha1(i, 8 * t.length));
        for (var o = Array(16), n = Array(16), a = 0; 16 > a; a++) o[a] = 909522486 ^ i[a], n[a] = 1549556828 ^ i[a];
        var s = this.binb_sha1(o.concat(this.rstr2binb(e)), 512 + 8 * e.length);
        return this.binb2rstr(this.binb_sha1(n.concat(s), 672))
    }, t.prototype.rstr2hex = function (t) {
        try {
            this.hexcase
        } catch (e) {
            this.hexcase = 0
        }
        for (var i, o = this.hexcase ? "0123456789ABCDEF" : "0123456789abcdef", n = "", a = 0; a < t.length; a++) i = t.charCodeAt(a), n += o.charAt(i >>> 4 & 15) + o.charAt(15 & i);
        return n
    }, t.prototype.rstr2b64 = function (t) {
        try {
            this.b64pad
        } catch (e) {
            this.b64pad = ""
        }
        for (var i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", o = "", n = t.length, a = 0; n > a; a += 3)
            for (var s = t.charCodeAt(a) << 16 | (n > a + 1 ? t.charCodeAt(a + 1) << 8 : 0) | (n > a + 2 ? t.charCodeAt(a + 2) : 0), r = 0; 4 > r; r++) o += 8 * a + 6 * r > 8 * t.length ? this.b64pad : i.charAt(s >>> 6 * (3 - r) & 63);
        return o
    }, t.prototype.rstr2any = function (t, e) {
        var i, o, n, a, s = e.length,
            r = Array(),
            l = Array(Math.ceil(t.length / 2));
        for (i = 0; i < l.length; i++) l[i] = t.charCodeAt(2 * i) << 8 | t.charCodeAt(2 * i + 1);
        for (; l.length > 0;) {
            for (a = Array(), n = 0, i = 0; i < l.length; i++) n = (n << 16) + l[i], o = Math.floor(n / s), n -= o * s, (a.length > 0 || o > 0) && (a[a.length] = o);
            r[r.length] = n, l = a
        }
        var h = "";
        for (i = r.length - 1; i >= 0; i--) h += e.charAt(r[i]);
        var c = Math.ceil(8 * t.length / (Math.log(e.length) / Math.log(2)));
        for (i = h.length; c > i; i++) h = e[0] + h;
        return h
    }, t.prototype.str2rstr_utf8 = function (t) {
        for (var e, i, o = "", n = -1; ++n < t.length;) e = t.charCodeAt(n), i = n + 1 < t.length ? t.charCodeAt(n + 1) : 0, e >= 55296 && 56319 >= e && i >= 56320 && 57343 >= i && (e = 65536 + ((1023 & e) << 10) + (1023 & i), n++), 127 >= e ? o += String.fromCharCode(e) : 2047 >= e ? o += String.fromCharCode(192 | e >>> 6 & 31, 128 | 63 & e) : 65535 >= e ? o += String.fromCharCode(224 | e >>> 12 & 15, 128 | e >>> 6 & 63, 128 | 63 & e) : 2097151 >= e && (o += String.fromCharCode(240 | e >>> 18 & 7, 128 | e >>> 12 & 63, 128 | e >>> 6 & 63, 128 | 63 & e));
        return o
    }, t.prototype.str2rstr_utf16le = function (t) {
        for (var e = "", i = 0; i < t.length; i++) e += String.fromCharCode(255 & t.charCodeAt(i), t.charCodeAt(i) >>> 8 & 255);
        return e
    }, t.prototype.str2rstr_utf16be = function (t) {
        for (var e = "", i = 0; i < t.length; i++) e += String.fromCharCode(t.charCodeAt(i) >>> 8 & 255, 255 & t.charCodeAt(i));
        return e
    }, t.prototype.rstr2binb = function (t) {
        for (var e = Array(t.length >> 2), i = 0; i < e.length; i++) e[i] = 0;
        for (var i = 0; i < 8 * t.length; i += 8) e[i >> 5] |= (255 & t.charCodeAt(i / 8)) << 24 - i % 32;
        return e
    }, t.prototype.binb2rstr = function (t) {
        for (var e = "", i = 0; i < 32 * t.length; i += 8) e += String.fromCharCode(t[i >> 5] >>> 24 - i % 32 & 255);
        return e
    }, t.prototype.binb_sha1 = function (t, e) {
        t[e >> 5] |= 128 << 24 - e % 32, t[(e + 64 >> 9 << 4) + 15] = e;
        for (var i = Array(80), o = 1732584193, n = -271733879, a = -1732584194, s = 271733878, r = -1009589776, l = 0; l < t.length; l += 16) {
            for (var h = o, c = n, p = a, u = s, d = r, f = 0; 80 > f; f++) {
                16 > f ? i[f] = t[l + f] : i[f] = this.bit_rol(i[f - 3] ^ i[f - 8] ^ i[f - 14] ^ i[f - 16], 1);
                var g = this.safe_add(this.safe_add(this.bit_rol(o, 5), this.sha1_ft(f, n, a, s)), this.safe_add(this.safe_add(r, i[f]), this.sha1_kt(f)));
                r = s, s = a, a = this.bit_rol(n, 30), n = o, o = g
            }
            o = this.safe_add(o, h), n = this.safe_add(n, c), a = this.safe_add(a, p), s = this.safe_add(s, u), r = this.safe_add(r, d)
        }
        return [o, n, a, s, r]
    }, t.prototype.sha1_ft = function (t, e, i, o) {
        return 20 > t ? e & i | ~e & o : 40 > t ? e ^ i ^ o : 60 > t ? e & i | e & o | i & o : e ^ i ^ o
    }, t.prototype.sha1_kt = function (t) {
        return 20 > t ? 1518500249 : 40 > t ? 1859775393 : 60 > t ? -1894007588 : -899497514
    }, t.prototype.safe_add = function (t, e) {
        var i = (65535 & t) + (65535 & e),
            o = (t >> 16) + (e >> 16) + (i >> 16);
        return o << 16 | 65535 & i
    }, t.prototype.bit_rol = function (t, e) {
        return t << e | t >>> 32 - e
    }, t
}();
__reflect(SHA1.prototype, "SHA1");
var CFG_gbxs_603 = function () {
    function t() {}
    return t
}();
__reflect(CFG_gbxs_603.prototype, "CFG_gbxs_603");
var Util = function () {
    function t() {}
    return t.clearKeys = function (t) {
        for (var e in t) delete t[e]
    }, t.getTempArr = function () {
        var t = this.tempArr;
        return t.length = 0, this.tempArr
    }, t.getTempRect = function () {
        return this.tempRect || (this.tempRect = new egret.Rectangle), this.tempRect
    }, t.getTempObj = function () {
        this.tempObj || (this.tempObj = {});
        for (var t in this.tempObj) delete this.tempObj[t];
        return this.tempObj
    }, t.strToArr = function (t) {
        for (var e = t.split(";"), i = 0, o = e.length; o > i; i++) {
            var n = e[i].split(",");
            e[i] = n
        }
        return e
    }, t.strToIntArr = function (t) {
        for (var e = t.split(";"), i = 0, o = e.length; o > i; i++) {
            for (var n = e[i].split(","), a = 0, s = n.length; s > a; a++) n[a] = parseInt(n[a]);
            e[i] = n
        }
        return e
    }, t.parseIntStr = function (t, e) {
        void 0 === e && (e = ",");
        for (var i = t.split(e), o = 0, n = i.length; n > o; o++) i[o] = parseInt(i[o]);
        return i
    }, t.parseTime1 = function (t, e) {
        void 0 === e && (e = "2017-12-10 00:00:00");
        var i = new Date(t),
            o = i.getFullYear(),
            n = i.getMonth() + 1,
            a = i.getDate(),
            s = i.getHours(),
            r = i.getMinutes(),
            l = i.getSeconds(),
            h = s >= 10 ? s : "0" + s,
            c = r >= 10 ? r : "0" + r,
            p = l >= 10 ? l : "0" + l;
        return o + "-" + n + "-" + a + " " + h + ":" + c + ":" + p
    }, t.parseTime3 = function (t, e) {
        void 0 === e && (e = "00:00:00");
        var i = t / 1e3 >> 0,
            o = i / 3600 >> 0,
            n = i % 3600 >> 0,
            a = o >= 10 ? o : "0" + o,
            s = n / 60 >> 0 >= 10 ? n / 60 >> 0 : "0" + (n / 60 >> 0),
            r = n % 60 >> 0 >= 10 ? n % 60 >> 0 : "0" + (n % 60 >> 0);
        return a + ":" + s + ":" + r
    }, t.getEndPageIndex = function (t, e) {
        0 > t && (t = 0);
        var i = Math.max(0, (t - 1) / e >> 0);
        return i
    }, t.getFromRange = function (t, e, i) {
        var o = Math.max(e, t);
        return Math.min(o, i)
    }, t.httpReponse = function (t, e, i, o, n) {
        void 0 === o && (o = egret.HttpMethod.GET), void 0 === n && (n = egret.HttpResponseType.ARRAY_BUFFER);
        var a = new egret.HttpRequest;
        a.responseType = n, a.open(t, o), a.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), a.send(), a.addEventListener(egret.Event.COMPLETE, function (t) {
            var o = t.currentTarget;
            e.call(i, o.response)
        }, this)
    }, t.getInstance = function () {
        return this._instance || (this._instance = new t), this._instance
    }, t.prototype.httpRequestAsync = function (e, i, o) {
        return __awaiter(this, void 0, void 0, function () {
            var n;
            return __generator(this, function (a) {
                return n = new Promise(function (n) {
                    t.httpRequest(e, i, o, this, function (t) {
                        var e = t.target;
                        n(e.response)
                    }, function () {
                        n(null)
                    })
                }), [2, n]
            })
        })
    }, t.httpRequest = function (t, e, i, o, n, a) {
        function s(t) {
            l.removeEventListener(egret.Event.COMPLETE, s, this), l.removeEventListener(egret.IOErrorEvent.IO_ERROR, r, this), n && n.call(o, t)
        }

        function r(t) {
            a && a.call(o, t), l.removeEventListener(egret.Event.COMPLETE, s, this), l.removeEventListener(egret.IOErrorEvent.IO_ERROR, r, this)
        }
        var l = new egret.HttpRequest;
        l.open(t, i), l.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), l.send(), l.addEventListener(egret.Event.COMPLETE, s, this), l.addEventListener(egret.IOErrorEvent.IO_ERROR, r, this)
    }, t.joinUrl = function (t, e) {
        var i = 0;
        for (var o in e) t += 0 == i ? "?" + o + "=" + e[o] : "&" + o + "=" + e[o], i++;
        return t
    }, t.tempArr = [], t
}();
__reflect(Util.prototype, "Util");
var Config = function () {
    function t() {}
    return t.init = function (e) {
        t.s_configs = {};
        for (var i in e) {
            var o = egret.getDefinitionByName(i);
            if (o) {
                var n = e[i],
                    a = n.length,
                    s = new Dictionary;
                t.s_configs[i] = s;
                for (var r = 0; a > r; r++) {
                    for (var l = new o, h = l.attrs(), c = n[r], p = 0, u = h.length; u > p; p++) l[h[p]] = c[p];
                    s.set(l[h[0]], l)
                }
            } else egret.log(name + "在ConfigBase文件中未定义")
        }
    }, t.getConfig = function (e) {
        var i = egret.getQualifiedClassName(e);
        return t.s_configs[i]
    }, t
}();
__reflect(Config.prototype, "Config");
var Direction = eui.Direction,
    Dictionary = function () {
        function t() {
            this.m_keys = [], this.m_values = [], this.m_keys = [], this.m_values = [], this._length = 0
        }
        return Object.defineProperty(t.prototype, "length", {
            get: function () {
                return this._length
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "values", {
            get: function () {
                return this.m_values
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "keys", {
            get: function () {
                return this.m_keys
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.set = function (t, e) {
            var i = this.getKeyIndex(t);
            i >= 0 ? this.m_values[i] = e : (this.m_keys.push(t), this.m_values.push(e), this._length++)
        }, t.prototype.getKeyByValue = function (t) {
            return this.m_keys[this.getValueIndex(t)]
        }, t.prototype.getKeyIndex = function (t) {
            return this.m_keys.indexOf(t)
        }, t.prototype.getValueIndex = function (t) {
            return this.m_values.indexOf(t)
        }, t.prototype.exist = function (t) {
            return this.m_keys.indexOf(t) >= 0
        }, t.prototype.forEach = function (t, e) {
            void 0 === e && (e = null);
            for (var i = this.keys.length, o = 0; i > o; o++)
                if (e) {
                    if (!t.call(e, o, this.keys[o], this.values[o])) break
                } else if (!t(o, this.keys[o], this.values[o])) break
        }, t.prototype.get = function (t) {
            var e = this.getKeyIndex(t);
            return e >= 0 ? this.m_values[e] : null
        }, t.prototype.remove = function (t) {
            var e = this.getKeyIndex(t);
            if (e >= 0) {
                this.m_keys.splice(e, 1);
                var i = this.m_values.splice(e, 1)[0];
                return this._length++, i
            }
            return null
        }, t.prototype.clear = function () {
            this.m_keys.length = 0, this.m_values.length = 0, this._length = 0
        }, Object.defineProperty(t.prototype, "configMap", {
            get: function () {
                for (var t = {}, e = this.length, i = this.keys, o = this.values, n = 0; e > n; n++) t[i[n]] = o[n];
                return t
            },
            enumerable: !0,
            configurable: !0
        }), t.create = function () {
            var e;
            return e = t.pool && t.pool.length > 0 ? t.pool.pop() : new t
        }, t.release = function (e) {
            t.pool || (t.pool = []), e.clear(), t.pool.push(e)
        }, t
    }();
__reflect(Dictionary.prototype, "Dictionary");
var CFG_GuanQia = function () {
    function t() {}
    return t.GKAWARDLIST = "32,31,900,901,902", t
}();
__reflect(CFG_GuanQia.prototype, "CFG_GuanQia");
var CFG_GuanQia2 = function () {
    function t() {}
    return t.LIB = {
        1: {
            m: [2001, 2001, 2001, 2001, 2001],
            b: 2,
            a: [
                [11, 11, 100]
            ]
        },
        2: {
            m: [2001, 2001, 2001, 2001, 2001],
            b: 2,
            a: [
                [11, 11, 100]
            ]
        },
        3: {
            m: [2001, 2001, 2001, 2001, 2001],
            b: 2,
            a: [
                [11, 11, 100]
            ]
        },
        4: {
            m: [2001, 2001, 2001, 2001, 2001],
            b: 2,
            a: [
                [11, 11, 100]
            ]
        },
        5: {
            m: [2001, 2001, 2001, 2001, 2001],
            b: 2,
            a: [
                [11, 11, 100]
            ]
        },
        6: {
            m: [2001, 2001, 2001, 2001, 2001],
            b: 2,
            a: [
                [11, 11, 100]
            ]
        },
        7: {
            m: [2001, 2001, 2001, 2001, 2001],
            b: 2,
            a: [
                [11, 11, 100]
            ]
        },
        8: {
            m: [2001, 2001, 2001, 2001, 2001],
            b: 2,
            a: [
                [11, 11, 100]
            ]
        },
        9: {
            m: [2001, 2001, 2001, 2001, 2001],
            b: 2,
            a: [
                [11, 11, 100]
            ]
        }
    }, t
}();
__reflect(CFG_GuanQia2.prototype, "CFG_GuanQia2");
var CFG_Hero = function () {
    function t() {}
    return t.initSkill = function (e) {
        var i = t.BASESKILLLIB[e.job];
        if (!i || e.skillList) return void(i = t.BASESKILLLIB[1]);
        e.skillList = [];
        for (var o = 0; o < i.skills.length; o++) {
            var n = i.skills[o],
                a = Vo_Skill.create(n, 1);
            e.skillList.push(a)
        }
    }, t.setSkill = function (t) {
        var e = GameGlobal.modelRole.voMine.mainRole.skillList,
            i = GameGlobal.modelRole.voMine.job,
            o = t.lib[t.highestJie],
            n = 1 == i ? o.jnnan : o.jnnv,
            a = CFG_Skill.LIB[n];
        if (a) {
            var s = e[a.pos - 1];
            s.setTo(a.ID, s.level)
        }
    }, t.getSkill = function (t, e) {
        var i = GameGlobal.modelRole.voMine.mainRole.skillList,
            o = GameGlobal.modelRole.voMine.job,
            n = t.lib[e],
            a = 1 == o ? n.jnnan : n.jnnv,
            s = CFG_Skill.LIB[a];
        return s ? i[s.pos - 1] : null
    }, t.getNextSkill = function (t, e, i) {
        void 0 === i && (i = !0);
        var o = i ? t.highestJie : 1,
            n = t.lib,
            a = !1,
            s = GameGlobal.modelRole.voMine.job;
        if (!n[o + 1]) return null;
        var r = n[o];
        for (var l in n) {
            var h = n[l];
            if (a) {
                var c = 1 == s ? h.jnnan : h.jnnv,
                    p = 1 == s ? r.jnnan : r.jnnv;
                if (p != c) return this.Voskill || (this.Voskill = new Vo_Skill), this.Voskill.setTo(c, e), this.Voskill
            }
            l == o.toString() && (a = !0)
        }
        return null
    }, t.createFristSkill = function (t, e) {
        var i = t.lib,
            o = !1,
            n = GameGlobal.modelRole.voMine.job,
            a = i[1];
        for (var s in i) {
            var r = i[s];
            if (o) {
                var l = 1 == n ? r.jnnan : r.jnnv,
                    h = 1 == n ? a.jnnan : a.jnnv;
                if (h != l) return this.Voskill || (this.Voskill = new Vo_Skill), this.Voskill.setTo(l, e), this.Voskill
            }
            s == t.highestJie.toString() && (o = !0)
        }
        return null
    }, t.getLevelupExp = function (t) {
        var e = this.LIB[t];
        return e ? e.exp : 0
    }, t.BASESKILLLIB = {
        1: {
            skills: [1009001, 1009200, 1009400, 1009600, 1009800, 101e4, 1010001, 1010002]
        },
        2: {
            skills: [1020001, 1020200, 1020400, 1020600, 1020800, 1021e3, 1021001, 1010002]
        }
    }, t
}();
__reflect(CFG_Hero.prototype, "CFG_Hero");
var ScrollMap = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.head = "", e.blockDict = {}, e.blockSizeW = 256, e.blockSizeH = 256, e.focusx = 0, e.focusy = 0, e.invalid = 0, e._lastRow0 = -1, e._lastCol0 = -1, e._lastNumCol = -1, e._lastNumRow = -1, e.tileLayer = new egret.Sprite, e.addChild(e.tileLayer), e
    }
    return __extends(e, t), e.prototype.initCustom = function (t, e, i, o) {
        this.viewPort = new egret.Rectangle(0, 0, t, e), this.mapPort = new egret.Rectangle(0, 0, i, o)
    }, e.prototype.updateViewLimit = function () {
        var t = this.mapPort,
            e = this.viewPort;
        this.limitLeft = t.x, this.limitRight = t.width - e.width, this.limitTop = t.y, this.limitBottom = t.height - e.height, this.focusLimitLeft = t.x + e.width / 2, this.focusLimitRight = t.right - e.width / 2, this.focusLimitTop = t.y + e.height / 2, this.focusLimitBottom = t.bottom - e.height / 2
    }, e.prototype.watchFocus = function (t, e) {
        if (this.focusx != t || this.focusy != e) {
            var i = this.focusLimitLeft,
                o = this.focusLimitRight,
                n = this.focusLimitTop,
                a = this.focusLimitBottom,
                s = this.viewPort;
            i > t && (t = i), t > o && (t = o), n > e && (e = n), e > a && (e = a), this.focusx = t, this.focusy = e;
            var r = t - s.width / 2,
                l = e - s.height / 2;
            r < this.limitLeft ? r = this.limitLeft : r > this.limitRight && (r = this.limitRight), l < this.limitTop ? l = this.limitTop : l > this.limitBottom && (l = this.limitBottom), this.left = r, this.top = l, this.$setX(-r), this.$setY(-l), this.checkRebuild()
        }
    }, e.prototype.checkRebuild = function () {
        var t = this.blockSizeH,
            e = this.blockSizeW,
            i = this.top / this.blockSizeH >> 0,
            o = this.left / this.blockSizeW >> 0,
            n = this.viewPort,
            a = Math.ceil(n.width / e),
            s = Math.ceil(n.height / t);
        this.left % e == 0 && (a -= 1), this.top % t == 0 && (s -= 1), (this.invalid || i != this._lastRow0 || o != this._lastCol0 || s != this._lastNumRow || a != this._lastNumCol) && (this.rebuild(i, o, s, a), this.invalid = 0)
    }, e.prototype.rebuild = function (t, e, i, o) {
        var n = this.blockDict,
            a = this.mapPort,
            s = e + o,
            r = t + i,
            l = Math.ceil(a.width / this.blockSizeW) - 1,
            h = Math.ceil(a.height / this.blockSizeH) - 1;
        r > h && (r = h), s > l && (s = l);
        var c = this.head;
        for (var p in n) {
            var u = n[p];
            (u.head != c || u.r < t || u.r > r || u.c < e || u.c > s) && (delete n[p], u.onRemove())
        }
        for (var d = t; r >= d; d++)
            for (var f = e; s >= f; f++) {
                var p = c + "_" + d.toString() + "_" + f,
                    g = n[p];
                null == g && (g = this.itemCreateFunc(this, p, d, f), g.onAdd(), n[p] = g)
            }
        this._lastRow0 = t, this._lastCol0 = e, this._lastNumRow = i, this._lastNumCol = o
    }, e.prototype.sendItemEvent = function (t, e) {
        for (var i in this.blockDict) {
            var o = this.blockDict[i];
            o.onEvent(t, e)
        }
    }, e
}(egret.Sprite);
__reflect(ScrollMap.prototype, "ScrollMap");
var ScrollMapItemDef = function () {
    function t() {
        this.imgTile = new egret.Bitmap
    }
    return t.CREATEFUNC = function (e, i, o, n) {
        var a = t.P.length ? t.P.pop() : new t;
        return a.scrollmap = e, a.k = i, a.r = o, a.c = n, a
    }, t.prototype.onAdd = function () {
        this.head = this.scrollmap.head;
        var e = this.imgUrl = "resource/map/" + this.scrollmap.head + "/clipmap/" + this.r + "_" + this.c + ".jpg";
        this.scrollmap.tileLayer;
        RES.getResByUrl(e, this.onImgLoaded, this, RES.ResourceItem.TYPE_IMAGE), this.scrollmap.tileLayer.addChild(this.imgTile);
        var i = t,
            o = i.imageUrls[this.head];
        o && -1 == o.tiles.indexOf(e) && o.tiles.push(e)
    }, t.prototype.onImgLoaded = function (t, e) {
        e == this.imgUrl && (this.imgTile.$setX(this.c * this.scrollmap.blockSizeW), this.imgTile.$setY(this.r * this.scrollmap.blockSizeH), this.imgTile.texture = t)
    }, t.prototype.onRemove = function () {
        var e = this.scrollmap.tileLayer.$children.indexOf(this.imgTile);
        this.scrollmap.tileLayer.$doRemoveChild(e, !1), t.P.push(this), this.imgTile.texture = null
    }, t.prototype.dispose = function () {}, t.prototype.onEvent = function (t, e) {}, t.imageUrls = {}, t.P = [], t
}();
__reflect(ScrollMapItemDef.prototype, "ScrollMapItemDef");
var ScrollMapUI = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.head = "", e.blockDict = {}, e.blockSizeW = 256, e.blockSizeH = 256, e.focusx = 0, e.focusy = 0, e.invalid = 0, e._scrollV = 0, e._lastRow0 = -1, e._lastCol0 = -1, e._lastNumCol = -1, e._lastNumRow = -1, e.tileLayer = new egret.Sprite, e.addChild(e.tileLayer), e
    }
    return __extends(e, t), Object.defineProperty(e.prototype, "scrollV", {
        get: function () {
            return this._scrollV
        },
        set: function (t) {
            this._scrollV = t
        },
        enumerable: !0,
        configurable: !0
    }), e.prototype.renderItem = function () {}, e.prototype.addEvent = function () {
        this.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onTouchBegan, this)
    }, e.prototype.onTouchBegan = function (t) {}, e.prototype.onTouchEnd = function (t) {}, e.prototype.initCustom = function (t, e, i, o) {
        this.viewPort = new egret.Rectangle(0, 0, t, e), this.mapPort = new egret.Rectangle(0, 0, i, o)
    }, e.prototype.updateViewLimit = function () {
        var t = this.mapPort,
            e = this.viewPort;
        this.limitLeft = t.x, this.limitRight = t.width - e.width, this.limitTop = t.y, this.limitBottom = t.height - e.height, this.focusLimitLeft = t.x + e.width / 2, this.focusLimitRight = t.right - e.width / 2, this.focusLimitTop = t.y + e.height / 2, this.focusLimitBottom = t.bottom - e.height / 2
    }, e.prototype.watchFocus = function (t, e) {
        var i = this.focusLimitLeft,
            o = this.focusLimitRight,
            n = this.focusLimitTop,
            a = this.focusLimitBottom,
            s = this.viewPort;
        i > t && (t = i), t > o && (t = o), n > e && (e = n), e > a && (e = a), this.focusx = t, this.focusy = e;
        var r = t - s.width / 2,
            l = e - s.height / 2;
        r < this.limitLeft ? r = this.limitLeft : r > this.limitRight && (r = this.limitRight), l < this.limitTop ? l = this.limitTop : l > this.limitBottom && (l = this.limitBottom), this.left = r, this.top = l, this.$setX(-r), this.$setY(-l), this.checkRebuild()
    }, e.prototype.checkRebuild = function () {
        var t = this.blockSizeH,
            e = this.blockSizeW,
            i = this.top / this.blockSizeH >> 0,
            o = this.left / this.blockSizeW >> 0,
            n = this.viewPort,
            a = Math.ceil(n.width / e),
            s = Math.ceil(n.height / t);
        this.left % e == 0 && (a -= 1), this.top % t == 0 && (s -= 1), (this.invalid || i != this._lastRow0 || o != this._lastCol0 || s != this._lastNumRow || a != this._lastNumCol) && (this.rebuild(i, o, s, a), this.invalid = 0)
    }, e.prototype.rebuild = function (t, e, i, o) {
        var n = this.blockDict,
            a = this.mapPort,
            s = e + o,
            r = t + i,
            l = Math.ceil(a.width / this.blockSizeW) - 1,
            h = Math.ceil(a.height / this.blockSizeH) - 1;
        r > h && (r = h), s > l && (s = l);
        var c = this.head;
        for (var p in n) {
            var u = n[p];
            (u.head != c || u.r < t || u.r > r || u.c < e || u.c > s) && (delete n[p], u.onRemove())
        }
        for (var d = t; r >= d; d++)
            for (var f = e; s >= f; f++) {
                var p = c + "_" + d.toString() + "_" + f,
                    g = n[p];
                null == g && (g = this.itemCreateFunc(this, p, d, f), g.onAdd(), n[p] = g)
            }
        this._lastRow0 = t, this._lastCol0 = e, this._lastNumRow = i, this._lastNumCol = o
    }, e.prototype.sendItemEvent = function (t, e) {
        for (var i in this.blockDict) {
            var o = this.blockDict[i];
            o.onEvent(t, e)
        }
    }, e
}(egret.Sprite);
__reflect(ScrollMapUI.prototype, "ScrollMapUI");
var MTween = function () {
    function t() {
        this.threads = []
    }
    return t.prototype.add = function (t) {
        t.queue.length && !t.curterm && (t.nextTerm(), this.threads.push(t))
    }, t.prototype.update = function (t) {
        for (var e = this.threads, i = 0, o = 0, n = e.length; n > o; o++) {
            var a = e[o];
            if (a) {
                var s = a.curterm;
                s.total += t;
                var r = s.total / s.duration;
                if (r > 1 && (r = 1), 0 == s.t) {
                    var l = s.ease ? s.ease(r) : r;
                    for (var h in s.targetProps) 1 == l ? a.target[h] = s.targetProps[h] : a.target[h] = s.props[h] + (s.targetProps[h] - s.props[h]) * l
                }
                if (r >= 1) {
                    do var c = a.nextTerm(); while (c);
                    a.curterm || (a.dispose(), this.threads[o] = null, i = 1)
                }
            } else i = 1
        }
        i && ArrayUtil.cleannull(e)
    }, t.prototype.removeTar = function (t) {
        for (var e = this.threads.length - 1; e >= 0; e--) {
            var i = this.threads[e];
            i && i.target == t && (this.threads[e] = null)
        }
    }, t.prototype.clear = function () {
        for (var t = 0, e = this.threads.length; e > t; t++) {
            var i = this.threads[t];
            i && i.dispose()
        }
        this.threads.length = 0
    }, t
}();
__reflect(MTween.prototype, "MTween");
var MTweenThread = function () {
    function t() {
        this.queue = [], this.index = 0
    }
    return t.create = function (e) {
        var i = this.POOL.length ? this.POOL.pop() : new t;
        return i.target = e, i
    }, t.prototype.nextTerm = function () {
        var t = !1,
            e = this.curterm = this.queue[this.index++];
        if (e) {
            if (0 == e.t) {
                var i = e.targetProps;
                for (var o in i)
                    for (var o in i) e.props[o] = this.target[o]
            } else 1 == e.t || 2 == e.t && (e._comp.apply(e._compThis, e._compArg), t = !0);
            return t
        }
    }, t.prototype.to = function (t, e, i) {
        void 0 === i && (i = null);
        var o = this,
            n = MTweenTerm.create();
        return n.duration = e, n.total = 0, n.ease = i, n.targetProps = t, n.t = 0, this.queue.push(n), o
    }, t.prototype.wait = function (t) {
        var e = MTweenTerm.create();
        return e.t = 1, e.total = 0, e.duration = t, this.queue.push(e), this
    }, t.prototype.call = function (t, e, i) {
        void 0 === e && (e = null), void 0 === i && (i = null);
        var o = MTweenTerm.create();
        return o.t = 2, o._comp = t, o._compThis = e, o._compArg = i, this.queue.push(o), this
    }, t.prototype.dispose = function () {
        var e = this;
        e.target = null;
        for (var i = 0, o = this.queue.length; o > i; i++) this.queue[i].dispose();
        this.queue.length = 0, this.index = 0, this.curterm = null, t.POOL.push(e)
    }, t.POOL = [], t
}();
__reflect(MTweenThread.prototype, "MTweenThread");
var MTweenTerm = function () {
    function t() {
        this.t = 0, this.props = {}, this.duration = 0, this.total = 0
    }
    return t.create = function () {
        return this.PO.length ? this.PO.pop() : new t
    }, t.prototype.dispose = function () {
        var e = this;
        for (var i in e.props) delete e.props[i];
        e.ease = null, e.total = 0, e.duration = 0, t.PO.push(this), e._compThis = null, e._comp = null, e._compArg = null
    }, t.PO = [], t
}();
__reflect(MTweenTerm.prototype, "MTweenTerm");